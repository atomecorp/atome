// MIT License - Copyright 2019 Frank Force - https://github.com/KilledByAPixel/ZzFX
function zid(e){return z_d("1"),document.getElementById(e)}function zss(e){if(z_d("2"),document.getElementById(e))return document.getElementById(e).style;zon&&zogy("zss(): id not found")}function zgo(e,t,o,n,r,i){if(z_d("3"),!(zot(t)&&""!=t||"_self"==t)){var a="";return o&&(a+="width="+o+","),n&&(a+="height="+n+","),r&&(a+="fullscreen=yes,"),i&&(a+="modal=yes,alwaysRaised=yes"),window.open(e,t,a)}window.location.href=e}function zum(e){if(z_d("4"),!zot(e))return Number(String(e).replace(/[^\d\.\-]/g,""))}function zot(e){return null==e}function zop(e){z_d("5"),zot(e)||(e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0))}function zil(){z_d("6");var e=function(e){e||(e=event),e.keyCode&&e.keyCode>=32&&e.keyCode<=40&&e.preventDefault()},t=function(e){e||(e=event),e.preventDefault()},o=t;return window.addEventListener("keydown",e,{passive:!1}),window.addEventListener("wheel",t,{passive:!1}),window.addEventListener("DOMMouseScroll",o,{passive:!1}),[e,t,o]}function zet(e){function t(){var t=this;this.on=function(o,n){if(!(zot(e)||zot(o)||zot(n)))for(var r=t.tags,i=0;i<r.length;i++)r[i].addEventListener(o,n)},this.off=function(o,n){if(!(zot(e)||zot(o)||zot(n)))for(var r=t.tags,i=0;i<r.length;i++)r[i].removeEventListener(o,n)},Object.defineProperty(t,"tags",{get:function(){return zot(e)?[]:"string"==typeof e||e instanceof String?document.querySelectorAll(e):"string"==typeof e.innerHTML?[e]:[]},set:function(){}}),this.css=function(e,o){for(var n=t.tags,r=0;r<n.length;r++)if(1==arguments.length&&arguments[0].constructor==={}.constructor)for(var i in e)n[r].style[i]=e[i];else{if(1==arguments.length)return t.tags[0].style[e];n[r].style[e]=o}},this.prop=function(e,o){if(!zot(e)){for(var n=t.tags,r=[],i=0;i<n.length;i++)if(zot(o))if(e.constructor==={}.constructor)for(var a in e)n[i][a]=e[a];else r.push(n[i][e]);else n[i][e]=o;return zot(o)?r:void 0}}}return z_d("6.1"),new t}function isDUO(e){return 1==e.length&&e[0]!=undefined&&e[0].constructor==={}.constructor}function zob(e,t,o,n){var r=zim&&(zim.ZIMONON||ZIMONON);if(isDUO(t)){z_d("7");var i,a,l,s=t[0],c=zot(o)?e.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","):o.replace(/\s+/g,"").split(","),u=[];for(i=0;i<c.length;i++)a=c[i].split("=")[0],c[i]=a,u.push(s[a]);for(i in s)c.indexOf(i)<0&&zon&&zogy(e,"bad argument "+i);return!(l=e.prototype.isPrototypeOf(n)?new(e.bind.apply(e,[null].concat(u))):e.apply(null,u))||(r&&!l.arguments&&(l.arguments=[s]),l)}r&&n&&t&&zot(n.arguments)&&(n.arguments=Array.prototype.slice.call(t))}function zik(e){if(z_d("7.5"),z_d("17.6"),!zot(e))return zim.Pick.choose(e)}function z_d(e){zim&&(zim.DISTILL||window.DISTILL)&&zim.distillery.push(e)}function zimify(e,t){if(z_d("83.3"),e&&e.noDrag)return e;var o={drag:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f){return isDUO(arguments)?(arguments[0].obj=this,zim.drag(arguments[0])):zim.drag(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f)},noDrag:function(e){return zim.noDrag(this,e)},mouse:function(){return zim.mouse(this)},noMouse:function(){return zim.noMouse(this)},effect:function(e,t,o,n,r){return zim.effect(this,e,t,o,n,r)},noEffect:function(e,t){return zim.noEffect(this,e,t)},updateEffects:function(){return zim.updateEffects(this)},wire:function(e,t,o,n,r,i,a){return isDUO(arguments)?(arguments[0].source=this,zim.wire(arguments[0])):zim.wire(this,e,t,o,n,r,i,a)},noWire:function(e,t,o){return isDUO(arguments)?(arguments[0].source=this,zim.noWire(arguments[0])):zim.noWire(this,e,t,o)},wired:function(e,t,o,n,r,i,a){return isDUO(arguments)?(arguments[0].target=this,zim.wired(arguments[0])):zim.wired(this,e,t,o,n,r,i,a)},noWired:function(e,t,o){return isDUO(arguments)?(arguments[0].target=this,zim.noWired(arguments[0])):zim.noWired(this,e,t,o)},bind:function(e,t,o,n,r){return isDUO(arguments)?(arguments[0].obj=this,zim.bind(arguments[0])):zim.bind(this,e,t,o,n,r)},noBind:function(e,t,o,n){return isDUO(arguments)?(arguments[0].obj=this,zim.noBind(arguments[0])):zim.noBind(this,e,t,o,n)},dragBoundary:function(e){return zim.dragBoundary(this,e)},dragRect:function(e){return zim.dragBoundary(this,e)},transform:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P){return isDUO(arguments)?(arguments[0].obj=this,zim.transform(arguments[0])):zim.transform(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P)},setSwipe:function(e){return zim.setSwipe(this,e)},gesture:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p){return isDUO(arguments)?(arguments[0].obj=this,zim.gesture(arguments[0])):zim.gesture(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p)},noGesture:function(e,t,o){return isDUO(arguments)?(arguments[0].obj=this,zim.noGesture(arguments[0])):zim.noGesture(this,e,t,o)},gestureBoundary:function(e,t){return zim.gestureBoundary(this,e,t)},gestureRect:function(e,t){return zim.gestureBoundary(this,e,t)},addPhysics:function(e,t,o,n,r,i,a,l,s,c,u){return isDUO(arguments)?(arguments[0].obj=this,zim.addPhysics(arguments[0])):zim.addPhysics(this,e,t,o,n,r,i,a,l,s,c,u)},removePhysics:function(){return zim.removePhysics(this)},hitTestPoint:function(e,t,o){return zim.hitTestPoint(this,e,t,o)},hitTestReg:function(e,t){return zim.hitTestReg(this,e,t)},hitTestRect:function(e,t,o){return zim.hitTestRect(this,e,t,o)},hitTestCircle:function(e,t,o){return zim.hitTestCircle(this,e,t,o)},hitTestCircleRect:function(e,t){return zim.hitTestCircleRect(this,e,t)},hitTestCircles:function(e,t){return zim.hitTestCircles(this,e,t)},hitTestBounds:function(e,t,o){return zim.hitTestBounds(this,e,t,o)},boundsToGlobal:function(e,t,o){return zim.boundsToGlobal(this,e,t,o)},resetBounds:function(e,t,o,n){return zim.resetBounds(this,e,t,o,n)},hitTestPath:function(e,t,o){return zim.hitTestPath(this,e,t,o)},hitTestGrid:function(e,t,o,n,r,i,a,l,s,c,u,d){return zim.hitTestGrid(this,e,t,o,n,r,i,a,l,s,c,u,d)},animate:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y,D,X,R,W,H,F,V,N,G,q,Q,U,K,Z){return e&&(e.props||e.obj)&&isDUO(arguments)?(arguments[0].target=this,zim.animate(arguments[0])):zim.animate(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y,D,X,R,W,H,F,V,N,G,q,Q,U,K,Z)},pauseAnimate:function(){return this},stopAnimate:function(){return this},wiggle:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g){return isDUO(arguments)?(arguments[0].target=this,zim.wiggle(arguments[0])):zim.wiggle(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g)},loop:function(e,t,o,n,r){return zim.loop(this,e,t,o,n,r)},copyMatrix:function(e){return zim.copyMatrix(this,e)},duplicate:function(e){return zim.duplicate(this,e)},cur:function(e){return zim.cur(this,e)},sha:function(e,t,o,n){return zim.sha(this,e,t,o,n)},pos:function(e,t,o,n,r,i,a,l,s,c){return isDUO(arguments)?(arguments[0].obj=this,zim.pos(arguments[0])):zim.pos(this,e,t,o,n,r,i,a,l,s,c)},loc:function(e,t,o,n,r,i,a){return isDUO(arguments)?(arguments[0].obj=this,zim.loc(arguments[0])):zim.loc(this,e,t,o,n,r,i,a)},mov:function(e,t){return isDUO(arguments)?(arguments[0].obj=this,zim.mov(arguments[0])):zim.mov(this,e,t)},top:function(){return zim.top(this)},bot:function(){return zim.bot(this)},ord:function(e){return zim.ord(this,e)},dep:function(e){return zim.dep(this,e)},nam:function(e){return zim.nam(this,e)},alp:function(e){return zim.alp(this,e)},ble:function(e){return zim.ble(this,e)},hov:function(e,t){return zim.hov(this,e,t)},rot:function(e,t,o){return zim.rot(this,e,t,o)},siz:function(e,t,o){return zim.siz(this,e,t,o)},ske:function(e,t){return zim.ske(this,e,t)},reg:function(e,t,o){return zim.reg(this,e,t,o)},sca:function(e,t){return zim.sca(this,e,t)},scaleTo:function(e,t,o,n,r){return isDUO(arguments)?(arguments[0].obj=this,zim.scaleTo(arguments[0])):zim.scaleTo(this,e,t,o,n,r)},fit:function(e,t,o,n,r){return isDUO(arguments)?(arguments[0].obj=this,zim.fit(arguments[0])):zim.fit(this,e,t,o,n,r)},outline:function(e,t,o){return isDUO(arguments)?(arguments[0].obj=this,zim.outline(arguments[0])):zim.outline(this,e,t,o)},addTo:function(e,t,o){return isDUO(arguments)?(arguments[0].obj=this,zim.addTo(arguments[0])):zim.addTo(this,e,t,o)},removeFrom:function(e){return zim.removeFrom(this,e)},added:function(e,t,o){return zim.added(this,e,t,o)},movement:function(e,t){return zim.movement(this,e,t)},noMovement:function(){return zim.noMovement(this)},tap:function(e,t,o,n){return zim.tap(this,e,t,o,n)},noTap:function(){return zim.noTap(this)},hold:function(e,t,o,n){return zim.hold(this,e,t,o,n)},noHold:function(){return zim.noHold(this)},change:function(e,t){return zim.change(this,e,t)},noChange:function(){return zim.noChange(this)},centerReg:function(e,t,o){return isDUO(arguments)?(arguments[0].obj=this,zim.centerReg(arguments[0])):zim.centerReg(this,e,t,o)},center:function(e,t,o){return isDUO(arguments)?(arguments[0].obj=this,zim.center(arguments[0])):zim.center(this,e,t,o)},place:function(e){return zim.place(this,e)},placeReg:function(e){return zim.placeReg(this,e)},expand:function(e,t,o,n){return isDUO(arguments)?(arguments[0].obj=this,zim.expand(arguments[0])):zim.expand(this,e,t,o,n)},setMask:function(e,t){return zim.setMask(this,e,t)},cloneProps:function(e){return e.type=this.type,e.group=this.group,e.style=this.style,e.alpha=this.alpha,e.rotation=this.rotation,e.mouseEnabled=this.mouseEnabled,e.mouseChildren=this.mouseChildren,e.tickEnabled=this.tickEnabled,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.skewX=this.skewX,e.skewY=this.skewY,e.name&&(e.name=this.name),e.regX=this.regX*e.width/(this.width||1),e.regY=this.regY*e.height/(this.height||1),e.visible=this.visible,e.shadow=this.shadow,this.type&&"Shape"!=this.type||zim.copyMatrix(e,this),e.compositeOperation=this.compositeOperation,e.snapToPixel=this.snapToPixel,e.filters=null==this.filters?null:this.filters.slice(0),e.mask=this.mask,e.hitArea=this.hitArea,this.type&&"Shape"!=this.type&&"Blob"!=this.type&&"Squiggle"!=this.type||!this._bounds||e.setBounds(this._bounds.x,this._bounds.y,this._bounds.width,this._bounds.height),e},cloneChildren:function(e,t){e.children.length&&e.removeAllChildren();for(var o=e.children,n=0,r=this.children.length;n<r;n++){var i=this.children[n].clone(t);i.parent=e,o.push(i)}return e}};if(!zot(t)){for(var n in t=[],o)t.push(n);return t}for(var r in o)o.hasOwnProperty(r)&&(e[r]=o[r]);return zim&&(e.cjsLocalToGlobal=e.localToGlobal,e.cjsGlobalToLocal=e.globalToLocal,e.cjsLocalToLocal=e.localToLocal,e.localToGlobal=function(t,o){return zim.localToGlobal(t,o,e,e.cjsLocalToGlobal)},e.globalToLocal=function(t,o){return zim.globalToLocal(t,o,e,e.cjsGlobalToLocal)},e.localToLocal=function(t,o,n){return zim.localToLocal(t,o,n,e)},e.hueBatch||zim.displayBase(e)),e}function zimplify(e){z_d("83.35"),document.Window=Window,document.Blob=Blob,ignore="ignore",zot(e)&&(e=[]),Array.isArray(e)||(e=[e]);var t=zimify(null,!0),o=["loop","stopAnimate","pauseAnimate","animate","wiggle","wire","wired"];for(var n in zim)(-1==t.indexOf(n)||o.indexOf(n)>=0)&&-1==e.indexOf(n)&&(window[n]=zim[n])}"undefined"==typeof window&&(window={});var zimDefaultFrame=window.zimDefaultFrame,zdf=window.zdf,createjs=window.createjs,OPTIMIZE=window.OPTIMIZE,ACTIONEVENT=window.ACTIONEVENT,KEYFOCUS=window.KEYFOCUS,TIMECHECK=window.TIMECHECK,TIME=window.TIME,STYLE=window.STYLE,MOBILE=window.MOBILE,LOCALSTORAGE=window.LOCALSTORAGE,GET=window.GET,POST=window.POST,SOCKET=window.SOCKET,zimContactListener=window.zimContactListener,zimDefaultPhysics=window.zimDefaultPhysics,b2ContactListener=window.b2ContactListener,b2Vec2=window.b2Vec2;if(void 0===zon)var zon=!0;if(void 0===zns)var zns=!1;var ignore,zog=zon?console.log.bind(console):function(){},zogStyle=" border:thin solid black; color: black",zogg=zon?console.log.bind(console,"%c Z ","background: #acd241;"+zogStyle):function(){},zogp=zon?console.log.bind(console,"%c Z ","background: #e472c4;"+zogStyle):function(){},zogb=zon?console.log.bind(console,"%c Z ","background: #50c4b7;"+zogStyle):function(){},zogr=zon?console.log.bind(console,"%c Z ","background: #fb4758;"+zogStyle):function(){},zogy=zon?console.log.bind(console,"%c Z ","background: #ebcb35;"+zogStyle):function(){},zogo=zon?console.log.bind(console,"%c Z ","background: #f58e25;"+zogStyle):function(){},zogl=zon?console.log.bind(console,"%c Z ","background: #eeeeee;"+zogStyle):function(){},zogd=zon?console.log.bind(console,"%c Z ","background: #444444; border:thin solid black; color: white"):function(){},zta=console.table&&zon?console.table.bind(console):function(){},zor=function(){for(var e=0;e<arguments.length;e++)if(!zot(arguments[e]))return arguments[e]},zim=function(e){function t(t,o,r,i,a){e.timeCheck||(z_d("9.99"),e.timeCheck=!0);var l=zot(TIME)?zot(e.TIME)?"seconds":e.TIME:TIME;return l&&l.toLowerCase&&(l=l.toLowerCase()),"milliseconds"!=l&&"ms"!=l&&(l="seconds"),o&&o.toLowerCase&&(o=o.toLowerCase()),"ms"!=o&&"milliseconds"!=o&&"seconds"!=o&&"s"!=o||(l=o),zot(t)?l.charAt(0):("ms"==l&&(l="milliseconds"),"s"==l&&(l="seconds"),l=l.charAt(0),a||n(t,l,r,i),l)}function n(t,o,n,r){zot(n)&&(n=10),zot(r)&&(r=9),(e.TIMECHECK||TIMECHECK)&&("m"!=o&&t>n||"m"==o&&t<r)&&zon&&zogy("TIME - warning: time is in "+("m"==o?"milliseconds":"seconds")+" ("+t+")")}function r(t,o){if(t&&e.gD(t),!o&&t&&t.dispose&&t.dispose!==e.Container.prototype.dispose&&t.dispose(null,null,!0),t&&t.addChild&&(t.dispatchEvent("removed"),t.removeAllEventListeners(),t.numChildren))for(var n=t.numChildren-1;n>=0;n--)r(t.getChildAt(n));t&&t.parent&&t.parent.removeChild(t)}function i(e,t){t?(e.mouseChildren=!0,e.mouseEnabled=!0,e._enabled=!0):(e.mouseChildren=!1,e.mouseEnabled=!1,e._enabled=!1)}function a(t,o,n,r,i,a,l,s,c,h,g){function p(){function o(e){var t=u.at(e.m_fixtureB.GetBody());t&&t(e.m_fixtureA.GetBody().zimObj,e.m_fixtureA.GetBody()),(t=u.at(e.m_fixtureA.GetBody()))&&t(e.m_fixtureB.GetBody().zimObj,e.m_fixtureB.GetBody())}function n(e){var t=d.at(e.m_fixtureB.GetBody());t&&t(e.m_fixtureA.GetBody().zimObj,e.m_fixtureA.GetBody()),(t=d.at(e.m_fixtureB.GetBody().zimObj,e.m_fixtureB.GetBody()))&&t(e.m_fixtureB.GetBody())}zimContactListener=new b2ContactListener,u=new e.Dictionary(!0),d=new e.Dictionary(!0),zimContactListener.BeginContact=o,zimContactListener.EndContact=n,t.physics.world.SetContactListener(zimContactListener)}z_d("69.97"),zot(n)&&(n=0),"rectangle"==r?t.body=t.physics.makeRectangle(t.width-n,t.height-n,o,i,l,s,c,h,g,a):"circle"==r?t.body=t.physics.makeCircle(t.width/2-n,o,i,l,s,c,h,g,a):"triangle"==r&&(zot(t.a)&&(t.a=t.width,t.b=t.c=Math.sqrt(Math.pow(t.a/2,2)+Math.pow(t.height,2))),t.body=t.physics.makeTriangle(t.a-n,t.b-n,t.c-n,o,i,l,s,c,h,g,a)),t.body.x=t.x,t.body.y=t.y,t.body.rotation=t.rotation,t.physics.addMap(t.body,t),t.impulse=function(e,o,n,r){zot(e)&&(e=0),zot(o)&&(o=0);var i=t.body.GetWorldCenter();return zot(n)&&(n=i.x*t.physics.scale),zot(r)&&(r=i.y*t.physics.scale),t.body.ApplyImpulse(new b2Vec2(e,o),new b2Vec2(n/t.physics.scale,r/t.physics.scale)),t},t.force=function(e,o,n,r){zot(e)&&(e=0),zot(o)&&(o=0);var i=t.body.GetWorldCenter();return zot(n)&&(n=i.x*t.physics.scale),zot(r)&&(r=i.y*t.physics.scale),t.body.ApplyForce(new b2Vec2(e,o),new b2Vec2(n/t.physics.scale,r/t.physics.scale)),t},t.setLinearVelocity=function(e,o){return t.body.SetLinearVelocity(new b2Vec2(e,o)),t},t.setAngularVelocity=function(e){return t.body.SetAngularVelocity(e),t},t.spin=function(e){return zot(e)&&(e=10),t.body.ApplyTorque(1e3*e),t},t.torque=function(e){return zot(e)&&(e=10),t.body.ApplyTorque(e),t},t.follow=function(e,o,n,r,i,a,l,s,c,u,d,h){var g,p="damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, borderOriginal";return(g=zob(t.follow,arguments,p))?g:(t.physics.follow(t,e,o,n,r,i,a,l,s,c,u,d,h),t)},t.noFollow=function(){return t.physics.follow(null),t},t.control=function(e,o,n,r,i){var a,l="type, speed, speedY, horizontal, vertical";return(a=zob(t.control,arguments,l))?a:(t.physics.control(t,e,o,n,r,i),t)},t.noControl=function(){return t.physics.noControl(t),t},t.sleep=function(){return zog(t.body),t.body.SetAwake(!1),t},t.wake=function(){return t.body.SetAwake(!0),t},t.contact=function(e){return zimContactListener||p(),u.add(t.body,e),t},t.noContact=function(){return u.remove(t.body),t},t.contactEnd=function(e){return zimContactListener||p(),d.add(t.body,e),t},t.noContactEnd=function(){return d.remove(t.body),t},Object.defineProperty(t,"dynamic",{get:function(){return 2==t.body.GetType()},set:function(e){t.body.SetType(1==e?2:0)}})}if(e.chop=function(e,t,o,n){if(z_d("7.8"),!zot(e)){zot(t)&&(t=3),zot(o)&&(o=3),zot(n)&&(n=!0);var r=e.width/t,i=e.height/o,a=[];return loop(o,function(o){loop(t,function(t){a.push(new Bitmap(e,r,i,t*r,o*i))})}),n?new Tile(a,t,o,0,0,!0):a}},e.shuffle=function(e){if(z_d("8"),!zot(e)){var t,o,n=e.length;if(0==n)return e;for(;--n;)t=Math.floor(Math.random()*(n+1)),o=e[n],e[n]=e[t],e[t]=o;return e}},e.rand=function(e,t,o,n){return z_d("9"),zot(e)&&zot(t)?Math.random():((zot(e)||isNaN(e))&&(e=0),(zot(t)||isNaN(t))&&(t=0),e%1==0&&t%1==0||(o=!1),zot(o)&&(o=!0),n&&Math.random()>.5&&(e*=-1,t*=-1),o&&(e>t?e++:t>e&&t++),0==e&&0==t?0:(r=0==t?Math.random()*e:Math.min(e,t)+Math.random()*(Math.max(e,t)-Math.min(e,t)),o?Math.floor(r):r));var r},e.series=function(){var t,o;if(z_d("13.61"),0==arguments.length)return function(){};1==arguments.length&&Array.isArray(arguments[0])?t=arguments[0]:1==arguments.length&&arguments[0].constructor=={}.constructor?(zot((o=arguments[0]).min)&&(o.min=0),zot(o.max)&&(o.max=1),zot(o.step)&&(o.step=1),t=[],e.loop(Math.floor(Math.abs(o.max-o.min)+o.step),function(e){t.push(e+o.min)},null,o.step),o=null):t=Array.prototype.slice.call(arguments);var n,r=0,i=1,a=1,l=0,s=0,c=!1,u=!1,d=function(){if(l&&s%l!=0)return s++,n;s++;var e,o=t.length;return e=t[(10*o+r)%o],c?i>0&&r+i*a>=o?(i=-1,r=o-1-(r+a-(o-1))):i<0&&r+i*a<0?(i=1,r=a-r):r+=i*a:u?i>0&&r+i*a>=o?r=o-1:i<0&&r+i*a<0?r=0:r+=i*a:r+=i*a,n=e,e};return d.array=t,d.type="series",Object.defineProperty(d,"index",{get:function(){var e=t.length;return(10*e+r)%e},set:function(e){r=e}}),d.jump=function(e){return r=e,d},d.reverse=function(e){return zot(e)&&(e=!0),i=e?-1:1,r=t.length-1,d},d.bounce=function(e){zot(e)&&(e=!0);var o=t.length;return r=(10*o+r)%o,c=e,d},d.step=function(e){return zot(e)&&(e=1),a=Math.floor(e),d},d.every=function(e){return zot(e)&&(e=1),l=Math.abs(e),s=0,d},d.constrain=function(e){return zot(e)&&(e=!0),u=e,d},d},e.makeSeries=function(e){if(z_d("13.6"),zot(e))return function(){};var t=0,o=function(){return e[t++%e.length]};return o.array=e,o},e.loop=function(t,o,n,r,i,a){function l(e){return zot(i)&&(i=n?e:0),zot(a)&&(a=n?0:e),n&&a>i||!n&&i>a?0:(i<0&&a)<0||i>e&&a>e?0:(i=Math.max(0,Math.min(i,e)),a=Math.max(0,Math.min(a,e)),Math.floor((n?i-a:a-i)/r)+1)}var s,c="obj, call, reverse, step, start, end";if(s=zob(e.loop,arguments,c))return s;if(z_d("9.5"),zot(t)||zot(o))return undefined;zot(n)&&(n=!1),(zot(r)||r<=0)&&(r=1);var u="number"==typeof t?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":"string"==typeof t?"string":t instanceof NodeList?"nodelist":t instanceof HTMLCollection?"htmlcollection":"invalid";if("invalid"==u)return undefined;if("number"==u||"string"==u||"array"==u||"nodelist"==u||"htmlcollection"==u){if(0==(h=l((g="number"==u?t:t.length)-1)))return!0;if(n){for(var d=i;d>=a;d-=r)if(void 0!==(f="number"==u?o(d,h,i,a,t):o("array"==u||"string"==u?t[d]:t.item(d),d,h,i,a,t)))return f}else for(d=i;d<=a;d+=r)if(void 0!==(f="number"==u?o(d,h,i,a,t):o("array"==u||"string"==u?t[d]:t.item(d),d,h,i,a,t)))return f;return!0}if("object"==u){var h,g=0,p=[];for(var d in t)g++,p.push(d);if(0==(h=l(g-1)))return;if(n){for(d=i;d>=a;d-=r)if(void 0!==(f=o(p[d],t[p[d]],d,h,i,a,t)))return f}else for(d=i;d<=a;d+=r){var f;if(void 0!==(f=o(p[d],t[p[d]],d,h,i,a,t)))return f}return!0}},e.timeout=function(o,n,r,i){function a(){var e=Date.now();if(s.time+=(e-c)/("s"==l?1e3:1),c=e,s.time>=o)return s.done=!0,n(s),void s.clear();s.rid=requestAnimationFrame(a)}if(z_d("9.7"),!zot(n)&&"function"==typeof n){var l=t(o,i);zot(o)&&(o="s"==l?1:1e3),o=e.Pick.choose(o);var s={startTime:Date.now(),time:0,paused:!1,done:!1,timeUnit:i};r&&(zot(e.blurCheck)&&e.setBlurDetect(),e.pauseOnBlur.push(s));var c=s.startTime;return s.pause=function(e,t,o){zot(e)&&(e=!0),e?cancelAnimationFrame(s.rid):(t?c=0:o?(c=Date.now(),s.time=0):c=Date.now(),a()),s.paused=e},s.clear=function(){for(var e in s&&cancelAnimationFrame(s.rid),s)delete s[e];s.pause=function(){},s.clear=function(){}},a(),s}},e.interval=function(o,n,r,i,a,l){function s(){h.startTime=Date.now(),h.interval=e.Pick.choose(h.time),h.id=setTimeout(function(){h.paused||h.active&&(h.count++,n(h),s(),c())},h.interval*("s"==u?1e3:1))}function c(){-1!=r&&h.count>=(i?h.total-1:h.total)&&h.clear()}if(z_d("9.8"),!zot(n)&&"function"==typeof n){var u=t(o,l);if(zot(o)&&(o="s"==u?1:1e3),zot(i)&&(i=!1),zot(r)||!(isNaN(r)||r<=0)){zot(r)&&(r=-1);var d,h={count:0,total:r,paused:!1,time:o,active:!0,timeUnit:l};return a&&(zot(e.blurCheck)&&e.setBlurDetect(),e.pauseOnBlur.push(h)),i&&setTimeout(function(){n(h),c()},10),h.pause=function(e,t,o){zot(e)&&(e=!0),e?(clearTimeout(d),clearTimeout(h.id),cancelAnimationFrame(h.rid),h.pauseTimeLeft=h.interval-(Date.now()-h.startTime)/("s"==u?1e3:1)):(h.paused||h.pause(!0),d=setTimeout(function(){h.count++,n(h),s(),c()},t?0:(o?h.interval:h.pauseTimeLeft)*("s"==u?1e3:1)),h.pauseTimeLeft=null),h.paused=e},h.clear=function(){h.active=!1,clearTimeout(d),cancelAnimationFrame(h.rid),clearTimeout(h.id);var e=h.count;for(var t in h)delete h[t];h.active=!1,h.count=e,h.pause=function(){},h.clear=function(){}},s(),h}}},e.async=function(o,n,r,i,a){if(z_d("29"),!zot(o)){var l,s,c,u=document.createElement("script"),d=t(i);if(zot(i)&&(i="s"==d?2:2e3),n){if(r)var h=r;else h=n.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1];e.asyncList||(e.asyncList={}),e.asyncList[h]||(e.asyncList[h]=[]),e.asyncList[h].push(n),e.async[h]=(l=u,s=!1,c=setTimeout(function(){s=a,"function"==typeof n&&n("asyncError",a?"cancelled":"timeout")},i*("s"==d?1e3:1)),function(t){clearTimeout(c),e.asyncList[h]&&(n=e.asyncList[h].shift()),"function"!=typeof n||s||n(t),l&&l.parentNode.removeChild(l),l=null})}else e.async.z_s&&e.async.z_s.parentNode&&e.async.z_s.parentNode.removeChild(e.async.z_s),e.async.z_s=u;o.match(/\?/)||(o+="?"),u.setAttribute("src",o+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(u)}},e.couple=function(t){if(z_d("29.2"),!e.isJSON(t))return t;var o=JSON.parse(t),n={};for(var r in o){var i=o[r];for(var a in i)n[r+"_"+a]=i[a]}return JSON.stringify(n)},e.decouple=function(t){if(z_d("29.3"),!e.isJSON(t))return t;var o=JSON.parse(t),n={};for(var r in o){var i=r.split("_",2);if(2!=i.length)return t;n[i[0]]||(n[i[0]]={}),n[i[0]][i[1]]=o[r]}return JSON.stringify(n)},e.convertColor=function(t,o,n){function r(e){var t=Number(e).toString(16);return t.length<2&&(t="0"+t),t}function i(e){var t=e.split(",");return[r(t[0]),r(t[1]),r(t[2])]}if(e.convertColorCheck||(z_d("27.5"),e.convertColorCheck=!0),zot(o)&&(o="hex"),!zot(t)){t=zik(t);var a,l,s,c=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],u=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];if("zim"==o.toLowerCase())return e.colorsHex.indexOf(t)<0?t:e.colors[e.colorsHex.indexOf(t)];if(a=t.match(/rgba\((.*)\)/)){if(!zot(n))return(l=t.split(","))[3]=n+")",l.join(",");t="rgb("+a[1]+")"}if(zot(n),a=t.match(/rgb\((.*)\)/))return"rgba"==o?(l=t.split(")"))[0]+","+n+l[1]:"hex"==o?"#"+(c=i(a[1]))[0]+c[1]+c[2]:"hexNumber"==o?(c=i(a[1]),parseInt(c[0]+c[1]+c[2],16)):"string"==o?(t=i(a[1]).join("").toLowerCase(),-1==(s=u.indexOf(t))?"#"+t:c[s]):t;if("rgb"==o||"rgba"==o){function d(e){var t;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(3==(t=e.substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),"rgb"==o?"rgb("+[t>>16&255,t>>8&255,255&t]+")":"rgba("+[t>>16&255,t>>8&255,255&t].join(",")+","+n+")"):"rgb"==o?"rgb(0,0,0)":"rgba(0,0,0,1)"}return"#"==t.charAt(0)?d(t):d(e.convertColor(t))}if("hex"==o){if("#"==t.charAt(0))return t}else if("hexNumber"==o){if("#"==t.charAt(0))return parseInt(t.replace(/^#/,""),16)}else"#"==t.charAt(0)&&3==(t=t.replace("#","")).length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2));return"string"==o?-1==(s=u.indexOf(t))?"#"+t:c[s]:"hexNumber"==o?parseInt(u[-1!=c.indexOf(t.toLowerCase())?c.indexOf(t):0],16):"#"+u[-1!=c.indexOf(t.toLowerCase())?c.indexOf(t):0]}},e.colorRange=function(t,o,n){e.colorRangeCheck||(z_d("27.6"),e.colorRangeCheck=!0),zot(n)&&(n=.5),n=Math.max(0,Math.min(1,n)),zot(t)&&(t="white"),zot(o)&&(o="black");for(var r,i,a=e.convertColor(t,"rgb"),l=e.convertColor(o,"rgb"),s=(t=a.substring(4,a.length-1).split(","),o=l.substring(4,l.length-1).split(","),"#"),c=0;c<t.length;c++)r=o[c]-t[c],(i=Math.floor(parseInt(t[c],10)+r*n).toString(16)).length<2&&(i="0"+i),s+=i;return s},e.lighten=function(t,o){return e.lightenCheck||(z_d("27.65"),e.lightenCheck=!0),zot(o)&&(o=.5),o>=0?e.colorRange(String(t),"#FFFFFF",o):e.colorRange(String(t),"#000000",-o)},e.darken=function(t,o){return zot(o)&&(o=.5),e.darkenCheck||(z_d("27.66"),e.darkenCheck=!0),o>=0?e.colorRange(String(t),"#000000",o):e.colorRange(String(t),"#ffffff",-o)},e.toColor=function(t,o,n){return e.toColorCheck||(z_d("27.67"),e.toColorCheck=!0),zot(n)&&(n=.5),e.colorRange(String(t),o,n)},e.toAlpha=function(t,o){return e.toAlphaCheck||(z_d("27.68"),e.toAlphaCheck=!0),zot(o)&&(o=.5),e.convertColor(String(t),"rgba",o)},e.pointAlongCurve=function(t,o,n,r){if(z_d("27.7"),t&&t[0]&&t[1]&&t[2]&&t[3]){zot(r)&&(r=!1);var i=new e.Bezier(t[0],t[1],t[2],t[3]);if(r)var a=i.mx(o),l=i.my(o);else a=i.x(o),l=i.y(o);if(n){var s=o-.05,c=o+.05;if(s<0&&(s=0),c>1&&(c=1),r)var u=i.mx(s),d=i.my(s),h=i.mx(c),g=i.my(c);else u=i.x(s),d=i.y(s),h=i.x(c),g=i.y(c);return{x:a,y:l,angle:e.angle(u,d,h,g)}}return{x:a,y:l}}},e.distanceAlongCurve=function(t){return z_d("27.8"),(e.dist(t[0],t[3])+(e.dist(t[0],t[1])+e.dist(t[1],t[2])+e.dist(t[2],t[3])))/2},e.closestPointAlongCurve=function(t,o,n,r,i){z_d("27.9");var a,l=1e7,s=0,c=0;return zot(n)&&(n=10),e.loop(o,function(o,r){var i=new e.Bezier(o[0],o[1],o[2],o[3]);e.loop(n,function(o,n){var u={x:i.x(o/n),y:i.y(o/n)},d=e.dist(t,u);d<l&&(l=d,a=u,s=r,c=o)})}),i?(s*n+c)/(o.length*n)*100:r?a:s},e.transformPoints=function(t,o,n,r,i){if(z_d("27.95"),!zot(t)&&Array.isArray(t)){zot(r)&&(r=0),zot(i)&&(i=0),t=e.copy(t);var a,l=r,s=i;"rotation"==o&&(0!=r&&(t=e.transformPoints(t,"x",-l)),0!=i&&(t=e.transformPoints(t,"y",-s)));for(var c=0;c<t.length;c++)if(a=t[c],Array.isArray(a))if("x"==o)a[0]+=n;else if("y"==o)a[1]+=n;else if("scaleX"==o)a[0]=(a[0]-r)*n+r,a[4]=a[4]*n,a[6]=a[6]*n;else if("scaleY"==o)a[1]=(a[1]-i)*n+i,a[5]=a[5]*n,a[7]=a[7]*n;else if("scale"==o)a[0]=(a[0]-r)*n+r,a[4]=a[4]*n,a[6]=a[6]*n,a[1]=(a[1]-i)*n+i,a[5]=a[5]*n,a[7]=a[7]*n;else if("rotation"==o){var u=n*Math.PI/180,d=a[0],h=a[1];a[0]=d*Math.cos(u)-h*Math.sin(u),a[1]=h*Math.cos(u)+d*Math.sin(u),d=a[4],h=a[5],a[4]=d*Math.cos(u)-h*Math.sin(u),a[5]=h*Math.cos(u)+d*Math.sin(u),d=a[6],h=a[7],a[6]=d*Math.cos(u)-h*Math.sin(u),a[7]=h*Math.cos(u)+d*Math.sin(u)}return"rotation"==o&&(0!=r&&(t=e.transformPoints(t,"x",l)),0!=i&&(t=e.transformPoints(t,"y",s))),t}},e.makeID=function(e,t,o){var n;z_d("13.5"),zot(e)&&(e="mixed"),zot(t)&&(t=5),zot(o)&&(o="uppercase");var r=[2,3,4,5,6,7,8,9],i="abcdefghjkmnpqrstuvwxyz".split("");n=e.constructor===Array?e:"numbers"==e?r:"letters"==e?i:r.concat(i);for(var a,l,s="",c=0;c<t;c++)a=n[Math.floor(Math.random()*n.length)],l=Math.random(),"uppercase"==o||"mixed"==o&&l>.5?a.toUpperCase&&(a=a.toUpperCase()):a.toLowerCase&&(a=a.toLowerCase()),s+=String(a);return s},e.swapProperties=function(e,t,o){if(z_d("17.1"),zot(t)||zot(o)||zot(t[e])||zot(o[e]))return!1;var n=o[e];return o[e]=t[e],t[e]=n,!0},e.mobile=function(t){return z_d("28"),void 0!==MOBILE&&"default"!=MOBILE?MOBILE:zot(e.MOBILE)||"default"==e.MOBILE?(zot(t)&&(t=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":!(!t||window.orientation===undefined)&&(!/safari/i.test(navigator.userAgent)||"ios")):e.MOBILE},e.vee=function(e){return z_d("28.5"),!zot(e)&&("Pick"==e.type||Array.isArray(e)||e.constructor=={}.constructor&&(!zot(e.max)||!zot(e.noPick))||"function"==typeof e)},e.extend=function(t,o,n,r,i){function a(){this.constructor=t}var l,s="subclass, superclass, override, prefix, prototype";if(l=zob(e.extend,arguments,s))return l;if(!zot(t)&&!zot(o)){zot(r)&&(r="super"),zot(n)&&(n=[]),Array.isArray(n)||(n=[n]),zot(i)&&(i=!0);var c={};for(var u in t.prototype)Object.defineProperty(c,u,Object.getOwnPropertyDescriptor(t.prototype,u));for(u in a.prototype=o.prototype,t.prototype=new a,c)Object.defineProperty(t.prototype,u,Object.getOwnPropertyDescriptor(c,u));var d=t.prototype,h=Object.getPrototypeOf&&Object.getPrototypeOf(d)||d.__proto__;if(h){var g;d[(r+="_")+"constructor"]=h.constructor;for(var p=0;p<n.length;p++)"function"==typeof h[g=n[p]]&&(d[r+g]=h[g]);if(i)for(g in h)d.hasOwnProperty(g)&&"function"==typeof h[g]&&(d[r+g]=h[g])}return t}zon&&t!=e.StageGL&&zog("zim.extend() - please supply a class and its superclass")},e.copy=function(t,o,n){if(e.copyCheck||(z_d("10"),e.copyCheck=!0),zot(o)&&(o=!1),zot(n)&&(n=!0),null==t||!(t instanceof Array||t.constructor=={}.constructor))return o&&null!=t&&t.clone&&t.type&&("Container"!=t.type&&"Stage"!=t.type&&"StageGL"!=t.type||n)?t.clone():t;if(t instanceof Array){for(var r=[],i=0;i<t.length;i++)r[i]=e.copy(t[i],o,n);return r}if(t.constructor=={}.constructor){var a={};for(var l in t){var s=e.copy(t[l],o,n);t.hasOwnProperty(l)&&(a[l]=s)}return a}},
e.merge=function(){e.mergeCheck||(z_d("12"),e.mergeCheck=!0);var t,o,n={};for(t=0;t<arguments.length;t++)for(o in arguments[t])arguments[t].hasOwnProperty(o)&&(n[o]=arguments[t][o]);return n},e.arraysEqual=function(t,o,n){if(z_d("11"),zot(t)||zot(o))return!1;if(zot(n)&&(n=!0),t.length!=o.length)return!1;for(var r=0;r<t.length;r++)if(t[r]instanceof Array&&o[r]instanceof Array){if(!e.arraysEqual(t[r],o[r],n))return!1}else{if(n&&t[r]!=o[r])return!1;if(!n)return e.arraysEqual(t.sort(),o.sort(),!0)}return!0},e.isEmpty=function(t){if(e.zimEmptyCheck||(z_d("11.5"),e.zimEmptyCheck=!0),!zot(t)){var o=0;for(var n in t){o++;break}return 0==o}},e.isJSON=function(e){if(z_d("11.6"),"string"!=typeof e)return!1;try{return JSON.parse(e),!0}catch(t){return!1}},e.isPick=function(t){if(e.zimPickCheck||(z_d("11.7"),e.zimPickCheck=!0),!zot(t))return Array.isArray(t)||t.constructor=={}.constructor&&null!=t.min&&null!=t.max||t.constructor===Function&&(null!=t.array||null!=t())},e.zut=function(e){if(zot(e)||"object"==typeof e)return!0},e.decimals=function(t,o,n,r,i,a,l){if(e.zimDecimalCheck||(z_d("13"),e.zimDecimalCheck=!0),zot(t))return 0;zot(o)&&(o=1),zot(n)&&(n=0),zot(r)&&(r=0),zot(r)&&(r=0),zot(i)&&(i=!0),zot(a)&&(a=!1);var s=Math.round(t*Math.pow(10,o))/Math.pow(10,o);if(a){var c=s-Math.floor(s);s=e.decimals(Math.floor(s)+60*c/100,2)}var u=e.sign(s);if(n>0){var d=String(s).indexOf("."),h=String(s).length;d<0&&(d=h++,s+=".");for(var g=0;g<n-(h-d-1);g++)s+="0"}if(r>0){-1==u&&(s=s.substr(1,s.length-1)),d=String(s).indexOf("."),h=String(s).length;var p=d<0?h:d;for(g=0;g<r-p;g++)s="0"+s;-1==u&&(s="-"+s)}return n+r>0&&!i&&0==Number(s)&&(s=0),a&&(s=String(s).replace(".",":")),e.zut(l)?s:null},e.sign=function(t){return e.zimSignCheck||(z_d("13.1"),e.zimSignCheck=!0),t?t<0?-1:1:0},e.constrain=function(e,t,o,n){if(z_d("13.2"),!zot(e))return zot(t)&&(t=0),zot(o)&&(o=Number.MAX_VALUE),o<t&&(o=t,t=t),zot(n)&&(n=!1),n&&e<0?Math.max(-o,Math.min(e,-t)):Math.max(t,Math.min(e,o))},e.dist=function(t,o,n,r){if(e.zimDistCheck||(z_d("13.3"),e.zimDistCheck=!0),!zot(t)&&!zot(o))return zot(t.x)||zot(o.x)?(zot(n)&&(n=0),zot(r)&&(r=0)):(r=o.y,n=o.x,o=t.y,t=t.x),Math.sqrt(Math.pow(n-t,2)+Math.pow(r-o,2))},e.rectIntersect=function(t,o,n){return e.zimRectIntersectCheck||(z_d("13.32"),e.zimRectIntersectCheck=!0),zot(n)&&(n=0),!(t.x>=o.x+o.width+n||t.x+t.width+n<=o.x||t.y>=o.y+o.height+n||t.y+t.height+n<=o.y)},e.boundsAroundPoints=function(t){e.zimBoundsAroundPointsCheck||(z_d("13.34"),e.zimBoundsAroundPointsCheck=!0);for(var o=1e4,n=1e4,r=-1e4,i=-1e4,a=0;a<t.length;a++){var l=t[a];l.x<o&&(o=l.x),l.x>r&&(r=l.x),l.y<n&&(n=l.y),l.y>i&&(i=l.y)}return{x:o,y:n,width:r-o,height:i-n}},e.angle=function(t,o,n,r){if(e.angleCheck||(z_d("13.4"),e.angleCheck=!0),!zot(t)&&!zot(o))return zot(n)&&(n=t,t=0),zot(r)&&(r=o,o=0),(180*Math.atan2(r-o,n-t)/Math.PI+360)%360},e.TAU=2*Math.PI,e.DEG=180/Math.PI,e.RAD=Math.PI/180,e.smoothStep=function(t,o,n){z_d("13.7");var r=e.constrain((t-o)/(n-o),0,1);return r*r*r*(r*(6*r-15)+10)},e.Ajax=function(t,o,n,r){z_d("13.8");var i=new XMLHttpRequest;this.master=t,this.couple=o,this.lock=n,this.unique=r;var a=this;this.get=function(o,r){var l=zot(a.master)?"":"&master="+encodeURI(t),s=zot(a.lock)?"":"&lock="+encodeURI(n),c=a.unique?"&unique=true":"";i.open("GET",o+l+s+c,!0),i.onload=function(){200==i.status?r(e.isJSON(i.responseText)?JSON.parse(i.responseText):i.responseText):r(null,"Error: "+i.status)},i.send()},this.post=function(t,o,n,r,l){var s,c="url, data, command, extra, callback";if(s=zob(a.post,arguments,c))return s;if(!zot(t)){i.open("POST",t,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onload=function(){var t=i.responseText;e.isJSON(t)&&(a.couple&&(t=e.decouple(t)),t=JSON.parse(t)),l(t)},e.isJSON(o)||(o=JSON.stringify(o)),a.couple&&(o=e.couple(o));var u=zot(a.master)?"":"&master="+encodeURI(a.master),d=zot(a.lock)?"":"&lock="+encodeURI(a.lock),h=zot(n)?"":"&command="+encodeURI(n),g=zot(r)?"":"&extra="+encodeURI(r);i.send("data="+o+u+d+h+g)}},this.put=function(t,o,n){i.open("PUT",t,!0),i.setRequestHeader("Content-type","application/json"),i.onload=function(){n(e.isJSON(i.responseText)?JSON.parse(i.responseText):a.http.responseText)},i.send(JSON.stringify(o))}},e.Noise=function(e){"use strict";function t(e){var t=new Uint32Array(1);return t[0]=1664525*e[0]+1013904223,t}function o(e,t,o){this.dx=-t-e*l.SQUISH_2D,this.dy=-o-e*l.SQUISH_2D,this.xsb=t,this.ysb=o}function n(e,t,o,n){this.dx=-t-e*l.SQUISH_3D,this.dy=-o-e*l.SQUISH_3D,this.dz=-n-e*l.SQUISH_3D,this.xsb=t,this.ysb=o,this.zsb=n}function r(e,t,o,n,r){this.dx=-t-e*l.SQUISH_4D,this.dy=-o-e*l.SQUISH_4D,this.dz=-n-e*l.SQUISH_4D,this.dw=-r-e*l.SQUISH_4D,this.xsb=t,this.ysb=o,this.zsb=n,this.wsb=r}z_d("13.9"),zot(e)&&(e=1e6*Math.random());var i=e;this.seed=e;var a=this,l={NORM_2D:1/47,NORM_3D:1/103,NORM_4D:1/30};l.SQUISH_2D=(Math.sqrt(3)-1)/2,l.SQUISH_3D=(Math.sqrt(4)-1)/3,l.SQUISH_4D=(Math.sqrt(5)-1)/4,l.STRETCH_2D=(1/Math.sqrt(3)-1)/2,l.STRETCH_3D=(1/Math.sqrt(4)-1)/3,l.STRETCH_4D=(1/Math.sqrt(5)-1)/4,l.base2D=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],l.base3D=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],l.base4D=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],l.gradients2D=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],l.gradients3D=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],l.gradients4D=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],l.lookupPairs2D=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],l.lookupPairs3D=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],l.lookupPairs4D=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],l.p2D=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],l.p3D=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],l.p4D=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];for(var s=[],c=0;c<l.p2D.length;c+=4){for(var u=l.base2D[l.p2D[c]],d=null,h=null,g=0;g<u.length;g+=3)h=new o(u[g],u[g+1],u[g+2]),null===d?s[c/4]=h:d.next=h,d=h;h.next=new o(l.p2D[c+1],l.p2D[c+2],l.p2D[c+3])}for(this.lookup2D=[],c=0;c<l.lookupPairs2D.length;c+=2)this.lookup2D[l.lookupPairs2D[c]]=s[l.lookupPairs2D[c+1]];var p=[];for(c=0;c<l.p3D.length;c+=9){for(u=l.base3D[l.p3D[c]],d=null,h=null,g=0;g<u.length;g+=4)h=new n(u[g],u[g+1],u[g+2],u[g+3]),null===d?p[c/9]=h:d.next=h,d=h;h.next=new n(l.p3D[c+1],l.p3D[c+2],l.p3D[c+3],l.p3D[c+4]),h.next.next=new n(l.p3D[c+5],l.p3D[c+6],l.p3D[c+7],l.p3D[c+8])}for(this.lookup3D=[],c=0;c<l.lookupPairs3D.length;c+=2)this.lookup3D[l.lookupPairs3D[c]]=p[l.lookupPairs3D[c+1]];var f=[];for(c=0;c<l.p4D.length;c+=16){for(u=l.base4D[l.p4D[c]],d=null,h=null,g=0;g<u.length;g+=5)h=new r(u[g],u[g+1],u[g+2],u[g+3],u[g+4]),null===d?f[c/16]=h:d.next=h,d=h;h.next=new r(l.p4D[c+1],l.p4D[c+2],l.p4D[c+3],l.p4D[c+4],l.p4D[c+5]),h.next.next=new r(l.p4D[c+6],l.p4D[c+7],l.p4D[c+8],l.p4D[c+9],l.p4D[c+10]),h.next.next.next=new r(l.p4D[c+11],l.p4D[c+12],l.p4D[c+13],l.p4D[c+14],l.p4D[c+15])}for(this.lookup4D=[],c=0;c<l.lookupPairs4D.length;c+=2)this.lookup4D[l.lookupPairs4D[c]]=f[l.lookupPairs4D[c+1]];this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);var m=new Uint8Array(256);for(c=0;c<256;c++)m[c]=c;for((e=new Uint32Array(1))[0]=i,e=t(t(t(e))),c=255;c>=0;c--){e=t(e);var z=new Uint32Array(1);z[0]=(e[0]+31)%(c+1),z[0]<0&&(z[0]+=c+1),this.perm[c]=m[z[0]],this.perm2D[c]=14&this.perm[c],this.perm3D[c]=this.perm[c]%24*3,this.perm4D[c]=252&this.perm[c],m[z[0]]=m[c]}this.simplex1D=function(e){return a.simplex2D(e,1)},this.simplex2D=function(e,t){var o=(e+t)*l.STRETCH_2D,n=[e+o,t+o],r=n[0],i=n[1],s=[Math.floor(r),Math.floor(i)],c=s[0],u=s[1],d=(c+u)*l.SQUISH_2D,h=[e-(c+d),t-(u+d)],g=h[0],p=h[1],f=[r-c,i-u],m=f[0],z=f[1],y=m+z,v=new Uint32Array(4);v[0]=m-z+1,v[1]=y,v[2]=y+z,v[3]=y+m;for(var b=v[0]|v[1]<<1|v[2]<<2|v[3]<<4,w=a.lookup2D[b],C=0;void 0!==w;){var x=[g+w.dx,p+w.dy],k=x[0],T=x[1],A=2-k*k-T*T;if(A>0){var P=[c+w.xsb,u+w.ysb],S=P[0],B=P[1],E=a.perm2D[a.perm[255&S]+B&255];C+=(A*=A)*A*(l.gradients2D[E]*k+l.gradients2D[E+1]*T)}w=w.next}return C*l.NORM_2D},this.simplex3D=function(e,t,o){var n=(e+t+o)*l.STRETCH_3D,r=[e+n,t+n,o+n],i=r[0],s=r[1],c=r[2],u=[Math.floor(i),Math.floor(s),Math.floor(c)],d=u[0],h=u[1],g=u[2],p=(d+h+g)*l.SQUISH_3D,f=[e-(d+p),t-(h+p),o-(g+p)],m=f[0],z=f[1],y=f[2],v=[i-d,s-h,c-g],b=v[0],w=v[1],C=v[2],x=b+w+C,k=new Uint32Array(7);k[0]=w-C+1,k[1]=b-w+1,k[2]=b-C+1,k[3]=x,k[4]=x+C,k[5]=x+w,k[6]=x+b;for(var T=k[0]|k[1]<<1|k[2]<<2|k[3]<<3|k[4]<<5|k[5]<<7|k[6]<<9,A=a.lookup3D[T],P=0;void 0!==A;){var S=[m+A.dx,z+A.dy,y+A.dz],B=S[0],E=S[1],I=S[2],M=2-B*B-E*E-I*I;if(M>0){var O=[d+A.xsb,h+A.ysb,g+A.zsb],j=O[0],L=O[1],_=O[2],Y=a.perm3D[a.perm[a.perm[255&j]+L&255]+_&255];P+=(M*=M)*M*(l.gradients3D[Y]*B+l.gradients3D[Y+1]*E+l.gradients3D[Y+2]*I)}A=A.next}return P*l.NORM_3D},this.simplex4D=function(e,t,o,n){var r=(e+t+o+n)*l.STRETCH_4D,i=[e+r,t+r,o+r,n+r],s=i[0],c=i[1],u=i[2],d=i[3],h=[Math.floor(s),Math.floor(c),Math.floor(u),Math.floor(d)],g=h[0],p=h[1],f=h[2],m=h[3],z=(g+p+f+m)*l.SQUISH_4D,y=e-(g+z),v=t-(p+z),b=o-(f+z),w=n-(m+z),C=[s-g,c-p,u-f,d-m],x=C[0],k=C[1],T=C[2],A=C[3],P=x+k+T+A,S=new Uint32Array(11);S[0]=T-A+1,S[1]=k-T+1,S[2]=k-A+1,S[3]=x-k+1,S[4]=x-T+1,S[5]=x-A+1,S[6]=P<<6,S[7]=P+A,S[8]=P+T,S[9]=P+k,S[10]=P+x;for(var B=S[0]|S[1]<<1|S[2]<<2|S[3]<<3|S[4]<<4|S[5]<<5|S[6]<<6|S[7]<<8|S[8]<<11|S[9]<<14|S[10]<<17,E=a.lookup4D[B],I=0;void 0!==E;){var M=[y+E.dx,v+E.dy,b+E.dz,w+E.dw],O=M[0],j=M[1],L=M[2],_=M[3],Y=2-O*O-j*j-L*L-_*_;if(Y>0){var D=[g+E.xsb,p+E.ysb,f+E.zsb,m+E.wsb],X=D[0],R=D[1],W=D[2],H=D[3],F=a.perm4D[a.perm[a.perm[a.perm[255&X]+R&255]+W&255]+H&255];I+=(Y*=Y)*Y*(l.gradients4D[F]*O+l.gradients4D[F+1]*j+l.gradients4D[F+2]*L+l.gradients4D[F+3]*_)}E=E.next}return I*l.NORM_4D}},e.Point=function(e,t,o,n,r,i,a,l,s,c){z_d("13.45"),zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=0),zot(i)&&(i=0),zot(a)&&(a=0),zot(l)&&(l=0),zot(s)&&(s=0),zot(c)&&(c=0),this.x=e,this.y=t,this.z=o,this.q=n,this.r=r,this.s=i,this.t=a,this.u=l,this.v=s,this.w=c},e.Bezier=function(e,t,o,n){z_d("13.47"),this.a=e,this.b=t,this.c=o,this.d=n,this.len=100,this.arcLengths=new Array(this.len+1),this.arcLengths[0]=0;for(var r=this.x(0),i=this.y(0),a=0,l=1;l<=this.len;l+=1){var s=this.x(.01*l),c=this.y(.01*l),u=r-s,d=i-c;a+=Math.sqrt(u*u+d*d),this.arcLengths[l]=a,r=s,i=c}this.length=a},e.Bezier.prototype={map:function(e){for(var t=e*this.arcLengths[this.len],o=0,n=this.len,r=0;o<n;)r=o+((n-o)/2|0),this.arcLengths[r]<t?o=r+1:n=r;this.arcLengths[r]>t&&r--;var i=this.arcLengths[r];return i===t?r/this.len:(r+(t-i)/(this.arcLengths[r+1]-i))/this.len},mx:function(e){return this.x(this.map(e))},my:function(e){return this.y(this.map(e))},x:function(e){return(1-e)*(1-e)*(1-e)*this.a.x+(1-e)*(1-e)*3*e*this.b.x+3*(1-e)*(e*e)*this.c.x+e*e*e*this.d.x},y:function(e){return(1-e)*(1-e)*(1-e)*this.a.y+(1-e)*(1-e)*3*e*this.b.y+3*(1-e)*(e*e)*this.c.y+e*e*e*this.d.y}},e.Boundary=function(e,t,o,n){z_d("13.46"),zot(e)||zot(t)||zot(o)||zot(n)||(this.x=e,this.y=t,this.width=o,this.height=n,this.contract=function(e,t,o,n){return zot(e)?this:(zot(t)&&(t=e),zot(o)?o=2*e:o+=e,zot(n)?n=2*t:n+=t,this.x+=e,this.y+=t,this.width-=o,this.height-=n,this)})},e.GradientColor=function(e,t,o,n,r,i){z_d("13.465"),this.type="GradientColor",this.colors=zot(e)?["black","white"]:e,this.ratios=zot(t)?[0,1]:t,this.x0=zot(o)?0:o,this.y0=zot(n)?0:n,this.x1=zot(r)?0:r,this.y1=zot(i)?100:i},e.RadialColor=function(e,t,o,n,r,i,a,l){z_d("13.466"),this.type="RadialColor",this.colors=zot(e)?["black","white"]:e,this.ratios=zot(t)?[0,1]:t,this.x0=zot(o)?0:o,this.y0=zot(n)?0:n,this.r0=zot(r)?0:r,this.x1=zot(i)?0:i,this.y1=zot(a)?100:a,this.r1=zot(l)?100:l},e.BitmapColor=function(e,t,o){z_d("13.467"),this.type="BitmapColor","string"==typeof e&&window.asset&&(e=window.asset(e)),"Image"==e.type&&(e=e.bitmap),this.image="Bitmap"==e.type?e.image:e,this.repetition=t,this.matrix=o},e.Damp=function(t,o){z_d("14");var n,r="startValue, damp";if(n=zob(e.Damp,arguments,r,this))return n;this.lastValue=zot(t)?0:t,this.damp=zot(o)?.1:o},e.Damp.prototype.convert=function(e){return this.lastValue=this.lastValue+(e-this.lastValue)*this.damp},e.Damp.prototype.immediate=function(e){return this.lastValue=e,this},e.Proportion=function(t,o,n,r,i,a,l){var s,c,u,d="baseMin, baseMax, targetMin, targetMax, factor, targetRound, clamp";if(s=zob(e.Proportion,arguments,d,this))return s;z_d("15"),zot(n)&&(n=0),zot(r)&&(r=1),zot(i)&&(i=1),zot(a)&&(a=!1),zot(l)&&(l=!0),this.convert=function(e){if(!isNaN(e)&&o-t!=0)return l&&(e=Math.max(e,t),e=Math.min(e,o)),c=(e-t)/(o-t),u=i>0?n+(r-n)*c:r-(r-n)*c,a&&(u=Math.round(u)),u}},e.ProportionDamp=function(t,o,n,r,i,a,l,s){function c(){isNaN(h)||o-t==0||(s&&(h=Math.max(h,t),h=Math.min(h,o)),g=(h-t)/(o-t),p=r-n,z+=((f=a>0?n+p*g:r-p*g)-z)*m.damp)}var u,d="baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound, clamp";if(u=zob(e.ProportionDamp,arguments,d,this))return u;z_d("16"),zot(n)&&(n=0),zot(r)&&(r=1),zot(i)&&(i=.1),zot(a)&&(a=1),zot(l)&&(l=!1),zot(s)&&(s=!0),this.damp=i;var h,g,p,f,m=this,z=0;h=t,z=n;var y=setInterval(c,20);this.immediate=function(e){return m.convert(e),c(),z=f,l&&(z=Math.round(z)),m},this.convert=function(e){return h=e,l?Math.round(z):z},this.dispose=function(){return clearInterval(y),!0}},e.Dictionary=function(e){z_d("17"),this.length=0,this.unique=e;var t=this.objects=[],o=this.values=[];this.add=function(e,n){zot(e)||(zot(n)&&(n=!0),this.unique&&this.remove(e),t.push(e),o.push(n),this.length++)},this.at=function(e){if(!zot(e)){var n=t.indexOf(e);return n>-1?o[n]:null}},this.remove=function(e){if(zot(e))return!1;var n=t.indexOf(e);return n>-1&&(t.splice(n,1),o.splice(n,1),this.length--,!0)},this.clear=function(){return t=this.objects=[],o=this.values=[],this.length=null,this},this.dispose=function(){return t=null,o=null,this.length=null,!0}},e.Hierarchy=function(t,o){function n(t){function o(t,i){e.loop(t,function(e,t){n.push(t.obj),r.push(e),t.open&&o(t.list,i+1)})}var n=[],r=[];return o(t,0),[n,r]}z_d("17.5");var r,i=this;zot(t)||(zot(o)&&(o=!1),i.processSimple=function(){function n(t,r,a,l){var s;t.constructor=={}.constructor?(t.list&&(s=t,t=t.list),l&&s&&e.loop(s,function(e,t){"list"!=e&&(l[e]=t)}),e.loop(t,function(e,t){var l={},s=r["id"+i]={obj:e,level:a,open:o,opened:!1,list:l};i++,n(t,l,a+1,s)})):Array.isArray(t)&&e.loop(t,function(e){r["id"+i]={obj:e},i++})}var i=0,a={};return n(t,a,0),r=i,a},i.processComplex=function(t){function n(t,r){e.loop(t,function(e,t){t.level=r,zot(t.open)&&(t.open=o),zot(t.opened)&&(t.opened=!1),t.list&&n(t.list,r+1),i++})}var i=0;return n(t,0),r=i,t},zot(t.id0)?i.data=i.processSimple(t):i.data=i.processComplex(t),i.getLinearList=function(e){return zot(e)&&(e=i.data),n(e)[0]},i.getLinearIDs=function(e){return zot(e)&&(e=i.data),n(e)[1]},i.getData=function(t){function o(r){e.loop(r,function(e,r){if(e==t)return n=r;o(r.list)})}var n;return o(i.data),n},i.getNextSibling=function(t){function o(i){e.loop(i,function(e,i){if(!r&&n)return r=e;e==t?n=i:o(i.list)})}var n,r;return o(i.data),r},i.getPrevSibling=function(t){function o(i,a){e.loop(i,function(e,i){if(e==t)return n=r[a]||r[a-1];r[a]=e,o(i.list,a+1)})}var n,r=[];return o(i.data,0),n},Object.defineProperty(i,"length",{get:function(){return r},set:function(){zon&&zogy("Hierarchy() - length is read only")}}))},e.Pick=function(t){e.pickCheck||(z_d("17.6"),e.pickCheck=!0),this.choices=t,this.num=function(t){for(var o=[],n=0;n<t;n++)o.push(e.Pick.choose(this));return this.choices=e.Pick.series(o),this};var o=this;this.loop=function(t,n){for(var r,i=0;i<t;i++)if(void 0!==(r=n(e.Pick.choose(o),i,t)))return r}},e.Pick.prototype.type="Pick",e.Pick.series=function(){return e.pickCheck||(z_d("17.6"),e.pickCheck=!0),e.series.apply(null,arguments)},e.Pick.rand=function(t,o,n,r){return e.pickCheck||(z_d("17.6"),e.pickCheck=!0),e.rand(t,o,n,r)},e.Pick.choose=function(t,o,n){if(e.pickCheck||(z_d("17.6"),e.pickCheck=!0),null==o&&(o=!0),null==t)return t;if("Pick"==t.type||o){var r=t.choices||t;if(Array.isArray(r)){var i=r[Math.floor(Math.random()*r.length)];return e.Pick.choose(i)}return r.constructor==={}.constructor?zot(r.noPick)?zot(r.max)?r:(zot(r.integer)&&(r.integer=!1),i=e.Pick.rand(r.min,r.max,r.integer,r.negative)):r.noPick:"function"==typeof r?(null==r.count?r.count=0:r.count++,e.Pick.choose(r(n))):t}return t},e.scrollX=function(t,o){return z_d("18"),e.abstractScroll("X","Left",t,o)},e.scrollY=function(t,o){return z_d("19"),e.abstractScroll("Y","Top",t,o)},e.abstractScroll=function(o,n,r,i){z_d("20");var a=t(i),l="X"==o?"Y":"X";if(zot(r))return navigator.applicationName,navigator.userAgent.indexOf("Safari"),document.documentElement&&document.documentElement["scroll"+n]||document.body["scroll"+n];if(zot(i))window.scrollTo(e["scroll"+l](),r);else{var s=50,c=i*("s"==a?1e3:1);c<s&&(c=s);var u=c/s,d=e["scroll"+o](),h=(r-d)/u,g=0,p=setInterval(function(){g++,d+=h,window.scrollTo(e["scroll"+l](),d),g>=u&&(window.scrollTo(e["scroll"+l](),r),clearInterval(p))},s)}return r},e.windowWidth=function(){z_d("21");var t=isNaN(window.innerWidth)?window.clientWidth:window.innerWidth,o=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight;if(e.mobile()&&!zot(window.orientation)&&!window.parent&&(t>o&&90!=Math.abs(window.orientation)||o>t&&90==Math.abs(window.orientation))){var n=t;t=o,o=n}return void 0!==zdf&&zdf.swapRotation?o:t},e.windowHeight=function(){z_d("22");var t=isNaN(window.innerWidth)?window.clientWidth:window.innerWidth,o=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight;if(e.mobile()&&!zot(window.orientation)&&!window.parent&&(t>o&&90!=Math.abs(window.orientation)||o>t&&90==Math.abs(window.orientation))){var n=t;t=o,o=n}return void 0!==zdf&&zdf.swapRotation?t:o},e.getQueryString=function(e){if(z_d("22.5"),zot(e)&&(e=location.search.replace("?","")),""==e)return{};for(var t=e.split("&"),o={},n=0;n<t.length;n++){var r=t[n].split("=");"undefined"==typeof o[r[0]]?o[r[0]]=decodeURIComponent((r[1]+"").replace(/\+/g,"%20")):"string"==typeof o[r[0]]?o[r[0]]=[o[r[0]],decodeURIComponent((r[1]+"").replace(/\+/g,"%20"))]:o[r[0]].push(decodeURIComponent((r[1]+"").replace(/\+/g,"%20")))}return o},e.swapHTML=function(t,o){return z_d("17.2"),e.swapProperties("innerHTML",zid(t),zid(o))},e.urlEncode=function(e){return z_d("23"),e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},e.urlDecode=function(e){return z_d("24"),decodeURIComponent((e+"").replace(/\+/g,"%20"))},e.setCookie=function(e,t,o){if(z_d("25"),!zot(e)&&!zot(t)){if(o){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);var r="; expires="+n.toGMTString()}else r="";return document.cookie=e+"="+escape(t)+r+"; path=/",!0}},e.getCookie=function(e){z_d("26");var t,o=document.cookie.split(/;\s*/),n=new Array;for(c=0;c<o.length;c++)n[(t=o[c].split("="))[0]]=t[1];return"undefined"==typeof n[e]?undefined:unescape(n[e])},e.deleteCookie=function(t){return z_d("27"),!zot(e.getCookie(t))&&(e.setCookie(t,"",-1),!0)},null==createjs)return zon&&zog("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),e;if(e.localToGlobal=function(t,o,n,r){if(e.coordinatesCheck||(z_d("50.43"),e.coordinatesCheck=!0),null!=t&&null!=o){var i=r.call(n,t,o),a=n.stage;if(void 0===zdf){if(!a)return i;zdf={stage:a,canvas:a.canvas}}return i.x/=e.scaX,i.y/=e.scaY,i}},e.globalToLocal=function(t,o,n,r){if(e.coordinatesCheck||(z_d("50.43"),e.coordinatesCheck=!0),null!=t&&null!=o){var i=n.stage;if(void 0===zdf){if(!i)return r.call(n,t,o);zdf={stage:i,canvas:i.canvas}}return t*=e.scaX,o*=e.scaY,r.call(n,t,o)}},e.localToLocal=function(t,o,n,r){if(e.coordinatesCheck||(z_d("50.43"),e.coordinatesCheck=!0),null!=t&&null!=o&&null!=n){var i=r.localToGlobal(t,o),a=r.stage;if(void 0===zdf){if(!a)return n.globalToLocal(i.x,i.y);zdf={stage:a,canvas:a.canvas}}return a||(a=zdf.stage),n==a?i:i?n.globalToLocal(i.x,i.y):void 0}},e.displayBase=function(t){e.zimDBCheck||(z_d("50.432"),e.zimDBCheck=!0);var o,n=t;Object.defineProperty(t,"width",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.width*this.scaleX)},set:function(e){var t=this.getBounds();if(zot(t)||0==t.width)zon&&zogy("DisplayObject() - width needs bounds set with setBounds()");else{var o=e/t.width;this.scaleX=this.scaleY=o}}}),Object.defineProperty(t,"height",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.height*this.scaleY)},set:function(e){var t=this.getBounds();if(zot(t)||0==t.height)zon&&zogy("DisplayObject() - height needs bounds set with setBounds()");else{var o=e/t.height;this.scaleX=this.scaleY=o}}}),Object.defineProperty(t,"widthOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.width*this.scaleX)},set:function(e){var t=this.getBounds();if(!zot(t)&&0!=t.width||!zon){var o=e/t.width;this.scaleX=o}else zogy("DisplayObject() - widthOnly needs bounds set with setBounds()")}}),Object.defineProperty(t,"heightOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.height*this.scaleY)},set:function(e){var t=this.getBounds();if(!zot(t)&&0!=t.height||!zon){var o=e/t.height;this.scaleY=o}else zogy("DisplayObject() - heightOnly needs bounds set with setBounds()")}}),Object.defineProperty(t,"level",{enumerable:!0,get:function(){return this.parent?this.parent.getChildIndex(this):null},set:function(e){this.parent&&this.parent.setChildIndex(this,Math.max(0,Math.min(e,this.parent.numChildren-1)))}}),Object.defineProperty(t,"depth",{enumerable:!0,get:function(){return this._depth},set:function(e){if(this._depth=e,!zot(this.vrChannel)){var t=this.vrParallaxDistance?e*this.vrParallax*this.vrParallaxDistance:0;"left"==this.vrChannel?this.x=this.vrStartX+e+t:"right"==this.vrChannel&&(this.x=this.vrStartX-e+t)}}}),Object.defineProperty(t,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(e){this.compositeOperation=e}}),Object.defineProperty(n,"name",{get:function(){return o},set:function(t){o=t,e.zimObjectIDs[t]=n}}),this._draggable,Object.defineProperty(n,"draggable",{get:function(){return this._draggable},set:function(e){e!=this._draggable&&(this._draggable=e,this._draggable?this.drag():this.noDrag())}});for(var r=["hue","saturation","brightness","contrast"],i=0;i<r.length;i++)!function(){for(var e=r[i],t=0;t<2;t++)!function(){var o=0==t?"":"Batch";Object.defineProperty(n,e+o,{get:function(){return n.effects&&n.effects.multi?n.effects.multi[e]:0},set:function(t){n.effects&&n.effects.multi?n.effects.multi[e]=t:n.effect(new MultiEffect("hue"==e?t:0,"saturation"==e?t:0,"brightness"==e?t:0,"contrast"==e?t:0)),""==o&&n.updateEffects()}})}()}()},e.gD=function(t){e.zimGDCheck||(z_d("50.435"),e.zimGDCheck=!0),t&&(e.KEYFOCUS==t&&(e.KEYFOCUS=null),t.draggable&&t.noDrag(),t.zimTweens&&t.stopAnimate(),t.zimWire&&t.noWire(),t.zimWired&&t.noWired(),t.zimClickHoldDownEvent&&t.noHold(),t.transformControls&&t.transformControls.dispose(),
t.zimClickDownEvent&&(t.zimClickDownEvent=null),t.zimClickUpEvent&&(t.zimClickUpEvent=null),t.physics&&t.removePhysics(),t.name&&e.zimObjectIDs[t.name]==t&&delete e.zimObjectIDs[t.name])},e.Stage=function(t){if(z_d("50.44"),!zot(t)){var o="CANVAS"==t.tagName?t:zid(t);zot(o)||(this.cjsStage_constructor(t),this.setBounds(0,0,o.width,o.height),this.type="Stage",void 0===zdf&&(zimDefaultFrame=zdf={stage:this}),this.cache=function(e,t,o,n,r,i){if(zot(o))if(zot(e)){var a=this.getBounds();if(!zot(a)){var l=this.borderWidth>0?this.borderWidth/2:0;e=a.x-l,t=a.y-l,o=a.width+2*l,n=a.height+2*l}}else o=e,n=t,e=0,t=0;return this.cjsStage_cache(e,t,o,n,r,i),this},this.loop=function(t,o,n,r,i){return e.loop(this,t,o,n,r,i)},this.hitTestGrid=function(t,o,n,r,i,a,l,s,c,u,d,h){return e.hitTestGrid(this,t,o,n,r,i,a,l,s,c,u,d,h)},this.disposeAllChildren=function(){for(var e=this.numChildren-1;e>=0;e--){var t=this.getChildAt(e);t.dispose&&t.dispose()}return this},!createjs||createjs.stageTransformable||!zdf.retina&&"undefined"==typeof exportRoot||(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(t){this.cjsStage_scaleX=t,this.cjsStage_scaleY=t,e.scaX=createjs.stageTransformable?1:t,e.scaY=createjs.stageTransformable?1:t}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(t){this.cjsStage_scaleX=t,e.scaX=createjs.stageTransformable?1:t}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(t){this.cjsStage_scaleY=t,e.scaY=createjs.stageTransformable?1:t}}),this.localToGlobal=function(t,o){return e.localToGlobal(t,o,this,this.cjsStage_localToGlobal)},this.globalToLocal=function(t,o){return e.globalToLocal(t,o,this,this.cjsStage_globalToLocal)},this.localToLocal=function(t,o,n){return e.localToLocal(t,o,n,this)}))}},e.extend(e.Stage,createjs.Stage,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStage",!1),e.StageGL=function(t,o){if(z_d("50.45"),!zot(t)){var n="CANVAS"==t.tagName?t:zid(t);zot(n)||(this.cjsStageGL_constructor(t,o),this.setBounds(0,0,n.width,n.height),this.type="StageGL",void 0===zdf&&(zdf={stage:this}),this.cache=function(e,t,o,n,r,i){if(zot(o))if(zot(e)){var a=this.getBounds();if(!zot(a)){var l=this.borderWidth>0?this.borderWidth/2:0;e=a.x-l,t=a.y-l,o=a.width+2*l,n=a.height+2*l}}else o=e,n=t,e=0,t=0;return this.cjsStageGL_cache(e,t,o,n,r,i),this},this.loop=function(t,o,n,r,i){return e.loop(this,t,o,n,r,i)},this.hitTestGrid=function(t,o,n,r,i,a,l,s,c,u,d,h){return e.hitTestGrid(this,t,o,n,r,i,a,l,s,c,u,d,h)},this.disposeAllChildren=function(){for(var e=this.numChildren-1;e>=0;e--){var t=this.getChildAt(e);t.dispose&&t.dispose()}return this},!createjs||createjs.stageTransformable||!zdf.retina&&"undefined"==typeof exportRoot||(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(t){this.cjsStage_scaleX=t,this.cjsStage_scaleY=t,e.scaX=createjs.stageTransformable?1:t,e.scaY=createjs.stageTransformable?1:t}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(t){this.cjsStage_scaleX=t,e.scaX=createjs.stageTransformable?1:t}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(t){this.cjsStage_scaleY=t,e.scaY=createjs.stageTransformable?1:t}}),this.localToGlobal=function(t,o){return e.localToGlobal(t,o,this,this.cjsStageGL_localToGlobal)},this.globalToLocal=function(t,o){return e.globalToLocal(t,o,this,this.cjsStageGL_globalToLocal)},this.localToLocal=function(t,o,n){return e.localToLocal(t,o,n,this)}))}},e.extend(e.StageGL,createjs.StageGL,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStageGL",!1),e.Container=function(t,o,n,r,i,a,l){function s(e,t,o,n){var r=[];return zot(e)?r=[e,t,o,n]:zot(o)?(r[0]=0,r[2]=e,r[1]=0,r[3]=t):(r[0]=e,r[2]=o,r[1]=t,r[3]=n),zot(r[3])&&(r[3]=r[2]),r}var c,u="a, b, c, d, style, group, inherit";if(c=zob(e.Container,arguments,u,this))return c;e.containerCheck||(z_d("50.5"),z_d("50.435"),e.containerCheck=!0),this.cjsContainer_constructor(),this.type="Container",this.group=a;var d=this,h=!1===i?{}:e.getStyle(this.type,this.group,l);zot(t)&&(t=null!=h.a?h.a:null),zot(o)&&(o=null!=h.b?h.b:null),zot(n)&&(n=null!=h.c?h.c:null),zot(r)&&(r=null!=h.d?h.d:null);var g=s(t,o,n,r);zot(t)||this.setBounds(g[0],g[1],g[2],g[3]),this.cache=function(e,t,o,n,r,i,a){if("AC"==this.type&&zdf)return zdf.ac("cache",arguments,this),this;var l,s="a,b,c,d,scale,options,margin";if(l=zob(d.cache,arguments,s))return l;var c=d.getBounds();if(zot(o))if(zot(e)){if(!zot(c)){var u=d.borderWidth>0?d.borderWidth/2:0;e=c.x-u,t=c.y-u,o=c.width+2*u,n=c.height+2*u}}else o=e,n=t,e=0,t=0;return"Triangle"==d.type&&(e-=d.borderWidth?d.borderWidth:0,o+=d.borderWidth?2*d.borderWidth:0,t-=d.borderWidth?d.borderWidth:0,n+=d.borderWidth?2*d.borderWidth:0),zot(a)&&(a=0),d.cjsContainer_cache(e-a,t-a,o+2*a,n+2*a,r,i),c&&d.setBounds(c.x,c.y,c.width,c.height),d},this.uncache=function(){return d.cjsContainer_uncache(),d},this.childrenToBitmap=function(){var t=this.cacheCanvas,o=new e.Bitmap(this.cache().cacheCanvas);return t||this.uncache(),this.removeAllChildren(),o.addTo(this),this};var p=zdf||1;createjs&&!createjs.stageTransformable&&p.retina&&(this.localToGlobal=function(t,o){return e.localToGlobal(t,o,this,this.cjsContainer_localToGlobal)},this.globalToLocal=function(t,o){return e.globalToLocal(t,o,this,this.cjsContainer_globalToLocal)},this.localToLocal=function(t,o,n){return e.localToLocal(t,o,n,this)}),this.setBounds=function(e,t,o,n){var r=s(e,t,o,n);return this.cjsContainer_setBounds(r[0],r[1],r[2],r[3]),this},this.disposeAllChildren=function(){for(var e=this.numChildren-1;e>=0;e--){var t=this.getChildAt(e);t.dispose&&t.dispose()}return this},e.displayBase(d),!1!==i&&e.styleTransforms(this,h),this.clone=function(t){if("AC"==this.type&&zdf)return zdf.ac("clone",arguments,this),this;var o=this.getBounds();return zot(o)&&(o={x:null,y:null,width:null,height:null}),this.cloneChildren(this.cloneProps(new e.Container(o.x,o.y,o.width,o.height,i,this.group,l)),t)},this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)}},e.Container.prototype.dispose=function(e){return r(this,e),!0},e.Container.prototype.specialColor=function(e,t){"GradientColor"==t.type?e.linearGradient(t.colors,t.ratios,t.x0,t.y0,t.x1,t.y1):"RadialColor"==t.type?e.radialGradient(t.colors,t.ratios,t.x0,t.y0,t.r0,t.x1,t.y1,t.r1):"BitmapColor"==t.type&&e.bitmap(t.image,t.repetition,t.matrix)},zimify(e.Container.prototype),e.extend(e.Container,createjs.Container,["cache","uncache","setBounds","clone","localToLocal","localToGlobal","globalToLocal"],"cjsContainer",!1),e.Shape=function(t,o,n,r,i,a,l,s,c){function u(e,t,o,n){var r=[];return zot(o)?(r[0]=0,r[2]=e,r[1]=0,r[3]=t):(r[0]=e,r[2]=o,r[1]=t,r[3]=n),zot(r[3])&&(r[3]=r[2]),r}var d,h="a, b, c, d, graphics, optimize, style, group, inherit";if(d=zob(e.Shape,arguments,h,this))return d;z_d("50.6"),this.cjsShape_constructor(i),this.type="Shape",this.group=s;var g=!1===l?{}:e.getStyle(this.type,this.group,c),p=this;zot(t)&&(t=null!=g.a?g.a:null),zot(o)&&(o=null!=g.b?g.b:null),zot(n)&&(n=null!=g.c?g.c:null),zot(r)&&(r=null!=g.d?g.d:null),zot(i)&&(i=null!=g.graphics?g.graphics:null),zot(a)&&(a=null!=g.optimize&&g.optimize);var f=u(t,o,n,r);if(zot(t)||this.setBounds(f[0],f[1],f[2],f[3]),!a)for(var m=["mt","lt","a","at","bt","qt","cp","c","f","lf","rf","bf","ef","ss","sd","s","ls","rs","bs","es","dr","rr","rc","dc","de","dp","p"],z=0;z<m.length;z++)!function(){var e=z;p[m[e]]=function(){return p.graphics[m[e]].apply(p.graphics,arguments),p}}();Object.defineProperty(p,"command",{get:function(){return p.graphics.command},set:function(){}}),this.cache=function(e,t,o,n,r,i,a){var l,s="a,b,c,d,scale,options,margin";if(l=zob(p.cache,arguments,s))return l;var c=p.getBounds();if(zot(o))if(zot(e)){if(!zot(c)){var u=p.borderWidth>0?p.borderWidth/2:0;e=c.x-u,t=c.y-u,o=c.width+2*u,n=c.height+2*u}}else o=e,n=t,e=0,t=0;return zot(a)&&(a=0),p.cjsShape_cache(e-a,t-a,o+2*a,n+2*a,r,i),p},this.setBounds=function(e,t,o,n){var r=u(e,t,o,n);return this.cjsShape_setBounds(r[0],r[1],r[2],r[3]),this},!1!==l&&e.styleTransforms(this,g),this.clone=function(t){zot(t)&&(t=!0);var o=this.getBounds();zot(o)&&(o={x:null,y:null,width:null,height:null});var n=p.cloneProps(new e.Shape(o.x,o.y,o.width,o.height,i,l,s,c));return n.graphics=t?p.graphics.clone():p.graphics,n};var y=zdf||1;createjs&&!createjs.stageTransformable&&y.retina&&(this.localToGlobal=function(t,o){return e.localToGlobal(t,o,this,this.cjsShape_localToGlobal)},this.globalToLocal=function(t,o){return e.globalToLocal(t,o,this,this.cjsShape_globalToLocal)},this.localToLocal=function(t,o,n){return e.localToLocal(t,o,n,this)}),this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},e.displayBase(p),this.dispose=function(){e.gD(this),this.graphics.c(),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.Shape,createjs.Shape,["cache","clone","setBounds","localToLocal","localToGlobal","globalToLocal"],"cjsShape",!1),zimify(e.Shape.prototype),e.Bitmap=function(t,o,n,r,i,a,l,s,c){var u,d="image, width, height, left, top, id, style, group, inherit";if(u=zob(e.Bitmap,arguments,d,this))return u;if(z_d("50.7"),!zot(t)&&t.uncache){var h=t.cacheCanvas,g=t;t=t.cache().cacheCanvas}this.cjsBitmap_constructor(t),g&&!h&&g.uncache();var p=this;this.type="Bitmap",this.group=s;var f=!1===l?{}:e.getStyle(this.type,this.group,c);this.id=p.fileID=null!=f.id?f.id:a,zot(o)&&(o=null!=f.width?f.width:t?t.width:100),zot(n)&&(n=null!=f.height?f.height:t?t.height:100),zot(o)||zot(n)||p.setBounds(0,0,o,n),zot(r)&&(r=null!=f.left?f.left:0),zot(i)&&(i=null!=f.top?f.top:0),zdf&&(zdf.canvas.getContext("2d")?this.imageData=zdf.canvas.getContext("2d").createImageData(o,n):this.imageData=document.createElement("canvas").getContext("2d").createImageData(o,n),this.drawImageData=function(e,r,i,a,l,s){if(zot(e)&&(e=0),zot(r)&&(r=0),zot(i)&&(i=0),zot(a)&&(a=0),zot(l)&&(l=o),zot(s)&&(s=n),!p.proxyCanvas){var c=p.proxyCanvas=document.createElement("canvas");c.setAttribute("width",o),c.setAttribute("height",n),p.proxyContext=c.getContext("2d"),t=p.image=c}p.proxyContext&&p.proxyContext.putImageData(p.imageData,e,r,i,a,l,s)},zot(t)&&p.drawImageData(),t.match&&t.match(/data:image/i)&&setTimeout(function(){p.stage&&p.stage.update(),setTimeout(function(){p.stage&&p.stage.update()},50)},50)),t&&t.nodeName&&"video"!=t.nodeName.toLowerCase()&&(p.sourceRect={x:r,y:i,width:o,height:n}),this.cache=function(e,t,o,n,r,i){if(zot(o))if(zot(e)){if(!zot(l=this.getBounds())){var a=this.borderWidth>0?this.borderWidth/2:0;e=l.x-a,t=l.y-a,o=l.width+2*a,n=l.height+2*a}}else o=e,n=t,e=0,t=0;var l=this.getBounds();return this.cjsBitmap_cache(e,t,o,n,r,i),this.setBounds(l.x,l.y,l.width,l.height),this},this.clone=function(){var o=this.cloneProps(new e.Bitmap(t,null,null,null,null,p.fileID,l,this.group,c));return o.cloned=!0,o};var m,z=zdf||1;createjs&&!createjs.stageTransformable&&z.retina&&(this.localToGlobal=function(t,o){return e.localToGlobal(t,o,this,this.cjsBitmap_localToGlobal)},this.globalToLocal=function(t,o){return e.globalToLocal(t,o,this,this.cjsBitmap_globalToLocal)},this.localToLocal=function(t,o,n){return e.localToLocal(t,o,n,this)}),this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},this.getColorAt=function(e,t){m||(p.cache(),m=p.cacheCanvas.getContext("2d"),p.uncache());var o=m.getImageData(e,t,1,1).data;return"rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+")"},e.displayBase(p),!1!==l&&e.styleTransforms(this,f),this.dispose=function(){e.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.cloned||this.id&&((z=this.stage&&this.stage.frame?this.stage.frame:zdf)&&z.assets&&z.assets[this.id]&&delete z.assets[this.id],e.assets[this.id]&&delete e.assets[this.id]),this.parent&&this.parent.removeChild(this)}},e.Bitmap.fromData=function(t,o){var n=100,r=100,i=new Image;i.onload=function(){n=i.naturalWidth,r=i.naturalHeight,zot(n)&&(n=i.width),zot(r)&&(r=i.height);var a=new e.Bitmap(t,n,r);setTimeout(function(){o(a)},50)},i.src=t},e.extend(e.Bitmap,createjs.Bitmap,["cache","clone","dispose","localToLocal","localToGlobal","globalToLocal"],"cjsBitmap",!1),zimify(e.Bitmap.prototype),e.Sprite=function(o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w){function C(t,o,n){Array.isArray(t)||(t=[t]),e.loop(t,function(e,o){t[o]=e.image});var r={images:t,frames:o,animations:n||[]};T=new createjs.SpriteSheet(r)}var x,k="image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet, label, frame, style, group, inherit";if(x=zob(e.Sprite,arguments,k,this))return x;z_d("50.8"),this.type="Sprite",this.group=b;var T,A=!1===v?{}:e.getStyle(this.type,this.group,w),P=this;if(zot(y)&&(y=null!=A.frame?A.frame:zdf),zot(g)&&!zot(o)){zot(n)&&(n=null!=A.cols?A.cols:1),zot(r)&&(r=null!=A.rows?A.rows:1),zot(i)&&(i=null!=A.count?A.count:n*r),zot(a)&&(a=null!=A.offsetX?A.offsetX:0),zot(l)&&(l=null!=A.offsetY?A.offsetY:0),zot(s)&&(s=null!=A.spacingX?A.spacingX:0),zot(c)&&(c=null!=A.spacingY?A.spacingY:0),zot(u)&&(u=null!=A.width?A.width:o.width),zot(d)&&(d=null!=A.height?A.height:o.height);var S=(u-a+s)/n-s,B=(d-l+c)/r-c,E=[],I=0;e:for(var M=0;M<r;M++)for(var O=0;O<n;O++){if(++I>i)break e;E.push([a+O*(S+s),l+M*(B+c),S,B])}C(o,E,h)}else if(m)h=(T=m).animations;else{if(!g)return;if(E=g.frames,h=g.animations,zot(o)){var j=g.images?g.images[0]:null;if(j&&j.split){var L=[];e.loop(g.images,function(e){var t=e.split("/").pop();y.asset(e)&&"EmptyAsset"!=y.asset(e).type?L.push(y.asset(e)):y.asset(t)&&"EmptyAsset"!=y.asset(t).type?L.push(y.asset(t)):"EmptyAsset"!=y.asset(e).type?L.push(y.asset(e)):zon&&zogy("Sprite() - please preload Sprite in Frame or with loadAssets")}),C(L,E,h)}else T=new createjs.SpriteSheet(g)}else C(o,E,h)}this.animations=h,this.cjsSprite_constructor(T,z),zot(z)||this.stop(),zot(p)&&(p=e.makeID()),this.id=p,zot(f)&&(f=!0),P.globalControl=f;var _,Y=0;this.parseFrames=function(t,o,n,r){function i(e){Array.isArray(e)?a(e):e.constructor=={}.constructor?l(e):isNaN(e)||c.push({f:Math.floor(e),s:1})}function a(e){s(e[0],e[1],e[3]),e[2]&&!zot(P.animations[e[2]])&&i(P.animations[e[2]])}function l(e){if(!zot(e.frames)){zot(e.speed)&&(e.speed=1);for(var t=0;t<e.frames.length;t++)e.speed<u&&(u=e.speed),e.speed>d&&(d=e.speed),c.push({f:e.frames[t],s:e.speed});e.next&&!zot(P.animations[e.next])&&i(P.animations[e.next])}}function s(e,t,o){function n(e){o<u&&(u=o),o>d&&(d=o),c.push({f:e,s:o})}if(zot(o)&&(o=1),t>e)for(var r=e;r<=t;r++)n(r);else for(r=t;r<=e;r++)n(e-(r-t))}var c=[],u=Number.MAX_VALUE,d=0;if(zot(t))zot(o)&&(o=0),zot(n)&&(n=P.totalFrames-1),s(o,n);else{if(zot(P.animations)||zot(P.animations[t]))return[];i(P.animations[t])}if(r)return c;u=e.constrain(e.decimals(u),.1),d=e.constrain(e.decimals(d),.1);for(var h,g=[],p=u!=d,f=0;f<c.length;f++)if(h=c[f],p)for(var m=0;m<e.constrain(Math.round(u<1?h.s/u:h.s),.1);m++)g.push(h.f);else g.push(h.f);return g},this.run=function(o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,S,B,E,I){function M(){_=P.parseFrames(n,T,A),Y=0,P.gotoAndStop(_[Y]),T=A=null,L={normalizedFrame:_.length-1}}var O,j="time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startFrame, endFrame, tweek, id, globalControl, pauseOnBlur";if(O=zob(this.run,arguments,j))return O;var L,D=t();if(zot(S)&&(S=1),zot(B)||(P.id=B),zot(E)||(P.globalControl=E),Array.isArray(n)){var X,R;L=[];for(var W,H=0,F=0;F<n.length;F++){(X=n[F]).lookup=P.parseFrames(X.label,X.startFrame,X.endFrame),0==F&&(W=X.lookup[0]),delete X.startFrame,delete X.endFrame,X.obj=e.merge(X.obj,{normalizedFrame:X.lookup.length-1}),X.set=e.merge(X.set,{normalizedFrames:{noPick:X.lookup},normalizedFrame:0}),zot(X.wait)&&(X.wait=H*S),R=X.label,delete X.label,L.push(X),H=0;var V=zot(X.time)?o:X.time;A-T>0&&(H=V/(A-T)/2)}if(0==L.length)return this;1==L.length?(o=L[0].time,n=R,M()):P.gotoAndStop(W)}else M();zot(o)&&(o="s"==D?1:1e3),P.running&&P.stopAnimate(P.id),P.running=!0,Array.isArray(L)||(H=0,A-T>0&&(H=o/Math.abs(A-T)/2),_&&_.length>0&&(H=o/_.length/2),zot(d)&&(d=H*S),zot(y)&&(y=H*S));var N=function(){P.running=!1,P.stop(),r&&"function"==typeof r&&r(i||P)};return e.animate({target:P,obj:L,time:o,ease:"linear",call:N,params:i,wait:a,waitedCall:l,waitedParams:s,loop:c,loopCount:u,loopWait:d,loopCall:h,loopParams:g,loopWaitCall:p,loopWaitParams:f,rewind:z,rewindWait:y,rewindCall:v,rewindParams:b,rewindWaitCall:w,rewindWaitParams:C,rewindTime:x,rewindEase:k,override:!1,pauseOnBlur:I,id:P.id}),P.runPaused=!1,P},this.runPaused=!0,this.pauseRun=function(t){return zot(t)&&(t=!0),P.runPaused=t,P.globalControl?e.pauseAnimate(t,P.id):P.pauseAnimate(t,P.id),P},this.stopRun=function(){return P.runPaused=!0,P.running=!1,P.globalControl?e.stopAnimate(P.id):P.stopAnimate(P.id),P},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(e){e=Math.round(e),this.paused?this.gotoAndStop(e):this.gotoAndPlay(e)}}),Object.defineProperty(this,"normalizedFrame",{get:function(){return Y},set:function(e){Y=Math.round(e),this.gotoAndStop(_[Y])}}),Object.defineProperty(this,"normalizedFrames",{get:function(){return _},set:function(e){_=e}}),Object.defineProperty(this,"totalFrames",{get:function(){return T.getNumFrames()},set:function(){zog("zim.Sprite - totalFrames is read only")}}),!1!==v&&e.styleTransforms(this,A),this.clone=function(){return this.cloneProps(new e.Sprite(o,n,r,i,a,l,s,c,u,d,h,g,null,f,m,z,y,v,this.group,w))},y=zdf||1,createjs&&!createjs.stageTransformable&&y.retina&&(this.localToGlobal=function(t,o){return e.localToGlobal(t,o,this,this.cjsSprite_localToGlobal)},this.globalToLocal=function(t,o){return e.globalToLocal(t,o,this,this.cjsSprite_globalToLocal)},this.localToLocal=function(t,o,n){return e.localToLocal(t,o,n,this)}),this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},e.displayBase(P),this.dispose=function(){e.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.Sprite,createjs.Sprite,["clone","localToLocal","localToGlobal","globalToLocal"],"cjsSprite",!1),zimify(e.Sprite.prototype),e.MovieClip=function(t,o,n,r,i,a,l){var s,c="mode, startPosition, loop, labels, style, group, inherit";if(s=zob(e.MovieClip,arguments,c,this))return s;z_d("50.9"),this.type="MovieClip",this.group=a;var u=!1===i?{}:e.getStyle(this.type,this.group,l);zot(t)&&(t=null!=u.mode?u.mode:null),zot(o)&&(o=null!=u.startPosition?u.startPosition:null),zot(n)&&(n=null!=u.loop?u.loop:null),zot(r)&&(r=null!=u.labels?u.labels:null),this.cjsMovieClip_constructor(t,o,n,r),!1!==i&&e.styleTransforms(this,u),this.clone=function(){return this.cloneProps(new e.MovieClip(t,o,n,r,i,this.group,l))},this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)};var d=zdf||1;createjs&&!createjs.stageTransformable&&d.retina&&(this.localToGlobal=function(t,o){return e.localToGlobal(t,o,this,this.cjsMovieClip_localToGlobal)},this.globalToLocal=function(t,o){return e.globalToLocal(t,o,this,this.cjsMovieClip_globalToLocal)},this.localToLocal=function(t,o,n){return e.localToLocal(t,o,n,this)}),e.displayBase(that),this.dispose=function(){e.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.MovieClip,createjs.MovieClip,["clone","localToLocal","localToGlobal","globalToLocal"],"cjsMovieClip",!1),zimify(e.MovieClip.prototype),e.SVGContainer=function(t,o,n,r,i,a,l,s){function c(){function e(e,n){return i(e)||r(e,n)||o(e,n)||t()}function t(){throw new TypeError("Invalid")}function o(e,t){if(e){if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function r(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var o=[],n=!0,r=!1,i=undefined;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(o.push(a.value),!t||o.length!==t);n=!0);}catch(s){r=!0,i=s}finally{try{n||null==l["return"]||l["return"]()}finally{if(r)throw i}}return o}}function i(e){if(Array.isArray(e))return e}var a=2*Math.PI,l=function(e,t,o,n,r,i,a){var l=e.x,s=e.y;return{x:n*(l*=t)-r*(s*=o)+i,y:r*l+n*s+a}},s=function(e,t){var o=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:4/3*Math.tan(t/4),n=Math.cos(e),r=Math.sin(e),i=Math.cos(e+t),a=Math.sin(e+t);return[{x:n-r*o,y:r+n*o},{x:i+a*o,y:a-i*o},{x:i,y:a}]},c=function(e,t,o,n){var r=e*o+t*n;return r>1&&(r=1),r<-1&&(r=-1),(e*n-t*o<0?-1:1)*Math.acos(r)},u=function(e,t,o,n,r,i,l,s,u,d,h,g){var p=Math.pow(r,2),f=Math.pow(i,2),m=Math.pow(h,2),z=Math.pow(g,2),y=p*f-p*z-f*m;y<0&&(y=0),y/=p*z+f*m;var v=(y=Math.sqrt(y)*(l===s?-1:1))*r/i*g,b=y*-i/r*h,w=d*v-u*b+(e+o)/2,C=u*v+d*b+(t+n)/2,x=(h-v)/r,k=(g-b)/i,T=(-h-v)/r,A=(-g-b)/i,P=c(1,0,x,k),S=c(x,k,T,A);return 0===s&&S>0&&(S-=a),1===s&&S<0&&(S+=a),[w,C,P,S]};return function(t){var o=t.px,n=t.py,r=t.cx,i=t.cy,c=t.rx,d=t.ry,h=t.xAxisRotation,g=void 0===h?0:h,p=t.largeArcFlag,f=void 0===p?0:p,m=t.sweepFlag,z=void 0===m?0:m,y=[];if(0===c||0===d)return[];var v=Math.sin(g*a/360),b=Math.cos(g*a/360),w=b*(o-r)/2+v*(n-i)/2,C=-v*(o-r)/2+b*(n-i)/2;if(0===w&&0===C)return[];c=Math.abs(c),d=Math.abs(d);var x=Math.pow(w,2)/Math.pow(c,2)+Math.pow(C,2)/Math.pow(d,2);x>1&&(c*=Math.sqrt(x),d*=Math.sqrt(x));var k=e(u(o,n,r,i,c,d,f,z,v,b,w,C),4),T=k[0],A=k[1],P=k[2],S=k[3],B=Math.abs(S)/(a/4);Math.abs(1-B)<1e-7&&(B=1);var E=Math.max(Math.ceil(B),1);S/=E;for(var I=0;I<E;I++)y.push(s(P,S)),P+=S;return y.map(function(e){var t=l(e[0],c,d,b,v,T,A),o=t.x,n=t.y,r=l(e[1],c,d,b,v,T,A),i=r.x,a=r.y,s=l(e[2],c,d,b,v,T,A);return{x1:o,y1:n,x2:i,y2:a,x:s.x,y:s.y}})}}function u(t){var o,n,r,i,a,l=t.getAttribute("style");if(l){var s=_(l);o=s[0],n=s[1],r=s[2],i=s[3],a=s[4]}o=t.getAttribute("fill")?t.getAttribute("fill"):zot(o)?T:o,n=t.getAttribute("stroke")?t.getAttribute("stroke"):zot(n)?P:n,r=t.getAttribute("stroke-width")?t.getAttribute("stroke-width"):zot(r)?B:r,i=t.getAttribute("fill-opacity")?t.getAttribute("fill-opacity"):zot(i)?I:i,a=t.getAttribute("stroke-opacity")?t.getAttribute("stroke-opacity"):zot(a)?O:a;var c=t.getAttribute("x")?t.getAttribute("x"):0;c=t.getAttribute("cx")?t.getAttribute("cx"):c;var u=t.getAttribute("y")?t.getAttribute("y"):0;return u=t.getAttribute("cy")?t.getAttribute("cy"):u,zot(i)||zot(o)||(o=e.convertColor(o,"rgba",Number(i))),zot(a)||zot(n)||(n=e.convertColor(n,"rgba",Number(a))),[o,n,Number(r),Number(i),Number(a),Number(c),Number(u)]}function d(t,n){function a(){j=M[M.length-1],k.length>=2&&("z"!=j&&"Z"!=j||(_="blob")),(l="squiggle"==_?new e.Squiggle(b,w,k,null,null,null,null,r,null,null,null,null,null,null,null,null,null,null,i):new e.Blob(v,b,w,k,null,null,null,null,r,null,null,null,null,null,null,null,null,null,null,i)).loc(0,0,m),j=M[M.length-1],M[M.length-2],h.indexOf(j)>=0?(T[0]=k[k.length-1][0],T[1]=k[k.length-1][1],z.x=k[k.length-1][0],z.y=k[k.length-1][1],(k=[]).push([T[0],T[1]])):(T=[0,0],k=[[0,0]]),M=[],"z"!=j&&"Z"!=j&&M.push(j),g.x=0,g.y=0;var o=t.getAttribute("transform");(o||x)&&D(l,o||x)}zot(n)&&(n=!0);var l,s,d=["M","m","L","l","H","h","V","v","C","c","S","s","Q","q","T","t","A","a","z","Z"],h=["m","l","h","v","c","s","q","t","a","z"],g=new e.Point(0,0);if(zot(t.getAttribute))var f=t;else t.getAttribute("id"),f=t.getAttribute("d");if(f=(f=(f=(f=(f=f.replace(/,/g," ")).replace(/([a-zA-Z])/g," $1 ")).replace(/-/g," -")).replace(/\s+/g," ")).replace(/\.(\d*)\./g,".$1 ."),n){var y=u(t),v=y[0],b=y[1],w=y[2];y[3],y[4]}var C,k=[],T=[0,0],A=new e.Point(0,0),P=new e.Point(0,0,0,0),S=new e.Point(0,0,0,0,0,0),B=new e.Point(0,0,0,0,0,0,0),E=f.split(" "),I=E.slice(1,E.length),M=[],O=!1,j="",L=!1,_="squiggle",Y=null;return e.loop(I,function(e,t){if(0==t&&(z.x=0,z.y=0,T=[0,0],j=""),-1==d.indexOf(e)){if("lxo"==C&&(C="lx",M.push("l"),O=!0),"lyo"==C&&(C="ly",O=!0),"Lxo"==C&&(C="Lx",M.push("L"),O=!0),"Lyo"==C&&(C="Ly",O=!0),s=Number(e),s=Math.round(100*s)/100,"X"==C?(z.x=s,C="Y"):"Y"==C?(z.y=s,C="Lxo",k.push([z.x,z.y])):"x"==C?(z.x=z.x+s,C="y"):"y"==C&&(z.y=z.y+s,C="lxo",k.push([z.x,z.y])),"H"==C||"h"==C?(g.x=k[k.length-1][0],g.y=k[k.length-1][1],g.x=g.x+("h"==C?s:s-z.x),k.push([g.x,g.y]),C="Lx"):"V"!=C&&"v"!=C||(g.x=k[k.length-1][0],g.y=k[k.length-1][1],g.y=g.y+("v"==C?s:s-z.y),k.push([g.x,g.y]),C="lx"),"Lx"==C?(A.x=s,C="Ly"):"Ly"==C?(A.y=s,g.x=A.x,g.y=A.y,k.push([g.x,g.y]),C="Lx"):"lx"==C?(M.length>0&&(0!=g.x&&0!=g.y?(z.x=g.x,z.y=g.y):(z.x=g.x+z.x,z.y=g.y+z.y)),A.x=z.x+s,C=O?"lyo":"ly"):"ly"==C&&(A.y=z.y+s,g.x=A.x,g.y=A.y,k.push([g.x,g.y]),C="lx"),"qx"==C||"Qx"==C)k.length>0?(z.x=k[k.length-1][0],z.y=k[k.length-1][1]):(z.x=0,z.y=0),P.x="qx"==C?z.x+s:s,C="qx"==C?"qy":"Qy";else if("qy"==C||"Qy"==C)P.y="qy"==C?z.y+s:s,C="qy"==C?"qz":"Qz",L&&(L=!1,(n=k[k.length-1])[6]=-n[4],n[7]=-n[5],n[8]="mirror",g.x=P.x,g.y=P.y,k[k.length]=[g.x,g.y,0,0,-n[6],n[7],0,0,"free"],C="qy"==C?"qx":"Qx");else if("qz"==C||"Qz"==C)P.z="qz"==C?z.x+s:s,C="qz"==C?"qq":"Qq";else if("qq"==C||"Qq"==C){P.w="qq"==C?z.y+s:s;var n=k[k.length-1];g.x=n[0],g.y=n[1],1==k.length?(n[2]=0,n[3]=0,n[4]=0,n[5]=0,n[6]=2/3*(P.x-g.x),n[7]=2/3*(P.y-g.y),n[8]="free"):k[k.length]=[g.x,g.y,0,0,0,0,2/3*(P.x-g.x),2/3*(P.y-g.y),"free"],g.x=P.z,g.y=P.w,k[k.length]=[g.x,g.y,0,0,2/3*(P.x-g.x),2/3*(P.y-g.y),0,0,"free"],C="qq"==C?"qx":"Qx"}if("cx"==C||"Cx"==C)k.length>0?(z.x=k[k.length-1][0],z.y=k[k.length-1][1]):(z.x=0,z.y=0),S.x="cx"==C?z.x+s:s,C="cx"==C?"cy":"Cy";else if("cy"==C||"Cy"==C)S.y="cy"==C?z.y+s:s,C="cy"==C?"cz":"Cz";else if("cz"==C||"Cz"==C)S.z="cz"==C?z.x+s:s,C="cz"==C?"cq":"Cq";else if("cq"==C||"Cq"==C)S.q="cq"==C?z.y+s:s,C="cq"==C?"cr":"Cr",L&&((n=k[k.length-1])[2]=0,n[3]=0,zot(n[4])&&(n[4]=0),zot(n[5])&&(n[5]=0),n[6]=-n[4],n[7]=-n[5],n[8]="mirror",g.x=S.z,g.y=S.q,k[k.length]=[g.x,g.y,0,0,S.x-g.x,S.y-g.y,0,0,"free"],C="cr"==C?"cx":"Cx");else if("cr"==C||"Cr"==C)S.r="cr"==C?z.x+s:s,C="cr"==C?"cs":"Cs";else if("cs"==C||"Cs"==C)S.s="cs"==C?z.y+s:s,n=k[k.length-1],1==k.length&&(n[2]=0,n[3]=0,n[4]=0,n[5]=0),n[6]=S.x-n[0],n[7]=S.y-n[1],n[8]="free",g.x=S.r,g.y=S.s,k[k.length]=[g.x,g.y,0,0,S.z-g.x,S.q-g.y,0,0,"free"],C="cs"==C?"cx":"Cx";else if("ax"==C||"Ax"==C)k.length>0?(z.x=k[k.length-1][0],z.y=k[k.length-1][1]):(z.x=0,z.y=0),B.x=s,C="ax"==C?"ay":"Ay";else if("ay"==C||"Ay"==C)B.y=s,C="ay"==C?"az":"Az";else if("az"==C||"Az"==C)B.z=s,C="az"==C?"aq":"Aq";else if("aq"==C||"Aq"==C)B.q=s,C="aq"==C?"ar":"Ar";else if("ar"==C||"Ar"==C)B.r=s,C="ar"==C?"as":"As";else if("as"==C||"As"==C)B.s="as"==C?z.x+s:s,C="as"==C?"at":"At";else if("at"==C||"At"==C){B.t="at"==C?z.y+s:s,p||(p=c());var r=p({px:z.x,py:z.y,cx:B.s,cy:B.t,rx:B.x,ry:B.y,xAxisRotation:B.z,largeArcFlag:B.q,sweepFlag:B.r});loop(r,function(e,t){n=k[k.length-1],1==k.length&&(n[2]=0,n[3]=0,n[4]=0,n[5]=0),0==t&&1==k.length?(n[6]=e.x1-g.x-z.x,n[7]=e.y1-g.y-z.y):(n[6]=e.x1-g.x,n[7]=e.y1-g.y),n[8]="free",g.x=e.x,g.y=e.y,k[k.length]=[g.x,g.y,0,0,e.x2-g.x,e.y2-g.y,0,0,"free"]}),C="at"==C?"ax":"Ax"}}else M.push(e),"s"!=e&&(L=!1),M.length>1&&("M"!=e&&"m"!=e||(a(M),"M"==e?(z.x=0,z.y=0):(z.x=k[k.length-1][0],z.y=k[k.length-1][1]),k=[],(M=[]).push(e))),"M"==e?C="X":"m"==e?C="x":"L"==e?(C="Lx",o&&Y&&"l"!=Y&&a(M),Y="l"):"l"==e?(C="lx",o&&Y&&"l"!=Y&&a(M),Y="l"):"H"==e?(C="H",o&&Y&&"l"!=Y&&a(M),Y="l"):"h"==e?(C="h",o&&Y&&"l"!=Y&&a(M),Y="l"):"V"==e?(C="V",o&&Y&&"l"!=Y&&a(M),Y="l"):"v"==e?(C="v",o&&Y&&"l"!=Y&&a(M),Y="l"):"C"==e?(C="Cx",o&&Y&&"c"!=Y&&a(M),Y="c"):"c"==e?(C="cx",o&&Y&&"c"!=Y&&a(M),Y="c"):"S"==e?(L=!0,C="Cx",o&&Y&&"c"!=Y&&a(M),Y="c"):"s"==e?(L=!0,C="cx",o&&Y&&"c"!=Y&&a(M),Y="c"):"Q"==e?(C="Qx",o&&Y&&"q"!=Y&&a(M),Y="q"):"q"==e?(C="qx",o&&Y&&"q"!=Y&&a(M),Y="q"):"T"==e?(L=!0,C="Qx",o&&Y&&"q"!=Y&&a(M),Y="q"):"t"==e?(L=!0,C="qx",o&&Y&&"q"!=Y&&a(M),Y="q"):"A"==e?(C="Ax",o&&Y&&"a"!=Y&&a(),Y="a"):"a"==e?(C="ax",o&&Y&&"a"!=Y&&a(),Y="a"):"z"!=e&&"Z"!=e||(_="blob")}),n&&a(),k}var h,g="svg, splitTypes, geometric, showControls, interactive, style, group, inherit";if(h=zob(e.SVGContainer,arguments,g,this))return h;z_d("50.95"),this.group=l;var p,f=!1===a?{}:e.getStyle("SVGContainer",this.group,s),m=this,z=new e.Point(0,0);if(zot(o)&&(o=!1),zot(n)&&(n=!0),!zot(t)){if(t.replace&&(t=t.replace(/style\s?=[^"]*"[^"]*"/gi,"")),zot(t.draggable))t.getAttribute||(y=new DOMParser,t=y.parseFromString(t,"image/svg+xml").documentElement),b=this.svg=t;else var y=new DOMParser,v=(t=t.innerHTML?y.parseFromString(t.innerHTML,"text/xml"):t).getElementsByTagName("svg"),b=this.svg=v?t.getElementsByTagName("svg")[0]:null;if(!zot(b))var w=b.getAttribute("width"),C=b.getAttribute("height");if(w&&(w=Number(w.trim())),C&&(C=Number(C.trim())),this.zimContainer_constructor(w,C),this.type="SVGContainer",zot(b))return;var x,k=e.black,T=e.black,A=e.black,P=e.black,S=2,B=2,E=1,I=1,M=1,O=1;function j(t){e.loop(t,function(e){var t=e.tagName.toLowerCase();if("path"==t&&d(e),"circle"==t&&Y("circle",e),"rect"==t&&Y("rect",e),"ellipse"==t&&Y("ellipse",e),"line"==t&&Y("line",e),"polygon"==t&&Y("polygon",e),"polyline"==t&&Y("polyline",e),"g"==t){var o,n,r,i,a,l=e.getAttribute("style");if(l){var s=_(l);o=s[0],n=s[1],r=s[2],i=s[3],a=s[4]}x=e.getAttribute("transform"),T=e.getAttribute("fill")?e.getAttribute("fill"):zot(o)?k:o,P=e.getAttribute("stroke")?e.getAttribute("stroke"):zot(n)?A:n,B=e.getAttribute("stroke-width")?e.getAttribute("stroke-width"):zot(r)?S:r,I=e.getAttribute("fill-opacity")?e.getAttribute("fill-opacity"):zot(i)?E:i,O=e.getAttribute("stroke-opacity")?e.getAttribute("stroke-opacity"):zot(a)?M:a}j(e.children),"g"==e.tagName.toLowerCase()&&(T=k,P=A,B=S,I=E,O=M,x=null)})}var L=t.getElementsByTagName("svg");function _(t){var o,n,r,i,a,l=t.split(";");return e.loop(l,function(e){var t=(e=e.replace(/,/g,"")).split(":"),l=t[0].trim().toLowerCase(),s=t[1].trim().toLowerCase().replace("px","");"fill"==l&&(o=s),"stroke"==l&&(n=s),"stroke-width"==l&&(r=s),"opacity"==l&&(i=s,a=s),"fill-opacity"==l&&(i=s),"stroke-opacity"==l&&(a=s)}),[o,n,r,i,a]}function Y(t,o){var a,l=u(o),s=l[0],c=l[1],d=l[2],h=(l[3],l[4],l[5]),g=l[6];if("circle"==t){var p=Number(o.getAttribute("r").trim()),f=.5523*p;a=n?new e.Circle(Number(o.getAttribute("r")),s,c,d):new e.Blob(s,c,d,4,p,f,"mirror",null,r,null,null,null,null,null,null,null,null,null,null,i)}else if("rect"==t)if(n)a=new e.Rectangle(Number(o.getAttribute("width")),Number(o.getAttribute("height")),s,c,d,Number(o.getAttribute("rx")));else{var z=Number(o.getAttribute("width")),y=Number(o.getAttribute("height")),v=Number(o.getAttribute("rx")),b=Number(o.getAttribute("ry"));if(v&&b){var w=.5523*v,C=.5523*b;a=new e.Blob(s,c,d,[[v,0,0,0,-w,0,0,0,"free"],[z-v,0,0,0,0,0,w,0,"free"],[z,b,0,0,0,-C,0,0,"free"],[z,y-b,0,0,0,0,0,C,"free"],[z-v,y,0,0,w,0,0,0,"free"],[v,y,0,0,0,0,-w,0,"free"],[0,y-b,0,0,0,C,0,0,"free"],[0,b,0,0,0,0,0,-C,"free"]],null,null,null,null,r,null,null,null,null,null,null,null,null,null,null,i)}else a=new e.Blob(s,c,d,[[0,0],[z,0],[z,y],[0,y]],null,null,null,null,r,null,null,null,null,null,null,null,null,null,null,i)}else if("line"==t)a=new e.Squiggle(c,d,[[Number(o.getAttribute("x1")),Number(o.getAttribute("y1"))],[Number(o.getAttribute("x2")),Number(o.getAttribute("y2"))]],null,null,null,null,r,null,null,null,null,null,null,null,null,null,null,i);else if("polygon"==t||"polyline"==t){var k=o.getAttribute("points");k=(k=k.replace(/-/g," -")).replace(/\s+/g," ");var T,A=[];-1!=k.indexOf(",")?e.loop(k.split(" "),function(e){var t=e.split(",");A.push([Number(t[0].trim()),Number(t[1].trim())])}):e.loop(k.split(" "),function(e,t){(t+1)%2==0&&A.push([T,e.trim()]),T=e.trim()}),a="polygon"==t?new Blob(s,c,d,A):new e.Squiggle(c,d,A,null,null,null,null,r,null,null,null,null,null,null,null,null,null,null,i)}else"ellipse"==t&&(a=new e.Blob(s,c,d,X(0,0,Number(o.getAttribute("rx")),Number(o.getAttribute("ry"))),null,null,null,null,r,null,null,null,null,null,null,null,null,null,null,i));a.loc(h,g,m);var P=o.getAttribute("transform");(P||x)&&D(a,P||x),!i||"Rectangle"!=a.type&&"Circle"!=a.type||a.transform({showReg:!1,visible:r})}function D(t,o){var n=o.split(")");e.loop(n,function(e){if(""!=e){var o=e.trim().split("("),n=o[0].trim().toLowerCase(),r=o[1].trim().toLowerCase().replace("px","").replace("deg","");if("translate"==n){var i=r.split(",");t.mov(Number(i[0].trim()),i[1]?Number(i[1].trim()):0)}
if("scale"==n){var a=r.split(",");"Blob"==t.type||"Squiggle"==t.type?1==a.length?t.transformPoints("scale",Number(a[0].trim())):2==a.length&&(t.transformPoints("scaleX",Number(a[0].trim())),t.transformPoints("scaleY",Number(a[1].trim()))):1==a.length?t.sca(Number(a[0].trim())):2==a.length&&t.sca(Number(a[0].trim()),Number(a[1].trim()))}if("rotate"==n){var l=r.split(",");1==l.length?l.push(0,0):2==l.length&&l.push(0),t.rot(Number(l[0].trim()),Number(l[1].trim()),Number(l[2].trim()))}"skewX"==n&&(t.skewX=r),"skewY"==n&&(t.skewY=r)}})}function X(e,t,o,n){var r=.5522848,i=o*r,a=n*r,l=e+o,s=t+n;return[[e-o,t,0,0,e,s+a-n,e,t-a,"mirror"],[e,t-n,0,0,e-i,t,l+i-o,t,"mirror"],[l,t,0,0,e,t-a,e+i-i,s+a-n,"mirror"],[e,s,0,0,l-o+i,t,e-i,t,"mirror"]]}0==L.length&&(L=[t]),j(L)}m.processPath=function(e){return d(e,!1)},!1!==a&&e.styleTransforms(this,f),this.clone=function(){return m.cloneProps(new e.SVGContainer(t,o,n,r,i,a,this.group,s))}},e.extend(e.SVGContainer,e.Container,"clone","zimContainer",!1),e.CustomShape=function(t,o,n,r){e.zimCustomShapeCheck||(z_d("50.97"),e.zimCustomShapeCheck=!0),this.zimContainer_constructor(t,o,n,r,!1);var i=this;this.mouseChildren=!1,i._dashedOffset=5,Object.defineProperty(i,"color",{get:function(){return i._color},set:function(e){zot(e)&&(e="black"),i._color=e,e&&e.type?i.specialColor(i.colorCommand,e):i.colorCommand.style=e}}),this.setColorRange=function(e,t){return zot(t)?(i.startColor=i.color,i.endColor=e):zot(e)?(i.startColor=i.color,i.endColor=t):(i.startColor=e,i.endColor=t),i},i._colorRange=0,Object.defineProperty(i,"colorRange",{get:function(){return i._colorRange},set:function(t){i._colorRange=t,zot(i.startColor)||zot(i.endColor)||(i.color=e.colorRange(i.startColor,i.endColor,t))}}),Object.defineProperty(i,"borderColor",{get:function(){return i._borderColor},set:function(e){i._borderColor=e,e&&!i.borderWidth&&(i.borderWidth=1),i.borderColorCommand?e&&e.type?i.specialColor(i.borderColorCommand,e):i.borderColorCommand.style=e:i.drawShape()}}),Object.defineProperty(i,"borderWidth",{get:function(){return i._borderWidth},set:function(e){e>0||(e=0),i._borderWidth=e,i.borderWidthCommand&&0!=i._borderWidth?(i.borderWidthCommand.width=i._borderWidth,i._dashed&&(i.borderDashedCommand.segments=i._dashed,i.borderDashedCommand.offset=i._dashedOffset)):(i.borderWidthCommand=null,i.drawShape())}}),Object.defineProperty(i,"thickness",{get:function(){return i._thickness},set:function(e){e>0||(e=0),i._thickness=e,i.thicknessCommand&&0!=i._thickness?(i.thicknessCommand.width=i._thickness,i._dashed&&(i.dashedCommand.segments=i._dashed,i.dashedCommand.offset=i._dashedOffset)):i.drawShape()}}),Object.defineProperty(i,"dashed",{get:function(){return i._dashed},set:function(e){if(i._dashed=e,e&&!Array.isArray(i._dashed)&&(i.dashed=[10,10]),"Squiggle"==i.type||"Line"==i.type){if(!i.thicknessCommand||0==i._thickness)return;var t=i.dashedCommand}else{if(!i.borderWidthCommand||0==i._borderWidth)return;t=i.borderDashedCommand}t?i._dashed?(t.segments=i._dashed,t.offset=i._dashedOffset):(t.segments=null,t.offset=null):i.drawShape()}}),Object.defineProperty(i,"dashedOffset",{get:function(){return i._dashedOffset},set:function(e){if(isNaN(e)&&(e=5),i._dashedOffset=e,"Squiggle"==i.type||"Line"==i.type){if(!i.thicknessCommand||0==i._thickness)return;var t=i.dashedCommand}else{if(!i.borderWidthCommand||0==i._borderWidth)return;t=i.borderDashedCommand}t?i._dashed?(t.segments=i._dashed,t.offset=i._dashedOffset):(t.segments=null,t.offset=null):i.drawShape()}}),Object.defineProperty(i,"corner",{get:function(){return i._corner},set:function(e){i._corner=e,i.drawShape()}}),this.linearGradient=function(e,t,o,n,r,i){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(e,t,o,n,r,i),this},this.radialGradient=function(e,t,o,n,r,i,a,l){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(e,t,o,n,r,i,a,l),this},this.cloneAll=function(t,o,n,r){var i=this.getBounds();zot(i)&&(i={x:null,y:null,width:null,height:null});var a=this.cloneChildren(this.cloneProps(new e.Container(i.x,i.y,i.width,i.height,o,n,r)),t);return a.mouseChildren=!1,a.type=this.type,a}},e.extend(e.CustomShape,e.Container,null,"zimContainer",!1),e.Circle=function(t,o,n,r,i,a,l,s,c,u,d){function h(){return arguments}var g,p="radius, color, borderColor, borderWidth, dashed, percent, percentClose, strokeObj, style, group, inherit";if(g=zob(e.Circle,arguments,p,this))return g;z_d("51"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Circle",this.group=u;var f=!1===c?{}:e.getStyle(this.type,this.group,d);zot(t)&&(t=null!=f.radius?f.radius:50),zot(i)&&(i=null!=f.dashed&&f.dashed),zot(n)&&(n=null!=f.borderColor?f.borderColor:null),zot(r)&&(r=null!=f.borderWidth?f.borderWidth:null),n<0||r<0?n=r=null:null!=n&&null==r&&(r=1),zot(o)&&(o=null!=f.color?f.color:r>0?"rgba(0,0,0,0)":"black"),zot(a)&&(a=null!=f.percent?f.percent:100),zot(l)&&(l=null==f.percentClose||f.percentClose),zot(s)&&(s=null!=f.strokeObj?f.strokeObj:{});var m=h(t,o,n,r,a);t=e.Pick.choose(t),o=e.Pick.choose(o),n=e.Pick.choose(n),r=e.Pick.choose(r),a=e.Pick.choose(a);var z=this;z._radius=t,z._color=o,z._borderColor=n,z._borderWidth=r,z._dashed=i,z._dashed&&!Array.isArray(z._dashed)&&(z._dashed=[10,10]);var y=this.shape=new createjs.Shape;this.addChild(y);var v=y.graphics;z.drawShape=function(){v.c(),z.colorCommand=v.f(z._color).command,z._color&&z._color.type&&z.specialColor(z.colorCommand,z._color),(zot(z._borderWidth)||z._borderWidth>0)&&(zot(z._borderColor)&&zot(z._borderWidth)||(zot(z._borderColor)&&(z._borderColor="black"),z.borderColorCommand=v.s(z._borderColor).command,z._borderColor&&z._borderColor.type&&z.specialColor(z.borderColorCommand,z._borderColor),z.borderWidthCommand=v.ss(z._borderWidth,s.caps,s.joints,s.miterLimit,s.ignoreScale).command,z._dashed&&(z.borderDashedCommand=v.sd(Array.isArray(z._dashed)?z._dashed:[10,10],z._dashedOffset).command)));var e=2*z._radius;if("number"==typeof a&&a>=0&&a<100){var t=360*a/100/2;v.arc(0,0,z._radius,(-t-90)*Math.PI/180,(t-90)*Math.PI/180,!1),l&&v.cp(),e=z._radius-Math.cos(t*Math.PI/180)*z._radius}else v.dc(0,0,z._radius);z.setBounds(-z._radius,-z._radius,2*z._radius,e)},z.drawShape(),Object.defineProperty(z,"radius",{get:function(){return z._radius},set:function(e){z._radius=e,z.drawShape()}}),Object.defineProperty(z,"percent",{get:function(){return a},set:function(e){a=e,z.drawShape()}}),Object.defineProperty(z,"percentClose",{get:function(){return l},set:function(e){l=e,z.drawShape()}}),!1!==c&&e.styleTransforms(this,f),this.clone=function(t){var o=z.cloneProps(new e.Circle(t||!e.isPick(m[0])?z.radius:m[0],t||!e.isPick(m[1])?z.color:m[1],t||!e.isPick(m[2])?z.borderColor:m[2],t||!e.isPick(m[3])?z.borderWidth:m[3],z.dashed,t||!e.isPick(m[4])?a:m[4],l,s,c,this.group,d));return z.linearGradientParams&&o.linearGradient.apply(o,z.linearGradientParams),z.radialGradientParams&&o.radialGradient.apply(o,z.radialGradientParams),o}},e.extend(e.Circle,e.CustomShape,"clone","zimCustomShape",!1),e.Rectangle=function(t,o,n,r,i,a,l,s,c,u,d){function h(){return arguments}var g,p="width, height, color, borderColor, borderWidth, corner, dashed, strokeObj, style, group, inherit";if(g=zob(e.Rectangle,arguments,p,this))return g;z_d("52"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Rectangle",this.group=u;var f=!1===c?{}:e.getStyle(this.type,this.group,d);zot(t)&&(t=null!=f.width?f.width:null),zot(o)&&(o=null!=f.height?f.height:zot(t)?100:t),zot(t)&&(t=o),zot(a)&&(a=null!=f.corner?f.corner:0),zot(l)&&(l=null!=f.dashed&&f.dashed),zot(r)&&(r=null!=f.borderColor?f.borderColor:null),zot(i)&&(i=null!=f.borderWidth?f.borderWidth:null),r<0||i<0?r=i=null:null!=r&&null==i&&(i=1),zot(n)&&(n=null!=f.color?f.color:i>0?"rgba(0,0,0,0)":"black"),zot(s)&&(s=null!=f.strokeObj?f.strokeObj:{});var m=h(t,o,n,r,i);t=e.Pick.choose(t),o=e.Pick.choose(o),n=e.Pick.choose(n),r=e.Pick.choose(r),i=e.Pick.choose(i);var z=this;z._color=n,z._borderColor=r,z._borderWidth=i,z._dashed=l,z._dashed&&!Array.isArray(z._dashed)&&(z._dashed=[10,10]),z._corner=a;var y=this.shape=new createjs.Shape;this.addChild(y);var v=y.graphics;z.drawShape=function(){v.c(),z.colorCommand=v.f(z._color).command,n&&n.type&&z.specialColor(z.colorCommand,n),(zot(z._borderWidth)||z._borderWidth>0)&&(zot(z._borderColor)&&zot(z._borderWidth)||(zot(z._borderColor)&&(z._borderColor="black"),z.borderColorCommand=v.s(z._borderColor).command,z._borderColor&&z._borderColor.type&&z.specialColor(z.borderColorCommand,z._borderColor),z.borderWidthCommand=v.ss(z._borderWidth,s.caps,s.joints,s.miterLimit,s.ignoreScale).command,z._dashed&&(z.borderDashedCommand=v.sd(Array.isArray(z._dashed)?z._dashed:[10,10],z._dashedOffset).command))),Array.isArray(z._corner)?v.rc(0,0,t,o,z._corner[0],z._corner[1],z._corner[2],z._corner[3]):z._corner>0?v.rr(0,0,t,o,z._corner):v.r(0,0,t,o),z.setBounds(0,0,t,o)},z.drawShape(),!1!==c&&e.styleTransforms(this,f),this.clone=function(n){return z.cloneProps(new e.Rectangle(n||!e.isPick(m[0])?t:m[0],n||!e.isPick(m[1])?o:m[1],n||!e.isPick(m[2])?z.color:m[2],n||!e.isPick(m[3])?z.borderColor:m[3],n||!e.isPick(m[4])?z.borderWidth:m[4],a,z._dashed,s,c,this.group,d))}},e.extend(e.Rectangle,e.CustomShape,"clone","zimCustomShape",!1),e.Triangle=function(t,o,n,r,i,a,l,s,c,u,d,h,g){function p(){return arguments}var f,m="a, b, c, color, borderColor, borderWidth, center, adjust, dashed, strokeObj, style, group, inherit";if(f=zob(e.Triangle,arguments,m,this))return f;z_d("53"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Triangle",this.group=h;var z=!1===d?{}:e.getStyle(this.type,this.group,g);zot(t)&&(t=null!=z.a?z.a:100),zot(o)&&(o=null!=z.b?z.b:t),zot(n)&&(n=null!=z.c?z.c:o),-1==n&&(n=Math.sqrt(Math.pow(t,2)+Math.pow(o,2))),zot(l)&&(l=null==z.center||z.center),zot(s)&&(s=null!=z.adjust?z.adjust:0),zot(i)&&(i=null!=z.borderColor?z.borderColor:null),zot(a)&&(a=null!=z.borderWidth?z.borderWidth:null),i<0||a<0?i=a=null:null!=i&&null==a&&(a=1),zot(r)&&(r=null!=z.color?z.color:a>0?"rgba(0,0,0,0)":"black"),zot(s)&&(s=null!=z.adjust?z.adjust:0),zot(u)&&(u=null!=z.strokeObj?z.strokeObj:{});var y=p(t,o,n,r,i,a);t=e.Pick.choose(t),o=e.Pick.choose(o),n=e.Pick.choose(n),this.a=t,this.b=o,this.c=n,r=e.Pick.choose(r),i=e.Pick.choose(i),a=e.Pick.choose(a);var v=this;v._color=r,v._borderColor=i,v._borderWidth=a,v._dashed=c,v._dashed&&!Array.isArray(v._dashed)&&(v._dashed=[10,10]);var b=[t,o,n];b.sort(function(e,t){return t-e});var w=b[0],C=b[1],x=b[2],k=[b.indexOf(t),b.indexOf(o),b.indexOf(n)];if(w>C+x)zog("zim display - Triangle(): invalid triangle lengths");else{var T=this.shape=new createjs.Shape;this.adjusted=s,this.addChild(T);var A=T.graphics;v.drawShape=function(){A.c(),v.colorCommand=A.f(v._color).command,v._color&&v._color.type&&v.specialColor(v.colorCommand,v._color),(zot(v._borderWidth)||v._borderWidth>0)&&(zot(v._borderColor)&&zot(v._borderWidth)||(zot(v._borderColor)&&(v._borderColor="black"),v.borderColorCommand=A.s(v._borderColor).command,v._borderColor&&v._borderColor.type&&v.specialColor(v.borderColorCommand,v._borderColor),v.borderWidthCommand=A.ss(v._borderWidth,u.caps,u.joints,u.miterLimit,u.ignoreScale).command,v._dashed&&(v.borderDashedCommand=A.sd(Array.isArray(v._dashed)?v._dashed:[10,10],v._dashedOffset).command))),A.mt(0,0),v.one={x:0,y:0},A.lt(t,0),v.two={x:t,y:0};var e=180*Math.acos((Math.pow(C,2)+Math.pow(x,2)-Math.pow(w,2))/(2*C*x))/Math.PI,n=180*Math.asin(C*Math.sin(e*Math.PI/180)/w)/Math.PI,r=[e,n,180-e-n];v.angles=[r[k[1]],r[k[2]],r[k[0]]];var i=v.angles[1],a=Math.cos(i*Math.PI/180)*o,c=Math.sin(i*Math.PI/180)*o,d=Math.max(t,t-a),h=c;v.setBounds(0,s,d,h),T.y=h,A.lt(t-a,0-c),v.three={x:t-a,y:0-c},A.cp(),l&&(v.regX=d/2,v.regY=h/2),s&&(v.shape.y+=s)},v.drawShape(),!1!==d&&e.styleTransforms(this,z),this.clone=function(r){var i=v.cloneProps(new e.Triangle(r||!e.isPick(y[0])?t:y[0],r||!e.isPick(y[1])?o:y[1],r||!e.isPick(y[2])?n:y[2],r||!e.isPick(y[3])?v.color:y[3],r||!e.isPick(y[4])?v.borderColor:y[4],r||!e.isPick(y[5])?v.borderWidth:y[5],l,s,c,u,d,this.group,g));return v.linearGradientParams&&i.linearGradient.apply(i,v.linearGradientParams),v.radialGradientParams&&i.radialGradient.apply(i,v.radialGradientParams),i}}},e.extend(e.Triangle,e.CustomShape,"clone","zimCustomShape"),e.Poly=function(t,o,n,r,i,a,l,s,c,u,d){function h(){return arguments}var g,p="radius, sides, pointSize, color, borderColor, borderWidth, dashed, strokeObj, style, group, inherit";if(g=zob(e.Poly,arguments,p,this))return g;z_d("53.1"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Poly",this.group=u;var f=!1===c?{}:e.getStyle(this.type,this.group,d);zot(t)&&(t=null!=f.radius?f.radius:50),zot(o)&&(o=null!=f.sides?f.sides:5),zot(n)&&(n=null!=f.pointSize?f.pointSize:0),zot(l)&&(l=null!=f.dashed&&f.dashed),zot(i)&&(i=null!=f.borderColor?f.borderColor:null),zot(a)&&(a=null!=f.borderWidth?f.borderWidth:null),i<0||a<0?i=a=null:null!=i&&null==a&&(a=1),zot(r)&&(r=null!=f.color?f.color:a>0?"rgba(0,0,0,0)":"black"),zot(s)&&(s=null!=f.strokeObj?f.strokeObj:{});var m=h(t,o,n,r,i,a);t=e.Pick.choose(t),o=e.Pick.choose(o),n=e.Pick.choose(n),r=e.Pick.choose(r),i=e.Pick.choose(i),a=e.Pick.choose(a);var z=this;z._radius=t,z._color=r,z._sides=o,z._pointSize=n,z._borderColor=i,z._borderWidth=a,z._dashed=l,z._dashed&&!Array.isArray(z._dashed)&&(z._dashed=[10,10]);var y=this.shape=new createjs.Shape;this.addChild(y),y.rotation=-90;var v=y.graphics;z.drawShape=function(){v.c(),z.colorCommand=v.f(z._color).command,z._color&&z._color.type&&z.specialColor(z.colorCommand,z._color),(zot(z._borderWidth)||z._borderWidth>0)&&(zot(z._borderColor)&&zot(z._borderWidth)||(zot(z._borderColor)&&(z._borderColor="black"),z.borderColorCommand=v.s(z._borderColor).command,z._borderColor&&z._borderColor.type&&z.specialColor(z.borderColorCommand,z._borderColor),z.borderWidthCommand=v.ss(z._borderWidth,s.caps,s.joints,s.miterLimit,s.ignoreScale).command,z._dashed&&(z.borderDashedCommand=v.sd(Array.isArray(z._dashed)?z._dashed:[10,10],z._dashedOffset).command))),v.dp(0,0,z._radius,z._sides,z._pointSize),z.setBounds(-z._radius,-z._radius,2*z._radius,2*z._radius)},z.drawShape(),Object.defineProperty(z,"radius",{get:function(){return z._radius},set:function(e){z._radius=e,z.drawShape()}}),Object.defineProperty(z,"sides",{get:function(){return z._sides},set:function(e){z._sides=e,z.drawShape()}}),Object.defineProperty(z,"pointSize",{get:function(){return z._pointSize},set:function(e){z._pointSize=e,z.drawShape()}}),!1!==c&&e.styleTransforms(this,f),this.clone=function(t){var o=z.cloneProps(new e.Poly(t||!e.isPick(m[0])?z.radius:m[0],t||!e.isPick(m[1])?z.sides:m[1],t||!e.isPick(m[2])?z.pointSize:m[2],t||!e.isPick(m[3])?z.color:m[3],t||!e.isPick(m[4])?z.borderColor:m[4],t||!e.isPick(m[5])?z.borderWidth:m[5],z.dashed,s,c,this.group,d));return z.linearGradientParams&&o.linearGradient.apply(o,z.linearGradientParams),z.radialGradientParams&&o.radialGradient.apply(o,z.radialGradientParams),o}},e.extend(e.Poly,e.CustomShape,"clone","zimCustomShape",!1),e.Line=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f){function m(){return arguments}function z(t,r){"triangle"==r||"arrow"==r?(C["_"+t+"Head"]=new e.Triangle(4*o,4*o,4*o,n)).rotation=90:"circle"==r&&(C["_"+t+"Head"]=new e.Circle(2.2*o,n)),zot(C["_"+t+"Head"].startAngle)&&(C["_"+t+"Head"].startAngle=C["_"+t+"Head"].rotation)}var y,v="length, thickness, color, startHead, endHead, dashed, strokeObj, lineType, lineOrientation, curveH, curveV, points, style, group, inherit";if(y=zob(e.Line,arguments,v,this))return y;z_d("53.15"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Line",this.group=p;var b=!1===g?{}:e.getStyle(this.type,this.group,f);zot(t)&&(t=null!=b.length?b.length:100),zot(a)&&(a=null!=b.dashed&&b.dashed),zot(o)&&(o=null!=b.thickness?b.thickness:3),zot(n)&&(n=null!=b.color?b.color:"black"),zot(r)&&(r=null!=b.startHead?b.startHead:null),zot(i)&&(i=null!=b.endHead?b.endHead:null),zot(l)&&(l=null!=b.strokeObj?b.strokeObj:{}),zot(s)&&(s=null!=b.lineType?b.lineType:"straight"),"corner"!==s&&"curve"!=s&&(s="straight"),zot(c)&&(c=null!=b.lineOrientation?b.lineOrientation:"auto"),"vertical"!==c&&"horizontal"!=c&&(c="auto"),zot(u)&&(u=null!=b.curveH?b.curveH:20),zot(d)&&(d=null!=b.curveV?b.curveV:20),zot(l)&&(l=null!=b.strokeObj?b.strokeObj:{});var w=m(t,n,o,r,i);t=e.Pick.choose(t),n=e.Pick.choose(n),o=e.Pick.choose(o),r=e.Pick.choose(r),i=e.Pick.choose(i),r&&r.clone&&(r=r.clone()),r&&i.clone&&(i=i.clone());var C=this;C._length=t,C._color=n,C._thickness=o,C._dashed=a,C._dashed&&!Array.isArray(C._dashed)&&(C._dashed=[10,10]),C._startX=0,C._startY=0,C._endX=t,C._endY=0,C._startHead=r,C._endHead=i,C._points=h,C._lineOrientation=c,C.angle=0,C.lineType=s,C._startHead&&z("start",C._startHead),C._endHead&&z("end",C._endHead),r=C._startHead,i=C._endHead,r&&"Triangle"==r.type&&(r.startRegY=r.regY),i&&"Triangle"==i.type&&(i.startRegY=i.regY);var x=this.shape=new createjs.Shape;this.addChild(x);var k=x.graphics;C.drawShape=function(t,o){var a,s;if(k.c(),C.colorCommand=k.s(C._color).command,n&&n.type&&C.specialColor(C.colorCommand,n),C.thicknessCommand=k.ss(C._thickness,l.caps,l.joints,l.miterLimit,l.ignoreScale).command,C._dashed&&(C.dashedCommand=k.sd(Array.isArray(C._dashed)?C._dashed:[10,10],C._dashedOffset).command),C._points){var c=C._points[0];C._startX=c[0],C._startY=c[1];var h=C._points[C._points.length-1],g=[h[h.length-2],h[h.length-1]];C._endX=g[0],C._endY=g[1],k.mt(c[0],c[1]);for(var p=1;p<C._points.length;p++){var f=C._points[p];1==p&&(a=[C._startX,C._startY,f[0],f[1]]),2==f.length?k.lt(f[0],f[1]):4==f.length?k.qt(f[0],f[1],f[2],f[3]):6==f.length&&k.bt(f[0],f[1],f[2],f[3],f[4],f[5])}if(f.length>=4)s=[f[f.length-4],f[f.length-3],C._endX,C._endY];else{var m=C._points[C._points.length-2];s=[m[m.lenth-2],m[m.lenth-1],C._endX,C._endY]}}else{var z,y=C._startX,v=C._startY,b=C._endX,w=C._endY;if("straight"==C.lineType?(r&&"Triangle"==r.type&&(r.regY=0,0!=(z=e.dist(y,v,b,w))&&(y+=C._startHead.height/2*(b-y)/z),0!=z&&(v+=C._startHead.height/2*(w-v)/z)),i&&"Triangle"==i.type&&(i.regY=0,0!=(z=e.dist(y,v,b,w))&&(b-=C._endHead.height/2*(b-y)/z),0!=z&&(w-=C._endHead.height/2*(w-v)/z))):(t?"horizontal"==C._lineOrientation||"horizontal"==C.autoOrientation?r&&"Triangle"==r.type&&(r.regY=0,y=b>y?Math.min(b,y+C._startHead.height/2):Math.max(b,y-C._startHead.height/2)):r&&"Triangle"==r.type&&(r.regY=0,v=w>v?Math.min(w,v+C._startHead.height/2):Math.max(w,v-C._startHead.height/2)):r&&"Triangle"==r.type&&(r.regY=r.startRegY),o?"horizontal"==C._lineOrientation||"horizontal"==C.autoOrientation?i&&"Triangle"==i.type&&(i.regY=0,b>y?b-=C._endHead.height/2:b+=C._endHead.height/2):i&&"Triangle"==i.type&&(i.regY=0,w>v?w-=C._endHead.height/2:w+=C._endHead.height/2):i&&"Triangle"==i.type&&(i.regY=i.startRegY)),"straight"==C.lineType)k.mt(y,v).lt(b,w),a=s=[y,v,b,w];else if("corner"==C.lineType){var x=y+.4*(b-y),T=v+.4*(w-v);"auto"==C._lineOrientation&&(C.autoOrientation=Math.abs(y-b)>Math.abs(v-w)?"horizontal":"vertical"),"horizontal"==C._lineOrientation||"horizontal"==C.autoOrientation?(a=s=[y,v,x,v],k.mt(y,v).lt(x,v).lt(x,w).lt(b,w)):(a=s=[y,v,y,T],k.mt(y,v).lt(y,T).lt(b,T).lt(b,w))}else{var A=y>b?-1:1,P=v>w?-1:1,S=y,B=v,E=Math.abs(y-b),I=Math.abs(v-w),M=Math.min(u,.5*E),O=Math.min(d,.5*I);if("auto"==C._lineOrientation&&(C.autoOrientation=Math.abs(y-b)>Math.abs(v-w)?"horizontal":"vertical"),"horizontal"==C._lineOrientation||"horizontal"==C.autoOrientation){var j=I-2*O,L=(E-2*M)/2;k.mt(S,B),L>0&&(S+=L*A,k.lt(S,B));var _=B;B+=O*P,S+=M*A,k.qt(S,_,S,B),a=s=[y,v,S,v],j>0&&(B+=j*P,k.lt(S,B)),B+=O*P;var Y=S;S+=M*A,k.qt(Y,B,S,B),L>0&&(S+=L*A,k.lt(S,B))}else j=E-2*M,L=(I-2*O)/2,k.mt(S,B),L>0&&(B+=L*P,k.lt(S,B)),Y=S,S+=M*A,B+=O*P,k.qt(Y,B,S,B),a=s=[y,v,y,B],j>0&&(S+=j*A,k.lt(S,B)),S+=M*A,_=B,B+=O*P,k.qt(S,_,S,B),L>0&&(B+=L*P,k.lt(S,B))}}if(C.setBounds(Math.min(C._startX,C._endX),Math.min(C._startY,C._endY),Math.abs(C._startX-C._endX),Math.abs(C._startY-C._endY)),C._length=Math.sqrt(Math.pow(C._startX-C._endX,2)+Math.pow(C._startY-C._endY,2)),C.angle=180*Math.atan2(C._endY-C._startY,C._endX-C._startX)/Math.PI,C._startHead&&C._startHead.loc){C._startHead.loc(C._startX,C._startY,C);var D=180*Math.atan2(a[3]-a[1],a[2]-a[0])/Math.PI;C._startHead.rotation=D-180+C._startHead.startAngle}if(C._endHead&&C._endHead.loc){C._endHead.loc(C._endX,C._endY,C);var X=180*Math.atan2(s[3]-s[1],s[2]-s[0])/Math.PI;C._endHead.rotation=X+C._endHead.startAngle}},C.drawShape(),this.setPoints=function(e,t,o,n,r,i){return Array.isArray(e)&&zot(t)?(C.points=e,C):(e&&!zot(e.x)?(C._startX=zot(e.x)?C._startX:e.x,C._startY=zot(e.y)?C._startY:e.y,t&&(C._endX=zot(t.x)?C._endX:t.x,C._endY=zot(t.y)?C._endY:t.y)):(C._startX=zot(e)?C._startX:e,C._startY=zot(t)?C._startY:t,C._endX=zot(o)?C._endX:o,C._endY=zot(n)?C._endY:n),C.drawShape(r,i),C)},this.from=function(e,t){return e&&!zot(e.x)?(C._startX=zot(e.x)?C._startX:e.x,C._startY=zot(e.y)?C._startY:e.y):(C._startX=zot(e)?C._startX:e,C._startY=zot(t)?C._startY:t),C.drawShape(),C},this.to=function(e,t){return e&&!zot(e.x)?(C._endX=zot(e.x)?C._endX:e.x,C._endY=zot(e.y)?C._endY:e.y):(C._endX=zot(e)?C._endX:e,C._endY=zot(t)?C._endY:t),C.drawShape(),C},Object.defineProperty(C,"length",{get:function(){return C._length},set:function(e){var t=0!=C.length?e/C.length:0;if(!isNaN(t)){var o=C.scaleX,n=C.scaleY;C.scaleX*=t,C.scaleY*=t;var r=C.localToGlobal(C._startX,C._startY),i=C.localToGlobal(C._endX,C._endY);C.scaleX=o,C.scaleY=n;var a=C.globalToLocal(r.x,r.y),l=C.globalToLocal(i.x,i.y);C.setPoints(a,l)}}}),Object.defineProperty(C,"startPoint",{get:function(){return new e.Point(C._startX,C._startY)},set:function(e){C._startX=zot(e.x)?C._startX:e.x,C._startY=zot(e.y)?C._startY:e.y,C.drawShape()}}),Object.defineProperty(C,"endPoint",{get:function(){return new e.Point(C._endX,C._endY)},set:function(e){C._endX=zot(e.x)?C._endX:e.x,C._endY=zot(e.y)?C._endY:e.y,C.drawShape()}}),Object.defineProperty(C,"startHead",{get:function(){return C._startHead},set:function(e){C._startHead=e,C.drawShape()}}),Object.defineProperty(C,"endHead",{get:function(){return C._endHead},set:function(e){C._endHead=e,C.drawShape()}}),Object.defineProperty(C,"startX",{get:function(){return C._startX},set:function(e){C._startX=e||0,C.drawShape()}}),Object.defineProperty(C,"startY",{get:function(){return C._startY},set:function(e){C._startY=e||0,C.drawShape()}}),Object.defineProperty(C,"endX",{get:function(){return C._endX},set:function(e){C._endX=e||0,C.drawShape()}}),Object.defineProperty(C,"endY",{get:function(){return C._endY},set:function(e){C._endY=e||0,C.drawShape()}}),Object.defineProperty(C,"points",{get:function(){return C._points},set:function(e){e&&(C._points=e,C.drawShape())}}),Object.defineProperty(C,"lineOrientation",{get:function(){return C._lineOrientation},set:function(e){e&&(C._lineOrientation=e,C.drawShape())}}),!1!==g&&e.styleTransforms(this,b),this.clone=function(t){var o=t||!e.isPick(w[3])?C._startHead:w[3];o&&o.clone&&((o=o.clone()).rotation=C._startHead.startAngle);var n=t||!e.isPick(w[4])?C._endHead:w[4];n&&n.clone&&((n=n.clone()).rotation=C._endHead.startAngle);var r=C.cloneProps(new e.Line(t||!e.isPick(w[0])?C.length:w[0],t||!e.isPick(w[2])?C.thickness:w[2],t||!e.isPick(w[1])?C.color:w[1],o,n,C.dashed,l,s,C._lineOrientation,u,d,e.copy(h),g,this.group,f));return C.points?r.setPoints(C.points):r.setPoints(C._startX,C._startY,C._endX,C._endY),C.linearGradientParams&&r.linearGradient.apply(r,C.linearGradientParams),C.radialGradientParams&&r.radialGradient.apply(r,C.radialGradientParams),r}},e.extend(e.Line,e.CustomShape,"clone","zimCustomShape",!1),e.Squiggle=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x){function k(){return arguments}function T(){function d(e){ge?(e.preventDefault(),y(e)):(ge=!0,setTimeout(function(){ge=!1},300))}function y(e){if(!U.lockControlType){var t=e.target,o=H[t.index][4]?H[t.index][4]:a;Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=U.types[(U.types.indexOf(o)+(U.shiftKey?-1:1)+U.types.length)%U.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),H[t.index][4]=o,t.rect1.color=C(o),t.rect2.color=C(o),U.drawShape();var n=new createjs.Event("change");n.controlType="bezierSwitch",U.dispatchEvent(n),t.stage.update()}}function C(t){var o={straight:e.pink,free:e.yellow,none:e.blue};return o[t]?o[t]:e.purple}function k(e){if(U.selectPoints){var t=A();if(t&&-1==t.indexOf(e))P(e);else if(t&&t.length>0)for(var o=0;o<t.length;o++)P(t[o]);else P(e)}else P(e)}function T(){if(U.onTop){var e=U.parent.numChildren-1;"Keyboard"==U.parent.getChildAt(e).type&&e--,U.parent.setChildIndex(U,e)}}function E(t){if("Circle"==t.target.type){var o=U.lastSelectedIndex=U.controls.getChildIndex(t.target.parent);if(U.controls.numChildren<=2)return;var n=U.points;U.selectPoints&&(U.lastPoints=e.copy(n)),n.splice(o,1),U.points=n,U.stage.update(),U.lastSelected=U.lastSelectedIndex=null}}Z&&Z.removeAllEventListeners(),U.num=Y="number"==typeof n?n:n.length,Y=Math.max(2,Y),i=r/Y,N=U.shape=new e.Shape({style:!1}).addTo(U);var I=U.sticks=new e.Shape({style:!1}).addTo(U);u<=0&&I.removeFrom();var M=N.graphics;M.c();var O=I.graphics;O.c();var j=u/10*8,_=u;U.selectPoints?(U.selectedBalls=new e.SelectionSet,U.selectedRect1s=new e.SelectionSet,U.selectedRect2s=new e.SelectionSet,U.selectionManager=new e.SelectionManager([U.selectedBalls,U.selectedRect1s,U.selectedRect2s],"ctrl",!1)):U.selectionManager=new e.SelectionManager(null,"ctrl");var D,J,ee,te,oe,ne,re,ie,ae=e.mobile();Z=U.controls=new e.Container({style:!1}).addTo(U),U.interactive&&Z.drag({onTop:!ae}),H=[],V=[],F=[];for(var le=0;le<Y;le++){if((ee=new e.Container({style:!1}).addTo(Z)).num=le,"number"==typeof n){var se=e.Pick.choose(i);J=new e.Container(se,o,null,null,!1).addTo(U).loc({x:le*r/(Y-1)-se/2,y:le%2*se}),ne=new e.Circle(j,U.selectPoints&&U.selectedBalls.isSelected(le)?m:e.light,e.dark,2,null,null,null,null,!1).centerReg(J).loc({x:se/2,y:0}),te=new e.Rectangle(_,_,U.selectPoints&&U.selectedRect1s.isSelected(le)?m:C(a),0==u?null:e.dark,0==u?null:2,null,null,null,!1).centerReg(J).loc({x:0,y:0}),oe=new e.Rectangle(_,_,U.selectPoints&&U.selectedRect2s.isSelected(le)?m:C(a),0==u?null:e.dark,0==u?null:2,null,null,null,!1).centerReg(J).loc({x:se,y:0});var ce=J.localToLocal(ne.x,ne.y,Z);ne.x=ce.x,ne.y=ce.y,ne.addTo(ee,null,!1);var ue=J.localToLocal(te.x,te.y,Z);te.x="none"==a?0:ue.x-ne.x,te.y="none"==a?0:ue.y-ne.y,te.addTo(ee,null,!1);var de=J.localToLocal(oe.x,oe.y,Z);oe.x="none"==a?0:de.x-ne.x,oe.y="none"==a?0:de.y-ne.y,oe.addTo(ee,null,!1),ee.x=ne.x,ee.y=ne.y,ne.x=0,ne.y=0,"none"==a&&ne.addTo(ee,null,!1)}else re=(ie=n[le])[8]?ie[8]:a,ee.loc({x:ie[0],y:ie[1]}),ne=new e.Circle(j,e.light,e.dark,2,null,null,null,null,!1).centerReg({add:!1}).addTo(ee).loc({x:ie[2],y:ie[3]}),te=new e.Rectangle(_,_,C(re),0==u?null:e.dark,0==u?null:2,null,null,null,!1).centerReg({add:!1}).addTo(ee,0).loc({x:ie[4],y:ie[5]}),oe=new e.Rectangle(_,_,C(re),0==u?null:e.dark,0==u?null:2,null,null,null,!1).centerReg({add:!1}).addTo(ee,0).loc({x:ie[6],y:ie[7]});ne.mySet=ee,ne.rect1=te,ne.rect2=oe,ne.index=le,ae?ne.on("mousedown",d):ne.on("dblclick",y),te.ball=ne,te.other=oe,oe.ball=ne,oe.other=te,0==u&&(ne.expand(10),te.expand(10),oe.expand(10)),ae&&(ne.expand(),te.expand(),oe.expand()),D=[ee,ne,te,oe,ie?ie[8]:a],H.push(D),F.push(ne),V.push(ee)}var he,ge=!1;U.drawShape=function(){M.c();var n=e.mobile()?10:6;if(o<n){M.s("rgba(0,0,0,.01)").ss(n);var r=(s=H[0][0]).localToLocal(H[0][1].x,H[0][1].y,N);M.mt(r.x,r.y);for(var i=0;i<H.length;i++){var a=i,l=(i+1)%H.length,s=H[a][0],c=H[a][1],u=H[a][2],d=H[a][3],h=H[l][0],g=H[l][1],p=H[l][2],f=(H[l][3],s.localToLocal(d.x,d.y,N)),m=h.localToLocal(p.x,p.y,N),z=h.localToLocal(g.x,g.y,N);i!=H.length-1&&M.bt(f.x,f.y,m.x,m.y,z.x,z.y)}}for(U.colorCommand||(U.colorCommand=M.s(U._color).command,t&&t.type&&U.specialColor(U.colorCommand,t)),U.thicknessCommand||(U.thicknessCommand=M.ss(U._thickness,b.caps,b.joints,b.miterLimit,b.ignoreScale).command),U._dashed&&(U.dashedCommand||(U.dashedCommand=M.sd(Array.isArray(U._dashed)?U._dashed:[10,10],U._dashedOffset).command)),r=(s=H[0][0]).localToLocal(H[0][1].x,H[0][1].y,N),M.mt(r.x,r.y),O.c().s(U.stickColor).ss(1),i=0;i<H.length;i++){a=i,l=(i+1)%H.length,s=H[a][0],c=H[a][1],u=H[a][2],d=H[a][3],h=H[l][0],g=H[l][1],p=H[l][2],H[l][3],f=s.localToLocal(d.x,d.y,N),m=h.localToLocal(p.x,p.y,N),z=h.localToLocal(g.x,g.y,N),i!=H.length-1&&M.bt(f.x,f.y,m.x,m.y,z.x,z.y),r=s.localToLocal(c.x,c.y,N);var y=s.localToLocal(u.x,u.y,N);0==i&&(u.visible=0),0!=i&&O.mt(r.x,r.y).lt(y.x,y.y),i!=H.length-1&&O.mt(r.x,r.y).lt(f.x,f.y),i==H.length-1&&(d.visible=0)}U._dashed&&M.append(U.dashedCommand),M.append(U.thicknessCommand),M.append(U.colorCommand)},U.drawShape(),Z.on("mousedown",function(e){if(W=e.target.stage,!U.lockControls){if(U.selectPoints&&(U.keyFocus=!0),he={x:e.target.x,y:e.target.y},e.target.rect1)(o=e.target).startX=o.x,o.startY=o.y,o.rect1.startX=o.rect1.x,o.rect1.startY=o.rect1.y,o.rect2.startX=o.rect2.x,o.rect2.startY=o.rect2.y;else{var t=e.target;t.startX=t.x,t.startY=t.y;var o,n=(o=t.ball).index,r=a;if(zot(H[n][4])||(r=H[n][4]),"straight"==r){var i=t.other,l=i.x-o.x,s=i.y-o.y;i.stickLength=Math.sqrt(Math.pow(l,2)+Math.pow(s,2))}}if(U.selectPoints){var c=U.selectionManager.currentSet;if(c&&c.selections&&c.selections.length>0)for(var u=0;u<c.selections.length;u++){var d=U.pointObjects[c.selections[u]];d[1].startX=d[1].x,d[1].startY=d[1].y,d[2].startX=d[2].x,d[2].startY=d[2].y,d[3].startX=d[3].x,d[3].startY=d[3].y}}}}),U.selectPoints&&Z.tap(function(t){if(t.target.rect1){var o=t.target;U.selectedBalls.toggle(o.parent.num)}else{var n=t.target;n.color="white",(o=n.ball).rect1==n?U.selectedRect1s.toggle(o.parent.num):U.selectedRect2s.toggle(o.parent.num)}for(var r=0;r<U.pointObjects.length;r++){var i=U.pointObjects[r];i[1].color=U.selectedBalls.isSelected(r)?e.white:e.light,i[2].color=U.selectedRect1s.isSelected(r)?e.white:C(i[4]),i[3].color=U.selectedRect2s.isSelected(r)?e.white:C(i[4])}W.update()}),Z.on("pressmove",function(e){if(!U.lockControls)if(U.selectPoints){var t=A();if(-1==t.indexOf(e.target))K(e.target),U.drawShape();else if(t.length>0){for(var o=e.target.x-e.target.startX,n=e.target.y-e.target.startY,r=0;r<t.length;r++){var i=t[r];i.x=i.startX+o,i.y=i.startY+n,K(i)}U.drawShape()}}else K(e.target),U.drawShape()}),Z.on("pressup",function(e){if(!U.lockControls){var t=e.target.x!=he.x||e.target.y!=he.y,o=new createjs.Event("change");e.target.rect1?(o.controlType="bezierPoint",k(e.target)):o.controlType="bezierHandle",t&&U.dispatchEvent(o)}}),U.changeControl=function(e,t,o,n,r,i,a,l,s){var c,u="index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update";if(c=zob(U.changeControl,arguments,u))return c;if(zot(e))for(var d=0;d<H.length;d++)U.changeControl(d,t,o,n,r,i,a,l);else{var h=H[e];h[4]=t,"none"==t?(zot(a)||(h[2].x=a),zot(l)||(h[2].y=l),h[2].x=h[1].x,h[2].y=h[1].y,h[3].x=h[1].x,h[3].y=h[1].y,h[1].parent.addChild(h[1])):(zot(o)||(h[2].x=o),zot(n)||(h[2].y=n),zot(r)||(h[3].x=r),zot(i)||(h[3].y=i),zot(a)||(h[1].x=a),zot(l)||(h[1].y=l),h[1].parent.addChildAt(h[1],0)),s&&(U.update(),W&&W.update())}},U.transformPoints=function(t,o,n,r){return U.points=e.transformPoints(U.points,t,o,n,r),U},U.traverse=function(t,o,n,r){var i=e.copy(U.segmentRatios);i.unshift(0),zot(n)&&(n=o+1);var a=o<n;if(a)var l=100*i[o],s=100*i[n];else l=50+(100-100*i[o])/2,s=50+(100-100*i[n])/2;return t.percentComplete=t.zimStartPercent=l,t.animate({ease:"linear",props:{path:U},rewind:!a,time:r,events:!0}),t.on("animation",function(e){if(t.percentComplete>s||0==t.percentComplete){t.stopAnimate(),e.remove();var o=new createjs.Event("traversed");o.obj=t,U.dispatchEvent(o)}}),U},U.update=function(e){return e?U.points=U.pointsAdjusted:U.drawShape(),U.zimAnimateChanged=!0,U},U.interactive&&(h&&N.drag({onTop:!1}),G=N.on("mousedown",function(e){W=e.target.stage,he={x:N.x,y:N.y},U.selectPoints&&(U.keyFocus=!0),T()}),q=N.on("pressmove",function(){Z.x=N.x,Z.y=N.y,I.x=N.x,I.y=N.y}),Q=N.on("pressup",function(){var e=N.x!=he.x||N.y!=he.y,t=N.localToLocal(U.regX,U.regY,U.parent);if(U.x=t.x,U.y=t.y,Z.x=Z.y=I.x=I.y=N.x=N.y=0,e){var o=new createjs.Event("change");o.controlType="move",U.dispatchEvent(o)}W&&W.update()}),U.move||B(!0)),U.toggleEvent=U.on("mousedown",function(){U.allowToggle&&(X||(U.showControls(),U.dispatchEvent("controlsshow")))}),U.added(function(){W=U.stage,U.toggleStageEvent&&W.off("stagemousedown",U.toggleStageEvent),U.toggleStageEvent=W.on("stagemousedown",function(t){
U.allowToggle&&U.stage&&X&&!U.hitTestPoint(t.stageX/e.scaX,t.stageY/e.scaY,!1)&&(U.hideControls(),U.dispatchEvent("controlshide"))})}),U.clickEvent=U.on("click",function(){U.ctrlKey&&setTimeout(function(){U.clone(!0).addTo(U.stage).mov(0,100),U.allowToggle&&(U.hideControls(),U.dispatchEvent("controlshide"));var e=new createjs.Event("change");e.controlType="move",U.dispatchEvent(e),U.stage.update()},50)}),U.hideControls=function(){return U.toggled=!1,Z.visible=!1,I.visible=!1,X=!1,U.stage&&U.stage.update(),!U.allowToggle&&U.move&&B(),U},s||U.hideControls(),U.showControls=function(){return U.toggled=!0,Z.visible=!0,I.visible=!0,X=!0,Z.x=N.x,Z.y=N.y,I.x=N.x,I.y=N.y,U.addChildAt(N,0),U.move&&!U.allowToggle&&S(),U.stage&&U.stage.update(),U},U.toggle=function(e){return!0===e?U.showControls():!1===e?U.hideControls():X?U.hideControls():U.showControls(),U},U.recordData=function(e){zot(e)&&(e=!1);var t={type:"Blob",index:U.parent?U.parent.getChildIndex(U):-1,x:U.x,y:U.y,points:U.recordPoints(),color:U.color,thickness:U.thickness,move:U.move,toggle:U.allowToggle,controlsVisible:X};return e?JSON.stringify(t):t},U.setData=function(e,t){if(!zot(e)){if(t)try{e=JSON.parse(e)}catch(i){return}var o=e.index;zot(o)&&(o=-1),delete e.index;var n=e.points;for(var r in zot(n)||U.setPoints(n),delete e.points,U.num=n.length,e)U[r]=e[r];return U.parent&&U.parent.setChildIndex(U,o),U.update(),U}},U.recordPoints=function(t){zot(t)&&(t=!1);var o=U.points;if(t){if(!U.pane){var n=U.pane=new e.Pane({container:U.stage,width:Math.min(500,U.stage.width-20),height:Math.min(500,U.stage.height-20),draggable:!0});(U.textArea=new e.TextArea(Math.min(400,U.stage.width-70),Math.min(400,U.stage.height-70))).centerReg(n)}U.textArea.text=JSON.stringify(o),U.pane.show()}return o},U.setPoints=function(e){for(var t,o,n=0;n<e.length;n++)t=H[n],o=e[n],zot(t)||(t[0].x=o[0],t[0].y=o[1],t[1].x=o[2],t[1].y=o[3],t[2].x=o[4],t[2].y=o[5],t[3].x=o[6],t[3].y=o[7],t[4]=o[8]);return U.update(),U},!1!==w&&e.styleTransforms(U,L),U.clone=function(t,o){var n=U.cloneProps(new e.Squiggle(o?U.colorCommand:t||!e.isPick(R[0])?U.color:R[0],U.thickness,U.recordPoints(),r,i,a,l,Z.visible,c,u,U.allowToggle,U.move,g,p,f,m,z,U.editPoints,v,b,w,U.group,x));return U.linearGradientParams&&n.linearGradient.apply(n,U.linearGradientParams),U.radialGradientParams&&n.radialGradient.apply(n,U.radialGradientParams),n},U.shape.on("mousedown",function(t){W=t.target.stage,U.editPoints&&(U.controlsVisible?(U.pressX=t.stageX/e.scaX,U.pressY=t.stageY/e.scaX):(U.pressX=null,U.pressY=null))}),U.addPointFactor=10,U.addMinDistance=15,U.shape.on("pressup",function(t){if(U.editPoints&&U.pressX&&Math.abs(U.pressX-t.stageX/e.scaX)<$&&Math.abs(U.pressY-t.stageY/e.scaY)<$){U.selectPoints&&(U.lastPoints=e.copy(U.points));var o=U.points,n=U.globalToLocal(t.stageX/e.scaX,t.stageY/e.scaY),r=e.closestPointAlongCurve(n,U.segmentPoints);if("anywhere"==U.editPoints)o.splice(r+1,0,[n.x,n.y,0,0,0,0,0,0]),U.points=o,U.changeControl({index:r+1,type:"mirror",update:!0});else{var i,a=U.pointsAdjusted,l=U.getSegmentPoint(a[r],a[(r+1)%a.length]),s=e.distanceAlongCurve(l),c=Math.round(s/U.addPointFactor),u=U.interpolate(c,r,!1,o),d=1e4;if(e.loop(u,function(t,o){var r=e.dist(t,n);r<d&&(d=r,i=o)}),d<U.addMinDistance){var h=U.segmentRatios,g=h[r],p=r>0?h[r-1]:0;U.addPoint(100*(p+i/(c+1)*(g-p)))}}U.lastSelectedIndex=r+1,U.lastSelected=U.controls.getChildAt(U.lastSelectedIndex),U.stage.update()}}),U.controls.on("click",function(e){U.lastSelected=e.target.parent,U.lastSelectedIndex=U.controls.getChildIndex(e.target.parent),U.editPoints&&U.selectionManager.shiftKey&&E(e)}),U.controls.hold(E),X||U.hideControls(),U.dispatchEvent("update")}function A(){var e=[],t=U.selectionManager.currentSet;if(t&&t.selections&&t.selections.length>0)for(var o=0;o<t.selections.length;o++){var n=U.pointObjects[t.selections[o]];if(t==U.selectedBalls)e.push(n[1]);else if(t==U.selectedRect1s)e.push(n[2]);else{if(t!=U.selectedRect2s)continue;e.push(n[3])}}return e}function P(e){if("Circle"==e.type){var t=e,o=t.mySet,n=t.rect1,r=t.rect2;n.x-=t.x,n.y-=t.y,r.x-=t.x,r.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0}}function S(){"always"!=U.move&&(J||(J=!0,N.drag({onTop:!1}),G=N.on("mousedown",G),q=N.on("pressmove",q),Q=N.on("pressup",Q)))}function B(e){"always"!=U.move&&(e||J)&&(J=!1,N.noDrag(),N.off("mousedown",G),N.off("pressmove",q),N.off("pressup",Q))}function E(){if(U.selectPoints){U.keyFocus=!0;var e=document.activeElement;e&&e.blur()}}function I(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function M(t,o,n,r,i,a,l,s){var c=t.length-1,u=0,d=0;100==r&&"Squiggle"==U.type&&(r=99.99),r=(r+1e5)%100,e.loop(n,function(e,t){if(r/100<e)return c=t,d=e,!0;u=e});var h=U.segmentPoints[c],g=d>0?(r/100-u)/(d-u):0,p=e.pointAlongCurve(h,g,null,s),f=[p.x,p.y,0,0];if(!a)if(l)U.interpolatedPoints.push({x:p.x,y:p.y,r:r/100});else{if("none"!=i){var m=I(h[0],h[1],g),z=I(h[1],h[2],g),y=I(h[2],h[3],g),v=I(m,z,g),b=I(z,y,g);f[4]=v.x-p.x,f[5]=v.y-p.y,f[6]=b.x-p.x,f[7]=b.y-p.y;var w=U.localToLocal(m.x,m.y,o[c]);t[c][6]=w.x,t[c][7]=w.y;var C=U.localToLocal(y.x,y.y,o[(c+1)%t.length]);t[(c+1)%t.length][4]=C.x,t[(c+1)%t.length][5]=C.y}i&&(f[8]=i),t.splice(c+1,0,f)}}var O,j="color, thickness, points, length, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, stickColor, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit";if(O=zob(e.Squiggle,arguments,j,this))return O;z_d("53.2"),this.group=C;var L=!1===w?{}:e.getStyle("Squiggle",this.group,x);if(zot(o)&&(o=null!=L.thickness?L.thickness:6),zot(r)&&(r=null!=L.length?L.length:300),zot(n)&&(n=null!=L.points?L.points:5),"string"==typeof n){var _=new e.SVGContainer;n=_.processPath(n)}var Y="number"==typeof n?n:n.length;if(0!=Y){zot(i)&&(i=null!=L.controlLength?L.controlLength:r/Y),this.zimCustomShape_constructor(r,i,null,null,!1),this.type="Squiggle",this.mouseChildren=!0,zot(g)&&(g=null!=L.dashed&&L.dashed),zot(t)&&(t=null!=L.color?L.color:e.blue),t.style&&(this.colorCommand=t,t="black"),zot(a)&&(a=null!=L.controlType?L.controlType:null);var D=a;zot(a)&&(a="mirror"),zot(l)&&(l=null!=L.lockControlType&&L.lockControlType),zot(v)&&(v=null==L.interactive||L.interactive),zot(s)&&(s=null!=L.showControls?L.showControls:v);var X=s;zot(c)&&(c=null!=L.lockControls?L.lockControls:!v),zot(u)&&(u=null!=L.handleSize?L.handleSize:e.mobile()?20:10),zot(d)&&(d=null!=L.allowToggle?L.allowToggle:v),zot(h)&&(h=null!=L.move?L.move:v),zot(f)&&(f=null!=L.stickColor?L.stickColor:"#111"),zot(m)&&(m=null!=L.selectColor?L.selectColor:"#fff"),zot(z)&&(z=null!=L.selectPoints?L.selectPoints:v),this.stickColor=f,zot(p)&&(p=null==L.onTop||L.onTop),zot(y)&&(y=null!=L.editPoints?L.editPoints:v),zot(b)&&(b=null!=L.strokeObj?L.strokeObj:{});var R=k(t);t=e.Pick.choose(t);var W,H,F,V,N,G,q,Q,U=this;this.types=["mirror","straight","free","none"],this.interactive=v,this.num=Y,this.onTop=p,this.move=h,this.editPoints=y,this.allowToggle=d,this.lockControlType=l,this.selectPoints=z,this.lockControls=c,U._color=t,U._thickness=o,U._dashed=g,U._dashed&&!Array.isArray(U._dashed)&&(U._dashed=[10,10]);var K,Z,J=U.move,$=2;D&&"number"!=typeof n&&e.loop(n,function(e){e[8]=D,"none"==D&&(e[4]=e[5]=e[6]=e[7]=0)}),T(),U.selectionManager.on("keydown",function(e){if(U.selectPoints&&U.keyFocus&&e.keyCode>=37&&e.keyCode<=40){var t=A();if(t.length>0){for(var o=0;o<t.length;o++){var n=t[o];37==e.keyCode?n.x-=U.selectionManager.shiftKey?10:1:39==e.keyCode?n.x+=U.selectionManager.shiftKey?10:1:38==e.keyCode?n.y-=U.selectionManager.shiftKey?10:1:40==e.keyCode&&(n.y+=U.selectionManager.shiftKey?10:1),K(n)}U.drawShape(),U.dispatchEvent("update"),U.stage&&U.stage.update()}}}),U.selectionManager.on("keyup",function(e){if(U.selectPoints&&U.keyFocus&&e.keyCode>=37&&e.keyCode<=40){var t=A();if(t.length>0)for(var o=0;o<t.length;o++)P(t[o])}}),U.selectionManager.on("undo",function(){if(U.selectPoints&&U.keyFocus&&U.lastPoints){var t=e.copy(U.lastPoints);U.lastPoints=e.copy(U.points),U.points=t,U.stage&&U.stage.update()}}),K=function(e){if(!U.lockControls)if(e.rect1){var t=(n=e).x-n.startX,o=n.y-n.startY;n.rect1.x=n.rect1.startX+t,n.rect1.y=n.rect1.startY+o,n.rect2.x=n.rect2.startX+t,n.rect2.y=n.rect2.startY+o}else{var n,r=e,i=r.other,l=(n=r.ball).index,s=a;if(zot(H[l][4])||(s=H[l][4]),"straight"==s||"mirror"==s){var c=r.x-n.x,u=r.y-n.y;if("mirror"==s)i.x=n.x-c,i.y=n.y-u;else{var d=Math.atan2(u,c),h=-i.stickLength*Math.cos(d+Math.PI),g=-i.stickLength*Math.sin(d+Math.PI);i.x=n.x-h,i.y=n.y-g}}}},Object.defineProperty(U,"move",{get:function(){return h},set:function(e){h!=e&&(h=e,e?S():B())}}),Object.defineProperty(U,"interactive",{get:function(){return v},set:function(e){X=v=e,U.allowToggle=v,U.editPoints=v,U.lockControls=!v,U.selectPoints=v,U.move=v,U.points=U.points}}),Object.defineProperty(U,"allowToggle",{get:function(){return d},set:function(e){d!=e&&((d=e)?U.move&&S():!X&&U.move&&B())}});var ee=c;Object.defineProperty(U,"lockControls",{get:function(){return ee},set:function(e){ee=e,e?(U.controls.mouseChildren=!1,U.controls.mouseEnabled=!1):(U.controls.mouseChildren=!0,U.controls.mouseEnabled=!0)}}),U.lockControls=ee,Object.defineProperty(U,"controlsVisible",{get:function(){return X},set:function(e){X=e,e?U.showControls():U.hideControls()}}),typeof KEYFOCUS!=typeof undefined&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==U},set:function(){e.KEYFOCUS=U}}),e.KEYFOCUS||E(),Object.defineProperty(U,"points",{get:function(){for(var t,o,n=[],r=0;r<H.length;r++)o=H[r],t=[e.decimals(o[0].x),e.decimals(o[0].y),e.decimals(o[1].x),e.decimals(o[1].y),e.decimals(o[2].x),e.decimals(o[2].y),e.decimals(o[3].x),e.decimals(o[3].y)],o[4]&&"mirror"!==o[4]&&t.push(o[4]),n.push(t);return n},set:function(e){var t=U.x,o=U.y,r=U.visible;U.dispose(!0),n=e,T(),U.lockControls=ee,U.x=t,U.y=o,U.visible=r}}),Object.defineProperty(U,"pointsAdjusted",{get:function(){var t,o,n,r=[],i=U.pointObjects;return e.loop(i.length,function(a){if(n=i[a],o=H[a],0==n[0].rotation&&0==n[0].scaleX&&0==n[0].scaleY)t=[e.decimals(o[0].x),e.decimals(o[0].y),e.decimals(o[1].x),e.decimals(o[1].y),e.decimals(o[2].x),e.decimals(o[2].y),e.decimals(o[3].x),e.decimals(o[3].y)];else{var l=n[0].localToLocal(n[2].x,n[2].y,n[0].parent),s=n[0].localToLocal(n[3].x,n[3].y,n[0].parent);t=[e.decimals(o[0].x),e.decimals(o[0].y),e.decimals(o[1].x),e.decimals(o[1].y),e.decimals(l.x-o[0].x),e.decimals(l.y-o[0].y),e.decimals(s.x-o[0].x),e.decimals(s.y-o[0].y)]}o[4]&&"mirror"!==o[4]&&t.push(o[4]),r.push(t)}),r},set:function(){zon&&zogy("Squiggle() - pointsAdjusted is read only")}}),Object.defineProperty(U,"pointObjects",{get:function(){return H},set:function(){zon&&zog("Squiggle() - pointObjects is read only - but its contents can be manipulated - use squiggle.update() after changes")}}),Object.defineProperty(U,"pointControls",{get:function(){return V},set:function(){zon&&zog("Squiggle() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(U,"pointCircles",{get:function(){return F},set:function(){zon&&zog("Squiggle() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(U,"segmentPoints",{get:function(){var t=[],o=U.pointsAdjusted;return e.loop(o.length-1,function(e){var n=U.getSegmentPoint(o[e],o[e+1]);t.push(n)}),t},set:function(){zon&&zog("Squiggle() - segmentPoints is read only")}}),Object.defineProperty(U,"segmentRatios",{get:function(){var t=[],o=0;e.loop(U.segmentPoints,function(n){var r=e.distanceAlongCurve(n);t.push(r),o+=r});var n=[],r=0;return e.loop(t,function(e){r+=e/o,n.push(r)}),n},set:function(){zon&&zog("Squiggle() - segmentRatios is read only")}}),U.approximateBounds=function(t,o,n){zot(t)&&(t=80),zot(n)&&(n=0),t/=U.num;var r=U.interpolate(t,null,!0,null,!0),i=e.boundsAroundPoints(r);if(U.setBounds(i.x-n,i.y-n,i.width+2*n,i.height+2*n),o){if(!U.parent)return zon&&zogy("approximateBounds() - add to stage to first to see points"),U;U.hitPathPoints?U.hitPathPoints.removeAllChildren():U.hitPathPoints=(new e.Container).addTo(),U.hitPathPoints.top();for(var a=0;a<r.length;a++){var l=r[a];l=U.localToGlobal(l.x,l.y),new e.Circle(3).loc(l.x,l.y,U.hitPathPoints)}}return U},U.getPointAngle=function(t){var o=U.pointObjects[t][0],n=U.pointObjects[t][2],r=U.pointObjects[t][3];if(o==U.stage)var i=new e.Point(n.x,n.y),a=new e.Point(r.x,r.y);else i=o.localToGlobal(n.x,n.y),a=o.localToGlobal(r.x,r.y);return e.angle(i.x,i.y,a.x,a.y)},U.getSegmentPoint=function(e,t){if(!zot(e)&&!zot(t)){0==e[2]&&0==e[3]||(e[4]-=e[2],e[5]-=e[3],e[6]-=e[2],e[7]-=e[3],e[0]+=e[2],e[1]+=e[3],e[2]=0,e[3]=0),0==t[2]&&0==t[3]||(t[4]-=t[2],t[5]-=t[3],t[6]-=t[2],t[7]-=t[3],t[0]+=t[2],t[1]+=t[3],t[2]=0,t[3]=0);var o={x:e[0],y:e[1]},n={x:e[0]+e[6],y:e[1]+e[7]},r={x:t[0]+t[4],y:t[1]+t[5]},i={x:t[0],y:t[1]};return 0==Z.x&&0==Z.y||(o.x+=Z.x,n.x+=Z.x,r.x+=Z.x,i.x+=Z.x,o.y+=Z.y,n.y+=Z.y,r.y+=Z.y,i.y+=Z.y),[o,n,r,i]}},U.getAdjacentSegmentData=function(e){zot(e)&&(e=0);var t=U.pointsAdjusted;return 2==U.num?[[U.getSegmentPoint(t[0],t[1])],[0]]:0==e?[[U.getSegmentPoint(t[0],t[1]),U.getSegmentPoint(t[1],t[2])],[0,1]]:e>=U.num-2?[[U.getSegmentPoint(t[U.num-3],t[U.num-2]),U.getSegmentPoint(t[U.num-2],t[U.num-1])],[U.num-3,U.num-2]]:[[U.getSegmentPoint(t[e-1],t[e]),U.getSegmentPoint(t[e],t[e+1]),U.getSegmentPoint(t[e+1],t[e+2])],[e-1,e,e+1]]},U.getCurvePoint=function(t,o,n,r,i){(zot(t)||isNaN(t))&&(t=0),zot(o)&&(o=U.segmentRatios),zot(n)&&(n=U.segmentPoints),zot(r)&&(r=!1),zot(i)&&(i=!1);var a=o,l=n,s=e.loop(a,function(e,o){if(e>=t)return o}),c=s>0?a[s-1]:0,u=s>0?a[s]-a[s-1]:a[s];if(!u)return undefined;var d=(t-c)/u,h=e.pointAlongCurve(l[s],d,r,!0),g=U.localToGlobal(h.x,h.y);return g.angle=h.angle,g.z=s,zot(g)?undefined:g},this.addPoint=function(e,t){zot(e)&&(e=100);var o=U.points,n=U.segmentRatios;return M(o,U.pointControls,n,e,t=t||D),U.points=o,U.num=o.length,U},this.addPoints=function(t,o,n,r,i,a,l){zot(a)&&(a=e.copy(U.points));var s=e.copy(U.segmentRatios),c=0;if(i&&(U.interpolatedPoints=[]),r)var u=s.length*t;return e.loop(s,function(s,d){i&&M(a,U.pointControls,U.segmentRatios,100*c,o,!zot(n)&&d!=n,i,l);var h=r?Math.round(u*(s-c)):t,g=1/(h+1);e.loop(h,function(e){var r=c+(s-c)*g*(e+1);M(a,U.pointControls,U.segmentRatios,100*r,o,!zot(n)&&d!=n,i,l),!i&&t>0&&(U.points=a)}),c=s}),i&&"Squiggle"==U.type&&M(a,U.pointControls,U.segmentRatios,100,o,!1,i,l),U.stage&&U.stage.update(),U.num=a.length,U},this.interpolate=function(e,t,o,n,r){return zot(e)&&(e=1),U.addPoints(e,"none",t,o,!0,n,r),U.interpolatedPoints},this.dispose=function(t,o,n){if(U.shape){if(e.gD(U),W&&U.toggleStageEvent&&W.off("stagemousedown",U.toggleStageEvent),U.controls.noDrag(),U.controls.removeAllEventListeners(),U.selectPoints&&U.selectionManager&&U.selectionManager.dispose(),U.selectedBalls=null,U.selectedRect1s=null,U.selectedRect2s=null,U.selectionManager=null,U.off("mousedown",U.toggleEvent),U.off("click",U.clickEvent),t){U.shape.dispose(),U.shape=null;for(var r=0;r<U.points.length;r++)U.pointObjects[r][0].removeAllEventListeners(),U.pointObjects[r][1].removeAllEventListeners(),U.pointObjects[r][2].removeAllEventListeners(),U.pointObjects[r][3].removeAllEventListeners();U.controls.removeFrom(U),U.sticks.dispose(),H=null,F=null}else U.removeAllEventListeners(),H=null,F=null,n||this.zimCustomShape_dispose(!0);return!0}}}},e.extend(e.Squiggle,e.CustomShape,["clone","dispose"],"zimCustomShape",!1),e.Blob=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k){function T(){return arguments}function A(t){var o;if("circle"!=t&&"rectangle"!=t&&"triangle"!=t||("circle"==t&&(t=new e.Circle(i)),"rectangle"==t&&(t=new e.Rectangle(2*i,2*i).centerReg({add:!1})),"triangle"==t&&(t=new e.Triangle(2*i,2*i,2*i))),"Circle"==t.type||"Rectangle"==t.type||"Triangle"==t.type){var n=t.getBounds();return"Circle"==t.type?(o=4,X=a=2*i*.5523):"Rectangle"==t.type?(t.centerReg({add:!1}),o=[[n.x-n.width/2,n.y-n.height/2],[n.x+n.width/2,n.y-n.height/2],[n.x+n.width/2,n.y+n.height/2],[n.x-n.width/2,n.y+n.height/2]],Z.setBounds(n.x-n.width/2,n.y-n.height/2,n.width,n.height),Z.regX=t.regX-n.width/2,Z.regY=t.regY-n.height/2):"Triangle"==t.type&&(o=[[t.three.x-t.width/2,t.three.y+t.height/2+t.adjusted],[t.two.x-t.width/2,t.two.y+t.height/2+t.adjusted],[t.one.x-t.width/2,t.one.y+t.height/2+t.adjusted]],Z.setBounds(n.x-n.width/2,n.y-n.height/2,n.width,n.height)),o}return t}function P(){function o(e){he?(e.preventDefault(),n(e)):(he=!0,setTimeout(function(){he=!1},300))}function n(e){if(!Z.lockControlType){var t=e.target,o=F[t.index][4]?F[t.index][4]:l;Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=Z.types[(Z.types.indexOf(o)+(Z.shiftKey?-1:1)+Z.types.length)%Z.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),F[t.index][4]=o,t.rect1.color=c(o),t.rect2.color=c(o),Z.drawShape();var n=new createjs.Event("change");n.controlType="bezierSwitch",Z.dispatchEvent(n),t.stage.update()}}function c(t){var o={mirror:e.purple,free:e.yellow,none:e.blue};return o[t]?o[t]:e.pink}function h(e){if(Z.selectPoints){var t=S();if(t&&-1==t.indexOf(e))B(e);else if(t&&t.length>0)for(var o=0;o<t.length;o++)B(t[o]);else B(e)}else B(e)}function v(){if(Z.onTop){var e=Z.parent.numChildren-1;"Keyboard"==Z.parent.getChildAt(e).type&&e--,Z.parent.setChildIndex(Z,e)}}function x(t){if("Circle"==t.target.type){var o=Z.lastSelectedIndex=Z.controls.getChildIndex(t.target.parent);if(Z.controls.numChildren<=2)return;var n=Z.points;Z.selectPoints&&(Z.lastPoints=e.copy(n)),n.splice(o,1),Z.points=n,Z.stage.update(),Z.lastSelected=Z.lastSelectedIndex=null}}if($&&$.removeAllEventListeners(),Z.selectPoints?(Z.selectedBalls=new e.SelectionSet,Z.selectedRect1s=new e.SelectionSet,Z.selectedRect2s=new e.SelectionSet,Z.selectionManager=new e.SelectionManager([Z.selectedBalls,Z.selectedRect1s,Z.selectedRect2s],"ctrl",!1)):Z.selectionManager=new e.SelectionManager(null,"ctrl"),!((D="number"==typeof r?r:r.length)<=0)){zot(X)&&(a=4*i/D),G=Z.shape=new e.Shape({style:!1}).addTo(Z);var T=Z.sticks=new e.Shape({style:!1}).addTo(Z);d<=0&&T.removeFrom();var A=G.graphics;A.c();var P=T.graphics;P.c();var M,O,j,L,_,R,ee,oe,ne=d/10*8,re=d,ie=e.mobile();$=Z.controls=new e.Container({style:!1}).addTo(Z),Z.interactive&&$.drag({onTop:!ie}),F=[],N=[],V=[];for(var ae=0;ae<D;ae++){if((j=new e.Container({style:!1}).addTo($)).num=ae,"number"==typeof r){var le=e.Pick.choose(a);(O=new e.Container(le,i,null,null,!1).reg(le/2,i).addTo(Z)).rotation=ae/D*360,R=new e.Circle(ne,Z.selectPoints&&Z.selectedBalls.isSelected(ae)?z:e.light,e.dark,2,null,null,null,null,!1).centerReg(O).loc({x:le/2,y:0}),L=new e.Rectangle(re,re,Z.selectPoints&&Z.selectedRect1s.isSelected(ae)?z:c(l),0==d?null:e.dark,0==d?null:2,null,null,null,!1).centerReg(O).loc({x:0,y:0}),_=new e.Rectangle(re,re,Z.selectPoints&&Z.selectedRect2s.isSelected(ae)?z:c(l),0==d?null:e.dark,0==d?null:2,null,null,null,!1).centerReg(O).loc({x:le,y:0});var se=O.localToLocal(R.x,R.y,$);R.x=se.x,R.y=se.y,R.addTo(j,null,!1);var ce=O.localToLocal(L.x,L.y,$);L.x="none"==l?0:ce.x-R.x,L.y="none"==l?0:ce.y-R.y,L.addTo(j,null,!1);var ue=O.localToLocal(_.x,_.y,$);_.x="none"==l?0:ue.x-R.x,_.y="none"==l?0:ue.y-R.y,_.addTo(j,null,!1),j.x=R.x,j.y=R.y,R.x=0,R.y=0,"none"==l&&R.addTo(j,null,!1)}else ee=(oe=r[ae])[8]?oe[8]:l,j.loc({x:oe[0],y:oe[1]}),R=new e.Circle(ne,e.light,e.dark,2,null,null,null,null,!1).centerReg({add:!1}).addTo(j).loc({x:oe[2],y:oe[3]}),L=new e.Rectangle(re,re,c(ee),0==d?null:e.dark,0==d?null:2,null,null,null,!1).centerReg({add:!1}).addTo(j,0).loc({x:oe[4],y:oe[5]}),_=new e.Rectangle(re,re,c(ee),0==d?null:e.dark,0==d?null:2,null,null,null,!1).centerReg({add:!1}).addTo(j,0).loc({x:oe[6],y:oe[7]});R.mySet=j,R.rect1=L,R.rect2=_,R.index=ae,0==d&&(R.expand(10),L.expand(10),_.expand(10)),ie?R.on("mousedown",o):R.on("dblclick",n),L.ball=R,L.other=_,_.ball=R,_.other=L,ie&&(R.expand(),L.expand(),_.expand()),M=[j,R,L,_,oe?oe[8]:l],F.push(M),V.push(R),N.push(j)}var de,he=!1;Z.drawShape=function(){A.c(),Z.colorCommand||(Z.colorCommand=A.f(Z._color).command,t&&t.type&&Z.specialColor(Z.colorCommand,t)),(zot(Z._borderWidth)||Z._borderWidth>0)&&(zot(Z._borderColor)&&zot(Z._borderWidth)||(zot(Z._borderColor)&&(Z._borderColor="black"),Z.borderColorCommand||(Z.borderColorCommand=A.s(Z._borderColor).command,Z._borderColor&&Z._borderColor.type&&Z.specialColor(Z.borderColorCommand,Z._borderColor)),Z.borderWidthCommand||(Z.borderWidthCommand=A.ss(Z._borderWidth,w.caps,w.joints,w.miterLimit,w.ignoreScale).command),Z._dashed&&(Z.borderDashedCommand||(Z.borderDashedCommand=A.sd(Array.isArray(Z._dashed)?Z._dashed:[10,10],Z._dashedOffset).command))));var e=(i=F[0][0]).localToLocal(F[0][1].x,F[0][1].y,G);A.mt(e.x,e.y),P.c().s(Z.stickColor).ss(1);for(var o=0;o<F.length;o++){var n=o,r=(o+1)%F.length,i=F[n][0],a=F[n][1],l=F[n][2],s=F[n][3],c=F[r][0],u=F[r][1],d=F[r][2],h=(F[r][3],i.localToLocal(s.x,s.y,G)),g=c.localToLocal(d.x,d.y,G),p=c.localToLocal(u.x,u.y,G);A.bt(h.x,h.y,g.x,g.y,p.x,p.y),e=i.localToLocal(a.x,a.y,G);var f=i.localToLocal(l.x,l.y,G);P.mt(e.x,e.y).lt(f.x,f.y),P.mt(e.x,e.y).lt(h.x,h.y)}A.cp(),A.append(Z.colorCommand),Z._dashed&&A.append(Z.borderDashedCommand),Z.borderWidthCommand&&A.append(Z.borderWidthCommand),Z.borderColorCommand&&A.append(Z.borderColorCommand)},Z.drawShape(),$.on("mousedown",function(e){if(!Z.lockControls){if(Z.selectPoints&&(Z.keyFocus=!0),de={x:e.target.x,y:e.target.y},e.target.rect1)(o=e.target).startX=o.x,o.startY=o.y,o.rect1.startX=o.rect1.x,o.rect1.startY=o.rect1.y,o.rect2.startX=o.rect2.x,o.rect2.startY=o.rect2.y;else{var t=e.target;t.startX=t.x,t.startY=t.y;var o,n=(o=t.ball).index,r=l;if(zot(F[n][4])||(r=F[n][4]),"straight"==r){var i=t.other,a=i.x-o.x,s=i.y-o.y;i.stickLength=Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}}if(Z.selectPoints){var c=Z.selectionManager.currentSet;if(c&&c.selections&&c.selections.length>0)for(var u=0;u<c.selections.length;u++){var d=Z.pointObjects[c.selections[u]];d[1].startX=d[1].x,d[1].startY=d[1].y,d[2].startX=d[2].x,d[2].startY=d[2].y,d[3].startX=d[3].x,d[3].startY=d[3].y}}}}),Z.selectPoints&&$.tap(function(t){if(t.target.rect1){var o=t.target;Z.selectedBalls.toggle(o.parent.num)}else{var n=t.target;n.color="white",(o=n.ball).rect1==n?Z.selectedRect1s.toggle(o.parent.num):Z.selectedRect2s.toggle(o.parent.num)}for(var r=0;r<Z.pointObjects.length;r++){var i=Z.pointObjects[r];i[1].color=Z.selectedBalls.isSelected(r)?e.white:e.light,i[2].color=Z.selectedRect1s.isSelected(r)?e.white:c(i[4]),i[3].color=Z.selectedRect2s.isSelected(r)?e.white:c(i[4])}t.target.stage.update()}),$.on("pressmove",function(e){if(!Z.lockControls)if(Z.selectPoints){var t=S();if(-1==t.indexOf(e.target))J(e.target),Z.drawShape();else if(t.length>0){for(var o=e.target.x-e.target.startX,n=e.target.y-e.target.startY,r=0;r<t.length;r++){var i=t[r];i.x=i.startX+o,i.y=i.startY+n,J(i)}Z.drawShape()}}else J(e.target),Z.drawShape()}),$.on("pressup",function(e){if(!Z.lockControls){var t=e.target.x!=de.x||e.target.y!=de.y,o=new createjs.Event("change");e.target.rect1?(o.controlType="bezierPoint",h(e.target)):o.controlType="bezierHandle",t&&Z.dispatchEvent(o)}}),Z.changeControl=function(e,t,o,n,r,i,a,l,s){var u,d="index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update";if(u=zob(Z.changeControl,arguments,d))return u;if(zot(e)){for(var h=0;h<F.length;h++)Z.changeControl(h,t,o,n,r,i,a,l);return Z}var g=F[e];return g[4]=t,"none"==t?(zot(a)||(g[1].x=a),zot(l)||(g[1].y=l),g[2].x=g[1].x,g[2].y=g[1].y,g[3].x=g[1].x,g[3].y=g[1].y,g[1].parent.addChild(g[1])):(zot(a)||(g[1].x=a),zot(l)||(g[1].y=l),zot(o)||(g[2].x=o),zot(n)||(g[2].y=n),zot(r)||(g[3].x=r),zot(i)||(g[3].y=i),g[1].parent.addChildAt(g[1],0)),g[2].color=c(t),g[3].color=c(t),s&&(Z.update(),Z.stage&&Z.stage.update()),Z},Z.transformPoints=function(t,o,n,r){return Z.points=e.transformPoints(Z.points,t,o,n,r),Z},Z.traverse=function(t,o,n,r){var i=e.copy(Z.segmentRatios);i.unshift(0),zot(n)&&(n=o+1);var a=o<n;if(a)var l=100*i[o],s=100*i[n];else l=50+(100-100*i[o])/2,s=50+(100-100*i[n])/2;return t.percentComplete=l,t.animate({ease:"linear",props:{path:Z},rewind:!a,time:r,events:!0}),t.on("animation",function(e){if(t.percentComplete>s||0==t.percentComplete){t.stopAnimate(),e.remove();var o=new createjs.Event("traversed");o.obj=t,Z.dispatchEvent(o)}}),Z},Z.update=function(e){return e?Z.points=Z.pointsAdjusted:Z.drawShape(),Z.zimAnimateChanged=!0,Z},Z.move&&Z.interactive&&G.drag({onTop:!1}),q=G.on("mousedown",function(e){K=e.target.stage,de={x:G.x,y:G.y},Z.selectPoints&&(Z.keyFocus=!0),v()}),Q=G.on("pressmove",function(){$.x=G.x,$.y=G.y,T.x=G.x,T.y=G.y}),U=G.on("pressup",function(){var e=G.x!=de.x||G.y!=de.y,t=G.localToLocal(Z.regX,Z.regY,Z.parent);if(Z.x=t.x,Z.y=t.y,$.x=$.y=T.x=T.y=G.x=G.y=0,e){var o=new createjs.Event("change");o.controlType="move",Z.dispatchEvent(o)}K.update()}),g||I(!0),Z.toggleEvent=Z.on("mousedown",function(){Z.allowToggle&&(W||(Z.showControls(),Z.dispatchEvent("controlsshow")))}),Z.added(function(){K=Z.stage,Z.toggleStageEvent&&Z.stage.off("stagemousedown",Z.toggleStageEvent),Z.toggleStageEvent=Z.stage.on("stagemousedown",function(t){Z.allowToggle&&Z.stage&&W&&!Z.hitTestPoint(t.stageX/e.scaX,t.stageY/e.scaY,!1)&&(Z.hideControls(),Z.dispatchEvent("controlshide"))})}),Z.clickEvent=Z.on("click",function(){Z.ctrlKey&&setTimeout(function(){Z.clone(!0).addTo(Z.stage).mov(100),Z.allowToggle&&(Z.hideControls(),Z.dispatchEvent("controlshide"));var e=new createjs.Event("change");e.controlType="move",Z.dispatchEvent(e),Z.stage.update()},50)}),Z.hideControls=function(){return Z.toggled=!1,$.visible=!1,T.visible=!1,W=!1,Z.stage&&Z.stage.update(),!Z.allowToggle&&Z.move&&I(),Z},W||Z.hideControls(),Z.showControls=function(){return Z.toggled=!0,$.visible=!0,T.visible=!0,W=!0,$.x=G.x,$.y=G.y,T.x=G.x,T.y=G.y,Z.addChildAt(G,0),Z.move&&!Z.allowToggle&&E(),Z.stage&&Z.stage.update(),Z},Z.toggle=function(e){return!0===e?Z.showControls():!1===e?Z.hideControls():W?Z.hideControls():Z.showControls(),Z},Z.recordData=function(e){zot(e)&&(e=!1);var t={type:"Blob",index:Z.parent?Z.parent.getChildIndex(Z):-1,x:Z.x,y:Z.y,points:Z.recordPoints(),color:Z.color,borderColor:Z.borderColor,borderWidth:Z.borderWidth,move:Z.move,toggle:Z.allowToggle,controlsVisible:W};return e?JSON.stringify(t):t},Z.setData=function(e,t){if(!zot(e)){if(t)try{e=JSON.parse(e)}catch(i){return}var o=e.index;zot(o)&&(o=-1),delete e.index;var n=e.points;for(var r in zot(n)||Z.setPoints(n),delete e.points,this.num=n.length,e)Z[r]=e[r];return Z.parent&&Z.parent.setChildIndex(Z,o),Z}},Z.recordPoints=function(t){zot(t)&&(t=!1);var o=Z.points;if(t){if(!n){var n=Z.pane=new e.Pane({displayClose:!1,container:Z.stage,width:Math.min(500,Z.stage.width-20),height:Math.min(500,Z.stage.height-20),draggable:!0}),r=Z.textArea=new e.TextArea(Math.min(400,Z.stage.width-70),Math.min(400,Z.stage.height-70));r.centerReg(n)}r.text=JSON.stringify(o),n.show()}return o},Z.setPoints=function(e){for(var t,o,n=0;n<e.length;n++)t=F[n],o=e[n],zot(t)||(t[0].x=o[0],t[0].y=o[1],t[1].x=o[2],t[1].y=o[3],t[2].x=o[4],t[2].y=o[5],t[3].x=o[6],t[3].y=o[7],t[4]=o[8],t[2].color=c(t[4]),t[3].color=c(t[4]));return Z.update(),Z},!1!==C&&e.styleTransforms(Z,Y),Z.clone=function(t,o){var n=Z.cloneProps(new e.Blob(o?Z.colorCommand:t||!e.isPick(H[0])?Z.color:H[0],o?Z.borderColorCommand:t||!e.isPick(H[1])?Z.borderColor:H[1],Z.borderWidth,Z.recordPoints(),i,a,l,s,$.visible,u,d,Z.allowToggle,Z.move,p,f,m,z,y,Z.editPoints,b,w,C,Z.group,k));return Z.linearGradientParams&&n.linearGradient.apply(n,Z.linearGradientParams),Z.radialGradientParams&&n.radialGradient.apply(n,Z.radialGradientParams),n},Z.shapeMousedownEvent=Z.shape.on("mousedown",function(t){K=t.target.stage,Z.editPoints&&(Z.controlsVisible?(Z.pressX=t.stageX/e.scaX,Z.pressY=t.stageY/e.scaY):(Z.pressX=null,Z.pressY=null))}),Z.addPointFactor=10,Z.addMinDistance=15,Z.shapePressupEvent=Z.shape.on("pressup",function(t){if(Z.editPoints&&Z.pressX&&Math.abs(Z.pressX-t.stageX/e.scaX)<te&&Math.abs(Z.pressY-t.stageY/e.scaY)<te){Z.selectPoints&&(Z.lastPoints=e.copy(Z.points));var o=Z.points,n=Z.globalToLocal(t.stageX/e.scaX,t.stageY/e.scaY),r=e.closestPointAlongCurve(n,Z.segmentPoints);if("anywhere"==Z.editPoints)o.splice(r+1,0,[n.x,n.y,0,0,0,0,0,0]),Z.points=o,Z.changeControl({index:r+1,type:"mirror",update:!0});else{var i,a=Z.pointsAdjusted,l=Z.getSegmentPoint(a[r],a[(r+1)%a.length]),s=e.distanceAlongCurve(l),c=Math.round(s/Z.addPointFactor),u=Z.interpolate(c,r,!1,o),d=1e4;if(e.loop(u,function(t,o){if(0!=o){var r=e.dist(t,n);r<d&&(d=r,i=o)}}),d<Z.addMinDistance){var h=Z.segmentRatios,g=h[r],p=r>0?h[r-1]:0;Z.addPoint(100*(p+i/(c+1)*(g-p)))}}Z.lastSelectedIndex=r+1,Z.lastSelected=Z.controls.getChildAt(Z.lastSelectedIndex),Z.stage.update()}}),Z.controlsClickEvent=Z.controls.on("click",function(e){Z.lastSelected=e.target.parent,Z.lastSelectedIndex=Z.controls.getChildIndex(e.target.parent),Z.editPoints&&Z.selectionManager.shiftKey&&x(e)}),Z.controls.hold(x),W||Z.hideControls(),Z.dispatchEvent("update")}}function S(){var e=[],t=Z.selectionManager.currentSet;if(t&&t.selections&&t.selections.length>0)for(var o=0;o<t.selections.length;o++){var n=Z.pointObjects[t.selections[o]];if(t==Z.selectedBalls)e.push(n[1]);else if(t==Z.selectedRect1s)e.push(n[2]);else{if(t!=Z.selectedRect2s)continue;e.push(n[3])}}return e}function B(e){if(Z.selectPoints&&"Circle"==e.type){var t=e,o=t.mySet,n=t.rect1,r=t.rect2;n.x-=t.x,n.y-=t.y,r.x-=t.x,r.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0}}function E(){"always"!=Z.move&&(ee||(ee=!0,G.drag({onTop:!1}),q=G.on("mousedown",q),Q=G.on("pressmove",Q),U=G.on("pressup",U)))}function I(e){"always"!=Z.move&&(e||ee)&&(ee=!1,G.noDrag(),G.off("mousedown",q),G.off("pressmove",Q),G.off("pressup",U))}function M(){Z.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function O(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function j(t,o,n,r,i,a,l,s){var c=t.length-1,u=0,d=0;100==r&&"Squiggle"==Z.type&&(r=99.99),r=(r+1e5)%100,e.loop(n,function(e,t){if(r/100<e)return c=t,d=e,!0;u=e});var h=Z.segmentPoints[c],g=d>0?(r/100-u)/(d-u):0,p=e.pointAlongCurve(h,g,null,s),f=[p.x,p.y,0,0];if(!a)if(l)Z.interpolatedPoints.push({x:p.x,y:p.y,r:r/100});else{if("none"!=i){var m=O(h[0],h[1],g),z=O(h[1],h[2],g),y=O(h[2],h[3],g),v=O(m,z,g),b=O(z,y,g);f[4]=v.x-p.x,f[5]=v.y-p.y,f[6]=b.x-p.x,f[7]=b.y-p.y;var w=Z.localToLocal(m.x,m.y,o[c]);t[c][6]=w.x,t[c][7]=w.y;var C=Z.localToLocal(y.x,y.y,o[(c+1)%t.length]);t[(c+1)%t.length][4]=C.x,t[(c+1)%t.length][5]=C.y}i&&(f[8]=i),t.splice(c+1,0,f)}}var L,_="color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, stickColor, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit";if(L=zob(e.Blob,arguments,_,this))return L;z_d("53.5"),this.group=x;var Y=!1===C?{}:e.getStyle("Blob",this.group,k);zot(i)&&(i=null!=Y.radius?Y.radius:100),this.zimCustomShape_constructor(-i,-i,2*i,2*i,!1),this.type="Blob",this.mouseChildren=!0,zot(p)&&(p=null!=Y.dashed&&Y.dashed),zot(o)&&(o=null!=Y.borderColor?Y.borderColor:null),zot(n)&&(n=null!=Y.borderWidth?Y.borderWidth:null),o<0||n<0?o=n=null:null!=o&&null==n&&(n=1),zot(t)&&(t=null!=Y.color?Y.color:n>0?"rgba(0,0,0,0)":e.green),t.style&&(this.colorCommand=t,t="black"),o&&o.style&&(this.borderColorCommand=o,o="black"),zot(r)&&(r=null!=Y.points?Y.points:4);var D="number"==typeof r?r:r.length,X=a;zot(a)&&(a=null!=Y.controlLength?Y.controlLength:4*i/D),zot(l)&&(l=null!=Y.controlType?Y.controlType:null);var R=l;zot(l)&&(l="straight"),zot(s)&&(s=null!=Y.lockControlType&&Y.lockControlType),zot(b)&&(b=null==Y.interactive||Y.interactive),zot(c)&&(c=null!=Y.showControls?Y.showControls:b);var W=c;zot(u)&&(u=null!=Y.lockControls?Y.lockControls:!b),zot(d)&&(d=null!=Y.handleSize?Y.handleSize:e.mobile()?20:10),zot(h)&&(h=null!=Y.allowToggle?Y.allowToggle:b),zot(g)&&(g=null!=Y.move?Y.move:b),zot(m)&&(m=null!=Y.stickColor?Y.stickColor:"#111"),zot(z)&&(z=null!=Y.selectColor?Y.selectColor:"#fff"),zot(y)&&(y=null!=Y.selectPoints?Y.selectPoints:b),this.stickColor=m,zot(f)&&(f=null==Y.onTop||Y.onTop),zot(v)&&(v=null!=Y.editPoints?Y.editPoints:b),zot(w)&&(w=null!=Y.strokeObj?Y.strokeObj:{});var H=T(t,o);t=e.Pick.choose(t),o=e.Pick.choose(o);var F,V,N,G,q,Q,U,K,Z=this;this.interactive=b,this.num=D,this.editPoints=v,this.selectPoints=y,this.lockControls=u,this.onTop=f,this.move=g,this.allowToggle=h,this.lockControlType=s,this.types=["mirror","straight","free","none"],Z._color=t,Z._borderColor=o,Z._borderWidth=n,Z._dashed=p,
Z._dashed&&!Array.isArray(Z._dashed)&&(Z._dashed=[10,10]);var J,$,ee=Z.move,te=2;if("string"==typeof(r=A(r))){var oe=new e.SVGContainer;r=oe.processPath(r)}R&&"number"!=typeof r&&e.loop(r,function(e){e[8]=R,"none"==R&&(e[4]=e[5]=e[6]=e[7]=0)}),P(),Z.selectionManager.on("keydown",function(e){if(Z.selectPoints&&Z.keyFocus&&e.keyCode>=37&&e.keyCode<=40){var t=S();if(t.length>0){for(var o=0;o<t.length;o++){var n=t[o];37==e.keyCode?n.x-=Z.selectionManager.shiftKey?10:1:39==e.keyCode?n.x+=Z.selectionManager.shiftKey?10:1:38==e.keyCode?n.y-=Z.selectionManager.shiftKey?10:1:40==e.keyCode&&(n.y+=Z.selectionManager.shiftKey?10:1),J(n)}Z.drawShape(),Z.dispatchEvent("update"),Z.stage&&Z.stage.update()}}}),Z.selectionManager.on("keyup",function(e){if(Z.selectPoints&&Z.keyFocus&&e.keyCode>=37&&e.keyCode<=40){var t=S();if(t.length>0)for(var o=0;o<t.length;o++)B(t[o])}}),Z.selectionManager.on("undo",function(){if(Z.selectPoints&&Z.keyFocus&&Z.lastPoints){var t=e.copy(Z.lastPoints);Z.lastPoints=e.copy(Z.points),Z.points=t,Z.stage&&Z.stage.update()}}),J=function(e){if(!Z.lockControls)if(e.rect1){var t=(n=e).x-n.startX,o=n.y-n.startY;n.rect1.x=n.rect1.startX+t,n.rect1.y=n.rect1.startY+o,n.rect2.x=n.rect2.startX+t,n.rect2.y=n.rect2.startY+o}else{var n,r=e,i=r.other,a=(n=r.ball).index,s=l;if(zot(F[a][4])||(s=F[a][4]),"straight"==s||"mirror"==s){var c=r.x-n.x,u=r.y-n.y;if("mirror"==s)i.x=n.x-c,i.y=n.y-u;else{var d=Math.atan2(u,c),h=-i.stickLength*Math.cos(d+Math.PI),g=-i.stickLength*Math.sin(d+Math.PI);i.x=n.x-h,i.y=n.y-g}}}},Object.defineProperty(Z,"move",{get:function(){return g},set:function(e){g!=e&&(g=e,e?E():I())}}),Object.defineProperty(Z,"interactive",{get:function(){return b},set:function(e){W=b=e,Z.allowToggle=b,Z.editPoints=b,Z.lockControls=!b,Z.selectPoints=b,Z.move=b,Z.points=Z.points}}),Object.defineProperty(Z,"allowToggle",{get:function(){return h},set:function(e){h!=e&&((h=e)?Z.move&&E():!W&&Z.move&&I())}}),Object.defineProperty(Z,"controlsVisible",{get:function(){return W},set:function(e){W=e,e?Z.showControls():Z.hideControls()}});var ne=u;Object.defineProperty(Z,"lockControls",{get:function(){return ne},set:function(e){ne=e,e?(Z.controls.mouseChildren=!1,Z.controls.mouseEnabled=!1):(Z.controls.mouseChildren=!0,Z.controls.mouseEnabled=!0)}}),Z.lockControls=ne,typeof KEYFOCUS!=typeof undefined&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==Z},set:function(){e.KEYFOCUS=Z}}),Z.selectPoints&&!e.KEYFOCUS&&M(),Object.defineProperty(Z,"points",{get:function(){for(var t,o,n=[],r=0;r<F.length;r++)o=F[r],t=[e.decimals(o[0].x),e.decimals(o[0].y),e.decimals(o[1].x),e.decimals(o[1].y),e.decimals(o[2].x),e.decimals(o[2].y),e.decimals(o[3].x),e.decimals(o[3].y)],o[4]&&"straight"!==o[4]&&t.push(o[4]),n.push(t);return n},set:function(e){var t=Z.x,o=Z.y,n=Z.visible;Z.dispose(!0),r=A(e),Z.shape&&(Z.shape.graphics.clear(),Z.sticks.graphics.clear(),Z.controls.noDrag(),Z.removeAllChildren(),delete Z.shape,delete Z.sticks,delete Z.controls),Z.visible=!1,P(),Z.lockControls=ne,Z.x=t,Z.y=o,Z.visible=n}}),Object.defineProperty(Z,"pointsAdjusted",{get:function(){var t,o,n,r=[],i=Z.pointObjects;return e.loop(i.length,function(a){if(n=i[a],o=F[a],0==n[0].rotation&&0==n[0].scaleX&&0==n[0].scaleY)t=[e.decimals(o[0].x),e.decimals(o[0].y),e.decimals(o[1].x),e.decimals(o[1].y),e.decimals(o[2].x),e.decimals(o[2].y),e.decimals(o[3].x),e.decimals(o[3].y)];else{var l=n[0].localToLocal(n[2].x,n[2].y,n[0].parent),s=n[0].localToLocal(n[3].x,n[3].y,n[0].parent);t=[e.decimals(o[0].x),e.decimals(o[0].y),e.decimals(o[1].x),e.decimals(o[1].y),e.decimals(l.x-o[0].x),e.decimals(l.y-o[0].y),e.decimals(s.x-o[0].x),e.decimals(s.y-o[0].y)]}o[4]&&"mirror"!==o[4]&&t.push(o[4]),r.push(t)}),r},set:function(){zon&&zogy("Blob() - pointsAdjusted is read only")}}),Object.defineProperty(Z,"pointObjects",{get:function(){return F},set:function(){zon&&zog("Blob() - pointObjects is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(Z,"pointControls",{get:function(){return N},set:function(){zon&&zog("Blob() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(Z,"pointCircles",{get:function(){return V},set:function(){zon&&zog("Blob() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(Z,"segmentPoints",{get:function(){var t=Z.pointsAdjusted,o=[];return e.loop(t.length,function(e,n){var r=Z.getSegmentPoint(t[e],t[e<n-1?e+1:0]);o.push(r)}),o},set:function(){zon&&zog("Blob() - segmentPoints is read only")}}),Object.defineProperty(Z,"segmentRatios",{get:function(){var t=[],o=0;e.loop(Z.segmentPoints,function(n){var r=e.distanceAlongCurve(n);t.push(r),o+=r});var n=[],r=0;return e.loop(t,function(e){r+=e/o,n.push(r)}),n},set:function(){zon&&zog("Blob() - segmentRatios is read only")}}),Z.approximateBounds=function(t,o){zot(t)&&(t=80),t/=Z.num;var n=Z.interpolate(t,null,!0,null,!0),r=e.boundsAroundPoints(n);if(Z.setBounds(r.x,r.y,r.width,r.height),o){if(!Z.parent)return zon&&zogy("approximateBounds() - add to stage to first to see points"),Z;Z.hitPathPoints?Z.hitPathPoints.removeAllChildren():Z.hitPathPoints=(new e.Container).addTo(),Z.hitPathPoints.top();for(var i=0;i<n.length;i++){var a=n[i];a=Z.localToGlobal(a.x,a.y),new e.Circle(3).loc(a.x,a.y,Z.hitPathPoints)}}return Z},Z.getPointAngle=function(t){var o=Z.pointObjects[t][0],n=Z.pointObjects[t][2],r=Z.pointObjects[t][3];if(o==Z.stage)var i=new e.Point(n.x,n.y),a=new e.Point(r.x,r.y);else i=o.localToGlobal(n.x,n.y),a=o.localToGlobal(r.x,r.y);return e.angle(i.x,i.y,a.x,a.y)},Z.getSegmentPoint=function(e,t){if(!zot(e)&&!zot(t)){0==e[2]&&0==e[3]||(e[4]-=e[2],e[5]-=e[3],e[6]-=e[2],e[7]-=e[3],e[0]+=e[2],e[1]+=e[3],e[2]=0,e[3]=0),0==t[2]&&0==t[3]||(t[4]-=t[2],t[5]-=t[3],t[6]-=t[2],t[7]-=t[3],t[0]+=t[2],t[1]+=t[3],t[2]=0,t[3]=0);var o={x:e[0],y:e[1]},n={x:e[0]+e[6],y:e[1]+e[7]},r={x:t[0]+t[4],y:t[1]+t[5]},i={x:t[0],y:t[1]};return 0==$.x&&0==$.y||(o.x+=$.x,n.x+=$.x,r.x+=$.x,i.x+=$.x,o.y+=$.y,n.y+=$.y,r.y+=$.y,i.y+=$.y),[o,n,r,i]}},Z.getAdjacentSegmentData=function(e){zot(e)&&(e=0);var t=Z.pointsAdjusted;if(2==Z.num)return[[Z.getSegmentPoint(t[0],t[1]),Z.getSegmentPoint(t[1],t[0])],[0,1]];if(0==e)return[[Z.getSegmentPoint(t[Z.num-1],t[0]),Z.getSegmentPoint(t[0],t[1]),Z.getSegmentPoint(t[1],t[2])],[Z.num-1,0,1]];if(e>=Z.num-1)return[[Z.getSegmentPoint(t[Z.num-2],t[Z.num-1]),Z.getSegmentPoint(t[Z.num-1],t[0]),Z.getSegmentPoint(t[0],t[1])],[Z.num-2,Z.num-1,0]];var o=e+2>=Z.num?0:e+2;return[[Z.getSegmentPoint(t[e-1],t[e]),Z.getSegmentPoint(t[e],t[e+1]),Z.getSegmentPoint(t[e+1],t[o])],[e-1,e,e+1]]},Z.getCurvePoint=function(t,o,n,r){zot(o)&&(o=Z.segmentRatios),zot(n)&&(n=Z.segmentPoints),zot(r)&&(r=!1);var i=o,a=n,l=e.loop(i,function(e,o){if(e>=t)return o}),s=l>0?i[l-1]:0,c=l>0?i[l]-i[l-1]:i[l],u=(t-s)/c,d=e.pointAlongCurve(a[l],u,r,!0);if(zot(d))return undefined;var h=Z.localToGlobal(d.x,d.y);return h.angle=d.angle,h.z=l,zot(h)?undefined:h},this.addPoint=function(e,t){zot(e)&&(e=100);var o=Z.points,n=Z.segmentRatios;return j(o,Z.pointControls,n,e,t=t||R),Z.points=o,Z.num=o.length,Z},this.addPoints=function(t,o,n,r,i,a,l){zot(a)&&(a=e.copy(Z.points));var s=e.copy(Z.segmentRatios),c=0;if(i&&(Z.interpolatedPoints=[]),r)var u=s.length*t;return e.loop(s,function(s,d){i&&j(a,Z.pointControls,Z.segmentRatios,100*c,o,!zot(n)&&d!=n,i,l);var h=r?Math.round(u*(s-c)):t,g=1/(h+1);e.loop(h,function(e){var r=c+(s-c)*g*(e+1);j(a,Z.pointControls,Z.segmentRatios,100*r,o,!zot(n)&&d!=n,i,l),!i&&t>0&&(Z.points=a)}),c=s}),i&&"Squiggle"==Z.type&&j(a,Z.pointControls,Z.segmentRatios,100,o,null,i,l),Z.stage&&Z.stage.update(),Z.num=a.length,Z},this.interpolate=function(e,t,o,n,r){return zot(e)&&(e=1),Z.addPoints(e,"none",t,o,!0,n,r),Z.interpolatedPoints},this.dispose=function(t,o,n){if(Z.shape){if(e.gD(Z),K&&Z.toggleStageEvent&&K.off("stagemousedown",Z.toggleStageEvent),Z.controls.noDrag(),Z.controls.removeAllEventListeners(),Z.selectPoints&&Z.selectionManager&&Z.selectionManager.dispose(),Z.selectedBalls=null,Z.selectedRect1s=null,Z.selectedRect2s=null,Z.selectionManager=null,Z.off("mousedown",Z.toggleEvent),Z.off("click",Z.clickEvent),t){Z.shape.dispose(),Z.shape=null;for(var r=0;r<Z.points.length;r++)Z.pointObjects[r][0].removeAllEventListeners(),Z.pointObjects[r][1].removeAllEventListeners(),Z.pointObjects[r][2].removeAllEventListeners(),Z.pointObjects[r][3].removeAllEventListeners();Z.controls.removeFrom(Z),Z.sticks.dispose(),F=null,V=null}else Z.removeAllEventListeners(),F=null,V=null,n||this.zimCustomShape_dispose(!0);return!0}}},e.extend(e.Blob,e.CustomShape,["clone","dispose"],"zimCustomShape",!1),e.Flare=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O){function j(i,s,d,h,g,p,f,m){function z(o){var n=s[o],r=i[o],a=d[o],l=h[o],c=g[o];if(f)var u=f[o];zot(n)&&(n=F,D.angles[o]=n),zot(r)&&(r=200,D.lengths[o]=r),zot(a)&&(a=0,D.anglesA[o]=a),zot(l)&&(l=0,D.anglesB[o]=l),zot(c)&&(c=0,D.anglesEnd[o]=c),f&&zot(u)&&(u=t,D.crossColors[o]=u);var p=180-(c+=90),m=Math.cos((F-n)*e.RAD),z=Math.sin((F-n)*e.RAD),v=new e.Point(0,0),b=new e.Point(r,0);if(zot(j))var w=new e.Point(Math.cos(X*e.RAD)*W,Math.sin(X*e.RAD)*W);else w=new e.Point(j.x*m-j.y*z,j.x*z+j.y*m);var C=y(r,w.x,w.y,a,p),x=new e.Point(r-C.x,-C.y);if(zot(L))var k=new e.Point(Math.cos(R*e.RAD)*W,Math.sin(R*e.RAD)*H);else k=new e.Point(L.x*m-L.y*z,L.x*z+L.y*m);var T=y(r,k.x,k.y,l,c),A=new e.Point(r-T.x,T.y);return j=new e.Point(x.x-r,x.y),L=new e.Point(A.x-r,A.y),F=n,{a:n,A:w,B:x,C:A,D:k,E:b,F:v,tA:C.t,tB:T.t}}function y(t,o,n,r,i){var a=i-90,l=180-r-(90-a),s=Math.tan(a*e.RAD)*n,c=(t-o-s)/Math.sin(l*e.RAD)*Math.sin(r*e.RAD)+Math.sqrt(Math.pow(n,2)+Math.pow(s,2));return{x:c*Math.sin(a*e.RAD),y:c*Math.cos(a*e.RAD),t:c}}D.removeAllChildren();var I=D.shape=(new e.Shape).addTo(D);if(D.colorCommand=I.c().f(t).command,t&&t.type&&D.specialColor(D.colorCommand,t),(zot(n)||n>0)&&(zot(o)&&zot(n)||(zot(o)&&(o="black"),D.borderColorCommand=I.s(o).command,o&&o.type&&D.specialColor(D.borderColorCommand,o),D.borderWidthCommand=I.ss(n,b.caps,b.joints,b.miterLimit,b.ignoreScale).command,v&&(D.borderDashedCommand=I.sd([10,10],5).command))),I.mt(0,0),C>0){var M=D.spineShape=(new e.Shape).addTo(D);D.spineColorCommand=M.c().f(w).command,w&&w.type&&D.specialColor(D.spineColorCommand,w),(zot(C)||C>0)&&(zot(x)&&zot(C)||(zot(x)&&(x="black"),D.spineBorderColorCommand=M.s(x).command,x&&x.type&&D.specialColor(D.spineBorderColorCommand,x),D.spineBorderWidthCommand=M.ss(C,T.caps,T.joints,T.miterLimit,T.ignoreScale).command,k&&(D.spineBorderDashedCommand=M.sd([10,10],5).command)))}if(!zot(A)){var O=D.closeShape=(new e.Shape).addTo(D);D.closeColorCommand=O.c().f(A).command,A&&A.type&&D.specialColor(D.closeColorCommand,A),(zot(P)||P>0)&&(zot(S)&&zot(P)||(zot(S)&&(S="black"),D.closeBorderColorCommand=O.s(S).command,closeBorder&&closeBorder.type&&D.specialColor(D.closeBorderCommand,S),D.closeBorderWidthCommand=O.ss(P,E.caps,E.joints,E.miterLimit,E.ignoreScale).command,B&&(D.closeBorderDashedCommand=O.sd([10,10],5).command))),I.mt(0,0)}var j,L,_=c,Y=u,X=r,R=X-180,W=a,H=l,F=s[0],V=Math.max(i.length,s.length,d.length,h.length,g.length),N=(F=R,[]),G=[],q=[],Q=(D.points=[],D.pinPoints=[]);e.loop(V,function(t){var o=z(t),n=Math.cos(o.a*e.RAD),r=Math.sin(o.a*e.RAD),i=new e.Point(_+o.A.x*n-o.A.y*r,Y+o.A.x*r+o.A.y*n),a=new e.Point(_+o.B.x*n-o.B.y*r,Y+o.B.x*r+o.B.y*n),l=new e.Point(_+o.C.x*n-o.C.y*r,Y+o.C.x*r+o.C.y*n),s=new e.Point(_+o.D.x*n-o.D.y*r,Y+o.D.x*r+o.D.y*n);N.push(i,a),G.unshift(l,s),q.push([i,a,l,s]);var c=new e.Point(_+o.F.x*n-o.F.y*r,Y+o.F.x*r+o.F.y*n),u=new e.Point(_+o.E.x*n-o.E.y*r,Y+o.E.x*r+o.E.y*n);0==t&&D.pinPoints.push(c),D.pinPoints.push(u),_=u.x,Y=u.y,W=o.tA,H=o.tB}),D.points=N.concat(G),p?(e.loop(q,function(e,t){I.mt(e[0].x,e[0].y),zot(f)||zot(f[t])||I.f(f[t]).mt(e[0].x,e[0].y),I.lt(e[1].x,e[1].y).lt(e[2].x,e[2].y).lt(e[3].x,e[3].y).cp()}),m&&I.mt(q[q.length-1][1].x,q[q.length-1][1].y).lt(q[q.length-1][2].x,q[q.length-1][2].y).lt(q[0][3].x,q[0][3].y).lt(q[0][0].x,q[0][0].y).cp()):(e.loop(N,function(e,t){0==t?I.mt(e.x,e.y):I.lt(e.x,e.y)}),m&&(I.lt(N[0].x,N[0].y),I.cp()),e.loop(G,function(e,t){0==t&&m?I.mt(e.x,e.y):I.lt(e.x,e.y)}),m&&I.lt(G[0].x,G[0].y),I.cp()),M&&(e.loop(Q,function(e,t){0==t?M.mt(e.x,e.y):M.lt(e.x,e.y)}),m&&M.lt(Q[0].x,Q[0].y).cp()),zot(A)||(e.loop(G,function(e,t){0==t?O.mt(e.x,e.y):O.lt(e.x,e.y)}),m&&O.lt(G[0].x,G[0].y).cp())}var L,_="color, borderColor, borderWidth, crossAngle, thickness, thicknessA, thicknessB, pin, startX, startY, lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close, dashed, strokeObj, spineColor, spineBorderWidth, spineBorderColor, spineDashed, spineStrokeObj, closeColor, closeBorderWidth, closeBorderColor, closeDashed, closeStrokeObj, style, group, inherit";if(L=zob(e.Flare,arguments,_,this))return L;z_d("53.6"),this.zimContainer_constructor(),this.type="Flare",this.group=M;var Y=!1===I?{}:e.getStyle(this.type,this.group,O),D=this;zot(o)&&(o=null!=Y.borderColor?Y.borderColor:null),zot(n)&&(n=null!=Y.borderWidth?Y.borderWidth:null),o<0||n<0?o=n=null:null!=o&&null==n&&(n=1),zot(t)&&(t=null!=Y.color?Y.color:n>0?"rgba(0,0,0,0)":"black"),(zot(n)||n>0)&&(zot(o)&&zot(n)||zot(o)&&(o="black")),zot(r)&&(r=null!=Y.crossAngle?Y.crossAngle:0);var X,R,W=r;r-=90,zot(i)&&(i=null!=Y.thickness?Y.thickness:null),zot(a)&&(a=null!=Y.thicknessA?Y.thicknessA:null),zot(l)&&(l=null!=Y.thicknessB?Y.thicknessB:null),zot(i)?zot(l)&&!zot(a)?l=a:zot(a)&&!zot(l)?a=l:l=a=10:zot(l)&&!zot(a)?l=i-a:zot(a)&&!zot(l)?a=i-l:l=a=i/2,D.thickness=a+l,zot(m)&&(m=null==Y.cross||Y.cross),zot(z)&&(z=null!=Y.crossColors?Y.crossColors:null),zot(z)||Array.isArray(z)||(z=[z]),zot(y)&&(y=null!=Y.close&&Y.close),zot(c)&&(c=null!=Y.startX?Y.startX:0),zot(u)&&(u=null!=Y.startY?Y.startY:0),zot(d)&&(d=null!=Y.lengths?Y.lengths:[200]),Array.isArray(d)||(d=[d]),zot(h)&&(h=null!=Y.angles?Y.angles:[0]),Array.isArray(h)||(h=[h]),zot(g)&&(g=null!=Y.anglesA?Y.anglesA:[10]),Array.isArray(g)||(g=[g]),zot(p)&&(p=null!=Y.anglesB?Y.anglesB:e.copy(g)),Array.isArray(p)||(p=[p]),zot(f)&&(f=null!=Y.anglesEnd?Y.anglesEnd:[0]),Array.isArray(f)||(f=[f]),zot(b)&&(b=null!=Y.strokeObj?Y.strokeObj:{miterLimit:2}),zot(x)&&(x=null!=Y.spineBorderColor?Y.spineBorderColor:null),zot(C)&&(C=null!=Y.spineBorderWidth?Y.spineBorderWidth:null),x<0||C<0?x=C=null:null!=x&&null==C&&(C=1),zot(w)&&(w=null!=Y.spineColor?Y.spineColor:C>0?"rgba(0,0,0,0)":"black"),zot(k)&&(k=null!=Y.spineDashed?Y.spineDashed:null),zot(T)&&(T=null!=Y.spineStrokeObj?Y.spineStrokeObj:{miterLimit:2}),(zot(C)||C>0)&&(zot(x)&&zot(C)||zot(x)&&(x=o||"black")),zot(S)&&(S=null!=Y.closeBorderColor?Y.closeBorderColor:null),zot(P)&&(P=null!=Y.closeBorderWidth?Y.closeBorderWidth:null),S<0||P<0?S=P=null:null!=S&&null==P&&(P=1),zot(A)&&(A=null!=Y.closeColor?Y.closeColor:P>0?"rgba(0,0,0,0)":null),zot(B)&&(B=null!=Y.closeDashed?Y.closeDashed:null),zot(E)&&(E=null!=Y.closeStrokeObj?Y.closeStrokeObj:{miterLimit:2}),(zot(P)||P>0)&&(zot(S)&&zot(P)||zot(S)&&(S=o||"black")),this.thicknessA=a,this.thicknessB=l,this.cross=m,this.close=y,this.lengths=d,this.angles=h,this.anglesA=g,this.anglesB=p,this.anglesEnd=f,this.crossColors=z,j(d,h,g,p,f,m,z,y),this.add=function(e,t,o,n,r,i,a,l){var s,c="lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close";return(s=zob(D.add,arguments,c))?s:(zot(i)||(D.cross=i),zot(l)||(D.close=l),zot(e)||(Array.isArray(e)||(e=[e]),zot(D.lengths)?D.lengths=e:D.lengths=D.lengths.concat(e)),zot(t)||(Array.isArray(t)||(t=[t]),zot(D.angles)?D.angles=t:D.angles=D.angles.concat(t)),zot(o)||(Array.isArray(o)||(o=[o]),zot(D.anglesA)?D.anglesA=o:D.anglesA=D.anglesA.concat(o)),zot(n)||(Array.isArray(n)||(n=[n]),zot(D.anglesB)?D.anglesB=n:D.anglesB=D.anglesB.concat(n)),zot(r)||(Array.isArray(r)||(r=[r]),zot(D.anglesEnd)?D.anglesEnd=r:D.anglesEnd=D.anglesEnd.concat(r)),zot(a)||(zot(D.crossColors)?zon&&zogy("Flare() - must set crossColor for original object parameters"):(Array.isArray(a)||(a=[a]),zot(D.crossColors)?D.crossColors=a:D.crossColors=D.crossColors.concat(a))),D.remake(),D)},this.remake=function(){return a=this.thicknessA,l=this.thicknessB,j(D.lengths,D.angles,D.anglesA,D.anglesB,D.anglesEnd,D.cross,D.crossColors,D.close),D},Object.defineProperty(D,"color",{get:function(){return t},set:function(e){zot(e)&&(e="black"),t=e,e&&e.type?D.specialColor(D.colorCommand,e):D.colorCommand.style=e}}),this.setColorRange=function(e,t){return zot(t)?(X=D.color,R=e):zot(e)?(X=D.color,R=t):(X=e,R=t),D};var H=0;Object.defineProperty(D,"colorRange",{get:function(){return H},set:function(t){H=t,zot(X)||zot(R)||(D.color=e.colorRange(X,R,t))}}),Object.defineProperty(D,"borderColor",{get:function(){return o},set:function(e){o=e,D.borderColorCommand?e&&e.type?D.specialColor(D.borderColorCommand,e):D.borderColorCommand.style=e:j()}}),Object.defineProperty(D,"borderWidth",{get:function(){return n},set:function(e){e>0||(e=0),n=e,D.borderWidthCommand&&0!=n?(D.borderWidthCommand.width=n,v&&(D.borderDashedCommand.segments=[20,10],D.borderDashedCommand.offset=5)):j()}}),Object.defineProperty(D,"spineColor",{get:function(){return w},set:function(e){zot(e)&&(e="black"),w=e,D.spineColorCommand?e&&e.type?D.specialColor(D.spineColorCommand,e):D.spineColorCommand.style=e:j()}}),Object.defineProperty(D,"spineBorderColor",{get:function(){return x},set:function(e){x=e,D.spineBorderColorCommand?e&&e.type?D.specialColor(D.spineBorderColorCommand,e):D.spineBorderColorCommand.style=e:j()}}),Object.defineProperty(D,"spineBorderWidth",{get:function(){return C},set:function(e){e>0||(e=0),C=e,D.spineBorderWidthCommand&&0!=C?(D.spineBorderWidthCommand.width=C,k&&(D.spineBorderDashedCommand.segments=[20,10],D.spineBorderDashedCommand.offset=5)):j()}}),Object.defineProperty(D,"closeColor",{get:function(){return A},set:function(e){zot(e)&&(e="black"),A=e,D.closeColorCommand?e&&e.type?D.specialColor(D.closeColorCommand,e):D.closeColorCommand.style=e:j()}}),Object.defineProperty(D,"closeBorderColor",{get:function(){return S},set:function(e){S=e,D.closeBorderColorCommand?e&&e.type?D.specialColor(D.closeBorderColorCommand,e):D.closeBorderColorCommand.style=e:j()}}),Object.defineProperty(D,"closeBorderWidth",{get:function(){return P},set:function(e){e>0||(e=0),P=e,D.closeBorderWidthCommand&&0!=P?(D.closeBorderWidthCommand.width=P,B&&(D.closeBorderDashedCommand.segments=[20,10],D.closeBorderDashedCommand.offset=5)):j()}}),Object.defineProperty(D,"pin",{get:function(){return s},set:function(e){e>0||(e=0),e>D.pinPoints.length-1&&(s=0),s=e;var t=D.pinPoints[s];t&&(D.regX=t.x,D.regY=t.y)}});var F=e.boundsAroundPoints(D.points);this.setBounds(F.x,F.y,F.width,F.height),zot(s)||(D.pin=s),this.mouseChildren=!1,!1!==I&&e.styleTransforms(this,Y),this.clone=function(){return D.cloneProps(new e.Flare(t,o,n,W,e.copy(i),e.copy(a),e.copy(l),s,c,u,e.copy(d),e.copy(h),e.copy(g),e.copy(p),e.copy(f),m,e.copy(z),y,v,b,w,C,x,k,T,A,P,S,B,E,I,this.group,O))}},e.extend(e.Flare,e.Container,["clone"],"zimContainer",!1),e.MultiFlare=function(t,o,n,r,i,a,l){var s,c="flares, pins, angles, endToEnd, style, group, inherit";if(s=zob(e.MultiFlare,arguments,c,this))return s;z_d("53.7"),this.zimContainer_constructor(),this.type="MultiFlare",this.group=a;var u=!1===i?{}:e.getStyle(this.type,this.group,l),d=this;zot(t)&&(t=null!=u.flares?u.flares:[]),Array.isArray(t)||(t=[t]),zot(o)&&(o=null!=u.pins?u.pins:null),zot(n)&&(n=null!=u.angles?u.angles:null),zot(r)&&(r=null!=u.endToEnd&&u.endToEnd),d.flares=t,d.pins=o,d.angles=n,d.endToEnd=r,d.mouseChildren=!1,d.add=function(t,o){return zot(t)?d:(zot(o)&&(o=!0),Array.isArray(t)||(t=[t]),e.loop(t,function(e){o?d.flares.push(e.clone()):d.flares.push(e)}),d.remake(),d.stage&&d.stage.update(),d)},d.remove=function(t){return zot(t)?d:(Array.isArray(t)||(t=[t]),e.loop(t,function(e){var t=d.flares.indexOf(e);t>=0&&d.flares.splice(t,1)}),d.remake(),d.stage&&d.stage.update(),d)},d.remake=function(){d.removeAllChildren(),e.loop(d.flares,function(e,i){if(o&&!zot(o[i])&&(e.pin=o[i]),n&&!zot(n[i])&&(e.rotation=n[i]),e.addTo(d),d.flares.push(e),r&&i>0){var a=t[i-1],l=a.pinPoints[a.pinPoints.length-1],s=a.localToLocal(l.x,l.y,d),c=e.pinPoints[0],u=e.localToLocal(c.x,c.y,d);e.mov(s.x-u.x,s.y-u.y)}})},d.remake(),!1!==i&&e.styleTransforms(this,u),this.clone=function(){return d.cloneProps(new e.MultiFlare(e.copy(t,!0),e.copy(o),e.copy(n),r,i,this.group,l))}},e.extend(e.MultiFlare,e.Container,["clone"],"zimContainer",!1),e.FlareBox=function(t,o,n,r,i,a,l,s,c,u,d){var h,g="width, height, color, borderColor, borderWidth, flares, corners, pins, style, group, inherit";if(h=zob(e.FlareBox,arguments,g,this))return h;z_d("53.8"),this.group=u;var p=!1===c?{}:e.getStyle("FlareBox",this.group,d);zot(t)&&(t=null!=p.width?p.width:220),zot(o)&&(o=null!=p.height?p.height:80),this.zimContainer_constructor(t,o),this.type="FlareBox";var f=this;if(this.mouseChildren=!1,zot(r)&&(r=null!=p.borderColor?p.borderColor:null),zot(i)&&(i=null!=p.borderWidth?p.borderWidth:null),r<0||i<0?r=i=null:null!=r&&null==i&&(i=1),zot(n)&&(n=null!=p.color?p.color:i>0?"rgba(0,0,0,0)":"black"),(zot(i)||i>0)&&(zot(r)&&zot(i)||zot(r)&&(r="black")),zot(a)&&(a=null!=p.flares?p.flares:null),zot(l)&&(l=null!=p.corners?p.corners:null),zot(s)&&(s=null!=p.pins?p.pins:null),f.backing=new e.Rectangle(t,o,n,r,i).addTo(this),!zot(a)){if("MultiFlare"!=a.type){if(!Array.isArray(a)){if("Flare"!=a.type)return;a=[a]}a=new e.MultiFlare(a,s)}a.addTo(f),f.multiFlare=a,f.flares=f.multiFlare.flares,a.loop(function(e,n){s&&!zot(s[n])?e.pin=s[n]:zot(e.pin)&&(e.pin=0),l&&!zot(l[n])?e.corner=l[n]:zot(e.corner)&&(e.corner=0),1==e.corner?e.loc(t,0):2==e.corner?e.loc(t,o):3==e.corner?e.loc(0,o):e.loc(0,0),e.rot(90*(e.corner-e.pin))}),!1!==c&&e.styleTransforms(this,p),this.clone=function(){return f.cloneProps(new e.FlareBox(t,o,n,r,i,e.copy(a,!0),e.copy(l),e.copy(s),c,this.group,d))}}},e.extend(e.FlareBox,e.Container,["clone"],"zimContainer",!1),e.Label=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L){function _(){return arguments}function Y(){U.removeChild(U.background),U.background=new e.Rectangle(U.getBounds().width+2*T,U.getBounds().height+2*A,v,b,w,C,x,null,!1),e.center(U.background,U,0),U.setBounds(U.background.x,U.background.y,U.background.width,U.background.height)}function D(){var t,n=Z.getBounds();"baseline"==u?t=n.y:"top"==u?(Z.y=o-o/6,t=0):"center"==u||"middle"==u?(t=-n.height/2,Z.y=.3*o):t=-n.height,U.setBounds(n.x,t,N.width?N.width-2*k:n.width,N.height?N.height-2*k:n.height),U.hitArea&&U.hitArea.graphics.c().f("black").r(U.getBounds().x,U.getBounds().y,U.getBounds().width,U.getBounds().height),"center"!=u&&"middle"!=u||(e.pos(Z,null,0),e.mov(Z,0,1)),m?te&&X():zot(v)||Y(),"baseline"==u||Q||(Z.y+=o/32),R()}function X(){var e=m.boundsToGlobal(),t=U.boundsToGlobal(e,!0);U.setBounds(t.x,t.y,t.width,t.height)}function R(){e.pos(Z,"left"==c||"right"==c?m||U.background?T:0:null,"top"==u||"baseline"==u||"bottom"==u?m||U.background?A:0:null,"right"==c,"bottom"==u),Z.x+=P,Z.y+=S}function W(){J&&(J.x=Z.x,J.y=Z.y,U.addChildAt(J,U.background||U.backing?1:0))}function H(){U.size=200;for(var e=0;f<I/2&&(U.height>I||U.width>p)&&(e++,U.size=U.size/2,!(e>50)););for(e=0;U.height<=I&&U.width<=p&&(e++,U.size=Math.ceil(U.size+1),!(e>50)););U.size=U.size-1,W()}var F,V="text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, bold, italic, variant, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingHorizontal, paddingVertical, shiftHorizontal, shiftVertical, rollPersist, labelWidth, labelHeight, maxSize, style, group, inherit";if(F=zob(e.Label,arguments,V,this))return F;z_d("54"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Label",this.group=j;var N=!1===O?{}:e.getStyle(this.type,this.group,L);zot(t)&&(t=null!=N.text?N.text:"LABEL"),zot(o)&&(o=null!=N.size?N.size:36),zot(n)&&(n=null!=N.font?N.font:"arial"),zot(r)&&(r=null!=N.color?N.color:"black"),zot(d)&&(d=null!=N.bold&&N.bold),zot(h)&&(h=null!=N.italic&&N.italic);var G=_(t,o,n,r,d,h);t=e.Pick.choose(t);var q=!1;""===t&&(t=" ",q=!0),o=e.Pick.choose(o),n=e.Pick.choose(n),r=e.Pick.choose(r),d=e.Pick.choose(d),h=e.Pick.choose(h),zot(a)&&(a=null!=N.rollColor?N.rollColor:r),(zot(l)||"ignore"==l)&&(l=null!=N.shadowColor&&"ignore"!=l?N.shadowColor:-1),(zot(s)||"ignore"==s)&&(s=null!=N.shadowBlur&&"ignore"!=s?N.shadowBlur:14),zot(c)&&(c=null!=N.align?N.align:"left"),zot(u)&&(u=null!=N.valign?N.valign:"top"),zot(z)&&zot(N.outlineColor)||!zot(y)||(y=null!=N.outlineWidth?N.outlineWidth:Math.round(.2*o)),zot(y)&&zot(N.outlineWidth)||!zot(z)||(z=null!=N.outlineColor?N.outlineColor:"#000000"),zot(y)&&(y=null!=N.outlineWidth?N.outlineWidth:0),(zot(v)||"ignore"==v)&&(v=null!=N.backgroundColor&&"ignore"!=v?N.backgroundColor:null),(zot(k)||"ignore"==k)&&(k=null!=N.padding&&"ignore"!=k?N.padding:10),zot(T)&&(T=null!=N.paddingHorizontal?N.paddingHorizontal:k),zot(A)&&(A=null!=N.paddingVertical?N.paddingVertical:k),zot(P)&&(P=null!=N.shiftHorizontal?N.shiftHorizontal:0),zot(S)&&(S=null!=N.shiftVertical?N.shiftVertical:0),zot(g)&&(g=null!=N.variant&&N.variant),zot(p)&&(p=null!=N.lineWidth?N.lineWidth:null),zot(f)&&(f=null!=N.lineHeight?N.lineHeight:null),(zot(m)||"ignore"==m)&&(m=null!=N.backing&&"ignore"!=m?N.backing.clone():null),zot(B)&&(B=null!=N.rollPersist&&N.rollPersist),null!=N.labelWidth&&(p=N.labelWidth),zot(E)||(p=E),"middle"==c&&(c="center"),zot(I)&&(I=null!=N.labelHeight?N.labelHeight:null),zot(M)&&(M=null!=N.maxSize?N.maxSize:null),o=M?Math.min(o,M):o;var Q=void 0!==zdf&&zdf.retina,U=this;this.mouseChildren=!1,this.paddingVertical=A,this.paddingHorizontal=T;var K=[];K[0]=h?"italic":"normal",K[1]=g?"small-caps":"normal",K[2]=d?"bold":"normal",K[3]=o+"px",K[4]=n;var Z=this.label=new createjs.Text(String(t),K.join(" "),r);if(Z.textAlign=c,Z.lineWidth=p,Z.lineHeight=f,Z.textBaseline="alphabetic",y>0){var J=this.outlineLabel=Z.clone();J.color=z,J.outline=y}-1!=l&&s>0&&(Z.shadow=new createjs.Shadow(l,3,3,s)),this.addChild(Z);var $,ee,te=!1;if(zot(m)&&zot(v)){var oe=new createjs.Shape;U.hitArea=oe}if(D(),!zot(m)){if("Pattern"==m.type){U.backing=new e.Container(U.width+2*T,U.height+2*A,null,null,!1).centerReg(null,null,!1),-1!=l&&s>0&&(new e.Rectangle(U.width+2*T-2,U.height+A-2,"#666",null,null,C,null,null,!1).center(U.backing).shadow=new createjs.Shadow(l,3,3,s));var ne=new e.Rectangle(U.width+2*T,U.height+2*A,v,null,null,C,null,null,!1).addTo(U.backing);m.centerReg(ne),m.setMask(ne),U.backing.pattern=m}else U.backing=m;U.backing.center(U,0),m=U.backing,X(),te=!0}R(),W(),Object.defineProperty(U,"text",{get:function(){return" "==Z.text&&q?"":Z.text},set:function(e){q=!1,""===e&&(e=" ",q=!0),Z.text=String(e),J&&(J.text=String(e)),D(),zot(p)||zot(I)||(H(),J&&W())}}),Object.defineProperty(U,"size",{get:function(){return o},set:function(e){o=M?Math.min(e,M):e,K[3]=o+"px",this.label.font=K.join(" "),J&&(J.font=K.join(" ")),D()}}),Object.defineProperty(U,"bold",{get:function(){return Boolean(this.label.font.match("bold"))},set:function(e){K[2]=e?"bold":"normal",this.label.font=K.join(" "),J&&(J.font=K.join(" "))}}),Object.defineProperty(U,"italic",{get:function(){return Boolean(this.label.font.match("italic"))},set:function(e){K[0]=e?"italic":"normal",this.label.font=K.join(" "),J&&(J.font=K.join(" "))}}),Object.defineProperty(U,"variant",{get:function(){return Boolean(this.label.font.match("small-caps"))},set:function(e){K[1]=e?"small-caps":"normal",this.label.font=K.join(" "),J&&(J.font=K.join(" "))}}),Object.defineProperty(U,"font",{get:function(){return K[4]},set:function(e){zot(e)||(K[4]=e,this.label.font=K.join(" "),J&&(J.font=K.join(" ")))}}),Object.defineProperty(U,"align",{get:function(){return c},set:function(e){zot(e)||(c=e,this.label.textAlign=c,J&&(J.textAlign=c),D())}}),Object.defineProperty(U,"valign",{get:function(){return u},set:function(e){zot(e)||(u=e,D())}}),Object.defineProperty(U,"color",{get:function(){return r},set:function(t){a==r&&(a=t),r=t,Z.color=r,e.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}}),this.setColorRange=function(e,t){return zot(t)?($=U.color,ee=e):zot(e)?($=U.color,ee=t):($=e,ee=t),U};var re=0;Object.defineProperty(U,"colorRange",{get:function(){return re},set:function(t){re=t,zot($)||zot(ee)||(U.color=e.colorRange($,ee,t))}}),Object.defineProperty(U,"backgroundColor",{get:function(){return v},set:function(t){v=t,U.background?U.background.color=t:U.backing?U.backing.color=t:Y(),e.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}}),Object.defineProperty(U,"outlineColor",{get:function(){return z},set:function(t){z=t,J&&(J.color=z),e.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}}),Object.defineProperty(U,"rollColor",{get:function(){return a},set:function(e){a=e}}),this._enabled=!0,Object.defineProperty(U,"enabled",{get:function(){return U._enabled},set:function(t){i(U,t),Z.color=r,U.mouseChildren=!1,e.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}}),this.showRollColor=function(e){return zot(e)&&(e=!0),Z.color=e?a:r,U.stage&&U.stage.update(),U},this.mouseoverEvent=this.on("mouseover",function(){U.showRollColor&&U.showRollColor()}),this.mouseoutEvent=this.on("mouseout",function(){U.rollPersist||U.showRollColor(!1)}),this.pressupEvent=this.on("pressup",function(){U.rollPersist&&U.showRollColor(!1)}),Object.defineProperty(U,"labelWidth",{get:function(){return p},set:function(t){t>0&&(p=t,U.label.lineWidth=t,J&&(J.lineWidth=t)),I&&H(),e.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}}),Object.defineProperty(U,"labelHeight",{get:function(){return I},set:function(t){t>0&&(I=t),p&&H(),e.OPTIMIZE||!zns&&OPTIMIZE||!U.stage||U.stage.update()}}),zot(p)||zot(I)||H(),e.styleTransforms(this,N),this.clone=function(t){return U.cloneProps(new e.Label(t||!e.isPick(G[0])?U.text:G[0],t||!e.isPick(G[1])?o:G[1],t||!e.isPick(G[2])?n:G[2],t||!e.isPick(G[3])?r:G[3],a,l,s,c,u,t||!e.isPick(G[4])?d:G[4],t||!e.isPick(G[5])?h:G[5],g,p,f,zot(m)?null:m.clone(t),z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,this.group,L))}},e.extend(e.Label,e.Container,"clone","zimContainer"),e.LabelOnPath=function(t,o,n,r,i,a,l,s,c,u,d){function h(){for(var e=v.numChildren-1;e>=0;e--)v.getChildAt(e).dispose();for(z.numLetters=t.text.length,e=0;e<z.numLetters;e++){var o=t.clone();o.text=t.text[e],o.centerReg(v).reg(null,o.height),""!=o.text&&" "!=o.text&&o.expand(0),z.allowToggle&&(o.cursor="pointer"),o.on("mousedown",function(){z.allowToggle&&z.toggle()})}z.resize()}var g,p="label, path, percentAngle, percents, showPath, allowToggle, interactive, onTop, style, group, inherit";if(g=zob(e.LabelOnPath,arguments,p,this))return g;z_d("54.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelOnPath",this.group=u;var f=!1===c?{}:e.getStyle(this.type,this.group,d);zot(t)&&(t=null!=f.label?f.label:new e.Label("Label on Path")),zot(o)&&(o=null!=f.path?f.path:new e.Squiggle({points:[[0,0,0,0,-86,57,86,-57],[300,150,0,0,-133,21,133,-21]]})),zot(n)&&(n=null!=f.percentAngle?f.percentAngle:100),zot(r)&&(r=null!=f.percents?f.percents:null),zot(i)&&(i=null==f.showPath||f.showPath),zot(a)&&(a=null==f.allowToggle||f.allowToggle),zot(l)&&(l=null==f.interactive||f.interactive),zot(s)&&(s=null!=f.onTop&&f.onTop);var m=t.color;o.addTo(this);var z=this;this.path=o,this.allowToggle=a,o.interactive=l,"string"==typeof t&&(t=new e.Label(t));var y=o.alpha;i||o.alp(0),o.onTop=s;var v=this.letters=(new e.Container).addTo(this);if(!r){r=[];for(var b=0;b<t.text.length;b++)r.push(e.decimals(1/(t.text.length-("Blob"==o.type?0:1))*100*b))}this.percents=r,this.resize=function(){for(var e=o.segmentRatios,t=o.segmentPoints,i=0;i<this.numLetters;i++){var a=o.getCurvePoint(r[i]/100,e,t,!0);if(a){var l=this.globalToLocal(a.x,a.y);l&&v.getChildAt(i).loc(l).rot((a.angle>180?a.angle-360:a.angle)*n/100)}}return this},h(),this.showPath=function(e){return this.toggle(!0),o.toggle(e),this},this.hidePath=function(){return this.toggle(!1),this},Object.defineProperty(z,"text",{get:function(){return t.text},set:function(n){t.text=n,r=[];for(var i=0;i<t.text.length;i++)r.push(e.decimals(1/(t.text.length-("Blob"==o.type?0:1))*100*i));h()}}),Object.defineProperty(this,"color",{get:function(){return m},set:function(e){m=e;for(var t=0;t<z.letters.numChildren;t++)z.letters.getChildAt(t).color=m;z.stage&&z.stage.update()}}),Object.defineProperty(z,"interactive",{get:function(){return l},set:function(t){l=t,o.interactive=t,this.ticker&&e.Ticker.remove(this.ticker),l&&(this.ticker=e.Ticker.add(function(){z.resize()}))}}),this.interactive&&(this.ticker=e.Ticker.add(function(){z.resize()}));var w=z.toggled=i
;this.toggle=function(e){if(this.allowToggle)return(w=zot(e)?!w:!!e)?(o.alp(y),this.interactive&&(o.showControls(),v.mouseEnabled=!1,v.mouseChildren=!1,v.cursor="default",this.controlHideEvent&&o.off("controlshide",this.controlHideEvent),this.controlHideEvent=o.on("controlshide",function(){v.mouseEnabled=!0,v.mouseChildren=!0,v.cursor="pointer",y=o.alpha,o.alp(0),w=!1,z.toggled=w,z.stage&&z.stage.update()},null,!0))):(y=o.alpha,o.alp(0),v.mouseEnabled=!0,v.mouseChildren=!0,v.cursor="pointer"),z.toggled=w,z.stage&&z.stage.update(),z},z.toggle(!0),e.styleTransforms(this,f),this.clone=function(){return z.cloneProps(new e.LabelOnPath(z.label.clone(),z.path.clone(),n,e.copy(r),i,a,l,s,c,this.group,d))},this.dispose=function(t,o,n){return this.ticker&&e.Ticker.remove(this.ticker),n||this.zimContainer_dispose(!0),!0}},e.extend(e.LabelOnPath,e.Container,["clone","dispose"],"zimContainer",!1),e.LabelOnArc=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z){function y(){for(P=0,S=[0],I=0;I<T.numLetters;I++){var e=E[I],t=180*Math.atan((e.width+s)/2/(i+l))/Math.PI*2;S.push(t),P+=t,e.letterHolder.centerReg(B).reg(null,i+l+e.height+(a?.13*e.height:0))}T.circle.radius=i,(d||h||g)&&(g>0&&zot(h)?h="#000000":zot(g)&&!zot(h)&&(g=2),j.graphics.c().f(null).s(h).ss(g).arc(0,0,i,(startAngle-90)*Math.PI/180,(startAngle-90+P)*Math.PI/180))}function v(){if(!x){c=[];for(var e=0;e<S.length-1;e++)c[e]=Math.round((S[e]+S[e+1])/2*100)/100}T.angles=c;var t=T.startAngle=-P/2;for(e=0;e<B.numChildren;e++){var o=B.getChildAt(e);c[e],t=o.rotation=t+c[e]}}var b,w="label, size, font, color, radius, flip, spacing, letterSpacing, angles, showCircle, arcColor, arcBorderColor, arcBorderWidth, radiusSpread, style, group, inherit";if(b=zob(e.LabelOnArc,arguments,w,this))return b;z_d("54.55"),this.group=m;var C=!1===f?{}:e.getStyle("LabelOnArc",this.group,z);zot(o)&&(o=null!=C.size?C.size:30),zot(t)&&(t=null!=C.label?C.label:new e.Label("Label on Arc",o)),zot(n)&&(n=null!=C.font?C.font:"verdana"),zot(r)&&(r=null!=C.color?C.color:"white"),zot(i)&&(i=null!=C.radius?C.radius:100),zot(a)&&(a=null!=C.flip&&C.flip),zot(l)&&(l=null!=C.spacing?C.spacing:0),zot(s)&&(s=null!=C.letterSpacing?C.letterSpacing:5),zot(c)&&(c=null!=C.angles?C.angles:null);var x=!zot(c);zot(u)&&(u=null!=C.showCircle&&C.showCircle),zot(d)&&(d=null!=C.arcColor?C.arcColor:null),zot(h)&&(h=null!=C.arcBorderColor?C.arcBorderColor:null),zot(g)&&(g=null!=C.arcBorderWidth?C.arcBorderWidth:null),zot(p)&&(p=null!=C.radiusSpread&&C.radiusSpread);var k=this.outerRadius=i+l+t.height;this.innerRadius=i+l,this.zimContainer_constructor(-k,-k,2*k,2*k,!1),this.type="LabelOnArc";var T=this;if("Label"!=t.type&&(t=new e.Label(t,o,n,r)),T.text=t.text,a){var A=t.text.split("").reverse().join("");t.text=A}var P,S,B=T.letters=new e.Container(this.width,this.height).centerReg(this);T.numLetters=t.text.length,this.letterHeight=t.height;for(var E=T.labels=[],I=0;I<T.numLetters;I++){var M=t.clone();E.push(M),M.text=t.text[I],M.letterHolder=new e.Container(M.width,M.height),M.centerReg(M.letterHolder).rot(a?180:0)}var O=this.circle=new e.Circle(i);u&&O.addTo(this);var j=this.arc=(new e.Shape).addTo(this);if(y(),c){for(P=0,I=0;I<c.length;I++)P+=c[I];P+=c[c.length-1]/2}v(),Object.defineProperty(this,"radius",{get:function(){return i},set:function(e){i=e,y(),x||p||v()}}),Object.defineProperty(this,"color",{get:function(){return r},set:function(e){r=e;for(var t=0;t<T.labels.length;t++)T.labels[t].color=r;T.stage&&T.stage.update()}}),e.styleTransforms(this,C),this.clone=function(){return T.cloneProps(new e.LabelOnArc(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,this.group,z))}},e.extend(e.LabelOnArc,e.Container,"clone","zimContainer",!1),e.LabelLetters=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f){function m(t){function o(t,o,r){if(t.length>1)if("font"!=o&&"a"!=o||0!=r){t.pop();var i=0;e.loop(t,function(e){i+=e.length;var t=n[i];t||(n[i]=[]),(t=n[i])[r]?t[r].push(o):t[r]=[o]})}else{var a=t[0].length;e.loop(t,function(e,t){if(0!=t){var i=n[a];i||(n[a]=[]),i=n[a];var l=e.split(">");i[r]?i[r].push(o+" "+l[0]):i[r]=[o+" "+l[0]],a+=l[1].length}})}}var n=[];if(h){function r(e){return e.split("").reverse().join("")}U=-1;var i=(t=(t=(t=(t=(t=t.replace(/[\u0591-\u07FF]+/gi,r)).replace(/([^\u0591-\u07FF ])([\u0591-\u07FF])/gi,"$1-!!-$2")).replace(/([\u0591-\u07FF])([^\u0591-\u07FF ])/gi,"$1-!!-$2")).replace(/([^\u0591-\u07FF]) ([\u0591-\u07FF])/gi,"$1-!!- -!!-$2")).replace(/([\u0591-\u07FF]) ([^\u0591-\u07FF])/gi,"$1-!!- -!!-$2")).split(/-!!-/g);loop(i,function(e,t){e.match(/[\u0591-\u07FF]/i)&&(i[t]=e.split(" ").reverse().join(" "))}),t=i.join("")}t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/\n|\r/g,"<br>")).replace(/<strong>|<strong \/>|<strong\/>/gi,"<b>")).replace(/<\/strong>/gi,"</b>")).replace(/<em>|<em \/>|<em\/>/gi,"<i>")).replace(/<\/em>/gi,"</i>")).replace(/\\n|\\r/g,"<br>")).replace(/<br>|<br \/>|<br\/>(<\/br>)?/gi,"<br>")).replace(/<b/gi,"<b")).replace(/<i/gi,"<i")).replace(/<u/gi,"<u")).replace(/<br/gi,"<br")).replace(/<a/gi,"<a")).replace(/<font/gi,"<font");var a,l=[/<(a|i|u|f|br|\/a|\/i|\/u|\/f|\/b)[^>]*>/g,/<(a|i|u|f|br|\/a|\/i|\/u|\/f|b)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|\/a)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|a)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|\/i)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|i)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|\/u)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|u)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|f)[^>]*>/g],s=["b","a","i","u","font"];e.loop(s,function(e,n){if(a=t.replace(l[2*n],""),"font"==e)var r=a.split("<font ");else r="a"==e?a.split("<a "):a.split("<"+e+">");o(r,e,0),o(r=(a=t.replace(l[2*n+1],"")).split("</"+e+">"),e,1)}),a=(a=t.replace(/<br>/gi,"@^#")).replace(/<(b|a|i|u|f|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,""),arr=a.split("@^#");var c=arr.join("\n");return a=arr.join(""),o(arr,"br",0),{text:a,data:n,original:c}}function z(t){var o=t.currentTarget,n=C.rolls[o.rollIndex];e.loop(n,function(e){e.backgroundColor=o.zrbc}),o.stage&&o.stage.update()}function y(t){var o=t.currentTarget,n=C.rolls[o.rollIndex];e.loop(n,function(e){e.backgroundColor=o.zobc}),o.stage&&o.stage.update()}var v,b="label, align, valign, letterSpacing, letterSpacings, lineSpacing, lineSpacings, lineHeight, lineAlign, lineValign, cache, rtl, style, group, inherit";if(v=zob(e.LabelLetters,arguments,b,this))return v;z_d("54.57"),this.group=p;var w=!1===g?{}:e.getStyle("LabelLetters",this.group,f);zot(t)&&(t=null!=w.label?w.label:new e.Label("Label Letters")),zot(o)&&(o=null!=w.align?w.align:"center"),zot(n)&&(n=null!=w.valign?w.valign:"center"),zot(r)&&(r=null!=w.letterSpacing?w.letterSpacing:5),zot(i)&&(i=null!=w.letterSpacings?w.letterSpacings:null),zot(s)&&(s=null!=w.lineHeight?w.lineHeight:null),zot(a)&&(a=null!=w.lineSpacing?w.lineSpacing:5),zot(l)&&(l=null!=w.lineSpacings?w.lineSpacings:null),zot(h)&&(h=null!=w.rtl&&w.rtl),zot(c)&&(c=null!=w.lineAlign?w.lineAlign:h?"right":"left"),zot(u)&&(u=null!=w.lineValign?w.lineValign:"bottom"),zot(d)&&(d=null!=w.cache&&w.cache),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelLetters";var C=this,x=C.letterData=[];"Label"!=t.type?(data=m(t),x=data.data,t=new e.Label(data.text)):(data=m(t.text),x=data.data,t.text=data.text),C.text=data.original,C.numLetters=t.text.length;var k=!zot(i);if(i&&!Array.isArray(i)&&(i=null),i)for(T=0;T<C.numLetters;T++)zot(i[T])&&(i[T]=r);else{i=[];for(var T=0;T<C.numLetters;T++)i.push(r)}if(C.letterSpacings=i,l&&!Array.isArray(l)&&(l=null),l)for(T=0;T<C.numLetters-1;T++)zot(l[T])&&(l[T]=a);else for(l=[],T=0;T<C.numLetters-1;T++)l.push(a);C.lineSpacings=l,C.labels=[],C.lines=[[]];var A=[],P=[],S=[0],B=0,E=0,I=0,M=0,O=0,j=x,L=!1,_=!1,Y=!1,D=!1,X=!1,R=!1,W=!1,H=!1,F=(t.group,!1),V=!1,N=!1,G=!1;for(C.rolls=[[]],T=0;T<C.numLetters;T++){if(D=!1,j[T]&&(j[T][1]&&(j[T][1].indexOf("b")>=0&&(L=!1),j[T][1].indexOf("i")>=0&&(_=!1),j[T][1].indexOf("u")>=0&&(Y=!1),e.loop(j[T][1],function(e){return e.match(/^font/i)?(X=!1,N=!1,G&&C.rolls.push([]),G=!1,R=!1,H=!1,void(W=!1)):e.match(/^a/i)?(F=!1,void(V=!1)):void 0})),j[T][0]&&(j[T][0].indexOf("b")>=0&&(L=!0),j[T][0].indexOf("i")>=0&&(_=!0),j[T][0].indexOf("u")>=0&&(Y=!0),D=0,e.loop(j[T][0],function(e){"br"==e&&D++}),e.loop(j[T][0],function(t){var o,n;return t.match(/^font/i)?((n=t.match(/ color\s?=\s?(\S*)/i))&&(X=n[1],(o=e.colors.indexOf(X))>=0&&(X=e.colorsHex[o]),X=X.replace(/'/g,"")),(n=t.match(/size\s?=\s?(\S*)/i))&&(R=n[1]),(n=t.match(/backgroundColor\s?=\s?(\S*)/i))&&(N=n[1],(o=e.colors.indexOf(N))>=0&&(N=e.colorsHex[o]),N=N.replace(/'/g,"")),(n=t.match(/rollBackgroundColor\s?=\s?(\S*)/i))&&(G=n[1],(o=e.colors.indexOf(G))>=0&&(G=e.colorsHex[o]),G=G.replace(/'/g,"")),(n=t.match(/group\s?=\s?(\S*)/i))&&(W=n[1]),void((n=t.match(/family\s?=\s?(.*)/i))&&(H=(H=n[1]).split(/\ssize\s?=|\scolor\s?=|\sgroup\s?=/i)[0]))):t.match(/^a/i)?((n=t.match(/href\s?=\s?(\S*)/i))&&(F=n[1]),void((n=t.match(/target\s?=\s?(\S*)/i))&&(V=n[1]))):void 0}))),W)var q=new Label({text:t.text[T],group:W});else(q=t.clone()).text=t.text[T];C.labels.push(q),L&&(q.bold=!0),_&&(q.italic=!0),X&&(q.color=X),N&&(q.backgroundColor=N);var Q=k?i[T]:zot(q.backgroundColor)?i[T]:-.5;G&&(q.rollIndex=C.rolls.length-1,q.zrbc=G,q.zobc=q.backgroundColor,C.rolls[q.rollIndex].push(q),q.expand(0),q.on("mouseover",z),q.on("mouseout",y)),F&&(q.expand(Q,0),q.zurl=F,q.ztar=V,q.cur(),q.on("click",function(e){var t=e.currentTarget;y(e),t.ztar||(t.ztar="_self"),zgo(t.zurl,t.ztar)})),R&&(q.size=R),H&&(q.font=H),D&&(B+=(zot(s)?I:s)+l[M],S.push(B),P.push(zot(s)?I:s),A.push(E),O=Math.max(O,E)),D&&(D>1&&e.loop(D-1,function(){C.lines.push([]),B+=(zot(s)?I:s)+l[M],S.push(B),P.push(zot(s)?I:s),A.push(0),M++}),I=0,E=0,C.lines.push([]),M++),E+=q.width+Q,I=Math.max(I,q.height),T==C.numLetters-1&&(A.push(E),P.push(I),O=Math.max(O,E)),C.lines[M].push(q),Y&&(q.underline=new e.Line(q.width+Q+1,1,q.color).center(q,this).mov(0,q.height/2))}for(var U=0,K=0;K<C.lines.length;K++){var Z,J,$=C.lines[K];for(E=A[K],I=P[K],B=S[K],Z="left"==c?0:"right"==c?O-E:(O-E)/2,J=B,T=0;T<$.length;T++){U++,d&&q.cache(),(q=$[T]).regX="left"==o?0:"right"==o?q.width:q.width/2,q.regY="top"==n?0:"bottom"==n?q.height:q.height/2;var ee=J+("top"==n?0:"bottom"==n?q.height:q.height/2);"center"==u||"middle"==u?ee+=(P[K]-q.height)/2:"bottom"==u&&(ee+=P[K]-q.height),Q=k?i[U-1]:zot(q.backgroundColor)?i[U-1]:-.5,"left"==o?(q.loc(Z,ee,this),Z=q.x+q.width+Q):"right"==o?(q.loc(Z+q.width,ee,this),Z=q.x+Q):(q.loc(Z+q.width/2,ee,this),Z=q.x+q.width/2+Q)}}this.getBounds()||this.setBounds(0,0,0,0),this.regX=this.getBounds().x,this.regY=this.getBounds().y,Object.defineProperty(this,"color",{get:function(){return this.color},set:function(e){this.color=e;for(var t=0;t<C.numChildren;t++)C.getChildAt(t).color=this.color;C.stage&&C.stage.update()}}),this.dispose=function(){e.gD(this),e.loop(C.labels,function(e){e.removeFrom(),e.dispose()}),C.removeFrom()},e.styleTransforms(this,w),this.clone=function(){return C.cloneProps(new e.LabelLetters(t,o,n,r,i,a,l,s,c,u,d,h,g,this.group,f))}},e.extend(e.LabelLetters,e.Container,"clone","zimContainer",!1),e.Button=function(o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y,D,X,R,W,H,F,V,N,G,q,Q,U,K,Z,J,$,ee){function te(){return arguments}function oe(t,r){ve[t]=new e.Container(o,n,null,null,!1).centerReg(null,null,!1),-1!=p&&f>0&&(new e.Rectangle(o-2,n-2,"#666",null,null,g,null,null,!1).center(ve[t]).shadow=new createjs.Shadow(p,3,3,f));var i=ve[t].mask=new e.Rectangle(o,n,t.indexOf("roll")>=0?l:a,null,null,g,null,null,!1).addTo(ve[t]);return r.centerReg(i),r.setMask(i.shape),ve[t].pattern=r,ve[t]}function ne(){(Ae=new createjs.Shape).graphics.f("#000").r(-m,-m,o+2*m,n+2*m),ve.hitArea=Te=Ae}function re(){ve.toggled?(zot(T)||(ve.label.text=!0===T?Me:T),zot(S)||(ve.label.color=S),zot(B)||(ve.label.rollColor=B),ve.rolled?(ve.rollToggleBacking?le("rollToggleBacking",ve.rollToggleBacking):ve.toggleBacking&&le("toggleBacking",ve.toggleBacking),ve.rollToggleIcon?le("rollToggleIcon",ve.rollToggleIcon):ve.toggleIcon&&le("toggleIcon",ve.toggleIcon),zot(b)&&zot(ve.rollToggleBacking)&&(ve.backing.color=P)):(ve.toggleBacking&&le("toggleBacking",ve.toggleBacking),ve.toggleIcon&&le("toggleIcon",ve.toggleIcon),zot(b)&&(ve.backing.color=A))):(ve.label.color=Oe,ve.label.rollColor=je,ve.label.text=Me,ie()),ve.stage&&ve.stage.update()}function ie(){ve.rolled?(zot(b)&&!ve.rollBacking&&(ve.backing.color=l),ve.rollBacking?le("rollBacking",ve.rollBacking):ve.backing&&le("backing",ve.backing),ve.rollIcon?le("rollIcon",ve.rollIcon):ve.icon?le("icon",ve.icon):le("icon",null)):(zot(b)&&(ve.backing.color=a),ve.backing&&le("backing",ve.backing),ve.icon?le("icon",ve.icon):le("icon",null))}function ae(){zot(L)&&zot(F)&&zot(V)||ve.waiting||(Re=!0,zot(H)&&(H=!0),W&&(Xe=ve.stage.on("stagemousedown",function(t){ve.hitTestPoint(t.stageX/e.scaX,t.stageY/e.scaY)||ve.clearWait()},null,!0)),setTimeout(function(){ve.waiting=!0},50),Ye=r.text,zot(X)||(ve.label.color=X),zot(R)||(ve.label.rollColor=R),De=ve.enabled,!H&&ve.enabled&&(ve.enabled=!1),zot(L)||(ve.label.text=L),ve.rolled?(zot(b)&&!ve.rollWaitBacking&&(ve.backing.color=D),ve.rollWaitBacking?le("rollWaitBacking",ve.rollWaitBacking):ve.waitBacking&&le("waitBacking",ve.waitBacking),ve.rollWaitIcon?le("rollWaitIcon",ve.rollWaitIcon):ve.waitIcon&&le("waitIcon",ve.waitIcon)):(zot(b)&&!ve.waitBacking&&(ve.backing.color=Y),ve.waitBacking&&le("waitBacking",ve.waitBacking),ve.waitIcon&&le("waitIcon",ve.waitIcon)),zot(_)&&(_="s"==be?5:5e3),_e&&_e.clear(),_e=e.timeout(_,function(){ve.enabled||(ve.enabled=De),ve.clearWait(),ve.dispatchEvent("waited")}),ve.stage&&ve.stage.update())}function le(e){if(e.indexOf("con")>=0){for(var t=0;t<Pe.length;t++){var o=Pe[t],n=ve[o];ve.removeChild(n)}ve[e]&&ve.addChildAt(ve[e],1)}else{if(!ve[e])return;for(t=0;t<xe.length;t++){var r=xe[t],i=ve[r];ve.removeChild(i)}ve[e]&&ve.addChildAt(ve[e],0)}}function se(){ve.rolled=!0,Ve=!0,Re?(zot(b)&&zot(ve.rollWaitBacking)&&(ve.backing.color=zot(D)?l:D),le("rollWaitBacking",ve.rollWaitBacking),ve.rollWaitIcon&&le("rollWaitIcon",ve.rollWaitIcon)):ye&&ve.toggled?(zot(b)&&zot(ve.rollToggleBacking)&&(ve.backing.color=P),le("rollToggleBacking",ve.rollToggleBacking),ve.rollToggleIcon&&le("rollToggleIcon",ve.rollToggleIcon)):(zot(b)?ve.backing.color=l:zot(b.mask)||(ve.backing.mask.color=l),le("rollBacking",ve.rollBacking),ve.rollIcon&&le("rollIcon",ve.rollIcon)),ve.border&&(ve.border.borderColor=d),ve.label.showRollColor&&ve.label.showRollColor(),ve.stage&&ve.stage.update()}function ce(){Ve=!1,ve.off("mouseout",ce),ve.rollPersist&&Le||ue()}function ue(){ve.rolled=!1,Re||ve.waiting?(zot(b)&&zot(ve.waitBacking)&&(ve.backing.color=zot(Y)?a:Y),ve.waitBacking?le("waitBacking",ve.waitBacking):le("backing",ve.backing),ve.waitIcon?le("waitIcon",ve.waitIcon):ve.icon?le("icon",ve.icon):le("icon",null)):ve.toggled&&ye?(zot(b)&&zot(ve.toggleBacking)&&(ve.backing.color=A),ve.toggleBacking?le("toggleBacking",ve.toggleBacking):le("backing",ve.backing),ve.toggleIcon?le("toggleIcon",ve.toggleIcon):ve.icon?le("icon",ve.icon):le("icon",null)):(zot(b)?ve.backing.color=a:zot(b.mask)||(ve.backing.mask.color=a),le("backing",ve.backing),ve.icon?le("icon",ve.icon):le("icon",null)),ve.border&&(ve.border.borderColor=u),ve.label.showRollColor&&ve.label.showRollColor(!1),ve.stage&&ve.stage.update()}function de(e,t){return zot(e)?ve:(ve.contains(ve[e])&&(ve.removeChild(ve[e]),t&&ve.addChildAt(t,e.indexOf("con")>=0?ve.numChildren-1:0),ve.stage&&ve.stage.update()),t?(zot(b)&&"backing"==e&&(b=t),"Pattern"==t.type&&(t=oe(e,t)),ve[e]=t,ve[e].x=o/2,ve[e].y=n/2):ve[e]=null,ve)}var he,ge="width, height, label, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, borderRollColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBackgroundColor, rollToggleBackgroundColor, toggleColor, rollToggleColor, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, waitBacking, rollWaitBacking, waitIcon, rollWaitIcon, align, valign, indent, indentHorizontal, indentVertical, style, group, inherit";if(he=zob(e.Button,arguments,ge,this))return he;z_d("55"),this.group=$;var pe=!1===J?{}:e.getStyle("Button",$,ee);zot(o)&&(o=null!=pe.width?pe.width:200),zot(n)&&(n=null!=pe.height?pe.height:60),this.zimContainer_constructor(o,n,null,null,!1),this.type="Button",zot(a)&&(a=null!=pe.backgroundColor?pe.backgroundColor:"#C60"),zot(l)&&(l=null!=pe.rollBackgroundColor?pe.rollBackgroundColor:"#F93"),zot(s)&&(s=null!=pe.color?pe.color:"white"),zot(c)&&(c=null!=pe.rollColor?pe.rollColor:"white");var fe=te(a,l,s,c);a=zik(a),l=zik(l),s=zik(s),c=zik(c);var me=u,ze=h;zot(u)&&(u=null!=pe.borderColor?pe.borderColor:null),zot(h)&&(h=null!=pe.borderWidth?pe.borderWidth:null),u<0||h<0?u=h=null:null!=u&&null==h&&(h=1),zot(d)&&(d=null!=pe.borderRollColor?pe.borderRollColor:u),zot(g)&&(g=null!=pe.corner?pe.corner:20),zot(p)&&(p=null!=pe.shadowColor?pe.shadowColor:"rgba(0,0,0,.3)"),zot(f)&&(f=null!=pe.shadowBlur?pe.shadowBlur:14),zot(m)&&(m=null!=pe.hitPadding?pe.hitPadding:0),zot(q)&&(q=null!=pe.align?pe.align:"center"),zot(Q)&&(Q=null!=pe.valign?pe.valign:"center"),zot(U)&&(U=null!=pe.indent?pe.indent:10),zot(K)&&(K=null!=pe.indentHorizontal?pe.indentHorizontal:U),zot(Z)&&(Z=null!=pe.indentVertical?pe.indentVertical:U),zot(z)&&(z=null!=pe.gradient?pe.gradient:0),zot(y)&&(y=null!=pe.gloss?pe.gloss:0),zot(r)&&(r=zot(x)?null!=pe.label?pe.label:"PRESS":"");var ye=(!zot(T)||!zot(E)||!zot(I)||!zot(M)||!zot(O))&&zot(L)&&zot(F)&&zot(V);ye&&zot(j)&&(j=e.mobile()?"mousedown":"click"),"string"!=typeof r&&"number"!=typeof r||(r=new e.Label({text:r,size:null!=pe.size?pe.size:36,font:null!=pe.font?pe.font:"arial",color:null!=pe.color?pe.color:s,rollColor:null!=pe.rollColor?pe.rollColor:c,align:q,valign:Q,rollPersist:null!=pe.rollPersist&&pe.rollPersist,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",shiftVertical:null!=pe.shiftVertical?pe.shiftVertical:0,shiftHorizontal:null!=pe.shiftHorizontal?pe.shiftHorizontal:0,style:!1,group:this.group})),zot(C)&&(C=null!=pe.rollPersist&&pe.rollPersist),this.rollPersist=C,zot(v)&&(v=null!=pe.dashed&&pe.dashed),zot(T)||"Label"!=T.type||zon&&zogy("Button() - do not pass Label to toggle parameter - just pass a String"),zot(A)&&(A=null!=pe.toggleBackgroundColor?pe.toggleBackgroundColor:a),zot(P)&&(P=null!=pe.rollToggleBackgroundColor?pe.rollToggleBackgroundColor:l),zot(S)&&(S=null!=pe.toggleColor?pe.toggleColor:r.color),zot(B)&&(B=null!=pe.rollToggleColor?pe.rollToggleColor:r.rollColor),zot(Y)&&(Y=null!=pe.waitBackgroundColor?pe.waitBackgroundColor:a),zot(D)&&(D=null!=pe.rollWaitBackgroundColor?pe.rollWaitBackgroundColor:l),zot(X)&&(X=null!=pe.waitColor?pe.waitColor:r.color),zot(R)&&(R=null!=pe.rollWaitColor?pe.rollWaitColor:r.rollColor);var ve=this;this.mouseChildren=!1,this.cursor="pointer",ve.focus=!1,ve.rolled=!1;var be=t(_);zot(b)&&(b=null!=pe.backing?pe.backing.clone():null),zot(b)?ve.backing=new e.Rectangle(o,n,a,null,null,g,v,null,!1).centerReg(null,null,!1):ve.backing=b,ve.rollBacking=zot(w)?null!=pe.rollBacking?pe.rollBacking.clone():null:w,ve.waitBacking=zot(F)?null!=pe.waitBacking?pe.waitBacking.clone():null:F,ve.rollWaitBacking=zot(V)?null!=pe.rollWaitBacking?pe.rollWaitBacking.clone():null:V,ve.toggleBacking=zot(E)?null!=pe.toggleBacking?pe.toggleBacking.clone():null:E,ve.rollToggleBacking=zot(I)?null!=pe.rollToggleBacking?pe.rollToggleBacking.clone():null:I;for(var we,Ce,xe=["backing","rollBacking","toggleBacking","rollToggleBacking","waitBacking","rollWaitBacking"],ke=0;ke<xe.length;ke++)we=xe[ke],(Ce=ve[we])&&("Pattern"==Ce.type?Ce=oe(we,Ce):-1!=p&&f>0&&(Ce.shadow=new createjs.Shadow(p,3,3,f)),Ce.x=o/2,Ce.y=n/2);ve.addChild(ve.backing),h&&(ve.border=new e.Rectangle(o,n,"rgba(0,0,0,0)",u,h,g,v,null,!1),ve.addChild(ve.border)),ve.icon=zot(x)?null!=pe.icon?pe.icon.clone():null:x,ve.rollIcon=zot(k)?null!=pe.rollIcon?pe.rollIcon.clone():null:k,ve.waitIcon=zot(N)?null!=pe.waitIcon?pe.waitIcon.clone():null:N,ve.rollWaitIcon=zot(G)?null!=pe.rollWaitIcon?pe.rollWaitIcon.clone():null:G,ve.toggleIcon=zot(M)?null!=pe.toggleIcon?pe.toggleIcon.clone():null:M,ve.rollToggleIcon=zot(O)?null!=pe.rollToggleIcon?pe.rollToggleIcon.clone():null:O;var Te,Ae,Pe=["icon","rollIcon","toggleIcon","rollToggleIcon","waitIcon","rollWaitIcon"];for(ke=0;ke<Pe.length;ke++){var Se=Pe[ke],Be=ve[Se];Be&&(Be.x=o/2,Be.y=n/2)}if(ve.icon&&ve.addChild(ve.icon),Array.isArray(g)||(g=[g,g,g,g]),z>0){var Ee=new createjs.Shape;Ee.graphics.lf(["rgba(255,255,255,"+z+")","rgba(0,0,0,"+z+")"],[0,1],0,0,0,n-h),Ee.graphics.rc(h/2,h/2,o-h,n-h,g[0],g[1],g[2],g[3]),this.addChild(Ee)}if(y>0){var Ie=new createjs.Shape;Ie.graphics.f("rgba(255,255,255,"+y+")"),Ie.graphics.rc(h/2,h/2,o-h,(n-h)/2,g[0],g[1],0,0),Ie.graphics.f("rgba(0,0,0,"+y+")"),Ie.graphics.rc(h/2,n/2,o-h,(n-h)/2,0,0,g[2],g[3]),this.addChild(Ie)}if(m>0&&ne(),this.addChild(r),r.center(this),r.y+=1,this.label=r,e.pos(r,"left"==q||"right"==q?K:null,"top"==Q||"bottom"==Q?Z:null,"right"==q,"bottom"==Q),this.toggled=!1,ye){var Me=r.text,Oe=r.color,je=r.rollColor;this.on(j,function(){ve.toggled=!ve.toggled,re()})}this.toggle=function(e){return ye?(zot(e)?ve.toggled=!ve.toggled:ve.toggled=e,re(),ve):(zon&&zogy("Button() - can't toggle with wait parameters provided"),ve)};var Le=!1;ve.waiting=!1;var _e,Ye,De,Xe,Re=!1,We=ve.label.color,He=ve.label.rollColor,Fe=this.on("mousedown",function(){Le=!0,ae()});this.wait=function(){ae()},this.clearWait=function(){return _e?(Xe&&ve.stage.off("stagemousedown",Xe),_e.clear(),ve.label.text=Ye,ie(),ve.label.color=We,ve.label.rollColor=He,setTimeout(function(){ve.waiting=!1},55),Re=!1,ve.stage&&ve.stage.update(),ve):ve},this.removeWait=function(){return ve.clearWait(),L=null,ve.waitBacking=null,ve.rollWaitBacking=null,ve.off("mousedown",Fe),ve},this.on("pressup",function(){Le=!1,ve.rollPersist&&!Ve&&ue()});var Ve=!1;this.on("mouseover",se),this.on("mouseout",ce),Object.defineProperty(ve,"text",{get:function(){return" "==r.text?"":r.text},set:function(t){r.text=t,Me&&(Me=t),r.center(this),r.y+=1,e.pos(r,"left"==q||"right"==q?K:null,"top"==Q||"bottom"==Q?Z:null,"right"==q,"bottom"==Q)}}),Object.defineProperty(ve,"color",{get:function(){return s},set:function(t){s=t,Oe&&(Oe=s),ve.label&&!zot(ve.label.color)&&(ve.label.color=s),e.OPTIMIZE||!zns&&OPTIMIZE||!ve.stage||ve.stage.update()}}),Object.defineProperty(ve,"rollColor",{get:function(){return c},set:function(e){c=e,je&&(je=c),ve.label&&(ve.label.rollColor=c)}}),Object.defineProperty(ve,"backgroundColor",{get:function(){return a},set:function(t){a=t,ve.backing.color?ve.backing.color=a:ve.backing.mask&&(ve.backing.mask.color=a),e.OPTIMIZE||!zns&&OPTIMIZE||!ve.stage||ve.stage.update()}}),Object.defineProperty(ve,"rollBackgroundColor",{get:function(){return l},set:function(e){l=e,ve.rollBacking&&ve.rollBacking.color?ve.rollBacking.color=l:ve.rollBacking&&ve.rollBacking.mask&&(ve.rollBacking.mask.color=l)}}),Object.defineProperty(ve,"borderColor",{get:function(){return u},set:function(e){u=e,ve.rolled||(ve.backing&&ve.backing.borderColor&&(ve.backing.borderColor=e),ve.border&&(ve.border.borderColor=e))}}),Object.defineProperty(ve,"borderRollColor",{get:function(){return d},set:function(e){d=e,ve.rolled&&(ve.backing&&ve.backing.borderColor&&(ve.backing.borderColor=e),ve.border&&(ve.border.borderColor=e))}}),Object.defineProperty(ve,"hitPadding",{get:function(){return m},set:function(e){0==(m=e)?Te&&(this.hitArea=null):ne()}}),this._enabled=!0,this.startMouseChildren=this.mouseChildren,Object.defineProperty(ve,"enabled",{get:function(){return ve._enabled},set:function(t){ve._enabled&&(ve.startMouseChildren=ve.mouseChildren),t?(i(ve,t),ve.mouseChildren=ve.startMouseChildren):(ue(),i(ve,t)),r.color=r.color,e.OPTIMIZE||!zns&&OPTIMIZE||!ve.stage||ve.stage.update()}}),this.setBacking=function(e,t){de(e,t)},this.setIcon=function(e,t){de(e,t)},!1!==J&&e.styleTransforms(this,pe),this.clone=function(t){var i=new e.Button(o,n,r.clone(),t||!e.isPick(fe[0])?a:fe[0],t||!e.isPick(fe[1])?l:fe[1],t||!e.isPick(fe[2])?s:fe[2],t||!e.isPick(fe[3])?c:fe[3],me,d,ze,g,p,f,m,z,y,v,zot(b)?null:ve.backing.clone(),zot(w)?null:ve.rollBacking.clone(),C,zot(x)?null:x.clone(),zot(k)?null:k.clone(),T,A,P,S,B,zot(E)?null:E.clone(),zot(I)?null:I.clone(),zot(M)?null:M.clone(),zot(O)?null:O.clone(),j,L,_,Y,D,X,R,W,H,zot(F)?null:F.clone(),zot(V)?null:V.clone(),zot(N)?null:N.clone(),zot(G)?null:G.clone(),q,Q,U,K,Z,J,this.group,ee);return ve.cloneProps(i)},this.doDispose=function(e,t,o){return ve.icon&&ve.icon.dispose(),ve.rollIcon&&ve.rollIcon.dispose(),ve.waitIcon&&ve.waitIcon.dispose(),ve.rollWaitIcon&&ve.rollWaitIcon.dispose(),ve.toggleIcon&&ve.toggleIcon.dispose(),ve.rollToggleIcon&&ve.rollToggleIcon.dispose(),ve.icon=ve.rollIcon=ve.waitIcon=ve.rollWaitIcon=ve.toggleIcon=ve.rollToggleIcon=null,o||this.zimContainer_dispose(!0),!0}},e.extend(e.Button,e.Container,["clone","dispose"],"zimContainer",!1),e.Button.prototype.dispose=function(e){return this.doDispose(null,null,e)},e.CheckBox=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m){function z(){w=!w,C.setChecked(w),C.dispatchEvent("change")}var y,v="size, label, startChecked, color, backgroundColor, borderColor, borderWidth, corner, margin, indicatorType, indicatorColor, tap, style, group, inherit";if(y=zob(e.CheckBox,arguments,v,this))return y;z_d("56"),this.zimContainer_constructor(null,null,null,null,!1),this.type="CheckBox",this.group=f;var b=!1===p?{}:e.getStyle(this.type,this.group,m);zot(t)&&(t=null!=b.size?b.size:60),zot(o)&&(o=null!=b.label?b.label:null),zot(n)&&(n=null!=b.startChecked&&b.startChecked);var w=n;zot(r)&&(r=null!=b.color?b.color:"#111"),zot(a)&&(a=null!=b.backgroundColor?b.backgroundColor:"rgba(255,255,255,.8)"),zot(l)&&(l=null!=b.borderColor?b.borderColor:"#111"),zot(s)&&(s=null!=b.borderWidth?b.borderWidth:t/10),l<0||s<0?l=s=null:null!=l&&null==s&&(s=t/10),zot(c)&&(c=null!=b.corner?b.corner:0),"string"!=typeof o&&"number"!=typeof o||(o=new e.Label({text:o,size:5*t/6,color:r,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:p,group:this.group})),zot(u)&&(u=null!=b.margin?b.margin:t/5),"box"!=d&&"square"!=d&&"x"!=d&&(d=null!=b.indicatorType?b.indicatorType:"check"),zot(h)&&(h=null!=b.indicatorColor?b.indicatorColor:s>0?l:"black"),this.setBounds(-u,-u,t+2*u,t+2*u),zot(g)&&(g=null!=b.tap&&b.tap);var C=this;this.cursor="pointer";var x=new e.Rectangle(t,t,a,null,null,c),k=new e.Rectangle(5*t/7,5*t/7,"rgba(0,0,0,0)",l,s,c);k.x=t/7,k.y=t/7,this.addChild(x,k);var T=t;o&&(o.center(C),o.x=C.getBounds().width,this.label=o,this.setBounds(-u,-u,t+3*u+o.getBounds().width,Math.max(t+2*u,o.getBounds().height)),T=o.x+o.width);var A=new e.Shape({style:!1});A.graphics.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,T+2*u,this.getBounds().height),this.hitArea=A;var P=new e.Shape({style:!1}),S=P.graphics;"check"==d?S.f(h).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):"box"==d||"square"==d?S.f(h).dr(-35,-35,70,70):S.f(h).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");var B=95;P.setBounds(-B/2,-B/2,B,B);var E=t/(B+66);P.scaleX=P.scaleY=E,P.alpha=.9,P.x=t/2,P.y=t/2,w&&this.addChild(P),g?this.tap(z):this.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",z),Object.defineProperty(C,"checked",{get:function(){return w},set:function(e){C.setChecked(e)}}),this.toggle=function(e){zot(e)&&(e=!w),C.setChecked(e)},Object.defineProperty(C,"toggled",{get:function(){return w},set:function(e){C.setChecked(e)}}),Object.defineProperty(C,"text",{get:function(){return o?o.text:null},set:function(t){o&&(o.text=t,e.OPTIMIZE||!zns&&OPTIMIZE||!C.stage||C.stage.update())}}),Object.defineProperty(P,"indicatorColor",{get:function(){return h},set:function(o){w&&C.removeChild(P),P=new createjs.Shape,S=P.graphics,h=o,S.f(h).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),P.scaleX=P.scaleY=E,P.alpha=.9,P.x=t/2,P.y=t/2,w&&C.addChild(P),e.OPTIMIZE||!zns&&OPTIMIZE||!C.stage||C.stage.update()}}),Object.defineProperty(C,"indicator",{get:function(){return P},set:function(){zog("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(C,"enabled",{get:function(){return C._enabled},set:function(e){i(C,e)}}),this.setChecked=function(t){return zot(t)&&(t=!0),(w=t)?C.addChild(P):C.removeChild(P),e.OPTIMIZE||!zns&&OPTIMIZE||!C.stage||C.stage.update(),C},!1!==p&&e.styleTransforms(this,b),this.clone=function(){return C.cloneProps(new e.CheckBox(t,o?o.clone():"",n,r,a,l,s,c,u,d,h,g,p,this.group,m))}},e.extend(e.CheckBox,e.Container,"clone","zimContainer",!1),e.RadioButtons=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m){function z(e){var t=P.getChildIndex(e.target);d&&k.selectedIndex==t||(k.setSelected(t),k.dispatchEvent("change"))}function y(){for(var i,a,l=!1,s=o.length-1;s>=0;s--)(i=o[s]).selected&&!0===i.selected&&(l?i.selected="false":(l=!0,k.id=i.id));P.removeAllChildren(),k.buttons=[];var u=0;for(s=0;s<o.length;s++)"string"!=typeof(i=o[s])&&"number"!=typeof i||(i={selected:!1,label:new e.Label({text:i,size:5*t/6,color:null!=C.color?C.color:r,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:p,group:k.group})}),(i.label&&"string"==typeof i.label||"number"==typeof i.label)&&(i.label=new e.Label({text:i.label,size:null!=C.size?C.size:5*t/6,color:null!=C.color?C.color:r,valign:"center",style:p})),k.labels.push(i.label),i.index=s,o[s]=i,(a=v(i.selected,i.label)).type="RadioButton",a.obj=i,i.selected&&(x=a.obj),P.addChild(a),n?(a.y=u,u+=a.getBounds().height+c):(a.x=u,u+=a.getBounds().width+c)}function v(o,n){var r=new e.Container({style:!1});k.buttons.push(r),r.mouseChildren=!1,r.setBounds(-u,-u,t+2*u,t+2*u);var i=new e.Shape({style:!1}),c=i.graphics;c.f(a).dc(t/2,t/2,t/1.85),c.s(l).ss(s).dc(t/2,t/2,t/2-t/2/5),r.addChild(i);var d=r.check=new e.Circle(t/5.2,h,null,null,null,null,null,null,!1);k.indicators.push(d),d.mouseEnabled=!1,d.alpha=.95,d.regX=d.regY=-t/2;var g=t;n&&(r.addChild(n),n.x=r.getBounds().width,n.y=t/2,r.setBounds(-u,-u,t+2*u+n.getBounds().width,Math.max(t+2*u,n.getBounds().height)),g=n.x+n.width,r.text=n.text),o&&(r.addChild(d),k.label=n,k.label&&(k.text=n.text));var p=new e.Shape({style:!1});return(c=p.graphics).f("rgba(0,0,0,.01)").r(r.getBounds().x,r.getBounds().y,g+2*u,r.getBounds().height),r.hitArea=p,r}var b,w="size, buttons, vertical, color, backgroundColor, borderColor, borderWidth, spacing, margin, always, indicatorColor, selectedIndex, style, group, inherit";if(b=zob(e.RadioButtons,arguments,w,this))return b;z_d("57"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadioButtons",this.group=f;var C=!1===p?{}:e.getStyle(this.type,this.group,m);zot(t)&&(t=null!=C.size?C.size:60),t=Math.max(5,t),zot(o)&&(o=null!=C.buttons?C.buttons:["A","B","C"]),zot(n)&&(n=null==C.vertical||C.vertical),zot(r)&&(r=null!=C.color?C.color:"#111"),zot(a)&&(a=null!=C.backgroundColor?C.backgroundColor:"rgba(255,255,255,.8)"),zot(l)&&(l=null!=C.borderColor?C.borderColor:"#111"),zot(s)&&(s=null!=C.borderWidth?C.borderWidth:t/9),l<0||s<0?l=s=null:null!=l&&null==s&&(s=t/10),zot(c)&&(c=n?null!=C.spacing?C.spacing:.2*t:null!=C.spacing?C.spacing:t),zot(u)&&(u=null!=C.margin?C.margin:t/5),zot(h)&&(h=null!=C.indicatorColor?C.indicatorColor:s>0?l:"black");var x,k=this;if(this.cursor="pointer",this.labels=[],this.indicators=[],"string"==typeof o){var T=o;o=[];for(var A=0;A<T.length;A++)o.push({label:T[A]})}var P=new e.Container({style:!1});this.addChild(P),y();for(var S=0;S<P.numChildren;S++)P.getChildAt(S).on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",z);this.getBounds()||this.setBounds(0,0,t,t),this.setBounds(-u,-u,this.getBounds().width+2*u,this.getBounds().height),this.setSelected=function(t){if(zot(t)&&(t=-1),-1==t||P.getChildAt(t)){for(var o,n=0;n<P.numChildren;n++)(o=P.getChildAt(n)).removeChild(o.check);if(t>=0){o=P.getChildAt(t);var r=-2;x&&(r=x.index),x=o.obj}return-1==t||r==x.index?(x=null,k.id=null,k.label=null,k.text=""):(o.addChild(o.check),k.id=x.id,k.label=x.label,k.label&&(k.text=k.label.text)),e.OPTIMIZE||!zns&&OPTIMIZE||!k.stage||k.stage.update(),k}},Object.defineProperty(k,"selected",{get:function(){return x},set:function(){zog("ZIM RadioButton - selected is read only")}}),Object.defineProperty(k,"selectedIndex",{get:function(){return x?x.index:-1},set:function(e){var t=e;d&&k.selectedIndex==t||k.setSelected(t)}}),this._enabled=!0,Object.defineProperty(k,"enabled",{get:function(){return k._enabled},set:function(e){i(k,e)}}),
zot(g)&&(g=null!=C.selectedIndex?C.selectedIndex:0),k.selectedIndex=g,e.styleTransforms(this,C),this.clone=function(){for(var i=e.copy(o),f=0;f<i.length;f++)i[f].label=i[f].label.clone();return k.cloneProps(new e.RadioButtons(t,i,n,r,a,l,s,c,u,d,h,g,p,this.group,m))}},e.extend(e.RadioButtons,e.Container,"clone","zimContainer",!1),e.Toggle=function(o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k){function T(e){var t=E.indicator.x,o=b;if(!0===e&&(o=0),"rectangle"==c||"square"==c?(E.indicator.pos(.2*n,null,E.toggled),b>0&&E.indicator.animate({props:{x:t},from:!0,time:o})):(E.indicator.pos(.175*n,null,E.toggled),b>0&&E.indicator.animate({props:{x:t},from:!0,time:o})),E.background.color=E.toggled?h:l,E.text=E.toggled?E.label?E.label.text:"on":E.labelLeft?E.labelLeft.text:"off",E.zimAccessibility){var r="Toggle set to "+(E.toggled?E.label?E.label.text+".":"on.":E.labelLeft?E.labelLeft.text+".":"off.");setTimeout(function(){E.zimAccessibility.talk(r)},50)}}var A,P="width, height, label, startToggled, backgroundColor, margin, indicatorType, indicatorColor, tap, toggleBackgroundColor, color, borderColor, borderWidth, corner, indicatorCorner, shadowColor, shadowBlur, time, labelLeft, style, group, inherit";if(A=zob(e.Toggle,arguments,P,this))return A;z_d("57.5"),this.group=x;var S=!1===C?{}:e.getStyle("Toggle",this.group,k);zot(o)&&(o=null!=S.width?S.width:80),zot(n)&&(n=null!=S.height?S.height:50),this.zimContainer_constructor(o,n,null,null,!1),this.type="Toggle",zot(l)&&(l=null!=S.backgroundColor?S.backgroundColor:"#C60"),zot(s)&&(s=null!=S.margin?S.margin:10),zot(c)&&(c=null!=S.indicatorType?S.indicatorType:"circle"),zot(u)&&(u=null!=S.indicatorColor?S.indicatorColor:"#fff"),zot(h)&&(h=null!=S.toggleBackgroundColor?S.toggleBackgroundColor:"#F93"),zot(g)&&(g=null!=S.color?S.color:"#111"),zot(p)&&(p=null!=S.borderColor?S.borderColor:null),zot(f)&&(f=null!=S.borderWidth?S.borderWidth:null),p<0||f<0?p=f=null:null!=p&&null==f&&(f=1),zot(m)&&(m=null!=S.corner?S.corner:"circle"!=c?0:25),zot(z)&&(z=null!=S.indicatorCorner?S.indicatorCorner:0),zot(y)&&(y=null!=S.shadowColor?S.shadowColor:"rgba(0,0,0,.3)"),zot(v)&&(v=null!=S.shadowBlur?S.shadowBlur:14),zot(a)&&(a=null!=S.startToggled&&S.startToggled);var B=t(b);zot(b)&&(b=null!=S.time?S.time:"s"==B?.1:100);var E=this;E.cursor="pointer","string"!=typeof r&&"number"!=typeof r||(r=this.label=new e.Label({text:r,size:S.size||5*n/6,color:g,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),"string"!=typeof w&&"number"!=typeof w||(w=this.labelLeft=new e.Label({text:w,size:S.size||5*n/6,color:g,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),this.background=new e.Rectangle(o,n,l,p,f,m).addTo(this),this.indicator="rectangle"==c||"square"==c?new e.Rectangle(.65*n,.65*n,u,null,null,z).center(this.background).pos(.2*n,null,a):new e.Circle(.35*n,u).center(this.background).pos(.175*n,null,a),this.toggled=a,E.background.color=E.toggled?h:l,-1!=y&&v>0&&(this.background.shadow=new createjs.Shadow(y,3,3,v)),r&&(this.addChild(r),r.x=o+2+s+f,r.y=n/2,this.label=r,this.setBounds(-s,-s,o+3*s+f+r.getBounds().width,Math.max(n+2*s,r.getBounds().height))),w&&(this.addChild(w),w.x=0,E.background.x+=w.width+3+s+f,E.label.x+=w.width+3+s+f,w.y=n/2,this.labelLeft=w,this.setBounds(-s,-s,E.getBounds().width+w.width+3+s+f,E.getBounds().height)),this.expand(e.mobile()?20:10),this.tap(function(t){if(w){var n=E.localToGlobal(w.width+3+s+f+o/2,0);if(t.stageX/e.scaX<n.x-o/2&&!E.toggled||t.stageX/e.scaX>=n.x+o/2&&E.toggled)return}E.toggled=!E.toggled,T(),E.dispatchEvent("change")},e.mobile()?20:10),new e.Swipe(this,20,"s"==B?.2:200).on("swipe",function(e){0!=e.swipeX&&(1==e.swipeX&&E.toggled||(-1!=e.swipeX||E.toggled)&&(E.toggled=!E.toggled,T(),E.dispatchEvent("change")))}),Object.defineProperty(E,"textLeft",{get:function(){return w?w.text:null},set:function(t){w&&(w.text=t,e.OPTIMIZE||!zns&&OPTIMIZE||!E.stage||E.stage.update())}}),E.toggle=function(e,t){var o=E.toggled;return zot(e)&&(e=!0),E.toggled=e,o!=E.toggled&&T(t),E},E.text=E.toggled?E.label?E.label.text:"on":E.labelLeft?E.labelLeft.text:"off",this._enabled=!0,Object.defineProperty(E,"enabled",{get:function(){return E._enabled},set:function(e){i(E,e)}}),!1!==C&&e.styleTransforms(this,S),this.clone=function(){return E.cloneProps(new e.Toggle(o,n,r?r.clone():"",a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w?w.clone():"",C,this.group,k))}},e.extend(e.Toggle,e.Container,"clone","zimContainer",!1),e.Tip=function(o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y,D,X,R,W,H){var F,V="text, align, valign, margin, marginH, marginV, outside, target, size, font, color, rollColor, shadowColor, shadowBlur, textAlign, textValign, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingHorizontal, paddingVertical, shiftHorizontal, shiftVertical, rollPersist, labelWidth, labelHeight, maxSize, bold, italic, variant, style, group, inherit";if(F=zob(e.Tip,arguments,V,this))return F;z_d("57.6"),this.group=W;var N=!1===R?{}:e.getStyle("Tip",this.group,H);zot(o)&&(o=null!=N.text?N.text:"Here's a tip!"),zot(i)&&(i=null!=N.margin?N.margin:40),zot(a)&&(a=null!=N.marginH?N.marginH:i),zot(l)&&(l=null!=N.marginV?N.marginV:i),zot(n)&&(n=null!=N.align?N.align:"right"),zot(r)&&(r=null!=N.valign?N.valign:"bottom"),zot(s)&&(s=null!=N.outside&&N.outside),zot(x)&&(x=null!=N.backgroundColor?N.backgroundColor:e.blue),zot(h)&&(h=null!=N.color?N.color:e.white),zot(A)&&(A=null!=N.corner?N.corner:25),zot(A)&&(A=null!=N.corner?N.corner:25),zot(A)&&(A=null!=N.corner?N.corner:25),zot(B)&&(B=null!=N.paddingHorizontal?N.paddingHorizontal:14+(Array.isArray(A)?A[0]:A)),(zot(p)||"ignore"==p)&&(p=null!=N.shadowColor&&"ignore"!=p?N.shadowColor:"rgba(0,0,0,.3)"),(zot(f)||"ignore"==f)&&(f=null!=N.shadowBlur&&"ignore"!=f?N.shadowBlur:1),this.zimLabel_constructor(o,u,d,h,g,null,null,m,z,Y,D,X,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,R,W,e.copy(N)),this.type="Tip",s&&(a=-a,l=-l);var G=this;G.align=n,G.valign=r,this.background.sha(p,3,5,f),this.show=function(o,n){function r(){if(c.boundsToGlobal)var t=c.boundsToGlobal();else t=c.getBounds();var o=new e.Container(t.x,t.y,t.width,t.height);o.zimTemp=!0,o.loc(0,0,c.stage),"center"!=G.align&&"middle"!=G.align&&"center"!=G.valign&&"middle"!=G.valign||G.center(o),G.pos("center"==G.align||"middle"==G.align?null:a,"center"==G.valign||"middle"==G.valign?null:l,"right"==G.align,"bottom"==G.valign,o),s&&("right"==G.align?G.x+=G.width:"left"==G.align&&(G.x-=G.width),"bottom"==G.valign?G.y+=G.height:"top"==G.valign&&(G.y-=G.height)),G.addTo(o.stage),o.zimTemp&&o.removeFrom&&(o.removeFrom(),o=null),o=G.stage,G.timeoutID&&G.timeoutID.clear(),G.timeoutID=e.timeout(n,function(){G.hide(),o.stage.update()}),G.upID&&o.stage.off("stagemouseup",G.upID),G.upID=o.stage.on("stagemouseup",function(){G.hide(),o.stage&&o.stage.update()}),o.stage&&o.stage.update()}var i=t(n);if(zot(o)&&(o=null!=N.delay?N.delay:0),zot(n)&&(n=null!=N.time?N.time:"s"==i?2:2e3),zot(c)){if(!zdf)return G;c=zdf.stage}else{if(!c.getBounds)return G;if(zot(c.stage))return zog("zim display - Waiter(): The container must have a stage property"),G}return o>0?G.showID=e.timeout(o,r):r(),G},this.hide=function(){return this.removeFrom(),this.timeoutID&&this.timeoutID.clear(),this.upID&&c.stage&&c.stage.off("stagemouseup",this.downID),G},this.clear=function(){G.showID&&G.showID.clear(),G.hide()},!1!==R&&e.styleTransforms(this,N),this.clone=function(){return G.cloneProps(new e.Tip(o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,R,this.group,H))}},e.extend(e.Tip,e.Label,"clone","zimLabel",!1),e.Panel=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T){function A(){"right"==f?_.center(n).pos(Math.max(d[0]/2,10),null,!0):"center"==f||"middle"==f?_.center(n):_.center(n).loc(Math.max(d[0]/2,10)),_.mov(0,2)}var P,S="width, height, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, close, closeColor, arrow, align, shadowColor, shadowBlur, draggable, boundary, extraButton, collapse, collapsed, style, group, inherit";if(P=zob(e.Panel,arguments,S,this))return P;z_d("57.7"),this.group=k;var B=!1===x?{}:e.getStyle("Panel",this.group,T);zot(t)&&(t=null!=B.width?B.width:250),zot(o)&&(o=null!=B.height?B.height:300),this.zimContainer_constructor(t,o,null,null,!1),this.type="Panel",zot(n)&&(n=null!=B.titleBar?B.titleBar:"PANEL"),zot(r)&&(r=null!=B.titleBarColor?B.titleBarColor:"#fff"),zot(a)&&(a=null!=B.titleBarBackgroundColor?B.titleBarBackgroundColor:"#555"),zot(l)&&(l=null!=B.titleBarHeight?B.titleBarHeight:30),zot(s)&&(s=null!=B.backgroundColor?B.backgroundColor:"#eee"),zot(c)&&(c=null!=B.borderColor?B.borderColor:"#888"),zot(u)&&(u=null!=B.borderWidth?B.borderWidth:null),c<0||u<0?c=u=null:null!=c&&null==u&&(u=1),zot(d)&&(d=null!=B.corner?B.corner:5),zot(f)&&(f=null!=B.align?B.align:"left"),zot(m)&&(m=null!=B.shadowColor?B.shadowColor:"rgba(0,0,0,.3)"),zot(z)&&(z=null!=B.shadowBlur?B.shadowBlur:14),zot(y)&&(y=null!=B.draggable&&B.draggable),zot(v)&&(v=null!=B.boundary?B.boundary:null),zot(h)&&(h=null!=B.close&&B.close),zot(g)&&(g=null!=B.closeColor?B.closeColor:zot(r)?"#555":r),zot(p)&&(p=null!=B.arrow?B.arrow:e.vee(n)),Array.isArray(d)||(d=[d,d,d,d]),zot(w)&&(w=null!=B.collapse&&B.collapse),zot(C)&&(C=null!=B.collapsed&&B.collapsed);var E=this,I=this.background=new e.Rectangle(t,o,s,c,u,d).addTo(this);-1!=m&&z>0&&(this.background.shadow=new createjs.Shadow(m,3,3,z));var M=n,O=e.Pick.choose(M),j=e.Pick.choose(r),L=e.Pick.choose(a);e.Pick.choose(s),e.Pick.choose(c),"string"==typeof O&&(O=new e.Label({text:O,color:j,size:null!=B.size?B.size:20,bold:null!=B.bold&&B.bold,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var _=E.titleBarLabel=O;zot(L)&&(L="rgba(0,0,0,.2)"),E.titleBar=n=new e.Container(t,l,null,null,!1).loc(0,0,E);var Y=E.titleBar.backing=new e.Rectangle(t+u,l,L,null,null,[.95*d[0],.95*d[1],0,0],!0,null,!1).center(n);if(n&&A(),E.label=O,E.text=O.text,h&&((h=E.close=new e.Shape(-40,-40,80,80,null,!1)).graphics.f(g).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),n?(h.centerReg(n).scaleTo(n,null,50),"right"==f?h.pos(Math.max(d[1]/2,15)):h.pos(Math.max(d[1]/2,15),null,!0)):h.addTo(E).sca(.3).mov(t/2-h.width-3,-o/2+h.height),h.expand(40),h.cursor="pointer",h.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){var e=E.stage;E.removeFrom(),E.dispatchEvent("close"),e.update()})),w&&(C&&(E.collapsed=!0),E.collapseEvent=E.titleBar.on("dblclick",function(){C=!C,E.collapsed=C})),this.nextPanel=function(t,o){var n=zot(t)||zot(M.array)?e.Pick.choose(M):M.array[t],i=zot(t)||zot(r.array)?e.Pick.choose(r):r.array[t],l=zot(t)||zot(a.array)?e.Pick.choose(a):a.array[t],u=zot(t)||zot(s.array)?e.Pick.choose(s):s.array[t],d=zot(t)||zot(c.array)?e.Pick.choose(c):c.array[t];"string"==typeof n&&(n=new e.Label({text:n,color:i,size:null!=B.size?B.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),E.label=n,E.text=n.text,_.removeFrom(),_=E.titleBarLabel=n,A(),Y.color=l,E.background.color=u,E.background.borderColor=d,o&&E.dispatchEvent("change"),!OPTIMIZE&&E.stage&&E.stage.update()},y&&(n.cursor="pointer",n.on("mousedown",function(){E.drag({rect:v,currentTarget:!0})}),n.on("pressup",function(){E.noDrag(!1)})),p>0){var D=h?h.width+15:0,X=E.arrow=new e.Shape(-20,-20,40,40,null,!1);X.graphics.f(r).p("AiJieIETCeIkTCfg"),X.centerReg(n).scaleTo(n,null,70).alp(.8).hov(1).expand(),"right"==f?X.pos(Math.max(d[1]/2,10)+D):X.pos(Math.max(d[1]/2,10)+D,null,!0),X.cursor="pointer",X.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){E.nextPanel(),E.dispatchEvent("change")})}zot(b)||(b=E.extraButton=new e.Button({label:"R",width:50,height:50,corner:5,group:"PanelExtra"}).scaleTo(n,null,70).centerReg(n).expand(),"left"==f?b.pos(p>0?X.x-X.width-25:Math.max(d[1]/2,10)):b.pos(p>0&&"center"!=f?X.x+X.width:Math.max(d[1]/2,10))),E.overlay=new e.Rectangle(t,o,null,null,null,d).alp(.3),Object.defineProperty(E,"panelHeight",{get:function(){return E.background.height},set:function(o){I.removeFrom(),I=this.background=new e.Rectangle(t,o,s,c,u,d).addTo(this).bot(),-1!=m&&z>0&&(this.background.shadow=new createjs.Shadow(m,3,3,z)),E.setBounds(t,o),!OPTIMIZE&&E.stage&&E.stage.update()}}),Object.defineProperty(E,"collapsed",{get:function(){return C},set:function(e){(C=e)?E.setMask(E.titleBar.backing,!0):E.setMask(null),E.stage&&E.stage.update()}}),this._enabled=!0,Object.defineProperty(E,"enabled",{get:function(){return E._enabled},set:function(e){i(E,e),e?E.overlay.removeFrom():E.overlay.addTo(E),!OPTIMIZE&&E.stage&&E.stage.update()}}),!1!==x&&e.styleTransforms(this,B),this.clone=function(){return E.cloneProps(new e.Toggle(t,o,n?n.clone():"",r,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,this.group,T))},this.doDispose=function(e,t,o){return w&&this.titleBar.off("dblclick",this.collapseEvent),o||this.zimContainer_dispose(!0),!0}},e.extend(e.Panel,e.Container,["clone","dispose"],"zimContainer",!1),e.Panel.prototype.dispose=function(e){return this.doDispose(null,null,e)},e.Pane=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S){function B(e){E(),D.container.stage.update(),D.dispatchEvent("close"),e.stopImmediatePropagation()}function E(){function t(){var t;D.container.removeChild(D);for(var o=0;o<D.numChildren;o++)if("TextArea"==(t=D.getChildAt(o)).type||"Loader"==t.type||"Tag"==t.type){var n={obj:t,depth:D.getChildIndex(t)};F.add(t,n)}for(o=D.numChildren-1;o>=0;o--)"TextArea"!=(t=D.getChildAt(o)).type&&"Loader"!=t.type&&"Tag"!=t.type||D.removeChild(t);if(e.OPTIMIZE||!zns&&OPTIMIZE||D.container.stage.update(),s&&(isNaN(D.resetX)||(D.x=D.resetX),isNaN(D.resetY)||(D.y=D.resetY)),D.zimAccessibility){var r=D.zimAccessibility;r.resize(D),H?H.focus():D.zimTabTag.nextSibling.focus(),setTimeout(function(){r.talk("Pane has been closed.")},50)}}y>0?D.animate({obj:{alpha:0},time:y,call:function(){t(),D.dispatchEvent("fadedout")}}):t()}function I(e,n){return{x:e=Math.max(t/2,Math.min(D.container.getBounds().width-t/2,e)),y:n=Math.max(o/2,Math.min(D.container.getBounds().height-o/2,n))}}var M,O="width, height, label, backgroundColor, color, draggable, resets, modal, corner, backdropColor, shadowColor, shadowBlur, center, displayClose, backdropClose, backing, fadeTime, container, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, close, closeColor, style, group, inherit";if(M=zob(e.Pane,arguments,O,this))return M;z_d("58"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pane";var j="zim display - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(zot(v)){if(!zdf)return void zog(j);v=zdf.stage}else{if(!v.getBounds)return void zog(j);if(zot(v.getStage))return void zog("zim display - Pane(): The container must have a stage property")}this.group=P;var L=!1===A?{}:e.getStyle(this.type,this.group,S);zot(t)&&(t=null!=L.width?L.width:200),zot(o)&&(o=null!=L.height?L.height:200),zot(n)&&(n=null!=L.label?L.label:null),"string"!=typeof n&&"number"!=typeof n||(n=new e.Label({text:n,size:null!=L.size?L.size:40,align:null!=L.align?L.align:"center",valign:null!=L.valign?L.valign:"center",color:null!=L.color?L.color:a,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),zot(r)&&(r=null!=L.backgroundColor?L.backgroundColor:"white"),zot(l)&&(l=null!=L.draggable&&L.draggable),zot(s)&&(s=null==L.resets||L.resets),zot(c)&&(c=null==L.modal||L.modal),zot(u)&&(u=null!=L.corner?L.corner:20),zot(b)&&(b=null!=L.titleBar?L.titleBar:null),zot(w)&&(w=null!=L.titleBarColor?L.titleBarColor:null),zot(C)&&(C=null!=L.titleBarBackgroundColor?L.titleBarBackgroundColor:null),zot(x)&&(x=null!=L.titleBarHeight?L.titleBarHeight:null),zot(d)&&(d=null!=L.backdropColor?L.backdropColor:"rgba(0,0,0,.2)"),zot(h)&&(h=null!=L.shadowColor?L.shadowColor:"rgba(0,0,0,.3)"),zot(g)&&(g=null!=L.shadowBlur?L.shadowBlur:20),zot(p)&&(p=null==L.center||L.center),zot(f)&&(f=null==L.displayClose||L.displayClose),l&&(f=!1),zot(m)&&(m=null==L.backdropClose||L.backdropClose),zot(y)&&(y=null!=L.fadeTime?L.fadeTime:0),zot(k)&&(k=null!=L.close&&L.close),zot(T)&&(T=null!=L.closeColor?L.closeColor:"#555");var _=this.backdrop=new e.Shape({style:!1});_.type="CreateJS_Shape";var Y=_.graphics;Y.f(d),Y.drawRect(-5e3,-5e3,1e4,1e4),this.setBounds(-t/2,-o/2,t,o);var D=this;D.container=v,_.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",m?B:function(e){e.stopImmediatePropagation()});var X,R,W,H,F=new e.Dictionary(!0);if(_.on("mousedown",function(e){e.stopImmediatePropagation()}),c&&this.addChild(_),zot(z))X=this.backing=this.display=new e.Rectangle({width:t,height:o,color:r,corner:u,style:!1});else{if("Pattern"==z.type){var V=z;X=new e.Rectangle(t,o,r,null,null,u,null,null,!1),V.centerReg(X),V.setMask(X.shape)}else X=z;D.display=D.backing=X}if(f&&(X.cursor="pointer",X.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",B)),-1!=h&&g>0&&(X.shadow=new createjs.Shadow(h,8,8,g)),X.on("click",function(e){e.stopImmediatePropagation()}),this.resetX,this.resetY,l&&(X.cursor="pointer",X.on("mousedown",function(t){t.target.stage,isNaN(D.resetX)&&(D.resetX=D.x),isNaN(D.resetY)&&(D.resetY=D.y),R=t.stageX/e.scaX-D.x,W=t.stageY/e.scaY-D.y,X.cursor="pointer"}),X.on("pressmove",function(t){var o,n=I(t.stageX/e.scaX-R,t.stageY/e.scaY-W);D.x=n.x,D.y=n.y;for(var r=0;r<D.numChildren;r++)"TextArea"!=(o=D.getChildAt(r)).type&&"Loader"!=o.type&&"Tag"!=o.type||o.resize();D.stage.update()}),this.on("pressup",function(){X.cursor="pointer",D.stage&&D.stage.update()})),X.centerReg(this),n&&(this.addChild(n),e.center(n,this),this.label=n,this.text=n.text,n.mouseEnabled=!1),!zot(b)){"string"==typeof b&&(b=new e.Label(b,null,null,w));var N=D.titleBarLabel=b;zot(x)&&(x=1.5*N.height),zot(w)&&(w="black"),zot(C)&&(C="rgba(0,0,0,.2)"),D.titleBar=b=new e.Container(t,x,null,null,!1).centerReg(D).mov(0,-o/2+x/2),b.mouseEnabled=!1,b.mouseChildren=!1,D.titleBar.backing=new e.Rectangle(t,x,C,null,null,[.95*u,.95*u,0,0],null,null,!1).addTo(b),N.center(b).pos({x:Math.max(u/2,10),reg:!0})}k&&((k=D.close=new e.Shape(-40,-40,80,80,null,!1)).graphics.f(T).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),b?k.addTo(D).scaleTo(b,null,50).mov(t/2-Math.max(u/2,10)-k.width/2,-o/2+x/2).expand(40):k.addTo(D).sca(.3).mov(t/2-k.width-3,-o/2+k.height).expand(40),k.cursor="pointer",k.expand(),k.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",B)),Object.defineProperty(D,"text",{get:function(){return" "==n.text?"":n.text},set:function(e){n.text=e}}),this._enabled=!0,Object.defineProperty(D,"enabled",{get:function(){return D._enabled},set:function(e){i(D,e)}}),this.hide=function(e){return E(),D.toggled=!1,e&&D.dispatchEvent("close"),D},this.show=function(){p&&isNaN(D.resetX)&&(D.x=D.container.getBounds().width/2,D.y=D.container.getBounds().height/2),D.container.addChild(D);for(var e=0;e<F.length;e++)D.addChildAt(F.values[e].obj,F.values[e].depth);if(y>0?(D.alpha=0,D.animate({props:{alpha:1},time:y,call:function(){D.dispatchEvent("fadedin")}})):D.container.stage&&D.container.stage.update(),D.zimAccessibility){var t=D.zimAccessibility;setTimeout(function(){t.activatedObject&&(H=t.activatedObject.zimTabTag)},50),t.resize(D),t.tabIndex=D.zimTabIndex}return D.toggled=!0,D},this.toggle=function(e){return!0===e?D.show():!1===e?D.hide():D.container.contains(D)?D.hide():D.show(),D},!1!==A&&e.styleTransforms(this,L),this.clone=function(){var i=n.x,v=n.y,P=D.cloneProps(new e.Pane(t,o,n.clone(),r,a,l,s,c,u,d,h,g,p,f,m,zot(z)?z.clone():null,y,D.container,b,w,C,x,k,T,A,this.group,S));return P.label.x=i,P.label.y=v,P}},e.extend(e.Pane,e.Container,"clone","zimContainer",!1),e.Window=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y,D,X,R,W,H){function F(){oe.setBounds(0,0,t,o),ne.graphics.c().f(n).rc(0,0,t,o,ce,ce,s,s),-1!=w&&C>0&&(ne.shadow=new createjs.Shadow(w,4,4,C)),a>0&&(s?se.graphics.c().s(r).ss(a,"square","miter").rc(0,0,t,o,ce,ce,s,s):se.graphics.c().s(r).ss(a,"square","miter").dr(0,0,t,o)),zot(Te)||(Te=P.backing.widthOnly=oe.width,oe.setBounds(0,-E,oe.width,o+E)),oe.close&&(P?j.pos({x:t-Math.max(s/2,10)-j.width/2,y:E/2,reg:!0}):j.pos(Math.max(s/2,10)/2,j.height/2,!0,!1,oe)),oe.fullSize&&(Y.pos({x:t-Math.max(s/2,10)-Y.width/2,y:E/2,reg:!0}),oe.close&&Y.mov(-j.width-10))}function V(e){"right"==e.align?(e.x=x,e.resize(oe.width-(ge?ve.size+2*ve.spacing:x)-2*x)):("center"==e.align||e.align,e.resize(oe.width-(ge?ve.size+2*ve.spacing:0)-2*x)),e.alpha=e.wrapperLastAlpha}function N(t){zot(Oe)&&(Oe=oe.stage||zimDefaultFrame.stage),zot(t)&&(t=!0),t?e.dragBoundary(ae,new createjs.Rectangle(0,0,he?-oe.scrollXMax:0,ge?-oe.scrollYMax:0)):e.dragBoundary(ae,new createjs.Rectangle(-1e3,-1e3,Oe.width+2e3,Oe.height+2e3))}function G(){Ue=ae.y,A&&Ke.immediate(Ue),u&&q()}function q(){oe.dispatchEvent("scrolling"),le&&(le.x=-ae.x,le.y=-ae.y),he&&u&&(be.x=ue.convert(ae.x)),ge&&u&&(Ce.y=de.convert(ae.y))}function Q(t){zot(t)&&(t=100),K(oe),c&&setTimeout(function(){ae&&(e.drag({obj:ae,currentTarget:!0,localBounds:!0,slide:z,slideDamp:y,slideSnap:!((!f||!0!==c&&"auto"!=c&&"horizontal"!=c)&&(!m||!0!==c&&"auto"!=c&&"vertical"!=c))&&v}),ae.removeAllEventListeners("slidestart"),ae.on("slidestart",function(){oe.dispatchEvent("slidestart")}),ae.removeAllEventListeners("slidestop"),ae.on("slidestop",function(){oe.dispatchEvent("slidestop")}),ae.getBounds()&&ae.getBounds().width>0&&N())},t)}function U(){e.Ticker.remove(G),Le=!1,he&&p&&u&&e.animate(be,{alpha:0},ve.fadeTime),ge&&p&&u&&e.animate(Ce,{alpha:0},ve.fadeTime)}function K(t){A&&!Ze&&t.stage&&(Ze=!0,Ke=new e.Damp(oe.scrollY,A),e.Ticker.add(function(){Le||zot(Ue)||(oe.scrollY=Ke.convert(Ue))},t.stage))}var Z,J="width, height, backgroundColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, slide, slideDamp, slideSnap, interactive, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, cancelCurrentDrag, fullSize, fullSizeColor, resizeHandle, style, group, inherit";if(Z=zob(e.Window,arguments,J,this))return Z;z_d("58.1"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Window",this.group=W;var $=!1===R?{}:e.getStyle(this.type,this.group,H);zot(t)&&(t=null!=$.width?$.width:300),zot(o)&&(o=null!=$.height?$.height:200),zot(n)&&(n=null!=$.backgroundColor?$.backgroundColor:"#333");var ee=r,te=a;zot(r)&&(r=null!=$.borderColor?$.borderColor:"#999"),zot(a)&&(a=null!=$.borderWidth?$.borderWidth:1),zot(l)&&(l=null!=$.padding?$.padding:0),zot(s)&&(s=null!=$.corner?$.corner:0),zot(c)&&(c=null==$.swipe||$.swipe),zot(u)&&(u=null==$.scrollBarActive||$.scrollBarActive),zot(d)&&(d=null!=$.scrollBarDrag&&$.scrollBarDrag),zot(h)&&(h=null!=$.scrollBarColor?$.scrollBarColor:r),zot(g)&&(g=null!=$.scrollBarAlpha?$.scrollBarAlpha:.3),zot(p)&&(p=null==$.scrollBarFade||$.scrollBarFade),zot(f)&&(f=null==$.scrollBarH||$.scrollBarH),zot(m)&&(m=null==$.scrollBarV||$.scrollBarV),d&&(p=null!=$.scrollBarFade&&$.scrollBarFade),zot(z)&&(z=null==$.slide||$.slide),zot(y)&&(y=null!=$.slideDamp?$.slideDamp:.6),zot(v)&&(v=null!=$.slideSnap?$.slideSnap:"vertical"),zot(b)&&(b=null==$.interactive||$.interactive),zot(w)&&(w=null!=$.shadowColor?$.shadowColor:"rgba(0,0,0,.3)"),zot(C)&&(C=null!=$.shadowBlur?$.shadowBlur:20),zot(k)&&(k=null!=$.paddingVertical?$.paddingVertical:l),zot(x)&&(x=null!=$.paddingHorizontal?$.paddingHorizontal:l),zot(T)&&(T=null==$.scrollWheel||$.scrollWheel),zot(P)&&(P=null!=$.titleBar?$.titleBar:null),zot(S)&&(S=null!=$.titleBarColor?$.titleBarColor:null),zot(B)&&(B=null!=$.titleBarBackgroundColor?$.titleBarBackgroundColor:null),zot(E)&&(E=null!=$.titleBarHeight?$.titleBarHeight:null),zot(I)&&(I=null!=$.draggable?$.draggable:null),zot(M)&&(M=null!=$.boundary?$.boundary:null),zot(O)&&(O=null!=$.onTop?$.onTop:null),zot(j)&&(j=null!=$.close?$.close:null),zot(L)&&(L=null!=$.closeColor?$.closeColor:null),zot(_)&&(_=null!=$.cancelCurrentDrag&&$.cancelCurrentDrag),zot(Y)&&(Y=null!=$.fullSize?$.fullSize:null),zot(D)&&(D=null!=$.fullSizeColor?$.fullSizeColor:null),zot(X)&&(X=null!=$.resizeHandle?$.resizeHandle:null),!1===P&&(P=null),zot(P)||(zot(E)&&(E=30),o-=E);var oe=this;this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var ne=this.backing=new e.Shape({style:!1});this.addChild(ne);var re=new createjs.Shape;re.type="WindowBacking";var ie=re.graphics;this.addChild(re);var ae=this.content=new e.Container({style:!1});if(this.addChild(ae),ae.mask=re,!b)var le=new createjs.Shape;if(a>0){var se=new createjs.Shape;this.addChild(se)}var ce=P?0:s;F();var ue,de,he,ge,pe,fe,me,ze,ye,ve=this.scrollBar={};if(ve.color=h,ve.size=6,ve.minSize=2*ve.size,ve.spacing=3.5+a/2,ve.margin=0,ve.corner=ve.size/2,ve.showTime=.5,ve.fadeTime=3,u){var be=ve.horizontal=new e.Shape({style:!1}),we=be.graphics;be.alpha=g,this.addChild(be),d&&be.drag({localBounds:!0});var Ce=ve.vertical=new e.Shape({style:!1}),xe=Ce.graphics;Ce.alpha=g,this.addChild(Ce),d&&Ce.drag({localBounds:!0})}if(this.update=function(){u&&(we.clear(),xe.clear()),pe=u?ve.size+2*ve.spacing:0,fe=ae.getBounds()?ae.getBounds().width:0,me=ae.getBounds()?ae.getBounds().height:0,he=f&&fe>t-x&&(u||!0===c||"auto"==c||"horizontal"==c),ge=m&&me>o-k&&(u||!0===c||"auto"==c||"vertical"==c),oe.scrollXMax=fe+2*x-t+(ge?pe+ve.margin:0),oe.scrollYMax=me+2*k-o+(he?pe+ve.margin:0),ie.clear();var n=a/2,r=a/2,i=t-(ge&&u?ve.size+2*ve.spacing:0)-(ge?0:a),l=o-(he&&u?ve.size+2*ve.spacing:0)-(he?0:a);ie.f("rgba(0,0,0,0)").rc(n,r,i,l,ce,ce,ge&&u?0:s,he&&u?0:s),re.setBounds(oe.getBounds().x,oe.getBounds().y,oe.getBounds().width,oe.getBounds().height),e.expand(re,0),b||(le.graphics.c().f("red").dr(n,r,i,l),ae.hitArea=le);var h,g=Math.max(s,Math.min(ve.corner,ve.spacing)),p=g+a/2,z=g+(ge?pe:0)+a/2,y=g+a/2,v=g+(he?pe:0)+a/2;if(he&&u&&(h=Math.max(ve.minSize,(t-p-z)*(t-p-z)/(fe+x+ve.margin)),we.f(ve.color).rr(0,0,h,ve.size,ve.corner),be.x=p,be.y=o-ve.size-ve.spacing,ue=new e.Proportion(-oe.scrollXMax,0,p,t-h-z,-1),d)){be.setBounds(0,0,h,ve.size);var w=new createjs.Rectangle(p,be.y,t-h-p-z,0);be.dragBoundary(w),be.proportion=new e.Proportion(w.x,w.x+w.width,0,-oe.scrollXMax),be.off("pressmove",ze),ze=be.on("pressmove",function(){oe.dispatchEvent("scrolling"),le&&(le.x=-ae.x,le.y=-ae.y),ae.x=be.proportion.convert(be.x)})}ge&&u&&(h=Math.max(ve.minSize,(o-y-v)*(o-y-v)/(me+k+ve.margin)),xe.f(ve.color).rr(0,0,ve.size,h,ve.corner),Ce.x=t-ve.size-ve.spacing,Ce.y=y,de=new e.Proportion(-oe.scrollYMax,0,y,o-h-v,-1),d)&&(Ce.setBounds(0,0,ve.size,h),w=new createjs.Rectangle(Ce.x,y,0,o-h-y-v),Ce.dragBoundary(w),Ce.proportion=new e.Proportion(w.y,w.y+w.height,0,-oe.scrollYMax),Ce.off("pressmove",ye),ye=Ce.on("pressmove",function(){oe.dispatchEvent("scrolling"),le&&(le.x=-ae.x,le.y=-ae.y),Ue=ae.y=Ce.proportion.convert(Ce.y)})),q(),clearTimeout(oe.d2Timeout),oe.d2Timeout=setTimeout(function(){be&&be.proportion&&(ae.x=be.proportion.convert(be.x)),Ce&&Ce.proportion&&(ae.y=Ce.proportion.convert(Ce.y))},50),clearTimeout(oe.dTimeout),oe.dTimeout=setTimeout(function(){N()},300),N()},this.resize=function(e,n){zot(e)&&(e=t),zot(n)&&(n=o);var r=20;P&&(r=ke.x+ke.width+10),e<r&&(e=r),n<20&&(n=20),t=e,o=n,F();for(var i=0;i<ae.numChildren;i++){var a=ae.getChildAt(i);"Wrapper"==a.type&&V(a)}return oe.update(),Ue=ae.y,A&&Ke.immediate(Ue),oe},!zot(P)){zot(I)&&(I=!0),"string"==typeof P&&(P=new e.Label({text:P,color:S,size:null!=$.size?$.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var ke=oe.titleBarLabel=P;zot(B)&&(B="rgba(0,0,0,.2)"),oe.titleBar=P=new e.Container(t,E,null,null,!1).centerReg(oe).mov(0,-o/2-E/2);var Te=oe.titleBar.backing=new e.Rectangle(t+a,E,B,null,null,[.95*s,.95*s,0,0],!0,null,!1).center(P);ke.center(P).pos({x:Math.max(s/2,Math.max(10,l)),reg:!0}),oe.regX=0,oe.regY=-E,oe.setBounds(0,-E,t,o+E),I?(P.cursor="pointer",P.on("mousedown",function(){oe.drag({rect:M,currentTarget:!0,onTop:O})}),P.on("pressup",function(){oe.noDrag(!1)})):P.on("mousedown",function(){})}if(j&&(zot(L)&&(L="#555"),(j=oe.close=new e.Shape(-40,-40,80,80,null,!1)).graphics.f(L).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),P?j.centerReg(oe).scaleTo(P,null,50).pos({x:t-Math.max(s/2,10)-j.width/2,y:E/2,reg:!0}).expand(40):j.sca(.3).pos(Math.max(s/2,10)/2,j.height/2,!0,!1,oe).expand(40),j.cursor="pointer",j.expand(),j.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){var e=oe.stage;oe.removeFrom(),oe.dispatchEvent("close"),e&&e.update()})),!zot(P)&&Y){zot(D)&&(D="#555"),Y=oe.fullSize=new e.Rectangle(80,80,e.faint,D,16);var Ae=(new e.Shape).s(D).ss(16).mt(-19.6,-20.6).lt(-19.6,-40).lt(40,-40).lt(40,20.7).lt(19.6,20.7).lt(19.6,40).lt(-40,40).lt(-40,-20.6).lt(-19.6,-20.6).lt(19.6,-20.6).lt(19.6,20.7).addTo(oe.fullSize).mov(40,40).alp(0);Y.centerReg(oe).scaleTo(P,null,42).pos({x:t-Math.max(s/2,10)-Y.width/2,y:E/2,reg:!0}).expand(40),oe.close&&Y.mov(-j.width-10),Y.cursor="pointer",Y.expand(),oe.fullCheck=!1;var Pe=t,Se=o,Be=oe.x,Ee=oe.y;Y.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){oe.fullCheck?(oe.resize(Pe,Se-P.height),oe.x=Be,oe.y=Ee,oe.fullCheck=!1,Ae.alpha=0,oe.fullSize.getChildAt(0).alpha=1):(Pe=oe.width,Se=oe.height,Be=oe.x,Ee=oe.y,oe.resize(oe.parent.width,oe.parent.height),oe.x=0,oe.y=0,oe.fullCheck=!0,Ae.alpha=1,oe.fullSize.getChildAt(0).alpha=.01),oe.stage&&oe.stage.update()})}if(X){var Ie=oe.resizeHandle=new e.Rectangle(25,25,e.grey,e.white).alp(.01).centerReg().rot(45).hov(.5).loc(0,0,oe).mov(oe.width,oe.height-(oe.titleBar?oe.titleBar.height:0)).drag();function Me(){Ie.loc(0,0,oe).top().alp(.01).mov(oe.width,oe.height-(oe.titleBar?oe.titleBar.height:0))}Ie.on("pressmove",function(){oe.resize(Ie.x,Ie.y)}),Ie.on("pressup",Me),oe.titleBar&&oe.titleBar.on("pressup",Me)}this.add=function(e,t){if(K(e),e.getBounds())return t&&oe.removeAll(),ae.addChild(e),"Wrapper"==e.type&&(Ce.alpha=0,f=!1,e.wrapperLastAlpha=e.alpha,e.alpha=0,this.added(function(){V(e),oe.resize(),be.alpha=1,Ce.alpha=1})),0==e.x&&(e.x=x),0==e.y&&(e.y=k),oe.update(),oe;zog("SwipeBox.add() - please add content with bounds set")},this.remove=function(e){return ae.removeChild(e),oe.update(),oe},this.removeAll=function(){return ae.removeAllChildren(),oe.update(),oe};var Oe,je,Le=!1;if(c&&ae.on("mousedown",function(){Le||e.Ticker.add(G,ae.stage),Le=!0,he&&u&&p&&e.animate(be,{alpha:g},ve.showTime),ge&&u&&p&&e.animate(Ce,{alpha:g},ve.showTime)}),this.on("added",function(){Q(50)},null,!0),this.cancelCurrentDrag=function(){oe.content&&oe.content.noDrag(!1),setTimeout(function(){ae&&(e.drag({obj:ae,currentTarget:!0,localBounds:!0,slide:z,slideDamp:y,slideSnap:!((!f||!0!==c&&"auto"!=c&&"horizontal"!=c)&&(!m||!0!==c&&"auto"!=c&&"vertical"!=c))&&v}),ae.getBounds()&&ae.getBounds().width>0&&N())},300)},this.added(function(t){je=(Oe=t).on("stagemousemove",function(t){oe.windowMouseX=t.stageX/e.scaX,oe.windowMouseY=t.stageY/e.scaY})}),z?ae.on("slidestop",U):ae.on("mousedown",function(){ae.stage.on("stagemouseup",U,null,!0)}),_&&(oe.blurEvent=function(){oe.cancelCurrentDrag(),U()},document.window.addEventListener("blur",oe.blurEvent)),b){var _e,Ye,De;function Xe(){De=Date.now(),e.Ticker.add(Qe,ae.stage)}function Re(){qe||(oe.dispatchEvent("hoverout"),qe=!0),e.Ticker.remove(Qe)}ae.on("mousedown",function(t){Oe=t.target.stage,_e=t.stageX/e.scaX,Ye=Date.now()}),ae.on("click",function(t){Date.now()-Ye<600&&Math.abs(t.stageX/e.scaX-_e)<5&&(oe.contentMouse=ae.globalToLocal(t.stageX/e.scaX,t.stageY/e.scaY),oe.dispatchEvent("select"))}),ae.on("mouseover",Xe),ae.on("mouseout",Re);var We=0,He=0,Fe=0,Ve=0,Ne=300,Ge=2,qe=!1;function Qe(){if(!ae.stage)return qe||(oe.dispatchEvent("hoverout"),qe=!0),void e.Ticker.remove(Qe);Math.abs(We-oe.windowMouseX)>Ge||Math.abs(He-oe.windowMouseY)>Ge?(qe||(oe.dispatchEvent("hoverout"),qe=!0),De=Date.now(),We=oe.windowMouseX,He=oe.windowMouseY):Date.now()-De>Ne&&((Math.abs(Fe-oe.windowMouseX)>Ge||Math.abs(Ve-oe.windowMouseY)>Ge)&&(oe.contentMouse=ae.globalToLocal(oe.windowMouseX,oe.windowMouseY),
oe.dispatchEvent("hoverover"),Fe=oe.windowMouseX,Ve=oe.windowMouseY,qe=!1),De=Date.now())}}var Ue=oe.scrollY;oe.scrollWindow=function(t){if(ge&&oe.stage&&oe.hitTestPoint(oe.windowMouseX,oe.windowMouseY)&&oe.contains(oe.stage.getObjectUnderPoint(oe.windowMouseX*e.scaX,oe.windowMouseY*e.scaY))){zot(t)&&(t=event);var o=t.detail?-19*t.detail:t.wheelDelta;zot(o)&&(o=-19*t.deltaY),Ue+=o,Ue=Math.max(-oe.scrollYMax,Math.min(0,Ue)),A||(oe.scrollY=Ue,ae.stage.update())}},T&&(window.addEventListener("mousewheel",oe.scrollWindow),window.addEventListener("wheel",oe.scrollWindow),window.addEventListener("DOMMouseScroll",oe.scrollWindow));var Ke,Ze=!1;this._enabled=!0,Object.defineProperty(oe,"enabled",{get:function(){return oe._enabled},set:function(t){t?Q():(clearTimeout(oe.dTimeout),e.noDrag(ae)),i(oe,t)}}),this._scrollEnabled=!0,Object.defineProperty(oe,"scrollEnabled",{get:function(){return oe._scrollEnabled},set:function(t){t?(Q(),d&&(ze&&(be.mouseEnabled=!0),ye&&(Ce.mouseEnabled=!0)),window.addEventListener("mousewheel",oe.scrollWindow),window.addEventListener("wheel",oe.scrollWindow),window.addEventListener("DOMMouseScroll",oe.scrollWindow)):(clearTimeout(oe.dTimeout),e.noDrag(ae),d&&(ze&&(be.mouseEnabled=!1),ye&&(Ce.mouseEnabled=!1)),window.removeEventListener("mousewheel",oe.scrollWindow),window.removeEventListener("wheel",oe.scrollWindow),window.removeEventListener("DOMMouseScroll",oe.scrollWindow)),oe._scrollEnabled=t}}),Object.defineProperty(oe,"scrollX",{get:function(){return ae.x},set:function(e){ae.x=e,clearTimeout(oe.d2Timeout),ae.zimDragImmediate&&ae.zimDragImmediate(ae.x,ae.y),q()}}),Object.defineProperty(oe,"scrollY",{get:function(){return ae.y},set:function(e){ae.y=e,clearTimeout(oe.d2Timeout),ae.zimDragImmediate&&ae.zimDragImmediate(ae.x,ae.y),q()}}),!1!==R&&e.styleTransforms(this,$),this.clone=function(r){zot(r)&&(r=!0);var i=oe.cloneProps(new e.Window(t,o,n,ee,te,l,s,c,u,d,ve.color,g,p,f,m,z,y,v,b,w,C,x,k,P,S,B,E,I,M,O,j,L,_,Y,D,X,R,W,H));return r&&(oe.content.cloneChildren(i.content),i.update()),i},this.doDispose=function(t,o,n){return T&&(window.removeEventListener("mousewheel",oe.scrollWindow),window.removeEventListener("wheel",oe.scrollWindow),window.removeEventListener("DOMMouseScroll",oe.scrollWindow)),je&&Oe&&Oe.off("stagemousemove",je),oe.resizeHandle&&oe.resizeHandle.removeAllEventListeners(),oe.blurEvent&&document.window.removeEventListener("blur",oe.blurEvent),void 0!==Qe&&e.Ticker.remove(Qe),zot(G)||e.Ticker.remove(G),n||this.zimContainer_dispose(!0),ae=oe.content=null,!0}},e.extend(e.Window,e.Container,["clone","dispose"],"zimContainer",!1),e.Window.prototype.dispose=function(e){return this.doDispose(null,null,e)},e.Page=function(t,o,n,r,i,a,l,s,c,u,d){var h,g="width, height, color, color2, vertical, pattern, scalePattern, cache, style, group, inherit";if(h=zob(e.Page,arguments,g,this))return h;z_d("58.3"),this.group=u;var p=!1===c?{}:e.getStyle("Page",this.group,d);zot(t)&&(t=null!=p.width?p.width:zdf.width),zot(o)&&(o=null!=p.height?p.height:zdf.height),this.zimContainer_constructor(0,0,t,o,!1),this.type="Page";var f=this;zot(i)&&(i=null==p.vertical||p.vertical),zot(n)&&(n=null!=p.color?p.color:e.light),zot(r)&&(r=null!=p.color2?p.color2:null),zot(a)&&(a=null!=p.pattern?p.pattern:null),zot(l)&&(l=null!=p.scalePattern?p.scalePattern:"outside"),zot(s)&&(s=null!=p.cache&&p.cache),zot(r)||(n=new e.GradientColor([n,r],[0,1],0,0,i?0:t,i?o:0),r=null);var m=this.backing=new e.Rectangle({width:t,height:o,color:n,style:!1}).addTo(this);!zot(s)||zot(r)&&zot(a)||(s=!0),s&&m.cache(),zot(a)||(this.pattern=a.addTo(this),l&&a.scaleTo(this,100,100,l).center(this),s&&a.cache()),Object.defineProperty(f,"color",{get:function(){return n},set:function(e){zot(e)&&(e="black"),n=e,f.backing.color=e}}),!1!==c&&e.styleTransforms(this,p),this.clone=function(h){zot(h)&&(h=!1),n.type&&(r=null);var g=f.cloneProps(new e.Page(t,o,n,r,i,a,l,s,c,u,d));return h&&f.cloneChildren(g),g}},e.extend(e.Page,e.Container,["clone"],"zimContainer",!1),e.Layer=function(o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E){var I,M="width, height, titleBar, titleBarContainer, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, borderWidth, borderColor, dashed, transformObject, titleBarWidth, titleBarHeight, titleBarX, titleBarY, titleBarDraggable, close, closeColor, closeBackgroundColor, closeIndicatorColor, anchor, style, group, inherit";if(I=zob(e.Layer,arguments,M,this))return I;z_d("58.5"),this.group=B;var O=!1===S?{}:e.getStyle("Layer",this.group,E);zot(o)&&(o=null!=O.width?O.width:500),zot(n)&&(n=null!=O.height?O.height:500),this.zimContainer_constructor(0,0,o,n,!1),this.type="Layer";var j=this;j.distX=40,j.distY=0,zot(r)&&(r=null!=O.titleBar?O.titleBar:"LAYER");var L=r,_=r,Y=!0;zot(a)&&(a=null!=O.backgroundColor?O.backgroundColor:"#eee"),zot(l)&&(l=null!=O.rollBackgroundColor?O.rollBackgroundColor:"#fff"),zot(s)&&(s=null!=O.selectedBackgroundColor?O.selectedBackgroundColor:"#666"),zot(u)&&(u=null!=O.color?O.color:"#666"),zot(d)&&(d=null!=O.rollColor?O.rollColor:"#666"),zot(h)&&(h=null!=O.selectedColor?O.selectedColor:"#ddd"),zot(p)&&(p=null!=O.borderWidth?O.borderWidth:1),zot(f)&&(f=null!=O.borderColor?O.borderColor:a),(f<0||p<0)&&(f=p=null),zot(m)&&(m=null==O.dashed||O.dashed),zot(z)&&(z=null!=O.titleBar?O.titleBar:null),zot(y)&&(y=null!=O.titleBarWidth?O.titleBarWidth:100);var D,X=y;if(zot(v)&&(v=null!=O.titleBarHeight?O.titleBarHeight:40),zot(b)&&(b=null!=O.titleBarX?O.titleBarX:null),zot(w)&&(w=null!=O.titleBarY?O.titleBarY:null),zot(C)&&(C=null==O.titleBarDraggable||O.titleBarDraggable),zot(x)&&(x=null==O.close||O.close),zot(k)&&(k=null!=O.closeColor?O.closeColor:s),zot(T)&&(T=null!=O.closeBackgroundColor?O.closeBackgroundColor:s),zot(A)&&(A=null!=O.closeIndicatorColor?O.closeIndicatorColor:h),zot(P)&&(P=null==O.anchor||O.anchor),C||(P=!1),j.anchor=P,x&&(y+=30),z=e.merge({borderColor:s},z,{events:!0,visible:!1,ghostColor:f,ghostWidth:p,ghostDashed:m,ghostHidden:!0}),zot(i)&&(i=null!=O.titleBarContainer?O.titleBarContainer:null),zot(i)){if(!zdf)return void zog("zim Layer(): Please pass in a reference to a container with bounds set.");i=zdf.stage}j.active=!1,j.turnOff=function(){j.active=!1,x&&(j.checkBox.visible=!1),j.transformControls.remove(),j.mouseChildren=!0,j.button.backgroundColor=a,j.button.rollBackgroundColor=l,j.button.color=u,j.button.rollColor=u,j.transformControls.allowToggleOff(),j.resizeChildren&&j.resizeChildren()},j.turnOn=function(){j.active=!0,x&&(j.checkBox.visible=!0,j.checkBox.checked=!0),j.button.backgroundColor=s,j.button.rollBackgroundColor=s,j.button.color=h,j.button.rollColor=h,j.mouseChildren=!1,j.transformControls.add(),j.transformControls.allowToggleOn()},j.titleBarPos=function(e,t){if(j.titleBar)return j.titleBar.pos?(j.titleBar.pos(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]),D.update()):(j.distX=e,j.distY=t),Y=!1,j};var R=j.visible;j.visible=!1;var W=t();this.added(function(t){D=t,j.transform(z),p>=0&&j.transformControls.hideGhost(),setTimeout(function(){function o(){return j.localToLocal(0,0,i)}function n(e){if(Y&&C){var t=i.localToLocal(h.x-j.distX,h.y-j.distY,j.parent),o=j.localToLocal(j.regX,j.regY,j.parent),n=j.localToLocal(0,0,j.parent);j.x=t.x+(o.x-n.x),j.y=t.y+(o.y-n.y),j.transformControls.resize(e),r(j)}}function r(e){e.loop(function(e){"Layer"==e.type&&(j.titleBarDraggable&&e.move(),e.transformControls.ghost&&e.transformControls.resize(),r(e))})}function s(){return 0==h.x||h.y==h.height||h.x==i.width-h.width||h.y==i.height||void 0}function c(){j.toggled?(i.loop(function(e){e&&e!=h&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()}),j.turnOn()):(h.top(),j.turnOff(),i.loop(function(e){e&&e!=h&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()})),j.stage&&j.stage.update()}j.visible=R,p>=0&&setTimeout(function(){j.transformControls.showGhost(),j.stage&&j.stage.update()},100),D=t;var h=j.titleBar=new e.Container(y,v).reg(0,v).loc(j,null,i).mov(j.distX,j.distY);if(C&&h.drag({all:!0,boundary:new e.Boundary(0,v,i.width-y,i.height-v),localBounds:!0}),40==j.distX&&0==j.distY||h.pos(j.distX,j.distY),x&&(j.checkBox=new e.CheckBox({borderColor:k,backgroundColor:T,indicatorColor:A,size:20,startChecked:!0}).center(h).pos(0,null,!0).change(function(){j.turnOff(!0,!0)}),j.checkBox.visible=!1),h.mouseChildren=!0,h.layer=j,j.resetTitleBar=function(){j.distX=40,j.distY=0,Y=!0,j.move(!0),j.stage&&j.stage.update()},"string"!=typeof _&&"number"!=typeof _||(_=new e.Label({text:_,color:u,rollColor:d,size:null!=O.size?O.size:18,group:this.group})),j.label=_,j.label.center(h),j.button=new e.Button({shadowBlur:-1,width:X,height:v-1,label:j.label,color:u,rollColor:d,backgroundColor:a,rollBackgroundColor:l,corner:null!=O.corner?O.corner:0,inherit:e.copy(O)}).addTo(h),j.button.on("mousedown",function(){i.loop(function(e){e&&e!=h&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff(!0,!0)}),j.active||j.turnOn(),h.top()}),j.button.on("pressmove",function(){n()}),j.button.on("pressup",function(){n(!0);var e=j.localToLocal(0,0,i);j.distX=h.x-e.x,j.distY=h.y-e.y,h.top(),!s()&&C&&(e=j.localToGlobal(0,0),j.button.hitTestPoint(e.x,e.y)&&j.resetTitleBar())}),j.button.on("dblclick",function(){C&&j.resetTitleBar()}),j.turnOff(),j.on("transformed",function(e){"move"!=e.transformType&&"size"!=e.transformType&&"stretch"!=e.transformType&&"rotate"!=e.transformType||(C&&j.move(),r(j))}),j.move=function(e){!e&&!Y&&j.anchor&&s()||(h.loc(o()).mov(j.distX,j.distY),h.x<0&&(Y=!1,h.x=0),h.y<h.height&&(Y=!1,h.y=h.height),h.x>i.width-h.width&&(Y=!1,h.x=i.width-h.width),h.y>i.height&&(Y=!1,h.y=i.height),j.anchor||(Y=!0))},j.on("transformhide",function(){j.turnOff(!0,!0),i.loop(function(e){e&&e!=h&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()})}),j.resizeChildren=function(e){j.transformControls.resize(e),j.loop(function(e){e.transformControls&&(e.transformControls.visible&&e.transformControls.hide(),"Layer"==e.type?e.resizeChildren():e.transformControls.resize())})},j.resize=function(e){return j.move(),j.resizeChildren(e),j},j.toggled=!1,j.toggle=function(e){return zot(e)?j.toggled=!j.toggled:j.toggled=e,c(),j},Object.defineProperty(j,"titleBarDraggable",{get:function(){return C},set:function(t){(C=t)?h.drag({all:!0,boundary:e.Boundary(0,40,i.width-y,i.height-v),localBounds:!0}):h.noDrag(!1)}}),j.stageUpEvent=D.on("stagemouseup",function(){j.transformControls.visible&&h.top()}),!zot(b)||!zot(w)){Y=!1;var g=zot(b)?h.x:b,f=zot(w)?h.y-v:w;j.titleBarStartX=b,j.titleBarStartY=w,j.titleBarPos(g,f);var m=j.parent.localToLocal(j.x,j.y,i);j.distX=h.x-m.x,j.distY=h.y-m.y}})},"s"==W?.05:50),!1!==S&&e.styleTransforms(this,O),this.clone=function(){return j.cloneProps(new e.Layer(o,n,L,i,a,l,s,c,u,d,h,g,p,f,m,z,X,v,b,w,C,x,k,T,A,P,S,this.group,E))},this.dispose=function(e,t,o){return j.stageUpEvent&&D.off("stagemouseup",j.stageUpEvent),i&&i.loop(function(e){e.layer=null}),j.transformControls.dispose(),j.transformControls=null,o||this.zimContainer_dispose(!0),j.titleBar.layer=null,j.titleBar.dispose(),j.checkBox=j.button=null,r=j.titleBar=z=null,!0}},e.extend(e.Layer,e.Container,["clone","dispose"],"zimContainer",!1),e.Waiter=function(o,n,r,i,a,l,s,c,u,d,h){var g,p="container, speed, foregroundColor, backgroundColor, corner, shadowColor, shadowBlur, fadeTime, style, group, inherit";if(g=zob(e.Waiter,arguments,p,this))return g;z_d("59"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Waiter",this.group=d;var f=!1===u?{}:e.getStyle(this.type,this.group,h),m=t(n);zot(n)&&(n=null!=f.speed?f.speed:"s"==m?.6:600),zot(r)&&(r=null!=f.foregroundColor?f.foregroundColor:"white"),zot(i)&&(i=null!=f.backgroundColor?f.backgroundColor:"orange"),zot(a)&&(a=null!=f.corner?f.corner:16),zot(l)&&(l=null!=f.shadowColor?f.shadowColor:"rgba(0,0,0,.3)"),zot(s)&&(s=null!=f.shadowBlur?f.shadowBlur:14),zot(c)&&(c=null!=f.fadeTime?f.fadeTime:0);var z=40,y=3,v=.6*z/2,b=(z-2*v)/2,w=y*(2*v+b)+b;this.setBounds(-w/2,-z/2,w,z);var C,x=this,k=this.display=new e.Shape({style:!1});this.addChild(k),k.setBounds(0,0,w,z),k.regX=w/2,k.regY=z/2;var T=k.graphics;T.f(i);var A=a;Array.isArray(A)||(A=[a,a,a,a]),T.rc(0,0,w,z,A[0],A[1],A[2],A[3]),-1!=l&&s>0&&(k.shadow=new createjs.Shadow(l,3,3,s)),k.on("click",function(e){e.stopImmediatePropagation()});var P,S,B=new e.Container({style:!1});this.addChild(B);for(var E=0;E<y;E++)(P=new createjs.Shape).graphics.f(r).dc(0,0,v),P.x=(E-(y-1)/2)*(2*v+b),B.addChild(P),P.cache(-v,-v,2*v,2*v),P.alpha=0;this.hide=function(){function e(){if(x.parent&&x.parent.removeChild(x),(C=x.stage)&&C.update(),x.zimAccessibility){var e=x.zimAccessibility;e.resize(x),S?S.focus():x.zimTabTag.nextSibling.focus(),setTimeout(function(){e.talk("Waiter has finished.")},50)}}return c>0?x.animate({obj:{alpha:0},time:c,call:e}):e(),x.toggled=!1,x};var I=[];this.show=function(){var e,t="zim display - Waiter(): Please pass in a reference to a container with bounds set as first parameter to Waiter";if(zot(o)){if(!zdf)return void zog(t);o=zdf.stage}else{if(!o.getBounds)return void zog(t);if(zot(o.stage))return void zog("zim display - Waiter(): The container must have a stage property")}for(var r=0,i=n*("s"==m?1e3:1),a=0;a<B.numChildren;a++)B&&I.push(setTimeout(function(){e=B.getChildAt(r),createjs.Tween.get(e,{loop:!0}).to({alpha:1},i/y/2).wait(i/y).to({alpha:0},i/y).wait(i-i/y-i/y/2),r++},a*i/y));if(x.ticker=createjs.Ticker.on("tick",function(){o.stage.update()}),x.x=o.getBounds().width/2,x.y=o.getBounds().height/2,o.addChild(x),c>0&&(x.alpha=0,x.animate({alpha:1},c)),x.zimAccessibility){var l=x.zimAccessibility;setTimeout(function(){l.activatedObject&&(S=l.activatedObject.zimTabTag)},50),l.resize(x),l.talk(x.zimTabTag.getAttribute("aria-label"))}return x.toggled=!0,x},x.toggle=function(e){return!0===e?x.show():!1===e?x.hide():x.parent?x.hide():x.show(),x},!1!==u&&e.styleTransforms(this,f),this.clone=function(){return x.cloneProps(new e.Waiter(o,n,r,i,a,l,s,c,u,this.group,h))},this.dispose=function(e,t,o){x.ticker&&createjs.Ticker.off("tick",x.ticker),createjs.Tween.removeTweens(x),x.removeFrom();for(var n=0;n<B.numChildren;n++){var r=B.getChildAt(n);clearInterval(I[n]),createjs.Tween.removeTweens(r)}return o||this.zimContainer_dispose(!0),!0}},e.extend(e.Waiter,e.Container,["clone","dispose"],"zimContainer",!1),e.ProgressBar=function(o,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x){function k(t){if(M.backing){var o=M.getChildIndex(M.backing);M.removeChild(M.backing)}else o=M.numChildren;if(M.border&&M.removeChild(M.border),zot(t)||"Pattern"!=t.type)t=M.backing=zot(t)?new e.Rectangle(j,I,i,a,l,g,null,null,!1).addTo(M,o):m.addTo(M,o);else{var n=t;(t=M.backing=new e.Rectangle(j,I,i,null,null,g,null,null,!1).addTo(M,o)).pattern=n,n.center(t),t.getBounds(),n.setMask(t.shape),l&&(M.border=new e.Rectangle(j,I,"rgba(0,0,0,0)",a,l,g,null,null,!1).addTo(M,o+1))}return t}function T(e){"circle"==o?L.graphics.c().mt(0,0).s(r).ss(l-2*s+.5).a(0,0,j,0,360*e/100*Math.PI/180):(D.sca(e/100,1),L.setMask(D)),zot(h)||(c.text=c.startText+" "+Math.min(Math.round(e),100)+"%"),b&&y&&Math.round(e)>=100&&(M.timeOut=setTimeout(function(){M.hide()},200)),!M.dispatched&&Math.round(e)>=100&&(M.dispatchEvent("complete"),M.dispatched=!0,setTimeout(function(){M&&(M.dispatched=!1)},100)),M.stage&&M.stage.update()}var A,P="barType, foregroundColor, backgroundColor, borderColor, borderWidth, padding, label, color, labelPosition, percentage, corner, shadowColor, shadowBlur, backing, delay, fastClose, container, autoHide, style, group, inherit";if(A=zob(e.ProgressBar,arguments,P,this))return A;z_d("59.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ProgressBar",this.group=C;var S=!1===w?{}:e.getStyle(this.type,this.group,x);zot(r)&&(r=null!=S.foregroundColor?S.foregroundColor:"#acd241"),zot(i)&&(i=null!=S.backgroundColor?S.backgroundColor:"#444"),zot(a)&&(a=null!=S.borderColor?S.borderColor:i),zot(l)&&(l=null!=S.borderWidth?S.borderWidth:null),zot(d)&&(d=null!=S.labelPosition?S.labelPosition:"bottom"),zot(o)&&(o=null!=S.barType?S.barType:"circle"),zot(s)&&(s=null!=S.padding?S.padding:"circle"==o?2:-.5),zot(g)&&(g=null!=S.corner?S.corner:15),zot(p)&&(p=null!=S.shadowColor?S.shadowColor:"rgba(0,0,0,.3)"),zot(f)&&(f=null!=S.shadowBlur?S.shadowBlur:14),zot(m)&&(m=null!=S.backing?S.backing.clone():null),zot(y)&&(y=null==S.fastClose||S.fastClose),a<0||l<0?a=l=null:null!=a&&null==l&&(l="circle"==o?10:2);var B=t(z);zot(z)&&(z=null!=S.delay?S.delay:"s"==B?.1:100),zot(b)&&(b=null==S.autoHide||S.autoHide),zot(c)&&(c=null!=S.label?S.label:null),zot(u)&&(u=null!=S.color?S.color:r),"string"!=typeof c&&"number"!=typeof c||(c=new e.Label({text:c,color:u,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),c&&c.text,!zot(h)&&zot(c)&&(c=new e.Label("")),this.label=c;var E,I=30,M=this,O=0;if(M.visible=!1,setTimeout(function(){M.visible=!0,M.stage&&M.stage.update()},z),"circle"==o)var j=20,L=(m=this.backing=new e.Circle(j,"rgba(0,0,0,0)",i,l,null,null,null,null,!1).addTo(M),this.bar=new e.Shape({style:!1}).addTo(M).loc(m.x,m.y).rot(-90));else{j=200,-1!=p&&f>0&&(new e.Rectangle(j-2,I-2,i,null,null,g,null,null,!1).addTo(this).shadow=new createjs.Shadow(p,3,3,f)),m=k(m);var _=g;Array.isArray(_)||(_=[g,g,g,g]);var Y=1.2*(s+l/2),D=(L=this.bar=new e.Rectangle(j-1.8*(s+l/2),I-1.8*(s+l/2),r,null,null,[_[0]-Y,_[1]-Y,_[2]-Y,_[3]-Y],null,null,!1).center(this),this.mask=new e.Rectangle(j-1.8*(s+l/2),I-1.8*(s+l/2),null,null,null,null,null,null,!1).center(this).alp(0).sca(0,1));L.setMask(D)}M.setBacking=function(e){k(e),M.stage&&M.stage.update()},m.on("click",function(e){e.stopImmediatePropagation()}),zot(c)||(c.scaleX=c.scaleY=.8,c.startText=c.text,zot(h)||(c.text=c.startText+"  0%"),c.center(M),"above"==d?c.y-=60:c.y+=60,c.alpha=.8),this.hide=function(){var e=M.stage;if(M.parent&&M.parent.removeChild(M),"Pattern"==M.backing.type&&M.backing.pauseInterval&&M.backing.pauseInterval(),e&&e.update(),M.zimAccessibility){var t=M.zimAccessibility;t.resize(M),E?E.focus():M.zimTabTag.nextSibling.focus(),setTimeout(function(){t.talk("Progress Bar has finished.")},50)}return M.toggled=!1,M},this.show=function(){var e="zim display - ProgressBar(): Please pass in a reference to a container with bounds set as first parameter of the ProgressBar";if(zot(v)){if(!zdf)return void zog(e);v=zdf.stage}else{if(!v.getBounds)return void zog(e);if(zot(v.stage))return void zog("zim display - Waiter(): The container must have a stage property")}if(M.timeOut&&clearTimeout(M.timeOut),T(0),M.zimActiveLoader&&M.zimActiveLoader.on("progress",function(e){T(O=100*e.progress)}),M.center(v),"Pattern"==M.backing.type&&M.backing.pauseInterval&&M.backing.pauseInterval(!1),M.zimAccessibility){var t=M.zimAccessibility;setTimeout(function(){t.activatedObject&&(E=t.activatedObject.zimTabTag)},50),t.resize(M),t.talk(M.zimTabTag.getAttribute("aria-label"))}return M.toggled=!0,M},M.toggle=function(e){return!0===e?M.show():!1===e?M.hide():M.parent?M.hide():M.show(),M},M.run=function(e,t){zot(t)||(b=t),zot(e)&&(e="s"==B?3:3e3),n(e,B);var o=e*("s"==B?1e3:1);M.toggle(!0),M.runInterval&&clearInterval(M.runInterval),M.percent=0;var r=Date.now();return M.runInterval=setInterval(function(){M.percent=(Date.now()-r)/o*100,M.percent>=100&&(M.percent=100,clearInterval(M.runInterval))},30),M},M.dispatched=!1,Object.defineProperty(M,"percent",{get:function(){return O},set:function(e){O=e,T(e)}}),!1!==w&&e.styleTransforms(this,S),this.clone=function(){return M.cloneProps(new e.ProgressBar(o,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,this.group,x))},this.dispose=function(e,t,o){return"Pattern"==M.backing.type&&M.backing.clearInterval&&M.backing.clearInterval(),M.runInterval&&clearInterval(M.runInterval),o||this.zimContainer_dispose(!0),!0}},e.extend(e.ProgressBar,e.Container,["clone","dispose"],"zimContainer",!1),e.Indicator=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w){function C(t){var o;t>=n&&(t=-1);for(var i=0;i<n;i++)o=h&&i<t?r:a,i==t&&(o=r),I.getChildAt(i).color=o;S.zimAccessibility&&S.zimAccessibility.changeTitle(S),e.OPTIMIZE||!zns&&OPTIMIZE||!S.stage||S.stage.update()}var x,k="width, height, num, foregroundColor, backgroundColor, borderColor, borderWidth, backdropColor, corner, indicatorType, fill, scale, lightScale, interactive, shadowColor, shadowBlur, selectedIndex, style, group, inherit";if(x=zob(e.Indicator,arguments,k,this))return x;z_d("60"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Indicator",this.group=b;var T=!1===v?{}:e.getStyle(this.type,this.group,w);zot(t)&&(t=null!=T.width?T.width:300),zot(o)&&(o=null!=T.height?T.height:50),zot(n)&&(n=null!=T.num?T.num:6),zot(r)&&(r=null!=T.foregroundColor?T.foregroundColor:"#f58e25"),zot(a)&&(a=null!=T.backgroundColor?T.backgroundColor:"#666"),a<0&&(a=null!=T.backgroundColor?T.backgroundColor:"rgba(0,0,0,.01)"),zot(l)&&(l=null!=T.borderColor?T.borderColor:null),zot(s)&&(s=null!=T.borderWidth?T.borderWidth:null),l<0||s<0?l=s=null:null!=l&&null==s&&(s=1),zot(c)&&(c=null!=T.backdropColor?T.backdropColor:-1),zot(u)&&(u=null!=T.corner?T.corner:0),zot(d)&&(d=null!=T.indicatorType?T.indicatorType:"dot"),zot(h)&&(h=null!=T.fill&&T.fill),zot(g)&&(g=null!=T.scale?T.scale:1),zot(p)&&(p=null!=T.lightScale?T.lightScale:1),zot(f)&&(f=null!=T.interactive&&T.interactive),zot(m)&&(m=null!=T.shadowColor?T.shadowColor:"rgba(0,0,0,.3)"),zot(z)&&(z=null!=T.shadowBlur?T.shadowBlur:5);var A,P=(zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",S=this;if(this.lights=[],new e.Container({style:!1}),-1!=c){var B=S.backdrop=new e.Rectangle(t,o,c,l,s,u,null,null,!1);this.addChild(B)}var E,I=this.lightsContainer=new e.Container({style:!1});this.addChild(I);var M=.5*o,O=t/(n+1),j=new createjs.Shape;"square"==d||"box"==d?j.graphics.f("black").dr(-O/2/p+M/2,-o/2+M/2,O/p,o):j.graphics.f("black").dr(-O/2/p,-o/2,O/p,o);for(var L=0;L<n;L++)"square"==d||"box"==d?((E=new e.Rectangle(M,M,a,l,s,null,null,null,!1)).regX=E.width/2,E.regY=E.height/2):E=new e.Circle(M/2,a,l,s,null,null,null,null,!1),this.lights.push(E),E.znum=L,E.scaleX=E.scaleY=p,E.hitArea=j,E.x=O+O*L,E.y=o/2,I.addChild(E);I.setBounds(0,0,t,o),I.regX=I.x=t/2,I.regY=I.y=o/2,this.addChild(I),-1!=m&&z>0&&(I.shadow=new createjs.Shadow(m,2,2,z)),f&&(I.cursor="pointer",I.on(P,function(e){A!=e.target.znum&&(C(A=e.target.znum),S.dispatchEvent("change"))})),I.scaleX=I.scaleY=g,Object.defineProperty(this,"selectedIndex",{get:function(){return A},set:function(t){A=Math.floor(t),C(A=e.constrain(A,-1,n-1))}}),Object.defineProperty(this,"num",{get:function(){return n},set:function(){zon&&zogy("Indicator() - num is read only")}}),this._enabled=!0,Object.defineProperty(S,"enabled",{get:function(){return S._enabled},set:function(e){i(S,e)}}),zot(y)&&(y=null!=T.selectedIndex?T.selectedIndex:0),S.selectedIndex=y,!1!==v&&e.styleTransforms(this,T),this.clone=function(){return S.cloneProps(new e.Indicator(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,y,v,this.group,w))}},e.extend(e.Indicator,e.Container,"clone","zimContainer",!1),e.List=function(o,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y,D,X,R,W,H,F,V,N,G,q,Q,U,K,Z,J,$,ee,te,oe,ne,re,ie,ae,le,se,ce,ue,de,he,ge,pe){function fe(t){Le=xe.tabs=new e.Tabs({width:l?xe.itemWidth:xe.itemWidth*i.length,height:l?xe.itemHeight*i.length:xe.itemHeight,tabs:t,spacing:z,vertical:l,backgroundColor:y,rollBackgroundColor:v,selectedBackgroundColor:b,selectedRollBackgroundColor:w,color:x,rollColor:k,selectedColor:T,selectedRollColor:A,backdropColor:C,currentEnabled:!0,currentSelected:s,align:c,valign:u,labelAlign:d,labelValign:h,labelIndent:g,labelIndentHorizontal:p,labelIndentVertical:f,indent:m,useTap:!0,excludeCustomTap:re,style:he,group:ge,inherit:Xe}).mov(l?0:N,l?G:0),xe.add(Le)}function me(e){if(l){var t=-(xe.itemHeight+z)*e+r/2-xe.itemHeight/2;return(xe.itemHeight+z)*xe.length<r&&(t=0),t>0&&(t=0),(xe.itemHeight+z)*xe.length>r&&t<-xe.tabs.height+r-2*G&&(t=-xe.tabs.height+r-2*G),t}var n=-(xe.itemWidth+z)*e+o/2-xe.itemWidth/2;return(xe.itemWidth+z)*xe.length<o&&(n=0),n>0&&(n=0),(xe.itemWidth+z)*xe.length>o&&n<-xe.tabs.width+o-2*N&&(n=-xe.tabs.width+o-2*N),n}var ze,ye="width, height, list, viewNum, vertical, currentSelected, align, valign, labelAlign, labelValign, labelIndent, labelIndentHorizontal, labelIndentVertical, indent, spacing, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, scrollBarOverlay, slide, slideDamp, slideSnap, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, excludeCustomTap, organizer, checkBox, pulldown, clone, cancelCurrentDrag, selectedIndex, noScale, style, group, inherit";if(ze=zob(e.List,arguments,ye,this))return ze;z_d("60.5"),this.group=ge;var ve=!1===he?{}:e.getStyle("List",this.group,pe);zot(o)&&(o=null!=ve.width?ve.width:300),zot(r)&&(r=null!=ve.height?ve.height:zot(ie)?200:200+ie.height),zot(i)&&(i=i=null!=ve.list?ve.list:["Option 1","Option 2","Option 3","Option 4","Option 5","Option 6","Option 7","Option 8","Option 9","Option 10"]),0==i.length&&(i=["%-&"]),this.originalList=i,zot(a)&&(a=null!=ve.viewNum?ve.viewNum:5),zot(l)&&(l=null==ve.vertical||ve.vertical),zot(s)&&(s=null==ve.currentSelected||ve.currentSelected);var be=!zot(c)||!zot(d);zot(ae)&&(ae=null!=ve.checkBox&&ve.checkBox),zot(c)&&(c=null!=ve.align?ve.align:ae?"left":"center"),zot(u)&&(u=null!=ve.valign?ve.valign:"center"),zot(d)&&(d=null!=ve.labelAlign?ve.labelAlign:c),zot(h)&&(h=null!=ve.labelValign?ve.labelValign:u),zot(m)&&(m=null!=ve.indent?ve.indent:ae?0:10),zot(g)&&(g=null!=ve.labelIndent?ve.labelIndent:m),zot(p)&&(p=null!=ve.labelIndentHorizontal?ve.labelIndentHorizontal:g),zot(f)&&(f=null!=ve.labelIndentVertical?ve.labelIndentVertical:g),zot(z)&&(z=null!=ve.spacing?ve.spacing:2),zot(C)&&(C=null!=ve.backdropColor?ve.backdropColor:"#333"),zot(y)&&(y=null!=ve.backgroundColor?ve.backgroundColor:"#777"),zot(v)&&(v=null!=ve.rollBackgroundColor?ve.rollBackgroundColor:"#555"),zot(b)&&(b=null!=ve.selectedBackgroundColor?ve.selectedBackgroundColor:"#444"),zot(w)&&(w=null!=ve.selectedRollBackgroundColor?ve.selectedRollBackgroundColor:"#555"),zot(x)&&(x=null!=ve.color?ve.color:"white"),zot(k)&&(k=null!=ve.rollColor?ve.rollColor:x),zot(T)&&(T=null!=ve.selectedColor?ve.selectedColor:x),zot(A)&&(A=null!=ve.selectedRollColor?ve.selectedRollColor:k),zot(C)&&(C=null!=ve.backdropColor?ve.backdropColor:C);var we=P,Ce=S;zot(P)&&(P=null!=ve.borderColor?ve.borderColor:"#999"),zot(S)&&(S=null!=ve.borderWidth?ve.borderWidth:1),zot(B)&&(B=null!=ve.padding?ve.padding:z),zot(E)&&(E=null!=ve.corner?ve.corner:0),zot(I)&&(I=null==ve.swipe||ve.swipe),zot(M)&&(M=null==ve.scrollBarActive||ve.scrollBarActive),zot(O)&&(O=null==ve.scrollBarDrag||ve.scrollBarDrag),zot(j)&&(j=null!=ve.scrollBarColor?ve.scrollBarColor:P),zot(L)&&(L=null!=ve.scrollBarAlpha?ve.scrollBarAlpha:.3),zot(_)&&(_=null==ve.scrollBarFade||ve.scrollBarFade),zot(Y)&&(Y=null!=ve.scrollBarH?ve.scrollBarH:!l),zot(D)&&(D=null!=ve.scrollBarV?ve.scrollBarV:l),O&&(_=null!=ve.scrollBarFade&&ve.scrollBarFade),zot(X)&&(X=null==ve.scrollBarOverlay||ve.scrollBarOverlay),zot(R)&&(R=null==ve.slide||ve.slide),zot(W)&&(W=null!=ve.slideDamp?ve.slideDamp:.6),zot(H)&&(H=null!=ve.slideSnap?ve.slideSnap:l?"vertical":"horizontal"),zot(F)&&(F=null!=ve.shadowColor?ve.shadowColor:"rgba(0,0,0,.3)"),zot(V)&&(V=null!=ve.shadowBlur?ve.shadowBlur:20),zot(G)&&(G=null!=ve.paddingVertical?ve.paddingVertical:B),zot(N)&&(N=null!=ve.paddingHorizontal?ve.paddingHorizontal:B),zot(q)&&(q=null==ve.scrollWheel||ve.scrollWheel),zot(U)&&(U=null!=ve.titleBar?ve.titleBar:null),zot(K)&&(K=null!=ve.titleBarColor?ve.titleBarColor:null),zot(Z)&&(Z=null!=ve.titleBarBackgroundColor?ve.titleBarBackgroundColor:null),zot(J)&&(J=null!=ve.titleBarHeight?ve.titleBarHeight:35),zot($)&&($=null!=ve.draggable?ve.draggable:null),zot(ee)&&(ee=null!=ve.boundary?ve.boundary:null),zot(te)&&(te=null!=ve.onTop?ve.onTop:null),zot(oe)&&(oe=null!=ve.close?ve.close:null),zot(ne)&&(ne=null!=ve.closeColor?ve.closeColor:null),zot(re)&&(re=null!=ve.excludeCustomTap&&ve.excludeCustomTap),zot(ae)&&(ae=null!=ve.checkBox&&ve.checkBox),zot(le)&&(le=null!=ve.pulldown&&ve.pulldown),zot(de)&&(de=null!=ve.noScale&&ve.noScale),zot(se)&&(se=null!=ve.clone&&ve.clone),!1===U&&(U=null),this.vertical=l;var xe=this,ke=r;ae&&e.loop(i,function(t,n){i[n]=e.List.checkItem(t,null,o,"left",10,10,z,x,k,T,A,y,v,b,w)});var Te,Ae=t();if(i.constructor=={}.constructor){var Pe=zot(i.shade)?zot(ve.shade)?.2:ve.shade:i.shade,Se=zot(i.dim)?zot(ve.dim)?.1:ve.dim:i.dim,Be=zot(i.shift)?zot(ve.shift)?15:ve.shift:i.shift,Ee=zot(i.bloom)?!zot(ve.bloom)&&ve.bloom:i.bloom,Ie=zot(i.whither)?!zot(ve.whither)&&ve.whither:i.whither,Me=zot(i.open)?!zot(ve.open)&&ve.open:i.open,Oe=zot(i.arrows)?!zot(ve.arrows)&&ve.arrows:i.arrows;!0===Ee&&(Ee="s"==Ae?.01:10),!0===Ie&&(Ie="s"==Ae?.01:10),n(Ee),n(Ie),!0===Be&&(Be=15),!0===Pe&&(Pe=.2),!0===Se&&(Se=.1);var je=zot(i.subStyles)?zot(ve.subStyles)?{}:ve.subStyles:i.subStyles;zot(i.menu)||(i=i.menu),Te=new e.Hierarchy(i,Me),Me&&Te.data&&Te.data.id0&&(Te.data.id0.open=!1),i=Te.getLinearList(),be||(c=d="left")}le&&(a=zot(Te)?i.length:Te.length,r=a*o/620*100+(a+1)*z+(zot(U)?0:J),S=0,b=y,C=e.clear,I=!1);var Le,_e=0,Ye=0;e.loop(i,function(e){"ListItem"==e.type&&(e.width=o-2*z),de&&(e.width&&(_e+=e.width),e.height&&(Ye+=e.height))}),_e&&(_e+=z*(i.length-1)),Ye&&(Ye+=z*(i.length-1)),this.align=c,this.valign=u,this.indent=m,zot(ie)||(r-=ie.height,ie.list=xe,xe.organizer=ie,ie.setButtons(),J+=ie.height),this.zimWindow_constructor(o,r,C,P,S,B,E,I,M,O,j,L,_,Y,D,R,W,H,!0,F,V,N,G,q,Q,U,K,Z,J,$,ee,te,oe,ne,ce,!1,null,!1,he,ge,e.copy(ve)),this.type="List",zot(U)||(this.titleBarLabel.pos(null,J-30,null,!0),zot(J)&&(J=30),r-=J),zot(ie)||ie.addTo(xe).loc(0,-ie.height),_e&&de?(xe.itemWidth=l?o-2*N-(M?X?0:6:0):_e/i.length,xe.itemHeight=l?(r-2*G)/a:r-2*G-(M?X?0:6:0)):(xe.itemWidth=l?o-2*N-(M?X?0:6:0):(o-2*N)/a,xe.itemHeight=l?(r-2*G)/a:r-2*G-(M?X?0:6:0));var De,Xe=e.copy(ve);if(delete Xe.borderWidth,delete Xe.borderColor,fe(e.copy(i,se)),Te){var Re=Te.getLinearIDs();function We(t,o,n){t.listZID=o,t.label&&(Pe&&new e.Rectangle(Be*(n.level+1),t.height).alp(Pe).pos(0,0,"right"==xe.align,!1,t),Se&&new e.Rectangle(t.width,t.height).alp((n.level+1)*Se).addTo(t).bot().ord(1),Be&&"center"!=xe.align&&(t.label.x+=("right"==xe.align?-1:1)*Be*(n.level+1)));var r=Te.getData(o);r.obj=t,r.list&&!e.isEmpty(r.list)&&(t.accordion=new e.Label({size:Oe?22:36,text:r.open?Oe?"\u25b2":"-":Oe?"\u25bc":"+",align:"center",color:e.convertColor(x,"rgba",.6)}).center(t).alp(.7).pos(15,null,"right"!=xe.align).mov(0,r.open?-3:0))}function He(){if(xe.selected.accordion){var t=Te.getData(xe.selected.listZID);if(t.open){xe.selected.accordion&&(xe.selected.accordion.text=Oe?"\u25bc":"+",xe.selected.accordion.mov(0,3)),t.open=!1;var o=Te.getNextSibling(xe.selected.listZID);if(zot(o))var n=xe.items.length-1;else n=e.loop(xe.items,function(e,t){if(e.listZID==o)return t-1});if(Ie){var r=0;xe.enabled=!1,e.interval(Ie,function(e){xe.removeAt(1,xe.selectedIndex+n-xe.selectedIndex-r),r++,e.total==e.count+1&&(xe.enabled=!0)},n-xe.selectedIndex,!0)}else xe.removeAt(n-xe.selectedIndex,xe.selectedIndex+1)}else{t.open=!0,xe.selected.accordion&&(xe.selected.accordion.text=Oe?"\u25b2":"-",xe.selected.accordion.mov(0,-3));var i=Te.getLinearList(t.list),a=Te.getLinearIDs(t.list);if(t.opened)Array.isArray(i)&&(Ee?(r=0,xe.enabled=!1,e.interval(Ee,function(e){xe.addAt(i[r],xe.selectedIndex+1+r),e.total==e.count+1&&(xe.enabled=!0),r++},i.length,!0)):xe.addAt(i,xe.selectedIndex+1));else{t.opened=!0;var l=je[t.level];zot(l)&&(l={}),Array.isArray(i)&&(Ee?(r=0,xe.enabled=!1,e.interval(Ee,function(e){xe.addAt(i[r],xe.selectedIndex+1+r,{backgroundColor:l.backgroundColor,color:l.color,rollBackgroundColor:l.rollBackgroundColor,rollColor:l.rollColor,selectedBackgroundColor:l.selectedBackgroundColor,selectedColor:l.selectedColor,selectedRollBackgroundColor:l.selectedRollBackgroundColor,selectedRollColor:l.selectedRollColor});var o=a[r];We(xe.items[xe.selectedIndex+1+r],o,t),e.total==e.count+1&&(xe.enabled=!0),r++,xe.stage&&xe.stage.update()},i.length,!0)):(xe.addAt(i,xe.selectedIndex+1,{backgroundColor:l.backgroundColor,color:l.color,rollBackgroundColor:l.rollBackgroundColor,rollColor:l.rollColor,
selectedBackgroundColor:l.selectedBackgroundColor,selectedColor:l.selectedColor,selectedRollBackgroundColor:l.selectedRollBackgroundColor,selectedRollColor:l.selectedRollColor}),e.loop(a,function(e,o){We(xe.items[xe.selectedIndex+1+o],e,t)})))}}}}e.loop(Re,function(e,t){xe.tabs.buttons[t].listZID=e}),e.loop(xe.tabs.buttons,function(t){var o=Te.getData(t.listZID);e.isEmpty(o.list)||(t.accordion=new e.Label({size:Oe?22:36,text:Oe?"\u25bc":"+",align:"center",color:e.convertColor(x,"rgba",.6)}).center(t).alp(.7).pos(15,null,"right"!=xe.align))}),xe.tap(He)}Le.tap(function(e){e.target.selectedIndex!=xe.selectedIndex&&(xe.selectedIndex=Le.selectedIndex,xe.dispatchEvent("change"),e.preventDefault())}),this.getItemIndex=function(e){return xe.items.indexOf(e)},this.animateTo=function(e,o){zot(e)&&(e=0),zot(o)&&(o=.05);var n=t(o);xe.selectedIndex=e;var r=me(e);if(l){var i=Math.abs(xe.scrollY-r)/xe.itemHeight;xe.animate({scrollY:r},i*o/("s"==n?1e3:1))}else i=Math.abs(xe.scrollX-r)/xe.itemWidth,xe.animate({scrollX:r},i*o/("s"==n?1e3:1));return xe},this.addAt=function(t,n,r,i){return zot(t)?xe:("ListItem"==t.type?t.width=o-2*z:Array.isArray(t)&&e.loop(t,function(e){"ListItem"==e.type&&(e.width=o-2*z)}),t.clone?xe.tabs.addAt(i?t.clone():t,n,r):xe.tabs.addAt(e.copy(t,i),n,r),xe.update(),xe)},this.removeAt=function(e,t){xe.tabs.removeAt(e,t),De=xe.tabs.selectedIndex;var o=Le.getBounds();return Le.setBounds(0,0,o.width,o.height),xe.update(),xe},"%-&"==i[0]&&1==i.length&&xe.removeAt(1,0),this.clear=function(){return xe.tabs.removeAt(xe.length,0),xe.content.x=0,xe.content.y=0,xe.update(),xe},this.setCheck=function(e,t){zot(e)&&(e=0),zot(t)&&(t=!0),xe.items[e].checkBox.checked=t,xe.items[e].content.zimOut()},this.getCheck=function(e){return zot(e)&&(e=0),xe.items[e].checkBox.checked},this.setChecks=function(t){return e.loop(xe.items,function(e){e.checkBox.checked=t,e.content.zimOut()}),xe},Object.defineProperty(xe,"items",{get:function(){return xe.tabs.buttons},set:function(){zon&&zogy("List() - items is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(xe,"list",{get:function(){return xe.tabs.buttons},set:function(){zon&&zogy("List() - list is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(xe,"length",{get:function(){return xe.tabs.buttons.length},set:function(){zon&&zogy("List() - length is read only")}}),Object.defineProperty(xe,"selectedIndex",{get:function(){return De},set:function(t){Le.selectedIndex=t,xe.label=Le.label,xe.selected=Le.selected,De=t,e.OPTIMIZE||!zns&&OPTIMIZE||!xe.stage||xe.stage.update()}}),s&&(xe.selectedIndex=0),Object.defineProperty(xe,"selectedIndexPlusPosition",{get:function(){return De},set:function(t){xe.selectedIndex=t,De=t,l?xe.scrollY=me(t)-2:xe.scrollX=me(t),e.OPTIMIZE||!zns&&OPTIMIZE||!xe.stage||xe.stage.update()}}),Object.defineProperty(xe,"text",{get:function(){return xe.label?xe.label.text:null},set:function(e){xe.label&&(xe.label.text=e)}}),Object.defineProperty(xe,"currentValue",{get:function(){return xe.label?xe.label.text:null},set:function(t){var o=e.loop(xe.list,function(e,o){var n;e.label&&(n=e.label.text),"Label"==e.type&&(n=e.text);var r=new RegExp(t,"i");if(n&&n.match(r))return o});!0!==o&&(xe.selectedIndexPlusPosition=o)}}),Object.defineProperty(xe,"itemDown",{get:function(){return xe.tabs.buttonDown},set:function(){}}),Object.defineProperty(xe,"itemsText",{get:function(){for(var e=[],t=0;t<xe.tabs.buttons.length;t++){var o=xe.tabs.buttons[t].label;o&&!zot(o.text)?e.push(o.text):e.push(null)}return e},set:function(){zon&&zogy("List() - itemsText is read only")}}),s&&(xe.selectedIndex=0),Object.defineProperty(xe,"checkBoxes",{get:function(){for(var e=[],t=0;t<xe.tabs.buttons.length;t++){var o=xe.tabs.buttons[t].checkBox;e.push(o)}return e},set:function(){zon&&zogy("List() - checkBoxes is read only")}}),Object.defineProperty(xe,"accordionIndex",{get:function(){var e=xe.selected.listZID;return e?Number(e.split("id")[1]):null},set:function(){zon&&zogy("List() - accordionIndex is read only")}}),this.last=function(){return this.selectedIndexPlusPosition=this.length-1,this},this.first=function(){return this.selectedIndexPlusPosition=0,this},Me&&He&&(xe.selected=xe.items[0],He()),zot(ue)&&(ue=null!=ve.selectedIndex?ve.selectedIndex:0),xe.selectedIndex=ue,!1!==he&&e.styleTransforms(this,ve),this.clone=function(){return xe.cloneProps(new e.List(o,ke,e.copy(xe.originalList,!0),a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,we,Ce,B,e.copy(E),I,M,O,j,L,_,Y,D,X,R,W,H,F,V,N,G,q,Q,U,K,Z,J,$,ee,te,oe,ne,re,ie,ae,le,se,ce,ue,de,he,this.group,pe))},this.dispose=function(e,t,o){return o||(xe.organizer&&xe.organizer.dispose(),this.zimWindow_dispose()),!0}},e.extend(e.List,e.Window,["clone","dispose"],"zimWindow",!1),e.List.makeBase=function(t,o,n){t.backing=new e.Rectangle(t.width,t.height,e.dark).center(t),"Label"==o.type?t.label=o:t.label=new e.Label(o,null,null,e.white),t.text=t.label.text,t.label.center(t).loc(n)},e.List.slider=function(t,o,n,r,i,a,l,s,c,u,d,h){var g,p="label, min, max, val, call, step, obj, property, paddingLeft, paddingRight, factor, offset";if(g=zob(e.List.slider,arguments,p))return g;var f=new e.Container(620,100);return f.type="ListItem",f.listItem="Slider",zot(c)&&(c=20),zot(u)&&(u=30),zot(d)&&(d=1),zot(h)&&(h=0),e.List.makeBase(f,t,c),f.slider=new e.Slider({inside:!0,barWidth:40,barLength:150,barColor:e.blue,min:o,max:n,step:a}).sca(1.5).center(f).mov(20).change(function(){f.stepper.currentValue=h+Math.round(f.slider.currentValue*d),l&&s&&(l[s]=f.slider.currentValue),i&&"function"==typeof i&&i(f.slider.currentValue,f.parent),f.slider.stage&&f.slider.stage.update()}),zot(r)||(f.slider.currentValue=r),f.stepper=new e.Stepper({corner:0,arrows:!1,stepperType:"number",min:h+o*d,max:h+n*d}).sca(.5).center(f).pos(u,null,!0).change(function(){f.slider.currentValue=f.stepper.currentValue/(d||1)-offest,l&&s&&(l[s]=f.slider.currentValue),i&&"function"==typeof i&&i(f.slider.currentValue,f.parent),f.stepper.stage&&f.stepper.stage.update()}),zot(r)||(f.stepper.currentValue=h+r*d),f},e.List.checkBox=function(t,o,n,r,i,a,l){var s,c="label, checked, call, obj, property, paddingLeft, paddingRight";if(s=zob(e.List.checkBox,arguments,c))return s;var u=new e.Container(620,100);return u.type="ListItem",u.listItem="CheckBox",zot(a)&&(a=20),zot(l)&&(l=30),e.List.makeBase(u,t,a),u.checkBox=new e.CheckBox({startChecked:o,label:""}).sca(1.2).center(u).pos(256+l,null,!0).change(function(){r&&i&&(r[i]=u.checkBox.checked),n&&"function"==typeof n&&n(u.checkBox.checked,u.parent),u.checkBox.stage&&u.checkBox.stage.update()}),u},e.List.colorPicker=function(t,o,n,r,i,a,l,s){var c,u="label, color, picker, call, obj, property, paddingLeft, paddingRight";if(c=zob(e.List.colorPicker,arguments,u))return c;var d=new e.Container(620,100);return d.type="ListItem",d.listItem="ColorPicker",zot(l)&&(l=20),zot(s)&&(s=30),e.List.makeBase(d,t,l),zot(o)&&(o=e.pink),d.colorPicker=n||new e.ColorPicker({alphaPicker:!1}),d.swatch=new e.Rectangle(132,66,o,e.lighter,5).center(d).pos(270,null,!0).cur(),d.swatch.on("mousedown",function(){d.colorPicker.selectedColor=d.swatch.color,d.colorPicker.show()}),d.colorLabel=new e.Label(d.swatch.color.toUpperCase(),40,null,e.light).center(d).pos(s,null,!0),d.colorPicker.on("close",function(){var e=d.colorPicker.stage;d.colorPicker.hide(),e&&e.update()}),d.colorPicker.on("change",function(){var e=d.colorPicker.stage;d.swatch.color=d.colorPicker.selectedColor,d.colorLabel.text=d.swatch.color.toUpperCase(),d.colorPicker.hide(),i&&a&&(i[a]=d.colorPicker.selectedColor),r&&"function"==typeof r&&r(d.colorPicker.selectedColor,d.parent),e&&e.update()}),d},e.List.checkItem=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z){var y,v="label, size, width, align, paddingHorizontal, paddingVertical, spacing, color, rollColor, selectedColor, selectedRollColor, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, group, inherit";if(y=zob(e.List.checkItem,arguments,v))return y;var b=e.getStyle("CheckBox",m,z);zot(o)&&(o=null!=b.size?b.size:20),b=e.getStyle("List",m,z),zot(n)&&(n=300),zot(i)&&(i=10),zot(a)&&(a=10),zot(r)&&(r=null!=b.align?b.align:"center"),zot(l)&&(l=null!=b.spacing?b.spacing:2),zot(h)&&(h=null!=b.backgroundColor?b.backgroundColor:"#777"),zot(g)&&(g=null!=b.rollBackgroundColor?b.rollBackgroundColor:"#555"),zot(p)&&(p=null!=b.selectedBackgroundColor?b.selectedBackgroundColor:"#444"),zot(f)&&(f=null!=b.selectedRollBackgroundColor?b.selectedRollBackgroundColor:"#555"),zot(s)&&(s=null!=b.color?b.color:"white"),zot(c)&&(c=null!=b.rollColor?b.rollColor:s),zot(u)&&(u=null!=b.selectedColor?b.selectedColor:s),zot(d)&&(d=null!=b.selectedRollColor?b.selectedRollColor:c);var w=new e.Container;return w.type="CheckItem",w.checkBox=new e.CheckBox({size:o,label:t,color:s,tap:!0}),w.backing=new e.Rectangle(n-2*l,w.checkBox.height+2*a,h).addTo(w),w.checkBox.center(w),"center"!=r&&"middle"!=r&&w.checkBox.pos(i,null,"right"==r),w.backing.tap(function(){w.checkBox.toggle(),w.zimOut()}),w.checkBox.change(function(){w.zimOut()}),w.zimOver=function(){w.backing.color=w.checkBox.checked?f:g,w.checkBox.label.color=w.checkBox.checked?d:c,w.stage&&w.stage.update()},w.zimOut=function(){w.backing.color=w.checkBox.checked?p:h,w.checkBox.label.color=w.checkBox.checked?u:s,w.stage&&w.stage.update()},w.backing.on("mouseover",w.zimOver),w.checkBox.on("mouseover",w.zimOver),w.backing.on("mouseout",w.zimOut),w.checkBox.on("mouseout",w.zimOut),w},e.Stepper=function(o,r,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y,D,X){function R(e){var t=String(e).split(".")[1];return t?t.length:0}function W(t,o,n,r,i){if(v){0==(we=r)&&(we=1),0==(Ce=i)&&(Ce=1),C||(x=1);var a=w*("s"==J?1e3:1),l=b*("s"==J?1e3:1),s=a;xe=new e.Proportion(0,k,a,a*x),de=setTimeout(function(){function e(){he=setTimeout(function(){var r=t;if(C){var i=Math.abs(ke-we),a=Math.abs(Te-Ce);d?(o||n||(i=0),n&&(a=0)):(o||n||(a=0),n&&(i=0)),(i>=10||a>=10)&&(i>a?(ae=d?B:S,r=ke-we>0?1:-1,s=xe.convert(Math.abs(we-ke))):(ae=d?S:B,r=Te-Ce>0?1:-1,"number"!=T&&L||(r*=-1),s=xe.convert(Math.abs(Ce-Te))))}F(r),e()},s)}e()},l)}}function H(){ee.zimAccessibility&&ee.zimAccessibility.aria||(clearTimeout(de),clearTimeout(he))}function F(t){var n;if("number"==T){var r=ne;ne+=ae*t*le,ne=e.decimals(ne,re),m?ne>ee.max?ne=ee.min:ne<ee.min&&(ne=ee.max):(ne>ee.max?(ne=1==S?ee.max:r,z&&(Pe.cursor="default")):z&&(Pe.cursor="pointer"),ne<ee.min&&(ne=1==S?ee.min:r))}else{if(n=$+t,m)n>o.length-1&&(n=0),n<0&&(n=o.length-1);else{if(n>o.length-1)return void(z&&(Pe.cursor="default"));if(z&&(Pe.cursor="pointer"),n<0)return}$=n}G("number"==T?ne:o[$],"number"==T?ne:$),ee.currentValue!=Ae&&ee.dispatchEvent("change"),Ae=ee.currentValue}function V(){ee.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function N(){ge.alpha=1,pe.color=a,ge.cursor="pointer",fe.alpha=1,me.color=a,fe.cursor="pointer",m||("number"==T?($==ee.min&&(le>0?q():Q()),$==ee.max&&(le>0?Q():q())):(0==$&&(d?Q():q()),$==o.length-1&&(d?q():Q())))}function G(t,o){$=o,z&&("number"==T&&0!=t&&re>0&&(t=e.decimals(t,re,!0)),c.text=t,c.center(ee)),h&&N(),!fe||e.OPTIMIZE||!zns&&OPTIMIZE||!fe.stage?!c||e.OPTIMIZE||!zns&&OPTIMIZE||!c.stage||c.stage.update():fe.stage.update(),ee.zimAccessibility&&ee.zimAccessibility.changeTitle(ee,null,!0)}function q(){h&&(ge.alpha=.8,pe.color="#aaa",ge.cursor="default")}function Q(){h&&(fe.alpha=.8,me.color="#aaa",fe.cursor="default")}var U,K="list, width, backgroundColor, borderColor, borderWidth, label, color, vertical, arrows, corner, shadowColor, shadowBlur, continuous, display, press, hold, holdDelay, holdSpeed, draggable, dragSensitivity, dragRange, stepperType, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward, selectedIndex, style, group, inherit";if(U=zob(e.Stepper,arguments,K,this))return U;z_d("61"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Stepper",this.group=D;var Z=!1===Y?{}:e.getStyle(this.type,this.group,X);zot(o)&&(o=null!=Z.list?Z.list:[]),zot(r)&&(r=null!=Z.width?Z.width:200),zot(a)&&(a=null!=Z.backgroundColor?Z.backgroundColor:"white"),zot(l)&&(l=null!=Z.borderColor?Z.borderColor:null),zot(s)&&(s=null!=Z.borderWidth?Z.borderWidth:null),l<0||s<0?l=s=null:null!=l&&null==s&&(s=1),zot(u)&&(u=null!=Z.color?Z.color:"#555"),zot(c)&&(c=null!=Z.label?Z.label:""),"string"!=typeof c&&"number"!=typeof c||(c=new e.Label({text:c,size:null!=Z.size?2*Z.size:64,color:u,align:null!=Z.align?Z.align:"center",valign:null!=Z.valign?Z.valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),zot(d)&&(d=null!=Z.vertical&&Z.vertical),zot(h)&&(h=null==Z.arrows||Z.arrows),zot(g)&&(g=null!=Z.corner?Z.corner:16),zot(p)&&(p=null!=Z.shadowColor?Z.shadowColor:"rgba(0,0,0,.3)"),zot(f)&&(f=null!=Z.shadowBlur?Z.shadowBlur:14),zot(m)&&(m=null!=Z.continuous&&Z.continuous),zot(z)&&(z=null==Z.display||Z.display),zot(y)&&(y=null==Z.press||Z.press),zot(v)&&(v=null==Z.hold||Z.hold);var J=t(b);zot(b)&&(b=null!=Z.holdDelay?Z.holdDelay:"s"==J?.4:400),zot(w)&&(w=null!=Z.holdSpeed?Z.holdSpeed:"s"==J?.2:200),n(w,J),zot(C)&&(C=null==Z.draggable||Z.draggable),(zot(x)||x<=0)&&(x=null!=Z.dragSensitivity?Z.dragSensitivity:.1),zot(k)&&(k=null!=Z.dragRange?Z.dragRange:200),zot(T)&&(T=null!=Z.stepperType?Z.stepperType:o.length>0?"list":"number"),zot(A)&&(A=null!=Z.min?Z.min:0),zot(P)&&(P=null!=Z.max?Z.max:10),zot(S)&&(S=null!=Z.step?Z.step:1),zot(B)&&(B=null!=Z.step2?Z.step2:S),zot(E)&&B!=S&&"number"==T&&(E=null==Z.arrows2||Z.arrows2),zot(I)&&(I=null!=Z.arrows2Scale?Z.arrows2Scale:.5),zot(M)&&(M=null==Z.keyEnabled||Z.keyEnabled),zot(O)&&(O=null==Z.keyArrows||Z.keyArrows),zot(j)&&(j=null==Z.rightForward||Z.rightForward),zot(L)&&(L=null!=Z.downForward?Z.downForward:"number"!=T);var $,ee=this,te=100,oe=te/4;a=zik(a);var ne,re,ie,ae=S,le=1;if("number"==T){if(A=Number(A),P=Number(P),A==NaN&&(A=0),P==NaN&&(P=100),P<A){le=-1;var se=P;P=A,A=se,ne=P}else ne=A;this.min=A,this.max=P,0>A&&0<P&&(ne=0),S=Math.abs(S),re=Math.max(R(S),R(B))}else if("letter"==T){o="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),"string"!=typeof A&&(A="A"),"string"!=typeof P&&(P="Z"),A=A.substr(0,1).toUpperCase(),P=P.substr(0,1).toUpperCase();var ce=o.indexOf(A);ce<0&&(A="A",ce=0);var ue=o.indexOf(P);ue<0&&(P="Z",ue=o.length),ue<ce&&(o.reverse(),ce=o.length-1-ce,ue=o.length-1-ue),o=o.splice(ce,ue-ce+1)}else T="list";var de,he,ge,pe,fe,me,ze,ye,ve,be,we,Ce,xe,ke=0,Te=0;if(C&&this.on("mousedown",function(t){ee.zimAccessibility&&ee.zimAccessibility.aria||(this.stage.mouseMoveOutside=!0,ke=t.rawX/e.scaX,Te=t.rawY/e.scaY,ie=this.stage.on("stagemousemove",function(t){ke=t.rawX/e.scaX,Te=t.rawY/e.scaY}))},null,!0),this.label=c,c.mouseChildren=!1,c.mouseEnabled=!1,h&&(ge=this.containerPrev=new e.Container({style:!1}),this.addChild(ge),pe=this.arrowPrev=new e.Triangle(te,.8*te,.8*te,a,null,null,null,null,null,null,!1),-1!=p&&f>0&&(ge.shadow=new createjs.Shadow(p,3,3,f)),ge.addChild(pe),ge.expand(),ge.cursor="pointer",ge.on("mousedown",function(t){if(!ee.zimAccessibility||!ee.zimAccessibility.aria){ae=S;var o=d?L?1:-1:j?-1:1;F(o),W(o,null,null,t.stageX/e.scaX,t.stageY/e.scaY)}}),v&&ge.on("pressup",H),d?(ge.rotation=180,ge.x=r/2,ge.y=z?ge.height+oe+te+ge.height/2+oe:2*ge.height):(ge.rotation=-90,ge.x=ge.height/2,ge.y=ge.width/2)),z){var Ae,Pe=this.textBox=new e.Rectangle(r,te,a,l,s,g,null,null,!1);Pe.cursor="pointer",this.addChild(Pe),-1!=p&&f>0&&(Pe.shadow=new createjs.Shadow(p,3,3,f)),h&&(d?h&&(Pe.y=pe.height+oe):h&&(Pe.x=pe.height+oe)),this.addChild(c),o.length>0&&($=0,c.text=o[$]),c.center(ee),Pe.on("mousedown",function(t){ee.zimAccessibility&&ee.zimAccessibility.aria||(Ae=ee.currentValue,y&&F(1),W(1,!0,null,t.stageX/e.scaX,t.stageY/e.scaY))}),Pe.on("pressup",function(){!ee.zimAccessibility||ee.zimAccessibility.aria})}else o.length>0&&($=0);h&&(fe=this.containerNext=new e.Container({style:!1}),this.addChild(fe),me=this.arrowNext=new e.Triangle(te,.8*te,.8*te,a,null,null,null,null,null,null,!1),-1!=p&&f>0&&(fe.shadow=new createjs.Shadow(p,3,3,f)),fe.addChild(me),fe.expand(),fe.cursor="pointer",fe.on("mousedown",function(t){if(!ee.zimAccessibility||!ee.zimAccessibility.aria){ae=S;var o=d?L?-1:1:j?1:-1;F(o),W(o,null,null,t.stageX/e.scaX,t.stageY/e.scaY)}}),v&&fe.on("pressup",H),d?(fe.rotation=0,fe.x=r/2,fe.y=fe.getBounds().height/2):(fe.rotation=90,fe.x=z?Pe.x+Pe.getBounds().width+fe.getBounds().height/2+oe:ge.x+ge.getBounds().width,fe.y=fe.getBounds().width/2)),v&&z&&Pe.on("pressup",H),E&&(ze=this.prev2=new e.Container({style:!1}),ye=this.arrowPrev2=new e.Triangle(te,.8*te,.8*te,"rgba(0,0,0,.2)",a,2,null,null,null,null,!1),ze.addChild(ye),ze.expand(),ze.cursor="pointer",ze.sca(I),ze.alpha=.5,ze.on("mousedown",function(t){if(!ee.zimAccessibility||!ee.zimAccessibility.aria){ae=B;var o=d?j?-1:1:L?1:-1;F(o),W(o,null,!0,t.stageX/e.scaX,t.stageY/e.scaY)}}),v&&ze.on("pressup",H),ve=this.next2=new e.Container({style:!1}),be=this.arrowNext2=new e.Triangle(te,.8*te,.8*te,"rgba(0,0,0,.2)",a,2,null,null,null,null,!1),ve.addChild(be),ve.expand(),ve.cursor="pointer",ve.sca(I),ve.alpha=.5,ve.on("mousedown",function(t){if(!ee.zimAccessibility||!ee.zimAccessibility.aria){ae=B;var o=d?j?1:-1:L?-1:1;F(o),W(o,null,!0,t.stageX/e.scaX,t.stageY/e.scaY)}}),v&&ve.on("pressup",H),d?(ze.y=this.height/2,ze.x=-ze.width/2-oe*Math.max(.2,Math.min(1,I)),ze.rotation=270,ve.y=this.height/2,ve.x=this.width+ve.width/2+oe*Math.max(.2,Math.min(1,I)),ve.rotation=90):(ve.x=this.width/2,ve.y=-ve.height/2-oe*Math.max(.2,Math.min(1,I)),ve.rotation=0,ze.x=this.width/2,ze.y=this.height+ze.height/2+oe*Math.max(.2,Math.min(1,I)),ze.rotation=180),this.addChild(ze,ve)),Object.defineProperty(this,"stepperArray",{get:function(){if("number"==T){o=[];for(var t=ee.min;t<=ee.max;t+=Math.min(S,B))o.push(e.decimals(t,re,null,!1))}return o},set:function(e){o=e,ee.selectedIndex=ee.selectedIndex}}),Object.defineProperty(this,"min",{get:function(){return A},set:function(e){"number"==T?(ee.currentValue<e&&(ee.currentValue=e),A=e,ee.selectedIndex=ee.selectedIndex):A=e}}),Object.defineProperty(this,"max",{get:function(){return P},set:function(e){"number"==T?(ee.currentValue>e&&(ee.currentValue=e),P=e,ee.selectedIndex=ee.selectedIndex):P=e}}),G("number"==T?ne:o[$],"number"==T?ne:$),Object.defineProperty(this,"selectedIndex",{get:function(){return"number"==T?ee.stepperArray.indexOf(ee.currentValue):$},set:function(e){zot(e)||("number"==T?($=Math.min(ee.stepperArray.length-1,Math.max(0,e)),G(ne=ee.stepperArray[$],ne)):(e=Math.min(o.length-1,Math.max(0,e)),G(o[$=e],$)))}}),Object.defineProperty(this,"currentValue",{get:function(){return"number"==T?ne:o[$]},set:function(e){if(!zot(e))if("number"==T){if(e=Number(e),ee.max>ee.min){if(e>ee.max||e<ee.min)return}else if(e<ee.max||e>ee.min)return;var t=ee.stepperArray.indexOf(e);if(t<0)return;$=t,G(ne=ee.stepperArray[$],ne)}else{if(!(o.indexOf(e)>-1))return;if((e=o.indexOf(e))==ee.selectedIndex)return;G(o[$=e],$)}}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return ee.currentValue},set:function(e){String(e)!=String(ee.currentValue)&&(ee.currentValue=e,ee.dispatchEvent("change"))}}),Object.defineProperty(this,"continuous",{get:function(){return m},set:function(e){m=e,"number"==T?G(ne,ne):G(o[ee.selectedIndex],ee.selectedIndex)}}),this._enabled=!0,Object.defineProperty(ee,"enabled",{get:function(){return ee._enabled},set:function(t){i(ee,t),t?("number"==T?G(ne,ne):G(o[ee.selectedIndex],ee.selectedIndex),window.addEventListener("keydown",ee.keyDownEvent)):(q(),Q(),window.removeEventListener("keydown",ee.keyDownEvent),z&&(c.mouseChildren=!1),z&&(c.mouseEnabled=!1)),!fe||e.OPTIMIZE||!zns&&OPTIMIZE||!fe.stage?!c||e.OPTIMIZE||!zns&&OPTIMIZE||!c.stage||c.stage.update():fe.stage.update()}}),typeof KEYFOCUS!=typeof undefined&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==ee},set:function(){e.KEYFOCUS=ee}}),e.KEYFOCUS||V(),this.on("mousedown",function(){V()});var Se=!1,Be=!0,Ee="";this.on("mousedown",function(){Be=!0,Ee="",ee.zimAccessibility&&ee.zimAccessibility.aria||(ee.focus=!0,Se=!1)}),this.keyDownEvent=function(e){if(ee.stage&&(ee.zimAccessibility&&ee.focus||!ee.zimAccessibility&&ee.keyFocus)){e||(e=event);var t=e.keyCode;if(O&&t>=37&&t<=40){var o=L?40:38,n=j?39:37,r=L?38:40,i=j?37:39;t==o||t==n?(ae=d&&t==o||!d&&t==n?S:B,F(1)):t!=r&&t!=i||(ae=d&&t==r||!d&&t==i?S:B,F(-1))}if(M)if("number"==T){var a=null,l=null;if(8==t){var s=String(Ee).split("");s.pop(),a=s.pop(),Ee=s.join("")}if(!e.shiftKey&&t>=48&&t<=57?a=t-48:t>=96&&t<=105?a=t-96:190==t?(Ee=String(Ee)+".",l=!0):173==t||189==t?(ee.currentValue=-1*ee.currentValue,ee.currentValue!=Ae&&ee.dispatchEvent("change"),Ae=ee.currentValue,Se=!Se):46==t&&(Be=!0,Ee=""),zot(a)&&zot(l))return Be=!0,void(Ee="");if(zot(a))return;if(Be?(Be=!1,Ee=a):Ee=a=Number(Ee+""+a),a<A||a>P)return;ee.currentValue=a,ee.currentValue!=Ae&&ee.dispatchEvent("change"),Ae=ee.currentValue}else Be=!0,Ee="",ee.currentValue=String.fromCharCode(e.keyCode),ee.currentValue!=Ae&&ee.dispatchEvent("change"),Ae=ee.currentValue}},window.addEventListener("keydown",this.keyDownEvent),this.next=function(){F(1)},this.prev=function(){F(-1)},zot(_)&&(_=null!=Z.selectedIndex?Z.selectedIndex:0),ee.selectedIndex=_,!1!==Y&&e.styleTransforms(this,Z),this.clone=function(){return ee.cloneProps(new e.Stepper(o,r,a,l,s,c.clone(),u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y,this.group,X))},this.dispose=function(e,t,o){return window.removeEventListener("keydown",ee.keyDownEvent),ee.removeAllEventListeners(),ee.stage&&ee.stage.off(ie),o||this.zimContainer_dispose(!0),ge=this.containerPrev=pe=this.arrowPrev=null,fe=this.containerNext=me=this.arrowNext=null,Pe=this.textBox=c=this.label=null,!0}},e.zut=function(t){if(zot(t)||!t.key)return!0;e.async("https://zimjs.com/gamdata.php?id="+t.key+"&player="+t.player+"&score="+t.score+"&reverse="+t.info.reverse+"&total="+t.info.total+"&allowZero="+t.info.allowZero,t.info.type)},e.extend(e.Stepper,e.Container,["clone","dispose"],"zimContainer",!1),e.Slider=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y){function D(e){return 0==n?e:Math.round(e/n)*n}function X(n){var i=Q.globalToLocal(n.stageX/e.scaX,n.stageY/e.scaY),a=H(i.x-pe,i.y-fe,ue);c?(r.x=a.x,ye=D((a.y-ue.y)/ue.height*(t-o)),r.y=ue.y+ye*ue.height/(t-o),ye+=o,r.y!=ve&&Q.dispatchEvent("change"),ve=r.y):(ye=D((a.x-ue.x)/ue.width*(o-t)),r.x=ue.x+ye*ue.width/(o-t),ye+=t,r.y=a.y,r.x!=ve&&Q.dispatchEvent("change"),ve=r.x),U&&K(),W(),e.OPTIMIZE||!zns&&OPTIMIZE||!Q.stage||Q.stage.update()}function R(e){return e>0?1:-1}function W(){Q.zimAccessibility&&Q.zimAccessibility.changeTitle(Q,null,!0)}function H(e,t,o){return{x:e=Math.max(o.x,Math.min(o.x+o.width,e)),y:t=Math.max(o.y,Math.min(o.y+o.height,t))}}function F(){Q.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function V(){(Be||Ee)&&(Q.currentValueEvent-=n>0?n*R(o-t):k*R(o-t)),(Ie||Me)&&(Q.currentValueEvent+=n>0?n*R(o-t):k*R(o-t))}var N,G="min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, inside, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, damp, currentValue, expand, expandVertical, expandBar, expandBarVertical, useLabels, labelMargin, style, group, inherit";if(N=zob(e.Slider,arguments,G,this))return N;z_d("62"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Slider",this.group=_;var q=!1===L?{}:e.getStyle(this.type,this.group,Y);if(zot(t)&&(t=null!=q.min?q.min:0),zot(o)&&(o=null!=q.max?q.max:10),o-t!=0){zot(w)&&(w=null!=q.sound&&q.sound),zot(n)&&(n=null!=q.step?q.step:0),zot(r)&&(r=null!=q.button?q.button:w?"aztec":null),zot(a)&&(a=null!=q.barLength?q.barLength:300),zot(l)&&(l=null!=q.barWidth?q.barWidth:3),zot(s)&&(s=null!=q.barColor?q.barColor:w?e.lighter:"#666"),zot(c)&&(c=null!=q.vertical?q.vertical:!!w),zot(u)&&(u=null!=q.useTicks?q.useTicks:!!w),zot(h)&&(h=null!=q.tickStep?q.tickStep:n||(u||w?(t-o)/40:0)),zot(g)&&(g=null!=q.semiTicks?q.semiTicks:h?3:0),zot(d)&&(d=null!=q.tickColor?q.tickColor:w?e.tin:s),zot(p)&&(p=null!=q.tickScale?q.tickScale:w?1.25:1),zot(f)&&(f=null!=q.semiTickScale?q.semiTickScale:1),zot(m)&&(m=null!=q.accentSize?q.accentSize:w?10:0),zot(z)&&(z=null!=q.accentOffset?q.accentOffset:w?-(m+l)/2:0),zot(y)&&(y=null!=q.accentColor?q.accentColor:e.pink),zot(v)&&(v=null!=q.accentBackgroundColor?q.accentBackgroundColor:w?e.blue:e.clear),zot(b)&&(b=null!=q.accentDifference?q.accentDifference:-.5),zot(C)&&(C=null!=q.inside&&q.inside),zot(x)&&(x=null==q.keyArrows||q.keyArrows),zot(T)&&(T=null==q.keyArrowsH||q.keyArrowsH),zot(A)&&(A=null==q.keyArrowsV||q.keyArrowsV),zot(k)&&(k=null!=q.keyArrowsStep?q.keyArrowsStep:(o-t)/100),zot(P)&&(P=null!=q.damp&&q.damp),zot(S)&&(S=null!=q.currentValue&&q.currentValue),zot(B)&&(B=null!=q.expand?q.expand:e.mobile()?10:null),zot(E)&&(E=null!=q.expandVertical?q.expandVertical:B),zot(I)&&(I=null!=q.expandBar?q.expandBar:null),zot(M)&&(M=null!=q.expandBarVertical?q.expandBarVertical:B),zot(O)&&(O=null!=q.useLabels&&q.useLabels),zot(j)&&(j=null!=q.labelMargin?q.labelMargin:20);var Q=this;if(m){Q.accentBacking=new e.Rectangle(a-.25,m+b,v).addTo(this).rot(c?90:0).mov(c?-z-l/2+b/2:.25,c?0:z+l/2-b/2);var U=Q.accent=new e.Rectangle(a,m,y).sca(0,1).rot(c?-90:0).mov(c?-z-m-l/2:0,c?a:z+l/2).addTo(this);function K(){U.sca((Q.currentValue-Q.min)/Math.abs(Q.max-Q.min),1)}}var Z,J,$=!(!zot(q.backing)&&"Pattern"!=q.backing.type);if(zot(r)||"string"==typeof r){var ee,te=30,oe=40;if(c&&(te=50,oe=40),"pill"==r||"aztec"==r||"circle"==r||"grip"==r){if("pill"==r)ee={width:c?40:18,height:c?18:40,borderColor:e.tin,borderWidth:3,corner:8};else if("aztec"==r){function ne(t){var o=new e.Shape(te,oe);return o.f(t).s(null!=q.borderColor?q.borderColor:e.tin).ss(null!=q.borderWidth?q.borderWidth:3).mt(2,0).lt(te+2,.2*oe).lt(te+2,.8*oe).lt(2,oe).cp().centerReg({add:!1}),o}te=null!=q.width?q.width:.9*Math.max(te,oe),oe=null!=q.height?q.height:.6*Math.min(te,oe);var re=ne(null!=q.backgroundColor?q.backgroundColor:e.lighter).rot(c?0:-90),ie=ne(null!=q.rollBackgroundColor?q.rollBackgroundColor:e.white).rot(c?0:-90);ee={width:te,height:oe,backing:re,rollBacking:ie},q.borderWidth=0,q.borderColor=0}else"circle"==r&&(te=null!=q.width?q.width:30,oe=null!=q.height?q.height:30,ee={width:te,height:te,corner:null!=q.corner?q.corner:te/2});Q.buttonType=r}var ae=null!=q.borderColor?q.borderColor:ee?ee.borderColor:$?"#666":null;if(r=new e.Button({width:null!=q.width?q.width:ee?ee.width:te,height:null!=q.height?q.height:ee?ee.height:oe,label:"",backgroundColor:null!=q.backgroundColor?q.backgroundColor:"#fff",rollBackgroundColor:null!=q.rollBackgroundColor?q.rollBackgroundColor:"#ddd",borderColor:ae,borderRollColor:null!=q.borderRollColor?q.borderRollColor:ae,borderWidth:null!=q.borderWidth?q.borderWidth:ee?ee.borderWidth:$?1:null,corner:null!=q.corner?q.corner:ee?ee.corner:0,backing:null!=q.backing?q.backing.clone():ee?ee.backing:null,rollBacking:null!=q.rollBacking?q.rollBacking.clone():ee?ee.rollBacking:null,shadowColor:null!=q.shadowColor?q.shadowColor:null,shadowBlur:null!=q.shadowBlur?q.shadowBlur:null,hitPadding:30,style:!1}),"circle"==Q.buttonType)r.scaleY=oe/te,c||r.rot(-90);else if("grip"==Q.buttonType){var le=[1,1,1],se=.4;e.loop(le,function(t,o,n){c?new e.Line(.62*r.width,t,r.borderColor?r.borderColor:e.grey).pos(0,r.height*se/2+(o+1)*(r.height*(1-se))/(n+1),e.CENTER,e.TOP,r):new e.Line(.62*r.height,t,r.borderColor?r.borderColor:e.grey).rot(90).pos(r.width*se/2+(o+1)*(r.width*(1-se))/(n+1),0,e.LEFT,e.CENTER,r)})}}r.rollPersist=!0,zot(B)&&zot(E)||r.expand(B,E),c?(Z=r.width,C?(J=a,this.setBounds(0,0,Z,J)):(J=a+r.height,this.setBounds(-r.width/2,-r.height/2,Z,J))):(J=Math.max(r.height,l),C?(Z=a,this.setBounds(0,0,Z,J)):(Z=a+r.width,this.setBounds(-r.width/2,-r.height/2,Z,J)));var ce,ue,de,he,ge,pe,fe,me,ze,ye=t,ve=0;if(this.button=r,this.cursor="pointer",u){he=this.ticks=new e.Shape({style:!1}),this.addChild(he),(ge=he.graphics).ss(1).s(d);var be=Math.round((o-t)/(h||n)),we=(o-t)/be;if(h?(we!=h&&zon&&zogy("Slider() - non-divisible step ("+h+") adjusted to "+we),h=we):(we!=n&&zon&&zogy("Slider() - non-divisible step ("+n+") adjusted to "+we),n=we),C)var Ce=(a-(c?r.height:r.width))/Math.abs(be);else Ce=a/Math.abs(be)}if(c){var xe=C?r.height/2:0;if(ce=this.bar=new e.Rectangle(l,a,s,null,null,null,null,null,!1),I?ce.expand(I,expandBarVerticical):ce.expand(20,0),ce.centerReg(this),r.centerReg(this),de=ce.getBounds(),ue=new createjs.Rectangle(ce.x,de.y+xe,0,de.height-2*xe),u){for(var ke=0;ke<=Math.abs(be);ke++){var Te=(Se=ke%(g+1)==0)?25*p:15*f,Ae=xe+Ce*ke;if(ge.mt(0,Ae).lt(Te,Ae),O&&(g&&Se||!g)){var Pe=Q.labels=new Container(Q.width,Q.height).addTo(Q);new Label({text:o-(o-t)/Math.abs(be)*ke,size:q.size?q.size:10,align:"left",valign:"center"}).centerReg({add:!1}).reg(0).loc(Te+j+2,Ae-1,Pe)}}he.x=ce.x+15}}else if(xe=C?r.width/2:0,ce=this.bar=new e.Rectangle(a,l,s,null,null,null,null,null,!1),I?ce.expand(I,expandBarVerticical):ce.expand(0,20),ce.centerReg(this),r.centerReg(this),de=ce.getBounds(),ue=new createjs.Rectangle(de.x+xe,ce.y,de.width-2*xe,0),u){for(ke=0;ke<=Math.abs(be);ke++){var Se;Te=xe+Ce*ke,Ae=-((Se=ke%(g+1)==0)?25*p:15*f),ge.mt(Te,0).lt(Te,Ae),O&&(g&&Se||!g)&&(Pe=Q.labels=new Container(Q.width,Q.height).addTo(Q),new Label({text:t+(o-t)/Math.abs(be)*ke,size:q.size?q.size:10,align:"center",valign:"center"}).centerReg({add:!1}).loc(Te,Ae-j,Pe))}he.y=ce.y-10}r.x=ue.x,r.y=ue.y,r.on("mousedown",function(t){t.target.stage,Q.focus=!0;var o=Q.globalToLocal(t.stageX/e.scaX,t.stageY/e.scaY);pe=o.x-r.x,fe=o.y-r.y,Q.stage&&(Q.stage.mouseMoveOutside=!0)}),r.on("pressmove",function(e){X(e)}),ce.on("mousedown",function(e){e.target.stage,pe=0,fe=0,Q.zimAccessibility&&Q.zimAccessibility.aria||X(e)}),P&&(me=t,ze=new e.Damp(me,P),Q.ticker=e.Ticker.add(function(){me=ze.convert(ye)})),Object.defineProperty(this,"currentValue",{get:function(){return P?me:ye},set:function(n){zot(n)||(t<o?(n<t&&(n=t),n>o&&(n=o)):(n>t&&(n=t),n<o&&(n=o)),ye=n=D(n),ze&&ze.immediate(ye),c?(r.y=(n-o)/(t-o)*ue.height+xe,ve=r.y):(r.x=(n-t)/(o-t)*ue.width+xe,ve=r.x),U&&K(),W(),e.OPTIMIZE||!zns&&OPTIMIZE||!Q.stage||Q.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return P?me:ye},set:function(e){e!=Q.currentValue&&(Q.currentValue=e,Q.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return t},set:function(){zon&&zogy("Slider() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return o},set:function(){zon&&zogy("Slider() - max is read only")}}),Object.defineProperty(this,"step",{get:function(){return n},set:function(){zon&&zogy("Slider() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return T},set:function(e){T=e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return A},set:function(e){A=e}}),typeof KEYFOCUS!=typeof undefined&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==Q},set:function(){e.KEYFOCUS=Q}}),x&&!e.KEYFOCUS&&F(),this.on("mousedown",function(){x&&F()});var Be=!1,Ee=!1,Ie=!1,Me=!1;this.keyDownEvent=function(e){Q.stage&&(Q.zimAccessibility&&Q.focus||!Q.zimAccessibility&&Q.keyFocus)&&(37==e.keyCode&&T?Be=!0:40==e.keyCode&&A?Ee=!0:39==e.keyCode&&T?Ie=!0:38==e.keyCode&&A&&(Me=!0),null==Q.keyInterval&&(Be||Ee||Ie||Me)&&(V(),Q.keyTimeout=setTimeout(function(){null==Q.keyInterval&&(Be||Ee||Ie||Me)&&(Q.keyInterval=setInterval(V,40))},140)))},window.addEventListener("keydown",this.keyDownEvent),Q.keyUpEvent=function(e){37==e.keyCode?Be=!1:40==e.keyCode?Ee=!1:39==e.keyCode?Ie=!1:38==e.keyCode&&(Me=!1),null==Q.keyInterval||Be||Ee||Ie||Me||(clearInterval(Q.keyInterval),Q.keyInterval=null)},window.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(Q,"enabled",{get:function(){return Q._enabled},set:function(e){i(Q,e),e?(window.addEventListener("keydown",Q.keyDownEvent),window.addEventListener("keyup",Q.keyUpEvent)):(window.removeEventListener("keydown",Q.keyDownEvent),window.removeEventListener("keyup",Q.keyUpEvent))}}),zot(S)||(Q.currentValue=S),!1!==L&&e.styleTransforms(this,q),this.clone=function(){return Q.cloneProps(new e.Slider(t,o,n,r.clone(),a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,this.group,Y))},this.dispose=function(e,t,o){return window.removeEventListener("keydown",Q.keyDownEvent),window.removeEventListener("keyup",Q.keyUpEvent),o||this.zimContainer_dispose(!0),!0}}else zog("ZIM Slider range must not be 0")},e.extend(e.Slider,e.Container,["clone","dispose"],"zimContainer",!1),
e.Selector=function(o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b){function w(t,n,r){zot(r)&&(r=Y),L=t,z=t.tileNum,r.color=S[z],r.borderColor=P[z],g&&(M.upItem=M.upIndex=null,M.downItem=L,M.downIndex=z),M.animating=!0;var i=o.localToLocal(t.x,t.y,M),a=Math.abs(i.x-Y.x),l=Math.abs(i.y-Y.y),p=M.noAnimate||n?0:u;if(M.noAnimate=!1,0==p)r.loc(i.x,i.y).siz(t.width+2*s,t.height+2*c),M.animating=!1,M.dispatchEvent("change");else if(d||(a+l)*p<=0?r.animate({x:i.x,y:i.y},(l+a)*p):a>=l?r.animate([{props:{x:i.x},time:Math.max("s"==A?.1:100,a*p/("s"==A?1e3:1))},{props:{y:i.y},time:Math.max("s"==A?.1:100,l*p/("s"==A?1e3:1))}]):r.animate([{props:{y:i.y},time:Math.max("s"==A?.1:100,l*p/("s"==A?1e3:1))},{props:{x:i.x},time:Math.max("s"==A?.1:100,a*p/("s"==A?1e3:1))}]),r.animate({props:{widthOnly:t.width+2*s,heightOnly:t.height+2*c},time:Math.max("s"==A?.2:200,(l+a)*p/("s"==A?1e3:1)),call:function(){M.animating=!1,M.dispatchEvent("change")}}),h){if(!0===h)var f=.7;else f=e.constrain(h,0,1);o.animate({props:{alpha:f},rewind:!0,time:(l+a)*u*.7/("s"==A?1e3:1)})}o.stage&&o.stage.update()}function C(){M.keyFocus=!0;var e=document.activeElement;e&&e.blur()}var x,k="tile, borderColor, borderWidth, backgroundColor, corner, dashed, paddingHorizontal, paddingVertical, speed, diagonal, dim, multi, keyArrows, behind, resizeScale, selectedIndex, style, group, inherit";if(x=zob(e.Selector,arguments,k,this))return x;z_d("62.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Selector",this.group=v;var T=!1===y?{}:e.getStyle(this.type,this.group,b),A=t();zot(o)&&(o=null!=T.tile?T.tile:new e.Tile(new e.Circle(20,e.red),4,4,10,10)),zot(n)&&(n=null!=T.borderColor?T.borderColor:"white"),zot(r)&&(r=null!=T.borderWidth?T.borderWidth:2),zot(i)&&(i=null!=T.backgroundColor?T.backgroundColor:"rgba(0,0,0,.1)"),zot(a)&&(a=null!=T.corner?T.corner:10),zot(l)&&(l=null!=T.dashed&&T.dashed),zot(s)&&(s=null!=T.padding?T.padding:o.spacingH/2),zot(c)&&(c=null!=T.paddingVertical?T.paddingVertical:o.spacingV/2),zot(u)&&(u=null!=T.speed?T.speed:2),zot(d)&&(d=null!=T.diagonal&&T.diagonal),zot(h)&&(h=null!=T.dim&&T.dim),zot(g)&&(g=null!=T.multi&&T.multi),g&&(u=0),zot(p)&&(p=null==T.keyArrows||T.keyArrows),zot(f)&&(f=null!=T.behind&&T.behind),zot(m)&&(m=null!=T.resizeScale&&T.resizeScale),zot(z)&&(z=null!=T.selectedIndex?T.selectedIndex:null);var P=[],S=[];e.loop(o.items.length,function(){P.push(zik(n)),S.push(zik(i))});var B,E,I,M=this;if(!zot(z)||!g){var O=z,j=zot(z)||z<0?0:z,L=o.getChildAt(j);M.currentItem=o.getChildAt(j),zot(z=O)&&(z=null!=T.selectedIndex?T.selectedIndex:0)}if((B=L||o.getChildAt(0))&&(E=B.width+2*s,I=B.height+2*c),M.tile=o.addTo(M).cur(),g){var _=this.selectors=[];e.loop(10,function(){(Y=new e.Rectangle(E,I,e.faint,e.faint,r,a,l,{ignoreScale:!m}).centerReg(M,f?0:1)).visible=!1,_.push(Y),Y.mouseEnabled=!1}),this.selector=Y}else{var Y;(Y=this.selector=new e.Rectangle(E,I,e.faint,e.faint,r,a,l,{ignoreScale:!m}).centerReg(M)).loc(o.width/2,B.y+c,M,f?0:1),Y.visible=!1}z<0||zot(L)||(Y.loc(B.x+s,B.y+c,M,f?0:1),Y.color=S[z],Y.borderColor=P[z],Y.visible=!0),o.mov(s,c),this.setBounds(o.width+2*s,o.height+2*c);var D={};this.tileDown=o.on("mousedown",function(e){var t=Y;if(!g||!zot(t=_.shift())){t.visible=!0;for(var n=e.target,r=0;n.parent!=o&&r<10;)n=n.parent,r++;if(n.parent==o&&w(n,null,t),g){var i="id"+Math.abs(e.pointerID+1);D[i]={index:z,item:L,selector:t}}}}),g&&(this.tileMove=o.on("pressmove",function(t){var n="id"+Math.abs(t.pointerID+1),r=D[n];if(!zot(r)){var i=o.itemUnderPoint(t.stageX/e.scaX,t.stageY/e.scaY);if(r.item!=i){if(M.upItem=r.item,M.upIndex=r.index,M.downItem=r.item=i,M.downIndex=r.index=i?i.tileNum:null,M.dispatchEvent("change"),zot(i))r.selector.visible=!1;else{var a=o.localToLocal(i.x,i.y,M);r.selector.loc(a.x,a.y).siz(i.width+2*s,i.height+2*c),r.selector.color=S[r.index],r.selector.borderColor=P[r.index],r.selector.visible=!0}M.stage.update()}}}),this.tileUp=o.on("pressup",function(t){var o="id"+Math.abs(t.pointerID+1),n=D[o];zot(n)||(M.downIndex=M.downItem=null,M.upIndex=n.index,M.upItem=n.item,_.push(n.selector),n.selector.visible=!1,M.dispatchEvent("change"),M.stage&&!e.OPTIMIZE&&M.stage.update(),delete D[o])})),M.noAnimate=!1,p&&M.added(function(){M.keyEvent=M.stage.frame.on("keydown",function(t){if(M.stage&&!M.animating&&(M.zimAccessibility&&M.focus||!M.zimAccessibility&&M.keyFocus)){var n=e.loop(o.items2D,function(t,o){var n=e.loop(t,function(e,t){if(e==L)return[t,o]});if(Array.isArray(n))return n});!0===n&&(n=[0,0]);var r=o.items2D[n[1]].length,i=o.items2D.length;if("39"==t.keyCode){var a=(n[0]+1)%r;w(o.items2D[n[1]][a],a<n[0])}else"37"==t.keyCode?(a=(n[0]-1+r)%r,w(o.items2D[n[1]][a],a>n[0])):"38"==t.keyCode?(a=(n[1]-1+i)%i,w(o.items2D[a][n[0]],a>n[1])):"40"==t.keyCode&&(a=(n[1]+1)%i,w(o.items2D[a][n[0]],a<n[1]))}})}),Object.defineProperty(this,"selectedIndex",{get:function(){return z},set:function(e){zot(e)&&(M.currentItem=null),M.currentItem=o.items[e]}}),Object.defineProperty(this,"text",{get:function(){return L.text},set:function(){zon&&zogy("Selector() - text is read only")}}),Object.defineProperty(this,"currentItem",{get:function(){return L},set:function(e){if(zot(e))return L=null,z=null,Y.visible=!1,M.selectedCol=null,void(M.selectedRow=null);Y.visible=!0,M.lastItem=L,M.lastIndex=z,M.lastCol=M.selectedCol,M.lastRow=M.selectedRow,M.selectedCol=e.tileCol,M.selectedRow=e.tileRow,z=e.tileNum,w(L=e)}}),typeof KEYFOCUS!=typeof undefined&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==M},set:function(){e.KEYFOCUS=M}}),e.KEYFOCUS||C(),this.on("mousedown",function(){C()}),!1!==y&&e.styleTransforms(this,T),this.clone=function(t){if(t)for(var y=[],v=0;v<M.tile.items.length;v++)y.push(M.tile.items[v].clone(!0));return M.cloneProps(new e.Selector(t?e.series(y):o.clone?o.clone():o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,this.style,this.group))},this.dispose=function(e,t,n){M.keyEvent&&M.stage&&M.stage.frame.off("keydown",M.keyEvent),o.off(M.tileDown),o.dispose(),g&&(o.off(M.tileMove),o.off(M.tileUp)),n||this.zimContainer_dispose(!0)}},e.extend(e.Selector,e.Container,["clone","dispose"],"zimContainer",!1),e.Dial=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y,D,X,R,W,H){function F(e){return 0==n?e:Math.round(e/n)*n}function V(e){return e>0?1:-1}function N(){J.zimAccessibility&&J.zimAccessibility.changeTitle(J,null,!0)}function G(r){if(O){Oe&&(Be=r,Oe=!1),r>Be+180?Ie-=360:r<Be-180&&(Ie+=360),Ee=Ie+r,je=!1;var i=J.currentValue;return J.currentValue=F(Ee*(o-t)/360),i!=J.currentValue&&J.dispatchEvent("change"),Be=r,je=!0,ie&&ae(),!0}var a;r<0&&(r+=360),r%=360,0!=n?(a=F(((r=Math.min(r,360))-360*P/2)/(360-360*P)*(o-t)),we.rotation=360*P/2+a*(360-360*P)/(o-t)):(we.rotation=r,a=(r-360*P/2)/(360-360*P)*(o-t)),a!=oe&&(oe=a,te=a+t,ie&&ae(),J.dispatchEvent("change"),e.OPTIMIZE||!zns&&OPTIMIZE||!J.stage||J.stage.update()),N()}function q(){J.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function Q(){(_e||Ye)&&(J.currentValueEvent-=n>0?n*V(o-t):E*V(o-t)),(De||Xe)&&(J.currentValueEvent+=n>0?n*V(o-t):E*V(o-t))}var U,K="min, max, step, width, backgroundColor, indicatorColor, indicatorScale, indicatorType, useTicks, innerTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, innerCircle, innerScale, innerColor, inner2Color, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, linear, gap, limit, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, continuous, continuousMin, continuousMax, damp, currentValue, useLabels, labelMargin, style, group, inherit";if(U=zob(e.Dial,arguments,K,this))return U;z_d("63"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Dial",this.group=W;var Z=!1===R?{}:e.getStyle(this.type,this.group,H);if(zot(t)&&(t=null!=Z.min?Z.min:0),zot(o)&&(o=null!=Z.max?Z.max:10),o-t!=0){zot(T)&&(T=null!=Z.sound&&Z.sound),zot(n)&&(n=null!=Z.step?Z.step:T?0:1),zot(r)&&(r=null!=Z.width?Z.width:100),zot(i)&&(i=null!=Z.backgroundColor?Z.backgroundColor:"#666"),zot(a)&&(a=null!=Z.indicatorColor?Z.indicatorColor:T?"white":"#222"),zot(l)&&(l=null!=Z.indicatorScale?Z.indicatorScale:1),zot(s)&&(s=null!=Z.indicatorType?Z.indicatorType:T?"aztec":"arrow"),zot(c)&&(c=null!=Z.useTicks?Z.useTicks:0!=n),zot(u)&&(u=null!=Z.innerTicks&&Z.innerTicks),zot(h)&&(h=null!=Z.tickStep?Z.tickStep:n||(c?.25:0)),zot(g)&&(g=null!=Z.semiTicks?Z.semiTicks:T?3:0),zot(d)&&(d=null!=Z.tickColor?Z.tickColor:T?e.tin:i),zot(p)&&(p=null!=Z.tickScale?Z.tickScale:T?1.25:1),zot(f)&&(f=null!=Z.semiTickScale?Z.semiTickScale:1.25),zot(m)&&(m=null==Z.innerCircle||Z.innerCircle),zot(y)&&(y=null!=Z.innerColor?Z.innerColor:T?e.pink:"rgba(0,0,0,.2)"),zot(v)&&(v=null!=Z.inner2Color?Z.inner2Color:T?e.light:"rgba(0,0,0,.1)"),zot(z)&&(z=null!=Z.innerScale?Z.innerScale:T?.4:.5),zot(b)&&(b=null!=Z.accentSize?Z.accentSize:T?r/2*.15:0),zot(w)&&(w=null!=Z.accentOffset?Z.accentOffset:r/2*.45),zot(k)&&(k=null!=Z.accentDifference?Z.accentDifference:-.25),zot(C)&&(C=null!=Z.accentColor?Z.accentColor:e.pink),zot(x)&&(x=null!=Z.accentBackgroundColor?Z.accentBackgroundColor:T?e.blue:e.clear),zot(P)&&(P=null!=Z.gap?Z.gap:T?.25:0),zot(A)&&(A=null!=Z.linear?Z.linear:T),P&&(A=!0,O=!1),zot(S)&&(S=null==Z.limit||Z.limit),zot(B)&&(B=null==Z.keyArrows||Z.keyArrows),zot(E)&&(E=null!=Z.keyArrowsStep?Z.keyArrowsStep:(o-t)/100),zot(I)&&(I=null==Z.keyArrowsH||Z.keyArrowsH),zot(M)&&(M=null==Z.keyArrowsV||Z.keyArrowsV),zot(O)&&(O=null!=Z.continuous&&Z.continuous),O&&(S=null!=Z.limit&&Z.limit),zot(_)&&(_=null!=Z.damp&&Z.damp),zot(D)&&(D=null!=Z.useLabels&&Z.useLabels),zot(X)&&(X=null!=Z.labelMargin?Z.labelMargin:10),0==S&&(_=null);var J=this;this.cursor="pointer";var $=r/2,ee=r,te=t,oe=0;if(b){var ne=r/2+w+b/2,re=360*P/2,ie=(J.accentBacking=new e.Shape(-$,-$,2*$,2*$).addTo(this).s(x).ss(b+k).a(0,0,ne,(re-90)*e.RAD,(360-re-90)*e.RAD),J.accent=new e.Shape(-$,-$,2*$,2*$).addTo(this));function ae(){ie.c().s(C).ss(b).a(0,0,ne,(re-90)*e.RAD,(we.rotation-2*re)*e.RAD)}}var le=this.backing=new e.Circle($,i,null,null,null,null,null,null,!1);if(b?le.center(this):this.addChild(le),m){var se=this.inner=new e.Circle($*z,y,null,null,null,null,null,null,!1);this.addChild(se);var ce=this.inner2=new e.Circle($*(z-.1),v,null,null,null,null,null,null,!1);this.addChild(ce)}T&&(J.rotation=180);var ue,de,he,ge,pe=Math.abs(o-t)/(h||n)+(P?1:0),fe=n?Math.abs(o-t)/n:0;if(c){var me=this.ticks=new e.Container({style:!1});this.addChild(me);for(var ze=0;ze<pe;ze++){var ye=ze%(g+1)==0,ve=new e.Rectangle(1,$*(ye?.2*p:.1*f),d,null,null,null,null,null,!1);if(ve.regY=$+(u?z-.05:ve.height+.1*$),ve.regX=.5,ve.rotation=(360-360*P)/(pe-(P?1:0))*ze+360*P/2,me.addChild(ve),D&&(g&&ye||!g)){var be=J.labels=new Container(r,ee).centerReg(J);new Label({text:t+(o-t)/Math.abs(fe)*ze,size:Z.size?Z.size:10,align:"center",valign:"center"}).centerReg({add:!1}).loc(0,-X-1,ve).addTo(be)}}J.expand(ve.height)}if(this.setBounds(-$,-$,r,r),"dot"==s||"circle"==s){var we=this.indicator=new e.Container({style:!1}),Ce=this.indicatorShape=new e.Circle(.19*$,a,null,null,null,null,null,null,!1);we.addChild(Ce),e.sca(we,l),we.regY=$-we.getBounds().width*l/2-.07*$}else if("line"==s||"rectangle"==s)we=this.indicator=new e.Container({style:!1}),Ce=this.indicatorShape=new e.Rectangle(.1*$,.3*$,a,null,null,null,null,null,null,null,!1),we.addChild(Ce),e.sca(we,l),we.regY=$-we.getBounds().width*l/2-.07*$,we.regX=.05*$;else if("aztec"==s){we=this.indicator=new e.Container({style:!1});var xe=.05*$,ke=.1*$,Te=.42*$;Ce=this.indicatorShape=new e.Shape(-ke,0,2*ke,Te).f(a).mt(-xe,0).lt(xe,0).lt(ke,Te).lt(-ke,Te).cp(),we.addChild(Ce),e.sca(we,l),we.regY=$-we.getBounds().width*l/2-.04*$}else we=this.indicator=new e.Container({style:!1}),Ce=this.indicatorShape=new e.Triangle(.4*$,.4*$,.4*$,a,null,null,null,null,null,null,!1),we.addChild(Ce),e.sca(we,l),we.regY=$-we.getBounds().height*l*(u?.85:.75),u&&(Ce.rotation=180);we.regY/=l,this.addChild(we);var Ae,Pe,Se=0;if(O)var Be=0,Ee=0,Ie=0,Me=!1,Oe=!1,je=!0;if(A)this.on("mousedown",function(t){if(t.target.stage,!J.zimAccessibility||!J.zimAccessibility.aria){var o=ue=we.rotation,n=(J.parent.globalToLocal(0,0),J.parent.globalToLocal(t.stageX/e.scaX,t.stageY/e.scaY));he=J.on("pressmove",function(t){var r=J.parent.globalToLocal(t.rawX/e.scaX,t.rawY/e.scaY);we.rotation=o=ue+100*(n.y-r.y)/(this.width||1),S&&(o>360-360*P/2||o<0+360*P/2)&&(o=e.constrain(o,360*P/2,360-360*P/2),n=J.parent.globalToLocal(t.rawX/e.scaX,t.rawY/e.scaY),ue=o),G(o)}),ge=this.on("pressup",function(){J.off("pressmove",he),J.off("pressup",ge)})}});else{var Le=!0;this.on("mousedown",function(t){if(t.target.stage,!J.zimAccessibility||!J.zimAccessibility.aria){ue=we.rotation;var n=J.parent.globalToLocal(t.stageX/e.scaX,t.stageY/e.scaY);n.x;var r=n.x-J.x,i=J.y-n.y;de=180*Math.atan2(r,i)/Math.PI;var a=(new Date).getTime();he=J.on("pressmove",function(t){if(Me){var n=J.parent.globalToLocal(t.rawX/e.scaX,t.rawY/e.scaY),r=n.x-J.x,i=J.y-n.y;de=180*Math.atan2(r,i)/Math.PI,ue=we.rotation}r=(n=J.parent.globalToLocal(t.rawX/e.scaX,t.rawY/e.scaY)).x-J.x,i=J.y-n.y;var a=180*Math.atan2(r,i)/Math.PI,l=ue+a-de;l=(l+36e5)%360,S&&Le&&(l-Se>180&&J.currentValue!=o?l=0:l-Se<-180&&(l=359)),Le=!0,G(l),Se=l,n.x}),ge=this.on("pressup",function(t){J.currentValue!=J.min&&J.currentValue!=J.max&&(Le=!1),(new Date).getTime()-a<200&&(n=J.parent.globalToLocal(t.rawX/e.scaX,t.rawY/e.scaY),r=n.x-J.x,i=J.y-n.y,G(180*Math.atan2(r,i)/Math.PI-J.rotation)),ue=we.rotation,J.off("pressmove",he),J.off("pressup",ge)})}})}_&&(Ae=t,Pe=new e.Damp(Ae,_),J.ticker=e.Ticker.add(function(){Ae=Pe.convert(te)})),Object.defineProperty(this,"currentValue",{get:function(){return _?Ae:te},set:function(n){zot(n)||(O?(Me=!1,zot(j)||zot(L)?zot(j)?zot(L)||n>L&&(n=L,Me=!0):n<j&&(n=j,Me=!0):j<L?(n<j&&(n=j,Me=!0),n>L&&(n=L,Me=!0)):(n>j&&(n=j,Me=!0),n<L&&(n=L,Me=!0)),je&&(Oe=!0,Ie=360*Math.floor(n/(o-t)))):t<o?(n<t&&(n=S?t:o),n>o&&(n=S?o:t)):(n>t&&(n=S?t:o),n<o&&(n=S?o:t)),te=n,n=F(n),_&&_.immediate(te),we.rotation=360*P/2+(n-t)*(360-360*P)/(o-t),we.rotation=(we.rotation+36e5)%360,oe=n-t,Se=we.rotation,ie&&ae(),N(),e.OPTIMIZE||!zns&&OPTIMIZE||!J.stage||J.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return _?Ae:te},set:function(e){e!=J.currentValue&&(J.currentValue=e,J.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return t},set:function(e){O?t=e:zon&&zogy("Dial() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return o},set:function(e){O?o=e:zon&&zogy("Dial() - max is read only")}}),Object.defineProperty(this,"continuous",{get:function(){return O},set:function(){zon&&zogy("Dial() - continuous is read only")}}),Object.defineProperty(this,"continuousMin",{get:function(){return j},set:function(e){j=e,J.currentValue<j&&(J.currentValue=j)}}),Object.defineProperty(this,"continuousMax",{get:function(){return L},set:function(e){L=e,J.currentValue>L&&(J.currentValue=L)}}),Object.defineProperty(this,"step",{get:function(){return n},set:function(){zon&&zogy("Dial() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return I},set:function(e){I=e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return M},set:function(e){M=e}}),typeof KEYFOCUS!=typeof undefined&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==J},set:function(){e.KEYFOCUS=J}}),B&&!e.KEYFOCUS&&q(),this.on("mousedown",function(){B&&q()});var _e=!1,Ye=!1,De=!1,Xe=!1;this.keyDownEvent=function(e){J.stage&&(J.zimAccessibility&&J.focus||!J.zimAccessibility&&J.keyFocus)&&(37==e.keyCode&&I?_e=!0:40==e.keyCode&&M?Ye=!0:39==e.keyCode&&I?De=!0:38==e.keyCode&&M&&(Xe=!0),null==J.keyInterval&&(_e||Ye||De||Xe)&&(Q(),J.keyTimeout=setTimeout(function(){null==J.keyInterval&&(_e||Ye||De||Xe)&&(J.keyInterval=setInterval(Q,40))},140)))},window.addEventListener("keydown",this.keyDownEvent),J.keyUpEvent=function(e){37==e.keyCode?_e=!1:40==e.keyCode?Ye=!1:39==e.keyCode?De=!1:38==e.keyCode&&(Xe=!1),null==J.keyInterval||_e||Ye||De||Xe||(clearInterval(J.keyInterval),J.keyInterval=null)},window.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(J,"enabled",{get:function(){return J._enabled},set:function(e){e?(window.addEventListener("keydown",J.keyDownEvent),window.addEventListener("keyup",J.keyUpEvent)):(window.removeEventListener("keydown",J.keyDownEvent),window.removeEventListener("keyup",J.keyUpEvent))}}),zot(Y)&&(Y=null!=Z.currentValue?Z.currentValue:t),J.currentValue=Y,!1!==R&&e.styleTransforms(this,Z),this.clone=function(){return J.cloneProps(new e.Dial(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y,D,X,R,this.group,H))},this.dispose=function(e,t,o){return window.removeEventListener("keydown",J.keyDownEvent),window.removeEventListener("keyup",J.keyUpEvent),o||this.zimContainer_dispose(!0),!0}}else zog("ZIM Dial range must not be 0")},e.extend(e.Dial,e.Container,["clone","dispose"],"zimContainer",!1),e.Tabs=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y,D,X,R,W,H,F,V,N,G,q){function Q(e){for(var t=0;t<e.length;t++){var o=e[t];o.constructor!=={}.constructor?"string"==typeof o||"number"==typeof o||"Label"==o.type?(e[t]={type:"TabObject",label:String(null!=o)||"Label"==o.type?o:"1"},ge&&"TabObject"!=ge&&(pe=!0),ge="TabObject"):(ge&&"TabObject"==ge&&(pe=!0),ge="Other"):(ge&&"TabObject"!=ge&&(pe=!0),ge="TabObject",o.type="TabObject")}}function U(t,n){for(ve=0;ve<t.length;ve++)""!=(fe=t[ve])&&"TabObject"==fe.type&&(zot(fe.label)&&(fe.label=" "),"string"!=typeof fe.label&&"number"!=typeof fe.label||(fe.label=new e.Label({text:fe.label,size:null!=oe.size?oe.size:g?de/2:o/2,font:null!=oe.font?oe.font:null,style:V,valign:_,inherit:n})))}function K(n,i){var p=[],f=[];for(ve=0;ve<n.length;ve++){if("TabObject"==(fe=n[ve]).type){var m={color:zot(fe.color)?e.Pick.choose(c):fe.color,rollColor:zot(fe.rollColor)?e.Pick.choose(u):fe.rollColor,selectedColor:zot(fe.selectedColor)?e.Pick.choose(d):fe.selectedColor,selectedRollColor:zot(fe.selectedRollColor)?e.Pick.choose(h):fe.selectedRollColor,backgroundColor:zot(fe.backgroundColor)?e.Pick.choose(r):fe.backgroundColor,rollBackgroundColor:zot(fe.rollBackgroundColor)?e.Pick.choose(a):fe.rollBackgroundColor,selectedBackgroundColor:zot(fe.selectedBackgroundColor)?e.Pick.choose(l):fe.selectedBackgroundColor,selectedRollBackgroundColor:zot(fe.selectedRollBackgroundColor)?e.Pick.choose(s):fe.selectedRollBackgroundColor,wait:zot(fe.wait)?e.Pick.choose(k):fe.wait};if(i)for(var y in i)zot(i[y])||(m[y]=i[y]);(ie=new e.Button({width:g?zot(fe.width)?ne?t:be+de/2+z[0]/2:fe.width:zot(fe.width)?ue:fe.width,height:g?de:o,label:fe.label,borderColor:null!=oe.borderColor?oe.borderColor:null,borderWidth:null!=oe.borderWidth?oe.borderWidth:null,backgroundColor:m.backgroundColor,rollBackgroundColor:m.rollBackgroundColor,corner:z,shadowColor:-1,gradient:b,gloss:w,backing:C?C.clone():null,rollBacking:x?x.clone():null,wait:m.wait,waitTime:zot(fe.waitTime)?T:fe.waitTime,waitBackgroundColor:zot(fe.waitBackgroundColor)?A:fe.waitBackgroundColor,rollWaitBackgroundColor:zot(fe.rollWaitBackgroundColor)?P:fe.rollWaitBackgroundColor,waitColor:zot(fe.waitColor)?S:fe.waitColor,rollWaitColor:zot(fe.rollWaitBackgroundColor)?B:fe.rollWaitColor,waitModal:zot(fe.waitModal)?E:fe.waitModal,waitEnabled:zot(fe.waitEnabled)?I:fe.waitEnabled,align:L,valign:_,indentHorizontal:D,indentVertical:X,inherit:e.copy(oe)})).tabInfo=m,ie.color=ie.tabInfo.color,ie.rollColor=ie.tabInfo.rollColor,ie.type="TabsButton",ie.content=fe,ie.listIndentReady=!0}else{if(fe.listIndentReady)ie=fe;else{(ie=new e.Container).type=fe.type,ie.content=fe;for(var v=["text","backing","label","slider","stepper","checkBox","colorPicker","swatch","colorLabel"],M=0;M<v.length;M++)fe[v[M]]&&(ie[v[M]]=fe[v[M]])}fe.checkBox&&(ie.checkBox=fe.checkBox),zot(ie.tabInfo)&&(ie.tabInfo={}),H&&(ie.excludeTap=!0),ie.tabInfo.color=zot(fe.color)?c:fe.color,ie.tabInfo.backgroundColor=zot(fe.backgroundColor)?r:fe.backgroundColor,fe.listIndentReady||(new e.Rectangle(Math.max(fe.width,g?ne?t:be+de/2+z[0]/2:fe.width),Math.max(fe.height,g?de:o),e.clear).addTo(ie).expand(0).cur(),fe.center(ie).cur(),"center"!=O&&"middle"!=O&&fe.pos(0,null,"right"==O),"center"!=j&&"middle"!=j&&fe.pos(null,0,null,"bottom"==j))}ie.width>we&&(we=ie.width),W?ie.tap(function(t){J(t.currentTarget.znum),re.dispatchEvent("change"),e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}):ie.zimTabEvent=ie.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(t){J(t.currentTarget.znum),re.dispatchEvent("change"),e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}),ie.on("mousedown",function(e){re.buttonDown=e.currentTarget}),ie.on("pressup",function(){re.buttonDown=null}),f.push(fe.label),p.push(ie),ie.index=ve}return[p,f]}function Z(){var e,n=0,r=0;for(ve=0;ve<se.length;ve++)(e=se[ve]).znum=ve,e.selectedIndex=ve,e.selectedIndex==ae&&m&&(e.backgroundColor=l,e.rollBackgroundColor=s,e.color=d),le[ve]&&(le[ve].znum=ve),re.addChild(e),g&&!ne||(e.x=(t-e.width)/2,e.y=(o-e.height)/2),g?(e.y=r,r=e.y+e.height+p,"left"==O?e.x=("TabsButton"==e.type||"ListItem"==e.type?0:R)+(e.regX-(e.getBounds()?e.getBounds().x:0))*e.scaleX:"right"==O&&(e.x=(ne?t:we)-e.width-("TabsButton"==e.type||"ListItem"==e.type?0:R))):(e.x=n,n=e.x+e.width+p,"top"==j?e.y=("TabsButton"!=e.type||pe?R:0)+(e.regY-(e.getBounds()?e.getBounds().y:0))*e.scaleY:"bottom"==j&&(e.y=o-e.height-("TabsButton"!=e.type||pe?R:0))),0!=ve||f||(e.enabled=!1),e.enabled=!0;zot(M)||re.removeChild(he),re._bounds=null;var i=re.getBounds(),a=0,c=0;if(i||0==createjs.EaselJS.version[0]?i&&(a=g&&0!=i.width&&ne?t:i.width,c=g&&0!=i.height?i.height:o,re.setBounds(a,c)):re.setBounds(),zot(M)||(he.widthOnly=a,he.heightOnly=c,re.addChildAt(he,0)),g&&!ne)for(ve=0;ve<=se.length;ve++)"center"!=O&&"middle"!=O||(e.x=(a-e.width)/2)}function J(e){var t=se[ae];t&&m&&(t.tabInfo&&zot(t.tabInfo.wait)&&(t.tabInfo.backgroundColor&&(t.backgroundColor=t.tabInfo.backgroundColor),t.tabInfo.rollBackgroundColor&&(t.rollBackgroundColor=t.tabInfo.rollBackgroundColor),t.tabInfo.color&&t.label&&(t.color=t.tabInfo.color),t.tabInfo.rollColor&&t.label&&(t.rollColor=t.tabInfo.rollColor)),f||(t.enabled=!0)),(t=se[ae=e])&&(t.tabInfo&&zot(t.tabInfo.wait)&&m&&(t.tabInfo.selectedBackgroundColor&&(t.backgroundColor=t.tabInfo.selectedBackgroundColor),t.tabInfo.selectedRollBackgroundColor&&(t.rollBackgroundColor=t.tabInfo.selectedRollBackgroundColor),t.tabInfo.selectedColor&&t.label&&(t.color=t.tabInfo.selectedColor),t.tabInfo.selectedRollColor&&t.label&&(t.rollColor=t.tabInfo.selectedRollColor)),f||(t.enabled=!1))}function $(){re.keyFocus=!0;var e=document.activeElement;e&&e.blur()}var ee,te="width, height, tabs, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, vertical, spacing, currentEnabled, currentSelected, corner, base, keyEnabled, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, backdropColor, align, valign, labelAlign, labelValign, labelIndent, labelIndentHorizontal, labelIndentVertical, indent, useTap, excludeCustomTap, selectedIndex, styleLabels, style, group, inherit";if(ee=zob(e.Tabs,arguments,te,this))return ee;z_d("65");var oe=!1===N?{}:e.getStyle("Tabs",G,q);zot(g)&&(g=null!=oe.vertical&&oe.vertical),zot(t)&&(t=null!=oe.width?oe.width:null);var ne=!zot(t);if(zot(t)&&(t=g?60:240),zot(o)&&(o=null!=oe.height?oe.height:g?240:60),this.zimContainer_constructor(null,null,null,null,!0),this.type="Tabs",this.group=G,(zot(n)||n.length<=0)&&(n=null!=oe.tabs?oe.tabs:[1,2,3,4]),zot(r)&&(r=null!=oe.backgroundColor?oe.backgroundColor:"#777"),zot(a)&&(a=null!=oe.rollBackgroundColor?oe.rollBackgroundColor:"#555"),zot(l)&&(l=null!=oe.selectedBackgroundColor?oe.selectedBackgroundColor:"#333"),zot(s)&&(s=null!=oe.selectedRollBackgroundColor?oe.selectedRollBackgroundColor:a),zot(c)&&(c=null!=oe.color?oe.color:"white"),zot(u)&&(u=null!=oe.rollColor?oe.rollColor:c),zot(d)&&(d=null!=oe.selectedColor?oe.selectedColor:c),zot(h)&&(h=null!=oe.selectedRollColor?oe.selectedRollColor:u),zot(C)&&(C=null!=oe.backing?oe.backing.clone():null),zot(x)&&(x=null!=oe.rollBacking?oe.rollBacking.clone():null),zot(O)&&(O=null!=oe.align?oe.align:"center"),zot(j)&&(j=null!=oe.valign?oe.valign:"center"),zot(L)&&(L=null!=oe.labelAlign?oe.labelAlign:O),zot(_)&&(_=null!=oe.labelValign?oe.labelValign:j),zot(R)&&(R=null!=oe.indent?oe.indent:10),zot(Y)&&(Y=null!=oe.labelIndent?oe.labelIndent:R),zot(D)&&(D=null!=oe.labelIndentHorizontal?oe.labelIndentHorizontal:Y),zot(X)&&(X=null!=oe.labelIndentVertical?oe.labelIndentVertical:Y),zot(f)&&(f=null!=oe.currentEnabled&&oe.currentEnabled),zot(m)&&(m=null==oe.currentSelected||oe.currentSelected),m||(f=!0),zot(p)&&(p=null!=oe.spacing?oe.spacing:1),zot(z)&&(z=null!=oe.corner?oe.corner:0),zot(b)&&(b=null!=oe.gradient?oe.gradient:null),zot(w)&&(w=null!=oe.gloss?oe.gloss:null),zot(y)&&(y=null!=oe.base?oe.base:0!=z||Array.isArray(z)?g?"left":"bottom":"none"),zot(v)&&(v=null==oe.keyEnabled||oe.keyEnabled),zot(W)&&(W=null!=oe.useTap&&oe.useTap),zot(H)&&(H=null!=oe.excludeCustomTap&&oe.excludeCustomTap),zot(M)&&(M=null!=oe.backdropColor?oe.backdropColor:null),zot(V)&&(V=null!=oe.styleLabels?oe.styleLabels:null),"none"==y||0==z||Array.isArray(z))Array.isArray(z)||(z=[z,z,z,z]);else switch(y){case"bottom":z=[z,z,0,0];break;case"left":z=[0,z,z,0];break;case"top":z=[0,0,z,z];break;case"right":z=[z,0,0,z]}var re=this;this.keyEnabled=v;var ie,ae=0,le=[],se=[],ce=n.length,ue=(t-p*(ce-1))/ce,de=(o-p*(ce-1)-2)/ce;if(!zot(M)){var he=this.backdrop=new e.Rectangle(t,o,M,null,null,null,null,null,!1);this.addChild(he)}var ge,pe=!1;Q(n);for(var fe,me,ze=0,ye=0,ve=0;ve<n.length;ve++)fe=n[ve],g?ne&&(fe.width=fe.width?fe.width:t):(zot(fe.width)&&ye++,ze+=zot(fe.width)?ue:fe.width);if(!g)if(ze>t-p*(ce-1))for(ve=0;ve<n.length;ve++)(fe=n[ve]).width=(t-p*(ce-1))/ze*(zot(fe.width)?ue:fe.width);else if(Math.round(ze)<Math.round(t-p*(ce-1))&&ye>0)for(me=(ce*ue-(ze-ye*ue))/ye,ve=0;ve<n.length;ve++)(fe=n[ve]).width=zot(fe.width)?me:fe.width;U(n,V?oe:null);var be=0;for(ve=0;ve<n.length;ve++)!(fe=n[ve]).width&&g&&fe.label.width>be&&(be=fe.label.width);var we=0,Ce=K(n);se=Ce[0],le=Ce[1],Z(),this.addAt=function(t,o,n){zot(o)&&(o=se.length),o=e.constrain(o,0,se.length),Array.isArray(t)||(t=[t]),Q(t),U(t,n);var r=K(t,n),i=r[0],a=r[1];o<=ae&&(ae+=i.length);var l=[o,0].concat(i);return Array.prototype.splice.apply(se,l),l=[o,0].concat(a),Array.prototype.splice.apply(le,l),Z(),re},this.removeAt=function(t,o){if(0==se.length)return re;for(zot(t)&&(t=1),zot(o)&&(o=se.length-t),o=e.constrain(o,0,se.length-t),ae>=o&&ae<=o+t&&(ae=-1),ae>o+t&&(ae-=t),ve=o;ve<o+t;ve++)se[ve].tabInfo&&(se[ve].tabInfo.backgroundColor&&(se[ve].backgroundColor=se[ve].tabInfo.backgroundColor),se[ve].tabInfo.color&&se[ve].label&&(se[ve].color=se[ve].tabInfo.color)),W?se[ve].noTap():se[ve].off((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",se[ve].zimTabEvent),se[ve].removeFrom();return se.splice(o,t),le.splice(o,t),Z(),re},re.keyEvent=function(t){if(re.keyEnabled&&re.keyFocus&&!re.zimAccessibility&&9==t.keyCode){var o=ae;t.shiftKey?J(--o<0?n.length-1:o):J(++o>n.length-1?0:o),re.dispatchEvent("change"),e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update(),t.preventDefault()}},window.addEventListener("keydown",re.keyEvent),Object.defineProperty(this,"selected",{get:function(){return se[ae]},set:function(){zon&&zogy("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return ae},set:function(t){J(t),e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}),this.last=function(){return this.selectedIndex=this.buttons.length-1,this},this.first=function(){return this.selectedIndex=0,this},Object.defineProperty(this,"tabs",{get:function(){return ae},set:function(t){J(Math.min(Math.max(t,0),n.length-1)),e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}),Object.defineProperty(this,"color",{get:function(){return re.buttons[0].tabItems?re.buttons[0].tabItems.color:c},set:function(t){if(c=t,re.buttons[0].tabInfo){for(var o=0;o<re.buttons.length;o++)re.buttons[o].tabInfo&&(re.buttons[o].tabInfo.color=t),o==ae&&m||(re.buttons[o].color=c);e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}}),Object.defineProperty(this,"rollColor",{get:function(){return re.buttons[0].tabItems?re.buttons[0].tabItems.rollColor:u},set:function(t){if(u=t,re.buttons[0].tabInfo){for(var o=0;o<re.buttons.length;o++)re.buttons[o].tabInfo&&(re.buttons[o].tabInfo.rollColor=t),re.buttons[o].rollColor=u,o!=ae&&re.buttons[o].rolled&&(re.buttons[o].color=u);e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}}),Object.defineProperty(this,"selectedColor",{get:function(){return re.buttons[0].tabItems?re.buttons[0].tabItems.selectedColor:d},set:function(t){if(d=t,re.buttons[0].tabInfo){for(var o=0;o<re.buttons.length;o++)re.buttons[o].tabInfo&&(re.buttons[o].tabInfo.selectedColor=t),o==ae&&m&&(re.buttons[o].color=d);e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}}),Object.defineProperty(this,"selectedRollColor",{get:function(){return re.buttons[0].tabItems?re.buttons[0].tabItems.selectedRollColor:h},set:function(t){if(h=t,re.buttons[0].tabInfo){for(var o=0;o<re.buttons.length;o++)re.buttons[o].tabInfo&&(re.buttons[o].tabInfo.selectedRollColor=t),o==ae&&m&&re.buttons[o].rolled&&(re.buttons[o].color=h);e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}}),Object.defineProperty(this,"backgroundColor",{get:function(){return re.buttons[0].tabItems?re.buttons[0].tabItems.backgroundColor:r},set:function(t){if(r=t,re.buttons[0].tabInfo){for(var o=0;o<re.buttons.length;o++)re.buttons[o].tabInfo&&(re.buttons[o].tabInfo.backgroundColor=t),o==ae&&m||(re.buttons[o].backgroundColor=r);e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}}),Object.defineProperty(this,"rollBackgroundColor",{get:function(){return re.buttons[0].tabItems?re.buttons[0].tabItems.rollBackgroundColor:a},set:function(t){if(a=t,re.buttons[0].tabInfo){for(var o=0;o<re.buttons.length;o++)re.buttons[o].tabInfo&&(re.buttons[o].tabInfo.rollBackgroundColor=t),re.buttons[o].rollBackgroundColor=a,o!=ae&&re.buttons[o].rolled&&(re.buttons[o].backgroundColor=a);e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}}),Object.defineProperty(this,"selectedBackgroundColor",{get:function(){return re.buttons[0].tabItems?re.buttons[0].tabItems.selectedBackgroundColor:l},set:function(t){if(l=t,re.buttons[0].tabInfo){for(var o=0;o<re.buttons.length;o++)re.buttons[o].tabInfo&&(re.buttons[o].tabInfo.selectedBackgroundColor=t),o==ae&&m&&(re.buttons[o].backgroundColor=l);e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}}),Object.defineProperty(this,"selectedRollBackgroundColor",{get:function(){return re.buttons[0].tabItems?re.buttons[0].tabItems.selectedRollBackgroundColor:s},set:function(t){if(s=t,re.buttons[0].tabInfo){for(var o=0;o<re.buttons.length;o++)re.buttons[o].tabInfo&&(re.buttons[o].tabInfo.selectedRollBackgroundColor=t),o==ae&&m&&re.buttons[o].rolled&&(re.buttons[o].backgroundColor=s);e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}}),Object.defineProperty(this,"label",{get:function(){return le[ae]},set:function(){zon&&zogy("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return null!=le[ae]?le[ae].text:undefined},set:function(){zon&&zogy("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return se},set:function(){zon&&zogy("Tabs() - buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return le},set:function(){zon&&zogy("Tabs() - labels is read only")}}),this._enabled=!0,Object.defineProperty(re,"enabled",{get:function(){return re._enabled},set:function(e){i(re,e)}}),typeof KEYFOCUS!=typeof undefined&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==re},set:function(){e.KEYFOCUS=re}}),v&&e.KEYFOCUS&&$(),this.on("mousedown",function(){v&&$()});var xe=re.getBounds();zot(xe)||0==xe.width?re.setBounds(0,0,t,o):re.width=t,zot(F)&&(F=null!=oe.selectedIndex?oe.selectedIndex:0),re.selectedIndex=F,!1!==N&&e.styleTransforms(this,oe),this.clone=function(){for(var i=e.copy(n,!0),G=0;G<i.length;G++)i[G].label=i[G].label.clone();return re.cloneProps(new e.Tabs(t,o,i,r,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y,D,X,R,W,H,F,V,N,this.group,q))},this.doDispose=function(t,o,r){re.keyEvent&&window.removeEventListener("keydown",re.keyEvent),
e.loop(re.buttons,function(e){e.dispose()}),re.keyEvent=null,r||this.zimContainer_dispose(!0),m=fe=selected=n=le=label=ie=se=Ce=null}},e.extend(e.Tabs,e.Container,["clone","dispose"],"zimContainer",!1),e.Tabs.prototype.dispose=function(e){return this.doDispose(null,null,e)},e.Pad=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O){function j(t){var n=t.target;R.selected=n.selected,R.text=n.text,R.label=n.label;for(var r=n.selectedIndex,i=0;i<F.length;i++)F[i].selectedIndex=-1;n.selectedIndex=r,X=n.znum*o+r,R.dispatchEvent("change"),e.OPTIMIZE||!zns&&OPTIMIZE||!R.stage||R.stage.update()}var L,_="width, cols, rows, keys, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, currentEnabled, corner, labelColor, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, selectedIndex, style, group, inherit";if(L=zob(e.Pad,arguments,_,this))return L;z_d("66"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pad",this.group=M;var Y=!1===I?{}:e.getStyle(this.type,this.group,O);if(zot(t)&&(t=null!=Y.width?Y.width:150),zot(o)&&(o=null!=Y.cols?Y.cols:3),zot(n)&&(n=null!=Y.rows?Y.rows:o),zot(r))if(null!=Y.keys)r=Y.keys;else{r=[];for(var D=1;D<=n*o;D++)r.push(D)}zot(f)&&(f=null==Y.currentEnabled||Y.currentEnabled),zot(p)&&(p=null!=Y.spacing?Y.spacing:1);var X,R=this;this.cols=o,this.rows=n;var W,H=t/o-p,F=[],V=0;for(this.labels=[],this.buttons=[],D=0;D<n;D++){for(var N=[],G=0;G<o;G++)N.push(null!=r[V]?r[V]:""),V++;var q=null!=Y.corner?Y.corner:m;q&&!Array.isArray(q)&&(q=[q,q,q,q]),W=F[D]=new e.Tabs({width:t,height:H,tabs:N,backgroundColor:null!=Y.backgroundColor?Y.backgroundColor:a,rollBackgroundColor:null!=Y.rollBackgroundColor?Y.rollBackgroundColor:l,selectedBackgroundColor:null!=Y.selectedBackgroundColor?Y.selectedBackgroundColor:s,color:null!=Y.color?Y.color:u,rollColor:null!=Y.rollColor?Y.rollColor:d,selectedColor:null!=Y.selectedColor?Y.selectedColor:h,spacing:null!=Y.spacing?Y.spacing:p,currentEnabled:null!=Y.currentEnabled?Y.currentEnabled:f,corner:q,backing:null!=Y.backing?Y.backing.clone():b,rollBacking:null!=Y.rollBacking?Y.rollBacking.clone():w,base:null,keyEnabled:!1,gradient:null!=Y.gradient?Y.gradient:y,gloss:null!=Y.gloss?Y.gloss:v,wait:null!=Y.wait?Y.wait:C,waitTime:null!=Y.waitTime?Y.waitTime:x,waitBackgroundColor:null!=Y.waitBackgroundColor?Y.waitBackgroundColor:k,rollWaitBackgroundColor:null!=Y.rollWaitBackgroundColor?Y.rollWaitBackgroundColor:T,waitColor:null!=Y.waitColor?Y.waitColor:A,rollWaitColor:null!=Y.rollWaitColor?Y.rollWaitColor:P,waitModal:null!=Y.waitModal?Y.waitModal:S,waitEnabled:null!=Y.waitEnabled?Y.waitEnabled:B,group:M,style:!1}),this.labels=this.labels.concat(W.labels),this.buttons=this.buttons.concat(W.buttons),this.addChild(W),W.selectedIndex=-1,W.y=(H+p)*D,W.znum=D,W.on("change",j)}this.tabs=F,Object.defineProperty(this,"selectedIndex",{get:function(){return X},set:function(e){X=e;for(var t=0;t<F.length;t++)F[t].selectedIndex=-1;var n=Math.floor(X/o);n>=0&&n<R.tabs.length&&(R.tabs[n].selectedIndex=X%o)}}),this._enabled=!0,Object.defineProperty(R,"enabled",{get:function(){return R._enabled},set:function(e){i(R,e)}}),zot(E)&&(E=null!=Y.selectedIndex?Y.selectedIndex:0),R.selectedIndex=E,!1!==I&&e.styleTransforms(this,Y),this.clone=function(){return R.cloneProps(new e.Pad(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,this.group,O))},this.dispose=function(t,o,n){e.loop(F,function(e){e.dispose()}),this.labels=this.buttons=tabs=this.tabs=null,W=F=R.rowTabs=null,n||this.zimContainer_dispose(!0)}},e.extend(e.Pad,e.Container,["clone","dispose"],"zimContainer",!1),e.DPad=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,y){function v(){var t=B;E=t.stageX/e.scaX,I=t.stageY/e.scaY,S=x.globalToLocal(E,I),(t=new createjs.Event("change")).dirX=2*((S.x+g)/(2*g)-.5),t.dirY=2*((S.y+g)/(2*g)-.5),p&&(t.dirX=e.constrain(t.dirX,-1,1),t.dirY=e.constrain(t.dirY,-1,1)),x.dirX=t.dirX,x.dirY=t.dirY,x.dispatchEvent(t)}var b,w="axis, width, backgroundColor, borderWidth, borderColor, indicatorColor, indicatorPressColor, indicatorScale, indicatorRadius, innerCircle, innerScale, activeRadius, clamp, logo, style, group, inherit";if(b=zob(e.DPad,arguments,w,this))return b;z_d("66.2"),this.zimContainer_constructor(null,null,null,null,!1),this.type="DPad",this.group=z;var C=!1===m?{}:e.getStyle(this.type,this.group,y);zot(t)&&(t=null!=C.axis?C.axis:"all"),zot(o)&&(o=null!=C.width?C.width:100),zot(n)&&(n=null!=C.backgroundColor?C.backgroundColor:"#666666"),zot(a)&&(a=null!=C.borderColor?C.borderColor:null),zot(r)&&(r=null!=C.borderWidth?C.borderWidth:null),a<0||r<0?a=r=null:null!=a&&null==r&&(r=1),zot(l)&&(l=null!=C.indicatorColor?C.indicatorColor:"#dddddd"),zot(s)&&(s=null!=C.indicatorPressColor?C.indicatorPressColor:"#eeeeee"),zot(c)&&(c=null!=C.indicatorScale?C.indicatorScale:1),zot(u)&&(u=null!=C.indicatorRadius?C.indicatorRadius:null),zot(d)&&(d=null==C.innerCircle||C.innerCircle),zot(h)&&(h=null!=C.innerScale?C.innerScale:.5),zot(g)&&(g=null!=C.activeRadius?C.activeRadius:o),zot(p)&&(p=null==C.clamp||C.clamp),zot(f)&&(f=null!=C.logo&&C.logo);var x=this;this.axis=t,this.outer=new e.Circle(o/2,n,a,r).addTo(this);var k=this.inner=new e.Circle(o*h/2,"rgba(0,0,0,.2)").center(this);f&&(this.logo=new e.Label({text:"D",bold:!0}).center(k).mov(1,2).alp(.3));var T=(new e.Container).addTo(this),A=.2*(o-r)*c,P=8;"vertical"==t?P=2:"horizontal"==t?(P=2,T.rotation=90):"both"==t&&(P=4),e.loop(P,function(t,n){new e.Triangle(A,A,A,l).addTo(T).reg(null,zot(u)?.475*(o-r):u).rot(360*t/n)});var S,B,E=0,I=0,M=!0;this.on("mousedown",function(t){t.target.stage,B=t,T.loop(function(e){e.color=s}),M?x.ticker=e.Ticker.add(function(){v()}):e.Ticker.add(x.ticker)}),this.on("pressmove",function(e){B=e}),this.on("pressup",function(){e.Ticker.remove(x.ticker),x.dirX=x.dirY=0,T.loop(function(e){e.color=l}),x.stage&&x.stage.update()}),this._enabled=!0,Object.defineProperty(x,"enabled",{get:function(){return x._enabled},set:function(e){i(x,e)}}),e.styleTransforms(this,C),this.clone=function(){return x.cloneProps(new e.DPad(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,this.group,y))},this.dispose=function(t,o,n){return this.ticker&&e.Ticker.remove(this.ticker),n||this.zimContainer_dispose(!0),!0}},e.extend(e.DPad,e.Container,["clone","dispose"],"zimContainer",!1),e.Radial=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y,D){var X,R="labels, size, font, height, coreRadius, coreColor, startAngle, totalAngle, angles, flip, shiftRadial, icons, rollIcons, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, selectedIndex, style, group, inherit";if(X=zob(e.Radial,arguments,R,this))return X;z_d("66.4"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Radial",this.group=Y;var W=!1===_?{}:e.getStyle(this.type,this.group,D);zot(t)&&(t=null!=W.labels?W.labels:["A","B","C","D","E"]),zot(o)&&(o=null!=W.size?W.size:30),zot(n)&&(n=null!=W.font?W.font:"verdana"),zot(l)&&(l=null!=W.startAngle?W.startAngle:null),zot(s)&&(s=null!=W.totalAngle?W.totalAngle:360),zot(c)&&(c=null!=W.angles?W.angles:null),zot(u)&&(u=null==W.flip||W.flip),zot(d)&&(d=null!=W.shiftRadial?W.shiftRadial:0),zot(h)&&(h=null!=W.icons?W.icons:null),zot(g)&&(g=null!=W.rollIcons?W.rollIcons:null),zot(p)&&(p=null!=W.rotateIcons&&W.rotateIcons),zot(f)&&(f=null!=W.iconsShiftRadial?W.iconsShiftRadial:0),zot(r)&&(r=null!=W.height?W.height:60),zot(i)&&(i=null!=W.coreRadius?W.coreRadius:100),zot(a)&&(a=null!=W.coreColor?W.coreColor:"#333"),zot(b)&&(b=null!=W.backdropColor?W.backdropColor:e.clear),zot(m)&&(m=null!=W.backgroundColor?W.backgroundColor:"#666"),zot(z)&&(z=null!=W.rollBackgroundColor?W.rollBackgroundColor:"#777"),zot(y)&&(y=null!=W.selectedBackgroundColor?W.selectedBackgroundColor:"#444"),zot(v)&&(v=null!=W.selectedRollBackgroundColor?W.selectedRollBackgroundColor:y),zot(w)&&(w=null!=W.color?W.color:"white"),zot(C)&&(C=null!=W.rollColor?W.rollColor:w),zot(x)&&(x=null!=W.selectedColor?W.selectedColor:w),zot(k)&&(k=null!=W.selectedRollColor?W.selectedRollColor:C),zot(T)&&(T=null!=W.borderColor?W.borderColor:"#333"),zot(A)&&(A=null!=W.borderWidth?W.borderWidth:2),zot(B)&&(B=null!=W.gapAsAngle&&W.gapAsAngle),zot(S)&&(S=null!=W.gap?W.gap:B?3:6),zot(P)&&(P=null!=W.gradient?W.gradient:null),!0===P&&(P=.1),zot(E)&&(E=null!=W.spacing?W.spacing:6),zot(I)&&(I=null!=W.spacingInner?W.spacingInner:E),zot(M)&&(M=null!=W.spacingOuter?W.spacingOuter:E),zot(O)&&(O=null!=W.currentEnabled&&W.currentEnabled),zot(j)&&(j=null==W.currentSelected||W.currentSelected);var H=this,F=this.innerRadius=i+I,V=this.outerRadius=F+r;this.setBounds(-V,-V,2*V,2*V);var N=this.backdrop=new e.Circle(V+M,b).center(this);if(i>0&&(this.core=new e.Circle(i,a).center(this)),c&&c.length<t.length-1)return zon&&zogy("Radial() - not enough angles provided"),this;if(t&&t.length>0||h&&h.length>0){var G;if(t&&t.length>0&&(G=t.length),h&&h.length>0&&(G=G>0?Math.min(h.length,G):h.length),g&&g.length<G)for(var q=0;q<G-g.length;q++)g.push(new e.Circle(1,e.clear));var Q=N.width,U=this.buttons=new e.Container(-Q/2,-Q/2,Q,Q).centerReg(this),K=S;B||(S=S/V*180/Math.PI,K=K/F*180/Math.PI);for(var Z=(s-S*G+(360==s?0:S))/G,J=l||0,$=0;$<G;$++){c&&(Z=c[$]);var ee=new e.Shape(-Q/2,-Q/2,Q,Q).centerReg(U);ee.num=$,ee.zimSelected=!1,ee.angle=Z;var te=ee.graphics;ee.backgroundColor=e.Pick.choose(m),ee.rollBackgroundColor=e.Pick.choose(z),ee.selectedBackgroundColor=e.Pick.choose(y),ee.selectedRollBackgroundColor=e.Pick.choose(v),ee.color=e.Pick.choose(w),ee.rollColor=e.Pick.choose(C),ee.selectedColor=e.Pick.choose(x),ee.selectedRollColor=e.Pick.choose(k),ee.colorCommand=te.f(ee.backgroundColor).command,(zot(A)||A>0)&&(zot(T)&&zot(A)||(zot(T)&&(T="black"),ee.borderColorCommand=te.s(T).command,ee.borderWidthCommand=te.ss(A).command));var oe=(J-90-Z/2)*Math.PI/180,ne=(J-90+Z/2)*Math.PI/180,re=(J-90+(Z+S-K)/2)*Math.PI/180,ie=(J-90-(Z+S-K)/2)*Math.PI/180;if(te.arc(0,0,V,oe,ne,!1),te.arc(0,0,F,re,ie,!0).cp(),P&&(te.s().ss().rf(["rgba(0,0,0,"+P+")","rgba(255,255,255,"+P+")"],[0,1],0,0,F,0,0,V),te.arc(0,0,V,oe,ne,!1),te.arc(0,0,F,re,ie,!0).cp()),ee.cursor="pointer",ee.zimOverEvent=ee.on("mouseover",function(e){var t=e.target;t.colorCommand.style=t==H.selected&&j?t.selectedRollBackgroundColor:t.rollBackgroundColor,t.label&&(t.label.color=t==H.selected&&j?t.selectedRollColor:t.rollColor),g&&(t.holder.removeAllChildren(),g[t.num].loc(1,0,t.holder)),H.stage&&H.stage.update()}),ee.zimOutEvent=ee.on("mouseout",function(e){var t=e.target;t.colorCommand.style=t==H.selected&&j?t.selectedBackgroundColor:t.backgroundColor,t.label&&(t.label.color=t==H.selected&&j?t.selectedColor:t.color),g&&(t.holder.removeAllChildren(),h&&h[t.num].loc(1,0,t.holder)),H.stage&&H.stage.update()}),ee.zimDownEvent=ee.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(t){var o=t.target,n=o!==H.selected;H.lastSelected=H.selected,ue=o.num,j?n?(H.selected&&(H.selected.colorCommand.style=H.selected.backgroundColor,H.selected.label&&(H.selected.label.color=H.selected.color)),H.selected=o,H.label=o.label,H.label&&(H.text=H.label.text),H.icon=o.icon,o.colorCommand.style=o.selectedRollBackgroundColor,o.label&&(o.label.color=o.selectedRollColor)):O||(ue=-1,H.selected=null,H.label=null,H.text=null,H.icon=null,o.colorCommand.style=o.rollBackgroundColor,o.label&&(o.label.color=o.rollColor)):(H.selected=o,H.label=o.label,H.label&&(H.text=H.label.text),H.icon=o.icon),H.dispatchEvent("change"),e.OPTIMIZE||!zns&&OPTIMIZE||!H.stage||H.stage.update()}),h&&h.length>0){var ae=F+r/2+f,le=ee.holder=new e.Container(3,ae).addTo(this).reg(1,ae).rot(J);le.mouseChildren=!1,le.mouseEnabled=!1,ee.icon=h[$],h[$].loc(1,0,le),p||(h[$].rotation=-J)}if(t&&t.length>0){var se;if("LabelOnArc"!=t[$].type){var ce="Label"==t[$].type?t[$]:new e.Label({text:t[$],size:o,font:n,color:w,style:_,inherit:D});se=new e.LabelOnArc({label:ce,color:w,size:o,spacing:-5,flip:u&&J>90&&J<270,radius:F+(r-ce.height)/2+2+d,style:_,inherit:D})}else se=t[$];t[$]=se,ee.label=se,se.center(this).rot(J),se.mouseChildren=!1,se.mouseEnabled=!1}$!=t.length-1&&(J+=(Z+(c?c[$+1]:Z))/2+S)}zot(l)||(H.rotation+=H.buttons.getChildAt(0).angle/2)}var ue=null;Object.defineProperty(this,"selectedIndex",{get:function(){return ue},set:function(t){var o;H.buttons&&(o=H.buttons.getChildAt(t)),o!==H.selected&&(H.selected&&(H.selected.colorCommand.style=H.selected.backgroundColor,H.selected.label&&(H.selected.label.color=H.selected.color)),H.selected=o,o&&(j&&(o.colorCommand.style=o.selectedRollBackgroundColor),o.label&&(j&&(o.label.color=o.selectedColor),H.text=o.label.text))),e.OPTIMIZE||!zns&&OPTIMIZE||!H.stage||H.stage.update()}}),zot(L)&&(L=null!=W.selectedIndex?W.selectedIndex:0),H.selectedIndex=L,e.styleTransforms(this,W),this.clone=function(){return H.cloneProps(new e.Radial(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,this.group,D))}},e.extend(e.Radial,e.Container,"clone","zimContainer",!1),e.RadialMenu=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y,D){function X(t){var o,n,r;if(t?o=t.ringLevel:(o=0,n=i),e.loop(ee,function(e,t){t>o-1&&(e.removeFrom(),e.selectedIndex=-1,ee.pop())},!0),t&&(r=t.selected),r){var a=r.id;n=t.outerRadius,R(a,o+1,n)}else t||R("id0",o+1,n);q.selected=r,q.selected?(q.selectedMenu=ee[q.selected.menu.ringLevel-1],q.selectedIndex=q.selected.num,q.selected.label?q.text=q.selected.label.text:q.text=null):M&&t?(q.selectedIndex=t.selectedIndex,q.label=t.label,q.text=t.text,q.icon=t.icon,q.selectedMenu=t):(q.text=null,q.selectedIndex=-1,q.selectedMenu=null),q.stage&&q.stage.update()}function R(t,i,a){var l;if(i&&(q.outerLevel=i),!$[t]){var s=Z.getData(t),B=s.list;if(B&&!e.isEmpty(B)){var j={labels:Z.getLinearList(B),coreRadius:a,size:o,font:n,startAngle:c,totalAngle:u,flip:d,rotateIcons:g,shiftRadial:h,iconsShiftRadial:p,height:r,coreColor:e.clear,backdropColor:v,backgroundColor:f,rollBackgroundColor:m,selectedBackgroundColor:z,selectedRollBackgroundColor:y,color:b,rollColor:w,selectedColor:C,selectedRollColor:x,borderColor:k,borderWidth:T,gapAsAngle:S,gap:P,gradient:A,spacingInner:E,spacingOuter:I,currentSelected:O,currentEnabled:M,style:_,inherit:D};s.styles&&(j=e.merge(j,s.styles)),l=$[t]=new e.Radial(j),J=Z.getLinearIDs(B),l.buttons.loop(function(e,t){e.menu=l,e.id=J[t]}),l.ringLevel=q.outerLevel,l.selectedIndex=-1,l.on("change",function(e){q.leafNode=!1,X(e.target),(M||q.selected!=U)&&q.dispatchEvent("change"),U=q.selected})}}$[t]?(ee.push($[t]),$[t].center(q),L&&$[t].bot()):(q.leafNode=!0,q.outerLevel-=1),q.outerMenu=l}var W,H="menu, size, font, height, coreRadius, coreColor, title, titleIcon, startAngle, totalAngle, flip, shiftRadial, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, open, under, style, group, inherit",F=H.split(", "),V=!1;if(t&&t.constructor==={}.constructor)for(var N in t)if(F.indexOf(N)>=0){V=!0;break}if(t&&V&&(W=zob(e.RadialMenu,arguments,H,this)))return W;z_d("66.6"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadialMenu",this.group=Y;var G=!1===_?{}:e.getStyle(this.type,this.group,D);zot(t)&&(t=null!=G.menu?G.menu:{A:{A1:["AA1","AA2","AA3","AA4"],A2:[],A3:[]},B:["B1","B2","B3","B4","B5","B6"],C:[]}),zot(o)&&(o=null!=G.size?G.size:30),zot(n)&&(n=null!=G.font?G.font:"verdana"),zot(c)&&(c=null!=G.startAngle?G.startAngle:null),zot(u)&&(u=null!=G.totalAngle?G.totalAngle:360),zot(d)&&(d=null==G.flip||G.flip),zot(g)&&(g=null!=G.rotateIcons&&G.rotateIcons),zot(h)&&(h=null!=G.shiftRadial?G.shiftRadial:0),zot(p)&&(p=null!=G.iconsShiftRadial?G.iconsShiftRadial:0),zot(r)&&(r=null!=G.height?G.height:60),zot(i)&&(i=null!=G.coreRadius?G.coreRadius:100),zot(a)&&(a=null!=G.coreColor?G.coreColor:"#333"),zot(l)&&(l=null!=G.title?G.title:"MENU"),zot(s)&&(s=null!=G.titleIcon?G.titleIcon:null),zot(v)&&(v=null!=G.backdropColor?G.backdropColor:e.clear),zot(f)&&(f=null!=G.backgroundColor?G.backgroundColor:"#666"),zot(m)&&(m=null!=G.rollBackgroundColor?G.rollBackgroundColor:"#777"),zot(z)&&(z=null!=G.selectedBackgroundColor?G.selectedBackgroundColor:"#444"),zot(y)&&(y=null!=G.selectedRollBackgroundColor?G.selectedRollBackgroundColor:z),zot(b)&&(b=null!=G.color?G.color:"white"),zot(w)&&(w=null!=G.rollColor?G.rollColor:b),zot(C)&&(C=null!=G.selectedColor?G.selectedColor:b),zot(x)&&(x=null!=G.selectedRollColor?G.selectedRollColor:w),zot(k)&&(k=null!=G.borderColor?G.borderColor:"#333"),zot(T)&&(T=null!=G.borderWidth?G.borderWidth:2),zot(S)&&(S=null!=G.gapAsAngle&&G.gapAsAngle),zot(P)&&(P=null!=G.gap?G.gap:S?3:6),zot(B)&&(B=null!=G.spacing?G.spacing:6),zot(A)&&(A=null!=G.gradient?G.gradient:null),!0===A&&(A=.1),zot(E)&&(E=null!=G.spacingInner?G.spacingInner:B),zot(I)&&(I=null!=G.spacingOuter?G.spacingOuter:B),zot(M)&&(M=null!=G.currentEnabled&&G.currentEnabled),zot(O)&&(O=null==G.currentSelected||G.currentSelected),zot(j)&&(j=null!=G.open&&G.open),zot(L)&&(L=null==G.under||G.under);var q=this,Q=(zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",U=null,K=this.core=new e.Circle({radius:i,color:a,style:_,inherit:D}).addTo(this);s&&(this.titleIcon=s.center(K)),l&&(this.title=new e.Label({text:l,size:o,font:n,color:b,style:_,inherit:D}).center(K)),K.cursor="pointer",K.on(Q,function(){q.leafNode=!1,0==ee.length?X():(e.loop(ee,function(e){e.selectedIndex=-1,e.removeFrom(),ee=[]}),q.outerLevel=0,q.selected=q.outerMenu=q.selectedMenu=q.text=null),(M||q.selected!=U)&&q.dispatchEvent("change"),U=q.selected,q.stage&&q.stage.update()}),this.closeRings=function(t){zot(t)&&(t=q.outerLevel);var o=q.outerLevel-t;e.loop(ee,function(e,t){t>o-1&&(e.removeFrom(),e.selectedIndex=-1,ee.pop())},!0),q.outerLevel=o,q.outerMenu=ee[ee.length-1],q.outerMenu&&(q.outerMenu.selectedIndex=-1),q.selected=q.selectedMenu=q.text=null,ee[ee.length-2]?(q.selectedMenu=ee[ee.length-2],q.selectedIndex=q.selectedMenu.selectedIndex):q.selectedIndex=-1,q.selected!=U&&q.dispatchEvent("change"),U=q.selected,q.stage&&q.stage.update()};var Z,J,$={};q.outerLevel=0,t.constructor=={}.constructor&&(t={core:t},Z=q.tree=new e.Hierarchy(t),J=Z.getLinearIDs()),q.lastRadial=null;var ee=this.radials=[];j&&X(),e.styleTransforms(this,G),this.clone=function(){return q.cloneProps(new e.RadialMenu(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,this.group,D))}},e.extend(e.RadialMenu,e.Container,"clone","zimContainer",!1),e.ColorPicker=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b){function w(e){return(e=Math.floor(e).toString(16))+""+e}function C(){if(U!=G||j!=O){if(D&&i){var t=[M=I,I=G];for(F=0;F<2;F++){var o=L.graphics;J=Math.floor(F/n),$=(Z=F%n)*(Y+r),ee=J*(Y+r)+ie,X[F]=t[F],o.f(Te.color).r($-1,ee-1,Y+2,Y+2).f(t[F]).r($,ee,Y,Y)}e.OPTIMIZE||!zns&&OPTIMIZE||!E.stage||E.stage.update()}G=U,O=j,E.dispatchEvent("change")}else E.dispatchEvent("close")}function x(){E.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function k(){E.zimAccessibility&&E.zimAccessibility.changeTitle(E,null,!0)}function T(e){return Math.round(e*Math.pow(10,2))/Math.pow(10,2)}var A,P="width, colors, cols, spacing, greyPicker, alphaPicker, startBackgroundColor, draggable, shadowColor, shadowBlur, buttonBar, circles, indicator, backgroundColor, keyArrows, container, selectedIndex, style, group, inherit";if(A=zob(e.ColorPicker,arguments,P,this))return A;z_d("67"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ColorPicker",this.group=v;var S=!1===y?{}:e.getStyle(this.type,this.group,b);zot(t)&&(t=null!=S.width?S.width:500),zot(o)&&(o=null!=S.colors?S.colors:null),zot(o)&&(D=!0),zot(n)&&(n=null!=S.cols?S.cols:10),zot(r)&&(r=null!=S.spacing?S.spacing:2);var B=!D&&o.length>0&&o.length<=n;zot(a)&&(a=null!=S.alphaPicker?S.alphaPicker:!B),zot(i)&&(i=null!=S.greyPicker?S.greyPicker:!B),zot(c)&&(c=null!=S.shadowColor?S.shadowColor:"rgba(0,0,0,.3)"),zot(u)&&(u=null!=S.shadowBlur?S.shadowBlur:14),zot(d)&&(d=null!=S.buttonBar?S.buttonBar:!B),zot(s)&&(s=d?null==S.draggable||S.draggable:null!=S.draggable&&S.draggable),zot(h)&&(h=null!=S.circles&&S.circles),zot(g)&&(g=null!=S.indicator&&S.indicator,d||(g=null==S.indicator||S.indicator)),zot(p)&&(p=null!=S.backgroundColor?S.backgroundColor:"black"),zot(l)&&(l=null!=S.startBackgroundColor?S.startBackgroundColor:null),zot(f)&&(f=null==S.keyArrows||S.keyArrows);var E=this;if(zot(m)){if(!zdf)return;m=zdf.stage}else{if(!m.getBounds)return;if(zot(m.getStage))return}E.container=m;var I="#e472c4",M="#50c4b7",O=1,j=1,L=new createjs.Shape;this.addChild(L),L.x+=r,L.y+=r;var _,Y,D=!1,X=[];if(zot(o)){D=!0;var R=6,W=R*R*R;R=Math.ceil(Math.pow(W,.5)),Y=(t-r)/18-r;var H=Math.floor(Math.pow(R*R,1/3));_=[];for(var F=0;F<6;F++)for(var V=0;V<6;V++)for(var N=0;N<6;N++)_.push("#"+w(3*F)+w(3*V)+w(3*N));for(o=[],F=0;F<_.length;F++)J=Math.floor(F/6),o[18*((Z=F%6)+6*(H=J>=18?1:0))+(J-6*H*3)]=_[F];n=18,X=[M,I]}else Y=(t-r)/n-r;var G,q=Math.ceil(o.length/n),Q=1,U=String(o[o.length-1]);if(!zot(l)){var K=l.match(/rgba\((.*)\)/);K&&(Q=(J=K[1].split(",")).pop(),l="rgb("+J.join(",")+")"),U=String(l)}D&&(G=M);var Z,J,$,ee,te=L.graphics,oe=(H=0,null!=S.borderColor?S.borderColor:null),ne=null!=S.borderWidth?S.borderWidth:null;for(!zot(oe)&&zot(ne)&&(ne=1),ne&&zot(oe)&&(oe="#333"),ne&&te.s(oe).ss(ne),F=0;F<o.length;F++)J=F%n,Z=Math.floor(F/n),$=J*(Y+r),ee=Z*(Y+r),h?te.f(o[F]).dc($+Y/2,ee+Y/2,Y/2):te.f(o[F]).r($,ee,Y,Y);var re=ee+Y+r;E.colors=o;var ie=re;if(i){for(F=0;F<16;F++)X.push("#"+w(F)+w(F)+w(F));for(F=0;F<X.length;F++)J=Math.floor(F/n),$=(Z=F%n)*(Y+r),ee=J*(Y+r)+re,h?te.f(X[F]).dc($+Y/2,ee+Y/2,Y/2):te.f(X[F]).r($,ee,Y,Y);re=ee+Y+r;var ae=n,le=Math.ceil(X.length/n)}if(E.greys=X,g){function se(e){zot(e)||e<0?g.visible=!1:(g.visible=!0,"#000"==U||"#000000"==U||"black"==U?(g.color="#222",g.alpha=1):(g.color="black",g.alpha=.5),g.x=L.x+e%n*(Y+r)+Y/2,g.y=L.x+Math.floor(e/n)*(Y+r)+Y/2)}(g=this.indicator=h?new e.Circle(Y/2*.5,null,null,null,null,null,null,null,!1):new e.Rectangle(.5*Y,.5*Y,null,null,null,null,null,null,!1)).alpha=.5,g.centerReg(),this.addChild(g),g.mouseEnabled=!1,se(o.indexOf(U))}var ce=10;if(a){var ue=new e.Container({style:!1});ue.setBounds(0,0,600,70),this.addChild(ue),ue.x=0,ue.y=re;var de=this.alphaBacking=new e.Rectangle(600-2*ce,50,"#222",null,null,0,null,null,!1);ue.addChild(de),e.centerReg(de,ue);var he=this.alphaBut=new e.Button({width:20,height:30,backgroundColor:"darkorange",rollBackgroundColor:"orange",label:"",corner:0,hitPadding:20,style:!1}),ge=this.alphaSlider=new e.Slider({min:0,max:1,step:.05,button:he,barLength:330,barWidth:2,barColor:"#999",vertical:!1,useTicks:!1,inside:!1,style:!1});ge.currentValue=zot(Q)?1:Q,ue.addChild(ge),ge.x=40,ge.y=ue.height/2;var pe=this.alphaText=new e.Label({text:"Alpha: "+e.decimals(Q),size:30,color:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",rollColor:"orange",group:this.group});ue.addChild(pe),pe.x=ge.x+ge.bar.width+40,pe.y=ue.height/2-pe.height/2,ue.scaleX=ue.scaleY=t/600,ge.on("change",function(){pe.text="Alpha: "+T(ge.currentValue),we&&(we.alpha=j=ge.currentValue),d?E.dispatchEvent("set"):E.dispatchEvent("change"),E.stage&&E.stage.update()}),re+=ue.height-ce}if(d){var fe=new e.Container({style:!1});fe.setBounds(0,0,600,100),this.addChild(fe),fe.x=0,fe.y=re+ce;var me=this.swatchText=new e.Label({align:"center",text:U.toUpperCase(),labelWidth:120,labelHeight:50,size:30,color:"orange",rollColor:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group});if(fe.addChild(me),e.centerReg(me),me.x=90,me.y=48,s){var ze=this.grip=new e.Shape({style:!1});fe.addChild(ze),ze.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),ze.x=70,ze.y=65,me.y=40,ze.mouseEnabled=!1}var ye=this.closeBut=new e.Button({width:90,height:90,label:"X",backgroundColor:"#222",rollBackgroundColor:"#444",corner:0,style:!1});fe.addChild(ye),ye.x=600-ye.width-ce,ye.y=0,ye.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){E.dispatchEvent("close")});var ve=this.okBut=new e.Button({width:150,height:90,label:"OK",backgroundColor:"#222",rollBackgroundColor:"#444",corner:0,style:!1});fe.addChild(ve),ve.x=ye.x-ve.width-ce,ve.y=0,ve.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",C);var be=this.swatchBacking=new e.Shape({style:!1});fe.addChild(be),(te=be.graphics).f("black").r(.5,.5,50,89).f("#666").r(50,.5,50,89).f("white").r(100,.5,49.5,89),be.x=ve.x-150-ce,be.y=0;var we=this.swatch=new e.Rectangle(150,90,U,null,null,null,null,null,!1);fe.addChild(we),we.x=be.x,we.y=0,we.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",C),we.cursor="pointer",we.alpha=j=Q,fe.scaleX=fe.scaleY=t/600,re+=fe.height}else L.cursor="pointer";a||d||(re-=ce-r);var Ce=re+ce;this.setBounds(0,0,t,Ce);var xe,ke,Te=this.background=new e.Rectangle(t,Ce,p,null,null,null,null,null,!1);this.addChildAt(Te,0),-1!=c&&u>0&&(Te.shadow=new createjs.Shadow(c,8,8,u)),s&&(Te.on("mousedown",function(t){t.target.stage,xe=t.stageX/e.scaX-E.x,ke=t.stageY/e.scaY-E.y,Te.cursor="move"}),Te.on("pressmove",function(t){E.x=t.stageX/e.scaX-xe,E.y=t.stageY/e.scaY-ke,E.stage&&E.stage.update()}),Te.on("pressup",function(){Te.cursor="default",E.stage&&E.stage.update()}));var Ae,Pe=n*(Y+r),Se=q*(Y+r);if(i)var Be=ae*(Y+r),Ee=le*(Y+r);L.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(t){var a=e.hitTestGrid(L,Pe,Se,n,q,t.stageX,t.stageY,0,0,r,r);zot(a)||(U=o[a],d?(we.color=U,me.text=String(o[a]).toUpperCase(),U!=G&&E.dispatchEvent("set")):C()),i&&(a=null,zot(a=e.hitTestGrid(L,Be,Ee,ae,le,t.stageX,t.stageY,0,Se,r,r))||(U=X[a],d?(we.color=U,me.text=X[a].toUpperCase(),U!=G&&E.dispatchEvent("set")):C())),g&&se(o.indexOf(U)),d?E.stage&&E.stage.update():g&&E.stage&&E.stage.update(),k()}),Object.defineProperty(this,"selectedColor",{get:function(){return U},set:function(e){e=e.toLowerCase(),G=U=e,d&&(we.color=U,me.text=U,E.stage&&E.stage.update()),g&&se(o.indexOf(U)),k()}}),Object.defineProperty(this,"currentValue",{get:function(){return U},set:function(e){E.selectedColor=e}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return U},set:function(e){e!=E.selectedColor&&(E.selectedColor=e,E.dispatchEvent("change"))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return o.indexOf(U)},set:function(e){G=U=o[e],d&&(we.color=U,me.text=U,E.stage&&E.stage.update()),g&&se(o.indexOf(U)),k()}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return a?T(ge.currentValue):1},set:function(e){a&&(O=ge.currentValue=e,we&&(we.alpha=O),pe&&(pe.text="Alpha: "+T(ge.currentValue)),E.stage&&E.stage.update())}}),Object.defineProperty(this,"colors",{get:function(){return i?o.concat(X):o},set:function(){zon&&zogy("ColorPicker() colors is read only - make a new ColorPicker to change")}}),typeof KEYFOCUS!=typeof undefined&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==E},set:function(){zns?e.KEYFOCUS=E:KEYFOCUS=E}}),f&&e.KEYFOCUS&&x(),this.on("mousedown",function(){f&&x()}),this.keyDownEvent=function(e){if(E.stage&&(E.zimAccessibility&&E.focus||!E.zimAccessibility&&E.keyFocus)){var t=E.selectedIndex;function o(){t<0&&(t=E.colors.length-1),t>E.colors.length-1&&(t=0),E.selectedIndex=t,E.dispatchEvent("change"),E.stage&&E.stage.update()}37==e.keyCode||40==e.keyCode?(t--,o()):38!=e.keyCode&&39!=e.keyCode||(t++,o())}},window.addEventListener("keydown",this.keyDownEvent),this.hide=function(){if(E.removeFrom(),E.toggled=!1,E.zimAccessibility){var e=E.zimAccessibility;e.resize(E),Ae?Ae.focus():E.zimTabTag.nextSibling.focus(),setTimeout(function(){e.talk("ColorPicker has been closed.")},50)}return E},this.show=function(){if(E.center(E.container),E.zimAccessibility){var e=E.zimAccessibility;setTimeout(function(){e.activatedObject&&(Ae=e.activatedObject.zimTabTag)},50),e.resize(E),e.tabIndex=E.zimTabIndex}return E.toggled=!0,E},this.toggle=function(e){return!0===e?E.show():!1===e?E.hide():E.container.contains(E)?E.hide():E.show(),E},zot(z)&&(z=null!=S.selectedIndex?S.selectedIndex:0),E.selectedIndex=z,!1!==y&&e.styleTransforms(this,S),this.clone=function(){return E.cloneProps(new e.ColorPicker(t,D?null:o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,this.group,b))},this.dispose=function(e,t,o){return window.removeEventListener("keydown",E.keyDownEvent),ge&&ge.dispose(),o||this.zimContainer_dispose(!0),!0}},e.extend(e.ColorPicker,e.Container,["clone","dispose"],"zimContainer",!1),e.TextEditor=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O){function j(){d||(W.text=R.text),X.hide(),X.dispatchEvent("set")}function L(){W&&(R.text=W.text),o&&(o.color=W.color),N&&N.toggle(1==W.bold),G&&G.toggle(1==W.italic),q&&(q.noAnimate=!0,"center"==W.align?q.selectedIndex=1:"right"==W.align?q.selectedIndex=2:q.selectedIndex=0),J&&(J.currentValue=W.size),ee&&(ee.currentValue=W.font),X.inputEvent&&R.off("input",X.inputEvent),X.inputEvent=R.on("input",function(){d&&(W.text=R.text),X.dispatchEvent("input"),X.dispatchEvent("update"),X.stage&&X.stage.update()})}var _,Y="width, color, backgroundColor, fieldColor, fieldHeight, textSize, sizeList, optionList, colorList, fontList, live, button, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, wrap, limit, scroll, placeholder, password, borderColor, borderWidth, margin, corner, shadowColor, shadowBlur, draggable, boundary, frame, style, group, inherit";if(_=zob(e.TextEditor,arguments,Y,this))return _;z_d("67.1"),this.group=M;var D=!1===I?{}:e.getStyle("TextEditor",this.group,O);if(zot(t)&&(t=null!=D.width?D.width:400),zot(n)&&(n=null!=D.backgroundColor?D.backgroundColor:e.lighter),zot(g)&&(g=null!=D.titleBar?D.titleBar:"Text Editor"),zot(S)&&(S=null==D.draggable||D.draggable),zot(m)&&(m=null!=D.titleBarHeight?D.titleBarHeight:30),zot(r)&&(r=null!=D.fieldColor?D.fieldColor:n.darken(.05)),zot(d)&&(d=null==D.live||D.live),zot(z)&&(z=null==D.wrap||D.wrap),zot(v)&&(v=null==D.scroll||D.scroll),zot(k)&&(k=null!=D.margin?D.margin:10),zot(y)&&(y=null!=D.limit?D.limit:null),zot(g)&&(g=null!=D.titleBar?D.titleBar:null),zot(l)&&(l=null!=D.sizeList?D.sizeList:null),zot(c)&&(c=null!=D.colorList?D.colorList:null),zot(s)&&(s=null!=D.optionList?D.optionList:null),zot(u)&&(u=null!=D.fontList?D.fontList:null),zot(r)&&(r=null!=D.fieldColor?D.fieldColor:null),zot(i)&&(i=null!=D.fieldHeight?D.fieldHeight:null),zot(a)&&(a=null!=D.textSize?D.textSize:null),zot(E)){if(!zdf)return void(zon&&zog("zim.TextEditor - please provide a reference to zim Frame"));E=zdf}this.zimPanel_constructor(t,300,g,p,f,m,n,C,x,T,!0,null,null,null,A,P,S,B,null,I,M,O);var X=this;zot(h)&&(h=new e.Button({width:50,height:50,label:"",icon:(new Shape).sca(.4).f("white").p("AikFsQg5jmhphxIA1gXQBeBGA3CwQC8mRCpjOIBfAoQkPFGiSFpg"),color:e.white,corner:10,backgroundColor:e.green.darken(.2),borderColor:e.white,borderWidth:2,rollBackgroundColor:e.green,shadowBlur:3}).pos(k,m+2*k,e.RIGHT,e.TOP,X)),X.button=h,h.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",j),zot(i)&&(i=null!=D.fieldHeight?D.fieldHeight:h.height+2*k);var R=X.textArea=new e.TextArea({color:o,backgroundColor:r,width:t-h.width-3*k,height:zot(i)?h.height+2*k:i,expand:10,password:w,placeholder:b,frame:E}).loc(k,m+k+(i&&i<h.height+2*k?(h.height-i)/2+k:0),null,null,!1);z||(R.tag.style.whiteSpace="nowrap"),y&&R.tag.setAttribute("maxLength",y),v&&(R.tag.style.overflowY="auto");var W=new e.Label;X.on("pressmove",function(){R.resize()}),X.on("close",function(){X.inputEvent&&R.off("input",X.inputEvent),R.removeFrom()}),X.panelHeight=m+k+Math.max(i,h.height+2*k)+k;var H,F=e.mobile(),V=F?35:30;if(l||s||c){new e.Rectangle(t,V+k,"rgba(0,0,0,.05)").loc(0,X.panelHeight,X);var N,G,q,Q=[];if(c){var U=Array.isArray(c),K=X.colorPicker=new e.ColorPicker({colors:U?c:null,cols:U?Math.min(c.length,12):null,alphaPicker:!1,greyPicker:!U,container:E.stage});function Z(){R.tag.style.display="block",K.hide(),X.stage&&X.stage.update()}K.on("close",Z),K.on("change",function(){W.color=o.color=K.selectedColor,X.dispatchEvent("update"),Z()}),X.closeColorPicker=function(){Z()},
(o=X.swatch=new e.Rectangle(V,V,W.color,e.dark,1).cur()).on("mousedown",function(){X.dispatchEvent("color"),R.tag.style.display="none",K.selectedColor=o.color,K.show(),X.stage&&X.stage.update()}),Q.push(o)}if(s&&(!0===s&&(s=["bold","italic","align"]),zot(STYLE)&&(STYLE={}),zot(STYLE.group)&&(STYLE.group={}),STYLE.group.zimEditor={width:V,height:V,corner:0,borderColor:e.tin,shadowBlur:-1,backgroundColor:e.light,rollBackgroundColor:e.light,toggleBackgroundColor:e.green,toggleColor:e.grey},e.loop(s,function(t){if("bold"==t.toLowerCase())(N=X.bold=new e.Button({label:new e.Label({text:"B",color:e.grey,size:16,bold:!0}),toggle:"B",group:"zimEditor"})).on("click",function(){W.bold=N.toggled,X.dispatchEvent("update"),X.stage&&X.stage.update()}),Q.push(N),W.bold&&N.toggle();else if("italic"==t.toLowerCase())(G=X.italic=new e.Button({label:new e.Label({text:"I",color:e.grey,size:16,bold:!0,italic:!0}),toggle:"I",group:"zimEditor"})).on("click",function(){W.italic=G.toggled,X.dispatchEvent("update"),X.stage&&X.stage.update()}),Q.push(G),W.italic&&G.toggle();else if("align"==t.toLowerCase()){var o=new e.Tile(new e.Rectangle(V-10,V-10,e.grey).centerReg(),3,1,10,10),n=F?["\u21da","\u21d4","\u21db"]:["\u21d0","\u21d4","\u21d2"];e.loop(3,function(t){var r=o.getChildAt(t);new e.Label(n[t],2*V/3,null,e.white).center(r).expand(10)});var r=0;"right"==W.align?r=2:"center"!=W.align&&"middle"!=W.align||(r=1),(q=X.align=new e.Selector({tile:o,corner:0,borderWidth:1,borderColor:e.grey,backgroundColor:e.clear,selectedIndex:r})).on("change",function(){0==q.selectedIndex?W.align="left":1==q.selectedIndex&&(W.align="center"),2==q.selectedIndex&&(W.align="right"),X.dispatchEvent("update"),X.stage&&X.stage.update()}),Q.push(q)}}),delete STYLE.group.zimEditor),l){var J=X.sizePicker=new e.Stepper({list:!0===l?null:l,stepperType:!0===l?null:"list",min:!0===l?5:null,max:!0===l?500:null,width:150,shadowBlur:-1,borderColor:e.dark,borderWidth:2,corner:0,backgroundColor:e.green,downForward:!1}).siz(null,V);J.arrowPrev.expand(0),J.textBox.color=e.lighter,J.on("change",function(){W.size=J.currentValue,X.dispatchEvent("update"),X.stage&&X.stage.update()}),J.currentValue=W.size,Q.push(J)}var $=new e.Tile(Q,Q.length,1,10,10,!0).loc(k,X.panelHeight+k/2,X);X.panelHeight=X.panelHeight+k+$.height+k}if(u){Array.isArray(u)?H=u:(H=["Arial","Courier New","Georgia","Helvetica","Palatino","Tahoma","Verdana"],F||(H=H.concat(["Comic Sans MS","Impact"])),H.sort());var ee=X.fonts=new e.List({width:t-2*k,height:100,viewNum:3,backgroundColor:e.moon,color:e.grey,rollColor:e.dark,rollBackgroundColor:e.green.lighten(.5),selectedBackgroundColor:e.mist,selectedRollBackgroundColor:e.green.lighten(.6),selectedColor:e.dark,backdropColor:e.light,scrollBarColor:e.dark,shadowBlur:-1,list:H}).center(X).loc(null,X.panelHeight);ee.on("change",function(){W.font=ee.currentValue,X.dispatchEvent("update"),X.stage&&X.stage.update()}),X.panelHeight=X.panelHeight+k+ee.height+k}X.show=function(e,o,n,r){if(X.parent)return e==X.label?X:(X.label=e,X);var i;if(W=e,R.addTo(X),W&&W.stage)i=W.stage;else if(r)i=r.stage;else{if(!zdf)return X;i=zdf.stage}return zot(o)&&zot(n)?W&&W.y>i.height/2?X.loc(i.width/2-t/2,W.y-X.panelHeight-.05*i.height,i):W&&W.y<=i.height/2?X.loc(i.width/2-t/2,W.y+W.height+.05*i.height,i):X.center(i):X.loc(o,n),X.y<20&&(X.y=20),X.y+X.height>X.stage.height&&(X.y=X.stage.height-X.height-20),L(),X.stage.update(),X},X.hide=function(){if(c&&K.hide(),R&&R.removeFrom(),!zot(X.stage)){var e=X.stage;return X.removeFrom(),e.update(),X}},Object.defineProperty(X,"label",{get:function(){return W},set:function(e){W=e,L()}}),!1!==I&&e.styleTransforms(this,D),this.clone=function(){return X.cloneProps(new e.TextEditor(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,this.group,O))},this.dispose=function(e,t,n){return X.stage,X.inputEvent&&R.off("input",X.inputEvent),K&&K.dispose(),o&&o.dispose(),ee&&ee.dispose(),h&&h.dispose(),R&&R.dispose(),q&&q.dispose(),N&&N.dispose(),G&&G.dispose(),J&&J.dispose(),n||this.zimPanel_dispose(),X.stage&&X.stage.update(),X.textArea=X.color=X.colorPicker=X.font=X.button=X.selector=X.bold=X.italic=X.size=null,!0}},e.extend(e.TextEditor,e.Panel,["clone","dispose"],"zimPanel",!1),e.Keyboard=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A){function P(t){$=K.stage,ae&&K.removeChild(ae),ue&&Be.indexOf(t.target)<0&&D(),zot(t.target.na)||(p&&t.target===pe?(K.tickerMouseEvent=$.on("stagemousemove",function(e){K.mouseYAmount=e.stageY}),e.Ticker.add(j),K.on("pressup",L),fe=t.stageY-K.localToGlobal(0,0).y):zot(w)||t.target.na!==w?"shift"===t.target.na?S():"?123"===t.target.toggle?(K.removeChild(ie),B(Te.number1)):"ABC"===t.target.toggle?(K.removeChild(ie),Ae=Te.def,B(),Pe&&S(!0)):"1/2"===t.target.toggle?(K.removeChild(ie),B(Te.number2)):"2/2"===t.target.toggle?(K.removeChild(ie),B(Te.number1)):"away"===t.target.na?(O(),K.dispatchEvent("close")):"e"===t.target.na||"u"===t.target.na||"i"===t.target.na||"o"===t.target.na||"a"===t.target.na||"n"===t.target.na?E(t.target.na):"return"===t.target.na?X("\n"):"backspace"===t.target.na?H():""===t.target.na?X(" "):X(t.target.na):K.dispatchEvent("special"),$.update())}function S(e){function t(){l&&(Pe=!0,se.color=i,ie.updateCache(),K.stage&&K.stage.update())}function n(){K.off("pressup",me),l=!1}var a,l=!1;if(Ae===Te.def){for(se.color=e?i:r,a=0;a<xe.length-6-(zot(w)?0:1);a++)(s=xe[a]).label.text.length>0&&(1===s.na.length?(s.label.text=s.label.text.toUpperCase(),s.label.centerReg(s).mov(0,6)):s.label.centerReg(s));e||(l=!0,setTimeout(t,500),me=K.on("pressup",n)),Ae=Te.shift}else{for(se.color=o,Pe=!1,a=0;a<xe.length-6;a++){var s;(s=xe[a]).label.text.length>0&&(1===s.na.length?(s.label.text=s.label.text.toLowerCase(),s.label.centerReg(s).mov(0,3)):s.label.centerReg(s))}Ae=Te.def}ie.updateCache(),K.stage&&K.stage.update()}function B(t){var r,i,a,l,s,h,p,f=0,m=0,z=!1,y=!1;zot(t)&&(t=Te.def),t===Te.def?r=oe:t===Te.number1?r=ne:t===Te.number2&&(r=re),ie=new e.Container(1e3,430,null,null,!1).addTo(K);for(var v=0;v<r.length;v++){(v<=1||t==Te.def&&2==v&&"shift"!=r[2][0])&&(f=(ke/2+2.5)*(10-r[v].length));for(var b=0;b<r[v].length;b++){if(z=!1,h=null,y=!1,"backspace"==r[v][b]?(s=!0,h=he,y=!0):"shift"==r[v][b]?(s=!0,h=de):(3==v||t!=Te.def&&2==v)&&0==b?(s=!0,y=!0):""==r[v][b]?(s=!1,z=!0):"away"==r[v][b]?(h=ge,s=!0,y=!0):s=!1,l=s?1.5*ke+2.5:z?(ke+5)*(zot(w)?4:3)-5:ke,a=new e.Rectangle(l,ke,o,u,d,g,null,null,!1).cur().addTo(ie),y&&a.addChild(new e.Rectangle(l,ke,"black",null,null,g,null,null,!1).alp(c)),a.label=i=h?new e.Label({text:"",backgroundColor:"ignore",font:null!=U.font?U.font:null,style:!1}):new e.Label({lineWidth:10,lineHeight:25,font:null!=U.font?U.font:null,text:r[v][b],color:n,align:"center",style:!1}),h){var C=h.clone();C.scaleTo(a,70,70),C.centerReg(a)}p?(p=!1,f+=67.33):(i.centerReg(a).mov(0,isNaN(i.text)?3:7),a.x=f,a.y=m,a.na=r[v][b],2==v&&0==b&&t==Te.number1&&(a.toggle="1/2"),2==v&&0==b&&t==Te.number2&&(a.toggle="2/2"),3==v&&0==b&&t==Te.def&&(a.toggle="?123"),3==v&&0==b&&t!=Te.def&&(a.toggle="ABC"),a.toggle&&i.mov(0,3),xe.push(a),"shift"==a.na&&(se=a),f=a.x+a.width+5)}m+=ke+5,f=0}ie.cache(d?-d:0,d?-d:0,d?ie.width+2*d:ie.width,d?ie.height+2*d:ie.height)}function E(t){function r(){s=!0,K.off("pressup",h),c||X(t)}function i(){var t,r,i,h,p=0;if(l.clear(),!s){c=!0,(ae=new e.Container(1e3,ke,null,null,!1).addTo(K,0)).y=-ke-5;for(var f=0;f<a.length;f++)h=Ae===Te.shift?a[f].toUpperCase():a[f],t=new e.Label({lineWidth:10,lineHeight:25,text:h,font:null!=U.font?U.font:null,color:n,align:"center",style:!1}),r=new e.Rectangle(ke,ke,o,u,d,g,null,null,!1).addTo(ae),i=new e.Rectangle(ke,ke,"white",null,null,g,null,null,!1).alp(.2),r.addChild(i),t.center(r),r.na=a[f],r.x=p,p+=ke+5;K.stage&&K.stage.update()}}var a,l,s=!1,c=!1;switch(t){case"e":a=ze;break;case"u":a=ye;break;case"i":a=ve;break;case"o":a=be;break;case"a":a=we;break;case"n":a=Ce}l=e.timeout(i,500,null,"ms");var h=K.on("pressup",r)}function I(){(de=new e.Shape({style:!1})).graphics.f(n).p("AhIFoIAAjYIixAAID5n3ID6H3IixAAIAADYgAjHBxICeAAIAADYIBTAAIAAjYICeAAIjImSg"),de.setBounds(-25.5,-36,51,72),he=new e.Container({style:!1});var t=new e.Shape({style:!1});t.graphics.f(n).p("ACgC+IigigIifCgQgGAGgJAAQgJAAgGgGQgGgGgBgJQABgJAGgGICgigIigifQgGgGgBgJQABgJAGgGQAGgGAJAAQAIAAAHAGICfCgICgigQAGgGAJAAQAJAAAGAGQAGAGABAJQgBAJgGAGIigCfICgCgQAGAGABAJQgBAJgGAGQgGAGgJAAQgJAAgGgGg"),t.setTransform(82.6,32),t.addTo(he);var o=new e.Shape({style:!1});o.graphics.f(n).s().p("AkhFAQgcAAgUgUIkHj6QgVgUAAgeQAAgdAVgVIEHj6QAUgTAcAAINKAAQAdAAAUAUQAUAUAAAdIAAH1QAAAdgUATQgUAVgdAAgAk0kOIkGD8QgIAHAAALQAAALAIAIIEGD7QAIAHALAAINKAAQALAAAIgIQAHgHAAgLIAAn1QAAgLgHgIQgIgIgLAAItKAAQgLAAgIAHg"),o.setTransform(62.2,32),o.addTo(he),he.setBounds(0,0,125,64),(ge=new e.Container({style:!1})).setBounds(0,0,147,86);for(var r,i=[{p:"Ai+heIF9AAIi/C9g",transform:[73.4,76]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.4,43.2]},{p:"AnNAzIAAhlIObAAIAABlg",transform:[73,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.2,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.5,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.8,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[87.1,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.4,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.7,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.3,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.6,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[86.9,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.2,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.5,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]},{p:"AphEnQgzAAgkgkQglglAAgzIAAlVQAAgzAlglQAkgkAzAAITDAAQAzAAAkAkQAlAlAAAzIAAFVQAAAzglAlQgkAkgzAAgAqjjtQgcAcAAAnIAAFVQAAAnAcAbQAbAcAnAAITDAAQAnAAAcgcQAbgbAAgnIAAlVQAAgngbgcQgcgcgnAAIzDAAQgnAAgbAcg",transform:[73.4,29.5]}],a=0;a<i.length;a++)(r=new e.Shape({style:!1})).graphics.f(n).s().p(i[a].p),r.setTransform(i[a].transform[0],i[a].transform[1]),r.addTo(ge)}function M(){pe=new e.Rectangle(1.5*ke+2.5+2.5,ke,o,u,d,g,null,null,!1).addTo(K,0).cur();for(var t=0;t<4;t++)new e.Rectangle(.4*pe.width,4,n,null,null,null,null,null,!1).centerReg(pe).alp(.2).y-=15*t-22;pe.x=8.5*ke+40,pe.y=-ke-5,pe.na="drag"}function O(){K.hide()}function j(){K.mouseYAmount&&(K.y=K.parent.globalToLocal(0,K.mouseYAmount-fe).y)}function L(){$.off("pressmousemove",K.tickerMouseEvent),e.Ticker.remove(j)}function _(){if(ce&&le){for(var e=ce.label.x+ce.label.getBounds().x,t=0;t<Se;t++)e+=ce.widthArray[t]?ce.widthArray[t]:0;le.heightOnly=ce.getBounds().height*(ce.backing&&zot(ce.padding)?.9:1)-(ce.paddingVertical&&ce.background?2*ce.paddingVertical:0),le.center(ce),le.x=e}}function Y(){function t(e){0==Be.indexOf(e.target)?Se>0&&Se--:1==Be.indexOf(e.target)?Se<ce.text.length&&Se++:D(),_()}if(ue)return K;if(!ce)return K;var o,n,r,i=f?["<",">","x"]:["<",">"];Be=[],r=ce.localToLocal(0,0,K),ue=new e.Container({style:!1}).addTo(K).pos({x:r.x,y:r.y+ce.height+15,reg:!0}).cur();for(var s=0;s<i.length;s++)o=new e.Rectangle(ke,ke,a,u,d,g,null,null,!1),"x"==i[s]&&new e.Rectangle(ke,ke,"black",null,null,g,null,null,!1).alp(c).addTo(o),(n=new e.Label({lineWidth:10,text:i[s],backing:o,font:null!=U.font?U.font:null,color:l,align:"center",valign:"center",style:!1})).pos(0,0,e.LEFT,e.TOP,ue).cache(),n.x=n.x+s*(ke+5),Be.push(n);r=ce.localToLocal(0,0,K),ue.x=r.x,ue.y=r.y+ce.height+15,ue.on("click",t),K.stage&&K.stage.update()}function D(){if(!ue)return K;ue.removeAllEventListeners(),K.removeChild(ue),ue=null}function X(e){if(ce){var t,o;if("del"===e)ce&&(ce.text=[ce.text.slice(0,Se-1),ce.text.slice(Se)].join("")),Se--,W();else{Ae===Te.shift&&(e=e.toUpperCase());var n=ce.text;(t=ce.clone().removeFrom()).text=e,o=t.label.getMeasuredWidth(),ce.widthArray?ce.widthArray.splice(Se,0,o):ce.widthArray=[ce.breedte],Se<ce.text.length?ce.text=[ce.text.slice(0,Se),e,ce.text.slice(Se)].join(""):ce.text+=e,ce&&ce.label.getBounds().width<J?(Se++,_()):ce.text=n}Ae!==Te.shift||Pe||(K.removeChild(ie),B(),Ae=Te.def),_();var r=new createjs.Event("keydown");r.letter=e,K.dispatchEvent(r),K.stage&&K.stage.update()}}function R(t){if(K.stage){var o,n=0,r=!1;(ce=t.target).widthArrayCheck||W(),J=ce.label.lineWidth?ce.label.lineWidth:1e4,(o=ce.globalToLocal(t.stageX/e.scaX,t.stageY/e.scaY)).x-=ce.label.x,o.y-=ce.label.y;for(var i=0;i<ce.widthArray.length;i++)if(n+=ce.widthArray[i],o.x<n-ce.widthArray[i]/2+ce.label.getBounds().x){Se=i,r=!0;break}r||(Se=ce.text.length),_(),b&&!ue&&ce.text.length>0&&Y(),ue&&ce&&(ce.text.length>0?(o=ce.localToLocal(0,0,K),ue.x=o.x,ue.y=o.y+ce.height+15):D())}}function W(){if(ce){var e=new Label("");ce.widthArray=[];for(var t=0;t<ce.text.length;t++)(e=ce.clone().removeFrom()).text=ce.text[t],ce.widthArray.push(e.label.getMeasuredWidth());e.text=ce.text,ce.widthArrayCheck=!0,_()}}function H(t){function o(){(!ce||ce.text.length<1||0==K.currentIndex)&&(a=!1),a&&(n(),i&&(i=e.timeout(200,o,null,"ms"))),ce&&ce.text.length<1&&r()}function n(){ce&&ce.text.length>0?(K.selectedIndex>0&&X("del"),t?r():K.on("pressup",r)):X("del")}function r(){a=!1,i&&i.clear(),K.off("pressup",r)}var i,a=!0;n(),i=e.timeout(300,o,null,"ms"),K.stage&&K.stage.update()}function F(){for(var e=0;e<t.length;e++)t[e].clickEvent=t[e].on("click",R)}function V(){if(t.length>1)for(var e=0;e<t.length;e++)t[e].off("click",t[e].clickEvent)}function N(){if(!le&&(ce=t[0],J=ce&&ce.label.lineWidth?ce.label.lineWidth:1e4,ce)){(le=new e.Rectangle(3,ce.height-(ce.paddingVertical&&ce.background?2*ce.paddingVertical:0),s,null,null,null,null,null,!1).center(ce)).x=0,le.visible=!1,le.animate({obj:{alpha:0},rewind:!0,loop:!0,loopWait:750,time:250,id:"knipperTekst",timeUnit:"ms"});for(var o=0;o<t.length;o++)t[o].widthArray=[0];W()}}function G(){e.stopAnimate("knipperTekst"),ce&&ce.removeChild(le),le=null,ce=null}var q,Q="labels, backgroundColor, color, shiftBackgroundColor, shiftHoldBackgroundColor, placeBackgroundColor, placeColor, cursorColor, shadeAlpha, borderColor, borderWidth, margin, corner, draggable, placeClose, shadowColor, shadowBlur, container, data, place, special, rtl, hardKeyboard, style, group, inherit";if(q=zob(e.Keyboard,arguments,Q,this))return q;z_d("67.2"),this.zimContainer_constructor(1e3,400,null,null,!1),this.type="Keyboard",this.group=T;var U=!1===k?{}:e.getStyle(this.type,this.group,A);zot(t)&&(t=null!=U.labels?U.labels:[]),Array.isArray(t)||(t=[t]),zot(o)&&(o=null!=U.backgroundColor?U.backgroundColor:"#333"),zot(n)&&(n=null!=U.color?U.color:"white"),zot(r)&&(r=null!=U.shiftBackgroundColor?U.shiftBackgroundColor:"orange"),zot(i)&&(i=null!=U.shiftHoldBackgroundColor?U.shiftHoldBackgroundColor:"red"),zot(a)&&(a=null!=U.placeBackgroundColor?U.placeBackgroundColor:"#50c4b7"),zot(l)&&(l=null!=U.placeColor?U.placeColor:n),zot(s)&&(s=null!=U.cursorColor?U.cursorColor:"#50c4b7"),zot(c)&&(c=null!=U.shadeAlpha?U.shadeAlpha:.2),zot(u)&&(u=null!=U.borderColor?U.borderColor:"rgba(0,0,0,.1)"),zot(d)&&(d=null!=U.borderWidth?U.borderWidth:null),u<0||d<0?u=d=null:null!=u&&null==d&&(d=1),zot(h)&&(h=null!=U.margin?U.margin:5),zot(g)&&(g=null!=U.corner?U.corner:30),zot(p)&&(p=null!=U.draggable&&U.draggable),zot(f)&&(f=null==U.placeClose||U.placeClose),zot(m)&&(m=null!=U.shadowColor?U.shadowColor:"rgba(0,0,0,.2)"),zot(z)&&(z=null!=U.shadowBlur?U.shadowBlur:14),zot(v)&&(v=null!=U.data?U.data:[[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["?123"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC"]],[["+","x","%","=","<",">","{","}","[","]"],["\u20ac","\xa3","\xa5","$","\uffe6","~","`","\xa4","\u2661","\u2606"],["2/2","_","\\","|","\u300a","\u300b","\xa1","\xbf","backspace"],["ABC"]]]);var K=this;K.data=v,zot(b)&&(b=null==U.place||U.place),zot(C)&&(C=null!=U.rtl&&U.rtl),zot(x)&&(x=null==U.hardKeyboard||U.hardKeyboard);var Z="zim display - Keyboard(): Please pass in a reference to a container with bounds set";if(zot(y)){if(!zdf)return void zog(Z);y=zdf.stage}else{if(!y.getBounds)return void zog(Z);if(zot(y.stage))return void zog("zim display - Keyboard(): The container must have a stage property")}-1!=m&&z>0&&(K.shadow=new createjs.Shadow(m,3,3,z));var J,$=zdf?zdf.stage:null;K.labels=t;var ee=10,te=["@","",".","/","away"];zot(w)||te.splice(1,0,w);var oe=e.copy(v[0]);oe[3]=oe[3].concat(te);var ne=e.copy(v[1]);ne[3]=ne[3].concat(te);var re=e.copy(v[2]);re[3]=re[3].concat(te);var ie,ae,le,se,ce,ue,de,he,ge,pe,fe,me,ze=["\u0117","\u0113","\u0119","\xea","\xe9","\xeb","\xe8"],ye=["\u016b","\xfb","\xfa","\xfc","\xf9"],ve=["\u012b","\u012f","\xec","\xed","\xef","\xee"],be=["\u014d","\u0153","\xf8","\xf5","\xf4","\xf3","\xf6","\xf2"],we=["\u0101","\xe3","\xe5","\xe2","\xe1","\xe4","\xe0","\xe6"],Ce=["\xf1","\u0144"],xe=[],ke=955/ee,Te={def:"default",shift:"shift",number1:"number1",number2:"number2"},Ae=Te.def,Pe=!1,Se=0,Be=[];I(),B(Ae),p&&M(),this.on("mousedown",P),K.addChar=function(e){!zot(e)&&e.match(/^.$/)&&X(e)},K.removeChar=function(){H(!0)},F(),N(),Object.defineProperty(this,"selectedLabel",{get:function(){return ce},set:function(e){R({target:e}),K.hidePlace()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return Se},set:function(e){Se=e,_()}}),this.show=function(e){return K.addTo(y),zot(e)||R({target:t[e]}),le&&(le.visible=!0),K.toggled=!0,K},this.hide=function(){return K.removeFrom(y),le&&(le.visible=!1),$.update(),K.toggled=!1,K},this.toggle=function(e){return!0===e?K.show():!1===e?K.hide():K.parent?K.hide():K.show(),K},this.showPlace=function(){return Y(),K},this.hidePlace=function(){return D(),K},this.addLabels=function(e){Array.isArray(e)||(e=[e]);for(var o=e.length-1;o>=0;o--)t.indexOf(e[o])>=0||"Label"!=e[o].type?e.splice(o,1):e[o].widthArray=[0];return V(),t=t.concat(e),F(),N(),le&&(le.visible=!0),K},this.removeLabels=function(e){Array.isArray(e)||(e=[e]),V();for(var o=0;o<e.length;o++){var n=t.indexOf(e[o]);n>=0&&t.splice(n,1)}return F(),0==t.length?ce&&G():ce&&-1==t.indexOf(ce)&&(G(),N()),K};var Ee=new e.Rectangle(this.width,this.height,e.clear,null,null,null,null,null,!1).addTo(this).expand().bot();Ee.on("mousedown",function(){}),Ee.on("click",function(){}),this.resize=function(){if(K.scaleTo($,100-2*h/$.width*100,50-2*h/$.height*100),K.y=$.height-K.height-h,K.x=$.width/2-K.width/2,ce&&ue){var e=ce.localToLocal(0,0,K);ue.x=e.x,ue.y=e.y+ce.height+15}return K.stage&&K.stage.update(),K},this.resize(),K.selectedLabel&&(K.selectedIndex=K.selectedLabel.text.length),x&&(this.keydownEvent=function(e){if(K.stage){var t=K;zot(t)||(35==e.keyCode&&(t.selectedIndex=t.selectedLabel.text.length),36==e.keyCode&&(t.selectedIndex=0),37==e.keyCode&&(t.selectedIndex=t.selectedIndex-1),39==e.keyCode&&(t.selectedIndex=t.selectedIndex+1),46==e.keyCode&&t.selectedIndex<t.selectedLabel.text.length&&(t.selectedIndex=t.selectedIndex+1,t.removeChar()),8==e.keyCode&&(e.preventDefault(),t.removeChar()),t.addChar(e.key),K.stage&&K.stage.update())}},window.addEventListener("keydown",this.keydownEvent)),!1!==k&&e.styleTransforms(this,U),this.clone=function(){var l=new e.Keyboard(t,o,n,r,i,a,s,c,h,g,p,f,m,z,y,v,b,w,C,x,k,this.group,A);return K.cloneProps(l)},this.dispose=function(e,t,o){Ee.removeAllEventListeners(),Ee=null,K.keydownEvent&&window.removeEventListener("keydown",K.keydownEvent);for(var n=0;n<K.labels.length;n++)K.labels[n].removeAllEventListeners();return K.labels=ce=null,$&&$.off("pressmousemove",K.tickerMouseEvent),o||K.zimContainer_dispose(!0),!0}},e.extend(e.Keyboard,e.Container,["clone","dispose"],"zimContainer",!1),e.Organizer=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P){var S,B="width, list, useAdd, useRemove, usePosition, autoAdd, autoRemove, autoPosition, addForward, removeForward, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, corner, keyEnabled, gradient, gloss, backdropColor, style, group, inherit";if(S=zob(e.Organizer,arguments,B,this))return S;z_d("67.3"),this.group=A;var E=!1===T?{}:e.getStyle("Organizer",this.group,P);if(zot(t)&&(t=null!=E.width?E.width:o&&o.vertical?o.width:300),zot(n)&&(n=null==E.useAdd||E.useAdd),zot(r)&&(r=null==E.useRemove||E.useRemove),zot(i)&&(i=null==E.usePosition||E.usePosition),zot(a)&&(a=null!=E.autoAdd?E.autoAdd:n),zot(l)&&(l=null!=E.autoRemove?E.autoRemove:r),zot(s)&&(s=null!=E.autoPosition?E.autoPosition:i),zot(c)&&(c=null==E.addForward||E.addForward),zot(u)&&(u=null==E.removeForward||E.removeForward),zot(d)&&(d=null!=E.backgroundColor?E.backgroundColor:"#777"),zot(h)&&(h=null!=E.rollBackgroundColor?E.rollBackgroundColor:"#555"),zot(g)&&(g=null!=E.selectedBackgroundColor?E.selectedBackgroundColor:"#333"),zot(f)&&(f=null!=E.color?E.color:"white"),zot(m)&&(m=null!=E.rollColor?E.rollColor:f),zot(z)&&(z=null!=E.selectedColor?E.selectedColor:f),zot(y)&&(y=null!=E.selectedRollColor?E.selectedRollColor:f),zot(v)&&(v=null!=E.spacing?E.spacing:1),zot(b)&&(b=null!=E.corner?E.corner:0),zot(C)&&(C=null!=E.gradient?E.gradient:.2),zot(x)&&(x=null!=E.gloss?E.gloss:null),zot(k)&&(k=null!=E.backdropColor?E.backdropColor:null),Array.isArray(b)||(b=[b,b,b,b]),n||i||r){var I=(t+v)/((n?1:0)+(i?4:0)+(r?1:0)),M={width:I,height:I,label:"",shadowColor:-1,gradient:C,corner:b,backgroundColor:d,rollBackgroundColor:h},O=[],j=new e.Shape;if(j.graphics.f(f).p("AAAA4Ih6B8Ig5g4IB8h8Ih7h6IA4g5IB6B8IB7h8IA5A5Ih8B6IB8B7Ig5A5g"),n&&O.push(new e.Button({icon:j.sca(.55).rot(-45).reg(1),inherit:M})),i){var L=new e.Shape;L.graphics.f(f).p("AiJieIETCeIkTCfg"),O.push(new e.Button({icon:L.sca(.6).rot(o&&!o.vertical?180:-90).reg(-2),inherit:M})),O.push(new e.Button({icon:L.clone().sca(.6).rot(o&&!o.vertical?0:90).reg(-2),inherit:M}));var _=new e.Shape;_.graphics.f(f).p("AiFCLIAAkVIBXAAIAAEVgAgiAAICoiHIAAEQg"),O.push(new e.Button({icon:_.sca(.62).rot(o&&!o.vertical?0:90).reg(0),inherit:M})),O.push(new e.Button({icon:_.clone().sca(.62).rot(o&&!o.vertical?180:-90).reg(0),inherit:M}))}r&&O.push(new e.Button({icon:j.clone().rot(0).sca(.55),inherit:M})),0==O.length&&(O=[""]),this.zimTabs_constructor(t,I,O,d,h,g,p,f,m,z,y,!1,v,!0,!1,b,null,!0,C,x,null,null,null,null,null,null,null,null,null,null,k);var Y=this;Y.list=o,Y.type="Organizer",Y.setButtons=function(){if(i){var e=n?1:0;O[e+0]&&(O[e+0].icon.rotation=Y.list&&!Y.list.vertical?180:-90),O[e+1]&&(O[e+1].icon.rotation=Y.list&&!Y.list.vertical?0:90),O[e+2]&&(O[e+2].icon.rotation=Y.list&&!Y.list.vertical?0:90),O[e+3]&&(O[e+3].icon.rotation=Y.list&&!Y.list.vertical?180:-90)}};var D=!1,X=o;Y.change(function(e){(!D&&Y.list||Y.list&&Y.list!=X)&&(Y.list!=X&&X&&X.noChange(),Y.list.change(function(){Y.orgItem=Y.list.selected,Y.orgIndex=Y.list.selectedIndex}),D=!0,X=Y.list);var t=e.target.selectedIndex;n||t++,i||n&&!(t>0)||(t=5);var o=zot(Y.list.selectedIndex)||Y.list.selectedIndex<0;switch(o&&(Y.currentValue=null),Y.lastIndex=Y.list.selectedIndex,t){case 0:if(a){var r=Math.max(0,Y.list.selectedIndex);Y.add(r)}Y.orgType="add";break;case 1:if(o)break;s&&(r=Y.list.selectedIndex,Y.up(r)),Y.orgType="up";break;case 2:if(o)break;s&&(r=Y.list.selectedIndex,Y.down(r)),Y.orgType="down";break;case 3:if(o)break;s&&(r=Y.list.selectedIndex,Y.toTop(r)),Y.orgType="top";break;case 4:if(o)break;s&&(r=Y.list.selectedIndex,Y.toBottom(r)),Y.orgType="bottom";break;case 5:if(o)break;l&&(r=Y.list.selectedIndex,Y.remove(r)),Y.orgType="remove"}}),this.add=function(e,t,o){return zot(e)&&(e=Y.lastIndex),zot(t)&&(t=""),e=c?Math.min(Y.list.length,Math.max(0,Y.list.selectedIndex)+1):Math.max(0,Y.list.selectedIndex),Y.list.addAt(t,e,o),Y.list.selectedIndexPlusPosition=e,Y.orgItem=Y.list.selected,Y.orgIndex=Y.list.selectedIndex,Y},this.up=function(e){zot(e)&&(e=Y.lastIndex);var t=Y.list.items[e];return zot(t)?Y:(Y.list.removeAt(1,e),Y.list.addAt(t,e-1),Y.list.selectedIndexPlusPosition=Math.max(0,e-1),Y.orgItem=Y.list.selected,Y.orgIndex=Y.list.selectedIndex,Y)},this.down=function(e){zot(e)&&(e=Y.lastIndex);var t=Y.list.items[e];return zot(t)?Y:(Y.list.removeAt(1,e),Y.list.addAt(t,e+1),Y.list.selectedIndexPlusPosition=Math.min(Y.list.length-1,e+1),Y.orgItem=Y.list.selected,Y.orgIndex=Y.list.selectedIndex,Y)},this.toTop=function(e){zot(e)&&(e=Y.lastIndex);var t=Y.list.items[e];return zot(t)?Y:(Y.list.removeAt(1,e),Y.list.addAt(t,0),Y.list.first(),Y.orgItem=Y.list.selected,Y.orgIndex=Y.list.selectedIndex,Y)},this.toBottom=function(e){zot(e)&&(e=Y.lastIndex);var t=Y.list.items[e];if(!zot(t))return Y.list.removeAt(1,e),Y.list.addAt(t,Y.list.length),Y.list.last(),Y.orgItem=Y.list.selected,Y.orgIndex=Y.list.selectedIndex,Y},this.remove=function(e){if(zot(e)){if(!(Y.list.selectedIndex>=0))return Y;e=Y.list.selectedIndex}var t=e==Y.list.selectedIndex;return Y.removedItem=Y.list.items[e],Y.list.removeAt(1,e),t?u||(e=Math.max(0,e-1)):e=Y.list.selectedIndex,Y.list.selectedIndexPlusPosition=Math.min(Y.list.length-1,e),Y.orgItem=Y.list.selected,Y.orgIndex=Y.list.selectedIndex,Y},!1!==T&&e.styleTransforms(this,E),this.clone=function(){return Y.cloneProps(new e.Organizer(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,Y.group,P))},this.dispose=function(e,t,o){return O=null,o||Y.zimTabs_dispose(!0),!0}}},e.extend(e.Organizer,e.Tabs,["clone","dispose"],"zimTabs",!1),e.Scrambler=function(o,n,r,a,l,s,c,u,d,h,g,p,f,m){function z(t){var n=t.target;n.stopAnimate();var r=n.boundsToGlobal(),i=o.hitTestGrid(o.width,o.height,o.cols,o.rows,r.x+r.width/2,r.y+r.height/2,null,null,o.spacingH,o.spacingV,null,"open");zot(i)||e.loop(o,function(e){if(e!=n&&!1!==e.paused){var t=e.boundsToGlobal(),r=o.hitTestGrid(o.width,o.height,o.cols,o.rows,t.x+t.width/2,t.y+t.height/2,null,null,o.spacingH,o.spacingV,null,"open");if(!zot(r)){if(i[2]==r[2]&&(e.x>=n.x&&e.x<=n.x+P/2||e.x<=n.x&&e.x>=n.x-P/2)){var a=e.x;e.mouseEnabled=!1,e.top().ord(-1),e.animate({props:{x:T},time:.2,id:"zimScrambler",timeUnit:"seconds",call:function(){e.mouseEnabled=!0,h&&!x.complete&&x.test()&&(x.complete=!0,x.dispatchEvent("complete"))}}),T=a}i[1]==r[1]&&(e.y>=n.y&&e.y<=n.y+S/2||e.y<=n.y&&e.y>=n.y-S/2)&&(a=e.y,e.mouseEnabled=!1,e.top().ord(-1),e.animate({props:{y:A},time:.201,override:!1,id:"zimScrambler",timeUnit:"seconds",call:function(){e.mouseEnabled=!0,h&&!x.complete&&x.test()&&(x.complete=!0,x.dispatchEvent("complete"))}}),A=a)}}},!0)}function y(){x.upEvent&&o.off("pressup",x.upEvent),x.moveEvent&&o.off("pressmove",x.moveEvent),o.noDrag(),s+l>0&&x.noMouse()}function v(t,n,r){e.stopAnimate("zimScrambler"),e.loop(o.items,function(e,i,a){var l=x.starts[t[i]];n?e.animate({props:{x:l.x,y:l.y},time:n,ease:r?"quadInOut":"quadOut",wait:r,timeUnit:"seconds",id:"zimScrambler"}):(e.loc(l),x.stage?e.drag({boundary:o}):i==a-1&&x.added(function(){o.drag({boundary:o})}))})}var b,w="tile, keys, keyProperty, scramble, time, wait, num, shadowColor, shadowBlur, swap, swapLock, style, group, inherit";if(b=zob(e.Scrambler,arguments,w,this))return b;z_d("67.35"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Scrambler",this.group=f;var C=!1===p?{}:e.getStyle(this.type,this.group,m);if(zot(o)&&(o=null!=C.tile?C.tile:o),zot(n)&&(n=null!=C.keys?C.keys:null),zot(r)&&(r=null!=C.keyProperty?C.keyProperty:null),zot(a)&&(a=null==C.scramble||C.scramble),zot(l)&&(l=null!=C.time?C.time:0),zot(s)&&(s=null!=C.wait?C.wait:0),zot(c)&&(c=null!=C.num?C.num:1),zot(u)&&(u=null!=C.shadowColor?C.shadowColor:"rgba(0,0,0,.3)"),zot(d)&&(d=null!=C.shadowBlur?C.shadowBlur:5),zot(h)&&(h=null!=C.swap&&C.swap),zot(g)&&(g=null!=C.swapLock&&C.swapLock),g&&(h=!0),!zot(o)){o.addTo(this);var x=this;x.complete=!0;var k=t(l);t(s);var T,A,P=(o.width+o.spacingH)/o.cols,S=(o.height+o.spacingV)/o.rows;o.on("mousedown",function(e){if(g){var t=o.current;if(x.testItem(e.target,t.indexOf(e.target)))return e.target.noMouse(),void e.target.noDrag()}if(T=e.target.x,A=e.target.y,-1!=u&&d>0){var n=new createjs.Shadow(u,3,3,d);e.target.backing?e.target.backing.shadow=n:e.target.shadow=n}x.upEvent&&o.off("pressup",x.upEvent),x.upEvent=o.on("pressup",function(e){var n=!0;if(g){var r=e.target.boundsToGlobal(),i=o.hitTestGrid(o.width,o.height,o.cols,o.rows,r.x+r.width/2,r.y+r.height/2,null,null,o.spacingH,o.spacingV,null,"open");if(zot(i))n=!1;else{var a=t[i[0]];n=e.target!=a&&!x.testItem(a,i[0])}}h&&n&&z(e),e.target.mouseEnabled=!1,e.target.animate({props:{x:T,y:A},time:.1,id:"zimScrambler",timeUnit:"seconds",call:function(){!x.complete&&x.test()&&(x.complete=!0,x.dispatchEvent("complete")),-1!=u&&d>0&&(e.target.backing?e.target.backing.shadow=null:e.target.shadow=null),e.target.mouseEnabled=!0}})},null,!0),h||(x.moveEvent&&o.off("pressmove",x.moveEvent),x.moveEvent=o.on("pressmove",function(e){z(e)}))}),this.test=function(){var t=o.current;return e.loop(t,function(e,t){return!zot(e)&&!!x.testItem(e,t)&&void 0})},this.testItem=function(e,t){if(!zot(e)){if(zot(t)&&(t=o.current.indexOf(e)),n){if((zot(r)?e.key:e[r])!=n[t])return!1}else if(o.items[t]!=e)return!1;return!0}},this.starts=[],this.order=[],e.loop(o.rows*o.cols,function(e){x.order.push(e)});var B=x.order.slice();o.loop(function(e){x.starts.push({x:e.x,y:e.y})}),this.inactive=!1,this.scramble=function(t,i,a){function l(){for(var i=!0,l=0;i&&l<50;)l++,e.shuffle(x.order),i=e.loop(x.order,function(e,t){var i=o.getChildAt(e);if(n){if((zot(r)?i.key:i[r])!=n[t])return!1}else if(o.items[t]!=i)return!1});v(x.order,t/a),e.timeout(t,function(){x.dispatchEvent("scrambled")})}zot(i)&&(i=0),zot(t)&&(t=0),(zot(a)||0==t)&&(a=1),y(),e.timeout(i,function(){t>0?e.interval(t/a,l,a,!0):l()}),setTimeout(function(){x.complete=!1,o.loop(function(e){e.mouse()}),x.mouse(),o.drag({boundary:o})},"s"==k?1e3*(i+t):i+t)},a?x.scramble(l,s,c):x.added(function(){o.drag({boundary:o})}),this.solve=function(e,t,n){zot(n)&&(n=!0),zot(t)&&(t=0),zot(e)&&(e=0),t+e==0&&n&&x.noMouse(),setTimeout(function(){x.order=B.slice(),y(),v(x.order,e,0,n)},"s"==k?1e3*t:t),n||setTimeout(function(){x.mouse(),o.drag({boundary:o})},"s"==k?1e3*(t+e):t+e)},this._enabled=!0,Object.defineProperty(x,"enabled",{get:function(){return x._enabled},set:function(t){i(x,t),e.OPTIMIZE||!zns&&OPTIMIZE||!x.stage||x.stage.update()}}),this.dispose=function(e,t,n){return o.removeAllEventListeners(),n||(x.zimContainer_dispose(!0),x.stage&&x.stage.update()),!0},!1!==p&&e.styleTransforms(this,C),this.clone=function(){return x.cloneProps(new e.Scrambler(o.clone(),n,r,a,l,s,c,u,d,h,g,p,x.group,m))}}},e.extend(e.Scrambler,e.Container,["clone","dispose"],"zimContainer",!1),e.Connectors=function(o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O){function j(t,o,n,r){if(t.addChild){g="on",S=!0,B=!1,(n=t).connectorMoveEvent||(re.bases||(re.bases=[]),re.bases.push(n),n.connectorMoveEvent=n.on("pressmove",function(){n.positionConnectors(n,!0,!0)}),n.connectorUpEvent=n.on("pressup",function(){n.positionConnectors(n,!0,!0)}),P&&(n.connectorOverEvent=n.on("mouseover",function(){F(n)}),n.connectorOutEvent=n.on("mouseout",function(){V(n)})),n.positionConnectors=function(t,o,n){e.loop(t.connectors,function(e){var r=t.parent.localToLocal(t.x-t.baseStart.x+e.nodeStart.x,t.y-t.baseStart.y+e.nodeStart.y,e.parent);e.x=r.x,e.y=r.y,Z(e,o,n)}),t.stage&&t.stage.update()},n.setConnectorColors=function(t,o,r,i){return zot(t)||(n.connectorColor=t),zot(o)||(n.connectorBorderColor=o),zot(r)||(n.connectorRollColor=r),zot(i)||(n.connectorRollBorderColor=i),e.loop(n.connectors,function(e){zot(t)||(e.color=t),zot(o)||(e.borderColor=o)}),n},n.setConnectorColors(T,A,w,C));var l=n.getBounds();a.endHead,Array.isArray(o)||(o=[o,o]);var s=[];return 2==o.length&&(o=[o[0],o[1],o[0],o[1]]),a.lineOrientation!=e.HORIZONTAL&&"auto"!=a.lineOrientation||e.loop([o[0],o[1]],function(t,o){if(-1==t||-2==t){var r=n.localToLocal(0==o?l.x:l.x+l.width,l.y,re);s.push([r.x,r.y,e.HORIZONTAL])}if(-1==t||-3==t){var i=n.localToLocal(0==o?l.x:l.x+l.width,l.y+l.height,re);s.push([i.x,i.y,e.HORIZONTAL])}t>0&&e.loop(t,function(t,r){var i=n.localToLocal(0==o?l.x:l.x+l.width,l.y+l.height*(t+1)/(r+1),re);s.push([i.x,i.y,e.HORIZONTAL])})}),a.orientation!=e.VERTICAL&&"auto"!=a.lineOrientation||e.loop([o[2],o[3]],function(t,o){if(-1==t||-2==t){var r=n.localToLocal(l.x,0==o?l.y:l.y+l.height,re);s.push([r.x,r.y,e.VERTICAL])}if(-1==t||-3==t){var i=n.localToLocal(l.x+l.width,0==o?l.y:l.y+l.height,re);s.push([i.x,i.y,e.VERTICAL])}t>0&&e.loop(t,function(t,r){var i=n.localToLocal(l.x+l.width*(t+1)/(r+1),0==o?l.y:l.y+l.height,re);s.push([i.x,i.y,e.VERTICAL])})}),n.connectors=[],n.baseStart=new e.Point(n.x,n.y),e.loop(s,function(e){
var t=j(e[0],e[1],n,e[2]);N(n,t)}),setTimeout(function(){n.positionConnectors(n,!0,!0)},50),re}var c=i.clone().loc(t,o,se).drag({boundary:v}).expand(b);return c.orientation=r,c.on("mouseover",Y),c.on("mouseout",D),c.on("mousedown",X),c.on("pressmove",R),c.on("pressup",W),p&&c.hold(_),c.creations=[],c}function L(){e.loop(r,function(e){j(e[0],e[1])}),l&&se.loop(function(e,t,o){0==t?(e.before=s?se.getChildAt(o-1):null,e.after=se.getChildAt(t+1)):t==o-1?(e.after=s?se.getChildAt(0):null,e.before=se.getChildAt(t-1)):(e.before=se.getChildAt(t-1),e.after=se.getChildAt(t+1)),c&&t>0&&e.noMouse()})}function _(e){var t=e.target.stage,o=e.target;re.bases||S&&!o.creator.creator||(o.adding?J(o.creator):J(o),t&&t.update())}function Y(e){var t=e.target;t.selected||(t.color=t.base?t.base.connectorRollColor:w,t.borderColor=t.base?t.base.connectorRollBorderColor:C,re.stage&&re.stage.update())}function D(e){var t=e.target;t.selected||(t.color=t.base?t.base.connectorColor:ie,t.borderColor=t.base?t.base.connectorBorderColor:ae,re.stage&&re.stage.update())}function X(t){var o=t.target;if(l||S&&!o.creator||!f||(0==ge&&(de=setTimeout(function(){if(ge=0,he){var e=re.stage?re.stage.frame:zdf;se.loop(function(t){if(t.hitTestPoint(e.mouseX,e.mouseY)&&t.selected)return!1})&&K()}},E)),ge++),o.startX=o.x,o.startY=o.y,!l&&he.length>0&&e.loop(he,function(e){e.startX=e.x,e.startY=e.y}),!(o.creations.length>=u||o.selected||o.creator&&!B)){o.adding=!0;var n=j(o.x,o.y).bot();if(n.creations=o.creations,n.creatorLine=o.creatorLine,n.creator=o.creator,n.orientation=o.orientation,n.startX=o.startX,n.startY=o.startY,o.base&&(n.base=o.base,n.baseStart=o.baseStart,n.nodeStart=o.nodeStart,n.connectors=o.connectors,o.base=o.baseStart=o.nodeStart=o.connectors=null,n.base.connectors&&n.base.connectors.splice(n.base.connectors.indexOf(o),1,n),n.color=n.base.connectorColor,n.borderColor=n.base.connectorBorderColor),n.before=o.before,n.after=o.after,n.before&&(n.before.after=n),n.after&&(n.after.before=n),n.creator){var r=n.creator.creations.indexOf(o);-1!=r&&n.creator.creations.splice(r,1,n)}e.loop(n.creations,function(e){e.creator=n}),o.creator=n,o.creatorLine=a.clone().setPoints(o.x,o.y,o.x,o.y).addTo(le).alp(0),o.creatorLine.lineOrientation=o.orientation,o.creatorLine.node=o,o.creatorLine.creatorNode=n,o.creations=[],n.creations.push(o)}}function R(t){var o=t.target;o.creatorLine&&o.creatorLine.alp(1),!l&&he.length>0&&-1==he.indexOf(o)&&K(),Z(o,!1,!0),re.bases&&e.loop(re.bases,function(e){o.creator&&o.creator.base==e||(!e.connectorsOn&&o.hitTestBounds(e)&&F(e),e.connectorsOn&&!o.hitTestBounds(e)&&V(e))}),re.stage.update()}function W(t){var o=t.target;re.bases&&e.loop(re.bases,function(e){e!=o.base&&e.connectorsOn&&V(e)});var n=!1;if(!l&&ge>1){clearTimeout(de);var r=o.adding?o.creator:o;o.adding&&J(r.creations[r.creations.length-1]),r.selected||Q(r,!(re.stage?re.stage.frame:zdf).ctrlKey),ge=0,n=!0}if(l||re.base||(d&&(o.x=Math.round(o.x/d)*d),h&&(o.y=Math.round(o.y/h)*h)),z&&e.dist(o.x,o.y,o.startX,o.startY)<z||y&&e.dist(o.x,o.y,o.startX,o.startY)>y)return o.adding?J(o):(o.loc(o.startX,o.startY),n||Z(o)),re.stage.update(),void re.dispatchEvent("noconnection");var i=!1,a=!1;if(l){var s=o.creator;if(re.connectionStart=s,re.connectionEnd=o,s.before&&o.hitTestCircle(s.before)&&!c)o.loc(s.before).removeFrom(),s.before.after=null,s.before.before||s.before.noMouse(),s.before=null,s.after||s.noMouse(),a=!0,i=U();else if(s.after&&o.hitTestCircle(s.after))o.loc(s.after).removeFrom(),s.after.before=null,s.after.after||s.after.noMouse(),c&&s.after.mouse(),s.after=null,s.before||s.noMouse(),c&&s.noMouse(),a=!0,i=U();else{if(s&&!(o.creations.length>0))return J(o),re.stage.update(),void re.dispatchEvent("noconnection");o.loc(o.startX,o.startY).bot()}}else if("off"==g){if(!se.loop(function(e){if(o!=e)return o.hitTestCircles(e)?(o.adding?J(o):(o.loc(o.startX,o.startY),Z(o)),S&&q(o),!m&&o.creator&&u>0&&o.creator.creations.length>=u&&o.creator.noMouse(),re.dispatchEvent("connection"),re.stage.update(),!1):void 0}))return void H(o)}else if("on"==g||"single"==g){var p,f=0;if(se.loop(function(e){if(o!=e&&o.hitTestCircles(e)){if(p=e,re.bases&&(o.orientation!=e.orientation||o.creator&&o.creator.base&&o.creator.base==e.base))return;if("on"==g)return!1;f++,f+=e.creations.length}})&&("single"!=g||1!=f))return void H(o);if(o.loc(p),o.creator&&o.orientation==e.VERTICAL&&Math.round(o.y)==Math.round(o.creator.startY)||o.creator&&o.orientation==e.HORIZONTAL&&Math.round(o.x)==Math.round(o.creator.startX))return;p.base&&p.base.connectors&&N(p.base,o),i=!0}!m&&o.creator&&u>0&&o.creator.creations.length>=u&&o.creator.noMouse(),o.adding=!1,Z(o,!0,!0),e.loop(he,function(e){e.startX=e.x,e.startY=e.y}),o.startX=o.x,o.startY=o.y,S&&q(o),a?re.dispatchEvent("connection"):re.dispatchEvent("noconnection"),i&&re.dispatchEvent("complete"),re.stage.update()}function H(e){e.adding||!B?J(e):(e.loc(e.startX,e.startY),Z(e)),S&&q(e),e.base&&e.base.connectors&&G(e.base,e),re.stage.update(),re.dispatchEvent("noconnection")}function F(t){e.loop(t.connectors,function(e){e.color=t.connectorRollColor,e.borderColor=t.connectorRollBorderColor}),t.connectorsOn=!0,t.stage.update()}function V(t){e.loop(t.connectors,function(e){e.color=t.connectorColor,e.borderColor=t.connectorBorderColor}),t.connectorsOn=!1,t.stage.update()}function N(e,t){e.connectors.push(t),t.nodeStart=t.parent.localToLocal(t.x,t.y,e.parent),t.nodeStart.x-=e.x-e.baseStart.x,t.nodeStart.y-=e.y-e.baseStart.y,t.base=e}function G(e,t){e.connectors.splice(e.connectors.indexOf(t),1),t.nodeStart=null,t.base=null}function q(e){e.creator&&(e.creator.creator?q(e.creator):e.creator&&e.creator.creations.length>=u?e.creator.noMouse():e.creator.mouse())}function Q(t,o){o&&e.loop(t.creations,function(e){Q(e,o)}),t.selected=!0,t.color=t.base?t.base.connectorColor:x,t.borderColor=t.base?t.base.connectorBorderColor:k,he.push(t),t.top(),ue||(ue=re.stage.on("stagemousedown",function(){var e=re.stage?re.stage.frame:zdf;se.loop(function(t){if(t.hitTestPoint(e.mouseX,e.mouseY))return!1})&&K()}))}function U(){if(se.loop(function(e){if(e.before||e.after)return!1}))return se.loop(function(e){e.noMouse()}),!0}function K(){e.loop(he,function(e){e.selected=!1,e.color=e.base?e.base.connectorColor:ie,e.borderColor=e.base?e.base.connectorBorderColor:ae}),he=[],re.stage.off("stagemousedown",ue),ue=null,re.stage.update()}function Z(t,o,n){var r=he.length>0?he:[t];e.loop(r,function(r){r!=t&&r.loc(r.startX+t.x-t.startX,r.startY+t.y-t.startY),r.creator&&r.creatorLine.setPoints(r.x,r.y,r.creator.x,r.creator.y,o,n),e.loop(r.creations,function(e){e.creatorLine.setPoints(e.x,e.y,e.creator.x,e.creator.y,o,n)})})}function J(t){if(e.loop(t.creations,function(e){J(e)},!0),t.creatorLine){t.creatorLine.removeFrom();var o=t.creator.creations.indexOf(t);-1!=o&&t.creator.creations.splice(o,1),t.creator.mouseEnabled||S&&!t.creator.creator||t.creator.mouse()}return t.removeFrom(),t.removeAllEventListeners(),t=null,re}function $(e){e.off("pressmove",e.connectorMoveEvent),e.off("pressup",e.connectorUpEvent),e.connectorOverEvent&&e.off("mouseover",e.connectorOverEvent),e.connectorOutEvent&&e.off("mouseout",e.connectorOutEvent),e.connectors=null,e.baseStart=null,e.positionConnectors=e.setConnectorColors=null,e.connectorColor=e.connectorBorderColor=e.connectorRollColor=e.connectorRollBorderColor=null,re.bases.splice(re.bases.indexOf(e),1),re.stage&&re.stage.update()}var ee,te="width, height, points, node, line, linear, linearWrap, linearOrder, num, snapH, snapV, dropType, deleteNode, dblclick, fullMove, min, max, boundary, expand, nodeRollColor, nodeRollBorderColor, nodeSelectedColor, nodeSelectedBorderColor, baseColor, baseBorderColor, baseRollover, rootLock, grandChildren, dblclickTime, style, group, inherit";if(ee=zob(e.Connectors,arguments,te,this))return ee;z_d("67.39"),this.group=M;var oe=!1===I?{}:e.getStyle("Connectors",this.group,O);zot(o)&&(o=null!=oe.width?oe.width:null),zot(n)&&(n=null!=oe.height?oe.height:null),this.zimContainer_constructor(null,null,null,null,!1),this.type="Connectors",zot(r)&&(r=null!=oe.points?oe.points:[[0,0],[100,0],[100,100],[0,100]]),zot(i)&&(i=null!=oe.node?oe.node:new e.Circle(10,e.grey,e.grey)),i.removeFrom(),i.color!=e.clear||i.hitArea||i.expand(0),zot(a)&&(a=null!=oe.line?oe.line:new e.Line({length:10,thickness:3,color:e.tin,strokeObj:{caps:"round"}})),zot(u)&&(u=null!=oe.num?oe.num:10),zot(l)&&(l=null!=oe.linear&&oe.linear),zot(s)&&(s=null==oe.linearWrap||oe.linearWrap),zot(w)&&(w=null!=oe.nodeRollColor?oe.nodeRollColor:i.color.match("rgb")?i.color:i.color.lighten(.2)),zot(C)&&(C=null!=oe.nodeRollBorderColor?oe.nodeRollBorderColor:i.borderColor),zot(x)&&(x=null!=oe.nodeSelectedColor?oe.nodeSelectedColor:e.white),zot(k)&&(k=null!=oe.nodeSelectedBorderColor?oe.nodeSelectedBorderColor:i.borderColor),zot(T)&&(T=null!=oe.baseColor?oe.baseColor:i.color),zot(A)&&(A=null!=oe.baseBorderColor?oe.baseBorderColor:i.borderColor),zot(P)&&(P=null!=oe.baseRollover&&oe.baseRollover),zot(z)&&(z=null!=oe.min?oe.min:i.radius?2*i.radius:Math.min(i.width,i.height)),zot(y)&&(y=null!=oe.max?oe.max:null),zot(b)&&(b=null!=oe.expand?oe.expand:e.mobile()?10:0),zot(g)&&(g=null!=oe.dropType?oe.dropType:"any"),zot(p)&&(p=null==oe.deleteNode||oe.deleteNode),zot(f)&&(f=null==oe.dblclick||oe.dblclick),zot(m)&&(m=null==oe.fullMove||oe.fullMove),zot(E)&&(E=null!=oe.dblclickTime?oe.dblclickTime:.5);var ne=t(E);if(E*="s"==ne?1e3:1,zot(d)&&(d=null!=oe.snapH?oe.snapH:null),zot(h)&&(h=null!=oe.snapV?oe.snapV:null),zot(S)&&(S=null!=oe.rootLock&&oe.rootLock),zot(B)&&(B=null==oe.grandChildren||oe.grandChildren),l&&r.length<=1)zon&&zogy("Connector() - linear needs more than one point");else{var re=this;re.node=i,re.line=a;var ie=i.color,ae=i.borderColor,le=(e.faint,re.lines=new e.Container(o,n).addTo(re)),se=re.nodes=new e.Container(o,n).addTo(re);if("Blob"==r.type||"Squiggle"==r.type){var ce=[];e.loop(r.points,function(e){ce.push([e[0],e[1]])}),r=ce}re.points=r,this.addNode=function(e,t){if(!l)return j(e,t)},L(),re.keyEvent=function(t){p&&46==t.keyCode&&(e.loop(he,function(e){e&&e.parent&&J(e)}),re.stage&&re.stage.update())},window.addEventListener("keydown",re.keyEvent);var ue,de,he=[],ge=0;this.selectNode=function(e,t){Q(e,t)},this.removeNode=function(e){J(e)},this.removeConnectors=function(){e.loop(se,function(e){J(e)},!0),L(),re.stage.update()},this.removeBase=function(t){e.loop(t.connectors,function(e){J(e)}),$(t)},this.addBase=function(e,t){j(e,t)},Object.defineProperty(this,"selectedList",{get:function(){return he},set:function(){zon&&zogy("Selectors() - selectedList is read only")}}),this.dispose=function(t,o,n){return re.nodes.loop(function(e){e.removeFrom(),e.removeAllEventListeners(),e=null},!0),re.lines.loop(function(e){e.removeFrom(),e=null},!0),window.removeEventListener("keydown",re.keyEvent),re.keyEvent=null,re.bases&&e.loop(re.bases,function(e){$(e)}),n||(re.zimContainer_dispose(!0),re.stage&&re.stage.update()),!0},!1!==I&&e.styleTransforms(this,oe),this.clone=function(){return re.cloneProps(new e.Collectors(o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,re.group,O))}}},e.extend(e.Connectors,e.Container,["clone","dispose"],"zimContainer",!1),e.Marquee=function(o,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v){function b(){E=!0,T.selectedIndex=0,T.selected=B.pages[T.selectedIndex].page,T.lastSelected=null,T.selected.marqueeOn&&T.selected.marqueeOn(),T.interval=e.interval(a,function(){T.go()})}function w(){if(!zot(u)&&0!=u){var t=4*u/25;O.pos(u-O.width-t,t/2,!1,!0,T),T.indicator&&(T.indicator.dispose(),T.indicator.removeFrom()),_||(_=new e.Proportion(8,16,O.width+t,O.width/2+t,-1)),T.indicator=new e.Indicator({width:(B.pages.length<=2?B.pages.length:B.pages.length-1)*(O.width-3),height:_.convert(B.pages.length),num:B.pages.length,shadowBlur:-1,interactive:!0,scale:1.2,indicatorType:h}),T.indicator.fit(0,0,r-Y.height,Y.width),T.indicator.rot("down"==c?-90:90).center(O).pos(null,O.width-t/2,null,!0),T.indicator.selectedIndex=T.selectedIndex,T.indicator.on("change",function(){T.go(B.pages[T.indicator.selectedIndex].page)})}}var C,x="width, height, items, time, transition, speed, direction, marginLeft, marginRight, marqueeType, borderColor, borderWidth, refresh, mix, style, group, inherit";if(C=zob(e.Marquee,arguments,x,this))return C;z_d("67.4"),this.group=y;var k={},T=(k=!1===z?{}:e.getStyle("Marquee",this.group,v),this);zot(o)&&(o=null!=k.width?k.width:300),zot(r)&&(r=null!=k.height?k.height:100);var A=t(a);zot(a)&&(a=null!=k.time?k.time:"s"==A?5:5e3),zot(l)&&(l=null!=k.transition?k.transition:"slide"),zot(g)&&(g=null!=k.borderColor?k.borderColor:"#333"),zot(p)&&(p=null!=k.borderWidth?k.borderWidth:1),g<0||p<0?g=p=null:null!=g&&null==p&&(p=1),zot(u)&&(u=null!=k.marginLeft?k.marginLeft:25),zot(d)&&(d=null!=k.marginRight?k.marginRight:25),zot(s)&&(s=null!=k.speed?k.speed:"s"==A?.5:500),n(s,A),zot(c)&&(c=null!=k.direction?k.direction:"right"),zot(f)&&(f=null!=k.refresh?k.refresh:"s"==A?1800:18e5),zot(m)&&(m=null==k.mix||k.mix),this.zimContainer_constructor(o+u+d,r,null,null,!1),this.type="Marquee",this.speed=s;var P=new e.Rectangle(o-1,r-1,e.clear).addTo(T).mov(u+.5,.5),S=this.content=new e.Container(o,r).loc(u,0,T).setMask(P),B=this.pages=new e.Pages(null,l,s,null,S).addTo(S),E=!1;if(this.add=function(e,t,o,n,r){zot(r)&&(r=!0),e.scaleTo(S),t&&e.cur().on("click",function(){zgo(t,o)}),B.addPage(e),r&&B.center(),e.marqueeViews=0,e.marquee=T,E||b(),n||w(),H&&H.top()},this.remove=function(e){if(T.selected==e){if(1==T.pages.pages.length)return;var t=T.selectedIndex+1;t==T.pages.pages.length&&(t=0),T.pages.go(t,null,null,0),setTimeout(function(){T.pages.removePage(e),e.dispose&&e.dispose(),w()},20)}else T.pages.removePage(e),e.dispose&&e.dispose(),w()},zot(i)||Array.isArray(i)||(i=[i]),i&&i.length>0&&(m&&e.shuffle(i),e.loop(i,function(e){T.add(e,null,null,!0)})),f>0)var I=e.timeout(f*("s"==A?1e3:1),function(){location.reload()},null,"ms");T.go=function(t){if(T.selected.marqueeViews+=1,T.selected.marqueeOff&&T.selected.marqueeOff(),t)T.selected=t,e.loop(B.pages,function(e,o){e.page!=t||(T.selectedIndex=o)}),T.interval.interval=T.selected.marqueeTime?T.selected.marqueeTime:a,T.interval.pause(Y.toggled,null,!0);else{var o=T.selectedIndex+1;T.selectedIndex=o%B.pages.length,T.selected=B.pages[T.selectedIndex].page,T.interval.time=T.selected.marqueeTime?T.selected.marqueeTime:a}T.dispatchEvent("page"),T.selected.marqueeOn&&T.selected.marqueeOn(),B.go(T.selected,c,l,s)},B.on("pagetransitioned",function(){T.dispatchEvent("pagetransitioned"),T.indicator&&(T.indicator.selectedIndex=T.selectedIndex)});var M=!1,O=T.left=new e.Container(u-4,r-4),j=(new e.Shape).sca(.6);j.graphics.f(e.light).mt(0,0).p("AAhCLIAAkVIBXAAIAAEVgAh3CLIAAkVIBXAAIAAEVg");var L=(new e.Shape).sca(.6).reg(-2,0);L.graphics.f(e.light).mt(0,0).p("AiJieIETCeIkTCfg");var _,Y=T.button=new e.Button({label:"",icon:j,toggleIcon:L,width:45,height:45,corner:0,shadowBlur:0}).scaleTo(O,100).pos(0,0,!1,!0,O);if(Y.on("click",function(){T.interval&&T.interval.pause(Y.toggled),M=Y.toggled,T.stage.update()}),w(),!zot(d)&&d>0&&void 0!==zdf&&zdf){var D=4*d/25,X=T.right=new e.Container(45,270),R=T.icon=zdf.makeIcon(e.grey,e.lighter,e.silver).sca(.5).pos(0,0,!0,!0,X).mov(0,0).cur();R.on("mouseover",function(){W.animate({props:{scaleX:1},time:500,ease:"backOut",override:!0,timeUnit:"ms"}),R.stage.update()}),R.on("mouseout",function(){W.animate({props:{scaleX:0},time:300,ease:"backIn",override:!0,timeUnit:"ms"}),R.stage.update()}),R.on("mousedown",function(){zgo("https://zimjs.com/marquee","_blank")});var W=T.label=new e.Label({text:"MARQUEE",color:e.dark,backgroundColor:e.lighter,shiftVertical:1,paddingVertical:5}).rot(-90).pos(0,13,!0,!1,X).reg(-10).sca(0,1).mov(0);X.fit(0,0,d-D,r-D),X.pos(d-X.width-D,D/2,!0,!0,T)}if(T.stage&&T.stage.update(),this.pause=function(e,t){zot(e)&&(e=!0),e!=M&&(M=e,T.interval.pause(e,t),T.button.toggle(e))},Object.defineProperty(this,"paused",{get:function(){return M},set:function(){zon&&zogy("Marquee() - paused is read only - use pause()")}}),Object.defineProperty(this,"time",{get:function(){return a},set:function(e){a=e,T.interval.time=a}}),this.load=function(t,o){var n=[];m&&e.shuffle(t),e.loop(t,function(e){Array.isArray(e)?n.push(e[0]):n.push(e)});var r=T.stage?T.stage.frame:zdf;return T.marqueeLoader=r.loadAssets(n,o),T.loadEvent=T.marqueeLoader.on("assetload",function(e){var o=t[e.asset.id];if(Array.isArray(o))var n=o[0],r=o[1];else n=o,r="_self";T.add(e.asset,n,r),w()}),T},!zot(g)){var H=new e.Rectangle(o-1,r-1,e.clear,g,p).loc(P,null,T);H.mouseEnabled=!1}!1!==z&&e.styleTransforms(this,k),this.clone=function(){return T.cloneProps(new e.Marquee(o,r,i,a,l,s,c,h,g,p,f,m,z,this.group,v))},this.dispose=function(e,t,o){return I&&I.clear(),T.interval&&T.interval.clear(),T.loadEvent&&T.marqueeLoader.off("assetload",T.loadEvent),B.dispose(),B=null,o||this.zimContainer_dispose(!0),!0}},e.extend(e.Marquee,e.Container,["clone","dispose"],"zimContainer"),e.Loader=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L){function _(){W.resize(),G=setTimeout(function(){F.style.display="block",F.hidden=!1,F.style.display="block"},50),W.on("added",_,null,!0)}function Y(t){var o,n,i;if(o=t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length>0?t.dataTransfer.files:t.target.files,"text"==r||"json"==r){var a,l=[];if("json"==r.toLowerCase())var s,c=[]}else var u,d=[];for(var h=0;h<o.length;h++)n=o[h],i=void 0,(i=new FileReader).onload=function(t){if("text"==r||"json"==r){var n=t.target.result;if(l.push(n),"json"==r){var i=JSON.parse(n);c.push(i)}if(1==l.length&&(a=n,"json"==r&&(s=i)),l.length==o.length){var h=new createjs.Event("loaded");h.texts=l,h.text=a,h.lastText=n,h.total=l.length,"json"==r&&(h.jsons=c,h.json=s,h.lastJSON=i),W.dispatchEvent(h),F.value=""}}else{var g=new Image;g.onload=function(){var t=new e.Bitmap(g);if(d.push(t),1==d.length&&(u=t),d.length==o.length){var n=new createjs.Event("loaded");n.bitmaps=d,n.bitmap=u,n.lastBitmap=t,n.total=d.length,W.dispatchEvent(n),F.value=""}},g.src=t.target.result}},"text"==r||"json"==r?i.readAsText(n):i.readAsDataURL(n)}var D,X="width, height, label, type, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, borderRollColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, frame, multiple, accept, style, group, inherit";if(D=zob(e.Loader,arguments,X,this))return D;z_d("67.5"),this.group=j;var R=!1===O?{}:e.getStyle("Loader",this.group,L);if(zot(t)&&(t=null!=R.width?R.width:250),zot(o)&&(o=null!=R.height?R.height:70),zot(r)&&(r=null!=R.type?R.type:"image"),r=r.toLowerCase(),zot(i)&&(i=null!=R.backgroundColor?R.backgroundColor:"rgba(0,0,0,.05)"),zot(a)&&(a=null!=R.rollBackgroundColor?R.rollBackgroundColor:"rgba(0,0,0,.1)"),zot(l)&&(l=null!=R.color?R.color:"rgba(0,0,0,.5)"),zot(s)&&(s=null!=R.rollColor?R.rollColor:l),zot(c)&&(c=null!=R.borderColor?R.borderColor:"rgba(0,0,0,.3)"),zot(d)&&(d=null!=R.borderWidth?R.borderWidth:1),zot(y)&&(y=null==R.dashed||R.dashed),zot(h)&&(h=null!=R.corner?R.corner:0),zot(I)&&(I=null==R.multiple||R.multiple),zot(n)&&(n=null!=R.label?R.label:new e.Label({text:"UPLOAD PIC",color:l,rollColor:s,valign:"center",align:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group})),zot(E)){if(!zdf)return void(zon&&zog("zim.Loader - please provide a reference to zim Frame"));E=zdf}this.zimButton_constructor(t,o,n,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,null,null,null,null,T,A,P,S,B,null,null,null,null,null,null,null,null,null,null,null,null,!1),this.type="Loader";var W=this,H=E.stage;n=W.label;var F=W.tag=document.createElement("input");document.body.appendChild(F),F.setAttribute("type","file"),F.setAttribute("aria-hidden",!0),I&&F.setAttribute("multiple","multiple"),M&&F.setAttribute("accept",M),F.hidden=!0,F.zimDisplay=F.style.display||"inline-block",F.style.cssText="border:thin solid grey; z-index:2; width:"+t+"px; height:"+o+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",this.addEventListener("mousedown",function(){F.click()}),F.addEventListener("change",Y);var V=new createjs.DOMElement(F);H.addChild(V),V.alpha=0;var N,G,q=E.retina&&window.devicePixelRatio||1;if(this.resize=function(){return W.stage?(F.setAttribute("aria-hidden",!1),F.hidden=!1,F.style.display=F.zimDisplay,N=setTimeout(function(){var t=W.getConcatenatedMatrix().decompose(),o=W.localToGlobal(0,0);E.retina?(V.x=E.x/H.scaleX+o.x/q,V.y=E.y/H.scaleY+o.y/q,e.sca(V,t.scaleX/q/H.scaleX,t.scaleY/q/H.scaleY)):(V.x=E.x+o.x*E.scale,V.y=E.y+o.y*E.scale,e.sca(V,E.scale*t.scaleX,E.scale*t.scaleY)),H.update()},50),W):(F.setAttribute("aria-hidden",!0),F.hidden=!0,void(F.style.display="none"))},this.resize(),W.on("added",function(){F.style.display="block",F.hidden=!1,F.style.display="block",W.resize()}),W.added(_),W.on("removed",function(){N&&clearTimeout(N),G&&clearTimeout(G),F&&(F.style.display="none",F.hidden=!0,F.style.display="none")}),(new XMLHttpRequest).upload){var Q=function(e){F.removeEventListener("change",Y),Y(e),setInterval(function(){F.addEventListener("change",Y)},100)};F.addEventListener("drop",Q)}this.save=function(t,o,n,r,i,a,l,s,c,u){var d,h="content, filename, x, y, width, height, cached, cachedBounds, type, data";if(d=zob(W.save,arguments,h))return d;if(zot(t)&&(t=E.stage),zot(c)&&(c="png"),zot(o))o="saved_"+String(e.makeID("numbers",5))+"."+c;else{var g=o.split(".");if(1==g.length)o+="."+c;else{var p=["png","jpg","jpeg"],f=p.indexOf(g[g.length-1].toLowerCase());-1==f?o+="."+c:c=p[f]}}if(zot(n)&&(n=0),zot(r)&&(r=0),zot(i)&&(i=t.getBounds&&t.getBounds()?t.getBounds().width:E.width),zot(a)&&(a=t.getBounds&&t.getBounds()?t.getBounds().height:E.height),t.cache(n,r,i,a),u){var m=t.cacheCanvas.toDataURL("image/"+c);return l?s&&t.cache(s.x,s.y,s.width,s.height):t.uncache(),m}if(/Edge\/(\d)+/.test(navigator.userAgent)){var z=window.open();z.document.write("<html><head><title>saved</title></head><body style='margin:0px;padding:0px;overflow:hidden'><img src="+t.cacheCanvas.toDataURL("image/"+c)+"></body></html>"),z.document.close()}else{"jpg"==c&&(c="jpeg");var y=document.createElement("a");y.setAttribute("download",o),y.setAttribute("href",t.cacheCanvas.toDataURL("image/"+c)),document.body.appendChild(y),y.click(),document.body.removeChild(y)}return l?s&&t.cache(cashedBounds.x,cashedBounds.y,cashedBounds.width,cashedBounds.height):t.uncache(),W},!1!==O&&e.styleTransforms(this,R),this.clone=function(){var r=new e.Loader(t,o,zot(n)?null:n.clone(),i,a,l,s,c,d,h,g,p,f,m,z,zot(v)?null:v.clone(),zot(b)?null:b.clone(),w,zot(C)?null:C.clone(),zot(x)?null:x.clone(),k,zot(T)?null:T.clone(),zot(A)?null:A.clone(),zot(P)?null:P.clone(),zot(S)?null:S.clone(),B,E,O,this.group);return W.cloneProps(r)},Object.defineProperty(this,"frame",{get:function(){return E},set:function(e){e!=E&&(E.off("update",W.updateEvent),E.off("resize",W.resizeEvent),E=e,W.resizeEvent=E.on("resize",W.resize),W.updateEvent=E.on("update",W.resize),W.resize())}}),this.resizeEvent=E.on("resize",W.resize),this.updateEvent=E.on("update",W.resize),this.dispose=function(e,t,o){var n;return W.stage&&(n=W.stage),E.off("update",W.updateEvent),E.off("resize",W.resizeEvent),Y&&F.removeEventListener("change",Y),Q&&F.removeEventListener("drop",Q),F&&F.parentNode&&F.parentNode.removeChild(F),F=null,o||(this.zimButton_dispose(),n&&n.update()),!0}},e.extend(e.Loader,e.Button,["clone","dispose"],"zimButton",!1),e.TextArea=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T){function A(){I.addChild(j),_=setTimeout(function(){O.style.display=O.zimDisplay},50),E.resize(),E.on("added",A,null,!0)}var P,S="width, height, size, padding, color, backgroundColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, placeholder, readOnly, spellCheck, password, inputType, wrap, maxLength, frame, expand, style, group, inherit";if(P=zob(e.TextArea,arguments,S,this))return P;z_d("67.6"),this.group=k;var B=!1===x?{}:e.getStyle("TextArea",this.group,T);if(zot(t)&&(t=null!=B.width?B.width:250),zot(o)&&(o=null!=B.height?B.height:70),zot(n)&&(n=null!=B.size?B.size:20),zot(r)&&(r=null!=B.padding?B.padding:5),zot(i)&&(i=null!=B.color?B.color:"#666"),zot(a)&&(a=null!=B.backgroundColor?B.backgroundColor:"rgba(256,256,256,.1)"),zot(l)&&(l=null!=B.borderColor?B.borderColor:"rgba(0,0,0,.1)"),zot(s)&&(s=null!=B.borderWidth?B.borderWidth:null),l<0||s<0?l=s=null:null!=l&&null==s&&(s=1),zot(c)&&(c=null!=B.corner?B.corner:0),!zot(d)&&zot(u)&&(u=null!=B.shadowColor?B.shadowColor:"rgba(0,0,0,.3)"),!zot(u)&&zot(d)&&(d=null!=B.shadowBlur?B.shadowBlur:10),zot(z)&&(z=null!=B.password&&B.password),zot(y)&&(y=null!=B.inputType&&B.inputType),zot(v)&&(v=null==B.wrap||B.wrap),zot(b)&&(b=null!=B.maxLength?B.maxLength:null),zot(m)&&(m=null==B.spellCheck||B.spellCheck),zot(f)&&(f=null!=B.readOnly&&B.readOnly),zot(p)&&(p=null!=B.placeholder?B.placeholder:null),this.maxLength=b,zot(C)&&(C=null!=B.expand?B.expand:20),!0===C&&(C=20),zot(w)){if(!zdf)return void(zon&&zog("zim.TextArea - please provide a reference to zim Frame"));w=zdf}this.zimContainer_constructor(t,o,null,null,!1),this.type="TextArea";var E=this,I=w.stage,M=this.background=new e.Rectangle(t,o,a,l,s,c,h,null,!1).expand(C);-1!=u&&d>0&&(M.shadow=new createjs.Shadow(u,3,3,d)),E.addChild(M);var O=E.tag=y||z?document.createElement("input"):document.createElement("textarea");w.tag?w.tag.appendChild(O):document.body.appendChild(O),zot(g)||(O.setAttribute("id",g),O.setAttribute("name",g)),z?O.setAttribute("type","password"):y&&O.setAttribute("type",y),O.readOnly=f,O.spellcheck=m,p&&O.setAttribute("placeholder",p),O.zimDisplay=O.style.display||"inline-block",O.style.cssText="background-color:rgba(0,0,0,.01); color:"+i+"; resize:none; z-index:3; width:"+(t-2*r)+"px; height:"+(o-2*r)+"px; overflow:hidden; outline:none;font-size:"+n+"px; font-family:"+(null!=B.font?B.font:"arial")+"; border:none; position:absolute; left:0px; top:0px; display:none;",E.taInput=function(){!zot(E.maxLength)&&E.text.length>E.maxLength&&(E.text=E.text.substring(0,E.maxLength)),E.dispatchEvent("input")},E.taFocus=function(){w.zil&&window.removeEventListener("keydown",w.zil[0]),E.dispatchEvent("focus")},E.taBlur=function(){w.zil&&window.addEventListener("keydown",w.zil[0]),E.dispatchEvent("blur")},O.addEventListener("change",E.taChange),O.addEventListener("input",E.taInput),O.addEventListener("focus",E.taFocus),O.addEventListener("blur",E.taBlur);var j=new createjs.DOMElement(O);j.alpha=0,this.on("mousedown",function(){setTimeout(function(){O.focus()},100)}),this.setFocus=function(e){return zot(e)&&(e=!0),e?O.focus():O.blur(),E};var L,_,Y=w.retina&&window.devicePixelRatio||1;this.resize=function(){return L=setTimeout(function(){var t=E.getConcatenatedMatrix().decompose(),o=E.localToGlobal(r,r);w.retina?(w.tag?(j.x=o.x/Y,j.y=o.y/Y):(j.x=w.x/I.scaleX+o.x/Y,j.y=w.y/I.scaleY+o.y/Y),e.sca(j,t.scaleX/Y/I.scaleX,t.scaleY/Y/I.scaleY)):(w.tag?(j.x=o.x*w.scale,j.y=o.y*w.scale):(j.x=w.x+o.x*w.scale,j.y=w.y+o.y*w.scale),e.sca(j,w.scale*t.scaleX,w.scale*t.scaleY)),j.alpha=1,E.stage&&I.update()},20),E},this.resize(),E.added(A),E.on("removed",function(){L&&clearTimeout(L),_&&clearTimeout(_),I.removeChild(j),O&&(O.style.display="none")}),Object.defineProperty(this,"currentValue",{get:function(){return O.value},set:function(e){O.value=e}}),Object.defineProperty(this,"text",{get:function(){return O.value},set:function(e){O.value=e}}),Object.defineProperty(this,"focus",{get:function(){return document.activeElement==O},set:function(e){E.setFocus(e)}}),Object.defineProperty(this,"readOnly",{get:function(){return O.readOnly},set:function(e){O.readOnly=e}}),typeof KEYFOCUS!=typeof undefined&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==E},set:function(){e.KEYFOCUS=E}}),e.KEYFOCUS||(E.keyFocus=!0),E.taMousedown=function(){E.keyFocus=!0},O.addEventListener("mousedown",E.taMousedown),v||(O.style.whiteSpace="pre"),!1!==x&&e.styleTransforms(this,B),this.clone=function(){var k=new e.TextArea(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,this.group,T);return E.cloneProps(k)},Object.defineProperty(this,"frame",{get:function(){return w},set:function(e){e!=w&&(w.off("update",E.updateEvent),w.off("resize",E.resizeEvent),w=e,E.resizeEvent=w.on("resize",E.resize),E.updateEvent=w.on("update",E.resize),Y=w.retina&&window.devicePixelRatio||1,I=w.stage,E.resize())}}),this.resizeEvent=w.on("resize",E.resize),this.updateEvent=w.on("update",E.resize),this.dispose=function(e,t,o){var n;return E.stage&&(n=E.stage),w.off("update",E.updateEvent),w.off("resize",E.resizeEvent),O&&O.parentNode&&O.parentNode.removeChild(O),O.removeEventListener("change",E.taChange),O.removeEventListener("input",E.taInput),O.removeEventListener("focus",E.taFocus),O.removeEventListener("blur",E.taBlur),O.removeEventListener("mousedown",E.taMousedown),O=null,o||(this.zimContainer_dispose(!0),n&&n.update()),E.background=null,!0}},e.extend(e.TextArea,e.Container,["clone","dispose"],"zimContainer",!1),e.Tag=function(t,o,n,r,i,a,l,s,c,u,d,h){function g(){y.addChild(b),C=setTimeout(function(){v.style.display=v.zimDisplay},50),z.resize(),z.on("added",g,null,!0)}var p,f="width, height, id, frame, backgroundColor, padding, paddingHorizontal, paddingVertical, expand, style, group, inherit";if(p=zob(e.Tag,arguments,f,this))return p;z_d("67.7"),this.group=d;var m=!1===u?{}:e.getStyle("Tag",this.group,h);if(zot(t)&&(t=null!=m.width?m.width:250),zot(o)&&(o=null!=m.height?m.height:70),zot(n)&&(n=null!=m.id?m.id:"zimTag_"+e.rand(1e4)),zot(r)){if(!zdf)return void(zon&&zog("zim.TextArea - please provide a reference to zim Frame"));r=zdf}zot(i)&&(i=null!=m.backgroundColor?m.backgroundColor:"rgba(0,0,0,0)"),zot(a)&&(a=null!=m.padding?m.padding:10),zot(l)&&(l=null!=m.paddingHorizontal?m.paddingHorizontal:a),zot(s)&&(s=null!=m.paddingVertical?m.paddingVertical:a),zot(c)&&(c=null!=m.expand?m.expand:20),!0===c&&(c=20),this.zimContainer_constructor(t,o,null,null,!1),this.type="Tag",this.tagID=n,this.id=n;var z=this,y=r.stage,v=(z.background=new e.Rectangle(t+l,o+s,i).center(this).expand(c||0),z.tag=document.createElement("div"));document.body.appendChild(v),v.setAttribute("id",n),v.setAttribute("name",n),v.zimDisplay=v.style.display||"inline-block",v.style.cssText="resize:none; z-index:3; width:"+t+"px; height:"+o+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none;";var b=new createjs.DOMElement(v);b.alpha=0;var w,C,x=r.retina&&window.devicePixelRatio||1;this.resize=function(){return w=setTimeout(function(){var t=z.getConcatenatedMatrix().decompose(),o=z.localToGlobal(0,0);r.retina?(b.x=r.x/y.scaleX+o.x/x,b.y=r.y/y.scaleY+o.y/x,e.sca(b,t.scaleX/x/y.scaleX,t.scaleY/x/y.scaleY)):(b.x=r.x+o.x*r.scale,b.y=r.y+o.y*r.scale,e.sca(b,r.scale*t.scaleX,r.scale*t.scaleY)),b.alpha=1,z.stage&&y.update()},50),z},this.resize(),z.added(g),z.on("removed",function(){w&&clearTimeout(w),C&&clearTimeout(C),y.removeChild(b),v&&(v.style.display="none")}),this.add=function(e){return v.innerHTML+=e,z},Object.defineProperty(this,"innerHTML",{get:function(){return v.innerHTML},set:function(e){v.innerHTML=e}}),Object.defineProperty(this,"style",{get:function(){return v.style},set:function(e){v.style=e}}),!1!==u&&e.styleTransforms(this,m),this.clone=function(){var d=new e.Tag(t,o,n,r,i,a,l,s,c,u,this.group,h);return z.cloneProps(d)},Object.defineProperty(this,"frame",{get:function(){return r},set:function(e){e!=r&&(r.off("update",z.updateEvent),r.off("resize",z.resizeEvent),r=e,z.resizeEvent=r.on("resize",z.resize),z.updateEvent=r.on("update",z.resize),z.resize())}}),this.resizeEvent=r.on("resize",z.resize),this.updateEvent=r.on("update",z.resize),this.dispose=function(e,t,o){var n;return z.stage&&(n=z.stage),r.off("update",z.updateEvent),r.off("resize",z.resizeEvent),v&&v.parentNode&&v.parentNode.removeChild(v),v=null,o||(this.zimContainer_dispose(!0),n&&n.update()),!0}},e.extend(e.Tag,e.Container,["clone","dispose"],"zimContainer",!1),e.addTo=function(t,o,n,r){var i,a="obj, container, index, localToLocal";if(i=zob(e.addTo,arguments,a))return i;if(z_d("47.5"),!zot(t)){if(zot(o)){if(!zdf)return void zog("zim methods - addTo(): please provide container");o=zdf.stage}if(zot(r)&&(r=!0),t.parent||(r=!1),r)var l=t.parent.localToLocal(t.x,t.y,o);return zot(n)||isNaN(n)?o.addChild(t):o.addChildAt(t,n),r&&(t.x=l.x,t.y=l.y),t}zog("zim methods - addTo(): please provide object")},e.removeFrom=function(e,t){if(z_d("47.6"),
!zot(e))return zot(t)?e.parent&&e.parent.removeChild(e):t.removeChild(e),e;zog("zim methods - removeFrom(): please provide object")},e.added=function(e,o,r,i){if(z_d("47.7"),!zot(e)&&!zot(o)&&"function"==typeof o){var a=t(r);if(zot(r)&&(r="s"==a?.1:100),!e.stage){var l,s=r*("s"==a?1e3:1);i&&(n(i),l=i*("s"==a?1e3:1));var c=Date.now(),u=0,d=setInterval(function(){u>5?clearInterval(d):(u++,e.stage&&(o(e.stage,e),clearInterval(d),clearInterval(h)))},10),h=setInterval(function(){l>0&&c-Date.now()>l&&clearInterval(h),e.stage&&(o(e.stage,e),clearInterval(h))},s);return h}o(e.stage,e)}},e.centerReg=function(t,o,n,r){var i,a="obj, container, index, add";if(i=zob(e.centerReg,arguments,a))return i;if("AC"==t.type&&zdf)return zdf.ac("centerReg",arguments),t.addTo(o,n);if(z_d("48"),zot(t)||!t.getBounds||!t.getBounds())return zog("zim methods - centerReg(): please provide object with bounds set"),t;zot(r)&&(r=!0),zot(o)&&t.parent&&r&&(o=t.parent,zot(n)&&(n=t.parent.getChildIndex(t)),t.parent.removeChild(t)),zot(o)||o!=t.parent||(zot(n)&&(n=t.parent.getChildIndex(t)),t.parent.removeChild(t));var l=t.getBounds();return t.regX=l.x+l.width/2,t.regY=l.y+l.height/2,r?e.center(t,o,n):t},e.center=function(t,o,n,r){var i,a="obj, container, index, add";if(i=zob(e.center,arguments,a))return i;if("AC"==t.type&&zdf)return zdf.ac("center",arguments),t.addTo(o,n);if(e.centerCheck||(z_d("48.1"),e.centerCheck=!0),zot(t)||!t.getBounds)return zog("zim.center(): please provide object with bounds"),t;if(zot(o)&&(t.parent?o=t.parent:zdf&&(o=zdf.stage)),zot(o)||!o.getBounds)return zog("zim.center(): please provide container with bounds"),t;var l=t.getBounds(),s=o.getBounds();zot(r)&&(r=!0);var c=!1;if(zot(s)&&(o.setBounds(0,0),s=o.getBounds(),c=!0),r&&o.addChild&&(zot(n)||"number"==typeof n&&isNaN(n)?o.contains(t)||o.addChild(t):o.addChildAt(t,n)),zot(l))return t.x=s.x+s.width/2,t.y=s.y+s.height/2,t;var u=!1,d=!1;0==o.scaleX&&(u=!0,o.scaleX=1e-5),0==o.scaleY&&(d=!0,o.scaleY=1e-5);var h=t.localToLocal(t.regX,t.regY,o),g=e.boundsToGlobal(t),p=e.boundsToGlobal(o,g,!0);if(u&&(o.scaleX=0),d&&(o.scaleY=0),t.x=s.x+s.width/2-p.width/2+(h.x-p.x),t.y=s.y+s.height/2-p.height/2+(h.y-p.y),!r&&o.getStage&&o.stage&&t.parent){var f=o.localToLocal(t.x,t.y,t.parent);t.x=f.x,t.y=f.y}return c&&o.setBounds(null),t},e.place=function(t,o){function n(){zog(o+".x = "+Math.round(t.x)+"; "+o+".y = "+Math.round(t.y)+";"),zog(o+".loc("+Math.round(t.x)+", "+Math.round(t.y)+");")}if(z_d("49"),!zot(t))return zot(o)&&(o="obj"),e.lastPlace=t,e.drag({obj:t,currentTarget:!0,dragCursor:"crosshair"}),t.on("mousedown",function(){e.lastPlace=t}),zdf&&zdf.on("keydown",function(o){if(t==e.lastPlace){var r=o.keyCode;if(r>=37&&r<=40){var i=o.shiftKey?10:1;t.mov(37==r?-1*i:39==r?1*i:0,38==r?-1*i:40==r?1*i:0),n(),t.stage&&t.stage.update()}}}),zog("place "+o+" - to get new position"),t.on("click",n),t},e.placeReg=function(t,o){function n(){var e=t.globalToLocal(a.x,a.y);zog(o+".regX = "+Math.round(e.x)+"; "+o+".regY = "+Math.round(e.y)+";"),zog(o+".reg("+Math.round(e.x)+", "+Math.round(e.y)+");")}if(z_d("49.5"),!zot(t)){var r=t.stage;if(zot(r))return zog("zim.placeReg() - add object to stage before calling placeReg()"),t;zot(o)&&(o="obj");var i=t.parent.localToGlobal(t.x,t.y),a=new e.Shape(-25,-25,50,50,null,!1).addTo(r).pos({x:i.x,y:i.y,reg:!0});return a.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),a.compositeOperation="difference",a.expand(0),e.drag({obj:a}),zog("place cursor to get new registration point location"),r.on("stagemouseup",n),t}},e.pos=function(t,o,n,r,i,a,l,s,c,u,d){var h,g="obj, x, y, horizontal, vertical, container, index, add, reg, regX, regY";if(h=zob(e.pos,arguments,g))return h;if("AC"==t.type&&zdf)return zdf.ac("pos",arguments),t.addTo(a,l);z_d("41.5");var p=!1;"right"==r&&(p=!0);var f=!1;"bottom"==i&&(f=!0);var m=e.POSREG;if(null!=window.POSREG&&(m=window.POSREG),zot(c)&&(c=m),!zot(t)){zot(c)&&zot(u)&&(u=!1),zot(c)&&zot(d)&&(d=!1),!zot(c)&&zot(u)&&(u=c),!zot(c)&&zot(d)&&(d=c),zot(s)&&(s=!0),zot(a)||a.addChild||(a=null),t.getBounds||t.getBounds()||(u=d=!1),zot(a)&&(t.parent?a=t.parent:zdf&&(a=zdf.stage)),!t.parent&&zot(o)&&(o=0),!t.parent&&zot(n)&&(n=0);var z=!1;t.getBounds()||(t.setBounds(0,0),z=!0);var y=!1;if(a&&!a.getBounds()&&(a.setBounds(0,0),y=!0),!zot(a)&&a.addChild&&s){var v=a.getBounds().clone();function b(){zot(l)||"number"==typeof l&&isNaN(l)?a.contains(t)||a.addChild(t):a.addChildAt(t,l)}b();var w=a.getBounds();v.width==w.width&&v.height==w.height&&v.x==w.x&&v.y==w.y||(t.removeFrom(),a.setBounds(v.x,v.y,v.width,v.height),y=!0,b())}if(!u&&!d&&!("center"!=r&&"middle"!=r||"center"!=i&&"middle"!=i))return t.center(a),t.mov(o,n),z&&t.setBounds(null),y&&a.setBounds(null),t;if("center"==r||"middle"==r){if(u)t.x=a.width/2;else{var C=t.y;t.center(),t.y=C}t.mov(o),o=null,r=null}else!0===r&&(p=!0);if("center"==i||"middle"==i){if(d)t.y=a.height/2;else{var x=t.x;t.center(),t.x=x}t.mov(0,n),n=null,i=null}else!0===i&&(f=!0);if(t.parent&&t.parent.getBounds){if(a=t.parent,zot(o)&&1==p&&(o=0),zot(n)&&1==f&&(n=0),zot(o)||(t.x=o),zot(n)||(t.y=n),zot(o)&&zot(n)&&!p&&!f)return z&&t.setBounds(null),y&&a.setBounds(null),t;var k=0,T=0;if(t.getBounds()){var A=P();function P(){var e=t.getBounds(),o=e.x,n=e.y,r=e.width,i=e.height,a=t._props.matrix;a=t.getMatrix(a),(o||n)&&a.appendTransform(0,0,1,1,0,0,0,-o,-n);var l=r*a.a,s=r*a.b,c=i*a.c,u=i*a.d,d=a.tx,h=a.ty,g=d,p=d,f=h,m=h;return(o=l+d)<g?g=o:o>p&&(p=o),(o=l+c+d)<g?g=o:o>p&&(p=o),(o=c+d)<g?g=o:o>p&&(p=o),(n=s+h)<f?f=n:n>m&&(m=n),(n=s+u+h)<f?f=n:n>m&&(m=n),(n=u+h)<f?f=n:n>m&&(m=n),{x:g,y:f,width:p-g,height:m-f}}if(!zot(o)){if(p)S=new e.Point(A.x+A.width,A.y+A.height);else var S=new e.Point(A.x,A.y);k=S.x-o}zot(n)||(T=(S=f?new e.Point(A.x+A.width,A.y+A.height):new e.Point(A.x,A.y)).y-n);var B=a.getBounds();zot(o)||(p?t.x=u?B.width+B.x-o:B.width+B.x-o-k:(t.x=u?o:o-k,t.x+=B.x)),zot(n)||(f?t.y=d?B.height+B.y-n:B.height+B.y-n-T:(t.y=d?n:n-T,t.y+=B.y))}}return z&&t.setBounds(null),y&&a.setBounds(null),t}},e.loc=function(t,o,n,r,i,a,l,s){var c,u="obj, target, y, container, index, add, localToLocal, x";if(c=zob(e.loc,arguments,u))return c;if("AC"==t.type&&zdf)return zdf.ac("loc",arguments),t.addTo(r,i);if(z_d("41.55"),!zot(t)){if("number"==typeof o&&(s=o,o=null),zot(o)||(zot(o.x)||(s=o.x),zot(o.y)||(n=o.y)),zot(s)&&zot(o)&&(s=t.x),zot(n)&&zot(o)&&(n=t.y),zot(a)&&(a=!0),zot(r)&&(t.parent?r=t.parent:zdf&&(r=zdf.stage)),a&&r&&(t.parent&&r==t.parent?zot(i)||r.addChildAt(t,i):zot(i)||isNaN(i)?r.addChild(t):r.addChildAt(t,i)),zot(l)&&(l=!0),o&&o.parent&&t.parent&&l){var d=o.parent.localToLocal(s,n,t.parent);s=d.x,n=d.y}return t.x=s,t.y=n,t}},e.mov=function(t,o,n){var r,i="obj, x, y";return(r=zob(e.mov,arguments,i))?r:"AC"==t.type&&zdf?(zdf.ac("mov",arguments),t):(z_d("41.6"),zot(t)?void 0:(zot(o)||(t.x+=o),zot(n)||(t.y+=n),t))},e.sca=function(e,t,o){return"AC"==e.type&&zdf?(zdf.ac("sca",arguments),e):(z_d("41.97"),zot(e)||zot(e.scaleX)?e:(zot(t)&&(t=e.scaleX),zot(o)&&(o=t),e.scaleX=t,e.scaleY=o,e))},e.alp=function(e,t){if(z_d("41.7"),!zot(e))return zot(t)||(e.alpha=e.hovOriginal=t,e.tag&&e.tag.style&&("Loader"!=e.type&&(e.tag.style.opacity=t),e.tag.style.display=e.tag.zimDisplay=0==t?"none":"inline-block")),e},e.ble=function(e,t){if(z_d("41.72"),!zot(e))return zot(t)&&(t="difference"),e.compositeOperation=t,e},e.hov=function(e,t,o){if(z_d("41.75"),!zot(e))return zot(t)&&(t=1),zot(o)&&(o="number"==typeof t?"alpha":"color"),e.hovMouseover&&(e.off("mouseover",e.hovMouseover),e.off("mouseout",e.hovMouseout)),-1==t?(e.cur("default"),zot(e.hovOld)||(e[e.hovType]=e.hovOld),e.hovOld=null,e.stage&&e.stage.update(),e):(e.cur(),e.hovOld=e[o],e.hovNew=t,e.hovType=o,e.hovMouseover=e.on("mouseover",function(){e[o]=e.hovNew,e.stage&&e.stage.update()}),e.hovMouseout=e.on("mouseout",function(){e[o]=e.hovOld,e.stage&&e.stage.update()}),e)},e.rot=function(t,o,n,r){if(z_d("41.8"),!zot(t)){if("AC"==t.type&&zdf)return zdf.ac("rot",arguments),t;if(!zot(o))if(!t.parent||zot(n)&&zot(r))t.rotation=o;else{zot(n)&&(n=t.x),zot(r)&&(r=t.y),t.x,t.y;var i=t.parent.localToLocal(n,r,t),a=new e.Point(t.x,t.y);t.reg(i.x,i.y),t.rotation=o,t.x=n,t.y=r;var l=t.parent.localToLocal(a.x,a.y,t);t.reg(l.x,l.y),t.x=a.x,t.y=a.y}return t}},e.siz=function(e,t,o,n){if(z_d("41.85"),!zot(e))return"AC"==e.type&&zdf?(zdf.ac("siz",arguments),e):(zot(n)&&(n=!1),zot(t)||zot(o)?zot(t)?zot(o)||(n?e.heightOnly=o:e.height=o):n?e.widthOnly=t:e.width=t:(e.widthOnly=t,e.heightOnly=o),e)},e.ske=function(e,t,o){if(z_d("41.9"),!zot(e))return"AC"==e.type&&zdf?(zdf.ac("ske",arguments),e):(zot(t)||(e.skewX=t),zot(o)||(e.skewY=o),e)},e.reg=function(e,t,o,n){if(z_d("41.95"),!zot(e)){if("AC"==e.type&&zdf)return zdf.ac("reg",arguments),e;var r=e.regX,i=e.regY;if(zot(t)||(e.regX=t),zot(o)||(e.regY=o),n&&e.parent){var a=e.localToLocal(r,i,e.parent);e.x-=a.x-e.x,e.y-=a.y-e.y}return e}},e.top=function(e){return z_d("41.62"),zot(e)||!e.parent?e:(e.parent.setChildIndex(e,e.parent.numChildren-1),e)},e.bot=function(e){return z_d("41.63"),zot(e)||!e.parent?e:(e.parent.setChildIndex(e,0),e)},e.ord=function(e,t){if(z_d("41.64"),!zot(e)&&e.parent)return zot(t)&&(t=0),e.parent.setChildIndex(e,e.parent.getChildIndex(e)+t),e},e.cur=function(e,t){return z_d("41.1"),zot(e)?(zog("zim methods - cur(): please provide object"),e):(zot(t)&&(t="pointer"),e.cursor=t,e)},e.sha=function(e,t,o,n,r){return z_d("41.2"),zot(e)?(zog("zim methods - sha(): please provide object"),e):(zot(t)&&(t="rgba(0,0,0,.3)"),t.blur?(e.shadow=t,e):(zot(o)&&(o=e.width?.08*e.width:5),zot(n)&&(n=e.height?.08*e.height:5),zot(r)&&(r=e.width?.16*e.width:10),e.shadow=new createjs.Shadow(t,o,n,r),e))},e.dep=function(e,t){if(z_d("41.65"),!zot(e))return zot(t)&&(t=0),e.depth=t,e},e.nam=function(t,o){if(z_d("41.67"),!zot(t)&&!zot(o))return t.name=o,e.zimObjectIDs[o]=t,t},e.movement=function(t,o,n){z_d("47.75");var r=t.stage||zdf.stage;if(e.mobile())t.zimMovementEvent&&r.off("pressmove",t.zimMovementEvent),t.zimMovementEvent=t.on("pressmove",function(e){o(e)});else{function i(){r=t.stage,t.zimMovementStage=r,t.zimMovementEvent&&r.off("stagemousemove",t.zimMovementEvent),t.zimMovementEvent=r.on("stagemousemove",function(e){o(e)}),t.on("mouseout",function(){t.zimMovementEvent&&r.off("stagemousemove",t.zimMovementEvent)},null,!0)}t.zimMouseoverEvent&&t.off("mouseover",t.zimMouseoverEvent),t.zimMouseoverEvent=t.on("mouseover",i),n&&i()}return t},e.noMovement=function(e){if(z_d("47.9"),!zot(e))return e.zimMouseoverEvent&&e.off("mouseover",e.zimMouseoverEvent),e.zimMovementEvent&&e.zimMovementStage&&e.zimMovementStage.off("stagemousemove",e.zimMovementEvent),e},e.tap=function(o,n,r,i,a){if(z_d("47.8"),!zot(o)&&!zot(n)&&"function"==typeof n){zot(r)&&(r=5);var l=t(i);return zot(i)&&(i="s"==l?8:8e3),zot(a)&&(a=!1),o.cursor="pointer",o.zimClickDownEvent=o.on("mousedown",function(t){if(t.target.stage,"List"==t.currentTarget.type){if("WindowBacking"==t.target.type)return;if(t.currentTarget.globalToLocal(t.stageX/e.scaX,t.stageY/e.scaY).y<=0)return}var a=t.stageX/e.scaX,s=t.stageY/e.scaY,c=Date.now();o.zimClickUpEvent=o.on("pressup",function(t){if(Math.abs(a+s-t.stageX/e.scaX-t.stageY/e.scaY)<r&&Date.now()-c<("s"==l?1e3*i:i)){if(o.excludeTap)return;n(t)}},null,!0)},null,a),o}},e.noTap=function(e){if(z_d("47.9"),!zot(e))return e.cursor&&(e.cursor="default"),e.off("mousedown",e.zimClickDownEvent),e.off("pressup",e.zimClickUpEvent),e},e.hold=function(o,n,r,i,a){if(z_d("47.87"),!zot(o)&&!zot(n)&&"function"==typeof n){zot(r)&&(r=5);var l,s=t(i);return zot(i)&&(i="s"==s?1.5:1500),zot(a)&&(a=!1),o.cursor="pointer",o.zimClickHoldDownEvent=o.on("mousedown",function(t){if(zot((l=t.target.stage).frame)&&(l.frame=zdf),!zot(l.frame)&&l.frame.mousemoveEvent||(zot(l.frame)&&(l.frame={}),l.frame.mouseX=t.stageX/e.scaX,l.frame.mouseY=t.stageY/e.scaY,l.frame.mouseholdEvent&&l.off("stagemousemove",l.frame.mouseholdEvent),l.frame.mouseholdEvent=l.on("stagemousemove",function(t){l.frame.mouseX=t.stageX/e.scaX,l.frame.mouseY=t.stageY/e.scaY})),"List"==t.currentTarget.type){if("WindowBacking"==t.target.type)return;if(t.currentTarget.globalToLocal(t.stageX/e.scaX,t.stageY/e.scaY).y<=0)return}var a=t.stageX/e.scaX,c=t.stageY/e.scaY;Date.now(),clearInterval(o.zimHoldInterval);var u=0;o.zimHoldInterval=setInterval(function(){if(u<10)Math.abs(a+c-l.frame.mouseX-l.frame.mouseY)>r&&clearInterval(o.zimHoldInterval);else{if(Math.abs(a+c-l.frame.mouseX-l.frame.mouseY)<r){if(o.excludeHold)return;n(t)}clearInterval(o.zimHoldInterval)}u++},i/10*("s"==s?1e3:1)),o.zimClickHoldUpEvent=o.on("pressup",function(){clearInterval(o.zimHoldInterval),l&&l.frame.mouseholdEvent&&l.off("stagemousemove",l.frame.mouseholdEvent)},null,!0)},null,a),o}},e.noHold=function(e){if(z_d("47.88"),!zot(e))return e.cursor&&(e.cursor="default"),e.off("mousedown",e.zimClickHoldDownEvent),e.off("pressup",e.zimClickHoldUpEvent),e.stage&&e.stage.frame.mouseEvent&&e.stage.off("stagemousemove",e.stage.frame.mouseEvent),clearInterval(e.zimHoldTimeout),e},e.change=function(e,t,o){if(z_d("47.85"),!zot(e)&&!zot(t)&&"function"==typeof t)return zot(o)&&(o=!1),e.zimChangeEvent=e.on("change",function(e){t(e)},null,o),e},e.noChange=function(e){if(z_d("47.95"),!zot(e))return e.off("mousedown",e.zimChangeEvent),e},e.drag=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y){function v(){if(t.off("added",t.zimAdded),(o=t.zimBoundary)&&o.getBounds&&"Blob"!=o.type){t.zimLocalBounds=!1,o="Stage"!=o.type&&"StageGL"!=o.type?o.boundsToGlobal():new e.Boundary(0,0,o.width,o.height);var n=t.boundsToGlobal(),r=t.localToGlobal(t.regX,t.regY),i=new e.Point(r.x-n.x,r.y-n.y),a=t.borderWidth?t.borderWidth:0;o.x+=i.x+a/2,o.y+=i.y+a/2,o.width-=n.width+a,o.height-=n.height+a,t.zimBoundary=o}F=0,V=0,t.zimBoundary&&"Blob"!=t.zimBoundary.type&&(l?(N=e.boundsToGlobal(t.parent,t.zimBoundary),c&&(G=t.zimBoundary)):(N=t.zimBoundary,c&&(G=e.boundsToGlobal(t.parent,t.zimBoundary,!0)))),N&&f&&(r=t.parent.localToGlobal(t.x,t.y),w(t,r.x,r.y)),u&&setTimeout(function(){S=new e.Damp(t.x,d),B=new e.Damp(t.y,d),t.zimDragImmediate=function(e,t){_=e,Y=t,j=D=L=X=0,zot(e)||S.immediate(e),zot(t)||B.immediate(t)},E=3,I=0,M=[],O=[],j=t.x,L=t.y,_=t.x,Y=t.y,D=t.x,X=t.y,R=-1e4,W=-1e4,t.zimDragMoving=!0,x()},50),zot(t.zimMaskDynamic)||t.zimMaskApply()}function b(){t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker)}function w(o,n,r){if(zot(o)&&(o=q||t),o.parent){if(zot(n)||zot(r)){var i=o.parent.localToGlobal(o.x,o.y);F=V=0,t.zimBoundary&&(l?(N=e.boundsToGlobal(o.parent,t.zimBoundary),c&&(G=o.zimBoundary)):(N=t.zimBoundary,c&&(G=e.boundsToGlobal(o.parent,t.zimBoundary,!0)))),n=i.x,r=i.y,u&&(_=o.x,Y=o.y,q=o,S&&S.immediate(_),B&&B.immediate(Y))}if(Q&&Q.type)var a=o.parent.globalToLocal(n,r);else a=o.parent.globalToLocal(n*e.scaX,r*e.scaY);var s;u&&h?"vertical"==h?(s=C(o,a.x-F,a.y-V),o.x=s.x,o.y=a.y-V):"horizontal"==h?(s=C(o,a.x-F,a.y-V),o.x=a.x-F,o.y=s.y):(o.x=a.x-F,o.y=a.y-V):(s=C(o,a.x-F,a.y-V),o.x=s.x,o.y=s.y),!u||H||o.slideStartX==o.x&&o.slideStartY==o.y||(H=!0)}}function C(e,o,n){if(!e.parent)return{x:o,y:n};if(N)if(c){var r=e.getBounds().width,i=e.getBounds().height,a=e.getBounds().x,l=e.getBounds().y;r<G.width?o=G.x+(G.width-r)/2+(e.regX-a):(o-(e.regX-a)>G.x&&(o=G.x+(e.regX-a)),o-(e.regX-a)+r<G.x+G.width&&(o=G.x+G.width+(e.regX-a)-r)),e.height<G.height?n=G.y+(G.height-i)/2+(e.regY-l):(n-(e.regY-l)>G.y&&(n=G.y+(e.regY-l)),n-(e.regY-l)+i<G.y+G.height&&(n=G.y+G.height+(e.regY-l)-i))}else{if("Blob"==N.type)return N.shape.hitTestPoint(o,n)?{x:o,y:n}:{x:t.x,y:t.y};var s=e.parent.localToGlobal(o,n);o=Math.max(N.x,Math.min(N.x+N.width,s.x)),n=Math.max(N.y,Math.min(N.y+N.height,s.y)),o=(s=e.parent.globalToLocal(o,n)).x,n=s.y}return{x:o,y:n}}function x(){function o(o,n,r,i,a){Math.abs(o.x-R)<.1&&Math.abs(o.y-W)<.1?(t.zimDragMoving=!1,o.x=i,o.y=a,o.slideStartX=null,o.slideStartY=null,H&&(o.dispatchEvent("slidestop"),e.Ticker.remove(t.zimDragTicker)),"Pen"==t.type&&(t.zimDragCheck=!1,K&&t.stopCheck())):(R=n,W=r)}t.stage,t.zimDragTicker=function(){if(!zot(t.slideStartX))if(q||(q=t),U){if(q.parent)var n=q.parent.globalToLocal(t.dragMouseX,t.dragMouseY);else n=new e.Point(0,0);I++,M.push(n.x),O.push(n.y),I>=E?(D=M.shift(),X=O.shift()):(D=M[0],X=O[0])}else{if(!t.zimDragMoving)return;var r=_+j-D,i=Y+L-X;if(N&&(r=(a=C(q,r,i)).x,i=a.y),h)q.x=S.convert(r),q.y=B.convert(i),o(q,q.x,q.y,r,i);else{var a=C(q,S.convert(r),B.convert(i));q.x=a.x,q.y=a.y,o(q,q.x,q.y,q.x,q.y)}}}}var k,T="obj, boundary, overCursor, dragCursor, all, swipe, localBounds, onTop, surround, slide, slideDamp, slideSnap, reg, removeTweens, startBounds, rect, currentTarget, offStage";if(k=zob(e.drag,arguments,T))return k;if(z_d("31"),!zot(t)&&t.on){var A=e.DRAGALL;if(null!=window.DRAGALL&&(A=window.DRAGALL),zot(i)&&zot(z)&&(i=A),zot(i)&&zot(z)?z=!1:zot(i)?zot(z)&&(z=!1):z=i,"Tag"!=t.type&&"TextArea"!=t.type&&"Loader"!=t.type||(z=!0),o&&o.getBounds&&t.numChildren&&t.numChildren>1&&1==t.mouseChildren&&!i){var P=Array.prototype.slice.call(arguments);return P[4]=!0,t.loop(function(t){P[0]=t,e.drag.apply(null,P)}),t}if(t.zimDown&&t.noDrag(),t.cursor=zot(n)?"pointer":n,zot(a)&&(a=!1),zot(l)&&(l=!1),zot(s)&&(s=!0),zot(c)&&(c=!1),zot(u)&&(u=!1),zot(d)&&(d=.3),zot(h)&&(h=!0),!0!==h&&["horizontal","vertical","auto"].indexOf(h)<0&&(h=!1),zot(g)&&(g=!1),zot(p)&&(p=!0),zot(f)&&(f=!0),zot(o)&&!zot(m)&&(o=m),u)var S,B,E,I,M,O,j,L,_,Y,D,X,R,W,H;else t.zimDragTicker=function(){};t._draggable=!0,e.setSwipe(t,a),t.zimBoundary=o,t.zimLocalBounds=l;var F,V,N,G,q,Q,U=!1,K=!1;return t.zimAdded=t.on("added",v,null,!0),t.zimRemoved=t.on("removed",b,null,!0),t.parent&&v(),t.pointers={},t.zimDown=t.on("mousedown",function(o){if(t.stage){Q=t.stage,t.dragMouseX=Math.round(o.stageX/e.scaX)+Q.x,t.dragMouseY=Math.round(o.stageY/e.scaY)+Q.y;var n="id"+Math.abs(o.pointerID+1);if(t.pointers[n]=!0,q=z?o.currentTarget:o.target,!t.zimBoundary||q.getBounds()){if(U=!0,t.stage.mouseMoveOutside=!0,e.Ticker.has(t.zimDragTicker)||e.Ticker.add(t.zimDragTicker,t.stage),p&&createjs.Tween.removeTweens(q),q.parent){if(s){var i=q.parent.numChildren-1;"Keyboard"==q.parent.getChildAt(i).type&&i--,q.parent.setChildIndex(q,i),q.ZIMoutlineShape&&q.outline()}if(q.parent==t.stage)var a=new e.Point(o.stageX/e.scaX,o.stageY/e.scaY);else a=q.parent.globalToLocal(o.stageX/e.scaX,o.stageY/e.scaY);g&&(q.x=a.x,q.y=a.y),F=a.x-q.x,V=a.y-q.y,t.zimBoundary&&(l?(N=e.boundsToGlobal(q.parent,t.zimBoundary),c&&(G=t.zimBoundary)):(N=t.zimBoundary,c&&(G=e.boundsToGlobal(q.parent,t.zimBoundary,!0)))),t.cursor=zot(r)?"pointer":r,u&&(t.slideStartX=t.x,t.slideStartY=t.y,H=t.zimDragMoving,I=0,M=[a.x],O=[a.y],R=-1e4,W=-1e4,t.zimDragMoving=!0),"Pen"==t.type&&(t.zimDragCheck=!0,K=!1)}}else zog("zim.drag() - drag object needs bounds set")}},!0),t.zimMove=t.on("pressmove",function(o){if(U){var n=(y?o.rawX:o.stageX)/e.scaX+Q.x,r=(y?o.rawY:o.stageY)/e.scaY+Q.y;t.dragMouseX=Math.round(n),t.dragMouseY=Math.round(r),w(q,n,r),q.ZIMoutlineShape&&q.outline(),"Pen"==t.type&&!K&&t.drawing?K=!0:"Tag"!=t.type&&"TextArea"!=t.type&&"Loader"!=t.type||t.resize()}},!0),t.zimPosition=w,t.zimUp=t.on("pressup",function(o){var r="id"+Math.abs(o.pointerID+1);if(delete t.pointers[r],U){if(t.cursor=zot(n)?"pointer":n,u){if(q.dispatchEvent("slidestart"),q.parent)var i=y?o.rawX:o.stageX,a=y?o.rawY:o.stageY,l=q.parent.globalToLocal(i/e.scaX,a/e.scaY);else l=new e.Point(0,0);U=!1,j=l.x,L=l.y,_=q.x,Y=q.y,S.immediate(q.x),B.immediate(q.y)}else{var s=0;for(var c in t.pointers)s++;0==s&&e.Ticker.remove(t.zimDragTicker),"Pen"==t.type&&(t.zimDragCheck=!1,K&&t.stopCheck())}t.stage&&t.stage.update()}},!0),t}},e.noDrag=function(t,o){function n(t){t.cursor=null,t._draggable=!1,e.setSwipe(t,!0),t.off("added",t.zimAdded),t.off("removed",t.zimRemoved),t.off("mousedown",t.zimDown),t.off("pressmove",t.zimMove),t.off("pressup",t.zimUp),e.Ticker&&(t.zimDragSlide&&e.Ticker.remove(t.zimDragSlide),t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker)),t.zimDragMoving=t.zimAdded=t.zimRemoved=t.zimDown=t.zimMove=t.zimUp=t.zimBoundary=t.zimDragSlide=null,t.slideStartX=t.slideStartY=t.zimDragImmediate=null,t.dragMouseX=t.zimPosition=t.dragMouseY=t.zimDown=t.zimUp=null,t.zimDragTicker=t.zimDragSlide=null}if(z_d("32"),!zot(t)&&t.on){if(zot(o)&&(o=!0),o&&t.numChildren&&t.numChildren>1)for(var r=0;r<t.numChildren;r++)n(t.getChildAt(r));return n(t),t}},e.dragBoundary=function(e,t){if(z_d("33"),!zot(e)&&e.on&&!zot(t))return e.zimBoundary=t,e.zimDragMoving=!0,e.zimPosition&&e.zimPosition(),e},e.dragRect=e.dragBoundary,e.mouse=function(e){return z_d("33.1"),e.zimLastMouse&&(e.mouseChildren=e.zimLastMouse),e.mouseEnabled=!0,e},e.noMouse=function(e){return z_d("33.15"),e.zimLastMouse=e.mouseChildren,e.mouseChildren=!1,e.mouseEnabled=!1,e},e.effect=function(e,t,o,n,r,i){if(z_d("33.16"),zot(t))return e;zot(e.effects)&&(e.effects={}),Array.isArray(t)||(t=[t]);for(var a=0,l=0;l<t.length;l++){var s=t[l];s.type||(s instanceof createjs.BlurFilter?s.type="BlurEffect":s instanceof createjs.ColorFilter?s.type="ColorEffect":s instanceof createjs.AlphaMaskFilter?s.type="AlphaEffect":s instanceof createjs.ColorMatrixFilter?s.type="MultiEffect":zot(s.type)&&(s.type="custom"+a++));var c=s.type.replace(/effect/i,"");e.effects[c.toLowerCase()]=s}for(var u in e.filters=[],e.effects)e.filters.push(e.effects[u]);return e.cache(o,n,r,i),e},e.updateEffects=function(e){return z_d("33.163"),e.updateCache&&e.updateCache(),e},e.noEffect=function(e,t,o){if(z_d("33.165"),zot(o)&&(o=!1),zot(t)){var n;e.effects.multi&&(n=e.effects.multi),e.effects={},n&&(e.effects.multi=n)}else{e.effects||(e.effects={}),Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var i=t[r].replace(/effect/i,"");delete e.effects[i.toLowerCase()]}}for(var a in e.filters=[],e.effects)e.filters.push(e.effects[a]);return o||e.filters.length>0?e.updateCache&&e.updateCache():e.uncache&&e.uncache(),e},e.wire=function(t,o,n,r,i,a,l,s){var c,u="source, target, prop, twoWay, setSource, filter, call, input";if(c=zob(e.wire,arguments,u))return c;if(z_d("33.2"),zot(e.Ticker)&&zon)return zog("wire() - requires ZIM Frame"),t;if(zot(o)&&zon)return zog("wire() - requires a target"),t;var d=e.DEFAULTWIRE;return null!=window.DEFAULTWIRE&&(d=window.DEFAULTWIRE),zot(s)&&(s=d&&"currentValue"!=d&&"selectedIndex"!=d?d:d&&t.hasOwnProperty(d)?d:t.hasOwnProperty("currentValue")?"currentValue":t.hasOwnProperty("selectedIndex")?"selectedIndex":n),zot(n)&&(n=s),t.addChild&&(t.zimWire=!0),o.addChild&&(o.zimWired=!0),e.Ticker.addWire(t,[o,n,r,i,a,l,s]),t},e.noWire=function(t,o,n,r){var i,a="source, target, prop, input";return(i=zob(e.noWire,arguments,a))?i:(z_d("33.25"),zot(e.Ticker)&&zon?(zog("noWire() - requires ZIM Frame"),t):(e.Ticker.removeWire(t,o,n,r),t))},e.wired=function(t,o,n,r,i,a,l,s){var c,u="target, source, prop, twoWay, setSource, filter, call, input";return(c=zob(e.wired,arguments,u))?c:(z_d("33.3"),zot(e.Ticker)&&zon?(zog("wired() - requires ZIM Frame"),t):(e.wire(o,t,n,r,i,a,l,s),t))},e.noWired=function(t,o,n,r){var i,a="target, source, prop, input";return(i=zob(e.noWire,arguments,a))?i:(z_d("33.35"),zot(e.Ticker)&&zon?(zog("noWired() - requires ZIM Frame"),t):(e.Ticker.removeWire(o,t,n,r),t))},e.bind=function(t,o,n,r,i,a){var s,c="obj, id, props, extra, filter, bindObj";return(s=zob(e.bind,arguments,c))?s:(z_d("33.17"),l?zot(o)?(zon&&zogy("bind() - needs a unique id"),t):((a||l).add(o,t,n,r,i),t):(zon&&zogy("bind() - needs a Bind() object created first"),t))},e.noBind=function(t,o,n,r,i){var a,s="obj, props, removeConnectionData, call, bindObj";return(a=zob(e.noBind,arguments,s))?a:(z_d("33.18"),l?((i||l).remove(t,o,n,r),t):t)},e.transform=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B){function E(){var e=t;for(me=0,ze=1,ye=1,ve=0,be=0;e.parent;)me+=e.rotation,ze*=e.scaleX,ye*=e.scaleY,ve+=e.skewX,be+=e.skewY,e=e.parent}function I(){var t=v*Xe*e.sign(ze),o=v*Xe*e.sign(ye);ke.getChildAt(0).reg(t,o),ke.getChildAt(1).reg(-t,o),ke.getChildAt(2).reg(-t,-o),ke.getChildAt(3).reg(t,-o),Z.update()}function M(){he.c(),ge.c(),pe.c(),oe=t.localToGlobal(J.x,J.y),ne=t.localToGlobal(J.x+J.width,J.y),re=t.localToGlobal(J.x+J.width,J.y+J.height),ie=t.localToGlobal(J.x,J.y+J.height);var o=t.localToGlobal(J.x+J.width/2,J.y),n=t.localToGlobal(J.x+J.width,J.y+J.height/2),r=t.localToGlobal(J.x+J.width/2,J.y+J.height),i=t.localToGlobal(J.x,J.y+J.height/2);ae=t.localToGlobal(t.regX,t.regY),le=t.localToGlobal(J.x+J.width/2,J.y+J.height/2),ue=[oe,ne,re,ie],ce=[o,n,r,i],p&&(he.s(f),z&&he.sd([10,5],0),he.ss(m).mt(oe.x,oe.y).lt(ne.x,ne.y).lt(re.x,re.y).lt(ie.x,ie.y).lt(oe.x,oe.y).cp()),zot(T)||(ge.s(T),P&&ge.sd([10,5],0),ge.ss(A).mt(oe.x,oe.y).lt(ne.x,ne.y).lt(re.x,re.y).lt(ie.x,ie.y).lt(oe.x,oe.y).cp()),$.setBounds(oe.x,oe.y,ne.x-oe.x,ie.y-oe.y),g&&(pe.s("#eee").ss(m).f("rgba(0,0,0,.1)").dc(0,0,b),pe.s("#222").ss(m).dc(0,0,.3*b)),E();for(var a=Math.min(50,Math.abs(ve))*e.sign(ve),l=Math.min(50,Math.abs(be))*e.sign(be),s=me*e.sign(ze*ye)*e.sign(t.scaleX*t.scaleY),c=0;c<ue.length;c++){var d=ue[c];we.getChildAt(c).loc(d.x,d.y).ske(a,l).rot(s),ke.getChildAt(c).loc(d.x,d.y).rot(s);var h=ce[c],y=c%2==0?xe:Ce;y.getChildAt(Math.floor(c/2)).loc(h.x,h.y).ske(a,l).rot(s),u||y.getChildAt(Math.floor(c/2)).sca(c%2==0?ze/2:1,c%2==0?1:ye/2)}te.x=ae.x,te.y=ae.y}function O(){Re.x=0,Re.y=0,Re.graphics.c().f("rgba(0,0,0,.01)").mt(oe.x,oe.y).lt(ne.x,ne.y).lt(re.x,re.y).lt(ie.x,ie.y).lt(oe.x,oe.y).cp(),Re.reg(ae.x,ae.y),Re.x=ae.x,Re.y=ae.y}function j(e){var o=Z.getObjectUnderPoint(e.stageX,e.stageY,1);U||o&&(t.contains&&t.contains(o)||!t.contains&&t==o)?t.transformControls.visible||(y?(dt=!1,Re.mouseEnabled=!1):B.canvas.style.cursor="move",t.transformControls.show(),t.dispatchEvent("transformshow")):!t.transformControls.visible||o&&fe.contains(o)||(t.transformControls.hide(),t.dispatchEvent("transformhide"))}function L(o){if(lt=!0,c&&H(),nt&&Z.off("stagemousemove",nt),We=o.target.x,He=o.target.y,Ke=t.x,Ze=t.y,Fe=t.scaleX,Ve=t.scaleY,"rotate"==o.target.controlType){at=!0,Ne=t.rotation;var n=o.stageX/e.scaX,r=o.stageY/e.scaY,i=de.localToGlobal(Ke,Ze);Je=i.x,$e=i.y,Ge=180*Math.atan2(r-$e,n-Je)/Math.PI}B.ctrlKey||"rotate"==o.target.controlType?(qe=Math.abs(We-t.x),Qe=Math.abs(He-t.y)):(qe=Math.abs(We-o.target.op.x),Qe=Math.abs(He-o.target.op.y)),"rotate"!=o.target.controlType&&(Ue=o.target.op.parent.localToLocal(o.target.op.x,o.target.op.y,t.parent)),ct.stage?Z.setChildIndex(ct,Z.getChildIndex(fe)):ct.addTo(Z,Z.getChildIndex(fe)+1),ct.x=o.stageX/e.scaX,ct.y=o.stageY/e.scaY,ct.cursor=y?"none":o.target.cu,y&&(t.getConcatenatedMatrix().decompose(K),K.rotation||(K.rotation=0),Ae.rotation=K.rotation*e.sign(ze*ye)*e.sign(t.scaleX*t.scaleY)+Se[o.target.cu]+Be,"side"!=o.target.controlType&&ze*ye<0&&(Ae.rotation+=90),ut.addTo(Z,1).pos({x:o.stageX/e.scaX,y:o.stageY/e.scaY,reg:!0})),Re.visible=!1,t.cursor="none"}function _(o){var n=1;if(B.ctrlKey&&"corner"==o.target.controlType?n=qe>Qe?(o.target.x-Ke)/(We-Ke):(o.target.y-Ze)/(He-Ze):qe>Qe?We-o.target.op.x&&(n=(o.target.x-o.target.op.x)/(We-o.target.op.x)):He-o.target.op.y&&(n=(o.target.y-o.target.op.y)/(He-o.target.op.y)),"corner"==o.target.controlType?(t.scaleX=n*Fe,t.scaleY=n*Ve):(t.scaleX="e-resize"==o.target.cu?n*Fe:Fe,t.scaleY="n-resize"==o.target.cu?n*Ve:Ve),M(),ct.x=o.stageX/e.scaX,ct.y=o.stageY/e.scaY,y&&(ut.x=o.stageX/e.scaX,ut.y=o.stageY/e.scaY),!B.ctrlKey||"side"==o.target.controlType){var r=o.target.op.parent.localToLocal(o.target.op.x,o.target.op.y,t.parent);t.x-=(r.x-Ue.x)*e.sign(ze)*e.sign(t.scaleX),t.y-=(r.y-Ue.y)*e.sign(ye)*e.sign(t.scaleY)}M(),t.transformControls.events&&X(o,o.target.controlType)}function Y(o){var n=180*Math.atan2(o.stageY/e.scaY-$e,o.stageX/e.scaX-Je)/Math.PI;B.shiftKey?t.rot(45*Math.round((Ne+(n-Ge)*e.sign(ze)*e.sign(t.scaleX))/45)):t.rot(Ne+(n-Ge)*e.sign(ze)*e.sign(t.scaleX)),M(),ct.x=o.stageX/e.scaX,ct.y=o.stageY/e.scaY,y&&(t.getConcatenatedMatrix().decompose(K),K.rotation||(K.rotation=0),Ae.rotation=K.rotation*e.sign(ze*ye)*e.sign(t.scaleX*t.scaleY)+Se[o.target.cu]+Be,"side"!=o.target.controlType&&ze*ye<0&&(Ae.rotation+=90),ut.x=o.stageX/e.scaX,ut.y=o.stageY/e.scaY),M(),t.transformControls.events&&X(o,o.target.controlType,null,!1)}function D(e,t){I();var o=e?e.target.controlType:"move";t&&(o="reset"),y&&ut.removeFrom(Z),X(e,o,!0),Z.update()}function X(o,n,r,i){null==i&&(i=!0);var a=!1;it=null,"move"==n?(t.x==ht.x&&t.y==ht.y||((it=new createjs.Event("transformed")).transformType="move"),i&&(a=Re.hitTestPoint(o.stageX/e.scaX,o.stageY/e.scaY))):"corner"==n?(t.scaleX==ht.scaleX&&t.scaleY==ht.scaleY||((it=new createjs.Event("transformed")).transformType="size"),i&&(a=we.hitTestPoint(o.stageX/e.scaX,o.stageY/e.scaY))):"side"==n?(t.scaleX==ht.scaleX&&t.scaleY==ht.scaleY||((it=new createjs.Event("transformed")).transformType="stretch"),i&&(a=Ce.hitTestPoint(o.stageX/e.scaX,o.stageY/e.scaY)||xe.hitTestPoint(o.stageX/e.scaX,o.stageY/e.scaY))):"rotate"==n?(t.rotation!=ht.rotation&&((it=new createjs.Event("transformed")).transformType="rotate"),i&&(a=ke.hitTestPoint(o.stageX/e.scaX,o.stageY/e.scaY))):"reg"==n?t.regX==ht.regX&&t.regY==ht.regY||((it=new createjs.Event("transformed")).transformType="reg"):(it=new createjs.Event("transformed")).transformType="reset"==n?"reset":"unknown",i&&!a&&(ct.removeFrom(Z),B.canvas.style.cursor="default",t.cursor=st),it&&(it.pressup=r,"Tag"!=t.type&&"TextArea"!=t.type&&"Loader"!=t.type||t.resize(),t.dispatchEvent(it))}function R(o){lt||(ct.stage?Z.setChildIndex(ct,Z.getChildIndex(fe)):ct.addTo(Z,Z.getChildIndex(fe)+1),ut.addTo(Z,1),ct.x=o.stageX/e.scaX,ct.y=o.stageY/e.scaY,ut.x=o.stageX/e.scaX,ut.y=o.stageY/e.scaY,t.getConcatenatedMatrix().decompose(K),K.rotation||(K.rotation=0),Ae.rotation=K.rotation*e.sign(ze*ye)*e.sign(t.scaleX*t.scaleY)+Se[o.target.cu]+Be,"side"!=o.target.controlType&&ze*ye<0&&(Ae.rotation+=90),Z.update(),nt&&Z.off("stagemousemove",nt),nt=Z.on("stagemousemove",function(t){ct.x=t.stageX/e.scaX,ct.y=t.stageY/e.scaY,Z.update()}))}function W(){Z.off("stagemousemove",nt),lt||(t.cursor=st,ct.removeFrom(Z),ut.removeFrom(Z),Z.update())}function H(){if(c){var e=de.numChildren-1;"Keyboard"==de.getChildAt(e).type&&e--,de.setChildIndex(t,e),F()}}function F(){if(de==Z)fe.removeFrom(),Z.addChildAt(fe,Z.getChildIndex(t)+1);else{for(var e=de;e.parent&&e.parent!=Z;)e=e.parent;t.stage&&(fe.parent==Z&&Z.removeChild(fe),Z.addChildAt(fe,Z.getChildIndex(e)+1))}}function V(){Z.off("stagemousemove",rt),lt||(Te.removeFrom(fe),Z.update())}function N(t){!lt&&y&&dt&&(Te.addTo(fe).pos({x:t.stageX/e.scaX,y:t.stageY/e.scaY,reg:!0}),Z.update(),rt&&Z.off("stagemousemove",rt),rt=Z.on("stagemousemove",function(t){Te.x=t.stageX/e.scaX,Te.y=t.stageY/e.scaY,Z.update()}))}function G(){ht={x:t.x,y:t.y,rotation:t.rotation,regX:t.regX,regY:t.regY,scaleX:t.scaleX,scaleY:t.scaleY}}var q,Q="obj, move, stretchX, stretchY, scale, rotate, allowToggle, visible, onTop, showStretch, showRotate, showScale, showReg, showBorder, borderColor, borderWidth, dashed, customCursors, handleSize, regSize, snapDistance, snapRotation, cache, events, ghostColor, ghostWidth, ghostDashed, ghostHidden, frame";if(q=zob(e.transform,arguments,Q))return q;if(z_d("33.5"),zot(t)||!t.getBounds)return zog("zim methods - transform(): please provide object with bounds set"),t;if(!t.getBounds())return zog("zim methods - transform(): please setBounds() on object"),t;if(!t.parent)return zog("zim methods - transform(): object should be on stage first"),t;zot(o)&&(o=!0),zot(n)&&(n=!0),zot(r)&&(r=!0),0==t.width&&(n=!1),0==t.height&&(r=!1),zot(i)&&(i=!0),zot(a)&&(a=!0);var U=e.mobile();zot(l)&&(l=!0),zot(s)&&(s=!0),zot(c)&&(c=!0),zot(u)&&(u=!!U),zot(d)&&(d=!!U),zot(h)&&(h=!0),zot(g)&&(g=!0),zot(p)&&(p=!0),zot(f)&&(f="brown"),zot(m)&&(m=1),zot(T)&&(T=null),zot(A)&&(A=null),T<0||A<0?T=A=null:null!=T&&null==A&&(A=1),zot(P)&&(P=!0),zot(S)&&(S=!1),zot(B)&&(B=zdf),zot(y)&&(y=!U),zot(v)&&(v=U?20:10),zot(b)&&(b=16),zot(w)&&(w=10),zot(C)&&(C=5),zot(x)&&(x=!0),zot(k)&&(k=!1),"Tag"!=t.type&&"TextArea"!=t.type&&"Loader"!=t.type||(k=!0),t.mouseChildren=!1;var K=t.getConcatenatedMatrix().decompose(),Z=t.stage?t.stage:B.stage;zot(B.eventRemove)&&(Z.enableMouseOver(),B.ctrlKey=!1,B.shiftKey=!1,window.addEventListener("keydown",function(e){B.altKey=e.altKey,B.ctrlKey=e.ctrlKey}),window.addEventListener("keyup",function(e){B.altKey=e.altKey,B.ctrlKey=e.ctrlKey}));var J=t.getBounds(),$=new e.Shape({style:!1}),ee=new e.Shape({style:!1}),te=new e.Shape({style:!1});ee.mouseEnabled=!1,te.controlType="reg";var oe,ne,re,ie,ae,le,se,ce,ue,de=t.parent,he=$.graphics,ge=ee.graphics,pe=te.graphics,fe=new e.Container({style:!1});fe.type="TransformControls";var me,ze,ye,ve,be,we=new e.Container({style:!1}),Ce=new e.Container({style:!1}),xe=new e.Container({style:!1}),ke=new e.Container({style:!1});if(zot(t.zimMaskDynamic)||t.zimMaskApply(),y){var Te=new e.Container({style:!1}),Ae=new e.Container({style:!1});function Pe(t){
t==Te&&new e.Triangle(16,12,12,"white").addTo(t).mov(0,-13.5),new e.Triangle(16,12,12,"white").addTo(t).mov(13.5).rot(90),t==Te&&new e.Triangle(16,12,12,"white").addTo(t).mov(0,13.5).rot(180),new e.Triangle(16,12,12,"white").addTo(t).mov(-13.5).rot(-90),t==Te&&new e.Triangle(10,7,7,"black").addTo(t).mov(0,-13),new e.Triangle(10,7,7,"black").addTo(t).mov(13).rot(90),t==Te&&new e.Triangle(10,7,7,"black").addTo(t).mov(0,13).rot(180),new e.Triangle(10,7,7,"black").addTo(t).mov(-13).rot(-90),x&&t.cache(-20,-20,40,40)}Pe(Te),Pe(Ae);var Se={"nw-resize":45,"ne-resize":-45,"n-resize":90,"e-resize":0}}E();for(var Be=me,Ee=["nw-resize","ne-resize","nw-resize","ne-resize"],Ie=[2,3,0,1],Me=0;Me<4;Me++)h?((De=new e.Rectangle(v,v,"#e472c4","#333",2,null,null,null,!1)).centerReg(we),x&&De.cache(-1,-1,v+2,v+2)):((De=new e.Rectangle(v,v,"rgba(0,0,0,0)","rgba(0,0,0,0)",2,null,null,null,!1)).centerReg(we),De.expand(0)),De.rotation=me,se=y?"none":Ee[Me],De.drag({overCursor:se,dragCursor:se,onTop:!1}),De.controlType="corner",De.cu=Ee[Me];for(Me=0;Me<Ie.length;Me++)we.getChildAt(Me).op=we.getChildAt(Ie[Me]);var Oe=["n-resize","e-resize","n-resize","e-resize"];for(Ie=[1,1,0,0],Me=0;Me<4;Me++){var je=Me%2==0?t.width/2:v,Le=Me%2==0?v:t.height/2;u?((De=new e.Rectangle(v,v,"#AAA","#333",2,null,null,null,!1)).centerReg(Me%2==0?xe:Ce),x&&De.cache(-1,-1,v+2,v+2)):((De=new e.Rectangle(je,Le,"rgba(0,0,0,0)",null,null,null,null,null,!1)).centerReg(Me%2==0?xe:Ce),De.expand(0)),De.rotation=me,se=y?"none":Oe[Me],De.drag({overCursor:se,dragCursor:se,onTop:!1}),De.controlType="side",De.cu=Oe[Me]}for(Me=0;Me<Ie.length;Me++){var _e=Me%2==0?xe:Ce;_e.getChildAt(Math.floor(Me/2)).op=_e.getChildAt(Ie[Me])}var Ye=["ne-resize","nw-resize","ne-resize","nw-resize"];for(Me=0;Me<4;Me++){var De;d?((De=new e.Circle(v,"#e472c4",null,null,null,null,null,null,!1)).addTo(ke),x&&De.cache(-v,-v,2*v,2*v)):((De=new e.Circle(v,"rgba(0,0,0,0)",null,null,null,null,null,null,!1)).addTo(ke),De.expand(0)),se=y?"none":Ye[Me],De.drag({overCursor:se,dragCursor:se,onTop:!1}),De.controlType="rotate",De.cu=Ye[Me]}var Xe=1.8;ke.alpha=.5,I(),M();var Re=new e.Shape(1e3,1e3,null,null,null,!1);O(),fe.on("dblclick",function(e){B.ctrlKey&&t.transformControls.visible&&(t.scaleX=1,t.scaleY=1,t.rotation=0,M(),O(),Z.update()),D(e,!0)});var We,He,Fe,Ve,Ne,Ge,qe,Qe,Ue,Ke,Ze,Je,$e,et=fe.on("mousedown",j),tt=t.on("mousedown",j),ot=Z.on("stagemousedown",function(e){var o=Z.getObjectUnderPoint(e.stageX,e.stageY,1),n=o&&o.parent&&o.parent.layer&&o.parent.layer==t;!t.transformControls.visible||o&&(fe.contains(o)||n)||(t.dispatchEvent("transformhide"),t.transformControls.hide())});l||(fe.off("mousedown",et),t.off("mousedown",tt),Z.off("stagemousedown",ot));var nt,rt,it,at=!1,lt=!1,st=t.cursor,ct=new e.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);if(y){ct.mouseEnabled=!1,ct.mouseChildren=!1,ct.addChild(Ae),we.on("mouseover",R),we.on("mouseout",W),Ce.on("mouseover",R),Ce.on("mouseout",W),xe.on("mouseover",R),xe.on("mouseout",W),ke.on("mouseover",R),ke.on("mouseout",W);var ut=new e.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);ut.cursor="none"}we.on("mousedown",L),we.on("pressmove",_),we.on("pressup",D),Ce.on("mousedown",L),Ce.on("pressmove",_),Ce.on("pressup",D),xe.on("mousedown",L),xe.on("pressmove",_),xe.on("pressup",D),ke.on("mousedown",L),ke.on("pressmove",Y),ke.on("pressup",D),te.drag(),te.on("mousedown",H),te.on("pressup",function(o){if(!B.ctrlKey){for(var n=0;n<ue.length;n++)if(e.dist(te.x,te.y,ue[n].x,ue[n].y)<w){te.x=ue[n].x,te.y=ue[n].y;break}e.dist(te.x,te.y,le.x,le.y)<w&&(te.x=le.x,te.y=le.y)}var r=t.rotation,i=t.globalToLocal(te.x,te.y);if(de==Z)var a=new e.Point(te.x,te.y);else a=de.globalToLocal(te.x,te.y);t.reg(i.x,i.y),t.rotation=0,t.x=t.x+a.x-t.x,t.y=t.y+a.y-t.y,t.rotation=r,M(),O(),D(o),Z.update()});var dt=!0;se=y?"none":"move",Re.drag({overCursor:se,dragCursor:se,onTop:!1}),Re.controlType="move",y&&(Re.on("mouseover",N),Re.on("mouseout",V)),Re.on("mousedown",H),Re.on("pressmove",function(o){if(t.transformControls.visible){if(de==Z)var n=new e.Point(Re.x,Re.y);else n=de.globalToLocal(Re.x,Re.y);t.x=n.x,t.y=n.y,M(),t.transformControls.events&&X(o,"move")}}),Re.on("pressup",function(e){t.transformControls.visible&&D(e)});var ht,gt=Z.on("stagemouseup",function(){lt=!1,Re.mouseEnabled=!0,dt||(it=new createjs.Event("transformed"),t.x!=ht.x||t.y!=ht.y?it.transformType="move":it.transformType="select",it.pressup=!0,t.dispatchEvent(it)),dt=!0,Re.visible=!0,at&&!B.ctrlKey&&C>1&&(t.rotation=Math.round(t.rotation/C)*C,M()),O(),Re.mouseEnabled=!0,at=!1,Z.update()});G();var pt,ft=t.on("mousedown",G);fe.on("mousedown",G),fe.addChild($),o&&fe.addChild(Re),i&&fe.addChild(we),n&&fe.addChild(Ce),r&&fe.addChild(xe),a&&fe.addChild(ke),fe.addChild(te),o&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),pt=t.on("pressmove",function(e){M(),O(),I(),t.transformControls.events&&X(e,"move")}));var mt=l;return t.transformControls={visible:s,events:k,ghost:!zot(T),ghostEnabled:!zot(T),show:function(){return c&&H(),F(),t.toggled=!0,t.transformControls.visible=!0,ee.parent&&ee.removeFrom(),Z.update(),t},hide:function(){if(t.transformControls.ghost)var e=Z.getChildIndex(fe);return Z.removeChild(fe),t.transformControls.ghost&&t.transformControls.ghostEnabled&&Z.addChildAt(ee,e),t.toggled=!1,t.transformControls.visible=!1,y&&(nt&&Z.off("stagemousemove",nt),rt&&Z.off("stagemousemove",rt),lt=!1,ct.removeFrom(Z),ut.removeFrom(Z)),o||(t.cursor=st),Z.update(),t},remove:function(e){e||t.transformControls.hide(),l=!1,o&&(t.noDrag(),t.off("pressmove",pt))},add:function(e){e||t.transformControls.show(),l=mt,o&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),pt=t.on("pressmove",pt))},allowToggleOn:function(){l=mt=!0,et=fe.on("mousedown",et),tt=t.on("mousedown",tt),ot=Z.on("stagemousedown",ot)},allowToggleOff:function(){l=mt=!1,fe.off("mousedown",et),t.off("mousedown",tt),Z.off("stagemousedown",ot)},disable:function(){fe.mouseChildren=!1,fe.mouseEnabled=!1,o&&(t.noDrag(),t.off("pressmove",pt))},enable:function(){fe.mouseChildren=!0,fe.mouseEnabled=!0,o&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),pt=t.on("pressmove",pt))},recordData:function(e){var o={type:t.type,index:de.getChildIndex(t),x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation,skewX:t.skewX,skewY:t.skewY,regX:t.regX,regY:t.regY,controls:t.transformControls.visible};return e?JSON.stringify(o):o},setData:function(e,o){if(!zot(e)){o&&(e=JSON.parse(e)),e.controls,delete e.controls;var n=e.index;for(var r in zot(n)&&(n=0),delete e.index,e)t[r]=e[r];return setTimeout(function(){M(),O(),I(),de.setChildIndex(t,n),t.transformControls.visible&&"Layer"!=t.type?t.transformControls.show():t.transformControls.hide(),!t.transformControls.ghost||t.transformControls.ghostEnabled||t.transformControls.visible||Z.addChild(ee)},90),t}},hideGhost:function(){t.transformControls.ghost=!1,ee.removeFrom()},showGhost:function(){if(t.transformControls.ghost=!0,t.transformControls.ghostEnabled&&!t.transformControls.visible){for(var e=de;e.parent&&e.parent!=Z;)e=e.parent;ee.stage?Z.setChildIndex(ee,Z.getChildIndex(e)+1):Z.addChildAt(ee,Z.getChildIndex(e)+1)}},addGhost:function(){A>0?(t.transformControls.ghostEnabled=!0,t.transformControls.showGhost()):zon&&zogy("transform() - ghostWidth must be > 0 when making transform")},removeGhost:function(){t.transformControls.ghostEnabled=!1,t.transformControls.hideGhost()},resize:function(e){if(de=t.parent,M(),O(),I(),s&&t.transformControls.show(),e){var o=new createjs.Event("transformed");o.pressup=!0,o.transformType="resize",t.dispatchEvent(o)}return t},dispose:function(){t.transformControls.hide(),l=!1,o&&(t.noDrag(),t.off("pressmove",pt)),t.transformControls.hideGhost(),Re.removeAllEventListeners(),ke.removeAllEventListeners(),te.removeAllEventListeners(),Ce.removeAllEventListeners(),xe.removeAllEventListeners(),we.removeAllEventListeners(),fe.removeAllEventListeners(),tt&&t.off("mousedown",tt),et&&t.off("mousedown",et),ot&&Z.off("stagemousedown",ot),nt&&Z.off("stagemousemove",nt),rt&&Z.off("stagemousemove",rt),gt&&Z.off("stagemouseup",gt),ft&&t.off("mousedown",ft),pt&&t.off("pressmove",pt),fe=ct=ut=null,t.transformControls=null},controls:fe,scaleControls:we,stretchXControls:Ce,stretchYControls:xe,rotateControls:ke},t.toggle=function(e){return!0===e?t.transformControls.show():!1===e?t.transformControls.hide():t.transformControls.visible?t.transformControls.hide():t.transformControls.show(),t},t.transformControls.ghost&&(t.transformControls.toggleGhost=function(e){return!0===e?t.transformControls.showGhost():!1===e?t.transformControls.hideGhost():t.transformControls.visible?t.transformControls.hideGhost():t.transformControls.showGhost(),t}),s?t.transformControls.show():!S&&t.transformControls.ghost&&t.transformControls.showGhost(),t},e.gesture=function(o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z){var y,v="obj, move, scale, rotate, boundary, minScale, maxScale, snapRotate, localBounds, slide, slideEffect, regControl, onTop, surround, circularBounds, rect";if(y=zob(e.gesture,arguments,v))return y;if(z_d("34.5"),!zot(o)&&o.on){var b,w,C,x;zot(n)&&(n=!0),zot(r)&&(r=!0),zot(i)&&(i=!0),zot(u)&&(u=!1),zot(c)&&(c=1),zot(d)&&(d=!1),zot(h)&&(h=5),zot(g)&&(g=!1),zot(p)&&(p=!0),zot(f)&&(f=!1),f&&i&&(f=z=null,zon&&zogy("gesture() - does not support surround when rotate is true")),zot(m)&&(m=!1),zot(a)&&!zot(z)&&(a=z);var k=t();if(zot(o.zimMaskDynamic)||o.zimMaskApply(),!o.zimTouch){var T,A,P,S,B,E,I,M,O=new e.Damp(o.scaleX,.05),j=new e.Damp(o.scaleY,.05),L=o.scaleX/o.scaleY;if(o.zimTouch={move:n,scale:r,rotate:i,pointers:{},checkBounds:function(e,t){if(o.zimTouch.boundary){var n=o.zimTouch.boundary,r=o.parent.localToLocal(e,t,o.parent);f?(e=Math.min(n.x,Math.max(n.x+n.width,r.x)),t=Math.min(n.y,Math.max(n.y+n.height,r.y))):(e=Math.max(n.x,Math.min(n.x+n.width,r.x)),t=Math.max(n.y,Math.min(n.y+n.height,r.y))),e=(r=o.parent.globalToLocal(e,t)).x,t=r.y}return{x:e,y:t}}},a){o.zimTouch.boundary=a,u&&(o.zimTouch.boundary=e.boundsToGlobal(o.parent,a)),o.zimTouch.boundaryStartX=o.zimTouch.boundary.x,o.zimTouch.boundaryStartY=o.zimTouch.boundary.y,o.zimTouch.boundaryStartW=o.zimTouch.boundary.width,o.zimTouch.boundaryStartH=o.zimTouch.boundary.height;var _=o.zimTouch.checkBounds(o.x,o.y);o.x=_.x,o.y=_.y}function Y(){o.zimTouch.pair=[],e.loop(o.zimTouch.pointers,function(e,t,n){t.startX=t.x,t.startY=t.y,n<=1&&o.zimTouch.pair.push(t)}),o.zimTouch.startX=o.x,o.zimTouch.startY=o.y,o.zimTouch.startSX=o.scaleX,o.zimTouch.startSY=o.scaleY,o.zimTouch.startR=o.rotation}function D(){var e=o.localToGlobal(o.regX,o.regY);if(m)var t=o.parent.localToGlobal(o.x-o.width/2,o.y-o.height/2),n=o.parent.localToGlobal(o.x+o.width/2,o.y+o.height/2),r={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y};else r=o.boundsToGlobal();var i={x:o.zimTouch.boundaryStartX+e.x-r.x,y:o.zimTouch.boundaryStartY+e.y-r.y,width:o.zimTouch.boundaryStartW-r.width,height:o.zimTouch.boundaryStartH-r.height};o.gestureBoundary(i,!1)}d&&(C=10,x=5,w=0,b=[],o.zimTouch.slideInterval=e.interval(C/("s"==k?1e3:1),function(){b[w++%x]=[o.x,o.y]}),o.zimTouch.slideInterval.pause(),o.animate({x:o.x,y:o.y},10/("s"==k?1e3:1),"quadOut")),o.zimTouch.mousedown=o.on("mousedown",function(t){if(zot(M)?M=1:M++,o.stage,p){var n=o.parent.numChildren-1;"Keyboard"==o.parent.getChildAt(n).type&&n--,o.parent.setChildIndex(o,n),o.ZIMoutlineShape&&o.outline()}g||(I=null,A=o.scaleX,P=o.scaleY,S=o.rotation,B=o.regX,E=o.regY,o.reg(0,0),T=o.getMatrix(),o.regX=B,o.regY=E);var r="id"+Math.abs(t.pointerID+1),i=o.parent.globalToLocal(t.stageX/e.scaX,t.stageY/e.scaY);o.zimTouch.pointers[r]={startX:i.x,startY:i.y,x:i.x,y:i.y},(o.zimTouch.move||o.zimTouch.rotate)&&(o.zimTouch.total=0,e.loop(o.zimTouch.pointers,function(){o.zimTouch.total++})),d&&1==o.zimTouch.total&&o.zimTouch.slideInterval.pause(!1),Y()}),o.zimTouch.pressmove=o.on("pressmove",function(t){o.stage;var n="id"+Math.abs(t.pointerID+1),r=o.parent.globalToLocal(t.stageX/e.scaX,t.stageY/e.scaY);o.zimTouch.pointers[n]&&(o.zimTouch.pointers[n].x=r.x,o.zimTouch.pointers[n].y=r.y);var i=0,a=0,c=0,u=0,d=0,h=0;e.loop(o.zimTouch.pointers,function(e,t){i+=t.x-t.startX,a+=t.y-t.startY,c+=t.x,u+=t.y}),d=i/o.zimTouch.total,h=a/o.zimTouch.total,i=o.zimTouch.startX+d,a=o.zimTouch.startY+h,c/=o.zimTouch.total,u/=o.zimTouch.total;var p={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY,rotation:o.rotation};if(o.zimTouch.move){var f=o.zimTouch.checkBounds(i,a);p.x=f.x,p.y=f.y}if(2==o.zimTouch.pair.length){var m=o.zimTouch.pair[0],z=o.zimTouch.pair[1];if(o.zimTouch.scale){var y=Math.sqrt(Math.pow(z.startX-m.startX,2)+Math.pow(z.startY-m.startY,2)),v=Math.sqrt(Math.pow(z.x-m.x,2)+Math.pow(z.y-m.y,2)),b=o.zimTouch.startSX+(v/y-1),w=o.zimTouch.startSY+(v/y-1);p.scaleX=b,p.scaleY=w,p.scaleX=O.convert(b),p.scaleY=j.convert(w);var C=!zot(l)&&Math.min(b,w)<l,x=!zot(s)&&Math.max(b,w)>s;(C||x)&&(C?L>1?(p.scaleY=l,p.scaleX=l*L):(p.scaleX=l,p.scaleY=l/L):x&&(L>1?(p.scaleX=s,p.scaleY=s/L):(p.scaleY=s,p.scaleX=s*L)),O.immediate(p.scaleX),j.immediate(p.scaleY))}if(o.zimTouch.rotate){var k=Math.atan2(m.startY-z.startY,m.startX-z.startX)*(180/Math.PI),M=Math.atan2(m.y-z.y,m.x-z.x)*(180/Math.PI)-k;p.rotation=o.zimTouch.startR+M}if(g)o.scaleX=p.scaleX,o.scaleY=p.scaleY,o.rotation=p.rotation,o.zimTouch.move&&(o.x=p.x,o.y=p.y);else{o.reg(0,0);var _=o.parent.localToGlobal(c,u);c=_.x,u=_.y;var Y=zot(I)?o.globalToLocal(c,u):o.globalToLocal(I.x,I.y);T.clone().translate(Y.x,Y.y).rotate(p.rotation-S).scale(p.scaleX/A,p.scaleY/P).translate(-Y.x,-Y.y).decompose(o),o.zimTouch.move&&(o.x+=d,o.y+=h),I=o.localToGlobal(Y.x,Y.y),o.reg(B,E)}o.zimTouch.scale&&o.dispatchEvent("scale"),o.zimTouch.rotate&&o.dispatchEvent("rotate"),o.zimTouch.move&&o.dispatchEvent("move")}else o.x=p.x,o.y=p.y,o.zimTouch.move&&o.dispatchEvent("move");"Tag"!=o.type&&"TextArea"!=o.type&&"Loader"!=o.type||o.resize(),o.ZIMoutlineShape&&o.outline(),o.getStage&&o.stage&&o.stage.update()}),o.on("mousedown",function(){var e=1;o.stage.on("stagemousedown",function(){e++}),o.stage.on("stagemouseup",function(){0==--e&&setTimeout(function(){o.zimTouch&&(o.zimTouch.total=0),o.zimTouch&&(o.zimTouch.pointers={}),M=null},50)})},null,!0),o.zimTouch.pressup=o.on("pressup",function(e){var t="id"+Math.abs(e.pointerID+1);if(delete o.zimTouch.pointers[t],(o.zimTouch.move||o.zimTouch.rotate)&&o.zimTouch.total--,i&&!zot(c)&&0==o.zimTouch.total&&(c>0?o.rotation=Math.round(o.rotation/c)*c:0==c&&(o.rotation=Math.round(o.rotation))),d&&0==o.zimTouch.total&&1==M){o.zimTouch.slideInterval.pause();var n=b[(w+1)%b.length],r=b[w%b.length],a=o.x+(n[0]-r[0])*h,l=o.y+(n[1]-r[1])*h,s=o.zimTouch.checkBounds(a,l),u=x*C*h*Math.min((o.x-s.x)/(o.x-a)||1,(o.y-s.y)/(o.y-l)||1);o.animate({x:s.x,y:s.y},u/("s"==k?1e3:1),"quadOut",function(){o.dispatchEvent("slidestop")})}0==o.zimTouch.total&&(M=null),o.getStage&&o.stage&&o.stage.update(),Y()}),a&&(D(),o.on("move",D))}return o}},e.noGesture=function(t,o,n,r){var i,a="obj, move, scale, rotate";return(i=zob(e.noGesture,arguments,a))?i:(z_d("34.6"),!zot(t)&&t.on&&t.zimTouch?(zot(o)&&(o=!0),zot(n)&&(n=!0),zot(r)&&(r=!0),t.zimTouch.move=!o,t.zimTouch.scale=!n,t.zimTouch.rotate=!r,t.zimTouch.move||t.zimTouch.scale||t.zimTouch.rotate||(t.off("mousedown",t.zimTouch.mousedown),t.off("pressmove",t.zimTouch.pressmove),t.off("pressup",t.zimTouch.pressup),delete t.zimTouch),t):void 0)},e.gestureBoundary=function(t,o,n){if(z_d("34.7"),!zot(t)&&t.on&&!zot(o)&&t.zimTouch){t.zimTouch.localBounds&&t.parent?t.zimTouch.boundary=e.boundsToGlobal(t.parent,o):t.zimTouch.boundary=o,zot(n)&&(n=!0),n&&(t.zimTouch.boundaryStartX=o.x,t.zimTouch.boundaryStartY=o.y,t.zimTouch.boundaryStartW=o.width,t.zimTouch.boundaryStartH=o.height);var r=t.zimTouch.checkBounds(t.x,t.y);return t.x=r.x,t.y=r.y,t}},e.addPhysics=function(t,o,n,r,i,l,s,c,u,d,h,g,p){var f,m="obj, dynamic, contract, shape, friction, linear, angular, density, bounciness, maskBits, categoryBits, physics, restitution";if(f=zob(e.addPhysics,arguments,m))return f;if(z_d("34.8"),zot(g)){if("undefined"==typeof zimPhysics)return zon&&zog("ZIM Physics module must be imported"),t;zot(zimDefaultPhysics)&&(zimDefaultPhysics=new e.Physics),g=zimDefaultPhysics}t.physics=g;var z="rectangle";return"Circle"==t.type||"Dial"==t.type?z="circle":"Triangle"==t.type&&(z="triangle"),zot(r)&&(r=z),zot(u)&&(u=p),a(t,o,n,r,i,l,s,c,u,d,h),t},e.removePhysics=function(e){return z_d("34.85"),zot(e.physics)?e:(e==e.physics.followObj&&e.physics.follow(null),e.follow=e.noFollow=e.control=e.noControl=e.sleep=e.wake=null,e.impulse=e.force=e.spin=e.torque=null,e.physics.remove(e.body),e.physics=null,e)},e.hitTestPoint=function(t,o,n,r){if(e.zimhtp||(z_d("35"),e.zimhtp=!0),!t.stage||zot(o)||zot(n))return!1;if(t.stage,!zot(t)&&t.globalToLocal){if(zot(r)&&(r=!0),r){var i=t.getBounds();if(i){var a=t.globalToLocal(o,n);if(a.x>i.x+i.width||a.x<i.x)return!1;if(a.y>i.y+i.height||a.y<i.y)return!1}}var l={x:o,y:n};return l=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(l.x,l.y):t.globalToLocal(l.x*e.scaX,l.y*e.scaY),t.hitTest(l.x,l.y)}},e.hitTestReg=function(t,o,n){if(e.zimhtr||(z_d("36"),e.zimhtr=!0),!t.stage||!o.stage)return!1;if(t.stage,!zot(t)&&!zot(o)&&t.localToLocal&&o.localToLocal){zot(n)&&(n=!0);var r=o.localToGlobal(o.regX,o.regY),i=t.getBounds();if(n&&i){var a=t.globalToLocal(r.x,r.y);if(a.x>i.x+i.width||a.x<i.x)return!1;if(a.y>i.y+i.height||a.y<i.y)return!1}return r=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(r.x,r.y):t.globalToLocal(r.x*e.scaX,r.y*e.scaY),t.hitTest(r.x,r.y)}},e.hitTestRect=function(t,o,n,r){function i(o){if(o=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(o.x,o.y):t.globalToLocal(o.x*e.scaX,o.y*e.scaY),t.hitTest(o.x,o.y))return!0}if(e.zimhtr||(z_d("37"),e.zimhtr=!0),!t.stage||!o.stage)return!1;if(t.stage,!zot(t)&&!zot(o)&&t.hitTest&&o.getBounds){zot(n)&&(n=0),zot(r)&&(r=!0);var a=o.getBounds();if(a){if(r&&t.getBounds()&&!e.hitTestBounds(t,o))return!1;var l,s,c=a.x+a.width/2,u=a.y+a.height/2;if(i(o.localToGlobal(c,u)))return!0;for(var d=0;d<=n;d++){if(l=a.width*(d+1)/(n+1),s=a.height*(d+1)/(n+1),i(o.localToGlobal(a.x+l,a.y)))return!0;if(i(o.localToGlobal(a.x+a.width,a.y+s)))return!0;if(i(o.localToGlobal(a.x+a.width-l,a.y+a.height)))return!0;if(i(o.localToGlobal(a.x,a.y+a.height-s)))return!0}}else zon&&zogy("hitTestRect():\n please setBounds() on param b object")}},e.hitTestCircle=function(t,o,n,r){function i(o){if(o=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(o.x,o.y):t.globalToLocal(o.x*e.scaX,o.y*e.scaY),t.hitTest(o.x,o.y))return!0}if(e.zimhtc||(z_d("38"),e.zimhtr=!0),z_d("38"),t.stage&&o.stage&&(t.stage,!zot(t)&&!zot(o)&&t.hitTest&&o.getBounds)){zot(n)&&(n=8),zot(r)&&(r=!0);var a=o.getBounds();if(a){var l=t.getBounds();if(r&&l&&!e.hitTestBounds(t,o))return!1;var s=a.x+a.width/2,c=a.y+a.height/2,u=o.localToGlobal(s,c);if(i(u))return!0;for(var d,h,g,p=(a.width+a.height)/2/2,f=0;f<n;f++)if(d=f/n*2*Math.PI,h=s+p*Math.cos(d),g=c+p*Math.sin(d),i(u=o.localToGlobal(h,g)))return!0;return!1}zon&&zogy("hitTestCircle():\n please setBounds() on param b object")}},e.hitTestCircleRect=function(t,o,n){if(e.zimhtcr||(z_d("38.2"),e.zimhtcr=!0),t.stage&&o.stage&&(t.stage,!zot(t)&&!zot(o)&&t.getBounds&&o.getBounds)){var r=t.getBounds(),i=o.getBounds();if(r&&i){zot(n)&&(n=0);var a=(t.radius?t.radius:(r.width+r.height)/2)+n,l=o.boundsToGlobal(),s=t.localToGlobal(0,0),c=s.x,u=s.y,d=l.x,h=l.y,g=l.x+l.width,p=l.y+l.height,f=(c<d?d:c>g?g:c)-c,m=(u<h?h:u>p?p:u)-u;return f*f+m*m<=a*a}zon&&zogy("hitTestCircleRect():\n please setBounds() on both objects")}},e.hitTestCircles=function(t,o,n){if(e.zimhtcs||(z_d("38.5"),e.zimhtcs=!0),t.stage&&o.stage){var r=t.stage;if(!zot(t)&&!zot(o)&&t.hitTest&&t.getBounds&&o.getBounds){var i=t.getBounds(),a=o.getBounds();if(i&&a){zot(n)&&(n=0);var l=t.localToGlobal(i.x+i.width/2,i.y+i.height/2),s=o.localToGlobal(a.x+a.width/2,a.y+a.height/2),c=t.getConcatenatedMatrix(),u=o.getConcatenatedMatrix(),d=Math.sqrt(c.a/r.scaleX*c.a/r.scaleX+c.c/r.scaleX*c.c/r.scaleX),h=Math.sqrt(c.b/r.scaleY*c.b/r.scaleY+c.d/r.scaleY*c.d/r.scaleY),g=Math.sqrt(u.a/r.scaleX*u.a/r.scaleX+u.c/r.scaleX*u.c/r.scaleX),p=Math.sqrt(u.b/r.scaleY*u.b/r.scaleY+u.d/r.scaleY*u.d/r.scaleY),f=Math.sqrt(Math.abs(Math.pow(l.x-s.x,2)+Math.pow(l.y-s.y,2)));return i.width*Math.max(d,h)/2+a.width*Math.max(g,p)/2>=f-n}zon&&zogy("hitTestCircles():\n please setBounds() on both objects")}}},e.hitTestBounds=function(t,o,n,r){if(e.zimhtb||(z_d("39"),e.zimhtb=!0),t.stage&&o.stage&&!zot(t)&&!zot(o)&&t.getBounds&&o.getBounds){var i=!1;r&&r.graphics&&(i=!0);var a=t.getBounds(),l=o.getBounds();if(a&&l){zot(n)&&(n=0);var s=e.boundsToGlobal(t),c=e.boundsToGlobal(o);if(i){var u=r.graphics;u.c(),u.ss(1).s("blue"),u.r(s.x,s.y,s.width,s.height),u.s("green"),u.r(c.x,c.y,c.width,c.height),r.stage.update()}return e.rectIntersect(s,c,n)}zon&&zogy("hitTestBounds():\n please setBounds() on both objects")}},e.hitTestPath=function(t,o,n,r){function i(o){if(o=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(o.x,o.y):t.globalToLocal(o.x*e.scaX,o.y*e.scaY),t.hitTest(o.x,o.y))return!0}if(e.zimhtpa||(z_d("37.5"),e.zimhtpa=!0),t.stage&&o.stage&&(t.stage,!zot(t)&&!zot(o)&&t.hitTest&&("Squiggle"==o.type||"Blob"==o.type))){var a=t.getBounds();zot(n)&&(n=2),zot(r)&&(r=!1);var l=o.interpolate(n,null,!0,null,!0);if(r){o.hitPathPoints?o.hitPathPoints.removeAllChildren():o.hitPathPoints=(new e.Container).addTo(),o.hitPathPoints.top();for(var s=0;s<l.length;s++){var c=l[s];c=o.localToGlobal(c.x,c.y),new e.Circle(3).loc(c.x,c.y,o.hitPathPoints)}}if(a){var u=e.boundsAroundPoints(l);if(!e.rectIntersect(t.boundsToGlobal(a),o.boundsToGlobal(u)))return}for(s=0;s<l.length;s++)if(c=l[s],i(c=o.localToGlobal(c.x,c.y)))return!0;return!1}},e.hitTestGrid=function(t,o,n,r,i,a,l,s,c,u,d,h,g){if(e.zimhtg||(z_d("41"),e.zimhtg=!0),!t.stage)return!1;if(!zot(t)&&!h){var p=t.globalToLocal(a,l);a=p.x,l=p.y}zot(s)&&(s=0),zot(c)&&(c=0),zot(u)&&(u=0),zot(d)&&(d=0);var f=(o+=u)/r,m=(n+=d)/i,z=Math.min(r-1,Math.max(0,Math.floor((a-s+u/2)/f))),y=Math.min(i-1,Math.max(0,Math.floor((l-c+d/2)/m)));if("open"!=g){if(a-s>f*(z+1)-u||a-s<f*z)return;if(l-c>m*(y+1)-d||l-c<m*y)return}var v=y*r+z;return zot(g)||"index"==g?v:"col"==g?z:"row"==g?y:"array"==g||"open"==g?[v,z,y]:void 0},e.animate=function(o,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y,D,X,R,W,H,F,V,N,G,q,Q,U,K,Z,J,$,ee,te){function oe(e,t){if("."==t.substr(0,1)){for(var o=t.split("."),n=e,r=1;r<o.length;r++)n=n[o[r]];return n}return e[t]}function ne(e,t,o){if("."==t.substr(0,1)){for(var n=t.split("."),r=e,i=1;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=o}else e[t]=o}function re(e,t){return!!Object.getOwnPropertyDescriptor(e,t).get}function ie(){o.zimMouseEnabledCheck||(o.zimMouseEnabledCheck=!0,o.zimLastMouseEnabled=o.mouseEnabled),o.mouseEnabled=!1,setTimeout(function(){for(var e in o.zimBusy||(o.zimBusy={}),q)o.zimBusy[e]=!0;o.zimMouseEnabledCheck=null,o.mouseEnabled=o.zimLastMouseEnabled},70)}function ae(){zot(X)?X=e.makeID(10):(X=String(X),We=X),zot(o.zimIdSets)&&(o.zimIdSets={}),zot(o.zimIdSets[X])?zot(o.zimTweens[X])||(Re=X,X=e.makeID(10),o.zimIdSets[Re]=[Re],o.zimTweens[Re].zimIdSet=Re,o.zimIdSets[Re].push(X)):(Re=X,X=e.makeID(10),o.zimIdSets[Re].push(X))}function le(){var e;for(Oe in o.zimLastObj||(o.zimLastObj={}),q){if("string"==typeof q[Oe]){if("+"==q[Oe].substr(0,1))continue;e=o.zimLastObj&&!zot(o.zimLastObj[Oe])?o.zimLastObj[Oe]:o[Oe],q[Oe]=e+Number(q[Oe].replace(/\s/g,""))}o.zimLastObj[Oe]=b?o.zimTweenOriginals[Oe]:q[Oe]}for(Oe in D){if("string"==typeof D[Oe]){if("+"==D[Oe].substr(0,1))continue;e=o.zimLastObj&&!zot(o.zimLastObj[Oe])?o.zimLastObj[Oe]:o[Oe],D[Oe]=e+Number(D[Oe].replace(/\s/g,""))}o.zimLastObj[Oe]=b?o.zimTweenOriginals[Oe]:q[Oe]}o.seriesTweens&&(o.seriesTweens[0]=q),Y&&!it&&(q=ce(o,q,D,!0))}function se(e,t){o.zimTween.startPaused=!1,H?zot(o.zimTween.currentTime)||(o.zimTween.currentTime=o.zimTween.currentTime-o.zimTween.position+e*o.zimTween.duration/100):o.zimTween.setPosition(Math.round(e*o.zimTween.duration/100)),t&&ct&&!1!==q.orient&&ct.getCurvePoint&&(o.rotation=ct.getCurvePoint(e/100,null,null,!0).angle+(Gt||0)),Ft&&void 0!==Tt&&(Tt=e),o.handlePath&&o.handlePath()}function ce(e,t,o,n){it=!0,ct&&(!zot(e.percentComplete)||o&&!zot(o.percentComplete))&&(o||(o={}),zot(o.pathRatio)&&(o.pathRatio=zot(o.percentComplete)?e.percentComplete/100:o.percentComplete/100));var r={};for(Oe in t)o&&!zot(o[Oe])?r[Oe]=o[Oe]:r[Oe]=e[Oe],n&&(e[Oe]=t[Oe]);return r}function ue(){if(B&&"function"==typeof B&&B(E),Kt&&"function"==typeof Kt&&Kt($t),v){var t,n=e.Pick.choose(o.futureRate);if(zot(o.futureRate)||(Xe.timeScale=n),zot(lt.scale)||(t=e.Pick.choose(lt.scale)),!Y&&Xe.step&&Xe.step.prev&&Xe.step.prev.props)for(var r in Xe.step.prev.props)if(!(je.indexOf(r)>=0)){var i=e.Pick.choose(lt[r]);"string"==typeof i&&"+"!=i.substr(0,1)&&(i=(o.zimLastObj&&!zot(o.zimLastObj[r])?o.zimLastObj[r]:o[r])+Number(i.replace(/\s/g,""))),o.zimLastObj[r]=b?o.zimTweenOriginals[r]:i,zot(lt[r])||(Xe.step.prev.props[r]=i),"scaleX"!=r||zot(t)||(Xe.step.prev.props.scaleX=t),"scaleY"!=r||zot(t)||(Xe.step.prev.props.scaleY=t)}}}function de(){Jt&&"function"==typeof Jt&&Jt(eo)}function he(e,t){t.zimIdSet=e.zimIdSet,t.zimObj=e.zimObj,t.zimTicker=e.zimTicker,t.zimExtraTickers=e.zimExtraTickers,t.requestID=e.requestID}function ge(e){if(Array.isArray(e)){for(var t=0,o=0,n=e.length;o<n;o++)t+=e[o];return t}}function pe(){if(o.seriesTweens&&o.seriesTweens.shift(),o.seriesCalls&&o.seriesCalls.shift(),o.seriesParams&&o.seriesParams.shift(),o.paused&&"Sprite"!=o.type)l&&"function"==typeof l&&l(s);else{if(O.loop){if(!(Ut>0))return void de();if(Ge<Ut)return de(),void Ge++;b?o.set&&o.set(fe()):o.set&&o.set(q)}G?ye(X):o.pauseAnimate(!0,X),B&&"function"==typeof B&&B(E),l&&"function"==typeof l&&l(s)}}function fe(){var e={};for(var t in q)if(j)zot(D[t])||Y?e[t]=o.style[t]:e[t]=D[t];else if(zot(D[t])||Y)if("."==t.substr(0,1)){for(var n=t.split("."),r=o,i=1;i<n.length;i++)r=r[n[i]];e[t]=r}else e[t]=o[t];else e[t]=D[t];return e}function me(t){if(o.zimBusy){for(var n in t)delete o.zimBusy[n];e.isEmpty(o.zimBusy)&&(o.zimBusy=null)}}function ze(){Xe.zimObj=q,Xe.zimTicker=oo,Xe.zimPaused=To,Re&&(Xe.zimIdSet=Re),We&&(zot(e.idSets)&&(e.idSets={}),zot(e.idSets[We])?e.idSets[We]=[o]:e.idSets[We].indexOf(o)<0&&e.idSets[We].push(o)),e.animatedObjects||(e.animatedObjects=new e.Dictionary(!0)),e.animatedObjects.add(o,!0)}function ye(t){if(o.tweenStates&&o.tweenStates[t]&&delete o.tweenStates[t],!zot(o.zimTweens)&&!zot(o.zimTweens[t])){o.zimX=null,o.zimY=null,me(o.zimTweens[t].zimObj),o.zimTweens[t].paused=!0,ve(t);var n=o.zimTweens[t].zimIdSet;if(!zot(n)&&o.zimIdSets){var r=o.zimIdSets[n];r&&r.splice(r.indexOf(t),1),r&&0==r.length&&(delete o.zimIdSets[n],e.isEmpty(o.zimIdSets)&&delete o.zimIdSets)}if("Pen"==o.type&&o.zimOnPath&&(o.stop(),o.zimOnPath=!1),delete o.zimTweens[t],e.isEmpty(o.zimTweens)&&o.stopAnimate(null,null,null,!1,!0),o.zimTweens&&o.zimTweens[t]||o.zimIdSets&&o.zimIdSets[n||t]);else if(e.idSets&&e.idSets[n||t]){e.idSets[n||t];var i=e.idSets[n||t].indexOf(o);i>=0&&e.idSets[n||t].splice(i,1),e.idSets[n||t].length<=0&&(delete e.idSets[n||t],e.isEmpty(e.idSets)&&delete e.idSets)}}}function ve(t){!function(){var n=o.zimTweens[t].zimTicker;if(o.zimTweens[t].extraTickers)for(var r=0;r<o.zimTweens[t].extraTickers.length;r++)e.Ticker.remove(o.zimTweens[t].extraTickers[r]);o.zimTweens[t].requestID&&cancelAnimationFrame(o.zimTweens[t].requestID),n&&setTimeout(function(){n&&e.Ticker.remove(n),n=null},200)}()}function be(t,n){var r=o.zimTweens[t];r.paused=n,n!=r.zimPaused&&(r.zimPaused=n,n?r.zimTicker&&(r.zimAnimateTimeout=setTimeout(function(){e.Ticker.remove(r.zimTicker)},200)):(r.startPaused=!1,clearTimeout(r.zimAnimateTimeout),r.zimTicker&&(r.zimTicker=e.Ticker.add(r.zimTicker,kt))))}function we(e){for(var t=[],n=0;n<e.length;n++)o.zimIdSets&&!zot(o.zimIdSets[e[n]])?t=t.concat(o.zimIdSets[e[n]]):t.push(e[n]);return t}function Ce(e,t){!0===t?Co.push({outputProp:Le[e]}):Array.isArray(t)?Co.push({outputProp:Le[e],outputMin:t[0],outputMax:t[1],inputMin:t[2],inputMax:t[3]}):Co.push({outputProp:Le[e],outputMax:t})}var xe,ke="target, props, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, cjsProps, css, protect, override, from, set, id, events, sequenceTarget, dynamic, drag, clamp, startPaused, clean, obj, seriesWait, sequenceWait, rate, pauseOnBlur, easeAmount, easeFrequency, timeUnit, timeCheck";if(o&&(o.props||o.obj)&&(xe=zob(e.animate,arguments,ke)))return xe;if("AC"==o.type&&zdf)return zdf.ac("animate",arguments),o;if(e.animateCheck||(z_d("45"),e.animateCheck=!0),o){var Te=e.ANIMATE;if(null!=window.ANIMATE&&(Te=window.ANIMATE),!Te)return o;zot(te)&&(te=!0);var Ae=t(null,ee,null,null,!zot(te)&&!te);g>0&&(h=!0);var Pe=arguments,Se=Array.prototype.slice.call(arguments);if(zot(r)&&!zot(q)&&(r=q),zot(q=r))return zon&&zog("animate() - need props"),o;if("BeadsContainer"==o.type&&zot(S)&&(S=0),zot(Z)&&(Z=!0),"Tone"==o.type&&(Z=!1),Z&&(zot(e.blurCheck)&&e.setBlurDetect(),e.pauseAnimateOnBlur=!0),!zot(S)&&o.addChild);else{i=e.Pick.choose(i),a=e.Pick.choose(a),c=e.Pick.choose(c),g=e.Pick.choose(g),p=e.Pick.choose(p),b=e.Pick.choose(b),w=e.Pick.choose(w),A=zot(A)?i:e.Pick.choose(A),I=e.Pick.choose(I),Y=e.Pick.choose(Y),D=e.Pick.choose(D);var Be=["loopCount","loopWait","rewind","rewindWait"];for(var Ee in O)Be.indexOf(Ee)>=0&&(O[Ee]=e.Pick.choose(O[Ee]))}var Ie={override:!zot(o)&&!zot(o.zimX)&&!zot(q.x)||!zot(o)&&!zot(o.zimY)&&!zot(q.y)};if(zot(h)||(Ie.loop=h),zot(g)||(Ie.count=g),zot(p)||(Ie.loopWait=p),zot(f)||(Ie.loopCall=f),zot(y)||(Ie.loopWaitParams=y),zot(z)||(Ie.loopWaitCall=z),zot(m)||(Ie.loopParams=m),zot(v)||(Ie.loopPick=v),zot(b)||(Ie.rewind=b),zot(w)||(Ie.rewindWait=w),zot(C)||(Ie.rewindCall=C),zot(x)||(Ie.rewindParams=x),zot(k)||(Ie.rewindWaitCall=k),zot(T)||(Ie.rewindWaitParams=T),zot(r)||(Ie=e.merge(Ie,O)),O=Ie,e.loop(q,function(e,t){if("string"==typeof e){var o=e.split(".");if(o.length>1&&"."!=e.substr(0,1)&&(q["."+e]=t,delete q[e],e="."+e),o.length>1&&"string"==typeof t){var n=t.substr(0,1);"+"!=n&&"-"!=n&&(q[e]="+"+t)}}}),o.zimTweenOriginals={},!zot(S)&&o.addChild){for(var Me=[],Oe=0;Oe<o.numChildren;Oe++)Me.push(o.getChildAt(Oe));W=o,o=Me}var je=["extra","zoom","speed","layer","fade"],Le={zoom:"Pen"==o.type?"size":"scale",speed:"percentSpeed",layer:"layer",fade:"alpha"};if(o instanceof Array){for(I&&o.reverse(),Oe=0;Oe<o.length;Oe++){var _e,Ye=o[Oe];if(Y)for(var Ee in Ye.zimObj={},q)_e=je.indexOf(Ee)>=0?q[Ee]:e.Pick.choose(q[Ee]),Ye.zimObj[Ee]=Ye[Ee],"string"==typeof _e&&(_e=(Ye.zimLastObj&&!zot(Ye.zimLastObj[Ee])?Ye.zimLastObj[Ee]:Ye[Ee])+Number(_e.replace(/\s/g,""))),Ye.zimLastObj&&(Ye.zimLastObj[Ee]=b?Ye.zimTweenOriginals[Ee]:q[Ee]),Ye[Ee]=_e;else for(var Ee in Ye.zimObj={},q)je.indexOf(Ee),Ye.zimObj[Ee]=q[Ee];var De=Oe*S;0==Oe&&0!=S&&(De="s"==Ae?.02:20),e.animate(Ye,Ye.zimObj,i,a,Oe==o.length-1?l:null,Oe==o.length-1?s:null,c,u,d,null,null,null,null,null,null,null,v,null,null,null,null,null,null,A,P,null,Oe==o.length-1?B:null,Oe==o.length-1?E:null,null,M,e.copy(O),j,L,_,null,D,X,R,W,H,F,V,N,G,q,Q,De,K,Z,J,$,ee,te)}return W}var Xe,Re,We,He=i,Fe=A;if(zot(He)&&(He="s"==Ae?1:1e3),zot(A)&&(A=Fe=He),zot(a)&&(a="quadInOut"),zot(c)&&(c=0),zot(w)&&(w=0),zot(O)&&(O={override:!zot(o.zimX)&&!zot(q.x)||!zot(o.zimY)&&!zot(q.y)}),zot(s)&&(s=o),zot(M)&&(M=!0),zot(j)&&(j=!1),zot(L)&&(L=!1),zot(Y)&&(Y=!1),zot(D)&&(D={}),D.scale&&(D.scaleX=D.scaleY=D.scale,delete D.scale),zot(_)||(O.override=_),zot(F)&&(F=!1),zot(N)&&(N=!!F),zot(H)&&(H=!1),zot(V)&&(V=!0),zot(G)&&(G=!0),zot(K)&&(K=1),o.futureRate=K,q instanceof Array){var Ve,Ne,Ge=1;if(0==q.length)return this;function qe(){var t;o.zimLastObj&&e.loop(o.zimLastObj,function(e){zot(o.zimTweenOriginals[e])||(o[e]=o.zimTweenOriginals[e],o.zimLastObj[e]=o.zimTweenOriginals[e])});for(var n,r,i=c,a=0,l=0;l<q.length;l++)if(!zot((t=q[l]).target)){zot(t.time)&&(t.time=He),i+=t.wait?t.wait:0,n=t.time,r=zot(t.rewindTime)?n:t.rewindTime,t.rewind&&(n=n+r+(t.rewindWait?t.rewindWait:0)),t.loop&&(n*=t.loopCount,n+=(t.loopCount-1)*(t.loopWait?t.loopWait:0)),zot(t.params)&&(t.params=t.target),Ne=t.target;var s={target:t.target,obj:e.copy(t.obj),seriesWait:a,wait:i,waitedCall:t.waitedCall,waitedParams:t.waitedParams,time:t.time,ease:t.ease,from:t.from,rewind:t.rewind,call:t.call,params:t.params,loop:t.loop,loopCount:t.loopCount,loopWait:t.loopWait,loopCall:t.loopCall,loopParams:t.loopParams,
loopWaitCall:t.loopWaitCall,loopWaitParams:t.loopWaitParams,loopPick:t.loopPick,rewindWait:t.rewindWait,rewindCall:t.rewindCall,rewindParams:t.rewindParams,rewindWaitCall:t.rewindWaitCall,rewindWaitParams:t.rewindWaitParams,rewindTime:t.rewindTime,rewindEase:t.rewindEase,set:e.copy(t.masterSet),events:R,rate:o.futureRate,pauseOnBlur:t.pauseOnBlur,easeAmount:t.easeAmount,easeFrequency:t.easeFrequency,override:!1,id:X};l==q.length-1&&Qe(s),e.animate(s),a+=i+n,i=0}}function Qe(e){var t=e.call,n=e.params;O.loop&&(!O.count||Ge<O.count)?e.call=function(){function e(){for(var e=0;e<Ve.objects.length;e++)Ve.objects[e].set&&Ve.objects[e].set(Ve.values[e]);O.loopWaitCall&&"function"==typeof O.loopWaitCall&&O.loopWaitCall(O.loopWaitParams),qe()}O.loopCall&&"function"==typeof O.loopCall&&O.loopCall(O.loopParams),O.loopWait?(zot(o.zimTweens)&&(o.zimTweens={}),(Xe=o.zimTweens[X]=o.zimTween=createjs.Tween.get(o,{override:O.override}).wait(O.loopWait,!0).call(e)).timeScale=o.futureRate):e()}:e.call=function(){t&&"function"==typeof t&&t(n),zot(s)&&(s=Ne),l&&"function"==typeof l&&l(s),ye(X),o.zimLastObj=null},Ge++}function Ue(){var t,n;o&&!o.seriesTweens&&(o.seriesTweens=[],o.seriesCalls=[],o.seriesParams=[]);for(var r=0;r<q.length;r++)(t=q[r]).target?(t.target.seriesTweens||(t.target.seriesTweens=[]),t.target.seriesCalls||(t.target.seriesCalls=[]),t.target.seriesParams||(t.target.seriesParams=[]),t.target.seriesTweens.push(t.props),t.target.seriesCalls.push(t.call),t.target.seriesParams.push(t.params)):(o.seriesTweens.push(t.props),o.seriesCalls.push(t.call),o.seriesParams.push(t.params));for(o.seriesCalls.push(l),o.seriesParams.push(s),t=q[0],(n=o||t.target).zimSeriesOriginals={},r=q.length-1;r>=0;r--)zot((t=q[r]).props)&&!zot(t.obj)&&(t.props=t.obj),t.obj=t.props,e.loop(t.obj,function(e){n.zimSeriesOriginals[e]="path"==e?q[e]:oe(n,e)});var i=new e.Dictionary;for(Ve=new e.Dictionary,r=0;r<q.length;r++)if(t=q[r],o||(o=t.target),zot(t.target)&&(t.target=o),zot(t.ease)&&(t.ease=a),!zot(t.target)){if(0==r&&(t.target.zimSeriesArgs=Pe),zot(t.props)&&!zot(t.obj)&&(t.props=t.obj),t.obj=t.props,t.loop&&(zot(t.loopCount)||t.loopCount<=0)&&(t.loopCount=0,q.splice(r+1,q.length)),zot(t.obj.scale)||(t.obj.scaleX=t.obj.scaleY=t.obj.scale,delete t.obj.scale),t.from){var c=i.at(t.target);if(c){if(t.set){var u=e.copy(t.obj),d=e.merge(c,t.set);t.obj=ce(t.target,t.obj,d),t.set=e.merge(t.set,u)}else t.set=e.copy(t.obj),t.obj=ce(t.target,t.obj,c);t.from=!1}else i.add(t.target,ce(t.target,t.obj,t.set))}var h={};for(var g in t.obj)h[g]=t.set&&t.set[g]?t.set[g]:t.target[g];zot(Ve.at(t.target))&&Ve.add(t.target,{});var p=e.merge(Ve.at(t.target),h);Ve.remove(t.target),Ve.add(t.target,p),t.masterSet=e.copy(t.set)}zot(o.zimTweens)&&(o.zimTweens={})}return Ue(),ae(),qe(),o}if(q&&(q.x&&(o.zimX=!0),q.y&&(o.zimY=!0)),!zot(q.shape)&&q.shape.type==o.type&&("Blob"==o.type||"Squiggle"==o.type)){var Ke=o.pointObjects,Ze=q.shape.pointObjects;if(Ke.length!=Ze.length)zon&&zogy("animate() - shapes must be of same number of points"),delete q.shape;else{q.shape,delete q.shape;var Je=zot(q.blobShift)?0:q.blobShift;delete q.blobShift;var $e=!0;for(Oe=0;Oe<Ke.length;Oe++){var et=Ke[Oe],tt=Ze[(2e4*Ke.length+Oe+Je)%Ke.length];for(So=0;So<4;So++)if(1!=So){var ot=et[So],nt=(tt[So],e.copy(Se));nt[0]=ot,nt[1]={x:tt[So].x,y:tt[So].y,rotation:tt[So].rotation},$e&&(nt[37]=!0,ot.animateEvent&&ot.off("animation",ot.animateEvent),ot.animateEvent=ot.on("animation",function(){o.update()})),$e=!1,e.animate.apply(e.animate,nt)}}if(e.isEmpty(q))return o}}if(!zot(o)){o.tweenStates||(o.tweenStates={all:!0});var rt,it=!1;if(q.note){if(Array.isArray(q.note))e.loop(q.note,function(t,o){"string"==typeof t&&(q.note[o]=e.Synth.note(t))});else if(q.note.min)q.note.min=e.Synth.note(q.note.min),q.note.max=e.Synth.note(q.note.max);else if(q.note.array)e.loop(q.note.array,function(t,o){"string"==typeof t&&(q.note.array[o]=e.Synth.note(t))});else if("function"==typeof q.note){if(zon)return zog("animate() - use frequency in ZIM VEE functions not note"),o}else q.note=e.Synth.note(q.note);q.frequency=q.note,delete q.note}if("Sprite"!=o.type&&o.hasOwnProperty("paused")||(Object.defineProperty(o,"paused",{get:function(){return o.animatePaused},set:function(e){o.animatePaused=e}}),o.paused=!0),o.endTween=function(t,n){if(o.stopAnimate(n),"all"!=t&&"main"!=t&&"none"!=t&&(t="all"),o.seriesTweens){if(e.loop(o.seriesTweens,function(n,r){e.loop(n,function(e){"string"==typeof n[e]&&(n[e]=o[e]+Number(n[e].replace(/\s/g,""))),ne(o,e,n[e])}),"all"==t&&o.seriesCalls[r]&&o.seriesCalls[r](o.seriesParams[r])}),"none"!=t){var r=o.seriesCalls[o.seriesCalls.length-1];r&&r(o.seriesParams[o.seriesParams.length-1])}o.seriesTweens=null,o.seriesCalls=null,o.seriesParams=null}else e.loop(o.zimLastObj,function(e){"string"==typeof o.zimLastObj[e]&&(o.zimLastObj[e]=o[e]+Number(o.zimLastObj[e].replace(/\s/g,""))),ne(o,e,o.zimLastObj[e])}),"none"!=t&&l&&l(s);return o.stage&&o.stage.update(),o},effectCheck=!1,e.loop(q,function(e,t){o.zimTweenOriginals[e]="path"==e?q[e]:oe(o,e),e.match("hue")?(q.hueBatch=t,delete q.hue,effectCheck=!0):e.match("saturation")?(q.saturationBatch=t,delete q.saturation,effectCheck=!0):e.match("brightness")?(q.brightnessBatch=t,delete q.brightness,effectCheck=!0):e.match("contrast")?(q.contrastBatch=t,delete q.contrast,effectCheck=!0):e.match(/^.effects/)&&(effectCheck=!0)}),o.resetTween=function(t){zot(t)&&(t=!0),o.pauseAnimate();var n=o.zimSeriesOriginals?o.zimSeriesOriginals:o.zimTweenOriginals;return e.loop(n,function(e){var t;"path"==e?(o.percentComplete=0,o.zimPath=n[e],o.zimStartPercent,t=o.zimPath.getCurvePoint(o.zimStartPercent/100),o.loc(t.x,t.y)):ne(o,e,n[e])}),o.zimLastObj=null,o.stage&&o.stage.update(),o.stopAnimate(),o.zimPath&&(Se[1].path=o.zimPath),zot(o.zimStartRotation)||(o.rotation=o.zimStartRotation),o.zimStartRotation=null,zot(o.zimStartScaleX)||(o.scaleX=o.zimStartScaleX),o.zimStartScaleX=null,zot(o.zimStartScaleY)||(o.scaleY=o.zimStartScaleY),o.zimStartScaleY=null,e.animate.apply(null,o.zimSeriesArgs?o.zimSeriesArgs:Se),o.pauseAnimate(t),o},o.replayTween=function(){return o.resetTween(!1),o},(q.path||H)&&(o.requestedPercentComplete?rt=o.requestedPercentComplete:o.percentComplete&&!re(o,"percentComplete")&&(rt=o.percentComplete),o.requestedPercentComplete=null,zot(rt)&&(rt=0),o.pathRatio=0,o.zimStartRotation=o.rotation),j&&(M=!1),zot(o.zimTweens)&&(o.zimTweens={}),j||(o.stage?kt=o.stage:zdf?kt=zdf.stage:j=!0),o.setColorRange&&!zot(q.color)){var at=q.color;delete q.color,q.colorRange=1,o.setColorRange(o.color,at),o.colorRange=0}var lt={};for(var Oe in q)je.indexOf(Oe)>=0||(lt[Oe]=e.copy(q[Oe]),q[Oe]=e.Pick.choose(q[Oe]));for(var st in zot(q.scale)||(q.scaleX=q.scaleY=e.Pick.choose(q.scale),delete q.scale),q){if(!o.zimBusy)break;o.zimBusy[st]&&delete q[st]}if(!e.isEmpty(q)){for(Oe in"Sprite"!=o.type&&(o.paused=!1),(L||O.loop||O.rewind)&&ie(),ae(),je.shift(),D)D[Oe]=e.Pick.choose(D[Oe]);for(Oe in O)"waitedCall"!=Oe&&"waitedParams"!=Oe&&"loopCall"!=Oe&&"rewindCall"!=Oe&&"loopWaitCall"!=Oe&&"rewindWaitCall"!=Oe&&(O[Oe]=e.Pick.choose(O[Oe]));var ct;if(o.getBounds&&zot(o.percentCompleteCheck)&&(o.percentCompleteCheck=!0,Object.defineProperty(o,"percentComplete",{get:function(){return this.zimTween&&this.zimTween.duration?this.zimTween.position/this.zimTween.duration*100:0},set:function(e){this.zimTween?(Ft=!0,se(e,!0)):this.requestedPercentComplete=e}}),Object.defineProperty(o,"percentCompleteNoAngle",{get:function(){return this.zimTween&&this.zimTween.duration?this.zimTween.position/this.zimTween.duration*100:0},set:function(e){this.zimTween?se(e,!1):this.requestedPercentComplete=e}})),Object.defineProperty(o,"rate",{get:function(){return o.futureRate},set:function(t){o.futureRate=t,e.loop(o.zimTweens,function(e,o){o.timeScale=t})},configurable:!0}),!zot(q.path)&&q.path.segmentPoints){if(zot(q.orient)&&(q.orient=!0),q.orient&&zot(q.flip)&&(q.flip=!0),"Pen"==o.type&&(o.infinite=!0),o.zimOnPath=!0,zot(o.pathRatio)&&(o.pathRatio=0),q.orient&&(q.orient=q.path,q.startOrient=q.rotation),ct=q.path,F){if(delete q.path,delete q.percent,!zon||zot(o.startPercent)&&zot(o.percent)||zog("ZIM.animate() - percentStart and percent currently not supported with drag on path"),xt=ct.getCurvePoint(o.pathRatio,wt,It)){xt.z;var ut=o.parent.globalToLocal(xt.x,xt.y);o.x=ut.x,o.y=ut.y}}else zot(o.startPercent)&&(o.startPercent=e.Pick.choose(zot(q.startPercent)?0:q.startPercent)),zot(o.percent)&&(o.percent=e.Pick.choose(zot(q.percent)?100:q.percent)),delete q.path,delete q.percent;var dt=!ct.lockControls;delete q.path,q.pathRatio=1}o.percentComplete;var ht,gt,pt,ft,mt,zt=!0,yt=!1,vt=!0,bt=!0;if(zot(q.redirect)||(bt=q.redirect,delete q.redirect),ct){var wt;dt||(It=e.copy(ct.segmentPoints),wt=e.copy(ct.segmentRatios)),o.currentPercent=o.startPercent+o.percent*o.pathRatio;var Ct=(1e6+o.currentPercent)%100/100,xt=ct.getCurvePoint(Ct,wt,It);if(o.parent&&xt&&(ut=o.parent.globalToLocal(xt.x,xt.y),o.x=ut.x,o.y=ut.y),F){a="linear",o.cursor="pointer";var kt,Tt=o.percentComplete,At=!1,Pt=(N||o.paused,!0),St=!0,Bt=Tt,Et=10,It=e.copy(ct.segmentPoints),Mt=0;e.loop(It,function(t){Mt+=e.distanceAlongCurve(t)});var Ot=Math.round(Mt/It.length/Et),jt=ct.interpolate(Ot,null,!0,null,!0),Lt=(Tt||0)/100*Mt,_t=Lt;ct.zimAnimateChanged=!1,e.copy(ct.segmentRatios),o.zimAnimatePathChange=ct.on("change",function(){ct.zimAnimateChanged=!0}),o.zimAnimatePathDown=ct.on("mousedown",function(){At=!0,1==o.paused&&(yt=!0)}),o.zimAnimatePathUp=ct.on("pressup",function(){yt=!1}),o.zimAnimateDragDown=o.on("mousedown",function(t){(kt=t.target.stage).mouseMoveOutside=!0,zt=!1,vt=!0,setTimeout(function(){zt=!0},50),yt=!0,ct.zimAnimateChanged&&(It=e.copy(ct.segmentPoints),Mt=0,e.loop(It,function(t){Mt+=e.distanceAlongCurve(t)}),Ot=Math.round(Mt/It.length/Et),jt=ct.interpolate(Ot,null,!0,null,!0),e.copy(ct.segmentRatios)),ct.zimAnimateChanged=!1,Tt=o.percentComplete,Xt.immediate(Tt);var n=Tt;b&&(n=Xe.position>Xe.duration/2?2*(100-Tt):2*Tt),_t=Lt=(n||0)/100*Mt});var Yt=!1;function Dt(t){var o=ct.globalToLocal(t.rawX/e.scaX,t.rawY/e.scaY),n=Lt;"Blob"==ct.type&&(Ht[0]<Ht[4]?St=!0:Ht[0]>Ht[4]&&(St=!1),n<10&&!St?(_t=Lt=n=Mt-5,Xt.immediate(_t/Mt*100),Ht=[Mt-1,Mt-2,Mt,Mt-3,Mt-4]):n>Mt-10&&St&&(_t=Lt=n=5,Xt.immediate(_t/Mt*100),Ht=[0,0,0,0,0]));var r={x:o.x,y:o.y,r:n};jt.sort(function(e,t){var o={x:e.x,y:e.y,r:e.r*Mt},n={x:t.x,y:t.y,r:t.r*Mt};return Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2)+Math.pow(r.r-o.r,2))-Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2)+Math.pow(r.r-n.r,2))}),_t=jt[0].r*Mt,Tt=_t/Mt*100,Tt=e.constrain(Tt,0,99.95),b&&(Tt/=2,Xe.position>Xe.duration/2&&(Tt=100-Tt))}o.zimAnimateDragPress=o.on("pressmove",function(e){Yt=!0,Dt(e)}),o.animateReturn=function(){b?(Pt=!1,St=!1,o.percentComplete<50&&(o.percentComplete=100-o.percentComplete),o.pauseAnimate(!1)):zon&&zogy("animate() - animateReturn() needs rewind set to true")},o.zimAnimateDragUp=o.on("pressup",function(){0==o.paused&&(yt=!1),zt=!1,setTimeout(function(){zt=!0},50),Ht[0]<Ht[4]?St=!0:Ht[0]>Ht[4]&&(St=!1),!o.paused&&b&&bt&&St!=Pt&&(o.percentComplete=100-o.percentComplete,Pt=St)});var Xt=new e.Damp(Tt,.15),Rt=0,Wt=0,Ht=[0,0,0,0,0],Ft=!1;o.zimDragAnimateTicker=e.Ticker.add(function(){if(F)if(++Wt%20&&(Ht.push(_t),Ht.shift()),Lt=_t,At&&(Tt=o.percentComplete),yt||vt&&1==o.paused){if(At||Ft||"Blob"==ct.type&&Math.abs(Rt-Tt)>(b?45:90)){At=!1;var e=Tt;Xt.immediate(e),Ft=!1}else e=Xt.convert(Tt);Math.abs(Rt-e)>.1?(o.percentCompleteNoAngle=e,Rt=e):(o.percentCompleteNoAngle=e,vt=!1,Yt=!1)}else vt=!1},kt)}}if(q.orient){if(!0===q.orient){var Vt=o.parent.localToGlobal(zot(q.x)?o.x:q.x,zot(q.y)?o.y:q.y);q.orient={x:Vt.x,y:Vt.y}}ht=q.orient,delete q.orient;var Nt,Gt=o.rotation;o.rotation=ct.getPointAngle(0)+Gt,ht!=ct&&(Nt=ht.parent?ht.parent.localToLocal(ht.x,ht.y,o.parent):o.parent.globalToLocal(ht.x,ht.y),o.rotation=e.angle(o.x,o.y,Nt.x,Nt.y)+Gt)}q.flip&&(gt=q.flip,delete q.flip,pt=o.scaleX),q.flipVertical&&(ft=q.flipVertical,delete q.flipVertical,mt=o.scaleY);var qt=o.x,Qt=o.y,Ut=0;O.loop&&!zot(O.count)&&(Ut=O.count,delete O.count,Ge=1);var Kt,Zt=0;O.loopWait&&(Zt=O.loopWait,p=O.loopWait,delete O.loopWait),O.loopCall&&(Kt=O.loopCall,delete O.loopCall);var Jt,$t=o;O.loopParams&&($t=O.loopParams,delete O.loopParams),TIMECHECK&&te&&(He&&n(He,Ae),Fe&&n(Fe,Ae),c&&n(c,Ae),uo&&n(uo,Ae),Zt&&n(Zt,Ae),p&&n(p,Ae),O.rewindWait&&n(O.rewindWait,Ae),Q&&n(Q,Ae),U&&n(U,Ae)),"s"==Ae&&(He&&(He*=1e3),Fe&&(Fe*=1e3),c&&(c*=1e3),uo&&(uo*=1e3),Zt&&(Zt*=1e3),p&&(p*=1e3),O.rewindWait&&(O.rewindWait*=1e3),Q&&(Q*=1e3),U&&(U*=1e3)),O.loopWaitCall&&(Jt=O.loopWaitCall,delete O.loopWaitCall);var eo=o;if(O.loopWaitParams&&(eo=O.loopWaitParams,delete O.loopWaitParams),O.rewind&&(a&&-1==(to=a).indexOf("InOut")&&(-1!=to.indexOf("Out")?to=to.replace("Out","In"):-1!=to.indexOf("In")&&(to=to.replace("In","Out"))),P))var to=P;var oo,no="get"+a.charAt(0).toUpperCase()+a.slice(1),ro=zik(J),io=zik($);if(zot(ro)&&zot(io)||!createjs.Ease[no])ao=createjs.Ease[a];else{!zot(io)&&zot(ro)&&(ro=1),!zot(ro)&&zot(io)&&(io=.3*1.5);var ao=createjs.Ease[no](ro,io)}if(to)if(no="get"+to.charAt(0).toUpperCase()+to.slice(1),ro=zik(J),io=zik($),zot(ro)&&zot(io)||!createjs.Ease[no])lo=createjs.Ease[to];else{!zot(io)&&zot(ro)&&(ro=1),!zot(ro)&&zot(io)&&(io=.3*1.5);var lo=createjs.Ease[no](ro,io)}if(O.rewind){var so,co,uo=0;if(delete O.rewind,b=!0,w=O.rewindWait,O.rewindWait&&(uo=O.rewindWait,delete O.rewindWait),O.rewindCall){so=O.rewindCall;var ho=O.rewindParams;zot(ho)&&(ho=o),delete O.rewindCall,delete O.rewindParams}function go(){so&&"function"==typeof so&&so(ho)}if(O.rewindWaitCall){co=O.rewindWaitCall;var po=O.rewindWaitParams;zot(po)&&(po=o),delete O.rewindWaitCall,delete O.rewindWaitParams}function fo(){co&&"function"==typeof co&&co(po)}function mo(e){le(),(Xe=o.zimTweens[X]=o.zimTween=createjs.Tween.get(o,{override:O.override}).wait(c,!0).call(function(){u&&"function"==typeof u&&u(zot(d)?o:d),c=0,zo(Xe)})).timeScale=o.futureRate,e&&he(e,Xe)}function zo(e){var t=fe();o.set&&!Y&&o.set(D),(Xe=o.zimTweens[X]=o.zimTween=createjs.Tween.get(o,O).to(q,He,ao).call(fo).wait(uo,!0).call(go).to(t,Fe,lo).call(pe).wait(Zt,!0).call(ue)).timeScale=o.futureRate,e&&he(e,Xe),ze()}Q>0||U>0||c>0?Q>0||U>0?(Xe=o.zimTweens[X]=o.zimTween=createjs.Tween.get(o,{override:O.override}).wait(Q>0?Q:0,!0).wait(U>0?U:0,!0).call(function(){U=Q=0,mo(Xe)})).timeScale=o.futureRate:mo():(le(),zo())}else{function yo(e){le(),(Xe=o.zimTweens[X]=o.zimTween=createjs.Tween.get(o,{override:O.override}).wait(c,!0).call(function(){c=0,u&&"function"==typeof u&&u(zot(d)?o:d),vo(Xe)})).timeScale=o.futureRate,e&&he(e,Xe)}function vo(e){o.set&&!Y&&o.set(D),(Xe=o.zimTweens[X]=o.zimTween=createjs.Tween.get(o,O).to(q,He,ao).call(pe).wait(Zt,!0).call(ue)).timeScale=o.futureRate,e&&he(e,Xe),ze()}Q>0||U>0||c>0?Q>0||U>0?(Xe=o.zimTweens[X]=o.zimTween=createjs.Tween.get(o,{override:O.override}).wait(Q>0?Q:0,!0).wait(U>0?U:0,!0).call(function(){U=Q=0,yo(Xe)})).timeScale=o.futureRate:yo():(le(),vo())}Xe.startPaused=N,Xe.rewinding=!1,zot(K)||(Xe.timeScale=e.Pick.choose(K)),!j&&M&&(rt&&(o.pathRatio=o.percentComplete&&100!=Math.round(o.percentComplete)?o.percentComplete/100:0,o.percentCompleteNoAngle=100!=Math.round(rt)?rt:0),oo=R&&!zot(W)&&W.dispatchEvent?e.Ticker.add(function(){effectCheck&&o.updateEffects(),(ct||ht||gt||ft)&&wo(),W.dispatchEvent("animation")},kt):R&&o.dispatchEvent?e.Ticker.add(function(){effectCheck&&o.updateEffects(),(ct||ht||gt||ft)&&wo(),o.dispatchEvent("animation")},kt):e.Ticker.add(function(){effectCheck&&o.updateEffects(),(ct||ht||gt||ft)&&wo()},kt));var bo=[1,1,1],wo=function(){if(o.parent&&!Xe.passive&&!Xe.startPaused){if(F&&b&&(Bt<50&&o.percentComplete>50||Bt>50&&o.percentComplete<50)&&(Pt=o.percentComplete<50),Bt=o.percentComplete,ct){if(dt&&(It=ct.segmentPoints,wt=ct.segmentRatios),F)var t=ct.getCurvePoint(o.pathRatio,wt,It);else{o.currentPercent=o.startPercent+o.percent*o.pathRatio;var n=(1e6+o.currentPercent)%100/100;1==o.pathRatio&&(n+=o.percent>0?1:0),t=ct.getCurvePoint(n,wt,It)}if(t){t.z;var r=o.parent.globalToLocal(t.x,t.y);o.x=r.x,o.y=r.y}}var i,a,l=90==Gt||270==Gt||-90==Gt;if(gt&&zt&&(qt>o.x&&e.sign(l?o.scaleY:o.scaleX)==e.sign(pt)&&(l?o.scaleY*=-1:o.scaleX*=-1),qt<o.x&&e.sign(l?o.scaleY:o.scaleX)!=e.sign(pt)&&(l?o.scaleY*=-1:o.scaleX*=-1)),ft&&zt&&(Qt>o.y&&e.sign(l?o.scaleX:o.scaleY)==e.sign(mt)&&(l?o.scaleX*=-1:o.scaleY*=-1),Qt<o.y&&e.sign(l?o.scaleX:o.scaleY)!=e.sign(mt)&&(l?o.scaleX*=-1:o.scaleY*=-1)),ht&&(ct==ht?i=e.angle(qt,Qt,o.x,o.y)+Gt:(a=ht.parent?ht.parent.localToLocal(ht.x,ht.y,o.parent):o.parent.globalToLocal(ht.x,ht.y),i=e.angle(o.x,o.y,a.x,a.y)+Gt),0!=i&&(!o.paused||Yt))){gt&&qt-o.x>0&&(i+=180);var s=i;!gt&&qt-o.x>0&&(s=i-180),o.rotation=s==Gt?o.rotation:s}if(F){var c=o.x-qt+o.y-Qt;Math.abs(c)>2&&(bo.push(e.sign(c)),bo.shift(),Xe.forward=ge(bo))}qt=o.x,Qt=o.y}};ct&&(o.handlePath=wo),zot(o.zimMaskDynamic)||o.zimMaskApply();var Co,xo,ko,To=!1;for(ze(),o.stopAnimate&&o.stopAnimate.real||(o.stopAnimate=function(t,n,r,i,a){if(!a||!F){if(zot(t)&&(o.tweenStates={}),n)return o.endTween(null,t),o;if(zot(i)&&(i=!0),o.pan==undefined&&(o.paused=!0),"Pen"==o.type&&o.zimOnPath&&(o.stop(),o.zimOnPath=!1),zot(r)&&(r=!0),i&&F&&(ct&&ct.off("change",o.zimAnimatePathChange),o.off("mousedown",o.zimAnimateDragDown),o.off("pressmove",o.zimAnimateDragPress),o.off("pressup",o.zimAnimateDragUp),e.Ticker.remove(o.zimDragAnimateTicker)),zot(t)){if(!r)return o;for(var l in o.zimBusy=null,createjs.Tween.removeTweens(o),o.zimTweens)ve(l);o.zimTweens=null,o.zimIdSets=null,o.zimTween=null,e.idSets&&e.idSets[Re||l]&&(delete e.idSets[Re||l],e.isEmpty(e.idSets)&&delete e.idSets),e.animatedObjects.remove(o)}else{Array.isArray(t)||(t=[t]);var s=we(t);for(var l in o.zimTweens)o.zimTweens[l].requestID&&cancelAnimationFrame(o.zimTweens[l].requestID),r&&s.indexOf(l)>=0&&ye(l,i),!r&&s.indexOf(l)<0&&ye(l,i)}return o}o.pauseAnimate()},o.stopAnimate.real=!0,o.pauseAnimate=function(e,t,n,r){if("pauseOnBlur"==t?t=null:zot(t)&&(o.tweenStates={all:!1===e}),"Pen"==o.type&&(!1===e?o.zimOnPath&&(o.infinite=!0):o.stop()),xo&&!r)return o.pause(e,t),o;if(zot(e)&&(e=!0),yt=!1,o.paused=e,zot(n)&&(n=!0),zot(t)&&!n)return o;if(zot(t))for(var i in o.zimTweens)be(i,e);else{Array.isArray(t)||(t=[t]);var a=we(t);for(var i in o.zimTweens)n&&a.indexOf(i)>=0&&(be(i,e),o.tweenStates[i]=!e),!n&&a.indexOf(i)<0&&(be(i,e),o.tweenStates[i]=!e)}return"Sprite"==o.type&&(o.running||o.stop()),o}),N&&o.pauseAnimate(!0,X,null,!0),q.extra&&(Co=q.extra,delete q.extra,Array.isArray(Co)||(Co=[Co])),Oe=0;Oe<je.length;Oe++){var Ao=je[Oe];q[Ao]&&(zot(Co)&&(Co=[]),Ce(Ao,q[Ao]),delete q[Ao])}if(Co)for(o.zimStartScaleX=o.scaleX,o.zimStartScaleY=o.scaleY,Xe.extraTickers=[],Oe=0;Oe<Co.length;Oe++){var Po=Co[Oe];for(var So in zot(Po.inputObj)&&(Po.inputObj=o),zot(Po.inputProp)&&(Po.inputProp="y"),zot(Po.inputMin)&&(Po.inputMin=0),zot(Po.inputMax)&&(Po.inputMax="x"==Po.inputProp?kt.width:kt.height),zot(Po.outputObj)&&(Po.outputObj=o),zot(Po.outputProp)&&(Po.outputProp="scale"),zot(Po.outputMin)&&(Po.outputMin=0),zot(Po.outputMax)&&(Po.outputMax=Po.outputMin+1),zot(Po.constrain)&&(Po.constrain=!0),Po)q[So]=e.Pick.choose(q[So]);"percentSpeed"==Po.outputProp&&(H=!0),ko=new e.Proportion(Po.inputMin,Po.inputMax,Po.outputMin,Po.outputMax,Po.factor,Po.outputRound);var Bo=function(){var t=Po,o=ko;return function(){var n,r=t.outputObj,i=t.inputObj[t.inputProp];if("x"!=t.inputProp&&"y"!=t.inputProp||t.inputObj.parent&&(i=t.inputObj.parent.localToGlobal(i,i)[t.inputProp]),n=t.constrain?e.constrain(o.convert(i),t.outputMin,t.outputMax):o.convert(i),Number.isNaN(n)&&(n=null!=t.outputMin?t.outputMin:0),"scale"==t.outputProp)r.scaleX=e.sign(r.scaleX)*n,r.scaleY=e.sign(r.scaleY)*n;else if("scaleX"==t.outputProp)r.scaleX=e.sign(r.scaleX)*n;else if("scaleY"==t.outputProp)r.scaleY=e.sign(r.scaleY)*n;else if("layer"==t.outputProp){if(!r.parent)return;var a=e.constrain(Math.round(n),0,r.parent.numChildren-1);a!=r.parent.getChildIndex(r)&&r.parent.setChildIndex(r,a)}else"percentSpeed"==t.outputProp?r[t.outputProp]=100*n:r[t.outputProp]=n}}();Bo(),Xe.extraTickers.push(e.Ticker.add(Bo,kt))}if(H||o.zimAnimateDragDown){var Eo;if(H){xo=!0,o.pauseAnimate(!0,X,null,!0),o.paused=!1,Xe.currentTime=0;var Io=Xe;zot(o.percentSpeed)&&(o.percentSpeed=Xe.startPaused?0:100);var Mo=1e3/60;Xe.currentTime=0;var Oo=!U&&!Q&&!c&&!Ut&&O.loop;V&&O.loop&&!Ut&&(V=!1);var jo=i+(b?A||i:0)+(w||0)+(p||0);jo*="s"==Ae?1e3:1;var Lo,_o=1;function Yo(){if(Xe.requestID=requestAnimationFrame(Yo),H&&(!Xe.startPaused||0!=o.percentSpeed)){Xe.startPaused=!1,Xe!=Io&&(Io=Xe,Xe.currentTime=0,o.pauseAnimate(!0,X,null,!0),o.paused=!1,Oo=!U&&!Q&&!c&&!Ut&&O.loop),Oo&&(Xe.currentTime+=1e4*jo,Xe.setPosition(Xe.currentTime,!0),Oo=!1);var t=Xe.currentTime+Mo*o.percentSpeed/100;Lo&&0==c&&(t=e.constrain(t,0,Lo)),Xe.currentTime=t,Xe.setPosition(Xe.currentTime),(ct||ht||gt||ft)&&wo(),kt.update()}}O.loop&&Ut&&(_o=Ut),V&&(Lo=jo*_o),Yo()}o.pause=function(t,n){if(zot(t)&&(t=!0),zot(n)&&(n=0),t){if(o.zimAnimateDragDown&&(F=!1,o.cursor="default",ct&&ct.off("change",o.zimAnimatePathChange),o.off("mousedown",o.zimAnimateDragDown),o.off("pressmove",o.zimAnimateDragPress),o.off("pressup",o.zimAnimateDragUp),!H))return;Eo=o.percentSpeed,n>0?e.animate({target:o,props:{percentSpeed:0},override:!1,ticker:!1,time:n,call:function(){o.percentSpeed=0,o.paused=!0,H=!1,o.dispatchEvent("pause")}}):(Xe.startPaused=!1,o.percentSpeed=0,o.paused=!0,H=!1,setTimeout(function(){o.dispatchEvent("pause")},10))}else{if(o.zimAnimateDragDown&&(F=!0,o.cursor="pointer",ct&&(o.zimAnimatePathChange=ct.on("change",o.zimAnimatePathChange)),o.zimAnimateDragDown=o.on("mousedown",o.zimAnimateDragDown),o.zimAnimateDragPress=o.on("pressmove",o.zimAnimateDragPress),o.zimAnimateDragUp=o.on("pressup",o.zimAnimateDragUp),!H))return;yt=!1,Xe.currentTime=Xe.position,n>0?e.animate({target:o,props:{percentSpeed:Eo},override:!1,ticker:!1,time:n,call:function(){o.percentSpeed=Eo,o.paused=!1,H=!0}}):(o.percentSpeed=Eo,o.paused=!1,H=!0)}return o}}return o}}}},e.stopAnimate=function(t,o){if(z_d("45.12"),zot(t)){if(e.animatedObjects)for(var n=e.animatedObjects.length-1;n>=0;n--)e.animatedObjects.objects[n].stopAnimate(null,o)}else if(Array.isArray(t)||(t=[t]),e.idSets)for(var r=0;r<t.length;r++){var i=t[r];if(e.idSets[i])for(n=e.idSets[i].length-1;n>=0;n--)e.idSets[i][n].stopAnimate(i,o)}},e.stopZimAnimate=function(t){z_d("45.1"),e.stopAnimate(t)},e.pauseAnimate=function(t,o){if(z_d("45.22"),zot(t)&&(t=!0),zot(o)||"pauseOnBlur"==o){if(e.animatedObjects)for(var n=e.animatedObjects.length-1;n>=0;n--)e.animatedObjects.objects[n].pauseAnimate(t,o)}else if(Array.isArray(o)||(o=[o]),e.idSets)for(var r=0;r<o.length;r++){var i=o[r];if(e.idSets[i])for(n=e.idSets[i].length-1;n>=0;n--)e.idSets[i][n].pauseAnimate(t,i)}},e.pauseZimAnimate=function(t,o){z_d("45.2"),e.pauseAnimate(t,o)},e.wiggle=function(o,r,i,a,l,s,c,u,d,h,g,p,f,m,z){function y(){var t=e.rand(e.Pick.choose(s),e.Pick.choose(c),!1),n={},u={};if(u[r]=e.Pick.choose(i),"negative"==d||0==x&&"negative"==f)var m=-e.rand(e.Pick.choose(a),e.Pick.choose(l),g);else m="positive"==d||0==x&&"positive"==f?e.rand(e.Pick.choose(a),e.Pick.choose(l),g):0==x?e.rand(e.Pick.choose(a),e.Pick.choose(l),g,!0):e.rand(e.Pick.choose(a),e.Pick.choose(l),g)*e.sign(C)*-1;n[r]=e.Pick.choose(i)+m,0==x&&(t/=2),C=m,x++,"negative"==d||"positive"==d?e.animate({target:o,obj:n,set:u,ease:h,time:2*t,wait:zik(z),rewind:!0,override:!1,call:y,id:p,ticker:!!o.stage,timeCheck:!1}):e.animate({target:o,obj:n,ease:h,time:t,wait:zik(z),override:!1,call:y,id:p,ticker:!!o.stage,timeCheck:!1})}var v,b="target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, totalTime, type, ease, integer, id, startType, ticker, wait";if(v=zob(e.wiggle,arguments,b))return v;if(z_d("45.25"),zot(o)||zot(i)||zot(a))return o;zot(l)&&(l=a);var w=t(s,null,40);zot(s)&&(s="s"==w?1:1e3),zot(c)&&(c=s),n(c,w,40),zot(h)&&(h="quadInOut"),zot(g)&&(g=!1),zot(p)&&(p=e.makeID()),zot(d)&&(d="both"),zot(f)&&(f="both"),zot(m)&&(m=!0),zot(z)&&(z=0),n(u,w,40),zot(u)||(o.wiggleTimeout=setTimeout(function(){o.stopAnimate(p),o.dispatchEvent("wigglestop")},u*("s"==w?1e3:1)));var C,x=0;return y(),o},e.loop=function(t,o,n,r,i,a){function l(e){return zot(i)&&(i=n?e:0),zot(a)&&(a=n?0:e),n&&a>i||!n&&i>a?0:(i<0&&a)<0||i>e&&a>e?0:(i=Math.max(0,Math.min(i,e)),a=Math.max(0,Math.min(a,e)),Math.floor((n?i-a:a-i)/r)+1)}var s,c="obj, call, reverse, step, start, end";if(s=zob(e.loop,arguments,c))return s;if(e.zimLoopCheck||z_d("45.3"),e.zimLoopCheck=!0,zot(t)||zot(o))return undefined;zot(n)&&(n=!1),(zot(r)||r<=0)&&(r=1);var u="number"==typeof t?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":t instanceof NodeList?"nodelist":"string"==typeof t?"string":t instanceof HTMLCollection?"htmlcollection":"invalid";if("container"==u&&!t.addChild)return undefined;if("number"==u||"string"==u||"array"==u||"nodelist"==u||"htmlcollection"==u){if(0==(g=l((p="number"==u?t:t.length)-1)))return;if(n)for(var d=i;d>=a;d-=r){if("number"==u)var h=o(d,g,i,a,t);else h=o("array"==u||"string"==u?t[d]:t.item(d),d,g,i,a,t);if(void 0!==h)return h}else for(d=i;d<=a;d+=r)if(void 0!==(h="number"==u?o(d,g,i,a,t):o("array"==u||"string"==u?t[d]:t.item(d),d,g,i,a,t)))return h;return!0}if("object"==u){var g,p=0,f=[];for(var d in t)p++,f.push(d);if(0==(g=l(p-1)))return;if(n){for(d=i;d>=a;d-=r)if(void 0!==(h=o(f[d],t[f[d]],d,g,i,a,t)))return h}else for(d=i;d<=a;d+=r)if(void 0!==(h=o(f[d],t[f[d]],d,g,i,a,t)))return h;return!0}if(0!=(g=l(t.numChildren-1))){if(n){for(d=i;d>=a;d-=r)if(void 0!==(h=o(t.getChildAt(d),d,g,i,a,t)))return h}else for(d=i;d<=a;d+=r)if(void 0!==(h=o(t.getChildAt(d),d,g,i,a,t)))return h;return!0}},e.scaleTo=function(t,o,n,r,i,a){var l,s="obj, boundObj, percentX, percentY, type, boundsOnly";if(l=zob(e.scaleTo,arguments,s))return l;if("AC"==t.type&&zdf)return zdf.ac("scaleTo",arguments),t;if(z_d("43"),zot(t)||!t.getBounds||!t.getBounds())return zog("zim methods - scaleTo(): please provide an object (with setBounds) to scale"),t;if(zot(o)||!o.getBounds||!o.getBounds())return zog("zim methods - scaleTo(): please provide a boundObject (with setBounds) to scale to"),t;zot(n)&&(n=-1),zot(r)&&(r=-1),-1==n&&-1==r&&(n=r=100),zot(i)&&(i="smallest"),zot(a)&&(a=!1);var c=o.getBounds().width*n/100*(a?1:o.scaleX),u=o.getBounds().height*r/100*(a?1:o.scaleY);if("Stage"!=o.type&&"StageGL"!=o.type||(c=o.width*n/100,u=o.height*r/100),(-1==n||-1==r)&&"both"!=i&&"stretch"!=i)return-1==n?e.sca(t,u/t.getBounds().height):e.sca(t,c/t.getBounds().width),t;if("both"==i||"stretch"==i)return t.scaleX=-1!=n?c/t.getBounds().width:t.scaleX,t.scaleY=-1!=r?u/t.getBounds().height:t.scaleY,t;if("biggest"==i||"largest"==i||"outside"==i)var d=Math.max(c/t.getBounds().width,u/t.getBounds().height);else d=Math.min(c/t.getBounds().width,u/t.getBounds().height);return e.sca(t,d),t},e.fit=function(t,o,n,r,i,a){var l,s="obj, left, top, width, height, inside";if(l=zob(e.fit,arguments,s))return l;if("AC"==t.type&&zdf)return zdf.ac("fit",arguments),t;if(z_d("46"),!zot(t)&&t.getBounds){if(t.getBounds()){if(zot(o)){if(!t.stage)return void zog("zim methods - fit(): please add boundary dimensions or add obj to stage first");if(!t.stage.getBounds())return void zog("zim methods - fit(): please add boundary dimensions or add obj with bounds to stage first");o=0,n=0,r=t.stage.getBounds().width,i=t.stage.getBounds().height}zot(a)&&(a=!0),t.scaleX=t.scaleY=1;var c,u=r,d=i,h=t.getBounds().width,g=t.getBounds().height;c=a?u/d>=h/g?d/g:u/h:u/d>=h/g?u/h:d/g,t.scaleX=t.scaleY=c;var p=h*c,f=g*c;return t.x=(t.regX-t.getBounds().x)*c+o+(u-p)/2,t.y=(t.regY-t.getBounds().y)*c+n+(d-f)/2,{x:t.x,y:t.y,width:p,height:f,scale:c,bX:o,bY:n,bWidth:r,bHeight:i}}zog("zim methods - fit(): please setBounds() on object")}},e.boundsCheck=!1,e.boundsToGlobal=function(t,o,n){if(e.boundsCheck||(z_d("40"),e.boundsCheck=!0),!zot(t)&&t.getBounds){zot(n)&&(n=!1);var r=t.getBounds();if(r||!zot(o)){if(o&&(r=o),n)var i=t.globalToLocal(r.x,r.y),a=t.globalToLocal(r.x+r.width,r.y),l=t.globalToLocal(r.x+r.width,r.y+r.height),s=t.globalToLocal(r.x,r.y+r.height);else i=t.localToGlobal(r.x,r.y),a=t.localToGlobal(r.x+r.width,r.y),l=t.localToGlobal(r.x+r.width,r.y+r.height),s=t.localToGlobal(r.x,r.y+r.height);var c=Math.min(i.x,a.x,l.x,s.x),u=Math.min(i.y,a.y,l.y,s.y),d=Math.max(i.x,a.x,l.x,s.x),h=Math.max(i.y,a.y,l.y,s.y);return new createjs.Rectangle(c,u,d-c,h-u)}zog("zim methods - boundsToGlobal():\n please setBounds() on object (or a rectangle)")}},e.resetBounds=function(e,t,o,n,r){if(z_d("40.5"),zot(n))i=0,a=t,l=0,s=o;else var i=t,a=n,l=o,s=r;return zot(s)&&(s=a),zot(t)?e.setBounds(null):e.setBounds(i,l,a,s),e},e.copyMatrix=function(e,t){return z_d("45.5"),e.x=t.x,e.y=t.y,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.regX=t.regX,e.regY=t.regY,e.rotation=t.rotation,e.skewX=t.skewX,e.skewY=t.skewY,e},e.duplicate=function(e,t){z_d("45.6");var o=e.clone(t);for(var n in e)if(e.hasOwnProperty(n)&&null==o[n]){if("parent"==n)continue;o[n]=e[n]}return o},e.expand=function(t,o,n,r,i){var a,l="padding, paddingVertical, paddingRight, paddingBottom";if(a=zob(e.expand,arguments,l))return a;if(z_d("50"),zot(t)||!t.getBounds||!t.getBounds())return zog("zim methods - expand(): please provide object with bounds set"),t;if(zot(o)&&(o=20),zot(n)&&(n=o),zot(r)&&zot(i))s=r=o,c=i=n;else{zot(r)&&(r=o),zot(i)&&(i=n);var s=o,c=n}var u=t.getBounds(),d=new createjs.Shape;return d.graphics.f("0").r(u.x-s,u.y-c,u.width+s+r,u.height+c+i),t.hitArea=d,t},e.setSwipe=function(e,t){function o(t){for(var n,r=t.numChildren,i=0;i<r;i++)(n=t.getChildAt(i)).zimNoSwipe=e.zimNoSwipe,n instanceof createjs.Container&&o(n)}if(z_d("34"),!zot(e)&&e.on)return e.zimNoSwipe=!t||null,e instanceof createjs.Container&&o(e),e},e.setMask=function(t,o,n){function r(){t.zimMask&&t.zimMask.parent&&t.zimMask.parent.removeChild(t.zimMask),t.zimMask=null,t.zimMaskTicker&&e.Ticker.remove(t.zimMaskTicker),t.mask=null}function i(){if(n&&(!l||!o.stage))return t;if(a&&a.dispose&&a.dispose(),a=null,t.zimMask=o.zimMask=a=o.shape.clone(),e.copyMatrix(a,o),o.addChildAt(a,0),a.alpha=0,t.parent){var r=o.getConcatenatedMatrix().decompose(),i=t.parent.getConcatenatedMatrix().decompose();a.scaleX=r.scaleX/i.scaleX,a.scaleY=r.scaleY/i.scaleY,a.rotation=(r.rotation?r.rotation:0)-(i.rotation?i.rotation:0);var s=o.localToLocal(o.shape.x+o.regX,o.shape.y+o.regY,t.parent);a.x=s.x,a.y=s.y,t.mask=a}else t.mask=a}if(z_d("50.1"),zot(t)&&zog("zim methods - setMask(): please provide obj"),zot(o))return r(),t;var a,l=t.stage||(zdf?zdf.stage:null);return t.zimMaskOriginal&&t.zimMaskOriginal!=o&&r(),zot(n)&&(n=!("Blob"!=o.type&&zot(o.zimDown)&&zot(o.transformControls)&&zot(o.zimTouch)&&zot(o.zimTweens)),o.zimMaskDynamic=n),t.zimMaskOriginal=o,o.zimMaskApply=function(){t.zimMaskTicker&&e.Ticker.remove(t.zimMaskTicker),t.zimMaskTicker=e.Ticker.add(i)},o&&o.shape?(i(),n&&o.zimMaskApply()):(a=o,t.mask=a),t},e.outline=function(t,o,n,r){var i,a="obj, color, size, boundsOnly";if(i=zob(e.outline,arguments,a))return i;if(z_d("47"),t.type&&"zimOultineShape"==t.type)return zon&&zogy("zim.outline() - warning, you are trying to outline an outline - do not outline in a loop"),t;if(zot(t)||!t.getBounds)return zog("zim methods - outline(): please provide object with bounds set"),t;if(!t.getBounds())return zog("zim methods - outline(): please setBounds() on object"),t;if(!t.parent)return zog("zim methods - outline(): object should be on stage first"),t;if(zot(o)&&(o="brown"),zot(n)&&(n=2),n<=0)return t.ZIMoutlineShape&&t.ZIMoutlineShape.parent.removeChild(t.ZIMoutlineShape),t.ZIMoutlineShapeC&&t.ZIMoutlineShapeC.parent.removeChild(t.ZIMoutlineShapeC),void(t.ZIMoutlineShape=t.ZIMoutlineShapeC=null);var l=t.getBounds(),s=t.ZIMoutlineShape=t.ZIMoutlineShape?t.ZIMoutlineShape:new e.Shape;s.type="zimOutlineShape";var c=t.ZIMoutlineShapeC=t.ZIMoutlineShapeC?t.ZIMoutlineShapeC:new e.Shape;c.type="zimOutlineShape";var u=t.parent;t.outlineToggled=!0,t.outlineToggle=function(e){return!0===e?(t.ZIMoutlineShape.visible=!0,t.ZIMoutlineShapeC.visible=!0):!1===e?(t.ZIMoutlineShape.visible=!1,t.ZIMoutlineShapeC.visible=!1):(t.ZIMoutlineShape.visible=!t.ZIMoutlineShape.visible,t.ZIMoutlineShapeC.visible=!t.ZIMoutlineShapeC.visible),t.outlineToggled=t.ZIMoutlineShape.visible,t};var d=t.localToLocal(l.x,l.y,u),h=t.localToLocal(l.x+l.width,l.y,u),g=t.localToLocal(l.x+l.width,l.y+l.height,u),p=t.localToLocal(l.x,l.y+l.height,u),f=t.localToLocal(0,0,u),m=s.graphics.c(),z=c.graphics.c();if(m.s(o).ss(n).mt(d.x,d.y).lt(h.x,h.y).lt(g.x,g.y).lt(p.x,p.y).lt(d.x,d.y).cp(),!r){var y=10,v=y+1;z.s("white").ss(n+2),z.mt(-v,0).lt(v,0),z.mt(0,-v).lt(0,v),z.s(o).ss(n),z.mt(-y,0).lt(y,0),z.mt(0,-y).lt(0,y),z.cp(),c.x=f.x,c.y=f.y,c.rotation=t.rotation,m.s("white").ss(n+2).dc(t.x,t.y,y+6),
m.s(o).ss(n).dc(t.x,t.y,y+6)}t.parent.removeChild(s),t.parent.removeChild(c);var b=t.parent.getChildIndex(t);return t.parent.addChildAt(c,b+1),t.parent.addChildAt(s,b+1),s.mouseEnabled=!1,c.mouseEnabled=!1,t},e.STYLE=null,e.ignore="ignore",e.getStyle=function(t,o,n){e.STYLECHECK||(z_d("50.34"),e.STYLECHECK=!0);var r=["pos","addTo","center","centerReg","mov","drag","transform","gesture","outline","bounds","animate","wiggle","cache"],i=e.STYLE;for(var a in typeof STYLE!=typeof undefined&&(i=STYLE),STYLE){var l=STYLE[a];a.match(/^[(A-Z)]/)&&(STYLE.type||(STYLE.type={}),STYLE.type[a]?STYLE.type[a]=e.merge(STYLE.type[a],l):STYLE.type[a]=l,delete STYLE[a])}if(i=zot(i)?{}:e.copy(i),zot(n))n={};else for(var s=0;s<r.length;s++)delete n[r[s]];var c=n,u=i.type;if(u&&delete i.type,!zot(o)&&!zot(i.group)){var d=o.split(","),h={};for(s=0;s<d.length;s++){var g=d[s].trim();zot(i.group[g])||(h=e.merge(h,i.group[g]))}delete i.group}for(var p in zot(t)||zot(u)||zot(u[t])||(i=e.merge(i,u[t])),zot(o)||zot(h)||(i=e.merge(i,h)),i)c[p]?delete i[p]:"ignore"!=(l=-1!=r.indexOf(p)||i.delayPick?i[p]:e.Pick.choose(i[p]))?(l&&l.constructor==={}.constructor&&(l=e.copy(l,!0,!1)),i[p]=l):delete i[p];return!1===(i=e.merge(i,c)).style?{}:i},e.styleTransforms=function(t,o){var n=["visible","x","y","scale","scaleX","scaleY","rotation","alpha","skewX","skewY","regX","regY"];if(o){o.add&&t.addTo(),o.addTo&&t.addTo(!0===o.addTo?null:o.addTo),o.center&&t.center(!0===o.center?null:o.center),o.centerReg&&t.centerReg(!0===o.centerReg?null:o.centerReg);for(var r=0;r<n.length;r++)null!=o[n[r]]&&(t[n[r]]=e.Pick.choose(o[n[r]]));if(o.bounds&&o.bounds.constructor==={}.constructor&&t.setBounds(o.bounds.x?o.bounds.x:0,o.bounds.y?o.bounds.y:0,o.bounds.width?o.bounds.width:100,o.bounds.height?o.bounds.height:100),null!=o.x&&(o.loc?null==o.loc.x&&(o.loc.x=o.x):o.loc={x:o.x}),null!=o.y&&(o.loc?null==o.loc.y&&(o.loc.y=o.y):o.loc={y:o.y}),o.loc&&(o.loc.constructor==={}.constructor?t.loc(e.Pick.choose(o.loc.x),e.Pick.choose(o.loc.y)):t.loc(e.Pick.choose(o.loc))),o.pos)if(o.pos.constructor==={}.constructor)t.pos(e.Pick.choose(o.pos.x),e.Pick.choose(o.pos.y),e.Pick.choose(o.pos.right),e.Pick.choose(o.pos.bottom),e.Pick.choose(o.pos.container),e.Pick.choose(o.pos.index),o.pos.add,e.Pick.choose(o.pos.reg),e.Pick.choose(o.pos.regX),e.Pick.choose(o.pos.regY));else{var i=e.Pick.choose(o.pos);"left"!=i&&"top"!=i||t.pos(),"right"==i&&t.pos({right:!0}),"bottom"==i&&t.pos({bottom:!0}),"rightbottom"!=i&&"bottomright"!=i||t.pos({right:!0,bottom:!0}),"center"==i&&t.center()}if((o.mov||o.move)&&(o.move&&(o.mov=o.move),o.mov.constructor==={}.constructor?t.mov(e.Pick.choose(o.mov.x),e.Pick.choose(o.mov.y)):t.mov(e.Pick.choose(o.mov))),o.outline&&setTimeout(function(){t.outline(o.outline.constructor==={}.constructor?o.outline:null),t.stage&&t.stage.update()},20),o.drag&&t.drag(o.drag.constructor==={}.constructor?o.drag:{currentTarget:!0}),o.gesture&&t.gesture(o.gesture.constructor==={}.constructor?o.gesture:null),o.transform&&setTimeout(function(){t.transform(o.transform.constructor==={}.constructor?o.transform:null)},20),o.animate)for(Array.isArray(o.animate)||(o.animate=[o.animate]),r=0;r<o.animate.length;r++)!function(){var e=o.animate[r];e.constructor==={}.constructor&&setTimeout(function(){t.animate(e)},20)}();if(o.wiggle)for(Array.isArray(o.wiggle)||(o.wiggle=[o.wiggle]),r=0;r<o.wiggle.length;r++)!function(){var e=o.wiggle[r];e.constructor==={}.constructor&&setTimeout(function(){t.wiggle(e)},20)}();o.expand&&t.expand(!0===o.expand?null:o.expand),o.cache&&(o.cache.constructor==={}.constructor?o.cache.x?t.cache(e.Pick.choose(o.cache.x),e.Pick.choose(o.cache.y),e.Pick.choose(o.cache.x),e.Pick.choose(o.cache.y)):t.cache(e.Pick.choose(o.cache.width),e.Pick.choose(o.cache.height)):t.cache())}},e.Style={remembered:{},clear:function(){return STYLE={},e.Style},clearTypes:function(){return delete(STYLE={}).types,e.Style},clearGroups:function(){return delete(STYLE={}).groups,e.Style},remember:function(t){return STYLE||(STYLE={}),zot(t)&&(t="default"),e.Style.remembered[t]=e.copy(STYLE,!0),e.Style},clearRemembered:function(t){return zot(t)?e.Style.remembered={}:delete e.Style.remembered[t],e.Style},recall:function(t){return zot(t)&&(t="default"),STYLE=e.Style.remembered[t],e.Style},add:function(t){return STYLE||(STYLE={}),STYLE=e.merge(STYLE,t),e.Style},addType:function(t,o){return STYLE||(STYLE={}),STYLE.type||(STYLE.type={}),STYLE.type[t]=o,e.Style},addGroup:function(t,o){return STYLE||(STYLE={}),STYLE.group||(STYLE.group={}),STYLE.group[t]=o,e.Style},remove:function(t){return STYLE||(STYLE={}),delete STYLE[t],e.Style},removeType:function(t){return STYLE||(STYLE={}),STYLE.type?(delete STYLE.type[t],e.Style):e.Style},removeGroup:function(t){return STYLE||(STYLE={}),STYLE.group?(delete STYLE.group[t],e.Style):e.Style}},e.TIME="seconds",e.TIMECHECK=!0,e.ANIMATE=!0,e.OPTIMIZE=!1,e.ACTIONEVENT="mousedown",e.DEFAULTWIRE="currentValue",e.KEYFOCUS=null,e.POSREG=!1,e.DRAGALL=!1,e.MOBILE="default",e.Ticker={stages:null,myUpdate:null,alwaysList:new e.Dictionary,list:new e.Dictionary,wire:new e.Dictionary,setFPS:function(t,o){zot(t)&&zot(o)?(t=30,o=60):zot(t)?t=30:zot(o)&&(o=t),e.Ticker.framerate=createjs.Ticker.framerate=e.mobile()?t:o},setTimingMode:function(e){createjs.Ticker.timingMode=createjs.Ticker.RAF,"synched"==e&&(createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED),"timeout"==e&&(createjs.Ticker.timingMode=createjs.Ticker.TIMEOUT)},add:function(t,o){z_d("30");var n=e.Ticker;return n.has(t,o)?t:(!zot(o)&&o.update||(o=zdf.stage),zot(t)||"function"!=typeof t?void zog("zim.Ticker.add() - only add functions"):(n.list.at(o)?n.list.at(o).push(t):n.list.add(o,[t]),n.ticker||(n.ticker=createjs.Ticker.on("tick",n.call)),n.framerate||n.setFPS(),t))},addWire:function(t,o){if(z_d("30"),zot(o[0]))return t;var n=e.Ticker;n.wire.add(t,o);var r=o[0][o[1]];return o[4]&&(r=o[4](r,"from")),o[3]&&(t[o[6]]=o[7]=r),n.ticker||(n.ticker=createjs.Ticker.on("tick",n.call)),n.framerate||n.setFPS(),t},rawID:{},raw:function(t){z_d("30");var o=e.makeID(7,"letters");return function n(r){t(r),e.Ticker.rawID[o]=requestAnimationFrame(n)}(),o},removeRaw:function(t){cancelAnimationFrame(e.Ticker.rawID[t]),delete e.Ticker.rawID[t]},call:function(t){for(var o,n,r=e.Ticker,i=[],a=0;a<r.list.length;a++){o=r.list.objects[a],n=r.list.values[a];for(var l=0;l<n.length;l++)n[l](t);var s=!1;r.alwaysList.at(o)?s=!0:n.length>0&&(!zot(r.update)||e.OPTIMIZE||!zns&&OPTIMIZE?r.update&&(s=!0):s=!0),s&&i.indexOf(o)<0&&i.push(o)}for(a=r.wire.length-1;a>=0;a--){var c=r.wire.objects[a],u=r.wire.values[a];if(u){var d=c[u[6]];d!=u[7]&&(u[4]&&(d=u[4](d,"to",u[7])),u[0][u[1]]=u[7]=d,u[5]&&u[5](d),(o=u[0].stage)&&i.indexOf(o)<0&&i.push(o)),u[2]&&u[0]&&(d=u[0][u[1]],u[7]!=d&&(u[4]&&(d=u[4](d,"from",u[7])),c[u[6]]=u[7]=d,u[5]&&u[5](d),(o=c.stage)&&i.indexOf(o)<0&&i.push(o)))}}if(0==r.list.length)for(a=0;a<r.alwaysList.length;a++)o=r.alwaysList.objects[a],i.indexOf(o)<0&&i.push(o);var h=i.length;for(a=0;a<h;a++)i[a].update()},always:function(t){z_d("30");var o=e.Ticker;o.framerate||o.setFPS(),!zot(t)&&t.update||(t=zdf.stage),o.alwaysList.add(t,!0),o.ticker||(o.ticker=createjs.Ticker.on("tick",o.call))},alwaysOff:function(t){var o=e.Ticker;!zot(t)&&t.update||(t=zdf.stage),o.alwaysList.remove(t)},remove:function(t){var o=e.Ticker;if(zot(t)||"function"!=typeof t)zog("zim.Ticker - only remove functions");else{for(var n=0;n<o.list.length;n++){o.list.objects[n];var r=o.list.values[n].indexOf(t);r>-1&&o.list.values[n].splice(r,1),o.list.values[n].length}o.alwaysList.length>0||o.list.length>0||o.wire.length>0||(createjs.Ticker.off("tick",o.ticker),o.ticker=null)}},removeAll:function(t){for(var o,n=e.Ticker,r=0;r<n.list.length;r++)o=n.list.objects[r],(zot(t)||t===o)&&(n.list.values[r]=[]),n.list.values[r].length;n.alwaysList.length>0||n.list.length>0||n.wire.length>0||(createjs.Ticker.off("tick",n.ticker),n.ticker=null)},removeWire:function(t,o,n,r){var i=e.Ticker;if(zot(t)&&zot(o)&&zot(n)&&zot(r))i.wire.clear();else for(var a=i.wire.length-1;a>=0;a--){var l=i.wire.objects[a],s=i.wire.values[a];s&&(t&&l!=t||o&&s[0]!=o||n&&s[1]!=n||r&&s[6]!=r||(i.wire.objects.splice(a,1),i.wire.values.splice(a,1)))}i.alwaysList.length>0||i.list.length>0||i.wire.length>0||(createjs.Ticker.off("tick",i.ticker),i.ticker=null)},has:function(t,o){return!zot(o)&&o.update||(o=zdf.stage),e.Ticker.list&&e.Ticker.list.at(o)&&e.Ticker.list.at(o).indexOf(t)>=0},dispose:function(t){for(var o,n=e.Ticker,r=0,i=n.list.length-1;i>=0;i--)o=n.list.objects[i],zot(t)||t===o?(n.list.remove(t),n.alwaysList.remove(t)):r+=n.list.values[i].length;if(!(n.alwaysList.length>0))return 0==r&&(createjs.Ticker.off("tick",n.ticker),n.ticker=null),!0}},e.Ticker.setFPS(),Object.defineProperty(e.Ticker,"update",{get:function(){return e.Ticker.myUpdate},set:function(t){var o=e.Ticker;"boolean"!=typeof t&&(t=null),o.myUpdate=t,!1===o.myUpdate&&(cancelAnimationFrame(o.ticker),o.alwaysList=new e.Dictionary)}}),e.Pages=function(o,n,r,i,a,l,s,c,u){function d(){(b=new createjs.Shape).graphics.f("black").r(0,0,C,x+1),(w=new createjs.Shape).graphics.f("white").r(0,0,C,x+1)}function h(t,o){t.zimHTMLList=new e.Dictionary,p(t),t.zimSwipeArray=o||[],t.zimOriginalAlpha=t.alpha,t.parent&&t.parent.removeChild(k.page)}function g(e){if(!zot(e))for(var t=0;t<e.zimHTMLList.length;t++)e.addChildAt(e.zimHTMLList.values[t].obj,e.zimHTMLList.values[t].depth)}function p(e){e.zimHTMLList.clear();for(var t=0;t<e.numChildren;t++)if("TextArea"==(n=e.getChildAt(t)).type||"Loader"==n.type||"Tag"==n.type){var o={obj:n,depth:e.getChildIndex(n)};e.zimHTMLList.add(n,o)}for(t=e.numChildren-1;t>=0;t--){var n;"TextArea"!=(n=e.getChildAt(t)).type&&"Loader"!=n.type&&"Tag"!=n.type||e.removeChild(n)}}var f,m="pages, transition, speed, transitionTable, holder, arrowDisableColor, style, group, inherit";if(f=zob(e.Pages,arguments,m,this))return f;z_d("71"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pages",this.group=c;var z=!1===s?{}:e.getStyle(this.type,this.group,u),y=t(r);if(zot(o)&&(o=null!=z.pages?z.pages:[]),this.pages=o,zot(n)&&(n=null!=z.transition?z.transition:"none"),zot(r)&&(r=null!=z.speed?z.speed:"s"==y?.2:200),zot(i)&&(i=null!=z.transitionTable?z.transitionTable:[]),this.transitionTable=i,zot(l)&&(l=null!=z.arrowDisableColor?z.arrowDisableColor:e.grey),this.arrowDisableColor=l,zot(a)&&(a=null!=z.holder?z.holder:null),zot(a)&&zdf&&(a=zdf.stage),a.getBounds&&a.getBounds()){this.speed=r,this.active=!0;var v=this;v.transitioning=!1;var b,w,C=a.getBounds().width,x=a.getBounds().height;"none"==n&&i==[]||d();for(var k,T,A=["left","right","up","down"],P=!0,S=0;S<o.length;S++)(k=o[S]).constructor!={}.constructor&&(k=o[S]={page:o[S]}),k.swipe&&(P=!1);for(S=0;S<o.length;S++){if((k=o[S]).constructor!=={}.constructor&&(k=o[S]={page:o[S]}),P){var B=o[S-1],E=o[S+1];k.swipe=[B?B.page:null,E?E.page:null]}h(k.page,k.swipe)}var I,M=this.page=o[0]?o[0].page:null;zot(this.page)||(this.index=0),this.addChild(M),g(M),this.swipe=new e.Swipe(a);var O=!1,j=this.swipe.on("swipe",function(e){if(v.active){var t=e.currentTarget.direction;if("none"!=t){var o="";"left"==t?o="right":"right"==t?o="left":"up"==t?o="down":"down"==t&&(o="up"),t=o;var n=A.indexOf(t);T=M.zimSwipeArray[n],I=[T,t,null,null,!0],v.page=M,v.nextPage=T,v.direction=t,v.dispatchEvent("swipe"),setTimeout(function(){O||v.go(T,t,null,null,!0)},50)}}});this.addPage=function(e,t){h(e,t),v.pages.push({page:e}),M?e.parent&&e.parent.removeChild(e):(M=v.page=e,v.addChild(M))},this.removePage=function(t){p(t),v.currentPage==t&&(v.removeChild(t),a.stage&&a.stage.update()),e.loop(v.pages,function(e,o){e.page!=t&&e!=t||v.pages.splice(o,1)},!0),t.zimSwipeArray=null},this.setSwipeArray=function(e,t){zot(t)&&(t=[]);var o={page:e,swipe:t};o.page.zimSwipeArray=o.swipe?o.swipe:[]},this.pause=function(){O=!0},this.unpause=function(){O&&v.go(I[0],I[1],I[2],I[3],I[4])};var L=!0;this.go=function(t,r,i,l,s){if("number"==typeof t){var c=v.pages[t];if(zot(c))return;t=c.page}setTimeout(function(){O=!1},200);for(var u=[{x:C},{x:-C},{y:x},{y:-x}],d=[{x:0},{x:0},{y:0},{y:0}],h=[{x:C/2,alpha:0},{x:-C/2,alpha:0},{y:x/2,alpha:0},{y:-x/2,alpha:0}],f=n,m=v.speed,z=0;z<v.transitionTable.length;z++)if(v.transitionTable[z][0]==M&&v.transitionTable[z][1]==t){f=v.transitionTable[z][2],zot(v.transitionTable[z][3])||(m=v.transitionTable[z][3]);break}if(zot(i)&&(i=f),zot(l)&&(l=m),v.speed=l,v.direction=r,""==t||null==t)v.page=M,v.dispatchEvent("nothing");else if("string"==typeof t)v.page=M,v.dispatchEvent(t);else{if(t==M)return;zot(r)&&(r="right");var y,k=A.indexOf(r);if(!L)return;function T(e){e[0].uncache(),e[1].uncache(),v.transitioning=!1,v.dispatchEvent("pagetransitioned"),v.removeChild(v.lastPage),"fan"==i&&("right"==r||"down"==r?(v.lastPage.rotation=0,v.lastPage.regY=0,v.lastPage.mov(0,-v.lastPage.height)):(v.page.rotation=0,v.page.regY=0,v.page.mov(0,-v.lastPage.height))),v.removeChild(b),v.removeChild(w),g(M),L=!0}function P(t){v.removeChild(v.lastPage),e.animate(t.shift(),{alpha:0},v.speed/2,null,T,t)}if(L=!1,t.x=0,t.y=0,t.alpha=t.zimOriginalAlpha,["pixelDark","pixelLight","pixelZIM","bubbleDark","bubbleLight","bubbleZIM","lineDark","lineLight","lineZIM"].indexOf(i)>=0){var S=i;y=!0,i="slide"}if(["explodeDark","explodeLight","explodeZIM"].indexOf(i)>=0){var B=i;y=!0,i="fade"}if("Emitter"==i.type&&(y=i,i=i.horizontal||i.vertical?"slide":"fade"),v.transitioning=!0,"slide"==i?(t.x=-(0|u[k].x),t.y=-(0|u[k].y),t.cache(0,0,(C+1)/t.scaleX,(x+1)/t.scaleY),M.cache(0,0,(C+1)/M.scaleX,(x+1)/M.scaleY),v.addChild(t),v.addChild(M),e.animate(M,u[k],v.speed,null,T,[M,t]),e.animate(t,d[k],v.speed)):"reveal"==i?(t.cache(0,0,(C+1)/t.scaleX,(x+1)/t.scaleY),M.cache(0,0,(C+1)/M.scaleX,(x+1)/M.scaleY),v.addChild(t),v.addChild(M),e.animate(M,h[k],v.speed,null,T,[M,t])):"fade"==i?(t.cache(0,0,(C+1)/t.scaleX,(x+1)/t.scaleY),M.cache(0,0,(C+1)/M.scaleX,(x+1)/M.scaleY),t.alpha=1,v.addChild(t),v.addChild(M),e.animate(M,{alpha:0},v.speed,null,T,[M,t])):"black"==i?(t.cache(0,0,(C+1)/t.scaleX,(x+1)/t.scaleY),M.cache(0,0,(C+1)/M.scaleX,(x+1)/M.scaleY),t.alpha=1,v.addChild(t),v.addChild(M),b.alpha=0,v.addChild(b),e.animate(b,{alpha:1},v.speed/2,null,P,[b,M,t])):"clear"==i?(t.cache(0,0,(C+1)/t.scaleX,(x+1)/t.scaleY),M.cache(0,0,(C+1)/M.scaleX,(x+1)/M.scaleY),t.alpha=0,v.addChild(t),v.addChild(M),e.animate(M,{alpha:0},v.speed/2),e.animate(t,{alpha:1},v.speed/2,null,T,[M,t],v.speed/2)):"white"==i?(t.cache(0,0,(C+1)/t.scaleX,(x+1)/t.scaleY),M.cache(0,0,(C+1)/M.scaleX,(x+1)/M.scaleY),t.alpha=1,v.addChild(t),v.addChild(M),w.alpha=0,v.addChild(w),e.animate(w,{alpha:1},v.speed/2,null,P,[w,M,t])):"fan"==i?(t.cache(0,0,(C+1)/t.scaleX,(x+1)/t.scaleY),M.cache(0,0,(C+1)/M.scaleX,(x+1)/M.scaleY),t.alpha=1,"right"==r||"down"==r?(v.addChild(t),v.addChild(M),M.regY=M.height,M.mov(0,M.height),e.animate(M,{rotation:-90},v.speed,null,T,[M,t])):(v.addChild(M),v.addChild(t),t.regY=M.height,t.mov(0,M.height),t.rotation=-90,e.animate(t,{rotation:0},v.speed,null,T,[M,t]))):(v.transitioning=!1,v.addChild(t),v.removeChild(M),L=!0),y){var E,I,j=k<2;if(S||"slide"==i){S?("lineDark"==S||"lineLight"==S?E=new e.Rectangle(j?30:C+5,j?x+5:30,"lineDark"==S?e.dark:e.white).alp(.2):"lineZIM"==S?E=new e.Rectangle(j?50:C+5,j?x+5:50,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.5):"pixelDark"==S||"pixelLight"==S?E=new e.Rectangle(40,40,e.clear,"pixelDark"==S?e.dark:e.white,2).alp(.7):"pixelZIM"==S?E=new e.Rectangle(40,40,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.7):"bubbleDark"==S||"bubbleLight"==S?E=new e.Circle(30,e.clear,"bubbleDark"==S?e.dark:e.white,2).alp(.7):"bubbleZIM"==S&&(E=new e.Circle(30,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.7)),E.centerReg({add:!1}),I="lineDark"==S||"lineLight"==S||"lineZIM"==S?new e.Emitter({obj:E,life:.5,decayTime:.5,shrink:!1,force:0,gravity:0,width:0,startPaused:!0}):new e.Emitter({obj:E,num:6,life:.5,decayTime:.5,width:j?0:C,height:j?x:0,vertical:j,horizontal:!j,startPaused:!0})):I=y;var _=[{x:0,y:x/2},{x:C,y:x/2},{x:C/2,y:0},{x:C/2,y:x}],Y=[{x:C,y:x/2},{x:0,y:x/2},{x:C/2,y:x},{x:C/2,y:0}];I.centerReg(a).spurt(null,v.speed),I.x=_[k].x,I.y=_[k].y,e.animate(I,Y[k],v.speed,null,function(){S&&I.dispose()})}else(B||"fade"==i)&&(B?("explodeDark"==B||"explodeLight"==B?E=new e.Circle(150,"explodeDark"==B?e.dark:e.white).alp(.5):"explodeZIM"==B&&(E=new e.Circle(130,[e.green,e.yellow,e.orange,e.pink,e.blue]).alp(.7)),I=new e.Emitter({obj:E,num:5,gravity:0,force:{min:20,max:40},life:.5,shrink:!1,decayTime:.5,startPaused:!0})):I=y,I.centerReg(a).spurt(null,.35*v.speed),I.on("fizzed",function(){B&&I.dispose()}))}for(p(M),v.lastPage=M,v.page=t,v.index=-1,z=0;z<v.pages.length;z++)v.pages[z].page==v.page&&(v.index=z);"none"==i&&g(t),zot(s)&&(s=!1),v.fromSwipe=s,v.dispatchEvent("page"),M=t,v.setArrows(o.index),a.stage&&a.stage.update()}},this.resize=function(){C=a.getBounds().width,x=a.getBounds().height,"none"==n&&i==[]||d()},this.puff=function(e){for(var t=0;t<o.length;t++)v.addChild(o[t].page);v.addChild(M),e>0&&setTimeout(function(){v.settle()},e*("s"==y?1e3:1))},this.settle=function(){v.removeAllChildren(),v.addChild(M),v.dispatchEvent("puffed")},this.disable=function(){v.active=!1},this.enable=function(){v.active=!0},this.arrows={},this.setArrows=function(){if(!e.isEmpty(v.arrows)){var t=v.pages[v.index];if(t&&t.swipe){var o=t.swipe,n=[LEFT,RIGHT,DOWN,UP];e.loop(n,function(t,n){o[n]?e.loop(v.arrows[t],function(e){if(!0===e.setDisabled)return e.activate(!1,v.arrowDisableColor),void(e.setDisabled=null);e.enabled||e.activate(!0,e.arrowBackgroundColor)}):e.loop(v.arrows[t],function(e){if(!1===e.setDisabled)return e.activate(!0,e.arrowBackgroundColor),void(e.setDisabled=null);e.enabled&&e.activate(!1,v.arrowDisableColor)})}),v.stage&&v.stage.update()}}},!1!==s&&e.styleTransforms(this,z),this.dispose=function(e,t,o){return v.swipe.off("swipe",j),v.swipe.dispose(),o||this.zimContainer_dispose(!0),!0}}else zog("zim controls - Pages():\nholder object must have bounds set")},e.extend(e.Pages,e.Container,["clone","dispose"],"zimContainer",!1),e.Arrow=function(t,o,n,r,i,a,l,s,c,u,d){function h(){var e=n.pages[n.index];if(e&&e.swipe){var t=e.swipe;return"left"==r?t[0]:"right"==r?t[1]:"up"==r?t[2]:"down"==r?t[3]:void 0}}var g,p="backgroundColor, rollBackgroundColor, pages, direction, type, newPage, trans, speed, style, group, inherit";if(g=zob(e.Arrow,arguments,p,this))return g;z_d("71.2"),this.group=u;var f,m,z,y=!1===c?{}:e.getStyle("Arrow",this.group,d);if(zot(r)&&(r=null!=y.direction?y.direction:"right"),zot(t)&&(t=null!=y.backgroundColor?y.backgroundColor:e.blue),this.arrowBackgroundColor=t,zot(o)&&(o=null!=y.rollBackgroundColor?y.rollBackgroundColor:e.blue.lighten(.2)),zot(i)&&(i=null!=y.type?y.type:"triangle"),zot(a)&&(a=null!=y.newPage?y.newPage:null),zot(l)&&(l=null!=y.trans?y.trans:null),zot(s)&&(s=null!=y.speed?y.speed:null),"triangle"==i)f=new e.Triangle(45,45,45,t,null,null,null,-7).rot(90),m=new e.Triangle(45,45,45,o,null,null,null,-7).rot(90);else if("thick"==i){f=new e.Shape,z=f.graphics.f(t).command;var v="AhFBdIiWAAIAAi4ICWAAIAAh7IEhDWIkhDXg";f.p(v).reg(-4),m=(new e.Shape).f(o).p(v).reg(-4)}else"thin"==i?(f=new e.Shape,z=f.graphics.f(t).command,v="AhBCIIBZhbIjWAAIAAhVIDaAAIhdhfIA9g+IDDDFIAAAAIAAAAIjDDGg",f.p(v).reg(-4),m=(new e.Shape).f(o).p(v).reg(-4)):"angle"==i&&(f=new e.Shape,z=f.graphics.f(t).command,v="AiNC5IC4i5Ii4i5IAxgxIDqDqIjqDrg",f.p(v).reg(-3),m=(new e.Shape).f(o).p(v).reg(-3));if(this.zimButton_constructor(50,50,"",clear,clear,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,f,m),this.type="Arrow",!zot(n)&&"Pages"==n.type){var b=(zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",w=this;zot(n.arrows)&&(n.arrows={}),zot(n.arrows[r])&&(n.arrows[r]=[]),n.arrows[r].push(this),this.activate=function(t,o){zot(t)&&(t=!0),zot(o)&&(o=e.grey()),!1!==o&&(t?(w.enabled=!0,!1!==o&&("triangle"==i?w.icon.color=w.arrowBackgroundColor:z.style=w.arrowBackgroundColor)):(w.enabled=!1,!1!==o&&("triangle"==i?w.icon.color=o:z.style=o)))},h()||this.activate(!1,n.arrowDisableColor),this.expand(),this.on(b,function(){if(!n.transitioning){var e=h();e&&n.go(e,r,l,s)}}),!1!==c&&e.styleTransforms(this,y),this.clone=function(){return w.cloneProps(new e.Arrow(t,o,n,r,i,a,l,s,c,this.group,d))}}},e.extend(e.Arrow,e.Button,"clone","zimButton",!1),e.HotSpots=function(t,o,n){function r(t){var r=null;if(!Array.isArray(t.rect)){if(!(r=t.rect))return void zog("zim controls - HotSpots(): HotSpot "+t.page+" "+t.rect+" button does not exist");t.rect=[r.x,r.y,r.width||1,r.height||1]}(c=new e.HotSpot(t.page,t.rect[0],t.rect[1],t.rect[2],t.rect[3],t.call,t.callOver,t.callOut,o,t.talk)).zimHSpage=t.page,c.button=r,d.push(c),c.on(u,i),r&&zot(t.callOver)&&zot(t.callOut)&&(c.spot.mouseEnabled=!1,c.spot.mouseChildren=!1,r.zimHScall=t.call,r.zimHSEvent=r.on(u,i,!0),n||(r.zimHSMDEvent=r.on("mousedown",function(e){e.stopImmediatePropagation()})),r.cursor="pointer")}function i(e){e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0),"function"==typeof e.currentTarget.zimHScall&&e.currentTarget.zimHScall(e)}var a,l="spots, local, mouseDowns";if(a=zob(e.HotSpots,arguments,l,this))return a;z_d("72"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpots",zot(o)&&(o=!0),zot(n)&&(n=!1);var s,c,u=(zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",d=this.hotSpots=[];zot(t)&&(t=[]);for(var h=0;h<t.length;h++)r(t[h]);this.add=this.addHotSpot=function(e,o,n,i,a,l){s={page:e,rect:o,call:n,callOver:i,callOut:a,talk:l},t.push(s),r(s)},this.show=function(){for(var e=0;e<d.length;e++)(c=d[e]).button||(c.spot.alpha=.2)},this.hide=function(){for(var e=0;e<d.length;e++)(c=d[e]).spot.alpha=0},this.remove=this.removeHotSpots=function(o,r){for(var a=t.length-1;a>=0;a--)s=t[a],c=d[a],r&&!Array.isArray(r)&&(r=[r.x,r.y,r.getBounds().width,r.getBounds().height]),(zot(o)&&zot(r)||zot(r)&&o==s.page||zot(o)&&e.arraysEqual(r,s.rect)||o==s.page&&e.arraysEqual(r,s.rect))&&(t.splice(a,1),c.button&&(c.button.off(u,c.button.zimHSEvent),c.button.zimHSEvent=null,n||(c.button.off("mousedown",c.button.zimHSMDEvent),c.button.zimHSMDEvent=null)),c.off(u,i),c.dispose(),d.splice(a,1))},this.dispose=function(){for(var e=0;e<d.length;e++)(c=d[e]).button&&(c.button.off(u,c.button.zimHSEvent),c.button.zimHSCall=null,c.button.zimHSEvent=null,n||(c.button.off("mousedown",c.button.zimHSMDEvent),c.button.zimHSMDEvent=null)),c.off(u,i),c.dispose();return!0}},e.extend(e.HotSpots,e.Container,"dispose","zimContainer",!1),e.HotSpot=function(t,o,n,r,i,a,l,s,c,u){var d,h="obj, x, y, width, height, call, callOver, callOut, local, talk";if(d=zob(e.HotSpot,arguments,h,this))return d;if(z_d("73"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpot",!zot(t)&&t.addChild)if(t instanceof createjs.Container!=0)if(zot(o)||zot(n)||zot(r)||zot(i))zog("zim controls - HotSpot():\nPlease pass in x, y, width, height");else{zot(c)&&(c=!0);var g=(zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",p=r,f=i;if(c)m=new e.Point(o,n),y=r,v=i;else var m=t.globalToLocal(o,n),z=t.globalToLocal(o+p,n+f),y=z.x-m.x,v=z.y-m.y;var b=new e.Shape(r,i);if(b.talk=zot(u)?"HotSpot":u,b.alpha=0,b.graphics.f("black").dr(0,0,y,v),b.x=m.x,b.y=m.y,b.cursor="pointer",b.expand(0),this.spot=b,"function"==typeof a)var w=b.on(g,function(e){a(e)});if("function"==typeof l)var C=b.on("mouseover",function(e){l(e)});if("function"==typeof s)var x=b.on("mouseout",function(e){s(e)});t.addChild(b),this.show=function(){b.alpha=.5,t.stage&&t.stage.update()},this.hide=function(){b.alpha=0,t.stage&&t.stage.update()},this.dispose=function(){return w&&b.off(g,C),C&&b.off("mouseover",C),x&&b.off("mouseout",x),t.removeChild(b),b=null,!0}}else zog("zim controls - HotSpot():\nObjects passed in should be Containers");else zog("zim controls - HotSpot():\nPlease pass in container object for obj")},e.extend(e.HotSpot,e.Container,"dispose","zimContainer",!1),e.Guide=function(t,o,n,r,i,a,l,s){function c(t,o,n){var r=new e.Container({style:!1});return r.shape=new createjs.Shape,r.shape.graphics.s(o).ss(1).f(t).r(0,0,x,k),r.shape.alpha=.9,r.addChild(r.shape),r.label=new createjs.Text("10","16px arial",n),r.label.textAlign="center",r.label.textBaseline="middle",r.addChild(r.label),r.mouseChildren=!1,r.mouseEnabled=!1,r}function u(){"stage"==t?(w=C.stage,t=w):w=t.stage,t.addChild(C),P=t.getBounds().width,S=t.getBounds().height,o?(b.y=S/2,b.label.text="x:"+(C.percent?"70%":Math.round(70*P/100))):(b.x=P/2,b.label.text="y:"+(C.percent?"70%":Math.round(70*S/100))),B=new createjs.Shape,C.addChild(B),o?B.x=.7*P:B.y=.7*S,M||(t.addChild(C),h()),w.off("stagemousemove",z),z=w.on("stagemousemove",d),w.update()}function d(r){var i,a;r?(i=t.globalToLocal(r.rawX/e.scaX,r.rawY/e.scaY),O=i):i={x:O.x,y:O.y},n?o?(a=Math.round(Math.abs(i.x-B.x)/P*100),b.label.text="x:"+Math.max(0,Math.min(a,100))+"%",b.y=Math.max(A,Math.min(i.y,v))):(a=Math.round(Math.abs(i.y-B.y)/S*100),b.label.text="y:"+Math.max(0,Math.min(a,100))+"%",b.x=Math.max(T,Math.min(i.x,y))):o?(a=Math.round(Math.abs(i.x-B.x)),b.label.text="x:"+Math.max(0,Math.min(a,Math.round(P))),b.y=Math.max(A,Math.min(i.y,v))):(a=Math.round(Math.abs(i.y-B.y)),b.label.text="y:"+Math.max(0,Math.min(a,Math.round(S))),b.x=Math.max(T,Math.min(i.x,y))),w&&w.update()}function h(){var n;M=!0,P=t.getBounds().width,S=t.getBounds().height,o?(n="ew-resize",E=new createjs.Rectangle(0,0,P,0)):(n="ns-resize",E=new createjs.Rectangle(0,0,0,S)),e.noDrag(B),setTimeout(function(){e.drag(B,E,n,n,null,null,!0)},500),w.mouseMoveOutside=!0,w.enableMouseOver(10),y=P-2*x/3,v=S-k-k,B.uncache();var r=B.graphics;o?(r.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,S),r.f().s("white").ss(2).mt(0,0).lt(0,S),r.s("#00c5af").sd([20,20]).mt(0,0).lt(0,S).sd(),B.cache(-10,0,20,S)):(r.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(P,0),r.f().s("white").ss(2).mt(0,0).lt(P,0),r.s("#d61fa0").sd([20,20]).mt(0,0).lt(P,0).sd(),B.cache(0,-10,P,20)),o?b.x=P:b.y=S,C.addChild(b)}function g(e){e||(e=event),w&&(String.fromCharCode(e.keyCode)==r.toUpperCase()&&C.toggle(),String.fromCharCode(e.keyCode)==i.toUpperCase()&&(C.pixels=!C.pixels))}var p,f="obj, vertical, percent, hideKey, pixelKey, style, group, inherit";if(p=zob(e.Guide,arguments,f,this))return p;z_d("76"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Guide",this.group=l;var m=!1===a?{}:e.getStyle(this.type,this.group,s);if(zot(t)&&null!=m.obj&&m.obj,zot(t)&&(t=zdf?zdf.stage:"stage"),zot(o)&&(o=null==m.vertical||m.vertical),"stage"==t||t.addChild&&t.getBounds&&t.getBounds()){zot(n)&&(n=null==m.percent||m.percent),zot(r)&&(r=null!=m.hideKey?m.hideKey:"G"),zot(i)&&(i=null!=m.pixelKey?m.pixelKey:"P");var z,y,v,b,w,C=this,x=80,k=26,T=x/6+x/2,A=2*k;o?((b=c("#00c5af","white","white")).shape.regX=x+x/6,b.shape.regY=k/2,b.label.x=-x/2-x/6):((b=c("#d61fa0","white","white")).shape.regX=x/2,b.shape.regY=k+k/4,b.label.y=3*-k/4),"stage"!=t&&t.addChild(C);var P,S,B,E,I=e.added(C,u),M=!1,O={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!n},set:function(e){n=!e,C.resize()}}),window.addEventListener("keydown",g),this.toggled=!0,this.toggle=function(e){return!0===e?C.visible=C.toggled=!0:!1===e?C.visible=C.toggled=!1:(C.visible=!C.visible,C.toggled=C.visible),w&&(w.off("stagemousemove",z),C.visible&&(z=w.on("stagemousemove",d,C)),w.update()),C},this.resize=function(){return!!C&&(w&&(h(),d()),!0)},!1!==a&&e.styleTransforms(this,m),this.dispose=function(){return!!C&&(e.noDrag(B),clearInterval(I),C.removeAllChildren(),window.removeEventListener("keydown",g),C.parent&&C.parent.removeChild(C),C=null,!0)}}else zog("zim controls - Guide(): Please provide container with bounds for the obj (setBounds())")},e.extend(e.Guide,e.Container,"clone","zimContainer",!1),e.Grid=function(t,o,n,r,i,a,l,s){function c(t,o,n){var r=new e.Container({style:!1});return r.shape=new createjs.Shape,r.shape.graphics.s(o).ss(1).f(t).r(0,0,b,w),r.shape.alpha=.9,r.addChild(r.shape),r.label=new createjs.Text("10","16px arial",n),r.label.textAlign="center",r.label.textBaseline="middle",r.addChild(r.label),r.mouseChildren=!1,r.mouseEnabled=!1,r}function u(){"stage"==t?(A=y.stage,t=A):A=t.stage,O||(h(),t.addChild(y)),A.off("stagemousemove",z),z=A.on("stagemousemove",d),A.update()}function d(o){var r;o?(r=t.globalToLocal(o.rawX/e.scaX,o.rawY/e.scaY),j=r):r={x:j.x,y:j.y},n?(C.label.text="x:"+Math.max(0,Math.min(Math.round(r.x/B*100),100))+"%",C.x=Math.max(P,Math.min(r.x,k)),x.label.text="y:"+Math.max(0,Math.min(Math.round(r.y/E*100),100))+"%",x.y=Math.max(S,Math.min(r.y,T))):(C.label.text="x:"+Math.max(0,Math.min(Math.round(r.x),Math.round(B))),C.x=Math.max(P,Math.min(r.x,k)),x.label.text="y:"+Math.max(0,Math.min(Math.round(r.y),Math.round(E))),x.y=Math.max(S,Math.min(r.y,T))),A&&A.update()}function h(){O=!0,t&&t.getBounds&&(B=t.getBounds().width,E=t.getBounds().height),A&&(A.mouseMoveOutside=!0,A.enableMouseOver(10)),k=B-2*b/3,T=E-w-w,I=new e.Container({style:!1}),y.addChild(I);var r=new createjs.Shape;I.addChild(r);var i=r.graphics;i.s(o).ss(1);var a=new createjs.Shape;if(I.addChild(a),n){for(l=1;l<22;l++)i.mt(l*B/20,0).lt(l*B/20,E);for(l=1;l<20;l++)i.mt(0,l*E/20).lt(B,l*E/20);for(r.alpha=.3,(i=a.graphics).s(o).ss(1),l=1;l<10;l++)i.mt(l*B/10,0).lt(l*B/10,E);for(l=1;l<10;l++)i.mt(0,l*E/10).lt(B,l*E/10)}else{for(var l=0;l<B/v;l++)i.mt(l*v,0).lt(l*v,E);for(l=0;l<E/v;l++)i.mt(0,l*v).lt(B,l*v);for(r.alpha=.3,(i=a.graphics).s(o).ss(1),l=0;l<B/(10*v);l++)i.mt(l*(10*v),0).lt(l*(10*v),E);for(l=0;l<E/(10*v);l++)i.mt(0,l*(10*v)).lt(B,l*(10*v))}var s=80;i.s("#FFFFFF").ss(8),i.mt(B/2,E/2-s/2).lt(B/2,E/2+s/2),i.mt(B/2-s/2,E/2).lt(B/2+s/2,E/2),i.s("#000000").ss(4),i.mt(B/2,E/2-s/2).lt(B/2,E/2+s/2),i.mt(B/2-s/2,E/2).lt(B/2+s/2,E/2),i.s(o).ss(3),i.dr(0,0,B,E),a.alpha=.5,I.cache(0,0,B,E),y.addChild(C),y.addChild(x),A&&A.update()}function g(e){e||(e=event),A&&(String.fromCharCode(e.keyCode)==r.toUpperCase()&&y.toggle(),String.fromCharCode(e.keyCode)==i.toUpperCase()&&(y.removeChild(I),I=null,y.pixels=!y.pixels))}var p,f="obj, color, percent, hideKey, pixelKey, style, group, inherit";if(p=zob(e.Grid,arguments,f,this))return p;z_d("78"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Grid",this.group=l;var m=!1===a?{}:e.getStyle(this.type,this.group,s);if(zot(t)&&null!=m.obj&&m.obj,zot(t)&&(t=zdf?zdf.stage:"stage"),zot(o)&&(o=null!=m.color?m.color:"black"),"stage"==t||t.addChild&&t.getBounds&&t.getBounds()){zot(n)&&(n=null==m.percent||m.percent),zot(r)&&(r=null!=m.hideKey?m.hideKey:"G"),zot(i)&&(i=null!=m.pixelKey?m.pixelKey:"P");var z,y=this,v=10;this.mouseChildren=!1,this.mouseEnabled=!1;var b=80,w=26,C=c("#dddddd",o,"#333333");C.shape.regX=b/2,C.shape.regY=-w/4,C.label.y=3*w/4;var x=c("#dddddd",o,"#333333");x.shape.regX=-b/6,x.shape.regY=w/2,x.label.x=b/2+b/6;var k,T,A,P=b/6+b/2,S=2*w;C.x=P,x.y=S,C.label.text="x:0",x.label.text="y:0","stage"!=t&&t.addChild(y);var B,E,I,M=e.added(y,u),O=!1,j={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!n},set:function(e){n=!e,y.resize()}}),window.addEventListener("keydown",g),this.toggled=!0,this.toggle=function(e){return!0===e?y.visible=y.toggled=!0:!1===e?y.visible=y.toggled=!1:(y.visible=!y.visible,y.toggled=y.visible),A.off("stagemousemove",z),y.visible&&(z=A.on("stagemousemove",d,y)),A&&A.update(),y},this.resize=function(){return!!y&&(y.removeChild(I),I=null,A&&(h(),d(),setTimeout(function(){y.removeChild(I),I=null,h()},200)),!0)},!1!==a&&e.styleTransforms(this,m),this.dispose=function(){return clearInterval(M),y.removeAllChildren(),window.removeEventListener("keydown",g),y.parent&&y.parent.removeChild(y),y=null,!0}}else zog("zim controls - Grid(): Please provide container with bounds for the obj (setBounds())")},e.extend(e.Grid,e.Container,"clone","zimContainer",!1),e.Wrapper=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k){function T(t,n,r,i,l,d,g,p){var f=e.Pick.choose(a),m=e.Pick.choose(B),y=e.Pick.choose(E),v=e.Pick.choose(u),b=e.Pick.choose(s),w=e.Pick.choose(c);zot(f)&&(f="left"),zot(w)&&(w="top"),zot(b)&&(b="left"),v&&t.reverse();var C=((100-d)/100/2+g/100)*o,x=o*d/100,k=0,T=!1;if(l){(h||u)&&t.reverse();var A=L%l,P=L/2+g/100*L,S=0,I=0,Y=Math.floor(L/l);0!=_.rows&&p&&(T=!0),e.loop(t,function(e,o){k=0,I="right"==b?l*o+S+l-e.wrapWidth:"center"==b||"middle"==b?l*o+S+(l-e.wrapWidth)/2:l*o+S;var n=e.x;if(e.pos(I),W=e.x-n,e.centerX+=W,e.marginLeft&&(k+=e.marginLeft),e.marginRight&&(k-=e.marginRight),"center"==f||"middle"==f){var r=Math.floor(L/l)-t.length;k+=(A+(r?r*l:0))/2}else"right"==f&&(r=Math.floor(L/l)-t.length,k+=A+(r?r*l:0));e.mov(k),e.centerX+=k}),"center"==f&&T&&(t.length+Y)%2!=0&&(k=(P<=L/2?-1:1)*l/2,e.loop(t,function(e){e.mov(k),e.centerX+=k}))
}else if(m||y){if(m)var D=t.length?(L-i)/(t.length+1):0;else y&&(D=t.length-1>0?(L-i)/(t.length-1):0);t.length<z&&0!=_.rows&&p&&(D=j,T=!0),j=D;var X=0;if((h||u)&&t.reverse(),e.loop(t,function(e,t){k=0;var o=e.x;e.pos(D*(t+(m?1:0))+X),W=e.x-o,e.centerX+=W,T||(e.marginLeft&&(k+=e.marginLeft),e.marginRight&&(k-=e.marginRight),e.mov(k),e.centerX+=k),X+=e.wrapWidth}),T){k=0;var R=m?D:0,W=0;e.loop(t,function(o){if("right"==f){var n=o.x;o.pos(R,null,e.RIGHT),W=o.x-n,R+=o.wrapWidth+D}else if("center"==f){var r=(L-(X+(t.length-1)*D))/2-(m?D:0);n=o.x,o.pos(R+r,null,e.RIGHT),W=o.x-n,R+=o.wrapWidth+D}o.marginLeft&&(k+=o.marginLeft),o.marginRight&&(k-=o.marginRight),o.mov(k),o.centerX+=W+k},!0)}}else if("center"==f)e.loop(t,function(e){k=((h||u?0:o)-n.x)/2,(m||y)&&(e.marginLeft&&(k+=e.marginLeft),e.marginRight&&(k-=e.marginRight)),e.mov(k),e.centerX+=k});else if((h||u)&&"left"==f){var H=t[t.length-1].marginLeft;e.loop(t,function(e){k=-n.x+(H||0),m&&(k+=O),e.mov(k),e.centerX+=k})}else h||u||"right"!=f?m&&m&&e.loop(t,function(e){k=O*("right"==f?-1:1),e.mov(k),e.centerX+=k}):(H=t[t.length-1].marginRight,e.loop(t,function(e){k=o-n.x-(H||0),m&&(k-=O),e.mov(k),e.centerX+=k}));d&&(C=(.5+g/100)*L,x=o*d/100,e.loop(t,function(e){l||y||m?"right"==f?e.centerX>L-C&&e.mov(x):"center"==f?Math.round(e.centerX)==Math.round(L/2+g/100*L)?e.mov(x/2):Math.round(e.centerX)>Math.round(L/2+g/100*L)&&e.mov(x):e.centerX>C&&e.mov(x):h||u||"right"!=f?h||u||"center"!=f?(h||u)&&"right"==f?e.centerX>L-C&&e.mov(x):(h||u)&&"center"==f?e.centerX>L/2+g/100*L&&e.mov(x):e.centerX>C&&e.mov(x):e.centerX>o/2+g/100*L?e.mov(x/2):e.mov(-x/2):e.centerX<o-C&&e.mov(-x)})),m&&(O=(M+=D)/(_.rows+1)),"center"==w?e.loop(t,function(e){e.mov(0,(r-e.wrapHeight)/2*(h?-1:1))}):h||"bottom"!=w?h&&"top"==w&&e.loop(t,function(e){e.mov(0,-(r-e.wrapHeight)+(e.marginTop?e.marginTop:0))}):e.loop(t,function(e){e.mov(0,r-e.wrapHeight-(e.marginBottom?e.marginBottom:0))})}var A="items, width, spacingH, spacingV, wrapperType, align, valign, alignInner, valignInner, flip, reverse, bottomFull, colSize, rowSize, height, minSpreadNum, minStretchNum, percentVoidH, offsetVoidH, percentVoidV, offsetVoidV, style, group, inherit",P=null;if(P=zob(e.Wrapper,arguments,A,this))return P;z_d("78.5"),this.group=x;var S=!1===C?{}:e.getStyle("Wrapper",this.group,k);zot(o)&&(o=null!=S.width?S.width:300),zot(f)&&(f=null!=S.height?S.height:null),zot(n)&&(n=null!=S.spacingH?S.spacingH:null),zot(r)&&(r=null!=S.spacingV?S.spacingV:null),zot(i)&&(i=null!=S.wrapperType?S.wrapperType:"spacing"),zot(a)&&(a=null!=S.align?S.align:"left"),zot(l)&&(l=null!=S.valign?S.valign:"top"),zot(s)&&(s=null!=S.alignInner?S.alignInner:"left"),zot(c)&&(c=null!=S.valignInner?S.valignInner:"bottom"),zot(u)&&(u=null!=S.flip&&S.flip),zot(d)&&(d=null!=S.reverse&&S.reverse),zot(h)&&(h=null!=S.bottomFull&&S.bottomFull),zot(g)&&(g=null!=S.colSize?S.colSize:100),zot(p)&&(p=null!=S.rowSize?S.rowSize:null),zot(n)&&(n=0),zot(r)&&(r=0),zot(m)&&(m=null!=S.minSpreadNum?S.minSpreadNum:2),zot(z)&&(z=null!=S.minStretchNum?S.minStretchNum:3),zot(y)&&(y=null!=S.percentVoidH?S.percentVoidH:0),zot(v)&&(v=null!=S.offsetVoidH?S.offsetVoidH:0),zot(b)&&(b=null!=S.percentVoidV?S.percentVoidV:0),zot(w)&&(w=null!=S.offsetVoidV?S.offsetVoidV:0);var B,E,I=200,M=0,O=0,j=0,L=o;this.items=[],"spread"==i?B=!0:"stretch"==i&&(E=!0),this.zimContainer_constructor(o,I),this.type="Wrapper","middle"==a&&(a="center"),"middle"==l&&(l="center"),"middle"==s&&(s="center"),"middle"==c&&(c="center");var _=this;this.add=function(e){return this.addAt(e,this.numChildren-1),_},this.addAt=function(t,o){return zot(t)?_:((zot(o)||o<0)&&(o=0),Array.isArray(t)||(t=[t]),e.loop(t,function(e,t){_.addChildAt(e,o+t)}),_.resize(),_)},this.remove=function(t){return Array.isArray(t)||(t=[t]),e.loop(t,function(e){e&&e.removeFrom&&e.removeFrom()},!0),_.resize(),_},this.convert=function(e,t){var o=[];return e.loop(function(e){o.push(e),t&&e.cache()}),_.add(o),e.removeFrom(),_},this.resize=function(t,a){if(!_.preventResize){zot(t)||(o=t),zot(a)||(f=a),this.items2D=[],this.items=[],M=0,O=0,j=0,zot(y)&&(y=0),zot(v)&&(v=0);var s=e.Pick.choose(y),c=e.Pick.choose(v);L=o*(100-s)/100,this.setBounds(L,I);var m=0,z=0,C=0;_.cols=0,_.rows=0;var x=[],k=[0],A=null,P=0,S=null,B=e.Pick.choose(g);"column"!=i&&(B=null);var E=e.Pick.choose(p),Y=0;e.loop(this,function(t,o){h||u?t.pos(m+(t.marginRight?t.marginRight:0),z+(t.marginTop?t.marginTop:0),e.RIGHT,u?e.TOP:e.BOTTOM):t.pos(m+(t.marginLeft?t.marginLeft:0),z+(t.marginTop?t.marginTop:0)),Y++,S=t.boundsToGlobal();var i=_.globalToLocal(S.x,S.y),a=_.globalToLocal(S.x+S.width,S.y+S.height);if(h||u)var l=_.globalToLocal(S.x,S.y);else l=_.globalToLocal(S.x+S.width,S.y+S.height);if(t.wrapHeight=a.y-i.y,t.wrapWidth=a.x-i.x,s){var d=_.globalToLocal(S.x+t.wrapWidth/2,S.y+t.wrapHeight/2);t.centerX=d.x,t.centerY=d.y,d=null}if(B)var g=B*Y;else g=h||u?L-l.x+(t.marginLeft?t.marginLeft:0)+n:l.x+(t.marginRight?t.marginRight:0)+n;Math.round(g)-n>L&&(T(x,A,C,P,B,s,c,!1),P=0,0==_.cols&&(_.cols=o),m=0,z+=C+(E?0:e.Pick.choose(r)),C=0,E=e.Pick.choose(p),s=e.Pick.choose(y),c=e.Pick.choose(v),Y=0,_.items2D.push(e.copy(x)),_.rows++,k.push(z),x=[],h||u?t.pos(m+(t.marginRight?t.marginRight:0),z+(t.marginTop?t.marginTop:0),e.RIGHT,u?e.TOP:e.BOTTOM):t.pos(m+(t.marginLeft?t.marginLeft:0),z+(t.marginTop?t.marginTop:0)),s&&(S=t.boundsToGlobal(),d=_.globalToLocal(S.x+t.wrapWidth/2,S.y+t.wrapHeight/2),t.centerX=d.x,t.centerY=d.y,d=null),Y++,B?g=0:(g=(t.marginLeft?t.marginLeft:0)+t.wrapWidth+(t.marginRight?t.marginRight:0)+e.Pick.choose(n),l.x=h||u?L-((t.marginRight?t.marginRight:0)+t.wrapWidth):(t.marginLeft?t.marginLeft:0)+t.wrapWidth)),x.push(t),P+=t.wrapWidth,m=g,C=E||Math.max(C,t.wrapHeight+(t.marginTop?t.marginTop:0)+(t.marginBottom?t.marginBottom:0)),A=new e.Point(l.x,z+C)},(!d||!h)&&(d||h)),_.numChildren>0&&(0==_.cols&&(_.cols=_.numChildren),_.items2D.push(e.copy(x)),k.push(z),T(x,A,C,P,B,s,c,!0),_.rows+=1);var D=e.Pick.choose(l);if(zot(D)&&(D="top"),h){var X=z+C-I;e.loop(this,function(e){e.mov(0,X)}),_.items2D.reverse(),e.loop(_.items2D,function(e){e.reverse()})}var R=e.Pick.choose(b),W=e.Pick.choose(w);if(!zot(R)){zot(W)&&(W=0);var H=z+C,F=H*R/100,V=H/2+W/100*H;e.loop(k,function(t,o){if(t>=V)return e.loop(_.items2D,function(t){e.loop(t,function(e){e.mov(0,F)})},null,1,o),"break"})}return zot(f)||("bottom"==l?(X=f-(z+C),e.loop(this,function(e){e.mov(0,X)})):"center"!=l&&"middle"!=l||(X=(f-(z+C))/2,e.loop(this,function(e){e.mov(0,X)}))),_.setBounds(null),(S=_.getBounds())&&_.setBounds(0,S.y,o,S.height),e.loop(_.items2D,function(t){e.loop(t,function(e){_.items.push(e)})}),this.stage&&this.stage.update(),_}},Object.defineProperty(_,"spacingH",{get:function(){return n},set:function(e){n=e,this.resize()}}),Object.defineProperty(_,"spacingV",{get:function(){return r},set:function(e){r=e,this.resize()}}),Object.defineProperty(_,"wrapperType",{get:function(){return i},set:function(e){B="spread"==e,E="stretch"==e,i=e,this.resize()}}),Object.defineProperty(_,"align",{get:function(){return a},set:function(e){"middle"==(a=e)&&(a="center"),this.resize()}}),Object.defineProperty(_,"valign",{get:function(){return l},set:function(e){"middle"==(l=e)&&(l="center"),this.resize()}}),Object.defineProperty(_,"alignInner",{get:function(){return s},set:function(e){"middle"==(s=e)&&(s="center"),this.resize()}}),Object.defineProperty(_,"valignInner",{get:function(){return c},set:function(e){"middle"==(c=e)&&(c="center"),this.resize()}}),Object.defineProperty(_,"colSize",{get:function(){return g},set:function(e){g=e,"column"==i&&this.resize()}}),Object.defineProperty(_,"rowSize",{get:function(){return p},set:function(e){p=e,this.resize()}}),Object.defineProperty(_,"flip",{get:function(){return u},set:function(e){u=e,this.resize()}}),Object.defineProperty(_,"reverse",{get:function(){return d},set:function(e){d=e,this.resize()}}),Object.defineProperty(_,"bottomFull",{get:function(){return h},set:function(e){h=e,this.resize()}}),Object.defineProperty(_,"percentVoidH",{get:function(){return y},set:function(e){y=e,this.resize()}}),Object.defineProperty(_,"offsetVoidH",{get:function(){return v},set:function(e){v=e,this.resize()}}),Object.defineProperty(_,"percentVoidV",{get:function(){return b},set:function(e){b=e,this.resize()}}),Object.defineProperty(_,"offsetVoidV",{get:function(){return w},set:function(e){w=e,this.resize()}}),zot(t)||_.add(t),!1!==C&&e.styleTransforms(this,S),this.clone=function(){return _.cloneProps(new e.Wrapper(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,this.style,this.group))}},e.extend(e.Wrapper,e.Container,"clone","zimContainer",!1),e.Tile=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x){function k(){M.removeAllChildren(),_=[],Y=[],D=[],X=[],R=[],W=0,H=0,F=0,V=0,N=[],G=[],q=[],U=[],Q=[],M.items&&M.items.length||(M.items=[]),f=M.items.length;for(var t,o,n,r=0,i=0,a=0,c=0;c<f;c++)i=Math.floor(c/M.cols),a=c%M.cols,zot(_[i])&&(_[i]=[]),zot(M.items[c])&&(M.items[c]=new e.Container(0,0,0,0)),_[i][a]=M.items[c];M.rows=Math.max(1,_.length),M.cols=Math.max(1,zot(_[0])?0:_[0].length);e:for(i=0;i<M.rows;i++)for(N.push([]),G.push([]),U.push([]),h&&zot(s)&&(o=e.Pick.choose(h)),c=0;c<M.cols;c++){if(r++,!zot(f)&&r>f)break e;(t=_[i][c]).snapToPixel=y,M.addChild(t),N[i].push(t.scaleX),G[i].push(t.scaleY),0==i&&d&&zot(l)&&(n=e.Pick.choose(d)),0==i&&Q.push(e.Pick.choose(g)),d&&zot(l)||(n=Math.abs(t.width)),h&&zot(s)||(o=Math.abs(t.height)),U[i][c]=[n,o],zot(X[c])&&(X[c]=0),zot(R[i])&&(R[i]=0),n>X[c]&&(X[c]=n),o>R[i]&&(R[i]=o),zot(Y[i])&&(Y[i]=0),zot(D[c])&&(D[c]=0),Y[i]+=n,D[c]+=o,Y[i]>W&&(W=Y[i]),D[c]>H&&(H=D[c]),zot(q[c])&&(q[c]=0),q[c]++}if(!1===M.squeezeH)for(c=0;c<X.length;c++){var u=X[c];F+=u}if(!1===M.squeezeV)for(c=0;c<R.length;c++)u=R[c],V+=u}function T(t,o){var n,r;t<=0&&(t=null),o<=0&&(o=null),K=zot(t)||"full"!=M.squeezeH?zot(t)?F>0?F+(M.cols-1)*M.spacingH:W+(M.cols-1)*M.spacingH:Math.max(W+(M.cols-1)*M.spacingH,t):t,Z=zot(o)||"full"!=M.squeezeV?zot(o)?V>0?V+(M.rows-1)*M.spacingV:H+(M.rows-1)*M.spacingV:Math.max(H+(M.rows-1)*M.spacingV,o):o,M.setBounds(0,0,K,Z),J=[],$=[];var i=[];for(te=0;te<_.length;te++)for(n=_[te],r=0,zot(t),oe=0;oe<n.length;oe++){var a,l;if(O=n[oe],0==te&&(J[oe]=0,zot(o)||("full"==M.squeezeV?$[oe]=q[oe]>1?(o-D[oe])/(q[oe]-1):0:M.squeezeV?$[oe]=q[oe]>1?Math.max(M.spacingV,(o-D[oe])/(q[oe]-1)):0:$[oe]=q[oe]>1?Math.max(M.spacingV,(Z-D[oe])/(q[oe]-1)):0),M.squeezeV?"center"==M.valign||"middle"==M.valign?i[oe]=(Z-(D[oe]+(q[oe]-1)*(zot(o)?M.spacingV:$[oe])))/2:"bottom"==M.valign?i[oe]=Z-(D[oe]+(q[oe]-1)*(zot(o)?M.spacingV:$[oe])):i[oe]=0:i[oe]=0),O.getBounds(),0==oe){zot(t)||(l="full"==M.squeezeH?n.length>1?(t-Y[te])/(n.length-1):0:M.squeezeH?n.length>1?Math.max(M.spacingH,(t-Y[te])/(n.length-1)):0:n.length>1?Math.max(M.spacingH,(K-Y[te])/(n.length-1)):0),a=M.squeezeH?"center"==M.align||"middle"==M.align?(K-(Y[te]+(n.length-1)*(zot(t)?M.spacingH:l)))/2:"right"==M.align?K-(Y[te]+(n.length-1)*(zot(t)?M.spacingH:l)):0:0;var s=e.Pick.choose(p)}g=Q[oe];var c=U[te][oe][0],u=U[te][oe][1];M.mirrorH&&oe%2==1&&(O.scaleX=-N[te][oe]),O.pos(r,null),!M.squeezeH&&j?!zot(t)||"center"!=g&&"middle"!=g?zot(t)&&"right"==g&&(O.x+=X[oe]-O.width):O.x+=(X[oe]-O.width)/2:M.squeezeH?!zot(t)||"center"!=M.align&&"middle"!=M.align?zot(t)&&"right"==M.align&&(O.x+=c-O.width):O.x+=(c-O.width)/2:!zot(t)||"center"!=M.align&&"middle"!=M.align?zot(t)&&"right"==M.align&&(O.x+=X[oe]-O.width):O.x+=(X[oe]-O.width)/2,M.mirrorV&&te%2==1&&(O.scaleY=-G[te][oe]),O.pos(null,J[oe]),!M.squeezeV&&L?!zot(o)||"center"!=s&&"middle"!=s?zot(o)&&"bottom"==s&&(O.y+=R[te]-O.height):O.y+=(R[te]-O.height)/2:M.squeezeV?!zot(o)||"center"!=M.valign&&"middle"!=M.valign?zot(o)&&"bottom"==M.valign&&(O.y+=u-O.height):O.y+=(u-O.height)/2:!zot(o)||"center"!=M.valign&&"middle"!=M.valign?zot(o)&&"bottom"==M.valign&&(O.y+=R[te]-O.height):O.y+=(R[te]-O.height)/2,!0!==M.squeezeH&&zot(t)?r+=X[oe]+(zot(t)?M.spacingH:l):r+=c+(zot(t)?M.spacingH:l),O.x+=a,O.y+=i[oe],!0!==M.squeezeV&&zot(o)?J[oe]+=R[te]+(zot(o)?M.spacingV:$[oe]):J[oe]+=u+(zot(o)?M.spacingV:$[oe])}}function A(e){for(var t,o=[],n=0;n<e.length;n++)n%M.cols==0&&(t=[],o.push(t)),t.push(e[n]);return o}function P(e){for(var t=[],o=0;o<M.cols;o++)t.push([]);for(o=0;o<e.length;o++)t[o%M.cols][Math.floor(o/M.cols)]=e[o];return t}var S,B="obj, cols, rows, spacingH, spacingV, unique, width, height, squeezeH, squeezeV, colSize, rowSize, align, valign, count, mirrorH, mirrorV, snapToPixel, clone, events, group, style, inherit";if(S=zob(e.Tile,arguments,B,this))return S;z_d("66.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Tile",this.group=w;var E,I=!1===C?{}:e.getStyle(this.type,this.group,x);zot(t)&&(t=null!=I.obj?I.obj:new e.Circle),zot(o)&&(o=null!=I.cols?I.cols:1121),zot(n)&&(n=null!=I.rows?I.rows:1121),1121==o&&1121==n?o=n=E=3:1121==o?o=1:1121==n&&(n=1),zot(a)&&(a=null!=I.unique&&I.unique),zot(l)&&(l=null!=I.width?I.width:null),zot(s)&&(s=null!=I.height?I.height:null),zot(d)&&(d=null!=I.colSize?I.colSize:null),zot(h)&&(h=null!=I.rowSize?I.rowSize:null),zot(l)||(d=null),zot(s)||(h=null),zot(r)&&(r=null!=I.spacingH?I.spacingH:E?3:null),zot(i)&&(i=null!=I.spacingV?I.spacingV:E?3:null),!zot(r)&&zot(d)||(r=0),!zot(i)&&zot(h)||(i=0),zot(c)&&(c=null!=I.squeezeH&&I.squeezeH),zot(u)&&(u=null!=I.squeezeV&&I.squeezeV),zot(g)&&(g=null!=I.align?I.align:"left"),zot(p)&&(p=null!=I.valign?I.valign:"top"),zot(f)&&(f=null!=I.count?I.count:a&&Array.isArray(t)?t.length:null),0===f&&(f=null,zon&&zog("ZIM Tile() - count parameter of 0 is ignored - see docs")),zot(m)&&(m=null!=I.mirrorH&&I.mirrorH),zot(z)&&(z=null!=I.mirrorV&&I.mirrorV),zot(y)&&(y=null==I.snapToPixel||I.snapToPixel),y&&(t&&t.stage?t.stage.snapToPixelEnabled=!0:"undefined"!=typeof elem&&zdf&&(zdf.stage.snapToPixelEnabled=!0)),zot(v)&&(v=null!=I.clone?I.clone:!a),zot(b)&&(b=null==I.events||I.events);var M=this;M.cols=o=Math.round(o),M.rows=n=Math.round(n),M.spacingH=r,M.spacingV=i,M.squeezeH=c,M.squeezeV=u;var O,j="function"==typeof g,L="function"==typeof p;M.align=j?"left":g,M.valign=L?"top":p,M.mirrorH=m,M.mirrorV=z,M.items=[];var _,Y,D,X,R,W,H,F,V,N,G,q,Q,U,K,Z,J,$,ee=0;e:for(var te=0;te<n;te++)for(var oe=0;oe<o;oe++){if(ee++,!zot(f)&&ee>f)break e;"string"==typeof(O=a?t[ee-1]:e.Pick.choose(t))&&(O=window.asset(O).centerReg({add:!1}).clone()),zot(O)&&(O=new e.Container(0,0,0,0)),v&&(0==te&&0==oe||(O=O.clone())),b&&O.on("change",function(e){var t=new createjs.Event("change");t.item=e.currentTarget,M.dispatchEvent(t)}),M.items.push(O),O.tileNum=ee-1,O.tileCol=oe,O.tileRow=te}k(),T(l,s),this.itemUnderPoint=function(t,r,i){if(zot(i)&&(i=!0),!zot(t)&&!zot(r)){var a=M.globalToLocal(t,r);t=a.x,r=a.y;var l=0,c=e.loop(X,function(e,o){return l+=e+M.spacingH,!((!i||"vertical"==i)&&t>l-M.spacingH&&t<l)&&(t<l-M.spacingH/2?o:void 0)});if(!1!==c&&(!0===c&&(c=o-1),!(t<0||t>K||r<0||r>Z))){var u=0,d=e.loop(R,function(e,t){var o=zot(s)?M.spacingV:$[oe];return!((!i||"horizontal"==i)&&r>u-o&&r<u)&&(r<(u+=e+o)-o/2?t:void 0)});if(!1!==d)return!0===d&&(d=n-1),M.items2D[d][c]}}},this.remake=function(e){return zot(e)||(M.items=e),k(),T(l,s),M},this.resize=function(e,t){return zot(e)&&(e=l),zot(t)&&(t=s),l=e,s=t,T(e,t),M},Object.defineProperty(this,"items2D",{get:function(){return A(M.items)},set:function(){zon&&zogy("Tile() - items2D is read only")}}),Object.defineProperty(this,"items2DCols",{get:function(){return P(M.items)},set:function(){zon&&zogy("Tile() - items2DCols is read only")}}),Object.defineProperty(this,"current",{get:function(){var t=[];return M.width,M.cols,M.spacingH,M.cols,M.height,M.rows,M.spacingV,M.rows,e.loop(M.items,function(e){var o=e.getBounds(),n=e.x-e.regX+o.x+o.width/2,r=e.y-e.regY+o.y+o.height/2,i=M.hitTestGrid(M.width,M.height,M.cols,M.rows,n,r,null,null,M.spacingH,M.spacingV,!0,"open");null!=i&&(t[i[0]]=e)}),t},set:function(){zon&&zogy("Tile() - current is read only")}}),Object.defineProperty(this,"current2D",{get:function(){return A(M.current)},set:function(){zon&&zogy("Tile() - current2D is read only")}}),Object.defineProperty(this,"current2DCols",{get:function(){return P(M.current)},set:function(){zon&&zogy("Tile() - current2DCols is read only")}}),!1!==C&&e.styleTransforms(this,I),this.clone=function(o){if(o)for(var n=[],r=0;r<M.items.length;r++)n.push(M.items[r].clone(!0));return M.cloneProps(new e.Tile(o?e.series(n):t.clone?t.clone():t,M.cols,M.rows,M.spacingH,M.spacingV,a,l,s,M.squeezeH,M.squeezeV,d,h,g,p,M.items.length,M.mirrorH,M.mirrorV,y,!o&&v,b,this.style,this.group))}},e.extend(e.Tile,e.Container,"clone","zimContainer",!1),e.Beads=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f){var m,z="path, obj, count, angle, startPercent, endPercent, percents, onTop, showControls, visible, interactive, clone, group, style, inherit";if(m=zob(e.Beads,arguments,z,this))return m;z_d("66.7"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Beads",this.group=g;var y=!1===p?{}:e.getStyle(this.type,this.group,f);zot(s)&&(s=null!=y.onTop&&y.onTop),zot(c)&&(c=null!=y.showControls&&y.showControls),zot(u)&&(u=null==y.visible||y.visible),zot(d)&&(d=null==y.interactive||y.interactive),zot(t)&&(t=null!=y.path?y.path:new e.Blob({color:null,borderWidth:3,borderColor:e.blue})),t.visible=u,t.interactive=d,t.toggle(c),t.onTop=s,zot(o)&&(o=null!=y.obj?y.obj:new e.Circle(10)),zot(n)&&(n=null!=y.count?y.count:10),zot(r)&&(r=null!=y.angle?y.angle:null),zot(i)&&(i=null!=y.startPercent?y.startPercent:0),zot(a)&&(a=null!=y.endPercent?y.endPercent:100),zot(l)&&(l=null!=y.percents?y.percents:null);var v=a;if(a<i&&(v=100+a),zot(l)){var b;b="Squiggle"==t.type?(v-i)/(n-1):(v-i)/(n-(i!=v%100?1:0)),l=[];for(var w=i-b,C=0;C<n;C++)l.push(w+b),(w+=b)>100&&(w-=100)}zot(h)&&(h=null==y.clone||y.clone);var x,k=this;for(k.count=n,k.percents=l,k.items=[],C=0;C<n;C++)x=e.Pick.choose(o),h&&0!=C&&(x=x.clone()),x.beadNum=C,x.startPercent=l[C],k.items.push(x);k.path=t.addTo(k),k.beads=(new e.Container).addTo(k,s?0:null),k.beads.type="BeadsContainer",this.resize=function(){for(var e=t.segmentRatios,o=t.segmentPoints,n=0;n<k.count;n++){var i=t.getCurvePoint(Math.max(0,Math.min(.9999,l[n]/100)),e,o,!0);if(i){var a=k.beads.globalToLocal(i.x,i.y);a&&k.items[n].loc(a,null,k.beads).rot((zot(r)?i.angle>180?i.angle-360:i.angle:r)+k.items[n].rotation)}}return this},k.resize(),d&&(t.on("pressmove",k.resize),t.on("update",k.resize)),!1!==p&&e.styleTransforms(this,y),this.dispose=function(e){return e||this.zimContainer_dispose(!0),k.items=[],!0},this.clone=function(n){if(n)for(var g=[],p=0;p<k.items.length;p++)g.push(k.items[p].clone(!0));return k.cloneProps(new e.Beads(t.clone(),n?e.series(g):o.clone?o.clone():o,k.count,r,i,a,l,s,c,u,d,h,this.style,this.group))}},e.extend(e.Beads,e.Container,["clone","dispose"],"zimContainer",!1),e.Layout=function(t,o,n,r,i,a,l,s,c,u,d,h){function g(){for(var e=0,t=0;t<o.length;t++)(x=o[t]).given=0,0==x[A]&&(e+=x.object.getBounds()[A]);for(t=0;t<o.length;t++)0==(x=o[t])[A]&&(x.given=x.object.getBounds()[A]/e*j)}function p(e,t){"GradientColor"==t.type?e.graphics.lf(t.colors,t.ratios,t.x0,t.y0,t.x1,t.y1):"GradientColor"==t.type?e.graphics.rf(t.colors,t.ratios,t.x0,t.y0,t.r0,t.x1,t.y1,t.r1):"BitmapColor"==t.type?e.graphics.bf(t.image,t.repetition,t.matrix):e.graphics.f(x.backgroundColor)}function f(e){e||(e=event),v&&String.fromCharCode(e.keyCode)==c.toUpperCase()&&(C.toggle(),v.stage&&v.stage.update())}var m,z="holder, regions, lastMargin, lastMarginMin, backgroundColor, vertical, showRegions, scalingObject, hideKey, style, group, inherit";if(m=zob(e.Layout,arguments,z,this))return m;z_d("80"),this.cjsEventDispatcher_constructor(),this.type="Layout",this.group=d;var y=!1===u?{}:e.getStyle(this.type,this.group,h);if(zot(t)&&(t=null!=y.holder?y.holder:null),zot(s)&&(s=null!=y.scalingObject?y.scalingObject:null),!zot(t)&&t.getBounds)if((s=zot(s)?t:s).getBounds&&s.getBounds()){var v,b=s.getBounds();t.setBounds(0,0,b.width,b.height),zot(n)&&(n=null!=y.lastMargin?y.lastMargin:0),zot(r)&&(r=null!=y.lastMarginMin?y.lastMarginMin:0),zot(a)&&(a=null==y.vertical||y.vertical),zot(i)&&(i=null!=y.backgroundColor?y.backgroundColor:""),zot(c)&&(c=null!=y.hideKey?y.hideKey:"B"),zot(l)&&(l=null!=y.showRegions?y.showRegions:null),l&&(v=new e.Shape);var w=this.backing=new e.Shape,C=this;if(this.active=!0,zot(o)&&(o=null!=y.regions?e.copy(y.regions):null),!zot(o)){var x;this.regions=o;var k=0,T="minWidth",A="width",P="height",S="marginLeft",B="marginMinLeft",E="maxHeight";a&&(T="minHeight",A="height",P="width",S="marginTop",B="marginMinTop",E="maxWidth");for(var I=[],M=0,O=0;O<o.length;O++){if(!(x=o[O]).object||!x.object.getBounds())return void zogy("Layout(): each region object must have an object with setBounds() set");x[T]||(x[T]=0),x[A]||(x[A]=0),x.backgroundColor||(x.backgroundColor=""),x.given=0,x.maxGiven=0,"auto"==x[S]?(I[O]=!0,M++,x[B]?x[S]=x[B]:delete x[S]):x[S]&&x[B]&&x[S]<x[B]&&(x[S]=x[B]),zot(x[S])&&(x[S]=1e-4),x[E]||(x[E]=100),a?(x.align||(x.align="middle"),x.valign||(0==O?x.valign="top":O==o.length-1?x.valign="bottom":x.valign="middle",1==o.length&&(x.valign="middle"))):(x.valign||(x.valign="top"),x.align||(0==O?x.align="left":O==o.length-1?x.align="right":x.align="middle",1==o.length&&(x.align="middle"))),x[A]&&(x[T]=0),k+=x[A]+x[S]}if("auto"==n?(I[o.length]=!0,n=r||0):n&&r&&n<r&&(n=r),(k+=n)>100)zogy("Layout(): cannot fit regions into 100% bounds");else{var j=100-k;g(),this.resize=function(){if(C.active){b=s.getBounds(),t.setBounds(0,0,b.width,b.height),w.graphics.clear(),""!=i&&(p(w,i),w.graphics.r(0,0,b.width,b.height));for(var r=0;r<o.length;r++)(x=o[r]).maxGiven=0,x.marginGiven=0;for(var l,c,u=!0,d=j;u;){for(u=!1,l=!0,r=0;r<o.length;r++)(x=o[r]).given>0&&0==x.maxGiven&&(D=x.object.getBounds()[A],(X=x.object.getBounds()[P])/D*(x.given*b[A]/100)>(c=x[E]*b[P]/100)&&"Window"!=x.object.type?(x.maxGiven=D/X*c*100/b[A],x.given,x.maxGiven,d-=x.maxGiven):l=!1);if(l)break;var h=0;for(r=0;r<o.length;r++)0==(x=o[r])[A]&&0==x.maxGiven&&(h+=x.object.getBounds()[A]);for(r=0;r<o.length;r++)0==(x=o[r])[A]&&0==x.maxGiven&&(x.given=x.object.getBounds()[A]/h*d)}var f=!0;if((x=o[0]).maxGiven>0?x.maxGiven<x[T]&&(x[A]=x[T],f=!1):x.given>0&&x.given<x[T]&&(x[A]=x[T],f=!1),(x=o[o.length-1]).maxGiven>0?x.maxGiven<x[T]&&(x[A]=x[T],f=!1):x.given>0&&x.given<x[T]&&(x[A]=x[T],f=!1),!f){for(k=0,r=0;r<o.length;r++)x=o[r],k+=x[A]+x[S];return(k+=n)>100?void zog("zim display - Layout(): cannot fit regions into 100% bounds"):(j=100-k,g(),void C.resize())}var m=!0,z=0,y=0;for(r=0;r<o.length;r++)z+=(x=o[r])[S],x[A]>0?y+=x[A]:x.maxGiven>0?y+=x.maxGiven:x.given>0&&(y+=x.given),0==x[A]&&(m=!1);if(m||l){var O=100-y-(z+=n);if(z-=n+o[0][S],0!=O&&0!=z)for(r=0;r<o.length;r++)0!=r&&((x=o[r]).marginGiven=x[S]/z*(z+O))}if(M>0){var L=0,_=0;for(r=0;r<o.length;r++)(x=o[r]).marginGiven>0?_+=x.marginGiven:_+=x[S],x.marginGiven=0,L+=x[S]>.05?x[S]:0;var Y=(_-L)/M;for(r=0;r<I.length;r++)I[r]&&o[r]&&((x=o[r]).marginGiven=(x[B]?x[B]:0)+Y)}var D,X,R,W,H,F=0,V=0;if(v&&v.graphics){var N=v.graphics;N.c()}for(r=0;r<o.length;r++)(x=o[r]).marginGiven>0?F+=x.marginGiven*b[A]/100:F+=x[S]*b[A]/100,D=(D=x[A]>0?x[A]:x.maxGiven>0?x.maxGiven:x.given>0?x.given:0)*b[A]/100,X=x[E]*b[P]/100,V=(b[P]-X)/2,a?("Wrapper"==x.object.type&&x.object.resize(X),"Window"==x.object.type&&x.object.resize(X,D),"Region"==x.object.type&&x.object.setBounds(X,D),R=e.fit(x.object,V,F,X,D)):("Wrapper"==x.object.type&&x.object.resize(D),"Window"==x.object.type&&x.object.resize(D,X),"Region"==x.object.type&&x.object.setBounds(D,X),R=e.fit(x.object,F,V,D,X)),"top"==x.valign?x.object.y=R.bY:"bottom"==x.valign&&(x.object.y=R.bY+R.bHeight-R.height),"left"==x.align?x.object.x=R.bX:"right"==x.align&&(x.object.x=R.bX+R.bWidth-R.width),v&&v.graphics&&(N.s("white").ss(2).r(R.bX,R.bY,R.bWidth,R.bHeight),N.s("#ff8203").sd([20,20]).r(R.bX,R.bY,R.bWidth,R.bHeight).sd()),H=W=0,0!=F&&F+D!=b[A]||(a?H=1:W=1),X==b[P]&&(a?W=1:H=1),""!=x.backgroundColor&&(p(w,x.backgroundColor),w.graphics.r(R.bX,R.bY,R.bWidth+W,R.bHeight+H)),F+=D}},this.resize(),v&&t.addChild(v),t.addChildAt(w,0),window.addEventListener("keydown",f),this.disable=function(){C.active=!1,window.removeEventListener("keydown",f),v&&(v.alpha=0)},this.enable=function(){C.active=!0,window.addEventListener("keydown",f),C.resize(),v&&(v.alpha=1)},this.removeShape=function(){v&&(v.graphics.clear(),v.dispose(),v=null,v=!1),window.removeEventListener("keydown",f)},this.toggled=!0,this.toggle=function(e){return v.visible=!0===e||!1!==e&&!v.visible,C.toggled=v.visible,C},this.addShape=function(e){C.removeShape(),v=e,window.addEventListener("keydown",f),t.addChild(v),C.resize()},!1!==u&&e.styleTransforms(this,y),this.dispose=function(){return C.resize=null,C.backing&&C.backing.dispose(),C.backing=null,C.removeShape(),!0}}}}else zog("zim controls - Layout(): holder must have bounds set or provide a scalingObject with bounds");else zog("zim controls - Layout(): please provide an object with bounds set that holds the objects being laid out")},e.extend(e.Layout,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.Accessibility=function(o,n,r,i,a,l,s,c,u,d,h,g,p,f,m){function z(){H&&(H.removeEventListener("focus",v),H.removeEventListener("focus",k),H.parentNode&&(H.outerHTML="")),N&&(N.removeEventListener("focus",x),N.parentNode&&(N.outerHTML="")),q&&(q.removeEventListener("focus",x),q.parentNode&&(q.outerHTML="")),U&&U.parentNode&&(U.outerHTML=""),F&&(F.removeEventListener("focus",v),F.removeEventListener("focus",k),F.parentNode&&(F.outerHTML="")),G&&(G.removeEventListener("focus",x),G.parentNode&&(G.outerHTML="")),Q&&(Q.removeEventListener("focus",x),Q.parentNode&&(Q.outerHTML=""))}function y(t){var o=t.currentTarget.boundsToGlobal(),n=o.x+o.width/2,r=o.y+o.height/2,i=5;t.stageX/e.scaX<n-i||t.stageX/e.scaX>n+i||t.stageY/e.scaY<r-i||t.stageY/e.scaY>r+i?w():b()}function v(){V&&(V.innerHTML="")}function b(){var t,o;re=!0,T(),V&&V.setAttribute("aria-hidden",!1),e.ACTIONEVENT="click",zns||(ACTIONEVENT="click"),l.stage.removeChild(W),oe&&(R.alwaysHighlight=!1),l.stage.update();for(var n=0;n<K.length;n++)(o=(t=K[n]).obj.zimTabTag).disabled=!1,t.title=t.title.replace(/\s\(use arrow keys\)/,""),o.setAttribute("aria-label",t.title),o.addEventListener("focus",C)}function w(){re=!1;for(var e=0;e<K.length;e++)K[e].obj.zimTabTag.disabled=!1;T(),c&&A()}function C(e){var t=e.currentTarget,o=t.zimObject;Z=o.zimTabIndex,o.focus=!0;var n=new createjs.Event("change");n.title=t.getAttribute("aria-label"),R.dispatchEvent(n)}function x(e){re=!1,e.target.focusTab.focus()}function k(){zot(re)||re?b():w()}function T(){ne=!0,H.removeEventListener("focus",k),F.removeEventListener("focus",k),N.removeEventListener("focus",x),G.removeEventListener("focus",x),N.parentNode&&(N.parentNode.removeChild(N),G.parentNode.removeChild(G)),q.removeEventListener("focus",x),Q.removeEventListener("focus",x),q.parentNode&&(q.parentNode.removeChild(q),Q.parentNode.removeChild(Q));for(var e=0;e<ie.length;e++)ie[e][0].off("mousedown",ie[e][1])}function A(){for(var e=0;e<J.length;e++){var t=J[e];(!t.zimObject||"Loader"!=t.zimObject.type&&"TextArea"!=t.zimObject.type&&"Tag"!=t.zimObject.type)&&(J[e].style.left="-2000px")}}function P(e){var t=e.currentTarget;if("RadioButton"==t.type||"TabsButton"==t.type||"PadButton"==t.type)for(var o=0;o<t.zimTabParent.buttons.length;o++){var n=t.zimTabParent.buttons[o];n.zimTabTag.setAttribute("aria-label",n.zimTabTag.getAttribute("aria-label").split(" - currently")[0]+(t.zimTabParent.selectedIndex==n.tabIndex?" - currently selected.":" - currently not selected."))}R.tabIndex=e.currentTarget.zimTabIndex,R.activatedObject=t}function S(e){return e.talk?e.talk:"TextArea"==e.type||"RadioButtons"==e.type||"Tabs"==e.type||"Pad"==e.type?e.type:"Waiter"==e.type?"Waiter active - please wait":e.text?e.type+" - "+("a"==e.text||"A"==e.text?"eh":e.text):e.type+("Dial"==e.type||"Slider"==e.type||"ColorPicker"==e.type||"Stepper"==e.type?" (use arrow keys)":"")+("TextArea"==e.type?" (press ENTER to edit)":"")}function B(t){var o=t.obj;t.title=t.title.replace(/\.$/,""),"RadioButton"==o.type||"TabsButton"==o.type||"PadButton"==o.type?t.title=t.title+(o.tabIndex==o.zimTabParent.selectedIndex?" - currently selected":" - currently not selected"):"CheckBox"==o.type?t.title=t.title+(o.checked?" - currently checked":" - currently not checked"):"Stepper"==o.type?t.title=t.title+" - currently displaying "+o.currentValue:"Slider"==o.type||"Dial"==o.type?t.title=t.title+" - currently at "+e.decimals(o.currentValue,R.decimals):"ColorPicker"==o.type?t.title=t.title+" - currently at "+o.selectedColor:"TextArea"==o.type?t.title=t.title+(""!=o.tag.value?"":" - placeholder: "+o.tag.placeholder):"Indicator"==o.type&&(t.title=t.title+" - currently "+(o.selectedIndex>=0?"at "+(o.selectedIndex+1)+" of "+o.num:"not indicating")),t.title+="."}function E(e,t,o,n,r){var i;if(n&&(g=n.obj),n&&("TextArea"==g.type||"Loader"==g.type))return(i=g.tag).setAttribute("aria-label",t),g&&i.setAttribute("aria-hidden",!g.stage),"before"==r?o.parentNode.insertBefore(i,o):o.parentNode.insertBefore(i,o.nextSibling),i.style.zIndex=-5,i.zimObject=g,n.obj.zimTabTag=i,J.push(i),i;if(!n||"Dial"!=g.type&&"Slider"!=g.type&&"Stepper"!=g.type&&"ColorPicker"!=g.type)i=document.createElement("div"),g&&(i.zimObject=g),i.innerHTML="tag",i.setAttribute("role",s?"application":"button"),"android"==oe&&i.addEventListener("click",function(){g.dispatchEvent("click")});else{var a,c,u=[];if("Dial"==g.type||"Slider"==g.type)for(var d=g.step<=0?(g.max-g.min)/20:g.step,h=g.min;h<g.max;h+=d)u.push(g.min+h);else"Stepper"==g.type?u=g.stepperArray:"ColorPicker"==g.type&&(u=g.colors);for((i=document.createElement("select")).disabled=!0,i.zimObject=g,i.addEventListener("change",function(e){(re||"android"!=!oe)&&(e.currentTarget.zimObject.zimTabParent.currentValueEvent=e.target.value,l.stage.update())}),i.size=1,h=0;h<u.length;h++)a=u[h],(c=document.createElement("option")).setAttribute("aria-label",a),c.innerHTML=a,i.add(c),a==g.zimTabParent.currentValue&&c.setAttribute("selected","selected");i.setAttribute("role","button")}if(i.setAttribute("id",e),i.setAttribute("tabindex",0),i.setAttribute("aria-label",t),g&&i.setAttribute("aria-hidden",!g.stage),"before"==r?o.parentNode.insertBefore(i,o):o.parentNode.insertBefore(i,o.nextSibling),i.style.position="absolute",n){var g,p=(g=n.obj).boundsToGlobal();l.retina?(i.style.left=l.x+p.x*l.scale/X+"px",i.style.top=l.y+p.y*l.scale/X+"px",i.style.width=p.width*l.scale/X+"px",i.style.height=p.height*l.scale/X+"px"):(i.style.left=l.x+p.x*l.scale+"px",i.style.top=l.y+p.y*l.scale+"px",i.style.width=p.width*l.scale+"px",i.style.height=p.height*l.scale+"px"),n.obj.zimTabTag=i}else i.style.left="-1000px",i.style.top=l.y+"px";return i.style.overflow="hidden",i.style.zIndex=-5,i.style.fontSize="20px",i.style.color="rgba(0,0,0,.01)",J.push(i),i}function I(){for(var e=!1,t=0;t<J.length;t++)if(document.activeElement==J[t]){e=!0;break}return!(document.activeElement!=l.canvas&&!e)}function M(e){l.shiftKey||zid(te+"PrefixTab")!=document.activeElement&&l.canvas!=document.activeElement?!l.shiftKey||zid(te+"SuffixTab")!=document.activeElement&&zid(te+"BufferTab")!=document.activeElement||(K.length>0&&(K[0].obj.focus=!0),ce=!0,se=!0,O(e)):(K.length>0&&(K[K.length-1].obj.focus=!0),ce=!0,se=!0,O(e))}function O(e){e.ctrlKey?j(e.shiftKey?-1:1):(e.shiftKey?R.tab(-1):R.tab(1),e.preventDefault())}function j(e){se=!1,zid(te+(1==e?"SuffixTab":"PrefixTab")).focus(),l.stage.removeChild(f),l.stage.update(),R.tabIndex=-1}var L,_="appName, tabOrder, tabIndex, cycle, decimals, frame, application, alwaysHighlight, AHTime, AHColor, AHBorderWidth, AHBorderPadding, AHAlpha, AHObject, AHObjectScale";if(L=zob(e.Accessibility,arguments,_,this))return L;z_d("30.5"),this.cjsEventDispatcher_constructor(),this.type="Accessibility",zot(o)&&(o="application"),zot(i)&&(i=!1),zot(a)&&(a=2),zot(l)&&(l=zdf),zot(s)&&(s=!e.mobile()),zot(c)&&(c=!1);var Y=t(u);if(zot(u)&&(u="s"==Y?.7:700),zot(d)&&(d="brown"),zot(h)&&(h=3),zot(g)&&(g=5),zot(p)&&(p=.8),zot(m)&&(m=.8),zot(f)){var D=new e.Shape({style:!1});D.mouseEnabled=!1}else f.mouseEnabled&&(f.mouseEnabled=!1);if(zot(l=zdf))zon&&zogy("Accessibility - needs a Frame");else{var X=l.retina&&window.devicePixelRatio||1,R=this;R.cycle=i,R.decimals=a,R.alwaysHighlight=c,R.AHTime=u,R.AHColor=d,R.AHBorderWidth=h,R.AHBorderPadding=g,R.AHAlpha=p,R.AHObjectScale=m;var W,H,F,V,N,G,q,Q,U,K=-1,Z=-1,J=[],$=[],ee={RadioButtons:"option",Tabs:"tab",Pad:"key"},te=l.canvas.id,oe=e.mobile(),ne=!1,re=null,ie=[],ae=150;Object.defineProperty(this,"tabOrder",{get:function(){return K},set:function(e){H&&H.removeEventListener("focus",v),F&&F.removeEventListener("focus",v);for(var t=0;t<J.length;t++)J[t].parentElement&&(J[t].outerHTML="");var n,r;for(J=[],t=0;t<$.length;t++)(n=K[t])&&$[t][0].off("mousedown",$[t][1]);$=[],K=[];var i=[]
;U=l.shim?document.body:l.canvas,de=!1;var a=0;for(t=0;t<e.length;t++){if("HotSpots"==(n=e[t]).type&&(e.splice.apply(e,[t,1].concat(n.hotSpots)),n=n.hotSpots[0]),"HotSpot"==n.type&&(n=n.spot),n.constructor=={}.constructor){if(!(r=n.obj)||!r.getStage)continue;n.title||(n.title=S(r,t+a))}else r=n,n={obj:n,title:S(n,t+a)};if("RadioButtons"==r.type||"Tabs"==r.type||"Pad"==r.type){var s=[];a--;for(var c=0;c<r.buttons.length;c++){a++;var u=r.buttons[c],d={obj:u,title:n.title+" - "+ee[r.type]+": "+("a"==u.text||"A"==u.text?"eh":u.text)};s.push(d),u.zimTabParent=r,u.zimTabParent.zimAccessibility=R,u.zimTabIndex=t+a,u.tabIndex=c,u.zimAccessibility=R,B(d),U=E(te+"Tab"+(t+a),d.title,U,d),$.push([u,u.on("mousedown",P)]),ne||ie.push([u,u.on("mousedown",y)])}i=i.concat(s)}else r.zimTabIndex=t+a,r.zimTabParent=r,B(n),r.zimAccessibility=R,$.push([r,r.on("mousedown",P)]),ne||ie.push([r,r.on("mousedown",y)]),i.push(n),U=E(te+"Tab"+(t+a),n.title,U,n)}(H=R.startAppTag=E(te+"PrefixTab",o+" start",l.shim?document.body:l.canvas,null,"before")).addEventListener("focus",v),ne||(H.addEventListener("focus",k),(N=E(te+"noAriaTab","",H,null,"before")).setAttribute("aria-hidden",!0),N.focusTab=H,N.addEventListener("focus",x),(q=E(te+"noAriaTab","",H)).setAttribute("aria-hidden",!0),q.focusTab=H,q.addEventListener("focus",x)),U=E(te+"BufferTab","",U),oe&&U.setAttribute("aria-hidden",!0),U=F=R.endAppTag=E(te+"SuffixTab",o+" end",U),F.addEventListener("focus",v),ne||(F.addEventListener("focus",k),U=G=E(te+"noAriaTab","",F),G.setAttribute("aria-hidden",!0),G.focusTab=F,G.addEventListener("focus",x),(Q=E(te+"noAriaTab","",F,null,"before")).setAttribute("aria-hidden",!0),Q.focusTab=F,Q.addEventListener("focus",x)),K=i}}),Object.defineProperty(this,"tabIndex",{get:function(){return Z},set:function(t){function o(){if(Z&&Z>-1)K&&K[Z]&&(K[Z].obj.focus=!1);else for(var e=0;e<K.length;e++)K[e].obj.focus=!1}function n(){o(),se=!1,R.AHObject&&l.stage.removeChild(R.AHObject),R.alwaysHighlightShape&&l.stage.removeChild(R.alwaysHighlightShape),l.stage.update(),Z=-1}if(he)if(t<0||t>=K.length)n();else{t!=Z&&o();var r=K[t].obj;if(r.stage){if(Z=t,r.focus=!0,se=!0,ce=!1,R.changeTitle(r),r.zimTabTag.focus(),setTimeout(function(){r.zimTabTag.focus();var e=new createjs.Event("change");e.title=r.zimTabTag.getAttribute("aria-label"),R.dispatchEvent(e)},ae),R.alwaysHighlight&&(!re||!oe)){if(R.AHObject){W=R.AHObject;var i=e.boundsToGlobal(r);R.AHObject.alp(R.AHAlpha).addTo(l.stage,null,!1),R.AHObject.fit(i.x,i.y,i.width,i.height),R.AHObject.sca(R.AHObject.scaleX*R.AHObjectScale),R.AHTime>0&&(le=setTimeout(function(){l.stage.removeChild(R.AHObject),l.stage.update()},R.AHTime*("s"==Y?1e3:1)))}else{W=D;var a=r.getBounds(),s=r.localToGlobal(a.x-5,a.y-5),c=r.localToGlobal(a.x+a.width+5,a.y-5),u=r.localToGlobal(a.x+a.width+5,a.y+a.height+5),d=r.localToGlobal(a.x-5,a.y+a.height+5),h=D.graphics;h.clear(),h.s(R.AHColor).ss(R.AHBorderWidth).mt(s.x-R.AHBorderPadding,s.y-R.AHBorderPadding).lt(c.x+R.AHBorderPadding,c.y-R.AHBorderPadding).lt(u.x+R.AHBorderPadding,u.y+R.AHBorderPadding).lt(d.x-R.AHBorderPadding,d.y+R.AHBorderPadding).lt(s.x-R.AHBorderPadding,s.y-R.AHBorderPadding).cp(),D.alpha=R.AHAlpha,R.AHTime>0&&(le=setTimeout(function(){l.stage.removeChild(D),l.stage.update()},R.AHTime*("s"==Y?1e3:1)))}l.stage.addChild(W),l.stage.update()}}else n()}}}),Object.defineProperty(this,"aria",{get:function(){return re},set:function(e){(re=e)&&b()}}),"android"==oe&&(e.ACTIONEVENT="click",zns||(ACTIONEVENT="click")),zot(n)?setTimeout(function(){if(-1==K){K=[];var t=[];e.loop(l.stage,function(e){e.type&&t.push(e)}),R.tabOrder=t,zot(r)||(R.tabIndex=r)}},50):(K=[],R.tabOrder=n,zot(r)||(R.tabIndex=r));var le,se=!1,ce=!0,ue=l.on("keydown",function(e){if(9==e.keyCode&&(I()||(se=!1,-1!=R.tabIndex&&(R.tabIndex=-1)),se?O(e):M(e)),se&&K.length>0&&R.tabIndex>=0&&13==e.keyCode){var t=K[R.tabIndex],o=t.obj;if(t&&o.stage){var n=new createjs.Event("mousedown"),r=new createjs.Event("click");n.fromEnter=r.fromEnter=!0,"Pane"==o.type?(o.backdrop.dispatchEvent(n),o.backdrop.dispatchEvent(r)):(o.dispatchEvent(n),o.dispatchEvent(r))}}});this.tab=function(e){if(clearTimeout(le),W&&l.stage.removeChild(W),zot(e)&&(e=1),0!=K.length)for(var t=0;t<K.length;t++){var o=K[t].obj;if(o.focus){o.focus=!1;var n=t+e,r=(n+1e4*K.length)%K.length,i=K[r];o=i.obj;for(var a=0,s=!1;!o.stage||!(!o.zimTabParent&&(zot(o.enabled)||o.enabled)||o.zimTabParent&&(zot(o.zimTabParent.enabled)||o.zimTabParent.enabled));)if(a++,r=((n+=e)+100*K.length)%K.length,o=(i=K[r]).obj,a==K.length){s=!0;break}if(s||!R.cycle&&n!=r&&!ce)return void j(e);ce=!1,R.tabIndex=r;break}}else j(e)},this.changeTitle=function(e,t,o){if("number"!=typeof e&&(e=e.zimTabIndex),!zot(e))if(o&&zot(t))R.tabIndex=e;else{var n=K[e],r=n.obj;zot(t)&&(t=r.zimTabTag.getAttribute("aria-label").split(" - currently")[0]),n.title=t,B(n),r.zimTabTag.setAttribute("aria-label",n.title),o&&(R.tabIndex=e)}};var de=!1;this.talk=function(e){de||((V=E(te+"TalkTab","",F)).setAttribute("role","alert"),de=!0),V.removeAttribute("role"),V.setAttribute("aria-label",e),V.setAttribute("role","alert");var t=new createjs.Event("change");t.title=e,R.dispatchEvent(t)},this.resize=function(e){function t(e){if("TextArea"!=e.type&&"Loader"!=e.type){var t=e.boundsToGlobal(),o=e.zimTabTag;l.retina?(o.style.left=l.x+t.x*l.scale/X+"px",o.style.top=l.y+t.y*l.scale/X+"px",o.style.width=t.width*l.scale/X+"px",o.style.height=t.height*l.scale/X+"px"):(o.style.left=l.x+t.x*l.scale/X/X+"px",o.style.top=l.y+t.y*l.scale/X/X+"px",o.style.width=t.width*l.scale/X/X+"px",o.style.height=t.height*l.scale/X/X+"px"),o.setAttribute("aria-hidden",!e.stage),o.hidden=!e.stage}else e.resize()}if(zot(e))for(var o=0;o<K.length;o++)t(K[o].obj);else{if("number"!=typeof e&&(e=e.zimTabIndex),e<0)return;var n=K[e].obj;!n.stage&&W&&n==R.currentObject&&(l.stage.removeChild(W),l.stage.update()),t(n)}},Object.defineProperty(this,"currentObject",{get:function(){return K[Z]&&K[Z].obj?K[Z].obj:null},set:function(e){for(var t=0;t<K.length;t++)if(K[t].obj==e){R.tabIndex=t;break}}});var he=!0;Object.defineProperty(this,"enabled",{get:function(){return he},set:function(e){he=e}}),this.dispose=function(){D&&D.graphics.clear(),R.tabOrder=[];for(var e=0;e<J.length;e++)J[e].parentElement&&(J[e].outerHTML="");z(),R.removeAllEventListeners(),l.off("keydown",ue)}}},e.extend(e.Accessibility,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.Manager=function(e){z_d("75");var t=this;this.type=e,this.items=[],this.add=function(e){return Array.isArray(e)?t.items=t.items.concat(e):t.items.push(e),t},this.remove=function(e){if(t){if(e){Array.isArray(e)||(e=[e]);for(var n=e.length-1;n>=0;n--){o=e[n];var r=t.items.indexOf(o);-1!=r&&t.items.splice(r,1)}}else t.items=[];return t}},this.resize=function(e){if(t){if(e)for(Array.isArray(e)||(e=[e]),n=e.length-1;n>=0;n--)o=e[n],o.resize||-1==t.items.indexOf(o)?o.resize():t.items.splice(t.items.indexOf(o),1);else for(var n=t.items.length-1;n>=0;n--)t.items[n].resize?t.items[n].resize():t.items.splice(n,1);return t}},this.toggle=function(e,n){if(t){if(n)for(Array.isArray(n)||(n=[n]),r=n.length-1;r>=0;r--)o=n[r],o.resize||-1==t.items.indexOf(o)?o.toggle(e):t.items.splice(t.items.indexOf(o),1);else for(var r=t.items.length-1;r>=0;r--)t.items[r].resize?t.items[r].toggle(e):t.items.splice(r,1);return t}},this.dispose=function(e){if(t){if(t.resize=null,e)for(Array.isArray(e)||(e=[e]),n=e.length-1;n>=0;n--)o=e[n],-1!=t.items.indexOf(o)&&t.items.splice(t.items.indexOf(o)),o.dispose&&o.dispose();else{for(var n=t.items.length-1;n>=0;n--)t.items[n].resize?t.items[n].dispose():t.items.splice(n,1);t.items=null}return!0}}},e.ResizeManager=function(){z_d("75.5"),e.Manager.call(this,"ResizeManager")},e.ResizeManager.prototype=new e.Manager,e.ResizeManager.prototype.constructor=e.ResizeManager,e.TransformManager=function(t,o){function n(e){!localStorage||e&&!e.pressup||r.savePersist(e)}z_d("75.7");var r=this;this.type="TransformManager",this.persistID=o,this.items=[],this.add=function(e){var t,o=[];o=Array.isArray(e)?e:[e];for(var n=!1,i=0;i<o.length;i++)if((t=o[i]).transformControls&&(t.originalVisible=t.transformControls.visible),t.toggle&&t.toggle(!1),0==r.items.length&&0==i&&(n=!0),"Blob"==t.type||"Squiggle"==t.type)r.persistID||n&&(n=!1,t.controlsVisible=!0,r.currentObject=t),t.on("change",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.controlType,r.dispatchEvent(t)}),t.on("controlsshow",function(e){var t=new createjs.Event("transformshow");r.currentObject=t.transformObject=e.target,r.dispatchEvent(t)}),t.on("controlshide",function(e){var t=new createjs.Event("transformhide");t.transformObject=e.target,r.currentObject=null,r.dispatchEvent(t)}),t.on("update",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.controlType,r.dispatchEvent(t)});else{var a=t.transformControls;r.persistID||n&&"Layer"!=t.type&&(n=!1,t.originalVisible&&(a.show(),r.currentObject=t)),t.on("transformed",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.transformType,r.dispatchEvent(t)}),t.on("transformshow",function(e){var t=new createjs.Event("transformshow");r.currentObject=t.transformObject=e.target,r.dispatchEvent(t)}),t.on("transformhide",function(e){var t=new createjs.Event("transformhide");t.transformObject=e.target,r.currentObject=null,r.dispatchEvent(t)})}r.items=r.items.concat(e),r.persist&&!zot(r.persistID)&&r.persist(r.persistID)},this.remove=function(e){if(zot(e))r.items=[];else{var t;Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){t=e[n],r.currentObject==t&&(r.currentObject=null),t.transformedEvent&&(t.off("transformed",t.transformedEvent),t.transformedEvent=null),"Blob"==t.type||"Squiggle"==t.type?t.controlsVisible=!1:t.transformControls.remove();var i=r.items.indexOf(t);-1!=i&&r.items.splice(i,1)}o&&r.savePersist()}},this.show=function(e){if(!zot(e)){if("Blob"==e.type||"Squiggle"==e.type)e.controlsVisible||(e.controlsVisible=!0);else{var t=e.transformControls;if(!t||t.visible)return;t.show()}r.currentObject=e}},this.hide=function(e){if(!zot(e))if(r.currentObject==e&&(r.currentObject=null),"Blob"==e.type||"Squiggle"==e.type)e.controlsVisible&&(e.controlsVisible=!1);else{var t=e.transformControls;if(!t||t.visible)return;t.hide()}},this.hideAll=function(e){for(var t,o,n=0;n<r.items.length;n++)if((o=r.items[n])&&(o.transformControls||o.update)){if(r.items[n]==e)continue;"Blob"==o.type||"Squiggle"==o.type?o.controlsVisible&&(o.controlsVisible=!1):(t=r.items[n].transformControls).visible&&t.hide()}else r.items.splice(n);r.currentObject=null},this.resize=function(){if(r){for(var e,t=0;t<r.items.length;t++)(e=r.items[t])&&(e.transformControls||e.update)?"Blob"==e.type||"Squiggle"==e.type?e.update():e.transformControls.resize():r.items.splice(t);o&&r.savePersist()}},zot(t)||r.add(t);var i="TransformManager persist(persistID) - sorry, must provide id";this.persist=function(t){var o;if(zot(t)&&zon)zog(i);else{r.persistID=t;var a=0;if(localStorage&&localStorage[t]){var l=r.persistData=JSON.parse(localStorage[t]);if(l.length==r.items.length)for(var s=0;s<r.items.length;s++)l[s].controls&&(r.currentObject=r.items[s]),!l[s]||"Blob"!=l[s].type&&"Squiggle"!=l[s].type?l[s]&&(zot(r.items[s].transformControls)?function(){o=r.items[s];var t=l[s];e.interval(50,function(e){o.transformControls&&(o.transformControls.setData(t),o.dispatchEvent("persistset"),++a==l.length&&(setTimeout(function(){o==r.currentObject&&r.currentObject.toggle(!0),r.dispatchEvent("persistcomplete")},100),e.clear()))},20,null,null,"ms")}():(r.items[s].transformControls.setData(l[s]),o=r.items[s],e.interval(50,function(e){o.dispatchEvent("persistset"),++a==l.length&&(setTimeout(function(){o==r.currentObject&&r.currentObject.toggle(!0),r.dispatchEvent("persistcomplete")},100),e.clear())},20,null,null,"ms"))):(r.items[s].points.length!=l[s].points.length&&(r.items[s].points=l[s].points),r.items[s].setData(l[s]),r.items[s]==r.currentObject&&r.currentObject.toggle(!0))}for(s=0;s<r.items.length;s++)(o=r.items[s]).transformedEvent||("Blob"==o.type||"Squiggle"==o.type?(o.transformedEvent=o.on("change",function(e){e.pressup=!0,n(e)}),o.transformedEvent=o.on("update",function(e){e.pressup=!0,n(e)}),o.transformedEvent=o.on("controlsshow",function(e){e.pressup=!0,n(e)}),o.transformedEvent=o.on("controlshide",function(e){e.pressup=!0,n(e)})):(o.transformedEvent=o.on("transformed",n),o.transformedEvent=o.on("transformshow",n),o.transformedEvent=o.on("transformhide",n)))}},this.savePersist=function(){for(var e=[],t=0;t<r.items.length;t++){var o=r.items[t];"Blob"==o.type||"Squiggle"==o.type?o.recordData&&e.push(o.recordData()):o.transformControls&&o.transformControls.recordData&&e.push(o.transformControls.recordData())}r.persistData=e,localStorage[r.persistID]=JSON.stringify(e)},this.clearPersist=function(e){zot(e)&&zon?zog(i):(r.persistData=null,localStorage&&localStorage.removeItem(e))},this.stopPersist=function(){for(var e=0;e<r.items.length;e++){var t=r.items[e];t.transformedEvent&&("Blob"==t.type||"Squiggle"==t.type?t.off("change",t.transformedEvent):t.off("transformed",t.transformedEvent),t.transformedEvent=null)}r.persistData=null},zot(o)||r.persist(o),this.dispose=function(e,t){if(zot(e)&&(e=!0),r.removeAllEventListeners(),r.persistID&&e&&r.stopPersist(),t)for(var o=0;o<r.items.length;o++){var n=r.items[o];"Blob"==n.type||"Squiggle"==n.type?n.dispose():n.transformControls.dispose()}}},e.extend(e.TransformManager,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.GuideManager=function(){z_d("77"),e.Manager.call(this,"GuideManager")},e.GuideManager.prototype=new e.Manager,e.GuideManager.prototype.constructor=e.GuideManager,e.GridManager=function(){z_d("79"),e.Manager.call(this,"GridManager")},e.GridManager.prototype=new e.Manager,e.GridManager.prototype.constructor=e.GridManager,e.LayoutManager=function(){z_d("81"),e.Manager.call(this,"LayoutManager")},e.LayoutManager.prototype=new e.Manager,e.LayoutManager.prototype.constructor=e.LayoutManager,e.SelectionSet=function(e){z_d("81.5"),this.type="SelectionSet",zot(e)&&(e=[]),this.selections=e,this.clear=function(){this.selections=[]},this.isSelected=function(e){return this.selections.indexOf(e)>=0},this.add=function(e,t,o,n){if(!(zot(e)||(zot(t)&&(zot(this.selectionManager)||(t=this.selectionManager.multiple)),zot(this.selectionManager)||(this.selectionManager.setCurrent(this),!t&&this.selectionManager.multipleSets&&this.selectionManager.clear()),t||this.clear(),this.selections.indexOf(e)>=0))){if(this.selections.push(e),!zot(o)){Array.isArray(o)||(o=[o]);for(var r=0;r<=o.length;r++)o[r].add(e,t)}if(!zot(n))for(Array.isArray(n)||(n=[n]),r=0;r<=n.length;r++)n[r].remove(e,t)}},this.remove=function(e,t,o,n){if(!zot(e)){zot(t)&&(zot(this.selectionManager)||(t=this.selectionManager.multiple)),zot(this.selectionManager)||this.selectionManager.setCurrent(this),t||this.clear();var r=this.selections.indexOf(e);if(zot(this.selectionManager)||(this.selectionManager.setCurrent(this),!t&&this.selectionManager.multipleSets&&this.selectionManager.clear()),t||this.clear(),t?r>=0&&this.selections.splice(r,1):this.clear(),!zot(o)){Array.isArray(o)||(o=[o]);for(var i=0;i<=o.length;i++)o[i].remove(e,t)}if(!zot(n))for(Array.isArray(n)||(n=[n]),i=0;i<=n.length;i++)n[i].add(e,t)}},this.toggle=function(e,t,o,n){this.isSelected(e)?this.remove(e,t,o,n):this.add(e,t,o,n)},this.dispose=function(){return this.clear(),this.selections=null,!0}},e.SelectionManager=function(e,t,o){z_d("81.6"),this.cjsEventDispatcher_constructor(),this.type="SelectionManager",zot(e)&&(e=[]),zot(o)&&(o=!0),Array.isArray(e)||(e=[e]),this.sets=e,this.multipleKey=t,this.multipleSets=o,this.multiple=!1;for(var n=this,r=0;r<e.length;r++)e[r].selectionManager=this;this.clear=function(){this.currentSet=null;for(var t=0;t<e.length;t++)e[t].clear()},this.setCurrent=function(t){this.currentSet=t;for(var o=0;o<e.length;o++)e[o]!=t&&(this.multipleSets||e[o].clear())};var i=new createjs.Event("keydown");this.eventRemove=i.remove,this.keydownEvent=function(e){e.remove=n.eventRemove,n.multipleKey&&(n.multiple=e[n.multipleKey+"Key"]),n.ctrlKey=e.ctrlKey,n.shiftKey=e.shiftKey,n.metaKey=e.metaKey,n.dispatchEvent(e),90==e.keyCode&&(n.ctrlKey||n.metaKey)&&n.dispatchEvent("undo")},window.addEventListener("keydown",this.keydownEvent),this.keyupEvent=function(e){n.multipleKey&&(n.multiple=e[n.multipleKey+"Key"]),n.ctrlKey=e.ctrlKey,n.shiftKey=e.shiftKey,n.metaKey=e.metaKey,e.remove=n.eventRemove,n.dispatchEvent(e)},window.addEventListener("keyup",this.keyupEvent),this.dispose=function(){this.clear(),window.removeEventListener("keydown",this.keydownEvent),window.removeEventListener("keyup",this.keyupEvent)}},e.extend(e.SelectionManager,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),void 0===l)var l;e.Bind=function(t,o,n,r,i,a,s,c){function u(t,o,n){function r(o){e.loop(l,function(n){var r=m.bindings[n];if(r){r.filter&&a.push(r.filter);var i=r.obj;e.loop(o||r.props,function(o){var r=m.toIDs[o];if(r&&r.indexOf(n)>=0)if("from"==t)s[n]||(s[n]=[]),s[n].push(o);else{s[n]||(s[n]={});var a=i[o];"number"==typeof a&&m.smartDecimals&&(a=a>1?e.decimals(a,1):e.decimals(a,2)),s[n][o]=e.copy(a)}})}})}function i(){var o=[];e.loop(n,function(n){e.loop(m.toIDs[n],function(r){var i=m.bindings[r];o.indexOf(r)<0&&(i.filter&&a.push(i.filter),o.push(r));var l=i.obj;if("from"==t)s[r]||(s[r]=[]),s[r].push(n);else{s[r]||(s[r]={});var c=l[n];"number"==typeof c&&m.smartDecimals&&(c=c>1?e.decimals(c,1):e.decimals(c,2)),s[r][n]=e.copy(c)}})})}var a=[];if(zot(o)&&zot(n)){if("from"==t&&m.bindType!=LOCALSTORAGE)return e.loop(m.bindings,function(e){e.filter&&a.push(e.filter)}),[a,"full"];var l=m.ids}else zot(o)||Array.isArray(o)||(o=[o]),zot(n)||Array.isArray(n)||(n=[n]),o&&(l=[],e.loop(o,function(t){if("string"==typeof t)l.indexOf(t)<0&&l.push(t);else{var o=m.objIDs.at(t);o&&e.loop(o,function(e){l.indexOf(e)<0&&l.push(e)})}}));var s={};return l?r(n):n&&i(),[a,s]}function d(t,o,n,r,i){var a=new z,l=null!=r&&!e.isEmpty(r)&&m.data;return h(a,i)?["stop",r]:(m.masterFilter&&"function"==typeof m.masterFilter&&(r=m.data=m.masterFilter(r,t,i,a)),"stop"==e.loop(n,function(e){if("function"==typeof e){if(h(a,i))return"stop";r=m.data=e(r,t,i,a)}})||h(a,i)?["stop",r]:(o&&"function"==typeof o&&(r=m.data=o(r,t,i,a)),h(a,i)?["stop",r]:(l&&!m.data&&zon&&zogy("Bind()"+(t?" ["+t+"]":"")+(i?" ["+i+"]":"")+" - warning, a filter may not have returned data"),["go",r])))}function h(e,t){if(m.stopped||e.stopped)return g("STOP"+(t?" ["+t+"]":""),e.stopped?"process stopped":"bind stopped"),e.stopped?e.stop=null:m.stopped=!1,!0}function g(e,t){m==l?zogl(e,t):zogd(e,t)}var p,f="connection, bindType, master, masterFilter, couple, smartDecimals, report, setDefault";if(p=zob(e.Bind,arguments,f,this))return p;z_d("81.8"),this.type="Bind";var m=this;zot(t)&&localStorage&&zot(l)&&(zot(o)||o==LOCALSTORAGE)?(t="zimBind",o=LOCALSTORAGE):t&&t.match(/\/|\./)?(zot(o)&&(o=GET),t.match(/\?/)?t+="&":t+="?"):t&&zot(o)&&(o=LOCALSTORAGE),zot(a)&&(a=!0),o!=LOCALSTORAGE||localStorage||(zon&&zogy("Bind() - no localStorage"),m.error="error - no localStorage"),this.connection=t,this.bindType=o,this.master=n,this.masterFilter=r,this.smartDecimals=a,zot(s)&&(s=!1),l&&!c||(l=this),Object.defineProperty(m,"default",{get:function(){return m==l},set:function(e){e||l!=m?e&&(l=m):l=null}}),this.bindType==POST&&(m.ajax=new e.Ajax),this.bindings={},this.ids=[],this.data={},this.objIDs=new e.Dictionary(!0),this.toIDs={},this.fromIDs={},this.add=function(t,o,n,r,i){function a(e,t,o){zot(e[t])?e[t]=[o]:e[t].indexOf(o)<0&&e[t].push(o)}if(zot(n)||zot(o)||zot(t))return m;if(m.bindings[t]){if(m.bindings[t].obj!=o)return zon&&zogy("Bind() - id can be used with only one object"),m}else{m.ids.indexOf(t)<=0&&m.ids.push(t),m.bindings[t]={obj:o,props:[]},zot(i)||"function"!=typeof i||(m.bindings[t].filter=i);var l=m.objIDs.at(o);l?l.indexOf(t)<0&&l.push(t):m.objIDs.add(o,[t])}Array.isArray(n)||n.constructor=={}.constructor||(n=[n]);var c=m.bindings[t].props;return Array.isArray(n)?e.loop(n,function(e){a(m.toIDs,e,t),a(m.fromIDs,e,t),c.indexOf(e)<0&&c.push(e)}):e.loop(n,function(o,n){n!=e.BOTH&&n!=e.TO||a(m.toIDs,o,t),n!=e.BOTH&&n!=e.FROM||a(m.fromIDs,o,t),c.indexOf(o)<0&&c.push(o)}),s&&g("Bind Report: ADD ["+t+"]",(n?" "+n:"")+(r?" "+r:"")),m.bindType==LOCALSTORAGE?(m.from(null,t,n,r),m.data&&!e.isEmpty(m.data)||m.to(t,n)):(d("bind",null,[i],m.data,r),m.applyData()),m},this.updatefilter=function(e,t){var o=m.bindings[e];return o&&(zot(t)?o.filter&&delete o.filter:"function"==typeof t&&(o.filter=t)),m},this.remove=function(t,o,n,r,a,l){function c(e,t){var o,n;(o=m.fromIDs[e])&&((n=o.indexOf(t))>=0&&o.splice(n,1),0==o.length&&delete m.fromIDs[e]),(o=m.toIDs[e])&&((n=o.indexOf(t))>=0&&o.splice(n,1),0==o.length&&delete m.toIDs[e])}function h(t,o){var n=m.bindings[t].obj,r=m.bindings[t].props,i=m.objIDs.at(n),a=i.indexOf(t);a>=0&&i.splice(a,1),o&&0==i.length&&f.push(n),(a=m.ids.indexOf(t))>=0&&m.ids.splice(a,1),e.loop(r,function(e){c(e,t)}),delete m.bindings[t]}if(zot(t)||Array.isArray(t)||(t=[t]),!zot(t)){var p=[],f=[];e.loop(t,function(e){"string"==typeof e?p.push(e):f.push(e)})}zot(o)||Array.isArray(o)||(o=[o]),zot(a)&&(a=!0),0==(t=p.concat(f)).length&&(t=null);var z=u("from",t,o,!1);if("stop"!=(b=d("remove",r,z[0],z=z[1],n))){var y=e.copy(z);if(zot(o)||0==o.length?(p.length>0&&e.loop(p,function(e){h(e,!0)}),f.length>0&&e.loop(f,function(t){(p=m.objIDs.at(t)).length>0&&e.loop(p,function(e){h(e,!1)}),m.objIDs.remove(t)})):(p=[],e.loop(z,function(t,o){var n=m.bindings[t].props;e.loop(o,function(e){var o=n.indexOf(e);o>=0&&n.splice(o,1),c(e,t)}),0==n.length&&p.push(t)}),p.length>0&&m.remove(p)),a){var v="type="+m.bindType+"&";if(m.bindType==LOCALSTORAGE)m.to(),w("success");else if(m.bindType==GET){var b=JSON.stringify(y);i&&(b=e.couple(b)),e.async(m.connection+v+"remove="+b,w,"callbackRemove")}else m.bindType==POST?m.ajax.post(m.connection+v,y,w,"remove"):m.bindType;function w(t){l&&"function"==typeof l&&(i&&(t=e.couple(t)),l(t)),s&&g("Bind Report: REMOVE"+(n?" ["+n+"]":""),t)}}return m}},this.stopProcess=!1,this.stop=function(){m.stopped=!0};var z=function(){var e=this;e.stop=function(){e.stopped=!0}};return this.to=function(t,o,r,a,l,c,h,p){function f(t){i&&(t=e.decouple(t)),c&&"function"==typeof c&&c(t),s&&g("Bind Report: TO"+(r?" ["+r+"]":" -"),t)}var z,y="targets, props, extra, filter, smartDecimals, call, lock, unique";if(z=zob(m.to,arguments,y))return z;var v=u("to",t,o,l),b=d("to",a,v[0],v=v[1],r);if(v=b[1],"stop"!=b[0]){if(m.bindType==LOCALSTORAGE)localStorage[m.connection]=JSON.stringify(v),f(v);else{var w="type="+m.bindType+"&";if(!v||e.isEmpty(v))return m;if(m.bindType==GET){var C=v;e.isJSON(C)||(C=JSON.stringify(C)),i&&(C=e.couple(C)),C=e.urlEncode(C);var x=zot(m.master)?"":"&master="+e.urlEncode(n),k=zot(h)?"":"&lock="+e.urlEncode(h),T=zot(p)?"":"&unique="+e.urlEncode(p),A=zot(r)?"":"&extra="+e.urlEncode(r);e.async(m.connection+w+"command=to&data="+C+x+k+T+A,f,"callbackTo")}else m.bindType==POST?(m.ajax.master=n,m.ajax.couple=i,m.ajax.lock=h,m.ajax.unique=p,m.ajax.post(m.connection+w,v,"to",r,f)):m.bindType}return m}},this.toLock=function(t,o,n,r,i,a){function l(){m.to(t,o,n,r,i,a,u)}var s,c="targets, props, extra, filter, smartDecimals, call";if(s=zob(m.toLock,arguments,c))return s;if("localstorage"==m.bindType.toLowerCase())return m.to(t,o,n,r,i,a),m;var u=e.makeID();m.from(l,t,o,n,r,u)},this.toUnique=function(e,t,o,n,r,i){var a,l="targets, props, extra, filter, smartDecimals, call";if(a=zob(m.toUnique,arguments,l))return a;m.to(e,t,o,n,r,i,null,!0)},this.toggleReport=function(e){return s=zot(e)?!s:e,m},s&&g("Bind Report: CREATE ["+o.toUpperCase()+"]",t+(n?" "+n:"")),this.report=function(){var t="Bind {DATA} Report:",o=e.copy(m.data);m==l?zogl(t,o):zogd(t,o)},this.from=function(t,o,r,l,c,h){function p(o){if(m.data=o,i&&(m.data=e.decouple(m.data)),!zot(h))var n=JSON.stringify(m.data);if("stop"!=d("from",c,v,m.data,l)[0]){var r=!1;(zot(h)||n!=JSON.stringify(m.data))&&(r=!0,m.applyData()),s&&g("Bind Report: FROM"+(l?" ["+l+"]":" -"),r?m.data:"data not applied in toLock()"),t&&"function"==typeof t&&t(m.data)}}var f,z="call, targets, props, extra, filter, lock";if(f=zob(m.from,arguments,z))return f;var y=u("from",o,r,a),v=y[0];y=y[1];var b=d("fromTo",c,v,y,l);if(y=b[1],"stop"!=b[0]){var w="type="+m.bindType+"&";if(m.bindType==LOCALSTORAGE)localStorage[m.connection]&&localStorage[m.connection]!=undefined||(localStorage[m.connection]="{}"),m.data=JSON.parse(localStorage[m.connection]),p(m.data);else if(m.bindType==GET){var C=y;e.isJSON(C)||(C=JSON.stringify(C)),i&&(C=e.couple(C)),C=e.urlEncode(C);var x=zot(m.master)?"":"&master="+e.urlEncode(n),k=zot(h)?"":"&lock="+e.urlEncode(h),T=zot(l)?"":"&extra="+e.urlEncode(l);e.async(m.connection+w+"data="+C+"&command=from"+x+k+T,p,"callbackFrom")}else m.bindType==POST?(m.ajax.master=n,m.ajax.couple=i,m.ajax.lock=h,m.ajax.post(m.connection+w,y,"from",l,p)):m.bindType;return m}},this.applyData=function(){return e.loop(m.data,function(t,o){if(m.bindings[t]){var n=m.bindings[t].obj;e.loop(o,function(e,t){n[e]=t})}}),m},this.clear=function(){return m.bindType==LOCALSTORAGE&&(localStorage[m.connection]=null),m},this.removeAllBindings=function(t,o){if(zot(t)&&(t=!0),this.bindings={},this.ids=[],this.data={},this.objIDs=new e.Dictionary(!0),this.toIDs={},this.fromIDs={},t){var r="type="+m.bindType+"&";if(m.bindType==LOCALSTORAGE)m.clear(),a("success");else if(m.bindType==GET){var i=zot(m.master)?"":"&master="+encodeURI(n);e.async(m.connection+r+"command=removeAll"+i,a,"callbackRemoveAll")}else m.bindType==POST?(m.ajax.master=n,m.ajax.post(m.connection+r,{},"removeAll",null,a,"removeAll")):m.bindType;function a(e){o&&"function"==typeof o&&o(e),s&&g("Bind Report: REMOVEALL",e)}}return m},m},e.Swipe=function(o,n,r,i,a){var l,s="obj, distance, duration, isometric, overrideNoSwipe";if(l=zob(e.Swipe,arguments,s,this))return l;if(z_d("70"),this.cjsEventDispatcher_constructor(),this.type="Swipe",!zot(o)&&o.on){zot(n)&&(n=30);var c,u,d,h,g,p,f=t(r);zot(r)&&(r="s"==f?.08:80),this.distance=n,this.duration=r,this.active=!0;var m,z,y=this,v=o.on("mousedown",function(t){function n(){var o=new createjs.Event("swipe");if(o.obj=y.obj,o.stageX=t.stageX/e.scaX,o.stageY=t.stageY/e.scaY,o.rawX=t.rawX/e.scaX,o.rawY=t.rawY/e.scaY,o.swipeX=o.swipeY=0,y.direction="none",i){if(Math.abs(d-c)>y.distance||Math.abs(h-u)>y.distance){var n=180*Math.atan2(h-u,d-c)/Math.PI;(n=(n+360)%360)>=270&&n<360?(o.swipeY=-1,y.direction="up"):n>=0&&n<90?(o.swipeX=1,y.direction="right"):n>=90&&n<180?(o.swipeY=1,y.direction="down"):n>=180&&n<270&&(o.swipeX=-1,y.direction="left")}}else Math.abs(d-c)>Math.abs(h-u)?(d-c>y.distance&&(o.swipeX=1,y.direction="right"),c-d>y.distance&&(o.swipeX=-1,y.direction="left")):(h-u>y.distance&&(o.swipeY=1,y.direction="down"),u-h>y.distance&&(o.swipeY=-1,y.direction="up"));y.dispatchEvent(o)}!y.active||!a&&t.target.zimNoSwipe||(y.obj=t.target,t.target.stage,d=c=t.stageX/e.scaX,h=u=t.stageY/e.scaY,g=!0,y.dispatchEvent("swipedown"),clearTimeout(p),p=setTimeout(function(){g&&(n(),g=!1)},y.duration*("s"==f?1e3:1)),m=o.on("pressmove",function(t){d=t.stageX/e.scaX,h=t.stageY/e.scaY}),z=o.on("pressup",function(){g&&(n(),g=!1,clearTimeout(p))}))});this.disable=function(){y.active=!1},this.enable=function(){y.active=!0},this.dispose=function(){v&&o.off("mousedown",v),m&&o.off("pressmove",m),z&&o.off("pressup",z)}}else zog("zim controls - Swipe():\nPlease pass in object")},e.extend(e.Swipe,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.Swiper=function(o,n,r,i,a,l,s,c,u,d,h,g){function p(t){I=t.target.stage,j=(B.parent?B.parent:B).localToGlobal(B.x,B.y),L=!0,"radial"==a?(startPosX=t.stageX/e.scaX,startPosY=t.stageY/e.scaY,M=Math.atan2(startPosY-j.y,startPosX-j.x)*DEG):x="horizontal"==a?t.stageX/e.scaX:t.stageY/e.scaY,k=S.target[S.property],S.dispatchEvent("swipedown")}function f(t){if("radial"==a){if(!L)return;var o=e.dist(startPosX,startPosY,t.stageX/e.scaX,t.stageY/e.scaY);O=Math.atan2(t.stageY/e.scaY-j.y,t.stageX/e.scaX-j.x)*DEG;var n=e.sign(M-O);if(Math.abs(O-M)>180)return void(L=!1);o*=n;var r=Math.max(10,e.dist(j.x,j.y,t.stageX/e.scaX,t.stageY/e.scaY));o*=(_-r)/_}else o=x-("horizontal"==a?t.stageX/e.scaX:t.stageY/e.scaY);if(Math.abs(o)>0&&(S.swiperMoving=!0),E=k-o*S.sensitivity*d,zot(l)||zot(s)||!h)zot(l)||(E=Math.max(E,l)),zot(s)||(E=Math.min(E,s));else{var i=E;E=(E+1e4*(s-l)-l)%(s-l)+l,Math.abs(i-E)>.8*Math.abs(s-l)&&(S.immediate(E),x="horizontal"==a?t.stageX/e.scaX:t.stageY/e.scaY,k=S.target[S.property])}S.desiredValue=E,S.dispatchEvent("swipemove")}function m(){B.off("stagemousedown",T),B.off("stagemousemove",A),B.off("stagemouseup",P)}function z(){B.off("mousedown",T),B.off("pressmove",A),B.off("pressup",P)}function y(){B.canvas?m():z(),e.Ticker.remove(S.target.swiperTicker)}function v(){B.canvas?T=B.on("stagemousedown",T):(T=B.on("mousedown",T),A=B.on("pressmove",A),P=B.on("pressup",P)),S.immediate(S.target[S.property]),S.target.swiperTicker=e.Ticker.add(S.target.swiperTicker,I)}var b,w="swipeOn, target, property, sensitivity, swiperType, min, max, damp, integer, factor, loop, pauseTime";if(b=zob(e.Swiper,arguments,w,this))return b;if(z_d("69.5"),this.cjsEventDispatcher_constructor(),this.type="Swiper",!zot(o)&&o.getStage&&o.stage){if(!zot(n)){zot(i)&&(i=1),zot(a)&&(a="horizontal"),zot(c)&&(c=.1),zot(u)&&(u=!1),zot(d)&&(d=1),zot(h)&&(h=!1);var C=t(g);zot(g)&&(g="s"==C?.2:200);var x,k,T,A,P,S=this,B=o,E=S.desiredValue=n[r];this.target=n,this.property=r,this.sensitivity=i;var I,M,O,j,L=!1;B.canvas?(T=B.on("stagemousedown",function(e){L=!0,p(e),A=B.on("stagemousemove",f),P=B.on("stagemouseup",function(){L=!1,B.off("stagemousemove",A),B.off("stagemouseup",P),S.dispatchEvent("swipeup")})}),I=B):(I=B.stage,z(),T=B.on("mousedown",p),A=B.on("pressmove",f),P=B.on("pressup",function(){L=!1,S.dispatchEvent("swipeup")}));var _=Math.sqrt(Math.pow(B.width,2)+Math.pow(B.height,2)),Y=new e.Damp(S.target[S.property],c),D=(S.target[S.property],E),X=E;S.target.swiperTicker=e.Ticker.add(function(){E==D?E!=X&&(S.pauseTimeout&&S.pauseTimeout.clear(),X=E,S.pauseTimeout=e.timeout(g,function(){L&&S.dispatchEvent("swipepause"),S.pauseTimeout=null})):(X=null,D=E,S.pauseTimeout&&S.pauseTimeout.clear()),S.swiperMoving&&(S.target[S.property]=u?Math.round(Y.convert(E)):Y.convert(E),!L&&Math.abs(S.target[S.property]-E)<(zot(s)||zot(l)?.5:Math.abs(s-l)/1e3)?(S.swiperMoving=!1,S.target[S.property]=E,S.immediate(S.target[S.property]),S.dispatchEvent("swipestop")):S.target[S.property])},I),this.immediate=function(e){Y.immediate(e),S.target[S.property]=u?Math.round(e):e,S.desiredValue=E=e};var R=!0;Object.defineProperty(S,"enabled",{get:function(){return R},set:function(e){R!=e&&(e?v():y(),R=Boolean(e))}}),Object.defineProperty(S,"desiredValue",{get:function(){return E},set:function(e){E=e}}),Object.defineProperty(S,"damp",{get:function(){return c},set:function(e){c=e,Y.damp=c}}),this.dispose=function(){y(),Y=null}}}else zog("zim.Swiper() - please provide container on stage")},e.extend(e.Swiper,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.MotionController=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x){function k(e){ue.rotation+=e.dirX*O.turnSpeed,O.rotation=ue.rotation,ue.speedX=Math.sin(ue.rotation*Math.PI/180)*O.speed*-e.dirY,ue.speedY=-Math.cos(ue.rotation*Math.PI/180)*O.speed*-e.dirY,O.x+=ue.speedX,O.y+=ue.speedY}function T(){var e=P(O.x-(_?O.target.percentSpeed:O.target.x),O.y-(_?O.target.percentSpeed:O.target.y));if(W=e.speedX,H=e.speedY,x)if(zot(e.angle)||(O.rotation=e.angle+t.zimMCStartAngle),zot(O.rotation))O.rotation=O.target.rotation;else{O.rotation+=F;var o=A(O.rotation),n=O.target.rotation=A(O.target.rotation);Math.abs(o-n)>180&&(n>o?n-=360:o-=360),O.dampR.immediate(n),O.target.rotation=n,O.rotation=o}}function A(e){return(e%360+360)%360}function P(e,t){var o,n=O.speed,r=O.speed,i=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return i>0&&(n=Math.abs(e)/i*O.speed,r=Math.abs(t)/i*O.speed,o=90-180*Math.atan2(e,t)/Math.PI),{speedX:n,speedY:r,angle:o}}function S(){"keydown"==o?(re=L.on("keydown",re),le&&(le=L.on("keyup",le)),de=e.Ticker.add(de,M)):"gamebutton"==o?(ie=ge.on("buttondown",ie),se&&(se=ge.on("buttonup",se)),de=e.Ticker.add(de,M)):"gamestick"==o?pe=ge.on("data",pe):"swipe"==o?(fe.enabled=!0,me.enabled=!0,ze&&(ze=fe.on("swipemove",ze))):"mousedown"==o||"mousemove"==o?V=M.on("stage"+o,V):"pressmove"==o&&(V=M.on("stagemousedown",V),N&&(N=M.on("stagemousemove",N)),G&&(G=M.on("stagemouseup",G))),Te=e.Ticker.add(Te,M)}function B(){"keydown"==o?(L.off("keydown",re),L.off("keyup",le),e.Ticker.remove(de)):"gamebutton"==o?(ge.off("buttondown",ie),ge.off("buttonup",se),
e.Ticker.remove(de)):"gamestick"==o?ge.off("data",pe):"swipe"==o?(fe.enabled=!1,me.enabled=!1,fe.off("swipemove",ze)):"mousedown"==o||"mousemove"==o?M.off("stage"+o,V):"pressmove"==o&&(M.off("stagemousedown",V),M.off("stagemousemove",N),M.off("stagemouseup",G)),e.Ticker.remove(Te)}var E,I="target, type, speed, axis, boundary, map, diagonal, damp, flip, orient, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold, container, localBounds, mouseMoveOutside, mousedownIncludes, minPercentSpeed, maxPercentSpeed, dampKeyup, rotate";if(E=zob(e.MotionController,arguments,I,this))return E;z_d("69.7"),this.cjsEventDispatcher_constructor(),this.type="MotionController";var M,O=this,j="zim MotionController(): Please pass in a reference to the stage or a container on the stage";if(zot(m)){if(!zdf)return void zog(j);M=m=zdf.stage}else if(zot(m.stage)){if(!zdf)return void zog(j);M=zdf.stage}else M=m.stage;var L=M.frame;zot(u)||(x=u),zot(t)&&(t=new e.Container(1,1,null,null,!1));var _="Accelerator"==t.type;if(zot(n)&&(n=7),!zot(o)&&"DPad"==o.type){var Y=o;o="manual",zot(r)&&(r=Y.axis),"all"==r&&(r="both"),t.x,t.y,Y.on("change",function(){O.convert(t.x+Y.dirX*n,t.y+Y.dirY*n)})}(zot(o)||"mousemove"!=o&&"pressmove"!=o&&"pressdrag"!=o&&"keydown"!=o&&"gamebutton"!=o&&"gamestick"!=o&&"swipe"!=o&&"follow"!=o&&"manual"!=o)&&(o="mousedown"),zot(r)&&(r=_?"horizontal":"both"),"keydown"==o&&zot(a)&&(a=[[65,37],[68,39],[87,38],[83,40]]),"gamebutton"==o&&zot(a)&&(a=h?[14,15,e.GamePad.RT,e.GamePad.LT]:[14,15,12,13]),"gamestick"==o&&zot(a)&&(a=h?[[0,2],[0,2],[1],[1]]:[0,0,1,1]),"gamestick"==o&&zot(a)&&(a=[0,0,1,1]),zot(l)&&(l=!0),"horizontal"!=r&&"vertical"!=r||(l=!1),zot(s)&&(s="keydown"==o||"gamebutton"==o?1:"pressmove"==o?.2:.1),zot(h)&&(h=!1),zot(g)&&(g=.4*n),zot(p)&&(p=4),zot(f)&&(f=.2),zot(y)&&(y=!1),M.mouseMoveOutside=y,zot(v)&&(v=[]),Array.isArray(v)||(v=[v]),"Pen"!=t.type||t.move?v.push(t):v.push(t,t.paper),t.motionController=this,this.mousedownIncludes=v,zot(C)&&(C=.3),O.dampKeyup=C,this.dirX=0,this.dirY=0,this.speed=n,this.turnSpeed=g,this.axis=r,this.target=t,this.moveThreshold=p,this.stickThreshold=f,this.boundary=i,t.zimMCStartAngle=t.rotation;var D,X,R,W=O.speed,H=O.speed,F=0;O.rotation=t.zimMCStartAngle,_?(R=!(X=m.getBounds())||"vertical"==r&&!X.height||"vertical"!=r&&!X.width?1e3:"vertical"==r?X.height:X.width,zot(b)&&(b=0),zot(w)&&(w=100),zot(this.target.percentSpeed)&&(this.target.percentSpeed=(w-b)/2),O.x=R/2,O.y=R/2,D=new e.Proportion(0,R,b,w)):(O.x=this.target.x,O.y=this.target.y);var V,N,G,q,Q=O.scaleX=t.scaleX,U=O.scaleY=t.scaleY,K=!1,Z=!1;if("keydown"==o||"gamebutton"==o){for(var J=0;J<4;J++)Array.isArray(a[J])||(a[J]=[a[J]]);var $=[0,0,0,0],ee=[],te=["X","X","Y","Y"],oe=[-1,1,-1,1],ne={dirX:0,dirY:0};if("keydown"==o)var re=L.on("keydown",ae);else var ie=(ge=O.gamepad=new e.GamePad).on("buttondown",ae);function ae(e){var t,n="keydown"==o?e.keyCode:e.buttonCode;for(J=0;J<4;J++)if(a[J].indexOf(n)>-1){if(l||"both"!=O.axis||(ne.dirX=ne.dirY=0),ne["dir"+te[J]]=oe[J],$[J]=1,0==(t=ee.indexOf(J)))return;return t>0&&ee.splice(t,1),void ee.unshift(J)}}if(zot(d))if("keydown"==o)var le=L.on("keyup",ce);else var se=ge.on("buttonup",ce);function ce(e){var t,n="keydown"==o?e.keyCode:e.buttonCode;for(J=0;J<4;J++)if(a[J].indexOf(n)>-1){if($[J]=0,(t=ee.indexOf(J))>=0&&ee.splice(t,1),"both"!=O.axis||l)ne["dir"+te[J]]=-$[2*Math.floor(J/2)]+$[2*Math.floor(J/2)+1];else if(ee.length>0){ne["dir"+te[J]]=0;var r=ee[0];ne["dir"+te[r]]=oe[r]}else ne.dirX=ne.dirY=0;return}}var ue={rotation:0,speedX:O.speed,speedY:O.speed},de=e.Ticker.add(function(){if(h)k(ne);else{var e=O.speed,t=O.speed;if("both"==O.axis&&0!=ne.dirX&&0!=ne.dirY){var o=P(ne.dirX,ne.dirY);e=o.speedX,t=o.speedY}"horizontal"!=O.axis&&"both"!=O.axis||(O.x+=e*ne.dirX),"vertical"!=O.axis&&"both"!=O.axis||(O.y+=t*ne.dirY),T()}},M)}else if("mousedown"==o||"mousemove"==o)V=M.on("stage"+o,function(t){if(M=t.target.stage,"mousedown"==o){if(Array.isArray(O.mousedownIncludes)||(O.mousedownIncludes=[O.mousedownIncludes]),O.mousedownIncludes.indexOf(m)<0)for(var n=0;n<m.numChildren;n++){var r=m.getChildAt(n);if(-1==O.mousedownIncludes.indexOf(r)&&r.mouseEnabled&&r.hitTestPoint&&r.hitTestPoint(t.stageX/e.scaX,t.stageY/e.scaY))return}O.dispatchEvent("mousedown")}var i=m.globalToLocal(y?t.rawX/e.scaX:t.stageX/e.scaX,y?t.rawY/e.scaY:t.stageY/e.scaY);O.x=i.x,O.y=i.y,T()});else if("pressmove"==o||"pressdrag"==o||"follow"==o){function he(){var e=m.globalToLocal(O.moveX,O.moveY);O.x=e.x,O.y=e.y,T(),"Pen"==t.type&&!Z&&t.drawing&&(Z=!0)}"Pen"==t.type&&(t.write=!1),V=M.on("stagemousedown",function(n){if("Pen"==t.type&&O.boundary){var i={x:n.stageX/e.scaX,y:n.stageY/e.scaY};if(i.x<O.boundary.x||i.x>O.boundary.x+O.boundary.width||i.y<O.boundary.y||i.y>O.boundary.y+O.boundary.height)return}if("pressdrag"!=o||t.hitTestPoint(n.stageX/e.scaX,n.stageY/e.scaY)){Z=!1,Array.isArray(O.mousedownIncludes)||(O.mousedownIncludes=[O.mousedownIncludes]);var a,l=!1;O.mouseDownIncludes&&(a=M.getObjectUnderPoint(n.stageX,n.stageY,1));for(var s=0;s<O.mousedownIncludes.length;s++)a&&O.mousedownIncludes[s].hitTestPoint&&O.mousedownIncludes[s].hitTestPoint(n.stageX/e.scaX,n.stageY/e.scaY)&&O.mousedownIncludes[s].contains(a)&&(l=!0);if(!l)for(s=0;s<m.numChildren;s++){var c=m.getChildAt(s);if(-1==O.mousedownIncludes.indexOf(c)&&c.mouseEnabled&&c.hitTestPoint&&c.hitTestPoint(n.stageX/e.scaX,n.stageY/e.scaY))return}var u=m.globalToLocal(y?n.rawX/e.scaX:n.stageX/e.scaX,y?n.rawY/e.scaY:n.stageY/e.scaY);"follow"!=o&&"pressdrag"!=o&&O.immediate("both"==r||"horizontal"==r?u.x:null,"both"==r||"vertical"==r?u.y:null),T(),O.dispatchEvent("mousedown"),K=!0,O.moveX=y?n.rawX/e.scaX:n.stageX/e.scaX,O.moveY=y?n.rawY/e.scaY:n.stageY/e.scaY,N=M.on("stagemousemove",function(t){O.moveX=y?t.rawX/e.scaX:t.stageX/e.scaX,O.moveY=y?t.rawY/e.scaY:t.stageY/e.scaY,"follow"!=o&&he()}),q&&e.Ticker.remove(q),"follow"==o&&(q=e.Ticker.add(he)),"Pen"==t.type&&(t.write=!0,t.zimDragCheck=!0)}}),G=M.on("stagemouseup",function(){"Pen"==t.type&&(t.write=!1,t.zimDragCheck=!1,Z&&t.stopCheck()),q&&e.Ticker.remove(q),M.off("stagemousemove",N),K=!1})}else if("gamestick"==o){var ge=this.gamepad=new e.GamePad;for(J=0;J<4;J++)Array.isArray(a[J])||(a[J]=[a[J]]);ue={rotation:t.zimMCStartAngle,speedX:O.speed,speedY:O.speed};var pe=ge.on("data",function(e){ne={dirX:0,dirY:0};for(var t=0;t<a[0].length;t++){var o=e.axes[a[0][t]];if(Math.abs(o)>O.stickThreshold){ne.dirX=o;break}}for(t=0;t<a[2].length;t++)if(o=e.axes[a[2][t]],Math.abs(o)>O.stickThreshold){ne.dirY=o;break}h?k(ne):(O.x+=O.speed*ne.dirX,O.y+=O.speed*ne.dirY,T())})}else if("swipe"==o)var fe=new e.Swiper(M,O,"x",.8),me=new e.Swiper(M,O,"y",.8,!1),ze=fe.on("swipemove",function(){T()});var ye=this.x,ve=this.y,be=this.x=_?R/2:this.target.x,we=this.y=_?R/2:this.target.y;this.dampX=new e.Damp(be,s),this.dampY=new e.Damp(we,s),this.dampR=new e.Damp(this.target.rotation,s);var Ce,xe=0,ke=0,Te=e.Ticker.add(function(){if("manual"==o&&T(),O.boundary&&"Blob"!=O.boundary.type&&(O.x=e.constrain(O.x,O.boundary.x,O.boundary.x+O.boundary.width),O.y=e.constrain(O.y,O.boundary.y,O.boundary.y+O.boundary.height)),"horizontal"==O.axis||"both"==O.axis){if(O.dirX=e.sign(O.x-be),Math.abs(O.x-be)<W?be=O.x:be+=O.dirX*W,ne&&0==ne.dirX){var n=O.boundary?O.boundary.width/2:M.width/2,r=O.x-(O.x-n)*(_?O.dampKeyup:0);be=r,O.x=be}_&&X&&X.width?O.target.percentSpeed=D.convert(O.dampX.convert(be)):O.target.x=O.dampX.convert(be)}if("vertical"==O.axis||"both"==O.axis){if(O.dirY=e.sign(O.y-we),Math.abs(O.y-we)<H?we=O.y:we+=e.sign(O.y-we)*H,ne&&0==ne.dirY){n=O.boundary?O.boundary.height/2:M.height/2;var i=O.y-(O.y-n)*(_?O.dampKeyup:0);we=i,O.y=we}_&&X&&X.height?O.target.percentSpeed=D.convert(O.dampY.convert(we)):O.target.y=O.dampY.convert(we)}if(O.boundary&&"Blob"==O.boundary.type&&(O.boundary.shape.hitTestPoint(O.target.x,O.target.y)?(ye=O.target.x,ve=O.target.y):(O.target.x=O.x=ye,O.target.y=O.y=ve,O.immediate(ye,ve))),"pressmove"==o&&K&&O.dispatchEvent("pressing"),O.movingX=Math.abs(be-(_?O.target.percentSpeed:O.target.x))>O.moveThreshold,O.movingY=Math.abs(we-(_?O.target.percentSpeed:O.target.y))>O.moveThreshold,!O.moving||O.movingX||O.movingY?O.moving||!O.movingX&&!O.movingY||O.dispatchEvent("startmoving"):O.dispatchEvent("stopmoving"),O.moving=O.movingX||O.movingY,O.moving&&O.dispatchEvent("moving"),O.dirX!=xe||O.dirY!=ke){var a=new createjs.Event("change");if(O.dirX!=xe){var l=["left",null,"right"];a.dir=l[O.dirX+1],xe=O.dirX,t.zimMCStartAngle||"horizontal"!=c&&"both"!=c||(O.scaleX=t.scaleX=O.dirX?Math.abs(t.scaleX)*O.dirX:t.scaleX,F=0!=Q&&-1==Math.round(O.scaleX/Q)?180:0)}else l=["up",null,"down"],a.dir=l[O.dirY+1],ke=O.dirY,t.zimMCStartAngle||"vertical"!=c&&"both"!=c||(O.scaleY=t.scaleY=O.dirY?Math.abs(t.scaleY)*O.dirY:t.scaleY,F=0!=U&&-1==Math.round(O.scaleY/U)?180:0);O.dispatchEvent(a)}x&&!zot(O.rotation)&&(O.target.rotation=O.dampR.convert(O.rotation))},M);this.immediate=function(e,t,o){return!zot(e)&&O.dampX&&(O.dampX.immediate(e),O.x=_?O.target.percentSpeed=be=e:O.target.x=be=e,fe&&fe.immediate(e)),!zot(t)&&O.dampY&&(O.dampY.immediate(t),O.y=_?O.target.percentSpeed=we=t:O.target.y=we=t,me&&me.immediate(t)),!zot(o)&&O.dampR&&(O.dampR.immediate(o),O.rotation=O.target.rotation=o),ye=O.x,ve=O.y,O},this.convert=function(e,t){zot(e)||(O.x=e),zot(t)||(O.y=t),T()},Object.defineProperty(O,"pausingSpeed",{get:function(){return O.speed},set:function(e){O.speed=e}}),this.paused=!1,this.pause=function(t,o){return zot(t)&&(t=!0),zot(o)&&(o=0),t?(Ce=O.speed,o>0?e.animate({target:O,obj:{pausingSpeed:0},ticker:!1,time:o,call:function(){O.speed=0,O.paused=!0,O.enabled=!1,O.immediate(O.target.x,O.target.y),O.dispatchEvent("pause")}}):(O.speed=0,O.paused=!0,O.enabled=!1,O.immediate(O.target.x,O.target.y),setTimeout(function(){O.dispatchEvent("pause")},10))):(O.enabled=!0,o>0?e.animate({target:O,obj:{pausingSpeed:Ce},ticker:!1,time:o,call:function(){O.speed=Ce,O.paused=!1}}):(O.speed=Ce,O.paused=!1)),O};var Ae=!0;Object.defineProperty(O,"enabled",{get:function(){return Ae},set:function(e){Ae!=e&&(e?(S(),O.paused=!1):(B(),O.paused=!0),Ae=Boolean(e))}}),this.dispose=function(){B(),ge&&ge.dispose(),fe&&fe.dispose(),me&&fe.dispose()}},e.extend(e.MotionController,createjs.EventDispatcher,"enabled","cjsEventDispatcher"),e.GamePad=function(){function e(e){function r(){if(o=requestAnimationFrame(r),n.data=navigator.getGamepads()[n.currentIndex],n.data){for(var e=n.buttons=[],t=0;t<n.data.buttons.length;t++)if(e[t]=n.data.buttons[t].pressed,e[t]!=n.lastData[t]){if(n.lastData[t]=e[t],e[t])var i=new createjs.Event("buttondown");else i=new createjs.Event("buttonup");i.buttonCode=t,i.button=s[t],n.dispatchEvent(i)}(i=new createjs.Event("data")).axes=n.axes=n.data.axes,i.buttons=n.buttons,n.dispatchEvent(i)}}n.connected=!0,t("gamepadconnected",e);var i=navigator.getGamepads()[n.currentIndex];n.lastData=[];for(var a=0;a<i.buttons.length;a++)n.lastData[a]=i.buttons[a].pressed;r()}function t(e,t){var o=new createjs.Event(e);o.index=t.gamepad.index,o.id=t.gamepad.id,o.buttons=t.gamepad.buttons,o.axes=t.gamepad.axes,n.dispatchEvent(o)}if(z_d("69.8"),this.type="GamePad",this.cjsEventDispatcher_constructor(),!navigator.getGamepads)return this.error=!0,void(zon&&zog("zim.GamePad() - no browswer support"));var o;window.addEventListener("gamepadconnected",e),this.currentIndex=0;var n=this,r=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(n.connected||e(),clearInterval(r))},500),i=function(e){e.gamepad.index==n.currentIndex&&(cancelAnimationFrame(o),n.connected=!1,n.dispatchEvent("gamepaddisconnected"))};window.addEventListener("gamepaddisconnected",i),this.dispose=function(){window.removeEventListener("gamepadconnected",e),window.removeEventListener("gamepaddisconnected",i),cancelAnimationFrame(o),clearInterval(r),n.connected=!1}};for(var s=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"],c=0;c<s.length;c++)e.GamePad[s[c]]=c;var u,d,h=["LSX","LSY","RSX","RSY"];for(c=0;c<h.length;c++)e.GamePad[h[c]]=c;for(e.extend(e.GamePad,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Portal=function(t,o){function n(){o.setChildIndex(s,0),s=c,c=o.getChildAt(o.numChildren-2),o.setChildIndex(c,o.numChildren-1),s.setMask(null),c.setMask(t),t.stage.update()}var r,i="obj, lands";if(r=zob(e.Portal,arguments,i,this))return r;if(z_d("69.96"),!zot(t)&&t.stage){this.type="Portal";var a=this,l=o&&o.numChildren&&o.numChildren>0;if(l){var s=o.getChildAt(o.numChildren-1),c=o.getChildAt(o.numChildren-2);o.setChildIndex(c,o.numChildren-1),c.setMask(t)}t.on(e.mobile()?"mousedown":"mouseover",function(){a._enabled&&(l&&n(),a.dispatchEvent("enter"))}),t.on(e.mobile()?"pressup":"mouseout",function(){a._enabled&&a.dispatchEvent("exit")}),Object.defineProperty(this,"portal",{get:function(){return t},set:function(e){!zot(e)&&e.stage||!zon?c.setMask(t):zog("zim.Portal() - please provide a Display Object to act as the portal")}}),Object.defineProperty(this,"currentLand",{get:function(){return s},set:function(e){if(o.contains(e))for(;e!=s;)n()}}),Object.defineProperty(this,"nextLand",{get:function(){return c},set:function(){zon&&zog("zim.Portal() - nextLand is read only - remake Portal to change")}}),this._enabled=!0,Object.defineProperty(a,"enabled",{get:function(){return a._enabled},set:function(e){a._enabled=e}}),this.dispose=function(){}}},e.extend(e.Portal,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),window.zimContactListener=null,e.BlurEffect=function(t,o,n,r,i,a){function l(){return arguments}var s,c="blurX, blurY, quality, style, group, inherit";if(s=zob(e.BlurEffect,arguments,c,this))return s;z_d("69.972"),this.group=i;var u=!1===r?{}:e.getStyle("BlurEffect",i,a);zot(t)&&(t=null!=u.blurX?u.blurX:10),zot(o)&&(o=null!=u.blurY?u.blurY:10),zot(n)&&(n=null!=u.quality?u.quality:1);var d=l(t,o,n);t=zik(t),o=zik(o),n=zik(n),this.createjsBlurFilter_constructor(t,o,n),this.type="BlurEffect",this.clone=function(i){return new e.BlurEffect(i||!e.isPick(d[0])?t:d[0],i||!e.isPick(d[1])?o:d[1],i||!e.isPick(d[2])?n:d[2],r,this.group,a)}},e.extend(e.BlurEffect,createjs.BlurFilter,"clone","createjsBlurFilter",!1),e.GlowEffect=function(t,o,n,r,i,a,l,s,c,u,d,h){function g(){return arguments}var p,f="color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit";if(p=zob(e.GlowEffect,arguments,f,this))return p;z_d("69.9725"),this.group=d;var m=!1===u?{}:e.getStyle("GlowEffect",d,h);zot(t)&&(t=null!=m.color?m.color:"white"),zot(o)&&(o=null!=m.alpha?m.alpha:1),zot(n)&&(n=null!=m.blurX?m.blurX:30),zot(r)&&(r=null!=m.blurY?m.blurY:30),zot(i)&&(i=null!=m.strength?m.strength:1),zot(a)&&(a=null!=m.quality?m.quality:1),zot(l)&&(l=null!=m.inner&&m.inner),zot(s)&&(s=null!=m.knockout&&m.knockout),zot(c)&&(c=null!=m.hideObject&&m.hideObject);var z=g(t,o,n,r,i,a,l,s,c);n=zik(n),r=zik(r),a=zik(a),t=zik(t),this.alpha=zik(o),this.strength=zik(i),this.inner=zik(l),this.knockout=zik(s),this.hideObject=zik(c),this.createjsBlurFilter_constructor(n,r,a),this.type="GlowEffect",this.usesContext=!0,this.applyFilter=function(e,t,o,n,r,i,a,l){if((this.alpha<=0||this.strength<=0)&&!this.knockout)return!0;i=i||e,a===undefined&&(a=t),l===undefined&&(l=o);var s=i.getImageData(a,l,n,r).data,c=document.createElement("canvas");c.width=n,c.height=r;for(var u=c.getContext("2d"),d=u.getImageData(0,0,n,r),h=d.data,g=this.inner,p=this._red,f=this._green,m=this._blue,z=0,y=h.length;z<y;z+=4){var v=z+3,b=s[v];g?255!==b&&(h[z]=p,h[z+1]=f,h[z+2]=m,h[v]=255-b):0!==b&&(h[z]=p,h[z+1]=f,h[z+2]=m,h[v]=b)}u.putImageData(d,0,0);var w=this.strength;if(0<w){this.createjsBlurFilter_applyFilter(u,0,0,n,r),255<w&&(w=255);for(var C=1;C<w;C++)u.drawImage(c,0,0)}var x,k=this.alpha;return k<0?k=0:1<k&&(k=1),this.knockout?x=g?"source-in":"source-out":this.hideObject?(zog("hdfd"),x=g?"source-in":"copy"):x=g?"source-atop":"destination-over",i.save(),i.setTransform(1,0,0,1,0,0),i.globalAlpha=k,i.globalCompositeOperation=x,i.drawImage(c,a,l),i.restore(),!0},Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(t){t=e.convertColor(t,"hexNumber"),this._red=t>>16&255,this._green=t>>8&255,this._blue=255&t}}),this.color=t,this.clone=function(c){return new e.GlowFilter(c||!e.isPick(z[0])?t:z[0],c||!e.isPick(z[1])?o:z[1],c||!e.isPick(z[2])?n:z[2],c||!e.isPick(z[3])?r:z[3],c||!e.isPick(z[4])?a:z[4],c||!e.isPick(z[5])?i:z[5],c||!e.isPick(z[6])?l:z[6],c||!e.isPick(z[7])?s:z[7],c||!e.isPick(z[8])?s:z[8],u,this.group,h)}},e.extend(e.GlowEffect,createjs.BlurFilter,["clone","applyFilter"],"createjsBlurFilter",!1),e.ShadowEffect=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p){function f(){return arguments}function m(t,o){var n=o*e.RAD;w._offsetX=Math.cos(n)*t,w._offsetY=Math.sin(n)*t}var z,y="distance, angle, color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit";if(z=zob(e.ShadowEffect,arguments,y,this))return z;z_d("69.973"),this.group=g;var v=!1===h?{}:e.getStyle("ShadowEffect",g,p);zot(t)&&(t=null!=v.distance?v.distance:10),zot(o)&&(o=null!=v.angle?v.angle:45),zot(n)&&(n=null!=v.color?v.color:black),zot(r)&&(r=null!=v.alpha?v.alpha:.4),zot(i)&&(i=null!=v.blurX?v.blurX:15),zot(a)&&(a=null!=v.blurY?v.blurY:15),zot(l)&&(l=null!=v.strength?v.strength:1),zot(s)&&(s=null!=v.quality?v.quality:1),zot(c)&&(c=null!=v.inner&&v.inner),zot(u)&&(u=null!=v.knockout&&v.knockout),zot(d)&&(d=null!=v.hideObject&&v.hideObject);var b=f(t,o,n,r,i,a,l,s,c,u,d);i=zik(i),a=zik(a),s=zik(s),n=zik(n),t=zik(t),o=zik(o);var w=this;this.alpha=zik(r),this.strength=zik(l),this.inner=zik(c),this.knockout=zik(u),this.hideObject=zik(d),this.createjsBlurFilter_constructor(i,a,s),this.type="ShadowEffect",this.usesContext=!0,Object.defineProperty(this,"angle",{get:function(){return o},set:function(e){o=e=(e%360+360)%360,m(t,e)}}),this.angle=o,Object.defineProperty(this,"distance",{get:function(){return t},set:function(e){t=e,m(e,o)}}),this.distance=t,Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(t){t=e.convertColor(t,"hexNumber"),this._red=t>>16&255,this._green=t>>8&255,this._blue=255&t}}),this.color=n,this.applyFilter=function(e,t,o,n,r,i,a,l){if((this.alpha<=0||this.strength<=0)&&!this.knockout&&!this.hideObject)return!0;i=i||e,a===undefined&&(a=t),l===undefined&&(l=o);var s=i.getImageData(a,l,n,r).data,c=document.createElement("canvas");c.width=n,c.height=r;for(var u=c.getContext("2d"),d=u.getImageData(0,0,n,r),h=d.data,g=this.inner,p=this._red,f=this._green,m=this._blue,z=0,y=h.length;z<y;z+=4){var v=z+3,b=s[v];g?255!==b&&(h[z]=p,h[z+1]=f,h[z+2]=m,h[v]=255-b):0!==b&&(h[z]=p,h[z+1]=f,h[z+2]=m,h[v]=b)}u.putImageData(d,0,0);var w=this.strength;if(0<w){this.createjsBlurFilter_applyFilter(u,0,0,n,r),255<w&&(w=255);for(var C=1;C<w;C++)u.drawImage(c,0,0)}var x,k=this.alpha;return k<0?k=0:1<k&&(k=1),x=this.knockout?g?"source-in":"source-out":this.hideObject?g?"source-in":"copy":g?"source-atop":"destination-over",i.save(),i.setTransform(1,0,0,1,0,0),i.globalAlpha=k,i.globalCompositeOperation=x,i.drawImage(c,a+this._offsetX,l+this._offsetY),i.restore(),!0},this.getBounds=function(e){var t=this.createjsBlurFilter_getBounds(e),o=this._offsetX,n=this._offsetY;return 0!==o&&(o<0?(t.x+=o,t.width+=-o):t.width+=o),0!==n&&(n<0?(t.y+=n,t.height+=-n):t.height+=n),t},this.clone=function(g){return new e.ShadowFilter(g||!e.isPick(b[0])?t:b[0],g||!e.isPick(b[1])?o:b[1],g||!e.isPick(b[2])?n:b[2],g||!e.isPick(b[3])?r:b[3],g||!e.isPick(b[4])?i:b[4],g||!e.isPick(b[5])?a:b[5],g||!e.isPick(b[6])?s:b[6],g||!e.isPick(b[7])?l:b[7],g||!e.isPick(b[8])?c:b[8],g||!e.isPick(b[9])?u:b[9],g||!e.isPick(b[10])?d:b[10],h,this.group,p)}},e.extend(e.ShadowEffect,createjs.BlurFilter,["clone","getBounds","applyFilter"],"createjsBlurFilter",!1),e.ColorEffect=function(t,o,n,r,i,a,l,s,c,u,d){function h(){return arguments}var g,p="redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset, style, group, inherit";if(g=zob(e.ColorEffect,arguments,p,this))return g;z_d("69.9735"),this.group=u;var f=!1===c?{}:e.getStyle("ColorEffect",u,d);zot(t)&&(red=null!=f.redMultiplier?f.redMultiplier:1),zot(o)&&(green=null!=f.greenMultiplier?f.greenMultiplier:1),zot(n)&&(blue=null!=f.blueMultiplier?f.blueMultiplier:1),zot(r)&&(alpha=null!=f.alphaMultiplier?f.alphaMultiplier:1),zot(i)&&(i=null!=f.redOffset?f.redOffset:0),zot(a)&&(a=null!=f.greenOffset?f.greenOffset:0),zot(l)&&(l=null!=f.blueOffset?f.blueOffset:0),zot(s)&&(s=null!=f.alphaOffset?f.alphaOffset:0);var m=h(t,o,n,r,i,a,l,s);t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),a=zik(a),l=zik(l),s=zik(s),this.createjsColorFilter_constructor(t,o,n,r,i,a,l,s),this.type="ColorEffect",this.clone=function(u){return new e.ColorEffect(t,o,n,r,i,a,l,s(u||!e.isPick(m[0]))?t:m[0],u||!e.isPick(m[1])?o:m[1],u||!e.isPick(m[2])?n:m[2],u||!e.isPick(m[2])?r:m[3],u||!e.isPick(m[2])?i:m[4],u||!e.isPick(m[2])?a:m[5],u||!e.isPick(m[2])?l:m[6],u||!e.isPick(m[2])?s:m[7],c,this.group,d)}},e.extend(e.ColorEffect,createjs.ColorFilter,"clone","createjsColorFilter",!1),e.MultiEffect=function(t,o,n,r,i,a,l){function s(){return arguments}var c,u="hue, saturation, brightness, contrast, style, group, inherit";if(c=zob(e.MultiEffect,arguments,u,this))return c;z_d("69.974"),this.group=a;var d=!1===i?{}:e.getStyle("MultiEffect",a,l);zot(t)&&(t=null!=d.hue?d.hue:0),zot(o)&&(o=null!=d.saturation?d.saturation:0),zot(n)&&(n=null!=d.brightness?d.brightness:0),zot(r)&&(r=null!=d.contrast?d.contrast:0);var h=s(t,o,n,r);t=zik(t),this.createjsColorMatrixFilter_constructor((new createjs.ColorMatrix).adjustColor(n,r,o,t)),this.type="MultiEffect",this.adjustColor=function(e,i,a,l){zot(t)||(t=zik(e)),zot(o)||(o=zik(i)),zot(n)||(n=zik(a)),zot(r)||(r=zik(l)),this.matrix.reset().adjustColor(e,i,a,l)},Object.defineProperty(this,"brightness",{get:function(){return n},set:function(e){n=zik(e),this.matrix.reset().adjustColor(n,r,o,t)}}),Object.defineProperty(this,"contrast",{get:function(){return r},set:function(e){r=zik(e),this.matrix.reset().adjustColor(n,r,o,t)}}),Object.defineProperty(this,"saturation",{get:function(){return o},set:function(e){o=zik(e),this.matrix.reset().adjustColor(n,r,o,t)}}),Object.defineProperty(this,"hue",{get:function(){return t},set:function(e){t=zik(e),this.matrix=(new createjs.ColorMatrix).adjustColor(n,r,o,t),this.applyFilter()}}),this.clone=function(a){return new e.MultiEffect(a||!e.isPick(h[0])?t:h[0],a||!e.isPick(h[0])?o:h[0],a||!e.isPick(h[0])?n:h[0],a||!e.isPick(h[0])?r:h[0],i,this.group,l)}},e.extend(e.MultiEffect,createjs.ColorMatrixFilter,"clone","createjsColorMatrixFilter",!1),e.AlphaEffect=function(t,o,n,r){function i(){return arguments}var a,l="mask, style, group, inherit";if(a=zob(e.AlphaEffect,arguments,l,this))return a;z_d("69.9745"),this.group=n;var s=!1===o?{}:e.getStyle("AlphaEffect",n,r);zot(t)&&(t=null!=s.mask?s.mask:null);var c=i(t);"Bitmap"==(t=zik(t)).type?t=t.image:t.cache&&(t=t.cache().cacheCanvas),this.createjsAlphaMaskFilter_constructor(t),this.type="AlphaEffect",this.clone=function(n){return new e.AlphaEffect(n||!e.isPick(c[0])?t:c[0],o,this.group,r)}},e.extend(e.AlphaEffect,createjs.AlphaMaskFilter,"clone","createjsAlphaMaskFilter",!1),e.Parallax=function(t,o,n,r,i,a,l){function s(){g.step()}var c,u="layers, damp, auto, stage, startPaused, mouseMoveOutside, clamp";if(c=zob(e.Parallax,arguments,u,this))return c;if(z_d("68"),this.type="Parallax",zot(r))if(t&&t[0]&&t[0].obj&&t[0].obj.stage)r=t[0].obj.stage;else{if(!zdf)return;r=zdf.stage}n=!!zot(n),zot(i)&&(i=!1),zot(a)&&(a=!1);var d=r.getBounds().width,h=r.getBounds().height;r.mouseMoveOutside=a;var g=this;g.stageEvent=r.on("stagemousemove",function(t){g.mouseX=t.rawX/e.scaX,g.mouseY=t.rawY/e.scaY});var p=zot(o)?.1:o;this.addLayer=function(t){if(!(zot(t.obj)||zot(t.prop)||zot(t.propChange))){var o={obj:t.obj,prop:t.prop};o[o.prop]=t.propChange,zot(t.input)&&(t.input="mouseX"),o.input=t.input,o.split=zot(t.split)?!("mouseX"!=t.input||!n):t.split;var r=zot(t.inMin)?0:t.inMin,i=zot(t.inMax)?"mouseX"==t.input||"scrollX"==t.input?d:h:t.inMax,a=zot(t.factor)?1:t.factor,s=!zot(t.integer)&&t.integer;return o["p_"+o.prop]=new e.ProportionDamp(r,i,0,o[o.prop],p,a,s,l),"scale"==o.prop?o["s_"+o.prop]=o.obj.scaleX:"frame"==o.prop?o["s_"+o.prop]=o.obj.currentFrame:o["s_"+o.prop]=o.obj[o.prop],zot(t.immediate)||o["p_"+o.prop].immediate(t.immediate),f.push(o),g}},this.removeLayer=function(e){if(!zot(e)){var t=f[e];return t["p_"+t.prop].dispose(),f.splice(e,1),g}},this.immediate=function(e){for(var t,o=0;o<f.length;o++)(t=f[o])["p_"+t.prop].immediate(e[o]);return g},this.dispose=function(){return r.off("stagemousemove",g.stageEvent),f=null,n&&e.Ticker.remove(z),!0},t=zot(t)?[]:t;for(var f=[],m=0;m<t.length;m++)this.addLayer(t[m]);if(n){var z=e.Ticker.add(s,r);i&&e.Ticker.remove(z)}this.step=function(t){for(var o,n,r=0;r<f.length;r++)o=f[r],zot(t)?"mouseX"==o.input?n=g.mouseX:"mouseY"==o.input?n=g.mouseY:"scrollX"==o.input?n=e.scrollX():"scrollY"==o.input&&(n=e.scrollY()):n=t,"scale"==o.prop?o.obj.scaleX=o.obj.scaleY=o["s_"+o.prop]+o["p_"+o.prop].convert(n):"frame"==o.prop?o.obj.gotoAndStop(o["s_"+o.prop]+o["p_"+o.prop].convert(n)):(o.obj[o.prop]=o["s_"+o.prop]+o["p_"+o.prop].convert(n),o.split&&(o.obj[o.prop]-=o[o.prop]/2));return g},g.paused=i,g.pause=function(t){return zot(t)&&(t=!0),g.paused!=t&&(g.paused=t,z&&(t?e.Ticker.remove(z):z=e.Ticker.add(z))),g},Object.defineProperty(g,"damp",{get:function(){return p},set:function(e){var t;p=e;for(var o=0;o<f.length;o++)(t=f[o])["p_"+t.prop].damp=p}})},e.Flipper=function(t,o,n,r,i,a,l,s,c,u,d,h){function g(e,t,o,n){if(zot(o)&&(o=1),zot(n)&&(n=r),w.flipped=!w.flipped,w.dispatchEvent("flip"),0==n)return w.removeAllChildren(),t.scale=t.oScale,t.skewX=t.skewY=0,t.centerReg(w),void w.dispatchEvent("flipped");if(i){var a={skewX:-90*o,scaleY:e.oScale/2},s={skewX:0,scaleY:t.oScale};t.ske(90*o,0).sca(t.oScale,t.oScale/2)}else a={skewY:-90*o,scaleX:e.oScale/2},s={skewY:0,scaleX:t.oScale},t.ske(0,90*o).sca(t.oScale/2,t.oScale);e.animate({props:a,time:r,ease:l+"In",call:function(){e.removeFrom(),t.centerReg(w).animate({props:s,time:r,ease:l+"Out",call:function(){w.dispatchEvent("flipped")}})}})}var p,f="front, back, interactive, time, vertical, flipped, easeRoot, frontPress, backPress, style, group, inherit";if(p=zob(e.Flipper,arguments,f,this))return p;z_d("68.5"),this.group=d;var m=!1===u?{}:e.getStyle("Flipper",this.group,h);if(zot(t)&&(t=null!=m.front?m.front:zimDefaultFrame.makeIcon().sca(2)),zot(o)&&(o=null!=m.back?m.back:new e.Page(t.width,t.height,e.dark)),this.front=t,this.back=o,a){var z=t;t=o,o=z}var y=Math.max(t.width,o.width),v=Math.max(t.height,o.height);this.zimContainer_constructor(y,v),this.type="Flipper",zot(r)&&(r=null!=m.time?m.time:.2),zot(i)&&(i=null!=m.vertical&&m.vertical),zot(n)&&(n=null!=m.interactive&&m.interactive),zot(a)&&(a=null!=m.flipped&&m.flipped),zot(l)&&(l=null!=m.easeRoot?m.easeRoot:"quad"),zot(s)&&(s=null==m.frontPress||m.frontPress),zot(c)&&(c=null==m.backPress||m.backPress),this.flipped=a;var b,w=this;t.centerReg(this),(s&&!a||c&&a)&&((b=n&&t.backing?t.backing:t).on("mousedown",function(){g(t,o)}),b.cur()),(c&&!a||s&&a)&&((b=n&&o.backing?o.backing:o).on("mousedown",function(){g(o,t,-1)}),b.cur()),t.oScale=t.scale,o.oScale=o.scale,t.flipper=w,t.other=o,o.flipper=w,o.other=t,n||(t.mouseChildren=o.mouseChildren=!1),this.flip=function(e,n){e!=w.flipped&&(w.flipped?g(o,t,-1,n):g(t,o,1,n))},!1!==u&&e.styleTransforms(this,m),this.clone=function(){return w.cloneProps(new e.Flipper(t.clone(),o.clone(),n,r,i,a,l,s,c,u,this.group,h))}},e.extend(e.Flipper,e.Container,"clone","zimContainer"),e.Book=function(o,n,r,i,a,l,s,c){function u(t){function u(e){f._currentPage=e,f.removeAllChildren(),f.backing.loc(1,1,f),f.setMask(f.backing),P.addTo(f),P.c().f(black).dr(0,0,0,0),f.moving=!1,r[e-1]?v=r[e-1].rot(0).loc(0,0,f):e>0&&T.reg(0,0).rot(0).loc(0,0,f).setMask(null),b=r[e-2]?r[e-2].reg(o/2,n).loc(0,n,f).rot(-90):new Rectangle(o/2,n,s).reg(o/2,n).loc(0,n,f).rot(-90),w=r[e-3]?r[e-3].rot(0).loc(0,0,f).setMask(P):new Rectangle(o/2,n,s).loc(0,0,f).setMask(P),r[e]?(C=r[e].rot(0).pos(0,0,RIGHT,TOP,f),r[e+1]?x=r[e+1].reg(0,n).loc(o,n,f).rot(90):(x=new Rectangle(o/2,n,s).reg(0,n).loc(o,n,f).rot(90),T=x),k=r[e+2]?r[e+2].rot(0).pos(0,0,RIGHT,TOP,f).setMask(P):new Rectangle(o/2,n,s).pos(0,0,RIGHT,TOP,f).setMask(P),g.update()):g.update()}function d(){f.stageEvent=g.on("stagemousedown",function(){var e,t;if(!f.moving){var i=f.globalToLocal(A.mouseX,A.mouseY);if(!(i.x<0||i.x>o||i.y<0||i.y>n||l>0&&dist(i,new Point(0,n))>l&&dist(i,new Point(o,n))>l)){var a=i.x>o/2?"right":"left";"right"==a&&f._currentPage>=r.length-1||"left"==a&&f._currentPage<=1||(f.moving=!0,"right"==a?(C.addTo(f),x.addTo(f),k.addTo(f)):(v.addTo(f),b.addTo(f),w.addTo(f),f.rolledUp&&m(0,0,"right")),f.moveEvent=g.on("stagemousemove",function(){B&&(B.clear(),B=null),f.globalToLocal(A.mouseX,A.mouseY),e="right"==a?o-A.mouseX:A.mouseX,t=n-A.mouseY+e,f.currentW=e=constrain(e,0,o/2),f.currentH=t=constrain(t,0,n),m(e,t,a)}),f.upEvent=g.on("stagemouseup",function(){g.off("stagemousemove",f.moveEvent),S||h(e,t,a)},null,!0))}}})}function h(e,t,o,n){f.moving=!0,f.rolledUp=!1,zot(n)&&(n="s"==p?.7:7e-4),f.animate({props:{currentW:0,currentH:0},time:n,call:function(){Ticker.remove(r),m(0,0,o),f.moving=!1}});var r=Ticker.add(function(){m(f.currentW,f.currentH,o)})}function m(e,t,r){if("right"==r){P.c().mt(o,n).lt(o-e,n).lt(o,n-t).cp();var i=Math.atan2(e,t);x.loc(o-(e+e*Math.cos(2*i)),n-e*Math.sin(2*i)).rot(2*i*DEG),!S&&e>=o/2&&t>=n&&z()}else P.c().mt(0,n).lt(e,n).lt(0,n-t).cp(),i=Math.atan2(e,t),b.loc(e+e*Math.cos(2*i),n-e*Math.sin(2*i)).rot(2*-i*DEG),!S&&e>=o/2&&t>=n&&y();g.update()}function z(){S=!0,f.moving=!0,f.moveEvent&&g.off("stagemousemove",f.moveEvent),f.upEvent&&g.off("stagemouseup",f.upEvent),f.currentW=0,f.currentH=0,f.lastPage=e.constrain(f._currentPage),f.direction="right",f.dispatchEvent("pageanimate"),f.animate({ease:"quadOut",props:{currentW:o/2},time:.3,timeUnit:"s",call:function(){Ticker.remove(t),x.reg(0,0),k.setMask(null),u(f._currentPage+2),f.moving=!1,S=!1,f.currentW=0,f.currentH=0,f.dispatchEvent("page")}});var t=Ticker.add(function(){P.c().mt(o,n).lt(o/2,n).lt(o-f.currentW,0).lt(o,0).cp()});x.reg(o/2,n).loc(o/2,n,f).animate({props:{rotation:0},time:.3,ease:"quadOut",timeUnit:"s"})}function y(){S=!0,f.moving=!0,f.moveEvent&&g.off("stagemousemove",f.moveEvent),f.upEvent&&g.off("stagemouseup",f.upEvent),f.currentW=0,f.currentH=0,f.lastPage=e.constrain(f._currentPage),f.direction="left",f.dispatchEvent("pageanimate"),f.animate({ease:"quadOut",props:{currentW:o/2},time:.3,timeUnit:"s",call:function(){Ticker.remove(t),b.reg(0,0),w.setMask(null),u(f._currentPage-2),f.moving=!1,S=!1,f.currentW=0,f.currentH=0,f.dispatchEvent("page")}});var t=Ticker.add(function(){P.c().mt(0,n).lt(o/2,n).lt(f.currentW,0).lt(0,0).cp()});b.reg(0,n).loc(o/2,n,f).animate({props:{rotation:0},time:.3,timeUnit:"s",ease:"quadOut"})}var v,b,w,C,x,k,T,A=(g=t).frame,P=new Shape;f._currentPage=i,u(i);var S=!1;if(f.currentW=0,f.currentH=0,f.moving=!1,d(),f.rollUp=function(e,t,o,n,i){if(!f.moving&&!("right"==o&&f._currentPage>=r.length-1||"left"==o&&f._currentPage<=1)){"right"==o?(C.addTo(f),x.addTo(f),k.addTo(f)):(f.rolledUp&&m(0,0,"right"),v.addTo(f),b.addTo(f),w.addTo(f)),f.moving=!0,zot(n)&&(n="s"==p?.5:5e-4),zot(i)&&(i=null),f.animate({props:{currentW:e,currentH:t},time:n,ease:i,call:function(){Ticker.remove(a),f.moving=!1,m(e,t,o)}});var a=Ticker.add(function(){m(f.currentW,f.currentH,o)})}},!1!==a){f.rolledUp=!0,!0===a&&(a="s"==p?1:.001);var B=timeout(a,function(){f.rollUp(60,130,"right",.5),f.dispatchEvent("rollup")})}f.rollDown=function(e,t,o,n){f.moving||"right"==o&&f._currentPage>=r.length-1||"left"==o&&f._currentPage<=1||h(e,t,o,n)},c&&(!0===c&&(c=.2),f.keydown=A.on("keydown",function(e){39==e.keyCode?f.nextPage(c):37==e.keyCode&&f.prevPage(c)})),f.changeFrame=function(e){return f.stageEvent&&g.off("stagemousedown",f.stageEvent),f.moveEvent&&g.off("stagemousemove",f.moveEvent),f.upEvent&&g.off("stagemouseup",f.upEvent),A=e,g=e.stage,d(),f}}var d,h="width, height, pages, startPage, rollUp, radius, backgroundColor, arrows";if(d=zob(e.Book,arguments,h,this))return d;z_d("68.7"),zot(o)&&(o=zdf?zdf.stage.width:1024),zot(n)&&(n=zdf?zdf.stage.height:768),this.zimContainer_constructor(o,n),this.type="Book",zot(r)&&(r=[]),zot(i)&&(i=0),zot(a)&&(a=!0),zot(s)&&(s=e.darker),zot(c)&&(c=!0);var g,p=t(),f=this;0!=r.length&&(f.backing=new Rectangle(o-2,n-2,s),e.loop(r,function(t,o){"string"==typeof t&&(r[o]=e.asset(t))}),f.added(u),f.nextPage=function(e){if(zot(f.rollUp))return timeout(.01,function(){f.nextPage(e)}),f
;f.moving||f.rollUp(o/2+.1,n+.1,"right",e,"quadIn")},f.prevPage=function(e){if(zot(f.rollUp))return timeout(.01,function(){f.prevPage(e)}),f;f.moving||f.rollUp(o/2+.1,n+.1,"left",e,"quadIn")},f.gotoPage=function(e,t){if(zot(f.rollUp))return timeout(.01,function(){f.gotoPage(e,t)}),f;e=constrain(e,0,f.pages.length-1),zot(t)&&(t="s"==p?.3:300);var o=t+("s"==p?.35:350);f.pageInterval=interval(o,function(n){var r=!1;f._currentPage<e?f.nextPage(t):f._currentPage>e?f.prevPage(t):r=!0,f.dispatchEvent("pageturn"),n.count==n.total-1&&(r?f.dispatchEvent("pagedone"):timeout(o,function(){f.dispatchEvent("pagedone")}))},Math.floor(Math.abs(e-f._currentPage)/2+1),!0)},Object.defineProperty(f,"page",{get:function(){return f._currentPage},set:function(e){f.gotoPage(e,"s"==p?.1:100)}}),Object.defineProperty(f,"pages",{get:function(){return r},set:function(){zon&&zogy("Book() - pages is read only")}}),this.dispose=function(e,t,o){return f.stageEvent&&g.off("stagemousedown",f.stageEvent),f.moveEvent&&g.off("stagemousemove",f.moveEvent),f.upEvent&&g.off("stagemouseup",f.upEvent),f.keydown&&frame.off("keydown",f.keydown),f.removeFrom(),o||this.zimContainer_dispose(!0),!0})},e.extend(e.Book,e.Container,["clone","dispose"],"zimContainer"),e.Scroller=function(t,o,n,r,i,a,l,s,c,u){function d(){b||(b=l.getBounds().width,w=l.getBounds().height),0!=z.speed&&0!=z.direction&&(r?(f.x-=z.speed*z.direction,f.x<m.x?m.x=f.x+C:m.x=f.x-C,z.direction*z.speed>0?m.x<0&&f.x<m.x?f.x=m.x+C:f.x<0&&m.x<f.x&&(m.x=f.x+C):m.x>b&&m.x>f.x?m.x=f.x-C:f.x>b&&f.x>m.x&&(f.x=m.x-C)):(f.y-=z.speed*z.direction,f.y<m.y?m.y=f.y+x:m.y=f.y-x,z.direction*z.speed>0?m.y<0&&f.y<m.y?f.y=m.y+x:f.y<0&&m.y<f.y&&(m.y=f.y+x):m.y>w&&m.y>f.y?m.y=f.y-x:f.y>w&&f.y>m.y&&(f.y=m.y-x)))}var h,g="backing, speed, direction, horizontal, gapFix, stage, container, style, group, inherit";if(h=zob(e.Scroller,arguments,g,this))return h;z_d("69"),this.cjsEventDispatcher_constructor(),this.type="Scroller",this.group=c;var p=!1===s?{}:e.getStyle(this.type,this.group,u);if(zot(t)&&(t=null!=p.backing?p.backing:null),!zot(t)){var f=this.backing1=t;if(!zot(f)&&f.getBounds){var m=this.backing2=t.clone();zot(r)&&(r=null==p.horizontal||p.horizontal),zot(i)&&(i=null!=p.gapFix?p.gapFix:0),zot(l)&&(l=null!=p.container?p.container:null),zot(a)&&(a=null!=p.stage?p.stage:null);var z=this;zot(o)&&(o=null!=p.speed?p.speed:1),this.speed=o;var y=this.baseSpeed=this.speed;zot(n)&&(n=null!=p.direction?p.direction:1),this.direction=n;var v=r?f.scaleX:f.scaleY;if(f.getBounds())if(a||f.stage)if(f.parent)if(f.parent.addChildAt(m,f.parent.getChildIndex(f)),a=a||f.stage,zot(l)&&(l=a),l.getBounds()){var b,w,C=f.getBounds().width*v-i,x=f.getBounds().height*v-i;r?m.x=C:m.y=x;var k=!1,T=e.Ticker.add(d,a);this.paused=!1,this.pause=function(t,o){return zot(t)&&(t=!0),zot(o)&&(o=0),t?(y=z.speed,o>0?(k=!0,e.animate({target:z,obj:{pausingSpeed:0},ticker:!1,time:o,call:function(){z.speed=0,z.paused=!0,k=!1,z.dispatchEvent("pause")}})):(k=!1,z.speed=0,z.paused=!0,setTimeout(function(){z.dispatchEvent("pause")},10))):(k=!1,o>0?e.animate({target:z,obj:{pausingSpeed:y},ticker:!1,time:o,call:function(){z.speed=y,z.paused=!1,k=!1}}):(z.speed=y,z.paused=!1)),z},Object.defineProperty(z,"percentSpeed",{get:function(){return 0==z.baseSpeed?NaN:z.speed/z.baseSpeed*100},set:function(e){k||z.paused||(z.speed=z.baseSpeed*e/100)}}),Object.defineProperty(z,"pausingSpeed",{get:function(){return 0==z.baseSpeed?NaN:z.speed/z.baseSpeed*100},set:function(e){z.speed=z.baseSpeed*e/100}}),!1!==s&&e.styleTransforms(this,p),this.dispose=function(){return e.Ticker.remove(T),!0}}else zog("zim display - Scroller(): please setBounds() on container or stage if no container");else zog("zim display - Scroller(): please add object to container or stage before adding to Scroller");else zog("zim display - Scroller(): please pass in stage parameter or add backing objects to stage to start");else zog("zim display - Scroller(): please setBounds() on backing objects")}}},e.extend(e.Scroller,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Dynamo=function(t,o,n,r,i,a,l,s,c,u,d,h){function g(){if(b=requestAnimationFrame(g),w=z[y].s,0!=T.speed&&0!=w&&(x=1e3/Math.abs(T.speed)*w,(C=Date.now())-A>x)){A=C;var e=T.frame+(T.speed>0||!l?1:-1),o=!1;e>=z.length&&(o=!0,e=0),e<0&&(o=!0,e=z.length-1),T.frame=e,s&&(T.speed<0?t.scaleX=-T.scaleX:t.scaleX=T.scaleX),c&&(T.speed<0?t.scaleY=-T.scaleY:t.scaleY=T.scaleY),o&&T.dispatchEvent("loop"),T.dispatchEvent("change"),a&&t.stage&&t.stage.update(),zot(k)||k!=T.frame||(P=!1,T.speed=0,T.paused=!0,T.dispatchEvent("pause"))}}var p,f="sprite, speed, label, startFrame, endFrame, update, reversible, flip, flipVertical, style, group, inherit";if(p=zob(e.Dynamo,arguments,f,this))return p;z_d("69.2"),this.cjsEventDispatcher_constructor(),this.type="Dynamo",this.group=d;var m=!1===u?{}:e.getStyle(this.type,this.group,h);if(zot(t)&&(t=null!=m.sprite?m.sprite:null),!zot(t)){var z=this.frames=t.parseFrames(n,r,i,!0);if(0!=z.length){this.totalFrames=z.length;var y=0;zot(o)&&(o=null!=m.speed?m.speed:30),zot(l)&&(l=null==m.reversible||m.reversible);var v=this.baseSpeed=this.speed=o;zot(a)&&(a=null!=m.update&&m.update),zot(s)&&(s=null!=m.flip?m.flip:null),zot(s)&&0==l&&(s=!0);var b,w,C,x,k,T=this,A=Date.now(),P=!1;T.scaleX=t.scaleX,T.scaleY=t.scaleY,g(),this.paused=!1,this.pause=function(t,o,n){if(zot(t)&&(t=!0),t!=T.paused)return zot(o)&&(o=0),t?(v=T.speed,zot(n)?o>0?(P=!0,e.animate({target:T,obj:{pausingSpeed:0},ticker:!1,time:o,call:function(){P=!1,T.speed=0,T.paused=!0,T.dispatchEvent("pause")}})):(P=!1,T.speed=0,T.paused=!0,setTimeout(function(){T.dispatchEvent("pause")},10)):(P=!0,k=n)):(k=null,o>0?(P=!0,e.animate({target:T,obj:{pausingSpeed:v},ticker:!1,time:o,call:function(){P=!1,T.speed=v,T.paused=!1}})):(P=!1,T.speed=v,T.paused=!1)),T},Object.defineProperty(T,"frame",{get:function(){return y},set:function(e){y=Math.round(e)%z.length;var o=z[y];zot(o)||(t.frame=o.f)}}),Object.defineProperty(T,"percentSpeed",{get:function(){return 0==T.baseSpeed?NaN:P||T.paused?v/T.baseSpeed*100:T.speed/T.baseSpeed*100},set:function(e){P||T.paused?v=T.baseSpeed*e/100:T.speed=T.baseSpeed*e/100}}),Object.defineProperty(T,"pausingSpeed",{get:function(){return 0==T.baseSpeed?NaN:T.speed/T.baseSpeed*100},set:function(e){T.speed=T.baseSpeed*e/100}}),!1!==u&&e.styleTransforms(this,m),this.dispose=function(){cancelAnimationFrame(b)}}}},e.extend(e.Dynamo,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Accelerator=function(e){z_d("69.3"),this.cjsEventDispatcher_constructor();var t=this;this.type="Accelerator",this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(e){var o;o=Array.isArray(e)?e:[e];for(var n=0;n<o.length;n++)t.items.indexOf(o[n])<0&&t.items.push(o[n]);return t},e&&this.add(e),this.remove=function(e){var o,n;o=Array.isArray(e)?e:[e];for(var r=0;r<o.length;r++)(n=t.items.indexOf(o[r]))>=0&&t.items.splice(n,1);return t},this.pause=function(e,o,n){function r(){for(var o=0;o<t.items.length;o++)1!=i[o]&&t.items[o].pause(e)}if(zot(e)&&(e=!0),e!=t.paused){var i=[];if(e){zot(n)||(o=null);for(var a=!1,l=0;l<t.items.length;l++)(zot(o)||!zot(n)||t.items[l].totalFrames)&&(!t.items[l].totalFrames||zot(o)&&zot(n))||(t.items[l].pause(!0,o,n),a=!0,i[l]=1,t.items[l].on("pause",function(){t.paused||(r(!0),t.paused=!0,t.dispatchEvent("pause"))},null,!0));a||(r(),t.paused=!0,setTimeout(function(){t.dispatchEvent("pause")},10))}else t.paused=!1,r()}},Object.defineProperty(t,"percentSpeed",{get:function(){return t._percentSpeed},set:function(e){t._percentSpeed=e;for(var o=0;o<t.items.length;o++)t.items[o].percentSpeed=e}}),this.dispose=function(){for(var e=0;e<t.items.length;e++)t.items[e].dispose();return t.items=null,!0}},e.extend(e.Accelerator,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Emitter=function(o,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_){function Y(t){if(G.emitterPaused=null,G.on("added",function(){G.particles.addTo(G.parent)}),Q=t,zot(S)&&(S=!Q.isWebGL&&e.mobile()),S&&(Q.snapToPixelEnabled=!0),Q){var n=G.parent.getChildIndex(G);G.parent.addChildAt(O,n),k||T||G.centerReg(null,null,!1),G.zimInterval=e.interval(G.interval,function(){function t(e,t){return e-t}var n,a;G.startEmitterPaused?G.pauseEmitter():(o=Array.isArray(G.obj)?G.obj:[G.obj]).length<=0||(Array.isArray(G.interval)?(G.interval.sort(t),n=G.interval[0]):n=G.interval.constructor=={}.constructor?G.interval.min:G.interval,Array.isArray(G.num)?(G.num.sort(t),a=G.num[G.num.length-1]):a=G.num.constructor=={}.constructor?G.num.max:G.num,e.loop(e.Pick.choose(G.num),function(){if(G.decayTime>0){var t={};G.shrink&&(t.scale=0),G.fade&&(t.alpha=0)}if(G.pool&&U.length>0&&Z>=Math.max(G.poolMin,(G.life/n+5)*a)){if((s=U[K++%U.length]).visible=!0,(c=s.trace?s.getChildAt(0):s).emitShape){var l=c.template;c.graphics.c().s(l.s?e.Pick.choose(l.s):null).ss(l.ss?e.Pick.choose(l.ss):null).sd(l.sd?e.Pick.choose(l.sd):null,l.offset?e.Pick.choose(l.offset):null)}s.trace&&s.updateCache(),"top"==G.layers?c.emitShape?s.addTo(O,null,!1):s.centerReg(O):c.emitShape?s.addTo(O,"bottom"==G.layers?0:e.rand(O.numChildren),!1):s.centerReg(O,"bottom"==G.layers?0:e.rand(O.numChildren)),s.alpha=1,s.scaleX=1,s.scaleY=1,c.alpha=c.originalAlpha,c.scaleX=c.originalScaleX,c.scaleY=c.originalScaleY,c.endSpurt=!1}else{var s;Z++,G.trace&&((s=new e.Container(r,i,null,null,!1)).trace=!0);var c,u=e.Pick.choose(e.shuffle(o)[0]);"shape"==u.type?(l=u,(c=new e.Shape(1,1,null,null,null,!1)).emitShape=!0,c.template=l,c.graphics.s(l.s?e.Pick.choose(l.s):null).ss(l.ss?e.Pick.choose(l.ss):null).sd(l.sd?e.Pick.choose(l.sd):null,l.offset?e.Pick.choose(l.offset):null),G.trace?c.addTo(s,null,!1):"top"==G.layers?c.addTo(O,null,!1):c.addTo(O,"bottom"==G.layers?0:e.rand(O.numChildren),null,!1)):((c=u.clone()).centerReg||zimify(c),G.trace?c.centerReg(s).pos({x:-1e3,y:-1e3,reg:!0}):"top"==G.layers?c.centerReg(O):c.centerReg(O,"bottom"==G.layers?0:e.rand(O.numChildren))),G.trace&&("top"==G.layers?s.addTo(O,null,!1):s.addTo(O,"bottom"==G.layers?0:e.rand(O.numChildren),!1),s.cache(f,m,r,i)),G.trace||(s=c),s.particle=c,c.originalAlpha=c.alpha,c.originalScaleX=c.scaleX,c.originalScaleY=c.scaleY}G.currentParticle=c,G.particlesEmitted++,s.particleNormal=!0,s.particleDecaying=!1,s.particleFizzing=!1;var d=e.Pick.choose(G.angle),h=e.Pick.choose(G.emitterForce),g=h*Math.cos(d*Math.PI/180),p=h*Math.sin(d*Math.PI/180);c.info={position:{x:G.x,y:G.y},velocity:{x:g,y:p}},G.horizontal&&(c.info.position={x:G.x-G.regX+e.rand(0,r),y:G.y-G.regY+(G.vertical?i/2:0)}),G.vertical&&(c.info.position={x:G.x-G.regX+(G.horizontal?r/2:0),y:G.y-G.regY+e.rand(0,i)}),c.emitShape?c.graphics.mt(c.info.position.x,c.info.position.y):(c.x=c.info.position.x,c.y=c.info.position.y),G.random&&e.loop(G.random,function(t,o){var n=e.Pick.choose(o);"scale"==t?c.sca(n):("x"==t?c.info.position.x=G.horizontal||G.vertical?n:n+r/2:"y"==t&&(c.info.position.y=G.horizontal||G.vertical?n:n+i/2),"x"!=t&&"y"!=t||!c.emitShape||c.graphics.mt(c.info.position.x,c.info.position.y),c[t]=n,c.emitShape&&(c.x=0,c.y=0))}),S&&!c.emitShape&&c.cache(c.getBounds().x-10,c.getBounds().y-10,c.getBounds().width+20,c.getBounds().height+20);var z,y=!c.emitShape&&G.shrink;if(G.decayTime>0&&(G.fade||y||G.trace&&G.traceFadeTime>0)){if(G.trace&&G.traceFadeTime>0&&s.animate({obj:{alpha:0},time:G.traceFadeTime,wait:G.life-G.traceFadeTime,waitedCall:function(e){e.particleNormal=!1,e.particleFizzing=!0},call:D,override:!1,id:"decay"}),G.fade||y){var v={};G.fade&&(v.alpha=0),y&&(v.scaleX=0,v.scaleY=0),c.animate({obj:v,time:G.decayTime,wait:zot(G.decayStart)?G.life-G.decayTime:G.decayStart,waitedCall:function(e){e.parent!=G&&(e=e.parent),e.particleNormal=!1,e.particleDecaying=!0},call:function(t){var o;G.events&&X("decayed",t),t.endSpurt&&X("spurtdecayed",t),G.trace&&G.traceFadeTime>0||(zot(G.decayStart)||G.decayStart+G.decayTime>G.life?t.parent&&D(t.parent.trace?t.parent:t):(o=s,e.timeout(G.life-(G.decayStart+G.decayTime),function(){D(o)})))},override:!1,id:"decay"})}}else G.life>0&&((z=s).timeOut=e.timeout(G.life,function(){D(z)}));if(G.events&&X("emitted",s),R(c),G.animation){var b=e.Pick.choose(G.animation);zot(b.override)&&(b.override=!1),c.animate(e.copy(b))}}))},null,!0,!0);var a=0;q=G.emitterTicker=e.Ticker.add(function(){e.loop(O,function(t){if(t.trace){var o=t;t=t.getChildAt(0)}var n=t.info,r=0,i=0;if(!zot(G.sink)){var l=G.particles.localToGlobal(n.position.x,n.position.y);if(G.sink.parent&&G.sink.parent.localToGlobal)var s=G.sink.parent.localToGlobal(G.sink.x,G.sink.y);else s=new createjs.Point(e.Pick.choose(G.sink.x),e.Pick.choose(G.sink.y));var c=e.angle(l.x,l.y,s.x,s.y);r=G.sinkForce*Math.cos(c*Math.PI/180),i=G.sinkForce*Math.sin(c*Math.PI/180)}var u=G.wind+r,d=G.gravity+i;n.velocity.x+=u*a,n.velocity.y+=d*a,n.position.x+=n.velocity.x*a*100,n.position.y+=n.velocity.y*a*100,t.emitShape?t.graphics.lt(n.position.x,n.position.y):(t.x=n.position.x,t.y=n.position.y),G.trace&&o&&o.updateCache(t.emitShape?null:"source-over")})},Q),a=1/e.Ticker.framerate}}function D(e){if(G.events&&X("fizzed",e),(e.trace?e.getChildAt(0).endSpurt:e.endSpurt)&&(X("spurtfizzed",e),G.spurting=!1),G.pool&&"end"!=e.pooled)return e.pooled?void(e.visible=!1):(e.pooled=!0,U&&U.push(e),void(e.visible=!1));G.removeChild(e),G.trace&&e.uncache(),e=null}function X(e,t){if(!zot(t)){var o=new createjs.Event(e);o.particle=t.trace?t.getChildAt(0):t,G.dispatchEvent(o)}}function R(e){zot(G.spurtCount)&&zot(G.spurtNum)||(G.spurtCount++,G.spurtCount>=G.spurtNum&&W(e))}function W(e){G.pauseEmitter(),G.spurtCount=G.spurtNum=null,zot(e)||(X("spurted",e),e.endSpurt=!0)}var H,F="obj, width, height, interval, num, life, fade, shrink, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin, particles, style, group, inherit";if(H=zob(e.Emitter,arguments,F,this))return H;z_d("69.9"),this.type="Emitter",this.group=L;var V=!1===j?{}:e.getStyle(this.type,this.group,_);zot(o)&&(o=null!=V.obj?V.obj:[new e.Circle(20,"#e472c4"),new e.Circle(20,"#acd241"),new e.Circle(20,"#50c4b7")]),zot(r)&&(r=null!=V.width?V.width:300),zot(i)&&(i=null!=V.height?V.height:300);var N=t(a);zot(a)&&(a=null!=V.interval?V.interval:"s"==N?.02:20),"number"==typeof a&&(a=Math.max("s"==N?.01:10,a)),zot(l)&&(l=null!=V.num?V.num:1),zot(g)&&(g=null!=V.trace&&g.size),zot(p)&&(p=null!=V.traceFadeTime?V.traceFadeTime:d),zot(f)&&(f=null!=V.traceShiftX?V.traceShiftX:0),zot(m)&&(m=null!=V.traceShiftY?V.traceShiftY:0),n(s,N),zot(s)&&(s=null!=V.life?V.life:"s"==N?1:1e3),zot(c)&&(c=null==V.fade||V.fade),zot(u)&&(u=null!=V.shrink?V.shrink:!g),n(d,N),zot(d)&&(d=null!=V.decayTime?V.decayTime:"s"==N?1:1e3),zot(z)&&(z=null!=V.angle?V.angle:{min:0,max:360}),zot(y)&&(y=null!=V.force?V.force:5),zot(v)&&(v=null!=V.gravity?V.gravity:9.8),zot(b)&&(b=null!=V.wind?V.wind:0),zot(w)&&(w=null!=V.layers?V.layers:"top"),zot(r)&&(r=null!=V.width?V.width:100),zot(i)&&(i=null!=V.height?V.height:100),zot(k)&&(k=null!=V.horizontal&&V.horizontal),zot(T)&&(T=null!=V.vertical&&V.vertical),zot(A)&&(A=null!=V.sink?V.sink:null),!zot(A)&&zot(P)&&(P=null!=V.sinkForce?V.sinkForce:10),zot(B)&&(B=null!=V.events&&V.events),zot(E)&&(E=null!=V.startPaused&&V.startPaused),zot(I)&&(I=null==V.pool||V.pool),zot(M)&&(M=null!=V.poolMin?V.poolMin:0),zot(O)&&(O=null!=V.particles?V.particles:new e.Container),zot(C)&&(C=null!=V.animation?V.animation:null),O.type="Particles",this.zimContainer_constructor(r,i,null,null,!1),this.type="Emitter";var G=this;this.regX=r/2,this.regY=i/2,G.obj=o,G.particles=O,G.interval=a,G.num=l,G.life=s,G.fade=c,G.shrink=u,G.decayTime=d,G.decayStart=h,G.trace=g,G.traceFadeTime=p,G.traceShiftX=f,G.traceShiftY=m,G.angle=z,G.emitterForce=y,G.gravity=v,G.wind=b,G.layers=w,G.animation=C,G.random=x,G.horizontal=k,G.vertical=T,G.sink=A,G.sinkForce=P,G.events=B,G.startEmitterPaused=G.emitterPaused=E,G.pool=I,G.poolMin=M,G.particlesEmitted=0;var q,Q,U=[],K=0,Z=0;e.added(G,Y),G.particles.noMouse(),Object.defineProperty(G,"interval",{get:function(){return a},set:function(e){a=e,G.zimInterval&&(G.zimInterval.time=a)}}),this.removeFrom=function(){G.parent&&G.parent.removeChild(G),G.particles.removeFrom()},this.spurting=!1,this.spurt=function(t,o,n){var r,i="num, time, restart";return(r=zob(G.spurt,arguments,i))?r:(zot(o)||(e.timeout(e.Pick.choose(o),function(){W(G.currentParticle)},!0),G.spurting=!0),zot(t)||(G.spurtNum=e.Pick.choose(t),G.spurtCount=0,G.spurting=!0),G.pauseEmitter(!1,n,null,!0),G)},this.clearPool=function(){e.loop(G,function(e){e.pooled="end",e.visible||G.removeChild(e)},!0),Z=0,K=0,U=[]},G.startEmitterPaused||(this.emitterPaused=!1),this.pauseEmitter=function(t,o,n,r){if(G.startEmitterPaused=null,zot(t)&&(t=!0),zot(o)&&(o=!1),zot(n)&&(n=!1),t){if(G.emitterPaused)return G;n&&(q&&e.Ticker.remove(q),e.loop(G,function(e){e.pauseAnimate(),e.trace&&e.getChildAt(0).pauseAnimate(),e.timeOut&&e.timeOut.pause()})),G.zimInterval.pause(),G.emitterPaused=!0}else{if(!G.emitterPaused)return G;o&&(e.loop(G,function(e){e.stopAnimate(),e.timeOut&&e.timeOut.clear(),e.trace&&e.getChildAt(0).pauseAnimate()}),G.removeAllChildren()),Q&&q&&!e.Ticker.has(Q,q)&&(e.Ticker.add(q,Q),e.loop(G,function(e){e.pauseAnimate(!1),e.timeOut&&e.timeOut.pause(!1),e.trace&&e.getChildAt(0).pauseAnimate(!1)})),G.zimInterval&&G.zimInterval.pause(!1,r),G.emitterPaused=!1}return G},this.resize=function(e,t){zot(e)||(r=e),zot(t)||(i=t),G.setBounds(0,0,r,i),k||T||G.centerReg(),G.clearPool()},!1!==j&&e.styleTransforms(this,V),this.clone=function(t){var o;return o=Array.isArray(G.obj)||G.obj.constructor=={}.constructor?e.copy(G.obj):G.obj.clone?G.obj.clone(t):G.obj,G.cloneProps(new e.Emitter(o,r,i,G.interval,G.num,G.life,G.fade,G.shrink,G.decayTime,G.decayStart,G.trace,G.traceFadeTime,G.traceShiftX,G.traceShiftY,G.angle,G.emitterForce,G.gravity,G.wind,G.layers,G.animation,e.copy(G.random),G.horizontal,G.vertical,G.sink,G.sinkForce,S,G.events,E,G.pool,G.poolMin,j,G.group,_))},this.dispose=function(){return G.zimInterval&&G.zimInterval.clear(),q&&e.Ticker.remove(q),e.loop(U,function(e){e&&e.dispose()}),O&&O.dispose&&O.dispose(),G.currentParticle.dispose(),o&&Array.isArray(o)?e.loop(o,function(e){e.dispose&&e.dispose()}):o.dispose&&o.dispose(),O=G.currentParticle=G.particles=o=G.obj=U=G.poolList=null,!0}},e.extend(e.Emitter,e.Container,"clone","zimContainer",!1),e.Generator=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b){function w(t){this.stampNum++;var o=e.loop(B.maxCount,function(e,t){if(B.paused)return B.pausedCount=e,!1;if(B.changeCount)return B.changeCount=!1,!1;M=e+1;var o=i(e+1,t,B,B.stampNum);return B.currentColor=zik(B.color),S.f(B.currentColor),B.currentStrokeColor=zik(B.strokeColor),S.s(B.currentStrokeColor),B.currentStrokeWidth=zik(B.strokeWidth),S.ss(B.currentStrokeWidth),o||void 0},null,null,t);p&&S.updateCache(),o&&B.dispatchEvent("complete"),A.update()}function C(){B.iterator++,B.iterator%Math.ceil(B.drawCount)==0&&(B.count++,B.draw(B.count,B.maxCount,B),p&&B.blit(),B.currentColor=zik(B.color),S.f(B.currentColor),B.currentStrokeColor=zik(B.strokeColor),S.s(B.currentStrokeColor),B.currentStrokeWidth=zik(B.strokeWidth),S.ss(B.currentStrokeWidth),B.dispatchEvent("drawing"),A.update()),B.maxCount&&B.count>=B.maxCount&&(B.dispatchEvent("complete"),e.Ticker.remove(B.ticker))}var x,k="color, strokeColor, strokeWidth, draw, stamp, setup, maxCount, boundary, drawCount, drawPause, drawSpacebarPause, startX, startY, cache, recordLinePoints, frame, seed, style, group, inherit";if(x=zob(e.Generator,arguments,k,this))return x;z_d("69.92"),this.group=v;var T=!1===y?{}:e.getStyle("Generator",this.group,b);zot(m)&&(m=null!=T.frame?T.frame:zdf);var A=m.stage;zot(t)&&(t=null!=T.color?T.color:null),zot(o)&&(o=null!=T.strokeColor?T.strokeColor:e.white),zot(n)&&(n=null!=T.strokeWidth?T.strokeWidth:1),zot(l)&&(l=null!=T.maxCount?T.maxCount:1e3),zot(s)&&(s=null!=T.boundary?T.boundary:new e.Boundary(0,0,A.width,A.height)),zot(c)&&(c=null!=T.drawCount?T.drawCount:1),zot(u)&&(u=null==T.drawPause||T.drawPause),zot(d)&&(d=null==T.drawSpacebarPause||T.drawSpacebarPause),zot(h)&&(h=null!=T.startX?T.startX:A.width/2),zot(g)&&(g=null!=T.startY?T.startY:A.height/2),zot(p)&&(p=null!=T.cache&&T.cache);var P=this.drawing=new e.Container(s.x,s.y,s.width,s.height).addTo(A),S=this.shape=new e.Shape(s.width,s.height).addTo(P);this.drawCount=c,zot(u)&&(u=!0),p&&S.cache(s.x,s.y,s.width,s.height),this.zimContainer_constructor(s.x,s.y,s.width,s.height),this.type="Generator";var B=this;B.draw=null,this.color=t,this.strokeColor=o,this.strokeWidth=n;var E=h,I=g;this.fill=function(e){return B.color=e,B.currentColor=zik(B.color),S.f(B.currentColor),this},this.stroke=function(e,t){return zot(e)||(B.strokeColor=e,B.currentStrokeColor=zik(B.strokeColor),S.s(B.currentStrokeColor)),zot(t)||(B.strokeWidth=t,B.currentStrokeWidth=zik(B.strokeWidth),S.ss(B.currentStrokeWidth)),this},this.noStroke=function(){return B.strokeColor=B.currentStrokeColor=null,B.strokeWidth=B.currentStrokeWidth=null,S.s(),S.ss(1),this},S.matrix=S.getMatrix(),this.translate=function(e,t){zot(e)&&(e=0),zot(t)&&(t=0),e=zik(e),t=zik(t);var o=S.matrix.transformPoint(e,t);return E=o.x,I=o.y,S.mt(E,I),S.matrix.translate(e,t),this},this.rotate=function(e){return zot(e)&&(e=0),e=zik(e),S.matrix.rotate(e),this},this.scale=function(e,t){return zot(e)&&(e=1),zot(t)&&(t=e),e=zik(e),t=zik(t),S.matrix.scale(e,t),this},this.skew=function(e,t){return zot(e)&&(e=0),zot(t)&&(t=0),e=zik(e),t=zik(t),S.matrix.skew(e,t),this},f&&(B.linePoints=[]),this.line=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),("zero"==f||"nonzero"==f&&e&&t)&&B.linePoints.push([e,t]),B.translate(e,t);var r=S.matrix.transformPoint(o,n);return E=r.x,I=r.y,S.lt(E,I),f&&B.linePoints.push([E,I]),S.matrix.translate(o,n),this},this.arc=function(e,t,o,n,r,i){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),e=zik(e),t=zik(t),o=zik(o),o=Math.abs(o),zot(n)&&(n=0),zot(r)&&(r=180),n=zik(n),r=zik(r),zot(i)&&(i=!1),i=zik(i),B.translate(e,t);var a=S.matrix.transformPoint(0,0);S.decomp||(S.decomp={}),S.matrix.decompose(S.decomp);var l=(Math.abs(S.decomp.scaleX)+Math.abs(S.decomp.scaleY))/2,s=S.decomp.rotation||0,c=o*l;return S.mt(a.x+c*Math.cos((n+s)*Math.PI/180),a.y+c*Math.sin((n+s)*Math.PI/180)),S.a(a.x,a.y,c,(n+s)*Math.PI/180,(r+s)*Math.PI/180,i),this},this.curve=function(e,t,o,n,r,i){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),zot(n)&&(n=50),zot(r)&&(r=100),zot(i)&&(i=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),B.translate(e,t);var a=S.matrix.transformPoint(o,n),l=S.matrix.transformPoint(r,i),s=l.x,c=l.y;return S.qt(a.x,a.y,s,c),S.matrix.translate(r,i),this},this.bezier=function(e,t,o,n,r,i,a,l){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),zot(n)&&(n=50),zot(r)&&(r=-50),zot(i)&&(i=-50),zot(a)&&(a=100),zot(l)&&(l=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),a=zik(a),l=zik(l),B.translate(e,t);var s=S.matrix.transformPoint(o,n),c=S.matrix.transformPoint(r,i),u=S.matrix.transformPoint(a,l),d=u.x,h=u.y;return S.bt(s.x,s.y,c.x,c.y,d,h),S.matrix.translate(a,l),this},this.rectangle=function(e,t,o,n,r,i,a,l){if(zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=100),zot(n)&&(n=o),e=zik(e),t=zik(t),o=zik(o),n=zik(n),!(r||i||a||l)){B.translate(e,t);var s=S.matrix.transformPoint(0,0),c=S.matrix.transformPoint(o,0),u=S.matrix.transformPoint(o,n),d=S.matrix.transformPoint(0,n);return S.mt(s.x,s.y).lt(c.x,c.y).lt(u.x,u.y).lt(d.x,d.y).lt(s.x,s.y).lt(c.x,c.y),S.mt(s.x,s.y),this}zot(r)&&(r=0),zot(i)&&(i=r),zot(a)&&(a=r),zot(l)&&(l=r),r=zik(r),i=zik(i),a=zik(a),l=zik(l);var h=(o<n?o:n)/2,g=0,p=0,f=0,m=0;r<0&&(r*=g=-1),r>(h=Math.abs(h))&&(r=h),i<0&&(i*=p=-1),i>h&&(i=h),a<0&&(a*=f=-1),a>h&&(a=h),l<0&&(l*=m=-1),l>h&&(l=h),B.translate(e,t),S.decomp||(S.decomp={}),S.matrix.decompose(S.decomp);var z=(Math.abs(S.decomp.scaleX)+Math.abs(S.decomp.scaleY))/2,y=o<0?-1:1,v=n<0?-1:1,b=S.matrix.transformPoint(o-i*y,0),w=S.matrix.transformPoint(o+i*p*y,-i*p*v),C=S.matrix.transformPoint(o,i*v),x=S.matrix.transformPoint(o,n-a*v),k=S.matrix.transformPoint(o+a*f*y,n+a*f*v),T=S.matrix.transformPoint(o-a*y,n),A=S.matrix.transformPoint(l*y,n),P=S.matrix.transformPoint(-l*m*y,n+l*m*v),E=S.matrix.transformPoint(0,n-l*v),I=S.matrix.transformPoint(0,r*v),M=S.matrix.transformPoint(-r*g*y,-r*g*v),O=S.matrix.transformPoint(r*y,0);return S.mt(b.x,b.y).at(w.x,w.y,C.x,C.y,i*z).lt(x.x,x.y).at(k.x,k.y,T.x,T.y,a*z).lt(A.x,A.y).at(P.x,P.y,E.x,E.y,l*z).lt(I.x,I.y).at(M.x,M.y,O.x,O.y,r*z).cp(),this},this.circle=function(e,t,o,n,r){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),zot(n)&&(n=100),zot(r)&&(r=!0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),o=Math.abs(o),B.translate(e,t);var i=S.matrix.transformPoint(0,0);S.decomp||(S.decomp={}),S.matrix.decompose(S.decomp);var a=(Math.abs(S.decomp.scaleX)+Math.abs(S.decomp.scaleY))/2,l=S.decomp.rotation||0,s=o*a;if(B.circleHeight=2*s,"number"==typeof n&&n>=0&&n<100){var c=360*n/100/2;S.mt(i.x+s*Math.cos((-c-90+l)*Math.PI/180),i.y+s*Math.sin((-c-90+l)*Math.PI/180)),S.a(i.x,i.y,s,(-c-90+l)*Math.PI/180,(c-90+l)*Math.PI/180,!1),r&&S.cp(),B.circleHeight=s-Math.cos(c*Math.PI/180)*s}else S.mt(i.x+s,i.y),S.a(i.x,i.y,s,0,2*Math.PI);return this},this.elipse=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=100),zot(n)&&(n=50),e=zik(e),t=zik(t),o=zik(o),n=zik(n),B.translate(e,t);var r=S.matrix.transformPoint(-o/2,-n/2);S.decomp||(S.decomp={}),S.matrix.decompose(S.decomp);var i=S.decomp.scaleX,a=S.decomp.scaleY;return S.de(r.x,r.y,o*i,n*a),this},this.poly=function(e,t,o,n,r,i){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=100),zot(n)&&(n=5),zot(r)&&(r=0),zot(i)&&(i=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),o=Math.abs(o),B.translate(e,t);var a=S.matrix.transformPoint(0,0);S.decomp||(S.decomp={}),S.matrix.decompose(S.decomp);var l=(Math.abs(S.decomp.scaleX)+Math.abs(S.decomp.scaleY))/2,s=S.decomp.rotation||0,c=o*l;return S.dp(a.x,a.y,c,n,r,s),this},this.closePath=this.close=this.cp=function(){return S.cp(),this},this._noise=new e.Noise(z),this.noise=function(){return 1==arguments.length?(this._noise.simplex1D.apply(null,arguments)+1)/2:2==arguments.length?(this._noise.simplex2D.apply(null,arguments)+1)/2:3==arguments.length?(this._noise.simplex3D.apply(null,arguments)+1)/2:4==arguments.length?(this._noise.simplex4D.apply(null,arguments)+1)/2:void 0},S.matrix.clone(),this.stack=[],this.colorStrokeStack=[],this.push=function(){return B.stack.push(S.matrix.clone()),B.colorStrokeStack.push([B.color,B.strokeColor,B.strokeWidth,B.currentColor,B.currentStrokeColor,B.currentStrokeWidth]),this},this.pop=function(){S.matrix=B.stack.pop()||S.matrix;var e=B.colorStrokeStack.pop()||[B.color,B.strokeColor,B.strokeWidth,B.currentColor,B.currentStrokeColor,B.currentStrokeWidth];return B.color=e[0],B.strokeColor=e[1],B.strokeWidth=e[2],B.currentColor=e[3],B.currentStrokeColor=e[4],B.currentStrokeWidth=e[5],S.f(B.currentColor).s(B.currentStrokeColor).ss(B.currentStrokeWidth),S.mt(S.matrix.x,S.matrix.y),this},this.blit=function(){return S.updateCache("source-over"),S.c(),this},this.step=function(){return B.draw&&C(),this},zot(B.color)||this.fill(B.color),!zot(B.strokeColor)&&B.strokeWidth?this.stroke(B.strokeColor,B.strokeWidth):B.noStroke(),this.translate(E,I),"function"==typeof a&&(this.setup=a,e.timeout(.01,function(){a(0,B.count,B),p&&S.updateCache(),A.update()}));var M=0;this.maxCount=l,this.resetup=function(e){return zot(e)&&(e=!0),M=0,e&&B.shape.c(),zot(B.color)||this.fill(B.color),!zot(B.strokeColor)&&B.strokeWidth?this.stroke(B.strokeColor,B.strokeWidth):B.noStroke(),this.reset(),this.setup&&(a(0,B.count,B),p&&S.updateCache(),A.update()),this},this.stampNum=0,"function"==typeof i&&(this.stamp=i,e.timeout(.015,function(){w(0)})),this.restamp=function(e,t){return zot(e)&&(e=!0),zot(t)&&(t=!0),M=0,e&&B.shape.c(),t&&B.resetup(e),w(0),this},this.reset=function(){return this.fill(t),!zot(o)&&n?this.stroke(o,n):this.noStroke(),S.matrix.identity(),this.translate(h,g),this},this.clear=function(){return this.shape.c(),this},B.iterator=0,"function"==typeof r&&(this.draw=r,a?setTimeout(function(){B.ticker=e.Ticker.add(C)},100):this.ticker=e.Ticker.add(C),B.generatorPaused=!1,u&&(B.pauseEvent=A.on("stagemousedown",function(){B.count>=B.maxCount||B.pauseTimeout||(e.Ticker.has(B.ticker)?(e.Ticker.remove(B.ticker),B.generatorPaused=!0,B.dispatchEvent("generatorpaused")):(B.ticker=e.Ticker.add(B.ticker),B.generatorPaused=!1,B.dispatchEvent("generatorunpaused")))})),d&&(B.pauseSpacebarEvent=m.on("keydown",function(t){B.count>=B.maxCount||B.pauseTimeout||20==t.keyCode&&(e.Ticker.has(B.ticker)?(e.Ticker.remove(B.ticker),B.generatorPaused=!0,B.dispatchEvent("generatorpaused")):(B.ticker=e.Ticker.add(B.ticker),B.generatorPaused=!1,B.dispatchEvent("generatorunpaused")))}))),this.redraw=function(t,o){return zot(t)&&(t=!0),B.reset(),zot(o)&&(o=!0),B.ticker&&e.Ticker.remove(B.ticker),B.iterator=0,B.count=0,t&&B.shape.c(),o?(B.resetup(t),setTimeout(function(){B.ticker&&(B.ticker=e.Ticker.add(B.ticker))},100)):B.ticker&&(B.ticker=e.Ticker.add(B.ticker)),this},this.paused=!1,this.pause=function(t,o){if(zot(t)&&(t=!0),!(B.count>=B.maxCount)){if(t==this.paused)return this;this.paused=t,this.pauseTimeout&&this.pauseTimeout.clear(),this.paused?B.ticker&&e.Ticker.remove(B.ticker):B.ticker?B.ticker=e.Ticker.add(B.ticker):w(B.pausedCount,B.maxCount),setTimeout(function(){A.update()},20),o&&(this.pauseTimeout=e.timeout(o,function(){B.pause(!B.paused),B.pauseTimeout=null})),B.dispatchEvent(B.paused?"paused":"unpaused")}},this.outOfBounds=function(e,t){zot(e)&&(e=0),zot(t)&&(t=e);var o=B.shape.stage;if(o)return B.currentX>o.width-e||B.currentX<0+e||B.currentY>o.height-t||B.currentY<0+t},this.stop=function(){B.pause(),B.pauseEvent&&A.off("stagemousedown",B.pauseEvent),B.pauseSpaceEvent&&m.off("keydown",B.pauseSpaceEvent)},Object.defineProperty(this,"count",{get:function(){return M},set:function(e){M=e,B.stamp&&(B.changeCount=!0,setTimeout(function(){w(M,B.maxCount)}))}}),Object.defineProperty(this,"currentX",{get:function(){return E},set:function(){zon&&zogy("Generator() - currentX is read only")}}),Object.defineProperty(this,"currentY",{get:function(){return I},set:function(){zon&&zogy("Generator() - currentY is read only")}}),this.clone=function(){return B.cloneProps(new e.Generator(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,B.group,b))},B.dispose=function(t,o,n){return B.pause(),B.ticker&&e.Ticker.remove(B.ticker),B.pauseEvent&&A.off("stagemousedown",B.pauseEvent),B.pauseSpacebarEvent&&m.off("keydown",B.pauseSpacebarEvent),B._noise&&(B._noise=null),B.shape&&B.shape.dispose(),B.drawing&&B.drawing.dispose(),B.shape=B.drawing=null,n||B.zimContainer_dispose(),!0},!1!==y&&e.styleTransforms(this,T)},e.extend(e.Generator,e.Container,["clone","dispose"],"zimContainer",!1),e.Pen=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A){function P(t,o){for(var n,r=p.length-1;r>=0;r--)if(p[r][t]==o&&p[r][t+"Transform"]){n=p[r][t+"Transform"];break}n||(n=e.copy(G)),o.x=n.x,o.y=n.y,o.alpha=n.a,o.rotation=n.r,o.regX=n.rX,o.regY=n.rY,o.scaleX=n.sX,o.scaleY=n.sY,o.skewX=n.skX,o.skewY=n.skY,o.visible=n.v,"line"==t&&d&&(o.regX=(W*g-W)/2,o.regY=(H*g-H)/2)}var S,B="size, color, penType, damp, spread, borderColor, borderWidth, end, paper, nib, cache, ctrlKey, cropScale, undo, undoKeys, move, onTop, deleteable, doubleClickDelete, immediateStop, lineAlpha, lineBlendMode, frame, style, group, inherit";if(S=zob(e.Pen,arguments,B,this))return S;z_d("69.93"),this.zimContainer_constructor(),this.type="Pen",this.group=T;var E=!1===k?{}:e.getStyle(this.type,this.group,A);zot(n)&&(n=null!=E.penType?E.penType:"line");var I={size:2,color:"#333",spread:{min:5,max:20},borderColor:"#111",borderWidth:0},M={line:{size:2},kitetail:{size:{min:5,max:20},color:e.series(e.pink,e.blue,e.green),borderColor:"rgba(0,0,0,.5)",borderWidth:1},grass:{color:"#acd241",size:3,spread:{min:10,max:30}},hair:{color:["#e472c4","#50c4b7"],size:3,spread:{min:20,max:50}},city:{size:{min:30,max:70},spread:{min:50,max:200},color:["#333","#111","#555"]},barbwire:{},splatter:{size:{min:5,max:20},color:"rgba(0,0,0,.5)"}};zot(M[n])&&(n="line"),zot(t)&&(t=null!=E.size?E.size:zot(M[n].size)?I.size:M[n].size),zot(o)&&(o=null!=E.color?E.color:zot(M[n].color)?I.color:M[n].color),zot(r)&&(r=null!=E.damp?E.damp:.1),!1===r&&(r=1),zot(i)&&(i=null!=E.spread?E.spread:zot(M[n].spread)?I.spread:M[n].spread),zot(a)&&(a=null!=E.borderColor?E.borderColor:zot(M[n].borderColor)?I.borderColor:M[n].borderColor),zot(l)&&(l=null!=E.borderWidth?E.borderWidth:zot(M[n].borderWidth)?I.borderWidth:M[n].borderWidth),zot(s)&&(s=null!=E.end?E.end:"butt"),zot(g)&&(g=null!=E.cropScale?E.cropScale:1),zot(d)&&(d=null==E.cache||E.cache),
zot(p)&&(p=null!=E.undo?E.undo:0),zot(f)&&(f=null==E.undoKeys||E.undoKeys),zot(m)&&(m=null==E.move||E.move),zot(y)&&(y=null==E.deleteable||E.deleteable),zot(v)&&(v=null==E.doubleClickDelete||E.doubleClickDelete),zot(z)&&(z=null==E.onTop||E.onTop),zot(b)&&(b=null!=E.immediateStop?E.immediateStop:"both"),zot(w)&&(w=null!=E.lineAlpha?E.lineAlpha:1),zot(C)&&(C=null!=E.lineBlendMode?E.lineBlendMode:"normal"),zot(c)&&(c=null!=E.paper?E.paper:new e.Container),zot(u)&&(u=null!=E.nib?E.nib.clone():null),zot(x)&&(x=null!=E.frame?E.frame:zdf);var O=this;this.dampX=new e.Damp(null,r),this.dampY=new e.Damp(null,r);var j=!0;this.drawing=!1,this.immediateStop=b,this.undoLevels=p,this.undoKeys=f,this.move=m,this.draggable=!0,this.lineAlpha=w,this.lineBlendMode=C;var L,_,Y,D,X,R=O.shape=new e.Shape,W=x.stage.width,H=x.stage.height;O.paperNum=0,O.sizeScale=1,O.spreadScale=1,O.sizeFactor=1,O.spreadFactor=1,O.stop=function(){},this.added(function(r){if(X=r,O.paper=c,W=O.stage.width,H=O.stage.height,!zot(u))if(O.zimDown)O.nib=u.addTo(O);else{function h(t){O.drawing&&(O.nib.x=t.stageX/e.scaX,O.nib.y=t.stageY/e.scaY)}O.nib=u.addTo(O.parent,O.parent.getChildIndex(O)),O.nib.x=O.x,O.nib.y=O.y,O.nib.mouseEnabled=!1,O.stageDown=X.on("stagemousedown",function(e){X=e.target.stage,O.nibEvent=X.on("stagemousemove",h)}),O.stageUp=X.on("stagemouseup",function(){X.off("stagemousemove",O.nibEvent)})}O.zimDragCheck=!1,O.stop=function(){O.stopCheck(!0)},O.infinite=!1,O.stopCheck=function(t){if(t)O.drawing=!1,O.infinite=!1;else{if(O.infinite)return;if(O.zimDragCheck)return;if(!O.immediateStop&&O.drawing)return}O.immediate(O.x,O.y),setTimeout(function(){if(!O.drawing){if(d){R.cache(-(W*g-W)/2,-(H*g-H)/2,W*g,H*g);var t=c.bitmap=new e.Bitmap(R.cacheCanvas).reg((W*g-W)/2,(H*g-H)/2).addTo(c);R.graphics.clear(),R.uncache(),R.top()}else t=R;if(O.undoLevels>0){var o={paper:c,line:t};p.push(o),p.length>O.undoLevels&&p.shift(),O.dispatchEvent("recordUndo")}d||(R=(new e.Shape).clone().addTo(c)),O.lastSegment=t,O.lastSelected=t,t.alpha=O.lineAlpha,t.blendMode=O.lineBlendMode,t.paper=c,O.dispatchEvent("stop"),O.dispatchEvent("change")}},O.immediateStop||t?0:50)};var f=0;O.dampX.immediate(O.x),O.dampY.immediate(O.y),O.lastX=O.x,O.lastY=O.y,O.ticker=e.Ticker.add(function(){if(O.parent){var r=O.dampX.convert(j?O.x:O.finishX),u=O.dampY.convert(j?O.y:O.finishY),d=O.parent.localToLocal(r,u,R),h=e.Pick.choose(t)*O.sizeScale*O.sizeFactor,g=e.Pick.choose(i)*O.spreadScale*O.spreadFactor;if(Math.abs(O.lastX-r)+Math.abs(O.lastY-u)<1)return O.drawing&&(O.drawing=!1,O.zimDown?(O.x=O.lastX=j?O.x:O.finishX,O.y=O.lastY=j?O.y:O.finishY,O.dampX.immediate(O.x),O.dampY.immediate(O.y)):(O.x=O.finishX=O.lastX=r,O.y=O.finishY=O.lastY=u),O.stopCheck()),O.lastX=r,void(O.lastY=u);if(O.drawing||(F=[],c.getChildIndex(R)!=c.numChildren-1&&R.top()),O.drawing=!0,O.dispatchEvent("drawing"),"splatter"==n)for(var p=0;p<=3;p++){var m=e.rand(360)*Math.PI/180,z=g,y={x:r+z*Math.cos(m),y:u+z*Math.sin(m)},v=O.parent.localToLocal(y.x,y.y,R);R.graphics.mt(v.x,v.y).f(e.Pick.choose(o)).dc(v.x,v.y,h/2)}else if("grass"==n||"hair"==n||"city"==n){if("grass"==n||"hair"==n){var b=O.lastX+(r-O.lastX)/2,w=O.lastY+(u-O.lastY)/2,C=O.parent.localToLocal(b,w,R);R.graphics.s(e.Pick.choose(o)).ss(h,s).mt(C.x,C.y).lt(C.x+e.rand(-g/4,g/4),"hair"==n?C.y+g:C.y-g)}("grass"==n||"hair"==n||"city"==n&&f%3==0)&&R.graphics.s(e.Pick.choose(o)).ss(h,s).mt(d.x,d.y).lt(d.x+("city"==n?0:e.rand(-g/4,g/4)),"hair"==n?C.y+g:d.y-g),f++}else"kitetail"==n&&R.graphics.s(e.Pick.choose(o)).ss(h,s),"barbwire"==n?(R.graphics.s(e.Pick.choose(o)).ss(h,s),b=O.lastX+(r-O.lastX)/2+e.rand(-g,g),w=O.lastY+(u-O.lastY)/2+e.rand(-g,g)):(b=O.lastX+(r-O.lastX)/2,w=O.lastY+(u-O.lastY)/2),C=O.parent.localToLocal(b,w,R),R.graphics.qt(C.x,C.y,d.x,d.y);var x=O.parent.localToLocal(O.lastX,O.lastY,R);l>0&&"line"!=n&&(b=O.lastX+(r-O.lastX)/2,w=O.lastY+(u-O.lastY)/2,C=O.parent.localToLocal(b,w,R),R.graphics.s(e.Pick.choose(a)).ss(e.Pick.choose(l)).mt(x.x,x.y).qt(C.x,C.y,d.x,d.y),"splatter"==n&&R.graphics.es()),"splatter"==n?R.graphics.f(e.Pick.choose(o)):"kitetail"==n||R.graphics.s(e.Pick.choose(o)).ss(h,s),"grass"!=n&&"hair"!=n&&"city"!=n&&"splatter"!=n&&R.graphics.mt(x.x,x.y).qt(C.x,C.y,d.x,d.y),O.lastX=r,O.lastY=u}}),O.upEvent=X.on("stagemouseup",function(){})}),O.mouseChildren=!1,p=[];var F=[];this.saveState=function(e,t,o){var n="Container"==e.type?"paper":"line",r={paper:O.paper};r[n]=e,r[n+"Transform"]={x:e.x,y:e.y,r:e.rotation,a:e.alpha,rX:e.regX,rY:e.regY,sX:e.scaleX,sY:e.scaleY,skX:e.skewX,skY:e.skewY,v:e.visible},zot(t)||zot(o)||t==o||(r.startLayer=t,r.endLayer=o),p.push(r),O.dispatchEvent("recordUndo"),p.length>O.undoLevels&&p.shift()};var V,N,G={x:0,y:0,r:0,a:1,rX:0,rY:0,sX:1,sY:1,skX:0,skY:0,v:!0};this.undo=function(){var e=p.pop();if(e){if(F.push(e),e.clear){for(var t=0;t<e.clear.length;t++)e.paper.addChild(e.clear[t]);e.paper.addChild(R)}else e.line&&e.lineTransform?(zot(e.startLayer)||(R.top(),e.paper.setChildIndex(e.line,Y)),P("line",e.line)):e.line?e.line.removeFrom():e.paperTransform&&P("paper",e.paper);O.lastPaper=O.paper,e.paper!=O.paper&&(O.paper=e.paper,O.dispatchEvent("paperChange")),O.dispatchEvent("change"),!OPTIMIZE&&O.stage&&O.stage.update()}},this.redo=function(){var e=F.pop();if(e){if(p.push(e),e.clear)e.paper.removeAllChildren(),e.paper.addChild(R);else if(e.line&&e.lineTransform){zot(e.endLayer)||(R.top(),e.paper.setChildIndex(e.line,D));var t=e.lineTransform,o=e.line}else e.line?e.line.addTo(e.paper):e.paperTransform&&(t=e.paperTransform,o=e.paper);o&&(o.x=t.x,o.y=t.y,o.alpha=t.a,o.rotation=t.r,o.regX=t.rX,o.regY=t.rY,o.scaleX=t.sX,o.scaleY=t.sY,o.skewX=t.skX,o.skewY=t.skY,o.visible=t.v),O.lastPaper=O.paper,e.paper!=O.paper&&(O.paper=e.paper,O.dispatchEvent("paperChange")),O.dispatchEvent("change"),!OPTIMIZE&&O.stage&&O.stage.update()}},O.ctrlKey=!1,O.shiftKey=!1,O.ctrlKeyCheck=!1,O.zimkeydownEvent=function(e){O.ctrlKey=e.ctrlKey,O.shiftKey=e.shiftKey,17==e.keyCode&&m&&!O.ctrlKeyCheck&&(O.ctrlKeyCheck=!0,c.noDrag(),c.drag({onTop:z,all:!0})),O.undoLevels<=0||O.undoKeys&&(e.ctrlKey&&(e.shiftKey&&90==e.keyCode||89==e.keyCode)?O.redo():e.ctrlKey&&90==e.keyCode&&O.undo(),x&&x.ctrlKey&&O.write&&(O.lastWrite=O.write,O.write=!1))},window.addEventListener("keydown",O.zimkeydownEvent),O.zimkeyupEvent=function(e){17==e.keyCode&&m&&O.ctrlKeyCheck&&(O.ctrlKeyCheck=!1,c.noDrag(),c.drag({onTop:z})),e.ctrlKey||(O.ctrlKey=!1),e.shiftKey||(O.shiftKey=!1),x&&!x.ctrlKey&&0==O.write&&(O.write=O.lastWrite)},window.addEventListener("keyup",O.zimkeyupEvent),Object.defineProperty(this,"paper",{get:function(){return c},set:function(r){"Container"==r.type&&(c=r,R.addTo(c,0,!1),c.shape=R,O.dampX.immediate(O.x),O.dampY.immediate(O.y),O.lastX=O.finishX=O.x,O.lastY=O.finishY=O.y,"barbwire"==n&&R.graphics.s(e.Pick.choose(o)).ss(e.Pick.choose(t)*O.sizeScale*O.sizeFactor,s),R.graphics.mt(O.x,O.y),c.parent||c.addTo(O.parent,O.parent.getChildIndex(O)),zot(c.paperNum)&&(c.paperNum=++O.paperNum,y&&c.on("mousedown",function(e){O.lastSelected=e.target,O.nibEvent&&O.stage.off("stagemousemove",O.nibEvent);var t=e.target.paper;t&&(t!=O.paper&&(O.paper=t,O.dispatchEvent("paperChange")),O.shiftKey&&(O.ctrlKey?O.clear():(e.target.visible=!1,O.undoLevels>0&&O.saveState(e.target),O.dispatchEvent("change"))))}),v&&c.on("dblclick",function(e){e.target.visible=!1,O.undoLevels>0&&O.saveState(e.target)}),m&&(c.on("mousedown",function(t){X=t.target.stage,O.shiftKey&&y||(L=t.stageX/e.scaX,_=t.stageY/e.scaY,R.top(),Y=c.getChildIndex(t.target))}),c.drag({onTop:z}),c.on("pressup",function(t){y&&O.shiftKey||0!=t.target.visible&&(O.undoLevels<=0||(Math.abs(t.stageX/e.scaX-L)<1&&Math.abs(t.stageY/e.scaY-_)<1?z&&(R.top(),D=c.getChildIndex(t.target),Y!=D&&O.saveState(t.target,Y,D)):(O.ctrlKey?(O.saveState(c),O.dispatchEvent("paperChange")):(R.top(),D=c.getChildIndex(t.target),O.saveState(t.target,Y,D)),O.dispatchEvent("change"),R.top())))}))))}}),Object.defineProperty(this,"write",{get:function(){return j},set:function(e){j&&!1===e&&(O.finishX=O.x,O.finishY=O.y),!j&&e&&(R.graphics.es(),R.graphics.ef(),O.dampX.immediate(O.x),O.dampY.immediate(O.y),O.lastX=O.x,O.lastY=O.y),j=e}}),Object.defineProperty(this,"size",{get:function(){return t},set:function(o){R.graphics.es(),R.graphics.ef(),t=o,"splatter"!=n&&R.graphics.ss(e.Pick.choose(t)*O.sizeScale*O.sizeFactor,s)}}),Object.defineProperty(this,"color",{get:function(){return o},set:function(t){o=t,R.graphics.es(),R.graphics.ef(),"splatter"!=n&&R.graphics.s(e.Pick.choose(o))}}),Object.defineProperty(this,"penType",{get:function(){return n},set:function(r){n=r,R.graphics.ef().es(),"splatter"!=n?R.graphics.s(e.Pick.choose(o)):R.graphics.s(e.Pick.choose(o)).ss(e.Pick.choose(t)*O.sizeScale*O.sizeFactor,s)}}),Object.defineProperty(this,"damp",{get:function(){return r},set:function(e){r=e,O.dampX.damp=r,O.dampY.damp=r}}),Object.defineProperty(this,"spread",{get:function(){return i},set:function(e){i=e}}),this.setColorRange=function(e,t){return zot(t)?(V=O.color,N=e):zot(e)?(V=O.color,N=t):(V=e,N=t),O};var q=0;Object.defineProperty(O,"colorRange",{get:function(){return q},set:function(t){q=t,zot(V)||zot(N)||(O.color=e.colorRange(V,N,t))}}),Object.defineProperty(this,"borderColor",{get:function(){return a},set:function(e){a=e}}),Object.defineProperty(this,"borderWidth",{get:function(){return l},set:function(e){l=e}}),O.setPen=function(t){O.dampX.immediate(O.x),O.dampY.immediate(O.y),O.lastX=O.finishX=O.x,O.lastY=O.finishY=O.y,zot(t)&&(t=n),zot(M[t])&&(t="line"),O.penType=n=t;var o=e.merge(I,M[t]);for(var r in o)O[r]!=o[r]&&(O[r]=o[r]);return O},O.immediate=function(e,t){return zot(e)||(O.x=e,O.dampX.immediate(O.x),O.lastX=O.finishX=O.x),zot(t)||(O.y=t,O.dampY.immediate(O.y),O.lastY=O.finishY=O.y),O},O.clear=function(){for(var e=[],t=0;t<c.numChildren-1;t++)e.push(c.getChildAt(t));return p.push({paper:c,clear:e}),p.length>O.undoLevels&&p.shift(),O.dispatchEvent("recordUndo"),c.removeAllChildren(),R.graphics.clear(),c.addChild(R),O.dispatchEvent("change"),O.stage&&O.stage.update(),O},this["delete"]=function(e){c.getChildAt(e).visible=!1,O.undoLevels>0&&O.saveState(c.getChildAt(e))},this.deleteSegment=function(e){e.visible=!1,O.undoLevels>0&&O.saveState(e)},O.dispose=function(t,o,n){return zot(t)&&(t=!0),window.removeEventListener("keydown",O.zimkeydownEvent),window.removeEventListener("keyup",O.zimkeyupEvent),X&&O.nibEvent&&X.off("stagemousemove",O.nibEvent),X&&O.stageDown&&X.off("stagemousedown",O.stageDown),X&&O.stageUp&&X.off("stagemouseup",O.stageUp),X&&O.upEvent&&X.off("stagemouseup",O.upEvent),e.Ticker.remove(O.ticker),O.removeAllEventListeners(),u&&u.removeFrom(),t&&(O.shape&&O.shape.dispose(),O.paper&&O.paper.dispose(),d&&(O.bitmap&&O.bitmap.dispose(),O.bitmap=null),O.zimContainer_dispose(n),c=R=O.shape=null),!0},!1!==k&&e.styleTransforms(this,E)},e.extend(e.Pen,e.Container,"dispose","zimContainer",!1),e.SoundWave=function(t,o,n,r,i,a,l,s,c,u){function d(t){if(y&&y.disconnect(v),y=t,t.connect(v),"mic"!=o&&v.connect(m.destination),v.fftSize=2*e.SoundWave.bufferLength,(z=Math.floor(n*e.SoundWave.bufferLength/p))<1)zog("ZIM SoundWave: include param is too small or num param is too big");else{var r=v.frequencyBinCount,i=new Uint8Array(r);f.calculate=function(){v.getByteFrequencyData(i);var t=i.map(l);if(1==z)return t;for(var r=[],a=0,s=0;s<=n*e.SoundWave.bufferLength;s++)a+=t[s],0!=s&&s%z==0&&(r.push(Math.max(0,(a/z-f.baseline)*f.magnify-f.reduce)),a=0);return"mic"!=o&&(r[0]*=.75,r[1]*=.85,r[2]*=.9,r[r.length-2]*=.8,r[r.length-1]*=.75),r[r.length-1]*=1.3,r[r.length-2]*=1.2,r[r.length-3]*=1.1,r},setTimeout(function(){f.dispatchEvent("ready")},50)}}var h,g="num, input, include, smoothing, min, max, operation, baseline, magnify, reduce";if(h=zob(e.SoundWave,arguments,g,this))return h;z_d("69.95"),this.type="SoundWave",zot(t)&&(t=120),zot(o)&&(o="mic"),zot(n)&&(n=.1171875),zot(r)&&(r=.85),zot(i)&&(i="mic"==o?-80:(o.oscillator,-100)),zot(a)&&(a="mic"==o?-40:(o.oscillator,-10)),zot(l)&&(l=function(t,o){return t*(.5+1*o/Math.pow(e.SoundWave.bufferLength,.95))}),zot(s)&&(s="mic"==o?0:(o.oscillator,30)),zot(c)&&(c="mic"==o?1:o.oscillator?5:10),zot(u)&&(u=0),e.SoundWave.bufferLength=1024;var p=t,f=this;if(f.baseline=s,f.magnify=c,f.reduce=u,f.input=o,"Tone"==o.type||"SynthSound"==o.type)var m=o.audioContext;else m=new(window.AudioContext||window.webkitAudioContext);var z,y,v=f.analyser=m.createAnalyser();v.minDecibels=i,v.maxDecibels=a,v.smoothingTimeConstant=r,Object.defineProperty(this,"smoothing",{get:function(){return v.smoothingTimeConstant},set:function(e){v.smoothingTimeConstant=e}}),Object.defineProperty(this,"num",{get:function(){return p},set:function(t){p=t,(z=Math.floor(n*e.SoundWave.bufferLength/p))<1&&zog("ZIM SoundWave: num is too big")}}),this.setInput=function(e){if(f.input=e,"mic"==e)return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,void(navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(e){d(f.source=m.createMediaStreamSource(e))},function(e){zog("ZIM SoundWave: Error occured: "+e)}):zog("ZIM SoundWave: Sorry, mic not supported"));if("Tone"==e.type)d(e.compressor);else if("SynthSound"==e.type)d(e.gain);else{if(e.type&&"sound"==e.type)return void zog("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input");if(e.playbackResource)var t=e.playbackResource,o=m.createMediaElementSource(t);else t=e,o=m.createMediaElementSource(t);d(o)}},this.setInput(o),this.dispose=function(e){return e&&m&&m.close(),v&&v.disconnect(),!0}},e.extend(e.SoundWave,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.Synth=function(o,n){z_d("69.955"),this.type="Synth",zot(o)&&(o=.3),zot(n)&&(n=220),this.volume=o,this.frequency=n;var r,i=this;
// MIT License - Copyright 2019 Frank Force
this.play=function(t,o,n,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E,I,M,O,j,L,_,Y,D,X,R,W,H,F,V,N,G,q,Q,U,K){var Z=Array.prototype.slice.call(arguments);if(r||!window.AudioContext&&!window.webkitAudioContext||((r=new(window.AudioContext||window.webkitAudioContext)).z=r.createBufferSource,r.createBufferSource=function(e){return null==e&&(e=r.z()),e.start=e.start||function(e){r.noteOn(e)},e}),r){for(t=null!=t?zik(t):.3,o=null!=o?zik(o):.05,n=null!=n?zik(n):220,a=null!=a?zik(a):0,l=null!=l?zik(l):0,s=null!=s?zik(s):.1,c=null!=c?zik(c):0,u=null!=u?zik(u):1,d=null!=d?zik(d):0,h=null!=h?zik(h):0,g=null!=g?zik(g):0,p=null!=p?zik(p):0,f=null!=f?zik(f):0,m=null!=m?zik(m):0,z=null!=z?zik(z):0,y=null!=y?zik(y):0,v=null!=v?zik(v):0,C=null!=C?zik(C):0,b=null!=b?zik(b):1,w=null!=w?zik(w):0,B=null!=B?zik(B):44100,null==E&&(E=99+a*B),null==I&&(I=l*B),null==M&&(M=s*B),null==O&&(O=w*B),null==j&&(j=v*B),null==L&&(L=2*Math.PI),null==_&&(_=function(e){return e>0?1:-1}),null==Y&&(Y=E+O+I+M+j),null==D&&(D=d*=500*L/Math.pow(B,2)),null==X&&(X=n*=(1+2*o*Math.random()-o)*L/B),null==R&&(R=_(z)*L/4),null==W&&(W=0),null==H&&(H=0),null==F&&(F=0),null==V&&(V=0),null==N&&(N=0),null==G&&(G=0),null==q&&(q=1),null==Q&&(Q=[]),null==U&&(U=r.createBufferSource()),null==K&&(K=r.createBuffer(1,Y,B)),U.connect(r.destination);F<Math.floor(Y);Q[F++]=G)++N>100*y&&(N=0,G=W*n*Math.sin(H*z*L/B-R),G=c?c>1?c>2?c>3?Math.sin(Math.pow(G%L,3)):Math.max(Math.min(Math.tan(G),1),-1):1-(2*G/L%2+2)%2:1-4*Math.abs(Math.round(G/L)-G/L):Math.sin(G),G=(f?1-C+C*Math.sin(L*F/f):1)*_(G)*Math.pow(Math.abs(G),u)*t*i.volume*(F<E?F/E:F<E+O?1-(F-E)/O*(1-b):F<E+O+I?b:F<Y-j?(Y-F-j)/M*b:0),G=j?G/2+(j>F?0:(F<Y-j?1:(F-Y)/j)*Q[F-j|0]/2):G),W+=1-m+1e9*(Math.sin(F)+1)%2*m,H+=1-m+1e9*(Math.pow(Math.sin(F),2)+1)%2*m,n+=d+=500*h*L/Math.pow(B,3),q&&++q>p*B&&(n+=g*L/B,X+=g*L/B,q=0),f&&++V>f*B&&(n=X,d=D,V=1,q=q||1);K.getChannelData(0).set(Q),U.buffer=K;var J,$=new createjs.EventDispatcher;return $.type="SynthSound",$.audioContext=r,$.gain=r.createGain(),U.connect($.gain),$.gain.connect(r.destination),U.start(),$.duration=Q.length/B,$.playing=!0,$.stop=function(){clearTimeout($.completeID),clearInterval($.repeatID),$.gain.gain.setTargetAtTime(0,r.currentTime,.1),$.playing=!1,setTimeout(function(){r.close()},100)},$.repeat=$.loop=function(t,o){function n(){return $.duration+zik(o)}return J=0,!0===t&&(t=null),zot(o)&&(o=0),clearTimeout($.completeID),$.repeatID=e.interval(n,function(){J++,t&&J>=t?($.dispatchEvent("complete"),$.repeatID.clear(),$.playing=!1):($.dispatchEvent("loop"),i.play.apply(i,Z))}),$},$.play=function(){return i.play.apply(i,Z),$.playing=!0,$},$.completeID=setTimeout(function(){$.dispatchEvent("complete")},1e3*(Q.length/B+.1)),$}},this.Tone=function(o,r,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w){function C(e,t){zot(e)&&(e=B.currentTime),zot(t)&&(t=i.attack),M.start(e);var n=zdf&&(new Date).getTime()-zdf.startTime<200?.1:i.attack;j.gain.setValueAtTime(0,B.currentTime+.1),j.gain.linearRampToValueAtTime(o*i.hush,B.currentTime+.1+n)}function x(e,t,o,n){zot(t)&&(t=0),zot(n)&&(n=i.rampDuration),o?(e.cancelScheduledValues(B.currentTime),e.linearRampToValueAtTime(e.value=e.value,B.currentTime+.02),e.linearRampToValueAtTime(t,B.currentTime+.05+n)):(e.cancelScheduledValues(B.currentTime),e.setTargetAtTime(t,B.currentTime,n))}function k(){zot(u)&&(u=1e3),zot(d)&&(d=1),zot(h)&&(h="sine"),zot(g)&&(g=5),p=zot(p)?E.oscillator.frequency.value:e.Synth.note(p),zot(Y)&&(Y=200),E.filter.Q.value=g,(_=E.wah=i.oscillator(d,u/2,h,p+u/2+Y)).ticker=e.Ticker.add(function(){E.filter.frequency.value=E.wah.amplitude})}function T(){zot(m)&&(m=5),zot(z)&&(z="sine"),zot(f)&&(f=10),D=E.vibrato=B.createOscillator(),(X=E.vibratoGain=B.createGain()).gain.value=0,D.frequency.value=m,e.Synth.setShape(D,z),D.connect(X),X.connect(M.frequency),D.start(0),X.gain.setValueAtTime(0,B.currentTime+.1),X.gain.linearRampToValueAtTime(f,B.currentTime+.1+i.attack)}function A(){zot(v)&&(v=5),zot(b)&&(b="sine"),R=E.tremelo=B.createOscillator(),(W=E.tremeloGain=B.createGain()).gain.value=0,R.frequency.value=v,e.Synth.setShape(R,b),R.connect(W),W.connect(j.gain),R.start(0);var t=zdf&&(new Date).getTime()-zdf.startTime<200?.1:i.attack;W.gain.setValueAtTime(0,B.currentTime+.1),W.gain.linearRampToValueAtTime(o*i.hush,B.currentTime+.1+t)}var P,S="volume, note, shape, duration, attack, release, wahAmount, wahRate, wahShape, wahThroat, wahNote, vibratoAmount, vibratoRate, vibratoShape, tremeloAmount, tremeloRate, tremeloShape, startTime";if(P=zob(i.Tone,arguments,S,this))return P;this.type="Tone";var B,E=this;zot(o)&&(o=i.volume),zot(r)&&(r=i.frequency),zot(a)&&(a=e.SINE),zot(s)&&(s=.02),zot(c)&&(c=.05),zot(w)&&(w=0),window.AudioContext||window.webkitAudioContext?B=this.audioContext=new(window.AudioContext||window.webkitAudioContext):zon&&zogy("Synth tone() needs AudioContext"),o=zik(o),r=zik(r),a=zik(a),l=zik(l),s=zik(s),c=zik(c),u=zik(u),d=zik(d),h=zik(h),g=zik(g),p=zik(p),f=zik(f),m=zik(m),z=zik(z),y=zik(y),v=zik(v),b=zik(b),w=zik(w);var I=t(l);i.duration=l,l&&(l*="s"==I?1:.001),w&&(t(w),w*="s"==I?1:.001),i.attack=s,i.release=c,i.rampDuration=.02,i.hush=.1;var M=this.note=this.oscillator=B.createOscillator();M.frequency.value=e.Synth.note(r),e.Synth.setShape(M,a);var O=this.filter=B.createBiquadFilter();O.type="bandpass",O.frequency.value=M.frequency.value,O.Q.value=0;var j=this.gain=M.gain=B.createGain();j.type="gain",j.gain.setValueAtTime(0,B.currentTime);var L=this.compressor=B.createDynamicsCompressor();L.threshold.setValueAtTime(-50,B.currentTime),L.knee.setValueAtTime(40,B.currentTime),L.ratio.setValueAtTime(12,B.currentTime),L.attack.setValueAtTime(0,B.currentTime),L.release.setValueAtTime(.25,B.currentTime),M.connect(O),O.connect(j),j.connect(L),L.connect(B.destination),C(w),this.stop=function(e){zot(e)&&(e=i.release),j&&x(j.gain,0,!0,e),W&&x(W.gain,0,!0,e),X&&x(X.gain,0,!0,e),setTimeout(function(){E.dispatchEvent("complete")},1e3*(.6+e+i.rampDuration)),setTimeout(function(){B&&!B.iamClosed&&(B.iamClosed=!0,B.close())},1e3*(e+1)),setTimeout(function(){_&&E.removeWah()},1e3*(e+1))},l&&this.stop(w+l-.1);var _,Y,D,X,R,W,H=this.notes=[M];this.addNote=function(t,o,n,r,i,a){zot(r)&&(r=!0),zot(i)&&(i=!1),zot(t)&&(t=.1),zot(a)&&(a=0);var l={type:"Note"};l._volume=t,l._note=e.Synth.note(o),H.push(l);var s=l.oscillator=B.createOscillator();s.frequency.value=l._note,s.type=e.Synth.setShape(s,n);var c=l.gain=B.createGain();return x(c.gain,l._volume,!0),c.connect(r?O:j),s.connect(c),X&&i&&X.connect(s.frequency),s.start(B.currentTime+a),Object.defineProperty(l,"volume",{get:function(){return l._volume},set:function(e){zot(e)||(l._volume=zik(e),x(l.gain.gain,l._volume,!0))}}),Object.defineProperty(l,"note",{get:function(){return l._note},set:function(t){zot(t)||(l._note=zik(t),x(l.oscillator.frequency,e.Synth.note(l._note)))}}),l},this.removeNote=function(e){var t=H.indexOf(e);return t>=0&&H.splice(t,1),e.oscillator.disconnect(),e=null,this},this.ramp=function(e,t){x(j.gain,e*i.hush,!0,t)},this.animate=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),e.animate.apply(null,arguments),this},this.wiggle=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),e.wiggle.apply(null,arguments),this},e.addWires(this),!u&&!d&&zot(h)&&zot(g)||k(),E.removeWah=function(){e.Ticker.remove(_.ticker),_.dispose(),_=E.wah=null,E.filter.Q.value=0},(f||m||!zot(z))&&T(),E.removeVibrato=function(){x(X.gain,0,!0),setTimeout(function(){X.disconnect(),D.disconnect(),D.stop(),D=null},1e3*(i.rampDuration+1))},(y||v||!zot(b))&&A(),E.removeTremelo=function(){x(W.gain,0,!0),setTimeout(function(){W.disconnect(),R.disconnect(),R.stop(),R=null},1e3*(i.rampDuration+1))},Object.defineProperty(this,"volume",{get:function(){return o},set:function(t){if(!zot(t)){if(R){if(j.gain.value)var n=W.gain.value/j.gain.value;else n=o?y/o:0;o=zik(t),o=e.constrain(o,.001),x(W.gain,o*n*i.hush,!0)}else o=zik(t);x(j.gain,o*i.hush,!1,i.rampDuration)}}}),Object.defineProperty(this,"frequency",{get:function(){return n},set:function(e){zot(e)||(n=zik(e),x(M.frequency,e))}}),Object.defineProperty(this,"note",{get:function(){return r},set:function(t){zot(t)||(r=zik(t),M.frequency.value=e.Synth.note(r))}}),Object.defineProperty(this,"shape",{get:function(){return a},set:function(t){a=zik(t),e.Synth.setShape(M,a)}}),Object.defineProperty(this,"currentTime",{get:function(){return B.currentTime},set:function(){zon&&zogy("Synth tone() - currentTime is read only")}}),this.wahAmountMin=0,this.wahAmountMax=5e3,Object.defineProperty(this,"wahAmount",{get:function(){return u},set:function(t){zot(t)||(u=zik(t),u=e.constrain(u,i.wahAmountMin,i.wahAmountMax),zot(_)?k():_.gain=u/2)}}),this.wahRateMin=0,this.wahRateMax=30,Object.defineProperty(this,"wahRate",{get:function(){return d},set:function(t){zot(t)||(d=zik(t),d=e.constrain(d,i.wahRateMin,i.wahRateMax),zot(_)?k():_.frequency=d)}}),this.wahThroatMin=0,this.wahThroatMax=100,j.gain.value,Object.defineProperty(this,"wahThroat",{get:function(){return g},set:function(t){g=zik(t),g=e.constrain(g,i.wahThroatMin,i.wahThroatMax),zot(_)?k():O.Q.value=g}}),Object.defineProperty(this,"wahNote",{get:function(){return p},set:function(e){zot(e)||(p=zik(e),zot(_)?k():_.offset=p+u/2+Y)}}),Object.defineProperty(this,"wahAdjust",{get:function(){return Y},set:function(e){zot(e)||(Y=zik(e),zot(_)?k():_.offset=p+u/2+Y)}}),Object.defineProperty(this,"wahShape",{get:function(){return h},set:function(e){h=zik(e),zot(_)?k():_.shape=h}}),Object.defineProperty(this,"tremeloAmount",{get:function(){return y},set:function(e){zot(e)||(y=zik(e),zot(R)?A():W.gain.setValueAtTime(y,B.currentTime))}}),Object.defineProperty(this,"tremeloRate",{get:function(){return v},set:function(e){zot(e)||(v=zik(e),zot(_)?A():R.frequency.value=v)}}),Object.defineProperty(this,"tremeloShape",{get:function(){return b},set:function(t){b=zik(t),zot(R)?A():e.Synth.setShape(R,b)}}),Object.defineProperty(this,"vibratoAmount",{get:function(){return f},set:function(e){zot(e)||(f=zik(e),zot(D)?T():X.gain.setValueAtTime(f,B.currentTime))}}),Object.defineProperty(this,"vibratoRate",{get:function(){return m},set:function(e){zot(e)||(m=zik(e),zot(D)?T():D.frequency.value=m)}}),Object.defineProperty(this,"vibratoShape",{get:function(){return z},set:function(t){z=zik(t),zot(D)?T():e.Synth.setShape(D,z)}})},e.extend(this.Tone,createjs.EventDispatcher),this.tone=function(){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(i.Tone,arguments))},this.Oscillator=function(t,o,n,r){var a,l="frequency, gain, shape, offset";if(a=zob(i.Oscillator,arguments,l,this))return a;this.type="Oscillator",zot(t)&&(t=1),zot(o)&&(o=10),zot(n)&&(n="sine"),zot(r)&&(r=0),this.frequency=zik(t),this.gain=zik(o),this.shape=zik(n),"saw"==this.shape&&(this.shape="sawtooth"),this.offset=zik(r),this.paused=!1;var s=this,c=0,u=e.Ticker.framerate;this.ticker=e.Ticker.add(function(){if(!s.paused){var e=0;"sine"==s.shape?e=Math.sin(s.frequency*(2*Math.PI*(c/u))):"square"==s.shape?e=(e=Math.sin(s.frequency*(2*Math.PI*(c/u))))<=0?0:1:"triangle"==s.shape?e=2/Math.PI*Math.asin(Math.sin(s.frequency*Math.PI*2*c/u)):"sawtooth"==s.shape||"saw"==s.shape?e=-2/Math.PI*Math.atan(1/Math.tan(s.frequency*Math.PI*c/u)):"zap"==s.shape&&(e=2/Math.PI*Math.atan(1/Math.tan(s.frequency*Math.PI*c/u))),s.amplitude=e*s.gain+s.offset,c++}}),this.pause=function(e){s.paused=e},this.dispose=function(){e.Ticker.remove(this.ticker)}},this.oscillator=function(){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(i.Oscillator,arguments))}},e.Synth.notes=["C",,"D",,"E","F",,"G",,"A",,"B"],e.Synth.major=["C","D","E","F","G","A","B","C4"],e.Synth.minor=["C","D","Eb","F","G","Ab","B","C4"],e.Synth.shapes=["sine","triangle","sawtooth","tan","noise","square"],e.Synth.setShape=function(t,o){if(!zot(t)){if(zot(o)&&(o="sine"),"saw"==o&&(o="sawtooth"),"number"==typeof o)(o=e.Synth.shapes[o])||(o="sine");else if(o.real&&o.imag)var n=t.context.createPeriodicWave(new Float32Array(o.real),new Float32Array(o.imag));else if(o.constructor==PeriodicWave)n=o;else if("string"==typeof o)if(e.Synth.shapes.indexOf(o)<0&&(o="sine"),"noise"==o){for(var r=4096,i=new Float32Array(r),a=new Float32Array(r),l=1;l<r;l+=2)a[l]=e.shuffle([0,.5,1])[0];n=t.context.createPeriodicWave(i,a)}else"tan"==o&&(o="sawtooth");else o="sine";n?(t.setPeriodicWave(n),o="custom"):t.type=o}},e.Synth.getNote=function(e,t){return zot(t)&&(t=0),e*Math.pow(2,t/12)},e.Synth.note=function(t){if("string"==typeof t){var o=t.substr(0,1).toUpperCase(),n=e.loop(t,function(e){if(!isNaN(e))return Number(e)});n=!0===n||isNaN(n)?3:n;var r=e.Synth.notes.indexOf(o);r<0&&(r=9);var i=t.match(/b/g),a=t.match(/#/g);i=i?i.length:0;var l=12*(n-3)+r+(a=a?a.length:0)-i;return e.Synth.getNote(e.Synth.getNote(220,-9),l)}return"number"!=typeof t&&(t=220),t},e.Synth.wave=function(e,t){if(window.AudioContext||window.webkitAudioContext){var o=new(window.AudioContext||window.webkitAudioContext);if(e.real)t=e.imag,e=e.real;else if(zot(t)&&zon)return void zogy("Synth.wave() - pass in asset('wave.json') or real and imag properties");return e.constructor!==Float32Array&&(e=new Float32Array(e)),t.constructor!==Float32Array&&(t=new Float32Array(t)),o.createPeriodicWave(e,t)}},e.Synth.drawWave=function(t,o,n,r,i,a,l,s,c){var u,d="shape, color, thickness, backgroundColor, borderColor, borderWidth, corner, padding, paddingVertical";if(u=zob(e.Synth.drawWave,arguments,d))return u;var h=45,g=45;t=zik(t),zot(n)&&(n=2),zot(o)&&(o=e.darker),zot(s)&&(s=8),zot(c)&&(c=s);var p=s,f=c,m=new e.Container(h,g);m.mouseChildren=!1,zot(r)||(m.backing=new e.Rectangle(h,g,r,i,a,l).addTo(m)),m.shape=new e.Shape(h,g).addTo(m).s(o).ss(n);var z=h-2*p;return"square"==t?m.shape.mt(p,g/2).lt(p,f+3).lt(h/2,f+3).lt(h/2,g-f-3).lt(h-p,g-f-3).lt(h-p,g/2):"triangle"==t?m.shape.mt(p,g/2).lt(p+z/4,f+3).lt(p+3*z/4,g-f-3).lt(h-p,g/2):"sawtooth"==t||"saw"==t?m.shape.mt(p,g/2).lt(h/2,f+2).lt(h/2,g-f-2).lt(h-p,g/2):"zap"==t?m.shape.mt(p,g/2).lt(h/2,g-f-2).lt(h/2,f+2).lt(h-p,g/2):m.shape.mt(p,g/2).bt(h/2,-15,h/2,g+15,h-p,g/2),m.type=t,m},e.VR=function(t,o,n,r,i,a,l,s,c,u,d,h){function g(){P.addTo(k,null,!1).setMask(k.getChildAt(0)).pos({y:(h.height-P.height)/2,reg:!0}),S.addTo(A,null,!1).setMask(A.getChildAt(0)).pos({y:(h.height-P.height)/2,reg:!0})}function p(t,o,n,r){t.vrMatch=o,o.vrMatch=t,t.cacheCanvas&&o.cache(),t.dep&&!zot(t.depth)&&(E.push(t),I.push(o),zot(n)||n.push(t),zot(r)||r.push(o),o.dep(t.depth)),e.loop(t,function(e,t){p(e,o.getChildAt(t),n,r)})}function f(t,i){e.loop(t,function(t){t.vrChannel=i,t.vrStartX=t.x,0!=o&&0!=n&&(t.vrAngle=o,t.vrDistance=n),0!=r&&0!=n&&(t.vrParallax=r/100,t.vrParallaxDistance=0,0!=o&&(t.vrParallaxDamp=new e.Damp(0,l))),t.dep(t.depth)})}function m(){var e=Z.convert(Q.currentValue);P.regX=P.startRegX+e,S.regX=S.startRegX-e}function z(t){var o=E.indexOf(t);E.indexOf(t)>=0&&(E.splice(o,1),I.splice(o,1)),e.loop(t,function(e){z(e)})}var y,v="content, angle, distance, parallax, parallaxAngle, damp, parallaxDamp, startAngle, negativeParallax, boundaryMarkers, swiper, holder";if(y=zob(e.VR,arguments,v,this))return y;if(z_d("69.98"),this.type="VR",zdf){var b=zdf;!zot(h)&&h.getBounds&&h.getBounds().width||(h=b.stage),zot(o)&&(o=0),zot(n)&&(n=100),zot(a)&&(a=.5),zot(r)&&(r=0),zot(i)&&(i=60),zot(l)&&(l=.1),zot(s)&&(s=0),zot(c)&&(c=!1),zot(u)&&(u=!0),zot(d)&&(d=!0),this.angle=o,this.currentAngle=s,e.mobile()&&(d=!1);var w=this,C=h.width,x=h.height;w.zimContainer_constructor();var k=w.left=new e.Container(C/2,x,null,null,!1),T=new e.Rectangle(C/2,x,"rgba(0,0,0,.01)",null,null,null,null,null,!1);k.addChild(T);var A=w.right=k.clone();w.addChild(k,A),A.x=C/2;var P=w.contentLeft=w.content=t,S=w.contentRight=t.clone();if(0!=s)var B=setTimeout(g,100);else g();var E=[],I=[];if(p(P,S),f(E,"left"),f(I,"right"),0!=o&&0!=n){var M=new e.Damp(180+s,a);M.immediate(180+s);var O=!1,j=!1;function L(e){w.currentAngle=e;var t=-w.currentAngle*n/o;if(w.contentLeft.x=t,w.contentRight.x=t,Math.round(w.currentAngle)<=-o/2&&!O)(r=new createjs.Event("boundaryout")).boundary="left",O=!0,w.dispatchEvent(r);else if(Math.round(w.currentAngle)>=o/2&&!j)(r=new createjs.Event("boundaryout")).boundary="right",j=!0,w.dispatchEvent(r);else if(Math.round(w.currentAngle)>-o/2&&Math.round(w.currentAngle)<o/2){var r=new createjs.Event("boundaryin");O?(r.boundary="left",w.dispatchEvent(r),O=!1):j&&(r.boundary="right",w.dispatchEvent(r),j=!1)}}function _(e){var t=e.parent.localToLocal(e.vrStartX,0,h),r=e.vrParallaxDamp.convert("left"==e.vrChannel?w.contentLeft.x+t.x-C/4:w.contentRight.x+t.x-C/2-C/4);e.depth<=0&&!c&&(r=0),e.vrParallaxDistance=Math.max(-n/o*i/2,Math.min(n/o*i/2,r)),e.dep(e.depth)}b.on("deviceorientation",function(e){L(M.convert((e.rotation.z>180?-180:180)+e.rotation.z+s)-180)}),e.Ticker.always()}if(0!=r&&0!=n){var Y=new e.ProportionDamp(180-i/2,180+i/2,-i/2,i/2,l);if(Y.immediate(180),0==o)function D(e,t){e.vrParallaxDistance=e.depth<=0&&!c?0:t,e.dep(e.depth)}function X(t){0!=o&&0!=n?(e.loop(E,_),e.loop(I,_)):(e.loop(E,function(e){D(e,t)}),e.loop(I,function(e){D(e,t)}))}b.on("deviceorientation",function(e){var t=0;0==o&&0!=r&&0!=n&&(t=Y.convert((e.rotation.z>180?-180:180)+e.rotation.z)),X(t)}),e.Ticker.always()}!d||0==n||0==o&&0==r||w.added(function(){var t={swipeAngle:0};w.swiper=new e.Swiper({swipeOn:w,target:t,property:"swipeAngle",sensitivity:.2,damp:.05,factor:-1,min:-330,max:330}),e.Ticker.add(function(){0!=o&&0!=n&&L(t.swipeAngle),0!=r&&0!=n&&X(Y.convert(t.swipeAngle+180))})});var R=localStorage&&localStorage.zimEyeAdjust?Number(localStorage.zimEyeAdjust):0,W=R,H=!1;P.startRegX=P.regX,S.startRegX=S.regX;var F=this.adjuster=new e.Container(800,300,null,null,!1),V=(T=F.backing=new e.Rectangle(F.width,F.height,e.lighter,null,null,null,null,null,!1).center(F).alp(1).sha("rgba(0,0,0,.2)",0,0,30),F.strip=new e.Rectangle(F.width,F.height/3,e.white,null,null,null,null,null,!1).center(F).alp(1),F.label=new e.Label({text:"slide to adjust center of left and right",size:28,color:e.dark,align:"center",valign:"center"}).center(F).pos({y:50,reg:!0}),F.close=new e.Rectangle(50,50,e.light,null,null,null,null,null,!1).addTo(F).mov(F.width-70,26)),N=new e.Shape(-40,-40,80,80,null,!1);N.graphics.f(e.dark).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),N.center(V).sca(.3),V.cursor="pointer",V.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){w.hideAdjuster(),Q.currentValue=(Q.max-Q.min)/2+W,w.dispatchEvent("closed")});var G=new e.Circle(30,e.dark,null,null,null,null,null,null,!1).center(F).pos({x:F.width/4,reg:!0});G.shape.alpha=.2,new e.Circle(12,e.dark,null,null,null,null,null,!1).center(G);var q=new e.Circle(30,e.dark,null,null,null,null,null,!1).center(F).pos({x:F.width/4*3,reg:!0});q.shape.alpha=.2,new e.Circle(12,e.dark,null,null,null,null,null,null,!1).center(q);var Q=F.slider=new e.Slider({min:0,max:30,step:1,useTicks:!0,style:!1}).centerReg(F).pos({y:F.height-40,reg:!0});Q.currentValue=(Q.max-Q.min)/2+R;var U=new e.Proportion(Q.min,Q.max,G.x-F.width/4,G.x+F.width/4,-1),K=new e.Proportion(Q.min,Q.max,q.x-F.width/4,q.x+F.width/4);Q.on("change",function(){G.x=U.convert(Q.currentValue),q.x=K.convert(Q.currentValue)}),new e.Label("closer",24,null,e.silver).centerReg(F).pos({x:Q.x-220,y:Q.y,reg:!0}),new e.Label("farther",24,null,e.silver).centerReg(F).pos({x:Q.x+220,y:Q.y,reg:!0}),(w.ok=new e.Button({label:"OK",width:90,height:60,corner:0,backgroundColor:e.blue,rollBackgroundColor:e.green,shadowColor:-1,style:!1}).centerReg(F).sca(.8).pos({x:F.width-58,y:Q.y,reg:!0})).on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){localStorage&&(localStorage.zimEyeAdjust=Q.currentValue-(Q.max-Q.min)/2),m(),w.hideAdjuster(),w.dispatchEvent("saved"),w.dispatchEvent("closed")}),(w.zero=new e.Button({label:">|<",width:90,height:60,corner:0,backgroundColor:e.yellow,rollBackgroundColor:e.green,shadowColor:-1,style:!1}).centerReg(F).sca(.8).pos({x:58,y:Q.y,reg:!0})).on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){Q.currentValue=(Q.max-Q.min)/2,G.x=U.convert(Q.currentValue),q.x=K.convert(Q.currentValue)});var Z=new e.Proportion(0,30,-h.width/4,h.width/4);m(),this.showAdjuster=function(){if(H)return w;H=!0,G.x=U.convert(Q.currentValue),q.x=K.convert(Q.currentValue),W=Q.currentValue-(Q.max-Q.min)/2,F.scaleTo(h).center(this),h.stage.update()},this.hideAdjuster=function(){if(!H)return w;H=!1,F.removeFrom(this),h.stage.update()},this.position=function(e,t,o){function n(e){e.vrStartX=t,e.vrParallaxDamp&&e.vrParallaxDamp.immediate(t),e.mov(t,o)}return n(e),n(e.vrMatch),e},this.register=function(e){if(!e.parent||!e.parent.vrMatch)return zon&&zog("ZIM VR() - please only register objects already inside content container"),e;var t=[],o=[];return p(e,e.clone().addTo(e.parent.vrMatch),t,o),f(t,"left"),f(o,"right"),e},0!=o&&0!=n&&u&&(w.boundaryRight=new e.Container({style:!1}),new e.Circle(24,e.light,null,null,null,null,null,null,!1).addTo(w.boundaryRight).dep(-2),new e.Triangle(16,16,16,e.yellow,e.grey,null,null,-3,null,null,!1).rot(-90).center(w.boundaryRight).dep(-6),w.boundaryRight.center(t).mov(n/2+24),w.boundaryLeft=new e.Container({style:!1}),new e.Circle(24,e.light,null,null,null,null,null,null,!1).addTo(w.boundaryLeft).dep(-2),new e.Triangle(16,16,16,e.yellow,e.grey,null,null,-3,null,null,!1).rot(90).center(w.boundaryLeft).dep(-6),w.boundaryLeft.center(t).mov(-n/2-24),w.register(w.boundaryRight),w.register(w.boundaryLeft)),this.remove=function(){return e.loop(arguments,function(e,o){t.contains(o)&&(z(o),o.parent.removeChild(o),o.vrMatch.parent.removeChild(o.vrMatch))}),w},this.resize=function(){C=h.width,x=h.height,k.getChildAt(0).widthOnly=A.getChildAt(0).widthOnly=C/2,k.getChildAt(0).heightOnly=A.getChildAt(0).heightOnly=x,A.x=C/2,k.setBounds(0,0,C/2,x),A.setBounds(0,0,C/2,x),0!=s?(clearTimeout(B),B=setTimeout(g,100)):g(),F.scaleTo(h).center(this,null,!1)}}else zon&&zogy("VR() - please use ZIM Frame")},e.extend(e.VR,e.Container,"clone","zimContainer",!1),e.scaX=1,e.scaY=1,e.Frame=function(o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,v,b,w,C,x,k,T,A,P,S,B,E){function I(){if(B){var t=le.getBounds();return re=t.width,ie=t.height,void q.dispatchEvent("resize")}fe=Date.now()+z*("s"==K?1e3:1),ze?me||(me=!0,ue=e.Ticker.update,e.tickerFrame||(e.Ticker.update=!1,e.tickerFrame=q),Y(),X(),clearInterval(q.frameTime),q.frameTime=setInterval(function(){if(Date.now()>fe)return clearInterval(q.frameTime),me=!1,void(q==e.tickerFrame&&(e.Ticker.update=ue));Y(),X()},50)):(Y(),X(),clearInterval(q.frameTime),q.frameTime=setInterval(function(){Date.now()>fe?clearInterval(q.frameTime):(Y(),X())},z*("s"==K?1e3:1)<50?z*("s"==K?1e3:1)+5:50))}function M(){if(!pe){if(pe=!0,-1==ee.indexOf(o)){if(zot(zid(se=o)))return void zogy("Frame - scaling: HTML tag with id="+o+" must exist");ce=q.tag=zid(se),o=zot(n)||zot(r)?"tag":"inline",0==f.indexOf("myCanvas")&&(f=se+"Canvas"),"canvas"==ce.tagName.toLowerCase()&&(we=!0,f=se)}if(q.canvasID=f,zot(n)&&(n=500),zot(r)&&(r=500),re=n,ie=r,zot(a)||(q.outerColor=a),j(),_(),Q){function t(){Y(),he=!0,O(),X(),le&&le.update()}h&&setTimeout(function(){window.scrollTo(0,0)},50),setTimeout(t,100),z*("s"==K?1e3:1)!=100&&setTimeout(t,z*("s"==K?1e3:1))}else he=!0,O();var i;zot(l)?(ge=!0,O()):zot(i=l.constructor!={}.constructor||l.audioSprite||l.id||l.data||l.src?q.loadAssets({assets:l,path:s,progress:c,queueOnly:!0}):q.loadAssets(e.merge(l,{progress:c,queueOnly:!0})))||!i.on?(zon&&zogy("Frame() - load failed"),ge=!0,O()):i.on("complete",function(){ge=!0,O()})}}function O(){he&&ge&&!de&&(!zot(c)&&c.show&&c.hide(),q.dispatchEvent("ready"),de=!0,X())}function j(){if(we)var t=q.canvas=q.tag;else(t=q.canvas=document.createElement("canvas")).setAttribute("id",f);t.setAttribute("tabindex",0);var n=e.windowWidth(),r=e.windowHeight(),a=window.devicePixelRatio||1;"full"==o||"tag"==o?A?(q.scale=a,t.setAttribute("width",n*q.scale),t.setAttribute("height",r*q.scale),"full"==o&&(t.style.width=n+"px",t.style.height=r+"px")):(t.setAttribute("width",n),t.setAttribute("height",r)):(t.setAttribute("width",re),t.setAttribute("height",ie));var l=zid(f+"Alternative");l&&t.appendChild(l),we||("tag"==o||"inline"==o?ce.appendChild(t):document.body.appendChild(t)),zot(i)||(t.style.backgroundColor=i),"full"!=o&&"fit"!=o&&"outside"!=o||(t.style.position="absolute",x||(document.body.style.overflow="hidden"))}function L(){S&&(q.mouseX=0,q.mouseY=0,q.mousedownEvent=le.on("stagemousedown",function(t){q.mouseX=t.stageX/e.scaX,q.mouseY=t.stageY/e.scaY}),q.mousemoveEvent=le.on("stagemousemove",function(t){q.mouseX=t.stageX/e.scaX,q.mouseY=t.stageY/e.scaY}))}function _(){Y(),-1==ee.indexOf(o)||x||(q.zil=zil()),q.mousedownEvent&&le&&le.off("stagemousedown",q.mousedownEvent),q.mousemoveEvent&&le&&le.off("stagemousemove",q.mousemoveEvent),(le=v?new e.StageGL(f,b):new e.Stage(f)).frame=q,le.mouseMoveOutside=P,!zot(i)&&v&&le.setClearColor(e.convertColor(i)),le.setBounds(0,0,re,ie),le.width=re,le.height=ie,A&&Y(),u&&le.enableMouseOver(m),d&&createjs.Touch.enable(le,!1,x),x&&(le.preventSelection=!1),w&&(le.nextStage=w.stage),C&&(le.nextStage=C),L()}function Y(){if(q){var t,r,i=zid(f),a=e.windowWidth(),l=e.windowHeight();if((J=q.orientation=a>l?"horizontal":"vertical")!=$&&($=J,q.dispatchEvent("orientation")),Q&&h&&setTimeout(function(){window.scrollTo(0,0)},100),i){if("fit"==o)q.scale=a/l>=re/ie?l/ie:a/re;else if("outside"==o)q.scale=a/l>=re/ie?a/re:l/ie;else{if("full"==o){if(i.style.left=i.style.top="0px",i.width=re=a,i.height=ie=l,le){if(le.setBounds(0,0,re,ie),A){var s=window.devicePixelRatio||1;i.width=a*s,i.height=l*s,i.style.width=a+"px",i.style.height=l+"px",q.scale=s,le.scaleX=le.scaleY=q.scale}else le.scaleX=le.scaleY=1;le.tickOnUpdate=!1,le.update(),le.tickOnUpdate=!0,le.width=re,le.height=ie,v&&le.updateViewport(re/le.scaleX,ie/le.scaleY),e.scaX=createjs.stageTransformable?1:le.scaleX,e.scaY=createjs.stageTransformable?1:le.scaleY}return x||(e.scrollX(0),e.scrollY(0)),void D()}if("tag"==o){re=""==ce.style.width?ce.getAttribute("width")||ce.offsetWidth:ce.style.width,ie=""==ce.style.height?ce.getAttribute("height")||ce.offsetHeight:ce.style.height,A?(i.width=re*q.scale,i.height=ie*q.scale,i.style.width=re+"px",i.style.height=ie+"px",le&&(le.scaleX=le.scaleY=q.scale)):(le&&(le.scaleX=le.scaleY=1),i.width=re,i.height=ie),le&&(le.tickOnUpdate=!1,le.update(),le.tickOnUpdate=!0,le.setBounds(0,0,re,ie),le.width=re,le.height=ie,v&&le.updateViewport(re/le.scaleX,ie/le.scaleY),e.scaX=createjs.stageTransformable?1:le.scaleX,e.scaY=createjs.stageTransformable?1:le.scaleY),ce.style.overflow="hidden",i.style.left=i.style.top="0px";var c=i.getBoundingClientRect();return q.x=c.x+e.scrollX(),q.y=c.y+e.scrollY(),void D()}if("inline"==o){if(A){if(document.styleSheets[0])try{for(var u=document.styleSheets[0].rules||document.styleSheets[0].cssRules,d=0;d<u.length;d++){var m=u[d];if(m.selectorText=="#"+f){var z=m.style.getPropertyValue("width");if(z){var y=zum(i.style.width),b=zum(i.style.height);i.style.width=z}}}}catch(T){}var w=window.getComputedStyle(i),C=zum(w.getPropertyValue("width"));y&&(i.style.height=b*C/y+"px",w=window.getComputedStyle(i));var k=zum(w.getPropertyValue("height"));s=window.devicePixelRatio||1,q.scale=C/n*s,i.width=re*q.scale,i.height=ie*q.scale,i.style.width=C+"px",i.style.height=k+"px",le&&(le.scaleX=le.scaleY=q.scale)}else le&&(le.scaleX=le.scaleY=1);return le&&(le.tickOnUpdate=!1,le.update(),le.tickOnUpdate=!0,le.setBounds(0,0,re,ie),le.width=re,le.height=ie,v&&le.updateViewport(re/le.scaleX,ie/le.scaleY),e.scaX=createjs.stageTransformable?1:le.scaleX,e.scaY=createjs.stageTransformable?1:le.scaleY),i.style.left=i.style.top="0px",c=i.getBoundingClientRect(),q.x=c.x+e.scrollX(),q.y=c.y+e.scrollY(),void D()}}r=ie*q.scale,t=re*q.scale,A?(s=window.devicePixelRatio||1,q.scale*=s,i.width=re*q.scale,i.height=ie*q.scale,i.style.width=re*q.scale/s+"px",i.style.height=ie*q.scale/s+"px",le&&(le.scaleX=le.scaleY=q.scale)):(le&&(le.scaleX=le.scaleY=1),i.style.width=t+"px",i.style.height=r+"px"),le&&(le.tickOnUpdate=!1,le.update(),le.tickOnUpdate=!0),q.x="left"==g?0:"right"==g?a-t:(a-t)/2,q.y="top"==p?0:"bottom"==p?l-r:(l-r)/2,i.style.left=q.x+"px",i.style.top=q.y+"px",x||(e.scrollX(0),e.scrollY(0)),D(),le&&(e.scaX=createjs.stageTransformable?1:le.scaleX,e.scaY=createjs.stageTransformable?1:le.scaleY)}}}function D(){if("outside"==o){var t=(zum(q.canvas.style.width)-e.windowWidth())/2;"left"==g?(q.visibleLeft=0,q.visibleRight=e.windowWidth()/(e.windowWidth()+2*t)*re):"right"==g?(q.visibleLeft=2*t/(e.windowWidth()+2*t)*re,q.visibleRight=re):(q.visibleLeft=t/(e.windowWidth()+2*t)*re,q.visibleRight=(e.windowWidth()+t)/(e.windowWidth()+2*t)*re);var n=(zum(q.canvas.style.height)-e.windowHeight())/2;"top"==p?(q.visibleTop=0,q.visibleBottom=e.windowHeight()/(e.windowHeight()+2*n)*ie):"bottom"==p?(q.visibleTop=2*n/(e.windowHeight()+2*n)*ie,q.visibleBottom=ie):(q.visibleTop=n/(e.windowHeight()+2*n)*ie,q.visibleBottom=(e.windowHeight()+n)/(e.windowHeight()+2*n)*ie)}else q.visibleLeft=q.visibleTop=0,q.visibleRight=re,q.visibleBottom=ie}function X(){if(de&&q){q.dispatchEvent("resize");var t=(new Date).getTime();setTimeout(function(){(new Date).getTime()-t>80&&(Y(),setTimeout(function(){q.dispatchEvent("resize"),e.OPTIMIZE||!zns&&OPTIMIZE||!le||"full"!=o&&"tag"!=o||le.update()},100))},100),e.OPTIMIZE||!zns&&OPTIMIZE||!le||"full"!=o&&"tag"!=o||le.update()}}function R(e){e.remove=q.eventRemove,q.altKey=e.altKey,q.ctrlKey=e.ctrlKey,q.metaKey=e.metaKey,q.shiftKey=e.shiftKey,q.dispatchEvent(e)}function W(e){q.altKey=e.altKey,q.ctrlKey=e.ctrlKey,q.metaKey=e.metaKey,q.shiftKey=e.shiftKey,e.remove=q.eventRemove,q.dispatchEvent(e)}function H(e){q.dispatchEvent(e)}function F(e){e.remove=q.eventRemove,q.dispatchEvent(e)}function V(e){e.remove=q.eventRemove;var t=360-e.alpha;Math.abs(t-xe)>135&&Math.abs(t-xe)<225&&(ke=0==ke?180:0),xe=t,e.rotation={x:e.beta,y:e.gamma,z:(t+ke)%360},q.dispatchEvent(e)}var N,G="scaling, width, height, color, outerColor, assets, path, progress, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, canvasCheck, gpu, gpuObj, nextFrame, nextStage, allowDefault, loadFailObj, sensors, retina, mouseMoveOutside, captureMouse, shim, maxConnections";if(N=zob(e.Frame,arguments,G,this))return N;z_d("83"),zon&&zogg("ZIM FRAME"),this.cjsEventDispatcher_constructor(),this.type="Frame",this.startTime=(new Date).getTime();var q=this;if(void 0!==zdf&&null!=zdf&&zdf.type||(zimDefaultFrame=zdf=this),zot(y)&&(y=!0),window.HTMLCanvasElement||!y){var Q=e.mobile();zot(o)&&(o="full"),zot(u)&&(u=!Q),zot(d)&&(d=!0),zot(h)&&(h=!1),zot(g)&&(g="center"),zot(p)&&(p="center");var U="";zot(f)&&(zdf!=this?(U=e.makeID(5),f="myCanvas"+U):f="myCanvas");var K=t(z);zot(m)&&(m=20),zot(z)&&(z=Q?"s"==K?1:1e3:"s"==K?.03:30),zot(v)&&(v=!1),zot(x)&&(x=!1),zot(k)&&(k="circles"),this.loadFailObj=k,zot(T)&&(T=!1),zot(A)&&(A=!0),this.retina=A,zot(P)&&(P=!1),zot(S)&&(S=!0),zot(B)&&(B=!1),zot(E)&&(E=10);var Z=E;v&&(A=!1),this.retina=A;var J,$,ee=["fit","outside","full"];if(B){this.shim=!0,B.stage.frame=this;var te,oe,ne=this.canvas=B.canvas;this.scale=B.stage.scaleX,setTimeout(function(){ae(),oe=function(){ae(),te&&clearTimeout(te),te=setTimeout(ae,50)},window.addEventListener("resize",oe)},20);var re=(le=B.stage).getBounds()?le.getBounds().width:ne.width/le.scaleX,ie=le.getBounds()?le.getBounds().height:ne.height/le.scaleY;function ae(){q.scale=B.stage.scaleX;var t=ne.getBoundingClientRect();q.x=t.x+e.scrollX(),q.y=t.y+e.scrollY(),e.scaX=createjs.stageTransformable?1:B.stage.scaleX,e.scaY=createjs.stageTransformable?1:B.stage.scaleY}le.getBounds()||le.setBounds(0,0,re,ie),i=ne.style.backgroundColor,L(),ae()}else{var le;this.scale=1,this.x=0,this.y=0}var se,ce,ue,de=!1,he=!1,ge=!1,pe=!1;B||("interactive"===document.readyState||"complete"===document.readyState?setTimeout(function(){M()},200):document.addEventListener("DOMContentLoaded",M));var fe,me=!1,ze="full"==o&&"undefined"!=typeof InstallTrigger;if(this.swapRotation=!1,Q&&!window.parent){var ye=isNaN(window.innerWidth)?window.clientWidth:window.innerWidth,ve=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight;this.swapRotation=(0==window.orientation||180==window.orientation)&&ye>ve||90==Math.abs(window.orientation)&&ve>ye}window.addEventListener("resize",I),q.loadAssetsCount=0,zot(e.assets)&&(e.assets={},e.assetIDs={});var be,we=!1;this.update=function(){Y(),q.dispatchEvent("update")},this.loadAssets=function(o,n,r,i,a,l,s,c,u,d,h){function g(){var t=new e.Queue;return t.isLoading=!1,t.loadAssetsCount=0,setTimeout(function(){t.dispatchEvent("complete"),q.dispatchEvent("complete")
},10),t}function p(e){if(S++,e.split){var t=e.split("?");(w=t[0].match(k))&&createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(w[1])>=0&&(C=!0)}}function f(){G.loadAssetsCount--,0==G.loadAssetsCount&&m()}function m(){var e=Date.now();a=Math.max(0,a-(e-$)),setTimeout(function(){q.loadAssetsCount--,q.loadAssetsCount<=0&&(q.isLoading=!1),G.isLoading=!1,G.dispatchEvent(ee),d||q.dispatchEvent(ee)},a*("s"==v?1e3:1))}if(zot(o))return g();if(zot(o.src)){var z,y="assets, path, progress, xhr, time, loadTimeout, outputAudioSprite, crossOrigin, fileType, queueOnly, maxConnections";if(z=zob(q.loadAssets,arguments,y))return z}var v=t(a||null);if(!zot(r)&&"ProgressBar"==r.type&&zot(i)&&(i=!0),Array.isArray(o)||(o=[o]),0==o.length)return g();zot(a)&&(a=0),zot(l)&&(l="s"==v?8:8e3),zot(s)&&(s=!1),zot(c)&&(c="anonymous"),zot(d)&&(d=!1),zot(h)&&(h=Z);var b,w,C=!1,x=[],k=/\.([^.]+)$/i,T=[],A=[],P=[],S=0,B=!0;for(J=0;J<o.length;J++){if((b=o[J]).assets){var E=[];o.splice(J,1),Array.isArray(b.assets)||(b.assets=[b.assets]);for(var I=0;I<b.assets.length;I++)e.assetIDs[b.assets[I]]?E.push({id:b.path+b.assets[I],src:b.path+b.assets[I],path:null,loadTimeout:b.loadTimeout,maxNum:b.maxNum,noCORSonImage:b.noCORSonImage}):E.push({id:b.assets[I],src:b.assets[I],path:b.path,loadTimeout:b.loadTimeout,maxNum:b.maxNum,noCORSonImage:b.noCORSonImage});for(var M=E.length-1;M>=0;M--)o.splice(J,0,E[M]);b=E[0]}if(b.constructor=={}.constructor)if(b.audioSprite){p(b=(L=e.copy(b)).src);var O,j=[];for(I=0;I<L.audioSprite.length;I++)O=L.audioSprite[I],j.push({id:O[0],startTime:Math.round(1e3*O[1]),duration:Math.round(1e3*(O[2]-O[1]))});delete L.audioSprite,L.data={audioSprite:j},x.push(L)}else if(b.data&&b.data.audioSprite){var L;p(b=(L=e.copy(b)).src),x.push(L)}else if(b.id){if(b.path){if(b.path.match(/http/i))b.src=b.path+b.src;else if(b.path.match(/^\//))_=(D=(_=window.location.href).match(/(.*?)([^\/])\/[^\/]/))[1]+D[2],b.src=_+b.src;else{var _,Y=window.location.pathname,D=((_=window.location.href).split(Y)[0]+Y).match(/(.*)\//);b.src=D[1]+"/"+b.path+b.src}delete b.path}if(b.noCORSonImage){var X=new Image;P.push(X),X.src=b.src,X.id=b.id,X.onload=function(t){var o,n=t.currentTarget,r=e.assets[n.id]=new e.Bitmap(n).expand(0);(o=new createjs.Event("assetload")).asset=r,G.dispatchEvent(o),d||((o=new createjs.Event("assetload")).asset=r,q.dispatchEvent(o)),G.loadAssetsCount--,0==G.loadAssetsCount&&m()}}else{e.assetIDs[b.id]=b.src;var R=b.maxNum,W=b.type,H=zot(b.loadTimeout)?l:b.loadTimeout;p(b=b.src);var F={src:b,loadTimeout:H*("s"==v?1e3:1),data:R,type:W};zot(u)||(F.type=u),x.push(F)}}else b.src.match(/fonts\.googleapis\.com/)?A.push(b):T.push(b);else p(b),F={src:b,loadTimeout:l*("s"==v?1e3:1)},zot(u)||(F.type=u),x.push(F);if(C&&B){var V=document.createElement("audio");V.setAttribute("src",(zot(n)||b.match(/^http:\/\/|https:\/\//i)?"":n)+b),document.body.appendChild(V),B=!1}}q.loadAssetsCount++,q.isLoading=!0;var N,G=new e.Queue;if(G.isLoading=!0,G.loadAssetsCount=0,!zot(r)&&r.show&&(r.zimActiveLoader=G,r.show()),T.length>0){for(var Q,U,K=[],J=0;J<T.length;J++)Q={src:"url("+((U=T[J]).src.match(/^http/i)?"":n||"")+U.src+")"+(U.type?" format('"+U.type+"')":""),family:U.font},U.weight&&(Q.weight=U.weight),U.style&&(Q.style=U.style),K.push(Q);(N=new createjs.FontLoader({src:K},!0)).on("complete",f),N.on("error",f),N.load(),G.loadAssetsCount++}if(A.length>0)for(J=0;J<A.length;J++)Q={src:(U=A[J]).src,type:"fontcss"},G.loadAssetsCount++,(N=new createjs.FontLoader(Q,!0)).on("complete",f),N.on("error",f),N.load();if(P.length>0)for(J=0;J<P.length;J++)G.loadAssetsCount++;var $=Date.now(),ee=new createjs.Event("complete");if(S>0){G.loadAssetsCount++;var te=G.preload=q.preload=new createjs.LoadQueue(i,n,c);1!=h&&te.setMaxConnections(h),C&&te.installPlugin(createjs.Sound),te.on("progress",function(e){G.dispatchEvent(e),d||q.dispatchEvent(e)}),te.on("error",function(e){G.dispatchEvent(e),d||q.dispatchEvent(e)}),te.on("fileload",function(o){var r,i,a=o.item,l=o.item.type;if(a.id.match(k),l&&"sound"==l){var s=[];if(a.data&&a.data.audioSprite)for(var c=0;c<a.data.audioSprite.length;c++)s.push(a.data.audioSprite[c].id);else s.push(a.id);for(c=0;c<s.length;c++)!function(){var o=s[c];r=e.assets[o]={type:"sound",path:n,id:o,play:function(n,r,i,a,l,s,c){var u,d="volume, loop, loopCount, pan, offset, delay, interrupt";if(u=zob(e.assets[o].play,arguments,d))return u;var h={volume:n,loop:r,loopCount:i,pan:a,offset:l,delay:s,interrupt:c};"s"==t(h.offset,null,30)&&(h.offset&&(h.offset*=1e3),h.delay&&(h.delay*=1e3)),!0===h.loop&&(h.loop=-1),h.loopCount&&(h.loop=h.loopCount,delete h.loopCount);var g=createjs.Sound.play(o,h);return g.getStage=function(){return le},g}}}()}else"image"==l?o.result.width&&(r=e.assets[a.id]=new e.Bitmap(o.result,o.result.width,o.result.height,null,null,a.id),a.avoidCORS&&r.expand(0)):r=e.assets[a.id]=o.result;(i=new createjs.Event("assetload")).item=a,i.asset=r,G.dispatchEvent(i),d||((i=new createjs.Event("assetload")).item=a,i.asset=r,q.dispatchEvent(i))}),q.preloadEvent=te.on("complete",function(e){ee=e,G.loadAssetsCount--,0==G.loadAssetsCount&&m()});try{te.loadManifest(x)}catch(oe){}}return G},this.ac=function(e,t,o){o?(o.commands||(o.commands=[]),o.commands.push([e,t,o])):(t[0].commands||(t[0].commands=[]),t[0].commands.push([e,t]))},window.asset=e.asset=this.asset=function(t,o,n,r){if(!zot(t)){var i=e.assetIDs[t];if(i&&(t=i),e.assets[t])return e.assets[t];if(r){if("circles"==q.loadFailObj)var a=q.makeCircles(14);else a=q.loadFailObj;return a&&(a.type="EmptyAsset",a.id=t,a.play=function(){if(zon)return zogy("Frame - asset("+t+") not found"),{}}),a}var l=new e.Container(o,n);return l.type=o&&n?"ACWD":"AC",q.loadAssets(t).on("complete",function(){var o=q.asset(t,null,null,!0);if(e.assets[t]=l,o.play)l.play=o.play();else if("Bitmap"==o.type){if(o.addTo(l),l.mouseChildren=!1,l.type="Image",l.bitmap=o,l.image=o.image,l.id=o.id,l.commands)for(var n=0;n<l.commands.length;n++)l.commands[n][2]?l[l.commands[n][0]].apply(l,l.commands[n][1]):e[l.commands[n][0]].apply(l,l.commands[n][1]);l.commands=null,l.stage&&l.stage.update()}else"EmptyAsset"==o.type&&(o.addTo(l),l.mouseChildren=!1,l.type="EmptyAsset",l.stage&&l.stage.update());l.dispatchEvent("assetLoad"),l.dispatchEvent("complete")}),l}},e.asset.getIDs=function(){var t=[];for(name in e.assetIDs)t.push(name);return t},e.image=function(t,o,n,r){return t.match(/^htt/i)&&(t="https://cors.zimjs.com/"+t),e.asset(t,o,n,r)},e.zimObjectIDs={},e.object=this.object=function(t){return e.zimObjectIDs[t]},e.object.getNames=function(){var t=[];for(name in e.zimObjectIDs)t.push(name);return t},window.zns||(window.asset=this.asset,window.image=e.image,window.object=this.object),this.setDefault=function(){return zimDefaultFrame=zdf=q,q},Object.defineProperty(q,"isDefault",{get:function(){return zdf==q},set:function(){zogy("Frame(): isDefault is read only - see setDefault()")}}),Object.defineProperty(q,"stage",{get:function(){return le},set:function(){zogy("Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(q,"width",{get:function(){return re},set:function(){zogy("Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(q,"height",{get:function(){return ie},set:function(){zogy("Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return i},set:function(t){i=t,zot(t)?zid(f).style.backgroundColor="default":(zid(f).style.backgroundColor=i,!zot(i)&&v&&le.setClearColor(e.convertColor(i)))}}),Object.defineProperty(this,"outerColor",{get:function(){return be},set:function(e){be=e,zet("body").css({backgroundColor:be})}}),Object.defineProperty(q,"allowDefault",{get:function(){return x},set:function(e){e?(le.preventSelection=!1,document.body.style.overflow="visible",q.zil&&(window.removeEventListener("keydown",q.zil[0]),window.removeEventListener("wheel",q.zil[1]),window.removeEventListener("DOMMouseScroll",q.zil[2]),q.zil=null)):(le.preventSelection=!0,document.body.style.overflow="hidden",zot(q.zil)&&(q.zil=zil())),x=e}});var Ce=new createjs.Event("keydown");if(this.eventRemove=Ce.remove,window.addEventListener("keydown",R),window.addEventListener("keyup",W),window.addEventListener("wheel",H),T&&window.DeviceMotionEvent&&window.addEventListener("devicemotion",F),T&&window.DeviceOrientationEvent){var xe=0,ke=0;window.addEventListener("deviceorientation",V)}this.remakeCanvas=function(e,t){if("full"!=o){zot(e)&&(e=re),zot(t)&&(t=ie),zid(f)&&zid(f).parentNode.removeChild(zid(f)),re=e,ie=t;for(var n=[],r=0;r<q.stage.numChildren;r++)n.push(q.stage.getChildAt(r));for(j(),_(),r=0;r<n.length;r++)q.stage.addChild(n[r])}},this.follow=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p){function f(){var f=t.parent;q.frameBorderLock=g,d&&(q.followDampX=new e.Damp(f.x,n),q.offsetDampX=new e.Damp(o.x+i+(o.width-i-a)/2,c)),h&&(q.followDampY=new e.Damp(f.y,r),q.offsetDampY=new e.Damp(o.y+l+(o.height-l-s)/2,u)),q.followTicker=e.Ticker.add(function(){var e=q.followBoundary;if(d){var o=e.x+i+(e.width-i-a)/2;q.followOffsetX=[p?e.x+e.width-i:o,o,p?e.x+i:o],q.followObj&&(f.x=q.followDampX.convert(q.offsetDampX.convert(q.followOffsetX[t.motionController?t.motionController.dirX+1:1])-t.x))}if(h){var n=e.y+l+(e.height-l-s)/2;q.followOffsetY=[p?e.y+e.height-s:n,n,p?e.y+l:n],q.followObj&&(f.y=q.followDampY.convert(q.offsetDampY.convert(q.followOffsetY[t.motionController?t.motionController.dirY+1:1])-t.y))}q.frameBorderLock&&(f.x>q.followBoundary.x&&(f.x=q.followBoundary.x),f.y>q.followBoundary.y&&(f.y=q.followBoundary.y),f.x<q.followBoundary.x+q.followBoundary.width-f.width&&(f.x=q.followBoundary.x+q.followBoundary.width-f.width),f.y<q.followBoundary.y+q.followBoundary.height-f.height&&(f.y=q.followBoundary.y+q.followBoundary.height-f.height))})}var m,z="obj, boundary, damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, lag";return(m=zob(q.follow,arguments,z))?m:(q.followObj=null,q.followTicker&&e.Ticker.remove(q.followTicker),zot(t)?void 0:(t.dirX=t.dirY=0,q.followObj=t,t.followDampX=null,t.followDampY=null,zot(o)&&(o=new e.Boundary(0,0,q.stage.width,q.stage.height)),q.followBoundary=o,zot(n)&&(n=.05),zot(r)&&(r=n),zot(i)&&(i=0),zot(a)&&(a=0),zot(l)&&(l=0),zot(s)&&(s=0),zot(c)&&(c=.02),zot(u)&&(u=c),zot(d)&&(d=!0),zot(h)&&(h=!0),zot(g)&&(g=!1),zot(p)&&(p=!1),t.parent?f():t.on("added",f),t))},this.dispose=function(){function t(e){if(e.dispose)e.dispose();else{if(e.removeAllEventListeners(),e.numChildren)for(var o=e.numChildren-1;o>=0;o--)t(e.getChildAt(o));e.parent&&e.parent.removeChild(e)}}return q.zil&&q.zil.length&&(window.removeEventListener("keydown",q.zil[0]),window.removeEventListener("wheel",q.zil[1]),window.removeEventListener("DOMMouseScroll",q.zil[2])),oe&&window.removeEventListener("resize",oe),window.removeEventListener("resize",I),window.removeEventListener("keydown",R),window.removeEventListener("keyup",W),window.removeEventListener("wheel",H),window.removeEventListener("devicemotion",F),window.removeEventListener("deviceorientation",V),x||(document.body.style.overflow="auto"),t(le),zid(f)&&zid(f).parentNode.removeChild(zid(f)),q==e.tickerFrame&&(e.tickerFrame=null),q===zdf&&(zdf=null),le=null,q=null,!0},this.orange="#f58e25",this.green="#acd241",this.pink="#e472c4",this.blue="#50c4b7",this.brown="#d1a170",this.yellow="#ebcb35",this.purple="#993399",this.red="#fb4758",this.black="#000000",this.darker="#111111",this.dark="#333333",this.grey="#555555",this.gray="#555555",this.tin="#777777",this.silver="#999999",this.fog="#aaaaaa",this.mist="#bbbbbb",this.light="#cccccc",this.moon="#dddddd",this.lighter="#eeeeee",this.white="#ffffff",this.clear="rgba(0,0,0,0)",this.faint="rgba(0,0,0,.01)",this.makeCircles=function(t,o){zot(t)&&(t=100);var n=[q.orange,q.green,q.pink,q.blue,q.brown,q.dark];if(o){(i=new e.Container({style:!1})).radius=t;for(var r=0;r<n.length;r++)i.addChild(new e.Circle(i.radius/n.length*(n.length-r),n[r],null,null,null,null,null,null,!1))}else{var i,a=(i=new e.Shape({style:!1})).graphics;for(i.radius=t,r=0;r<n.length;r++)a.f(n[r]).dc(0,0,i.radius/n.length*(n.length-r));i.setBounds(-i.radius,-i.radius,2*i.radius,2*i.radius)}return i},this.madeWith=function(t,o,n,r,i,a,l){zot(t)&&(t=e.dark),zot(o)&&(o="Made with ZIM");var s=new e.Container,c=s.icon=q.makeIcon(n,r,i,a,l).sca(.5).alp(.92).hov(1).addTo(s).tap(function(){c.alp(.92),c.stage.update(),zgo("https://zimjs.com","_blank")});return s.label=new e.Label(o,16,null,t).sca(.7).pos(0,-19,e.CENTER,e.BOTTOM,s),s},this.makeIcon=function(t,o,n,r,i){var a=new e.Container(-20,-13,102,120).reg(-20,-13);zot(t)&&(t=q.light),zot(o)&&(o=q.dark),!0===n&&(n=[q.silver,q.silver,q.silver,q.silver,q.silver]),new e.Rectangle(a.width,a.height,o,r,i).loc(-20,-13,a);var l=[[n?n[0]:"#E474C3","AieA0IAAgCIAmhlIEXAAIg5Bng",41.7,19.5],[n?n[1]:"#50C5B7","AiSAzIAnhlID+AAIg5Blg",35.3,33.2],[n?n[2]:"#F48E25","AiFA0IAmhnIDlAAIg5Bng",28.9,46.7],[n?n[3]:"#EBCD36","Ah4AzIAmhlIDLAAIg5Blg",22.4,60.5],[n?n[4]:"#ABD140","AhrA0IAAgFIAlhiICxAAIg5Bng",16.1,74.3],[t,"AlGHRIAnhnIH+AAIgbBngAlGlpIAnhnIJmAAIg5Bng",32.7,46.5]];return e.loop(l,function(t){var o=(new e.Shape).addTo(a);o.graphics.f(t[0]).p(t[1]),o.setTransform(t[2],t[3])}),a.mouseChildren=!1,a},this.makeCat=function(t){zot(t)&&(t=246);var o=[[16.95,241.15,0,"black",[1.5,2,1],"AgKAhIAVhB"],[58.65,244.378,0,"#A7A7A7",[3,2,1],"AmYAAIMxAB"],[105.64,107.14,"#EF7988",0,0,"AAEArQgNAAgjghQgiggAFgIQAFgJBEgCQBEgDAGAGQAHAIgfAkQgfAlgPAAIAAAAg"],[104.84,111.34,0,"black",[1,1,1],"AABA2IAPAYQAJAPAJAGQAKAHAMAAQAbAAAXgWQAQgPAVghQAVghAAgcQAAgnglgYQgbgSgxgCIgrACAAJADIgIAzAhphVQgXAVgMAWQgKAQgIAiQgIAkAFAMQALAfAqAOQAmANAcgIQANgEANgQQALgNAGgT"],[105.05,111.4,"#757B74",0,0,"AheBrQgvgRgQgeQgPgdAQgkQAZg8AEgFQAXgfA8gGQBVgKA+ATQBRAZgYBEQgVA/gnAZQgUAOgZAKQgJAJgVgbQgUgegCAAQgDAAgWAgQgWAUgZAAQgMAAgNgEg"],[86.18,93,"black",0,0,"Aj7g0QiYg0i9AyQA0g3BcgRQBagQBfAaQBkAbBEBBQBNBHASBpQhgiYibg0gAFxiDQAzgdA6AMQA9AMA2A4QgHgBAAACQAAAAgBABQAAAAAAAAQgBAAgBAAQAAAAgBgBQh8gshOAzQhIAvhBCYQALjABzhCg"],[78.5,63.23,"#705F6C","black",[1,1,1],"AHAg5IgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDZQg2g4g9gMQg6gMgzAdQhzBCgLDBQBBiZBIgvQBNgzB9AsQAEACAAgCQAAgCAHABgAqdBuIAAnsIDmHEQgegMgsgBQhXgChFA3gAoEDzQA0g3BdgRQBagQBeAaQBkAbBFBBQBMBIASBpQhfiYibg1QiYg0i+Ayg"],[86.28,98.01,"black","black",[1,1,1],"AJSh/QgEADgHgDQgFgBgBAFQgNBXhNA9QhTBEhagZQgGgCgPAFQgUAHgEAAQCNAeBchOQBGg7AWhigApRhnQAFABAIAAQAGABAAAAQBFBsCVA7QCpBDCrgzQACAAAHAJQAEAFAFAJQjAAzitg/Qing9g/iHg"],[96.95,97.3,"#0C0436",0,0,"AlZBJQgVgVAAgeQAAgcAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAcQAAAegVAVQgVAVgdAAQgeAAgVgVgAD1AcQgVgVAAgdQAAgdAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAdQAAAdgVAVQgVAVgdAAQgeAAgVgVg"],[96.88,97.2,"#EA9424",0,0,"AlpBYQgbgbAAgnQAAglAbgbQAbgbAnAAQAmAAAbAbQAbAbAAAlQAAAngbAbQgbAbgmAAQgnAAgbgbgADnArQgbgbAAgmQAAgmAbgbQAbgbAmAAQAnAAAbAbQAbAbAAAmQAAAmgbAbQgbAbgnAAQgmAAgbgbg"],[96.88,97.2,"#AFCE3A",0,0,"AlzBiQgggfAAgtQAAgrAggfQAfggAtAAQAsAAAgAgQAfAfAAArQAAAtgfAfQggAggsAAQgtAAgfgggADcA1QgfgfAAgsQAAgsAfgfQAgggAsAAQAtAAAfAgQAgAfAAAsQAAAsggAfQgfAggtAAQgsAAggggg"],[78.5,64.1,0,"black",[1,1,1],"AHAhCIgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDQQg2g4g9gMQg6gMgzAdQhzBCgLDBQCqAvBlhgQBJhFAGhagAoADiQAlgiBTgOQBYgOBaARQDrAsA0DTQjAAziog/Qihg+hAiIgAqdBlIAAnsIDmHEQgegMgsgBQhXgChFA3g"],[86.375,93.9,"#EACE35",0,0,"AltB+Qiig9g/iIQAkghBTgOQBZgPBaARQDrAtA0DRQhWAXhSAAQhkAAhcgjgADxB2QALjABzhBQAzgeA6AMQA9ANA2A4QgGBYhJBGQhEBAhiAAQgxAAg4gQg"],[73.45,154.83,"black","black",[2,1,1],"AkjjDIByAMQB/ANBEAFQB/AICXgSIgKFzQj4hflLiNQgDgBAFiag"],[79.42,123.62,"#A7A7A7","black",[2,1,1],"AEBpxIgBgBQAYiNAeiQQA8kgAfgMQAggNBLEqQAlCVAfCXIAXARQAbAXAZAcQBQBZAZBnQAZBngUB+QgKA/gPArQgeASgrAWQhYAuhFAXQg8AUh0AWIhoASIAAQzItygCQAvhKA1hoQBqjRAjiXQAri/AOjLIAFimQgegHhTgeQhEgZhgg/IhTg7QgekPgQkUQggonBEgWQBFgWCbEtQAkBGA3B9QAbA9AYA3QASAqAQAmIgjhQIABAAIJmgYIBUACIBQAK"]],n=new e.Container(157.5,246);e.loop(o,function(t){var o=(new e.Shape).f(t[2]).s(t[3]).ss(t[4]?t[4][0]:null,t[4]?t[4][1]:null,t[4]?t[4][2]:null).p(t[5]);o.setTransform(t[0],t[1]),o.addTo(n)},!0);var r=new e.Container;return n.sca(t/246).addTo(r).mov(0,-.4),Q&&r.cache(),r.mouseChildren=!1,r}}else setTimeout(function(){q.dispatchEvent("failed")},100)},e.extend(e.Frame,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.Queue=function(){this.cjsEventDispatcher_constructor(),this.isLoading=!0},e.extend(e.Queue,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.LEFT="left",e.RIGHT="right",e.CENTER="center",e.MIDDLE="middle",e.TOP="top",e.BOTTOM="bottom",e.HORIZONTAL="horizontal",e.VERTICAL="vertical",e.BOTH="both",e.UP="up",e.DOWN="down",e.AUTO="auto",e.GET="get",e.POST="post",e.LOCALSTORAGE="localStorage",e.SOCKET="socket",e.TO="to",e.FROM="from",e.SINE="sine",e.SQUARE="square",e.TRIANGLE="triangle",e.SAW="saw",e.SAWTOOTH="saw",e.ZAP="zap",e.colorsHex=["#f58e25","#acd241","#e472c4","#50c4b7","#d1a170","#ebcb35","#993399","#fb4758","#000000","#111111","#333333","#555555","#555555","#777777","#999999","#aaaaaa","#bbbbbb","#cccccc","#dddddd","#eeeeee","#ffffff","rgba(0,0,0,.01)","rgba(0,0,0,0)"],e.colors=["orange","green","pink","blue","brown","yellow","purple","red","black","darker","dark","grey","gray","tin","silver","fog","mist","light","moon","lighter","white","faint","clear"],c=0;c<e.colors.length;c++)e[e.colors[c]]=e.colorsHex[c];return String.prototype.darken=function(t){return e.darken(this,t)},String.prototype.lighten=function(t){return e.lighten(this,t)},String.prototype.toColor=function(t,o){return e.toColor(this,t,o)},String.prototype.toAlpha=function(t){return e.toAlpha(this,t)},e.distillery=[],e.distill=function(){if(!window.zns&&e&&(e.DISTILL||window.DISTILL)&&e.distillery.push("83.3","83.35"),e.distillery.length>0){function t(e,t,o){return o.indexOf(e)===t}e.distillery=e.distillery.filter(t),zog("zim.distill() - go to https://zimjs.com/distill and enter the following:"),zog(e.distillery.join(" "))}else zogy("must set zim.DISTILL = true;")},e.parseAudioSprite=function(e,t){if(z_d("83.25"),!(zot(e)||zot(e.resources)||zot(e.spritemap))){var o,n=e.resources[0],r=e.spritemap,i=[],a={src:n,data:{}};for(c in r)o=r[c],i.push({id:c,startTime:Math.round(1e3*o.start),duration:Math.round(1e3*(o.end-o.start))});return a.data.audioSprite=i,t&&zog(JSON.stringify(a)),a}},e.previewAudioSprite=function(t,o,n){if(z_d("83.26"),!zot(t)){if(zot(o)&&(o=3),zot(n)){if(zot(zdf))return;(n=zdf).stage}var r=n.width,i=(n.height,t),a=[],l=[];if(i.constructor=={}.constructor){i.resources&&(i=e.parseAudioSprite(i)),i.audioSprite?e.loop(i.audioSprite,function(e){a.push(e[0].substr(0,o)),l.push(e[0])}):i.data&&i.data.audioSprite&&e.loop(i.data.audioSprite,function(e){a.push(e.id.substr(0,o)),l.push(e.id)});var s=new e.Tabs({tabs:a,width:r,currentEnabled:!0}).addTo();return s.on("change",function(){n.asset(l[s.selectedIndex]).play()}),s}}},e.svgToBitmap=function(t,o,n,r){if(z_d("83.27"),!zot(t.draggable)){var i=new DOMParser;t=(t=t.innerHTML?i.parseFromString(t.innerHTML,"text/xml"):t).getElementsByTagName("svg")?t.getElementsByTagName("svg")[0]:null}if(XMLSerializer||!zon){var a="string"==typeof t?t:(new XMLSerializer).serializeToString(t);if(a){var l=a.split(">")[0];if(l.length>1&&1==l.split(/width/i).length){var s=100,c=100,u=l.split(/viewBox/i);if(u.length>1){var d=u[1].split('"')[1];if(d){var h=d.split(" ");h.length>1&&(s=h[h.length-2],c=h[h.length-1])}}a=a.replace(/svg /i,'svg  width="'+s+'" height="'+c+'" ')}a.match(/xmlns/i)||(a=a.replace(/svg /i,"svg  xmlns='http://www.w3.org/2000/svg' "))}var g=self.URL||self.webkitURL||self,p=new Image;p.onload=function(){var t=new e.Bitmap(p,n,r);o(t),g.revokeObjectURL(f)};var f=g.createObjectURL(new document.Blob([a],{type:"image/svg+xml"}));p.src=f}else zog("ZIM svgToBitmap() - sorry, not supported in Browser")},e}(zim||{});zim.fastFrame=function(e,t){if(z_d("83.355"),createjs=e,zot(zdf))return t.frame=new zim.Frame({shim:{stage:t,canvas:t.canvas}}),zimDefaultFrame=zdf=t.frame,zim.scaX=createjs.stageTransformable?1:t.scaleX,zim.scaY=createjs.stageTransformable?1:t.scaleY,t.frame},zim.addWires=function(e){return z_d("83.365"),e.wire=function(){return Array.prototype.unshift.call(arguments,e),zim.wire.apply(null,arguments),e},e.noWire=function(){return Array.prototype.unshift.call(arguments,e),zim.noWire.apply(null,arguments),e},e.wired=function(){return Array.prototype.unshift.call(arguments,e),zim.wired.apply(null,arguments),e},e.noWired=function(){return Array.prototype.unshift.call(arguments,e),zim.noWired.apply(null,arguments),e},e},zim.setBlurDetect=function(){z_d("83.36"),zim.blurCheck=!0,zim.pauseAnimateOnBlur=!0,zim.pauseOnBlur=[],zim.blurDetect=function(){var e,t,o={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in o)if(e in document){t=o[e];break}return function(o){return o&&document.addEventListener(t,o),!document[e]}}(),zim.blurDetect(function(){if(zim.blurDetect())setTimeout(function(){if(zim.pauseOnBlur)for(var e=0;e<zim.pauseOnBlur.length;e++)(t=zim.pauseOnBlur[e]).pauseOnBlurPaused||t.pause(!1);if(zim.pauseAnimateOnBlur&&zim.animatedObjects)for(e=0;e<zim.animatedObjects.objects.length;e++){var t=zim.animatedObjects.objects[e],o=zim.copy(t.tweenStates);if(t.tweenStates)if(zot(o.all)||o.all)for(id in t.pauseAnimate(!1),o)"all"!=id&&(o[id]||t.pauseAnimate(!0,id));else for(id in t.pauseAnimate(!0),o)"all"!=id&&o[id]&&t.pauseAnimate(!1,id);else t.pauseAnimate(!1);"Sprite"==t.type&&(t.paused=!0)}},300);else{if(zim.pauseOnBlur)for(var e=0;e<zim.pauseOnBlur.length;e++){var t=zim.pauseOnBlur[e];t.pauseOnBlurPaused=t.paused,t.pause(!0)}zim.pauseAnimateOnBlur&&zim.animatedObjects&&zim.pauseAnimate(!0,"pauseOnBlur")}})};var ZIMONON=!1;zim=function(e){return e.ZIMON={stringify:function(t,o){function n(r,i,a){if(!zot(r))if(Array.isArray(r))e.loop(r,function(e,t){n(e,r,t)});else if(r.constructor=={}.constructor)e.loop(r,function(e,t){n(t,r,e)});else if(r.type){var l={zimon:r.type};r.arguments&&(l.args=Array.prototype.slice.call(r.arguments),n(l.args)),"series"==r.type&&(l.args=Array.prototype.slice.call(r.array),n(l.args)),o&&o[r.type]&&o[r.type].props&&(l.props=[],e.loop(o[r.type].props,function(e){l.props.push(r[e])})),i?i[a]=l:t=l}else"string"!=typeof r&&"number"!=typeof r&&"boolean"!=typeof r&&null!==r&&zon&&zogy("ZIMON - potentially bad JSON value"+r)}if(z_d("83.39"),!zot(t)){if(ZIMONON)return n(t=e.copy(t)),JSON.stringify({obj:t,key:o,zimon:1,info:"https://zimjs.com/zimon/"});zon&&zogy("ZIMON - set ZIMONON=true before using ZIMON.stringify()")}},parse:function(t,o){function n(t,r,a){if(!zot(t))if(Array.isArray(t))e.loop(t,function(e,o){n(e,t,o)});else if(zot(t.zimon)&&t.constructor=={}.constructor)e.loop(t,function(e,o){n(o,t,e)});else if(t.zimon){var l=t.zimon;function s(e){try{return Function("return("+e+")")()}catch(t){return zon&&zogy("ZIMON - bad function scope or name: "+e),null}}var c="";o&&(o[l]&&o[l].scope?c=o[l].scope+".":o.scope&&(c=o.scope+"."));var u=s(c+l),d=t.args;if(zot(d)&&(d=[]),n(d),"series"==t.type)var h=e.series(d);else h=u?new(u.bind.apply(u,[null].concat(Array.prototype.slice.call(d)))):null;r?r[a]=h:i=h,o&&o[l]&&o[l].props&&h&&e.loop(o[l].props,function(e,o){zot(t.props[o])||(h[e]=t.props[o])})}}if(z_d("83.39"),!zot(t)){var r=JSON.parse(t),i=r.obj;return o=r.key,n(i),i}}},e.Wonder=function(t,o,n,r,i){function a(){h.length>0&&(e.async(i+"?wonder="+JSON.stringify(h)),h=[],p++)}function l(e,t){return zot(e)?(zog("zim.Wonder "+t+" - please provide a keyword"),!1):!u[t+"sOff"][e]}var s,c="wid, client, app, notes, server";if(s=zob(e.Wonder,arguments,c,this))return s;if(z_d("82"),zot(t))zog("zim.Wonder() - please provide Wonder ID (see https://zimjs.com/wonder/)");else{zot(i)&&(i="https://wonder.zimjs.org/wonder");var u=this;zot(e.wonderSession)&&(e.wonderSession="W"+e.rand(1e5,999999));var d,h=[],g=setInterval(a,1e3),p=0,f=setInterval(function(){p>28&&(h.push({id:t,c:o,a:n,n:r,k:d,t:"e",v:"frequency max - terminated",s:e.wonderSession}),zog("zim.Wonder() - frequency max - terminated"),u.dispose()),p=0},3e4);this.countsOff={},this.timesOff={},this.ordersOff={},this.count=function(i){l(i,"count")&&(d=i,h.push({id:t,c:o,a:n,n:r,k:i,t:"c",v:1,s:e.wonderSession}))};var m={};this.timeStart=function(e){l(e,"time")&&(u.timeEnd(e),d=e,m[e]=(new Date).getTime())};var z={};this.timePause=function(e){l(e,"time")&&(z[e]||(z[e]=(new Date).getTime()))},this.timeUnpause=function(e){if(l(e,"time")&&z[e]){var t=(new Date).getTime()-z[e];m[e]&&(m[e]+=t),delete z[e]}},this.timeEnd=function(i){if(l(i,"time")&&m[i]){var a=z[i]?z[i]:(new Date).getTime(),s=Math.round((a-m[i])/1e3);delete z[i],delete m[i],h.push({id:t,c:o,a:n,n:r,k:i,t:"t",v:s,s:e.wonderSession})}},this.order=function(i,a){l(i,"order")&&(d=i,zot(a)?zog("zim.Wonder order() - please provide an item"):h.push({id:t,c:o,a:n,n:r,k:i,t:"o",v:a,s:e.wonderSession}))},this.countOff=function(e){u.countsOff[e]=1},this.countOn=function(e){delete u.countOff[e]},this.timeOff=function(e){u.timesOff[e]=1},this.timeOn=function(e){delete u.timesOff[e]},this.orderOff=function(e){u.ordersOff[e]=1},this.orderOn=function(e){delete u.ordersOff[e]},this.dispose=function(){return a(),clearInterval(g),clearInterval(f),!0}}},e.VERSION="cat/02/zim",e.getLatestVersions=function(t){function o(e){t(JSON.parse(e))}z_d("82.2");var n="https://zimjs.com/live/getLatestVersions.php";e.async(n,o,"returnLatestVersions")},e}(zim||{}),window.zns||zimplify();
