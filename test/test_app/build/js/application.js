Opal.queue(function(Opal) {/* Generated by Opal 1.5.1 */
  var self = Opal.top, $nesting = [], $$ = Opal.$r($nesting), nil = Opal.nil, $send = Opal.send, $truthy = Opal.truthy, $hash2 = Opal.hash2, $gvars = Opal.gvars, $def = Opal.def, $klass = Opal.klass, $module = Opal.module, $defs = Opal.defs, anim1 = nil, my_anim = nil, my_animation = nil, my_video = nil, b = nil, mycode = nil;

  Opal.add_stubs('atome_creator,generate_html_renderer,id,is_a?,instance_exec,to_proc,append_to,DOM,div,[],particle_creator,atome_creator_option,eval,get_binding,animation,grab,length,atomes,merge,new,animator,[]=,style,html_object,play,puts,currentTime,on,wait,currentTime=,pause,bloc,send,type,write_text,alert,class,time,box,touch,particle_list,define_method,new_particle,additional_particle_methods,default_params,instance_of?,text,write,text=,atome');
  
  $$('Genesis').$atome_creator("animator");
  $send($$('Genesis'), 'generate_html_renderer', ["animator"], function $$1(value, atome, proc){var self = $$1.$$s == null ? this : $$1.$$s, id_found = nil;
    if ($gvars.document == null) $gvars.document = nil;

    
    
    if (value == null) value = nil;;
    
    if (atome == null) atome = nil;;
    
    if (proc == null) proc = nil;;
    id_found = self.$id();
    if ($truthy(proc['$is_a?']($$('Proc')))) {
      $send(self, 'instance_exec', [], proc.$to_proc())
    };
    $send(self, 'DOM', [], function $$2(){var self = $$2.$$s == null ? this : $$2.$$s;

      return self.$div($hash2(["id"], {"id": id_found}))}, {$$arity: 0, $$s: self}).$append_to($gvars.document['$[]']("user_view"));
    self.html_object = $gvars.document['$[]'](id_found);
    return (self.html_type = "div");}, {$$arity: 3, $$s: self});
  $$('Genesis').$particle_creator("code");
  $send($$('Genesis'), 'atome_creator_option', ["code_pre_render_proc"], function $$3(params){var self = $$3.$$s == null ? this : $$3.$$s, str = nil;

    
    
    if (params == null) params = nil;;
    
    $def(self, '$get_binding', function $$get_binding() {
      var self = this;

      return Opal.Binding.$new(  function($code) {    return eval($code);  },  [],  self,  ['/Users/jeezs/codes/atome/test/test_app/application/index.rb', 17])
    }, 0);
    str = params['$[]']("value");
    self.$eval(str, self.$get_binding(), "/Users/jeezs/codes/atome/test/test_app/application/index.rb", 22);
    return params['$[]']("value");}, {$$arity: 1, $$s: self});
  $send($$('Genesis'), 'particle_creator', ["target"], function $$4(params){
    
    
    if (params == null) params = nil;;
    return nil;}, 1);
  $send($$('Genesis'), 'generate_html_renderer', ["target"], function $$5(value, atome, proc){var self = $$5.$$s == null ? this : $$5.$$s;
    if (self.html_object == null) self.html_object = nil;

    
    
    if (value == null) value = nil;;
    
    if (atome == null) atome = nil;;
    
    if (proc == null) proc = nil;;
    return self.html_object;}, {$$arity: 3, $$s: self});
  $$('Genesis').$particle_creator("data");
  
  $def(self, '$animation', function $$animation(params) {
    var proc = $$animation.$$p || nil;

    delete $$animation.$$p;
    
    ;
    
    if (params == null) params = $hash2([], {});;
    return $send($$('Utilities').$grab("view"), 'animation', [params], proc.$to_proc());
  }, -1);
  $$('Genesis').$particle_creator("play");
  (function($base, $super, $parent_nesting) {
    var self = $klass($base, $super, 'Atome');

    var $nesting = [self].concat($parent_nesting), $$ = Opal.$r($nesting);

    
    
    $def(self, '$animation', function $$animation(params) {
      var proc = $$animation.$$p || nil, self = this, generated_id = nil, $ret_or_1 = nil, generated_parent = nil, temp_default = nil, new_atome = nil;

      delete $$animation.$$p;
      
      ;
      
      if (params == null) params = $hash2([], {});;
      generated_id = ($truthy(($ret_or_1 = params['$[]']("id"))) ? ($ret_or_1) : ("animation_" + ($$('Universe').$atomes().$length())));
      generated_parent = ($truthy(($ret_or_1 = params['$[]']("parent"))) ? ($ret_or_1) : (self.$id()));
      temp_default = $hash2(["id", "type", "parent", "bloc"], {"id": generated_id, "type": "animator", "parent": [generated_parent], "bloc": proc});
      params = temp_default.$merge(params);
      new_atome = $$('Atome').$new($hash2(["animator"], {"animator": params}));
      return new_atome.$animator();
    }, -1);
    
    $def(self, '$play_video', function $$play_video(params) {
      var proc = $$play_video.$$p || nil, self = this, exec_found = nil;

      delete $$play_video.$$p;
      
      ;
      params['$[]']("atome").$html_object().$style()['$[]=']("left", "33px");
      params['$[]']("atome").$html_object().$play();
      self.$puts("time is : " + (params['$[]']("atome").$html_object().$currentTime()));
      $send(params['$[]']("atome").$html_object(), 'on', ["timeupdate"], function $$6(e){var self = $$6.$$s == null ? this : $$6.$$s;

        
        
        if (e == null) e = nil;;
        return self.$puts("--- " + (params['$[]']("atome").$html_object().$currentTime()) + ":::" + (e));}, {$$arity: 1, $$s: self});
      $send(self, 'wait', [2], function $$7(){var $a;

        return ($a = [33], $send(params['$[]']("atome").$html_object(), 'currentTime=', $a), $a[$a.length - 1])}, 0);
      $send(self, 'wait', [6], function $$8(){
        return params['$[]']("atome").$html_object().$pause()}, 0);
      exec_found = params['$[]']("atome").$bloc()['$[]']("bloc");
      if ($truthy(exec_found['$is_a?']($$('Proc')))) {
        return $send(self, 'instance_exec', ["::callback from video player"], exec_found.$to_proc())
      } else {
        return nil
      };
    }, 1);
    return $def(self, '$play_animator', function $$play_animator(params) {
      var self = this, exec_found = nil;

      
      self.$puts("I play the animation : " + (params));
      exec_found = params['$[]']("atome").$bloc();
      if ($truthy(exec_found['$is_a?']($$('Proc')))) {
        return $send(self, 'instance_exec', ["::callback from anim player"], exec_found.$to_proc())
      } else {
        return nil
      };
    }, 1);
  })($nesting[0], null, $nesting);
  $send($$('Genesis'), 'atome_creator_option', ["play_pre_render_proc"], function $$9(params){var self = $$9.$$s == null ? this : $$9.$$s, proc_found = nil;

    
    
    if (params == null) params = nil;;
    params['$[]']("atome").$send("play_" + (params['$[]']("atome").$type()), params);
    proc_found = params['$[]']("proc");
    if ($truthy(proc_found['$is_a?']($$('Proc')))) {
      return $send(self, 'instance_exec', ["::call back from play render"], proc_found.$to_proc())
    } else {
      return nil
    };}, {$$arity: 1, $$s: self});
  $$('Genesis').$particle_creator("time");
  $send($$('Genesis'), 'generate_html_renderer', ["time"], function $$10(value, atome, proc){var $a, self = $$10.$$s == null ? this : $$10.$$s;
    if (self.html_object == null) self.html_object = nil;

    
    
    if (value == null) value = nil;;
    
    if (atome == null) atome = nil;;
    
    if (proc == null) proc = nil;;
    return ($a = [value], $send(self.html_object, 'currentTime=', $a), $a[$a.length - 1]);}, {$$arity: 3, $$s: self});
  $send($$('Genesis'), 'particle_creator', ["on"], function $$11(params){
    
    
    if (params == null) params = nil;;
    return nil;}, 1);
  $send($$('Genesis'), 'generate_html_renderer', ["on"], function $$12(value, atome, proc){var self = $$12.$$s == null ? this : $$12.$$s;
    if (self.html_object == null) self.html_object = nil;

    
    
    if (value == null) value = nil;;
    
    if (atome == null) atome = nil;;
    
    if (proc == null) proc = nil;;
    return $send(self.html_object, 'on', [value], function $$13(e){var self = $$13.$$s == null ? this : $$13.$$s;

      
      
      if (e == null) e = nil;;
      self.$write_text($hash2(["string"], {"string": "the_current_movie_is_stopped"}));
      return self.$alert("kool");}, {$$arity: 1, $$s: self});}, {$$arity: 3, $$s: self});
  anim1 = $hash2(["start", "end", "duration", "loop", "curve", "target"], {"start": $hash2(["smooth", "blur", "rotate", "color"], {"smooth": 0, "blur": 0, "rotate": 0, "color": $hash2(["red", "green", "blue"], {"red": 1, "green": 1, "blue": 1})}), "end": $hash2(["smooth", "rotate", "blur", "color"], {"smooth": 25, "rotate": 180, "blur": 20, "color": $hash2(["red", "green", "blue"], {"red": 1, "green": 0, "blue": 0})}), "duration": 1000, "loop": 1, "curve": "easing", "target": "my_shape"});
  my_anim = $send(self, 'animation', [$hash2(["data", "id"], {"data": anim1, "id": "my_animation"})], function $$14(params){var self = $$14.$$s == null ? this : $$14.$$s;

    
    
    if (params == null) params = nil;;
    return self.$puts("animation params callback is : " + (params) + " " + (self.$id()));}, {$$arity: 1, $$s: self});
  my_animation = $send($$('Atome'), 'new', [$hash2(["animator"], {"animator": $hash2(["render", "id", "type", "parent", "target", "data", "left", "top", "width", "height"], {"render": ["html"], "id": "anim12", "type": "animator", "parent": ["view"], "target": "image1", "data": anim1, "left": 333, "top": 333, "width": 199, "height": 99})})], function $$15(){var self = $$15.$$s == null ? this : $$15.$$s;

    return self.$puts("non proc exec added at atome creation level : " + (self.$class()))}, {$$arity: 0, $$s: self});
  my_video = $send($$('Atome'), 'new', [$hash2(["video"], {"video": $hash2(["render", "data", "id", "type", "parent", "path", "left", "top", "width", "height"], {"render": ["html"], "data": "dummy", "id": "video1", "type": "video", "parent": ["view"], "path": "./medias/videos/avengers.mp4", "left": 333, "top": 333, "width": 199, "height": 99})})], function $$16(params){var self = $$16.$$s == null ? this : $$16.$$s;

    
    
    if (params == null) params = nil;;
    return self.$puts("video callback here " + (params));}, {$$arity: 1, $$s: self});
  self.$grab("video1").$time(5);
  $send(self.$grab("video1"), 'on', ["pause"], function $$17(event){var self = $$17.$$s == null ? this : $$17.$$s;

    
    
    if (event == null) event = nil;;
    return self.$alert("stopped");}, {$$arity: 1, $$s: self});
  b = self.$box();
  $send(b, 'touch', [true], function $$18(){var self = $$18.$$s == null ? this : $$18.$$s;

    return $send(self.$grab("video1"), 'play', [true], function $$19(event){var self = $$19.$$s == null ? this : $$19.$$s;

      
      
      if (event == null) event = nil;;
      return self.$puts("i am the play callback : " + (event));}, {$$arity: 1, $$s: self})}, {$$arity: 0, $$s: self});
  mycode = "circle({color: :red})\n";
  $$('Atome').$new($hash2(["video"], {"video": $hash2(["id", "code"], {"id": "code1", "code": mycode})}));
  (function($base, $parent_nesting) {
    var self = $module($base, 'Genesis');

    var $nesting = [self].concat($parent_nesting), $$ = Opal.$r($nesting);

    return $defs(self, '$particle_creator', function $$particle_creator(method_name) {
      var proc = $$particle_creator.$$p || nil, self = this;

      delete $$particle_creator.$$p;
      
      ;
      if ($truthy(proc['$is_a?']($$('Proc')))) {
        $send(self, 'instance_exec', [method_name], proc.$to_proc())
      };
      $$('Utilities').$particle_list(method_name);
      $send($$('Atome'), 'define_method', [method_name], function $$20(params){var user_proc = $$20.$$p || nil, self = $$20.$$s == null ? this : $$20.$$s;

        delete $$20.$$p;
        
        ;
        
        if (params == null) params = nil;;
        return self.$new_particle(method_name, params, user_proc);}, {$$arity: -1, $$s: self});
      $send($$('Atome'), 'define_method', ["" + (method_name) + "="], function $$21(params){var user_proc = $$21.$$p || nil, self = $$21.$$s == null ? this : $$21.$$s;

        delete $$21.$$p;
        
        ;
        
        if (params == null) params = nil;;
        return self.$new_particle(method_name, params, user_proc);}, {$$arity: 1, $$s: self});
      return self.$additional_particle_methods(method_name);
    }, 1)
  })($nesting[0], $nesting);
  (function($base, $super, $parent_nesting) {
    var self = $klass($base, $super, 'Atome');

    var $nesting = [self].concat($parent_nesting), $$ = Opal.$r($nesting);

    return $def(self, '$write', function $$write(params) {
      var self = this, default_renderer = nil, generated_id = nil, $ret_or_1 = nil, generated_render = nil, generated_parent = nil, temp_default = nil, new_atome = nil;

      
      
      if (params == null) params = $hash2([], {});;
      default_renderer = $$('Sanitizer').$default_params()['$[]']("render");
      generated_id = ($truthy(($ret_or_1 = params['$[]']("id"))) ? ($ret_or_1) : ("text_" + ($$('Universe').$atomes().$length())));
      if (!$truthy(params['$[]']("render")['$instance_of?']($$('Hash')))) {
        generated_render = ($truthy(($ret_or_1 = params['$[]']("render"))) ? ($ret_or_1) : (default_renderer))
      };
      generated_parent = ($truthy(($ret_or_1 = params['$[]']("parent"))) ? ($ret_or_1) : (self.$id()));
      temp_default = $hash2(["render", "id", "type", "parent", "visual", "data", "left", "top", "width", "height", "color"], {"render": [generated_render], "id": generated_id, "type": "text", "parent": [generated_parent], "visual": $hash2(["size"], {"size": 33}), "data": "lorem ipsum", "left": 39, "top": 33, "width": 199, "height": 33, "color": $hash2(["render", "id", "type", "red", "green", "blue", "alpha"], {"render": [generated_render], "id": "color_" + (generated_id), "type": "color", "red": 0.09, "green": 1, "blue": 0.12, "alpha": 1})});
      params = temp_default.$merge(params);
      new_atome = $$('Atome').$new($hash2(["text"], {"text": params}));
      return new_atome.$text();
    }, -1)
  })($nesting[0], null, $nesting);
  
  $def(self, '$write', function $$write(params) {
    var self = this;

    
    
    if (params == null) params = $hash2([], {});;
    self.$alert("create an option for atome and use instance_exec instead of creating new method in atome that will conflict");
    return self.$grab("view").$write(params);
  }, -1);
  $$('Genesis').$atome_creator("text");
  (function($base, $super) {
    var self = $klass($base, $super, 'Atome');

    var $proto = self.$$prototype;

    $proto.html_object = nil;
    return $def(self, '$text_data', function $$text_data(value) {
      var $a, self = this;

      return ($a = [value], $send(self.html_object, 'text=', $a), $a[$a.length - 1])
    }, 1)
  })($nesting[0], null);
  $send($$('Genesis'), 'generate_html_renderer', ["data"], function $$22(value, atome, proc){var self = $$22.$$s == null ? this : $$22.$$s;

    
    
    if (value == null) value = nil;;
    
    if (atome == null) atome = nil;;
    
    if (proc == null) proc = nil;;
    return self.$send("" + (self.$type()) + "_data", value);}, {$$arity: 3, $$s: self});
  $send($$('Genesis'), 'generate_html_renderer', ["text"], function $$23(value, atome, proc){var self = $$23.$$s == null ? this : $$23.$$s, id_found = nil;
    if ($gvars.document == null) $gvars.document = nil;

    
    
    if (value == null) value = nil;;
    
    if (atome == null) atome = nil;;
    
    if (proc == null) proc = nil;;
    id_found = self.$id();
    if ($truthy(proc['$is_a?']($$('Proc')))) {
      $send(self, 'instance_exec', [], proc.$to_proc())
    };
    $send(self, 'DOM', [], function $$24(){var self = $$24.$$s == null ? this : $$24.$$s;

      return self.$div($hash2(["id"], {"id": id_found})).$atome()}, {$$arity: 0, $$s: self}).$append_to($gvars.document['$[]']("user_view"));
    self.html_object = $gvars.document['$[]'](id_found);
    return (self.html_type = "text");}, {$$arity: 3, $$s: self});
  return self.$write($hash2(["data"], {"data": "kooloii"}));
});
