function zid(e){return z_d("1"),document.getElementById(e)}function zss(e){if(z_d("2"),document.getElementById(e))return document.getElementById(e).style;zon&&zog("zim wrap - zss(): id not found")}function zgo(e,t,o,n,r,i){if(z_d("3"),!(zot(t)&&""!=t||"_self"==t)){var a="";return o&&(a+="width="+o+","),n&&(a+="height="+n+","),r&&(a+="fullscreen=yes,"),i&&(a+="modal=yes,alwaysRaised=yes"),window.open(e,t,a)}window.location.href=e}function zum(e){if(z_d("4"),!zot(e))return Number(String(e).replace(/[^\d\.\-]/g,""))}function zot(e){return null==e}function zop(e){z_d("5"),zot(e)||(e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0))}function zil(){function e(e){}function t(e){(e=e||event).preventDefault()}z_d("6");var o=t;return window.addEventListener("keydown",e,{passive:!1}),window.addEventListener("wheel",t,{passive:!1}),window.addEventListener("DOMMouseScroll",o,{passive:!1}),[e,t,o]}function zet(e){return z_d("6.1"),new function(){var t=this;this.on=function(o,n){if(!(zot(e)||zot(o)||zot(n)))for(var r=t.tags,i=0;i<r.length;i++)r[i].addEventListener(o,n)},this.off=function(o,n){if(!(zot(e)||zot(o)||zot(n)))for(var r=t.tags,i=0;i<r.length;i++)r[i].removeEventListener(o,n)},Object.defineProperty(t,"tags",{get:function(){return zot(e)?[]:"string"==typeof e||e instanceof String?document.querySelectorAll(e):"string"==typeof e.innerHTML?[e]:[]},set:function(e){}}),this.css=function(e,o){for(var n=t.tags,r=0;r<n.length;r++)if(1==arguments.length&&e.constructor==={}.constructor)for(var i in e)n[r].style[i]=e[i];else{if(1==arguments.length)return t.tags[0].style[e];n[r].style[e]=o}},this.prop=function(e,o){if(!zot(e)){for(var n=t.tags,r=[],i=0;i<n.length;i++)if(zot(o))if(e.constructor==={}.constructor)for(var a in e)n[i][a]=e[a];else r.push(n[i][e]);else n[i][e]=o;return zot(o)?r:void 0}}}}function isDUO(e){return 1==e.length&&null!=e[0]&&e[0].constructor==={}.constructor}function zob(e,t,o,n){var r=zim&&(zim.ZIMONON||window.ZIMONON);if(isDUO(t)){z_d("7");var i,a,l,s=t[0],c=zot(o)?e.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","):o.replace(/\s+/g,"").split(","),u=[];for(i=0;i<c.length;i++)a=c[i].split("=")[0],c[i]=a,u.push(s[a]);for(i in s)c.indexOf(i)<0&&zon&&zog(e,"bad argument "+i);return!(l=e.prototype.isPrototypeOf(n)?new(e.bind.apply(e,[null].concat(u))):e.apply(null,u))||(r&&!l.arguments&&(l.arguments=[s]),l)}r&&n&&t&&zot(n.arguments)&&(n.arguments=Array.prototype.slice.call(t))}function zik(e){if(z_d("7.5"),z_d("17.6"),!zot(e))return zim.Pick.choose(e)}function z_d(e){zim&&(zim.DISTILL||window.DISTILL)&&zim.distillery.push(e)}function zimify(e,t){z_d("83.3");var o={drag:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f){return isDUO(arguments)?(e.obj=this,zim.drag(e)):zim.drag(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f)},noDrag:function(){return zim.noDrag(this)},dragBoundary:function(e){return zim.dragBoundary(this,e)},dragRect:function(e){return zim.dragBoundary(this,e)},transform:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A){return isDUO(arguments)?(e.obj=this,zim.transform(e)):zim.transform(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A)},setSwipe:function(e){return zim.setSwipe(this,e)},gesture:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p){return isDUO(arguments)?(e.obj=this,zim.gesture(e)):zim.gesture(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p)},noGesture:function(e,t,o){if(isDUO(arguments))return e.obj=this,zim.noGesture(e);zim.noGesture(this,e,t,o)},gestureBoundary:function(e,t){return zim.gestureBoundary(this,e,t)},gestureRect:function(e,t){return zim.gestureBoundary(this,e,t)},addPhysics:function(e,t,o,n,r,i,a,l,s,c,u){return isDUO(arguments)?(e.obj=this,zim.addPhysics(e)):zim.addPhysics(this,e,t,o,n,r,i,a,l,s,c,u)},removePhysics:function(){return zim.removePhysics(this)},hitTestPoint:function(e,t,o){return zim.hitTestPoint(this,e,t,o)},hitTestReg:function(e,t){return zim.hitTestReg(this,e,t)},hitTestRect:function(e,t,o){return zim.hitTestRect(this,e,t,o)},hitTestCircle:function(e,t,o){return zim.hitTestCircle(this,e,t,o)},hitTestCircles:function(e,t){return zim.hitTestCircles(this,e,t)},hitTestBounds:function(e,t,o){return zim.hitTestBounds(this,e,t,o)},boundsToGlobal:function(e,t,o){return zim.boundsToGlobal(this,e,t,o)},resetBounds:function(e,t,o,n){return zim.resetBounds(this,e,t,o,n)},hitTestPath:function(e,t,o){return zim.hitTestPath(this,e,t,o)},hitTestGrid:function(e,t,o,n,r,i,a,l,s,c,u,d){return zim.hitTestGrid(this,e,t,o,n,r,i,a,l,s,c,u,d)},animate:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,j,L,D,Y,X,R,_,W,F){return e&&(e.props||e.obj)&&isDUO(arguments)?(e.target=this,zim.animate(e)):zim.animate(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,j,L,D,Y,X,R,_,W,F)},pauseAnimate:function(){return this},stopAnimate:function(){return this},wiggle:function(e,t,o,n,r,i,a,l,s,c,u,d,h){return isDUO(arguments)?(e.target=this,zim.wiggle(e)):zim.wiggle(this,e,t,o,n,r,i,a,l,s,c,u,d,h)},loop:function(e,t,o,n,r){return zim.loop(this,e,t,o,n,r)},copyMatrix:function(e){return zim.copyMatrix(this,e)},duplicate:function(){return zim.duplicate(this)},cur:function(e){return zim.cur(this,e)},sha:function(e,t,o,n){return zim.sha(this,e,t,o,n)},pos:function(e,t,o,n,r,i,a,l,s,c){return isDUO(arguments)?(e.obj=this,zim.pos(e)):zim.pos(this,e,t,o,n,r,i,a,l,s,c)},loc:function(e,t,o,n,r,i,a){return isDUO(arguments)?(e.obj=this,zim.loc(e)):zim.loc(this,e,t,o,n,r,i,a)},mov:function(e,t){return isDUO(arguments)?(e.obj=this,zim.mov(e)):zim.mov(this,e,t)},top:function(){return zim.top(this)},bot:function(){return zim.bot(this)},ord:function(e){return zim.ord(this,e)},dep:function(e){return zim.dep(this,e)},alp:function(e){return zim.alp(this,e)},ble:function(e){return zim.ble(this,e)},hov:function(e,t){return zim.hov(this,e,t)},rot:function(e,t,o){return zim.rot(this,e,t,o)},siz:function(e,t,o){return zim.siz(this,e,t,o)},ske:function(e,t){return zim.ske(this,e,t)},reg:function(e,t,o){return zim.reg(this,e,t,o)},sca:function(e,t){return zim.sca(this,e,t)},scaleTo:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.scaleTo(e)):zim.scaleTo(this,e,t,o,n,r)},fit:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.fit(e)):zim.fit(this,e,t,o,n,r)},outline:function(e,t){return isDUO(arguments)?(e.obj=this,zim.outline(e)):zim.outline(this,e,t)},addTo:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.addTo(e)):zim.addTo(this,e,t,o)},removeFrom:function(e){return zim.removeFrom(this,e)},added:function(e,t,o){return zim.added(this,e,t,o)},tap:function(e,t,o,n){return zim.tap(this,e,t,o,n)},noTap:function(){return zim.noTap(this)},hold:function(e,t,o,n){return zim.hold(this,e,t,o,n)},noHold:function(){return zim.noHold(this)},change:function(e,t){return zim.change(this,e,t)},noChange:function(){return zim.noChange(this)},centerReg:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.centerReg(e)):zim.centerReg(this,e,t,o)},center:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.center(e)):zim.center(this,e,t,o)},place:function(e){return zim.place(this,e)},placeReg:function(e){return zim.placeReg(this,e)},expand:function(e,t){return zim.expand(this,e,t)},setMask:function(e,t){return zim.setMask(this,e,t)},cloneProps:function(e){return e.type=this.type,e.group=this.group,e.style=this.style,e.alpha=this.alpha,e.rotation=this.rotation,e.mouseEnabled=this.mouseEnabled,e.tickEnabled=this.tickEnabled,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.skewX=this.skewX,e.skewY=this.skewY,e.name=this.name,e.regX=this.regX*e.width/this.width,e.regY=this.regY*e.height/this.height,e.visible=this.visible,e.shadow=this.shadow,this.type&&"Shape"!=this.type||zim.copyMatrix(e,this),e.compositeOperation=this.compositeOperation,e.snapToPixel=this.snapToPixel,e.filters=null==this.filters?null:this.filters.slice(0),e.mask=this.mask,e.hitArea=this.hitArea,this.type&&"Shape"!=this.type||!this._bounds||e.setBounds(this._bounds.x,this._bounds.y,this._bounds.width,this._bounds.height),e},cloneChildren:function(e){e.children.length&&e.removeAllChildren();for(var t=e.children,o=0,n=this.children.length;o<n;o++){var r=this.children[o].clone();r.parent=e,t.push(r)}return e}};if(!zot(t)){t=[];for(var n in o)t.push(n);return t}for(var r in o)o.hasOwnProperty(r)&&(e[r]=o[r]);return zim&&(e.cjsLocalToGlobal=e.localToGlobal,e.cjsGlobalToLocal=e.globalToLocal,e.cjsLocalToLocal=e.localToLocal,e.localToGlobal=function(t,o){return zim.localToGlobal(t,o,e,e.cjsLocalToGlobal)},e.globalToLocal=function(t,o){return zim.globalToLocal(t,o,e,e.cjsGlobalToLocal)},e.localToLocal=function(e,t,o){return zim.localToLocal(e,t,o,clip)}),Object.defineProperty(e,"width",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.width*this.scaleX)},set:function(e){var t=this.getBounds();if(zot(t)||0==t.width)zon&&zog("width needs bounds set with setBounds()");else{var o=e/t.width;this.scaleX=this.scaleY=o}}}),Object.defineProperty(e,"height",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.height*this.scaleY)},set:function(e){var t=this.getBounds();if(zot(t)||0==t.height)zon&&zog("height needs bounds set with setBounds()");else{var o=e/t.height;this.scaleX=this.scaleY=o}}}),Object.defineProperty(e,"widthOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.width*this.scaleX)},set:function(e){var t=this.getBounds();if(zot(t)||0==t.width)zog("widthOnly needs bounds set with setBounds()");else{var o=e/t.width;this.scaleX=o}}}),Object.defineProperty(e,"heightOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.height*this.scaleY)},set:function(e){var t=this.getBounds();if(zot(t)||0==t.height)zog("heightOnly needs bounds set with setBounds()");else{var o=e/t.height;this.scaleY=o}}}),Object.defineProperty(e,"depth",{enumerable:!0,get:function(){return this._depth},set:function(e){if(this._depth=e,!zot(this.vrChannel)){var t=this.vrParallaxDistance?e*this.vrParallax*this.vrParallaxDistance:0;"left"==this.vrChannel?this.x=this.vrStartX+e+t:"right"==this.vrChannel&&(this.x=this.vrStartX-e+t)}}}),Object.defineProperty(e,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(e){this.compositeOperation=e}}),e}function zimplify(e){z_d("83.35"),document.window=Window,document.window=window,document.Bloob=Blob,ignore="ignore",zot(e)&&(e=[]),Array.isArray(e)||(e=[e]);var t=zimify(null,!0),o=["loop","stopAnimate","pauseAnimate","animate","wiggle"];for(var n in zim)(-1==t.indexOf(n)||0<=o.indexOf(n))&&-1==e.indexOf(n)&&(window[n]=zim[n]);window.KEYFOCUS=zim.KEYFOCUS,window.OPTIMIZE=zim.OPTIMIZE,window.ACTIONEVENT=zim.ACTIONEVENT,window.STYLE=zim.STYLE}var zimDefaultFrame;if(void 0===zon)var zon=!0;if(void 0===zns)var zns=!1;var ignore,zog=zon?console.log.bind(console):function(){},zta=console.table&&zon?console.table.bind(console):function(){},zim=function(e){function t(e,t,o,n,r){var i=e*e;return t+(3*-t+e*(3*t-t*e))*e+(3*o+e*(-6*o+3*o*e))*e+(3*n-3*n*e)*i+r*(i*e)}function n(e,t){t?(e.mouseChildren=!0,e.mouseEnabled=!0,e._enabled=!0):(e.mouseChildren=!1,e.mouseEnabled=!1,e._enabled=!1)}if(e.shuffle=function(e){if(z_d("8"),!zot(e)){var t,o,n=e.length;if(0==n)return e;for(;--n;)t=Math.floor(Math.random()*(n+1)),o=e[n],e[n]=e[t],e[t]=o;return e}},e.rand=function(e,t,o,n){return z_d("9"),zot(e)&&zot(t)?Math.random():((zot(e)||isNaN(e))&&(e=0),(zot(t)||isNaN(t))&&(t=0),e%1==0&&t%1==0||(o=!1),zot(o)&&(o=!0),n&&.5<Math.random()&&(e*=-1,t*=-1),o&&(t<e?e++:e<t&&t++),0==e&&0==t?0:(r=0==t?Math.random()*e:Math.min(e,t)+Math.random()*(Math.max(e,t)-Math.min(e,t)),o?Math.floor(r):r));var r},e.series=function(){function e(){return t[o++%t.length]}var t;if(z_d("13.61"),0==arguments.length)return function(){};t=1==arguments.length&&Array.isArray(arguments[0])?arguments[0]:arguments;var o=0;return e.array=t,e.type="series",e},e.makeSeries=function(e){function t(){return e[o++%e.length]}if(z_d("13.6"),zot(e))return function(){};var o=0;return t.array=e,t},e.loop=function(t,o,n,r,i,a){function l(e){return zot(i)&&(i=n?e:0),zot(a)&&(a=n?0:e),n&&i<a||!n&&a<i?0:(i<0&&a)<0||e<i&&e<a?0:(i=Math.max(0,Math.min(i,e)),a=Math.max(0,Math.min(a,e)),Math.floor((n?i-a:a-i)/r)+1)}var s;if(s=zob(e.loop,arguments,"obj, call, reverse, step, start, end"))return s;if(z_d("9.5"),!zot(t)&&!zot(o)){zot(n)&&(n=!1),(zot(r)||r<=0)&&(r=1);var c="number"==typeof t?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":t instanceof NodeList?"nodelist":t instanceof HTMLCollection?"htmlcollection":"invalid";if("invalid"!=c)if("number"==c||"array"==c||"nodelist"==c||"htmlcollection"==c){if(0==(d=l((h="number"==c?t:t.length)-1)))return;if(n)for(p=i;a<=p;p-=r){if("number"==c)var u=o(p,d,i,a,t);else u="array"==c?o(t[p],p,d,i,a,t):o(t.item(p),p,d,i,a,t);if(void 0!==u)return u}else for(p=i;p<=a;p+=r)if(void 0!==(u="number"==c?o(p,d,i,a,t):"array"==c?o(t[p],p,d,i,a,t):o(t.item(p),p,d,i,a,t)))return u}else if("object"==c){var d,h=0,g=[];for(var p in t)h++,g.push(p);if(0==(d=l(h-1)))return;if(n){for(p=i;a<=p;p-=r)if(void 0!==(u=o(g[p],t[g[p]],p,d,i,a,t)))return u}else for(p=i;p<=a;p+=r)if(void 0!==(u=o(g[p],t[g[p]],p,d,i,a,t)))return u}}},e.timeout=function(t,o){function n(){var e=Date.now();if(r.time+=e-i,i=e,r.time>=t)return r.done=!0,o(r),void r.clear();r.rid=requestAnimationFrame(n)}if(z_d("9.7"),!zot(o)&&"function"==typeof o){zot(t)&&(t=1e3),t=e.Pick.choose(t);var r={startTime:Date.now(),time:0,paused:!1,done:!1},i=r.startTime;return r.pause=function(e,t,o){zot(e)&&(e=!0),e?cancelAnimationFrame(r.rid):(t?i=0:o?(i=Date.now(),r.time=0):i=Date.now(),n()),r.paused=e},r.clear=function(){for(var e in r&&cancelAnimationFrame(r.rid),r)delete r[e];r.pause=function(){},r.clear=function(){}},n(),r}},e.interval=function(t,o,n,r){function i(){s.startTime=Date.now(),s.interval=e.Pick.choose(s.time),s.id=setTimeout(function(){s.paused||s.active&&(s.rid=requestAnimationFrame(i),s.count++,o(s),a())},s.interval)}function a(){-1!=n&&s.count>=(r?s.total-1:s.total)&&s.clear()}if(z_d("9.8"),!zot(o)&&"function"==typeof o&&(zot(t)&&(t=1e3),zot(r)&&(r=!1),zot(n)||!(isNaN(n)||n<=0))){zot(n)&&(n=-1);var l,s={count:0,total:n,paused:!1,time:t,active:!0};return r&&setTimeout(function(){o(s),a()},10),s.pause=function(e,t,n){zot(e)&&(e=!0),e?(clearTimeout(l),clearTimeout(s.id),cancelAnimationFrame(s.rid),s.pauseTimeLeft=s.interval-(Date.now()-s.startTime)):(s.paused||s.pause(!0),l=setTimeout(function(){s.count++,o(s),i(),a()},t?0:n?s.interval:s.pauseTimeLeft),s.pauseTimeLeft=null),s.paused=e},s.clear=function(){s.active=!1,clearTimeout(l),cancelAnimationFrame(s.rid),clearTimeout(s.id);var e=s.count;for(var t in s)delete s[t];s.active=!1,s.count=e,s.pause=function(){},s.clear=function(){}},i(),s}},e.async=function(t,o){if(z_d("29"),!zot(t)){var n,r=document.createElement("script");if(o){var i=o.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1];e.async[i]=(n=r,function(e){n&&n.parentNode.removeChild(n),n=null,o(e)})}else e.async.z_s&&e.async.z_s.parentNode&&e.async.z_s.parentNode.removeChild(e.async.z_s),e.async.z_s=r;t.match(/\?/)||(t+="?"),r.setAttribute("src",t+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(r)}},e.convertColorCheck=!1,e.convertColor=function(t,o,n){function r(e){var t;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(3==(t=e.substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),"rgb"==o?"rgb("+[t>>16&255,t>>8&255,255&t]+")":"rgba("+[t>>16&255,t>>8&255,255&t].join(",")+","+n+")"):"rgb"==o?"rgb(0,0,0)":"rgba(0,0,0,1)"}function i(e){var t=Number(e).toString(16);return t.length<2&&(t="0"+t),t}function a(e){var t=e.split(",");return[i(t[0]),i(t[1]),i(t[2])]}if(e.convertColorCheck||(z_d("27.5"),e.convertColorCheck=!0),zot(o)&&(o="hex"),!zot(t)){var l,s=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],c=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];if(l=t.match(/rgba\((.*)\)/)){if(!zot(n))return(u=t.split(","))[3]=n+")",u.join(",");t="rgb("+l[1]+")"}if(zot(n),l=t.match(/rgb\((.*)\)/)){var u;if("rgba"==o)return(u=t.split(")"))[0]+","+n+u[1];if("hex"==o)return"#"+(s=a(l[1]))[0]+s[1]+s[2];if("string"!=o)return t;var d;return t=a(l[1]).join("").toLowerCase(),-1==(d=c.indexOf(t))?"#"+t:s[d]}if("rgb"==o||"rgba"==o)return r("#"==t.charAt(0)?t:e.convertColor(t));if("hex"==o){if("#"==t.charAt(0))return t}else"#"==t.charAt(0)&&3==(t=t.replace("#","")).length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2));return"string"!=o?"#"+c[-1!=s.indexOf(t.toLowerCase())?s.indexOf(t):0]:-1==(d=c.indexOf(t))?"#"+t:s[d]}},e.colorRangeCheck=!1,e.colorRange=function(t,o,n){n=Math.max(0,Math.min(1,n)),e.colorRangeCheck||(z_d("27.6"),e.colorRangeCheck=!0),zot(t)&&(t="white"),zot(o)&&(o="black");for(var r,i,a=e.convertColor(t,"rgb"),l=e.convertColor(o,"rgb"),s=(t=a.substring(4,a.length-1).split(","),o=l.substring(4,l.length-1).split(","),"#"),c=0;c<t.length;c++)r=o[c]-t[c],(i=Math.floor(parseInt(t[c],10)+r*n).toString(16)).length<2&&(i="0"+i),s+=i;return s},e.pointAlongCurve=function(o,n,r){if(z_d("27.7"),o&&o[0]&&o[1]&&o[2]&&o[3]){var i=t(n,o[0].x,o[1].x,o[2].x,o[3].x),a=t(n,o[0].y,o[1].y,o[2].y,o[3].y);if(r){var l=n+.05;if(1<l){l-=.05;var s=t(n-=.05,o[0].x,o[1].x,o[2].x,o[3].x),c=t(n,o[0].y,o[1].y,o[2].y,o[3].y)}else s=i,c=a;var u=t(l,o[0].x,o[1].x,o[2].x,o[3].x),d=t(l,o[0].y,o[1].y,o[2].y,o[3].y);return{x:i,y:a,angle:e.angle(s,c,u,d)}}return{x:i,y:a}}},e.distanceAlongCurve=function(t){return z_d("27.8"),(e.dist(t[0],t[3])+(e.dist(t[0],t[1])+e.dist(t[1],t[2])+e.dist(t[2],t[3])))/2},e.closestPointAlongCurve=function(t,o,n,r,i){z_d("27.9");var a,l=1e7,s=0,c=0;return zot(n)&&(n=10),e.loop(o,function(o,r,i){e.loop(n,function(n,i){var u=e.pointAlongCurve(o,n/i),d=e.dist(t,u);d<l&&(l=d,a=u,s=r,c=n)})}),i?(s*n+c)/(o.length*n)*100:r?a:s},e.transformPoints=function(t,o,n,r,i){if(z_d("27.95"),!zot(t)&&Array.isArray(t)){zot(r)&&(r=0),zot(i)&&(i=0),t=e.copy(t);var a,l=r,s=i;"rotation"==o&&(0!=r&&(t=e.transformPoints(t,"x",-l)),0!=i&&(t=e.transformPoints(t,"y",-s)));for(var c=0;c<t.length;c++)if(a=t[c],Array.isArray(a))if("x"==o)a[0]+=n;else if("y"==o)a[1]+=n;else if("scaleX"==o)a[0]=(a[0]-r)*n+r,a[4]=a[4]*n,a[6]=a[6]*n;else if("scaleY"==o)a[1]=(a[1]-i)*n+i,a[5]=a[5]*n,a[7]=a[7]*n;else if("scale"==o)a[0]=(a[0]-r)*n+r,a[4]=a[4]*n,a[6]=a[6]*n,a[1]=(a[1]-i)*n+i,a[5]=a[5]*n,a[7]=a[7]*n;else if("rotation"==o){var u=n*Math.PI/180,d=a[0],h=a[1];a[0]=d*Math.cos(u)-h*Math.sin(u),a[1]=h*Math.cos(u)+d*Math.sin(u),d=a[4],h=a[5],a[4]=d*Math.cos(u)-h*Math.sin(u),a[5]=h*Math.cos(u)+d*Math.sin(u),d=a[6],h=a[7],a[6]=d*Math.cos(u)-h*Math.sin(u),a[7]=h*Math.cos(u)+d*Math.sin(u)}return"rotation"==o&&(0!=r&&(t=e.transformPoints(t,"x",l)),0!=i&&(t=e.transformPoints(t,"y",s))),t}},e.makeID=function(e,t,o){var n;z_d("13.5"),zot(e)&&(e="mixed"),zot(t)&&(t=5),zot(o)&&(o="uppercase");var r=[2,3,4,5,6,7,8,9],i="abcdefghjkmnpqrstuvwxyz".split("");n=e.constructor===Array?e:"numbers"==e?r:"letters"==e?i:r.concat(i);for(var a,l,s="",c=0;c<t;c++)a=n[Math.floor(Math.random()*n.length)],l=Math.random(),"uppercase"==o||"mixed"==o&&.5<l?a.toUpperCase&&(a=a.toUpperCase()):a.toLowerCase&&(a=a.toLowerCase()),s+=String(a);return s},e.swapProperties=function(e,t,o){if(z_d("17.1"),zot(t)||zot(o)||zot(t[e])||zot(o[e]))return!1;var n=o[e];return o[e]=t[e],t[e]=n,!0},e.mobile=function(e){return z_d("28"),zot(e)&&(e=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":!(!e||void 0===window.orientation)&&(!/safari/i.test(navigator.userAgent)||"ios")},e.vee=function(e){return z_d("28.5"),!zot(e)&&("Pick"==e.type||Array.isArray(e)||e.constructor=={}.constructor&&(!zot(e.max)||!zot(e.noPick))||"function"==typeof e)},e.extend=function(t,o,n,r,i){function a(){this.constructor=t}var l;if(l=zob(e.extend,arguments,"subclass, superclass, override, prefix, prototype"))return l;if(!zot(t)&&!zot(o)){zot(r)&&(r="super"),zot(n)&&(n=[]),Array.isArray(n)||(n=[n]),zot(i)&&(i=!0);var s={};for(var c in t.prototype)Object.defineProperty(s,c,Object.getOwnPropertyDescriptor(t.prototype,c));for(c in a.prototype=o.prototype,t.prototype=new a,s)Object.defineProperty(t.prototype,c,Object.getOwnPropertyDescriptor(s,c));var u=t.prototype,d=Object.getPrototypeOf&&Object.getPrototypeOf(u)||u.__proto__;if(d){var h;u[(r+="_")+"constructor"]=d.constructor;for(var g=0;g<n.length;g++)"function"==typeof d[h=n[g]]&&(u[r+h]=d[h]);if(i)for(h in d)u.hasOwnProperty(h)&&"function"==typeof d[h]&&(u[r+h]=d[h])}return t}zon&&t!=e.StageGL&&zog("zim.extend() - please supply a class and its superclass")},e.copyCheck=!1,e.copy=function(t,o,n){if(e.copyCheck||(z_d("10"),e.copyCheck=!0),zot(o)&&(o=!1),zot(n)&&(n=!0),null==t||!(t instanceof Array||t.constructor=={}.constructor))return o&&null!=t&&t.clone&&t.type&&("Container"!=t.type&&"Stage"!=t.type&&"StageGL"!=t.type||n)?t.clone():t;if(t instanceof Array){for(var r=[],i=0;i<t.length;i++)r[i]=e.copy(t[i],o,n);return r}if(t.constructor=={}.constructor){var a={};for(var l in t){var s=e.copy(t[l],o,n);t.hasOwnProperty(l)&&(a[l]=s)}return a}},e.mergeCheck=!1,e.merge=function(){e.mergeCheck||(z_d("12"),e.mergeCheck=!0);var t,o,n={};for(t=0;t<arguments.length;t++)for(o in arguments[t])arguments[t].hasOwnProperty(o)&&(n[o]=arguments[t][o]);return n},e.arraysEqual=function(t,o,n){if(z_d("11"),zot(t)||zot(o))return!1;if(zot(n)&&(n=!0),t.length!=o.length)return!1;for(var r=0;r<t.length;r++)if(t[r]instanceof Array&&o[r]instanceof Array){if(!e.arraysEqual(t[r],o[r],n))return!1}else{if(n&&t[r]!=o[r])return!1;if(!n)return e.arraysEqual(t.sort(),o.sort(),!0)}return!0},e.isEmpty=function(e){if(z_d("11.5"),!zot(e)){var t=0;for(var o in e){t++;break}return 0==t}},e.isJSON=function(e){z_d("11.6");try{return JSON.parse(e).constructor=={}.constructor}catch(e){return!1}},e.zut=function(e){if(zot(e)||"object"==typeof e)return!0},e.zimDecimalCheck=!1,e.decimals=function(t,o,n,r,i,a,l){if(e.zimDecimalCheck||z_d("13"),e.zimDecimalCheck=!0,zot(t))return 0;zot(o)&&(o=1),zot(n)&&(n=0),zot(r)&&(r=0),zot(r)&&(r=0),zot(i)&&(i=!0),zot(a)&&(a=!1);var s=Math.round(t*Math.pow(10,o))/Math.pow(10,o);if(a){var c=s-Math.floor(s);s=e.decimals(Math.floor(s)+60*c/100,2)}var u=e.sign(s);if(0<n){var d=String(s).indexOf("."),h=String(s).length;d<0&&(d=h++,s+=".");for(var g=0;g<n-(h-d-1);g++)s+="0"}if(0<r){-1==u&&(s=s.substr(1,s.length-1)),d=String(s).indexOf("."),h=String(s).length;var p=d<0?h:d;for(g=0;g<r-p;g++)s="0"+s;-1==u&&(s="-"+s)}return 0<n+r&&!i&&0==Number(s)&&(s=0),a&&(s=String(s).replace(".",":")),e.zut(l)?s:null},e.zimSignCheck=!1,e.sign=function(t){return e.zimSignCheck||z_d("13.1"),e.zimSignCheck=!0,t?t<0?-1:1:0},e.constrain=function(e,t,o,n){if(z_d("13.2"),!zot(e))return zot(t)&&(t=0),zot(o)&&(o=Number.MAX_VALUE),o<t&&(o=max2=t,t=max2),zot(n)&&(n=!1),n&&e<0?Math.max(-o,Math.min(e,-t)):Math.max(t,Math.min(e,o))},e.zimDistCheck=!1,e.dist=function(t,o,n,r){if(e.zimDistCheck||z_d("13.3"),e.zimDistCheck=!0,!zot(t)&&!zot(o))return zot(t.x)||zot(o.x)?(zot(n)&&(n=0),zot(r)&&(r=0)):(r=o.y,n=o.x,o=t.y,t=t.x),Math.sqrt(Math.pow(n-t,2)+Math.pow(r-o,2))},e.zimRectIntersectCheck=!1,e.rectIntersect=function(t,o,n){return e.zimRectIntersectCheck||z_d("13.32"),e.zimRectIntersectCheck=!0,zot(n)&&(n=0),!(t.x>=o.x+o.width+n||t.x+t.width+n<=o.x||t.y>=o.y+o.height+n||t.y+t.height+n<=o.y)},e.zimBoundsAroundPointsCheck=!1,e.boundsAroundPoints=function(t){e.zimBoundsAroundPointsCheck||z_d("13.34"),e.zimBoundsAroundPointsCheck=!0;for(var o=1e4,n=1e4,r=-1e4,i=-1e4,a=0;a<t.length;a++){var l=t[a];l.x<o&&(o=l.x),l.x>r&&(r=l.x),l.y<n&&(n=l.y),l.y>i&&(i=l.y)}return{x:o,y:n,width:r-o,height:i-n}},e.angle=function(e,t,o,n){if(z_d("13.4"),!zot(e)&&!zot(t))return zot(o)&&(o=e,e=0),zot(n)&&(n=t,t=0),(180*Math.atan2(n-t,o-e)/Math.PI+360)%360},e.TAU=2*Math.PI,e.DEG=180/Math.PI,e.RAD=Math.PI/180,e.smoothStep=function(t,o,n){z_d("13.7");var r=e.constrain((t-o)/(n-o),0,1);return r*r*r*(r*(6*r-15)+10)},e.Noise=function(e){"use strict";function t(e){var t=new Uint32Array(1);return t[0]=1664525*e[0]+1013904223,t}function o(e,t,o){this.dx=-t-e*l.SQUISH_2D,this.dy=-o-e*l.SQUISH_2D,this.xsb=t,this.ysb=o}function n(e,t,o,n){this.dx=-t-e*l.SQUISH_3D,this.dy=-o-e*l.SQUISH_3D,this.dz=-n-e*l.SQUISH_3D,this.xsb=t,this.ysb=o,this.zsb=n}function r(e,t,o,n,r){this.dx=-t-e*l.SQUISH_4D,this.dy=-o-e*l.SQUISH_4D,this.dz=-n-e*l.SQUISH_4D,this.dw=-r-e*l.SQUISH_4D,this.xsb=t,this.ysb=o,this.zsb=n,this.wsb=r}z_d("13.9"),zot(e)&&(e=1e6*Math.random());var i=e;this.seed=e;var a=this,l={};l.NORM_2D=1/47,l.NORM_3D=1/103,l.NORM_4D=1/30,l.SQUISH_2D=(Math.sqrt(3)-1)/2,l.SQUISH_3D=(Math.sqrt(4)-1)/3,l.SQUISH_4D=(Math.sqrt(5)-1)/4,l.STRETCH_2D=(1/Math.sqrt(3)-1)/2,l.STRETCH_3D=(1/Math.sqrt(4)-1)/3,l.STRETCH_4D=(1/Math.sqrt(5)-1)/4,l.base2D=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],l.base3D=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],l.base4D=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],l.gradients2D=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],l.gradients3D=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],l.gradients4D=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],l.lookupPairs2D=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],l.lookupPairs3D=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],l.lookupPairs4D=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],l.p2D=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],l.p3D=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],l.p4D=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];for(var s=[],c=0;c<l.p2D.length;c+=4){for(var u=l.base2D[l.p2D[c]],d=null,h=null,g=0;g<u.length;g+=3)h=new o(u[g],u[g+1],u[g+2]),null===d?s[c/4]=h:d.next=h,d=h;h.next=new o(l.p2D[c+1],l.p2D[c+2],l.p2D[c+3])}for(this.lookup2D=[],c=0;c<l.lookupPairs2D.length;c+=2)this.lookup2D[l.lookupPairs2D[c]]=s[l.lookupPairs2D[c+1]];var p=[];for(c=0;c<l.p3D.length;c+=9){for(u=l.base3D[l.p3D[c]],d=null,h=null,g=0;g<u.length;g+=4)h=new n(u[g],u[g+1],u[g+2],u[g+3]),null===d?p[c/9]=h:d.next=h,d=h;h.next=new n(l.p3D[c+1],l.p3D[c+2],l.p3D[c+3],l.p3D[c+4]),h.next.next=new n(l.p3D[c+5],l.p3D[c+6],l.p3D[c+7],l.p3D[c+8])}for(this.lookup3D=[],c=0;c<l.lookupPairs3D.length;c+=2)this.lookup3D[l.lookupPairs3D[c]]=p[l.lookupPairs3D[c+1]];var f=[];for(c=0;c<l.p4D.length;c+=16){for(u=l.base4D[l.p4D[c]],d=null,h=null,g=0;g<u.length;g+=5)h=new r(u[g],u[g+1],u[g+2],u[g+3],u[g+4]),null===d?f[c/16]=h:d.next=h,d=h;h.next=new r(l.p4D[c+1],l.p4D[c+2],l.p4D[c+3],l.p4D[c+4],l.p4D[c+5]),h.next.next=new r(l.p4D[c+6],l.p4D[c+7],l.p4D[c+8],l.p4D[c+9],l.p4D[c+10]),h.next.next.next=new r(l.p4D[c+11],l.p4D[c+12],l.p4D[c+13],l.p4D[c+14],l.p4D[c+15])}for(this.lookup4D=[],c=0;c<l.lookupPairs4D.length;c+=2)this.lookup4D[l.lookupPairs4D[c]]=f[l.lookupPairs4D[c+1]];this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);var m=new Uint8Array(256);for(c=0;c<256;c++)m[c]=c;for((e=new Uint32Array(1))[0]=i,e=t(t(t(e))),c=255;0<=c;c--){e=t(e);var z=new Uint32Array(1);z[0]=(e[0]+31)%(c+1),z[0]<0&&(z[0]+=c+1),this.perm[c]=m[z[0]],this.perm2D[c]=14&this.perm[c],this.perm3D[c]=this.perm[c]%24*3,this.perm4D[c]=252&this.perm[c],m[z[0]]=m[c]}this.simplex1D=function(e){return a.simplex2D(e,1)},this.simplex2D=function(e,t){var o=(e+t)*l.STRETCH_2D,n=[e+o,t+o],r=n[0],i=n[1],s=[Math.floor(r),Math.floor(i)],c=s[0],u=s[1],d=(c+u)*l.SQUISH_2D,h=[e-(c+d),t-(u+d)],g=h[0],p=h[1],f=[r-c,i-u],m=f[0],z=f[1],v=m+z,b=new Uint32Array(4);b[0]=m-z+1,b[1]=v,b[2]=v+z,b[3]=v+m;for(var y=b[0]|b[1]<<1|b[2]<<2|b[3]<<4,w=a.lookup2D[y],C=0;void 0!==w;){var x=[g+w.dx,p+w.dy],k=x[0],T=x[1],A=2-k*k-T*T;if(0<A){var P=[c+w.xsb,u+w.ysb],B=P[0],I=P[1],S=a.perm2D[a.perm[255&B]+I&255];C+=(A*=A)*A*(l.gradients2D[S]*k+l.gradients2D[S+1]*T)}w=w.next}return C*l.NORM_2D},this.simplex3D=function(e,t,o){var n=(e+t+o)*l.STRETCH_3D,r=[e+n,t+n,o+n],i=r[0],s=r[1],c=r[2],u=[Math.floor(i),Math.floor(s),Math.floor(c)],d=u[0],h=u[1],g=u[2],p=(d+h+g)*l.SQUISH_3D,f=[e-(d+p),t-(h+p),o-(g+p)],m=f[0],z=f[1],v=f[2],b=[i-d,s-h,c-g],y=b[0],w=b[1],C=b[2],x=y+w+C,k=new Uint32Array(7);k[0]=w-C+1,k[1]=y-w+1,k[2]=y-C+1,k[3]=x,k[4]=x+C,k[5]=x+w,k[6]=x+y;for(var T=k[0]|k[1]<<1|k[2]<<2|k[3]<<3|k[4]<<5|k[5]<<7|k[6]<<9,A=a.lookup3D[T],P=0;void 0!==A;){var B=[m+A.dx,z+A.dy,v+A.dz],I=B[0],S=B[1],M=B[2],E=2-I*I-S*S-M*M;if(0<E){var O=[d+A.xsb,h+A.ysb,g+A.zsb],j=O[0],L=O[1],D=O[2],Y=a.perm3D[a.perm[a.perm[255&j]+L&255]+D&255];P+=(E*=E)*E*(l.gradients3D[Y]*I+l.gradients3D[Y+1]*S+l.gradients3D[Y+2]*M)}A=A.next}return P*l.NORM_3D},this.simplex4D=function(e,t,o,n){var r=(e+t+o+n)*l.STRETCH_4D,i=[e+r,t+r,o+r,n+r],s=i[0],c=i[1],u=i[2],d=i[3],h=[Math.floor(s),Math.floor(c),Math.floor(u),Math.floor(d)],g=h[0],p=h[1],f=h[2],m=h[3],z=(g+p+f+m)*l.SQUISH_4D,v=e-(g+z),b=t-(p+z),y=o-(f+z),w=n-(m+z),C=[s-g,c-p,u-f,d-m],x=C[0],k=C[1],T=C[2],A=C[3],P=x+k+T+A,B=new Uint32Array(11);B[0]=T-A+1,B[1]=k-T+1,B[2]=k-A+1,B[3]=x-k+1,B[4]=x-T+1,B[5]=x-A+1,B[6]=P<<6,B[7]=P+A,B[8]=P+T,B[9]=P+k,B[10]=P+x;for(var I=B[0]|B[1]<<1|B[2]<<2|B[3]<<3|B[4]<<4|B[5]<<5|B[6]<<6|B[7]<<8|B[8]<<11|B[9]<<14|B[10]<<17,S=a.lookup4D[I],M=0;void 0!==S;){var E=[v+S.dx,b+S.dy,y+S.dz,w+S.dw],O=E[0],j=E[1],L=E[2],D=E[3],Y=2-O*O-j*j-L*L-D*D;if(0<Y){var X=[g+S.xsb,p+S.ysb,f+S.zsb,m+S.wsb],R=X[0],_=X[1],W=X[2],F=X[3],G=a.perm4D[a.perm[a.perm[a.perm[255&R]+_&255]+W&255]+F&255];M+=(Y*=Y)*Y*(l.gradients4D[G]*O+l.gradients4D[G+1]*j+l.gradients4D[G+2]*L+l.gradients4D[G+3]*D)}S=S.next}return M*l.NORM_4D}},e.Point=function(e,t,o,n,r,i,a,l,s,c){z_d("13.45"),zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=0),zot(i)&&(i=0),zot(a)&&(a=0),zot(l)&&(l=0),zot(s)&&(s=0),zot(c)&&(c=0),this.x=e,this.y=t,this.z=o,this.q=n,this.r=r,this.s=i,this.t=a,this.u=l,this.v=s,this.w=c},e.Boundary=function(e,t,o,n){z_d("13.46"),zot(e)||zot(t)||zot(o)||zot(n)||(this.x=e,this.y=t,this.width=o,this.height=n,this.contract=function(e,t,o,n){return zot(e)||(zot(t)&&(t=e),zot(o)?o=2*e:o+=e,zot(n)?n=2*t:n+=t,this.x+=e,this.y+=t,this.width-=o,this.height-=n),this})},e.Damp=function(t,o){z_d("14");var n;if(n=zob(e.Damp,arguments,"startValue, damp",this))return n;this.lastValue=zot(t)?0:t,this.damp=zot(o)?.1:o},e.Damp.prototype.convert=function(e){return this.lastValue=this.lastValue+(e-this.lastValue)*this.damp},e.Damp.prototype.immediate=function(e){return this.lastValue=e,this},e.Proportion=function(t,o,n,r,i,a,l){var s,c,u;if(s=zob(e.Proportion,arguments,"baseMin, baseMax, targetMin, targetMax, factor, targetRound, clamp",this))return s;z_d("15"),zot(n)&&(n=0),zot(r)&&(r=1),zot(i)&&(i=1),zot(a)&&(a=!1),zot(l)&&(l=!0),this.convert=function(e){if(!isNaN(e)&&o-t!=0)return l&&(e=Math.max(e,t),e=Math.min(e,o)),c=(e-t)/(o-t),u=0<i?n+(r-n)*c:r-(r-n)*c,a&&(u=Math.round(u)),u}},e.ProportionDamp=function(t,o,n,r,i,a,l,s){function c(){isNaN(d)||o-t==0||(s&&(d=Math.max(d,t),d=Math.min(d,o)),h=(d-t)/(o-t),g=r-n,m+=((p=0<a?n+g*h:r-g*h)-m)*f.damp)}var u;if(u=zob(e.ProportionDamp,arguments,"baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound, clamp",this))return u;z_d("16"),zot(n)&&(n=0),zot(r)&&(r=1),zot(i)&&(i=.1),zot(a)&&(a=1),zot(l)&&(l=!1),zot(s)&&(s=!0),this.damp=i;var d,h,g,p,f=this,m=0;d=t,m=n;var z=setInterval(c,20);this.immediate=function(e){return f.convert(e),c(),m=p,l&&(m=Math.round(m)),f},this.convert=function(e){return d=e,l?Math.round(m):m},this.dispose=function(){return clearInterval(z),!0}},e.Dictionary=function(e){z_d("17"),this.length=0,this.unique=e;var t=this.objects=[],o=this.values=[];this.add=function(e,n){zot(e)||(zot(n)&&(n=!0),this.unique&&this.remove(e),t.push(e),o.push(n),this.length++)},this.at=function(e){if(!zot(e)){var n=t.indexOf(e);return-1<n?o[n]:null}},this.remove=function(e){if(zot(e))return!1;var n=t.indexOf(e);return-1<n&&(t.splice(n,1),o.splice(n,1),this.length--,!0)},this.clear=function(){return t=this.objects=[],o=this.values=[],this.length=null,this},this.dispose=function(){return o=t=null,!(this.length=null)}},e.Hierarchy=function(t,o){function n(t){var o=[],n=[];return function t(r,i){e.loop(r,function(e,r){o.push(r.obj),n.push(e),r.open&&t(r.list,i+1)})}(t,0),[o,n]}z_d("17.5");var r,i=this;zot(t)||(zot(o)&&(o=!1),i.processSimple=function(n){var i=0,a={};return function t(n,r,a,l){var s;n.constructor=={}.constructor?(n.list&&(n=(s=n).list),l&&s&&e.loop(s,function(e,t){"list"!=e&&(l[e]=t)}),e.loop(n,function(e,n){var l={},s=r["id"+i]={obj:e,level:a,open:o,opened:!1,list:l};i++,t(n,l,a+1,s)})):Array.isArray(n)&&e.loop(n,function(e){r["id"+i]={obj:e},i++})}(t,a,0),r=i,a},i.processComplex=function(t){var n=0;return function t(r,i){e.loop(r,function(e,r){r.level=i,zot(r.open)&&(r.open=o),zot(r.opened)&&(r.opened=!1),r.list&&t(r.list,i+1),n++})}(t,0),r=n,t},zot(t.id0)?i.data=i.processSimple(t):i.data=i.processComplex(t),i.getLinearList=function(e){return zot(e)&&(e=i.data),n(e)[0]},i.getLinearIDs=function(e){return zot(e)&&(e=i.data),n(e)[1]},i.getData=function(t){var o;return function n(r){e.loop(r,function(e,r){if(e==t)return o=r;n(r.list)})}(i.data),o},i.getNextSibling=function(t){var o,n;return function r(i){e.loop(i,function(e,i){if(!n&&o)return n=e;e==t?o=i:r(i.list)})}(i.data),n},i.getPrevSibling=function(t){var o=[];return function n(r,i){e.loop(r,function(e,r){if(e==t)return o[i]||o[i-1];o[i]=e,n(r.list,i+1)})}(i.data,0),answer},Object.defineProperty(i,"length",{get:function(){return r},set:function(e){zon&&zog("Hierarchy.length is read only")}}))},e.pickCheck=!1,e.Pick=function(t){e.pickCheck||(z_d("17.6"),e.pickCheck=!0),this.choices=t,this.num=function(t){for(var o=[],n=0;n<t;n++)o.push(e.Pick.choose(this));return this.choices=e.Pick.series(o),this};var o=this;this.loop=function(t,n){for(var r,i=0;i<t;i++)if(void 0!==(r=n(e.Pick.choose(o),i,t)))return r}},e.Pick.prototype.type="Pick",e.Pick.series=function(){return e.pickCheck||(z_d("17.6"),e.pickCheck=!0),e.series.apply(null,arguments)},e.Pick.rand=function(t,o,n,r){return e.pickCheck||(z_d("17.6"),e.pickCheck=!0),e.rand(t,o,n,r)},e.Pick.choose=function(t,o,n){if(e.pickCheck||(z_d("17.6"),e.pickCheck=!0),null==o&&(o=!0),null==t)return t;if("Pick"==t.type||o){var r=t.choices||t;if(Array.isArray(r)){var i=r[Math.floor(Math.random()*r.length)];return e.Pick.choose(i)}return r.constructor==={}.constructor?zot(r.noPick)?zot(r.max)?r:(zot(r.integer)&&(r.integer=!1),i=e.Pick.rand(r.min,r.max,r.integer,r.negative)):r.noPick:"function"==typeof r?e.Pick.choose(r(n)):t}return t},e.scrollX=function(t,o){return z_d("18"),e.abstractScroll("X","Left",t,o)},e.scrollY=function(t,o){return z_d("19"),e.abstractScroll("Y","Top",t,o)},e.abstractScroll=function(t,o,n,r){z_d("20");var i="X"==t?"Y":"X";if(zot(n)){navigator.applicationName;return navigator.userAgent.indexOf("Safari"),document.documentElement&&document.documentElement["scroll"+o]||document.body["scroll"+o]}if(zot(r))window.scrollTo(e["scroll"+i](),n);else{r<50&&(r=50);var a=r/50,l=e["scroll"+t](),s=(n-l)/a,c=0,u=setInterval(function(){c++,l+=s,window.scrollTo(e["scroll"+i](),l),a<=c&&(window.scrollTo(e["scroll"+i](),n),clearInterval(u))},50)}return n},e.windowWidth=function(){z_d("21");var t=isNaN(window.innerWidth)?window.clientWidth:window.innerWidth,o=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight;if(e.mobile()&&!zot(window.orientation)&&(o<t&&90!=Math.abs(window.orientation)||t<o&&90==Math.abs(window.orientation))){var n=t;t=o,o=n}return void 0!==zimDefaultFrame&&zimDefaultFrame.swapRotation?o:t},e.windowHeight=function(){z_d("22");var t=isNaN(window.innerWidth)?window.clientWidth:window.innerWidth,o=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight;if(e.mobile()&&!zot(window.orientation)&&(o<t&&90!=Math.abs(window.orientation)||t<o&&90==Math.abs(window.orientation))){var n=t;t=o,o=n}return void 0!==zimDefaultFrame&&zimDefaultFrame.swapRotation?t:o},e.getQueryString=function(e){if(z_d("22.5"),zot(e)&&(e=location.search.replace("?","")),""!=e){for(var t=e.split("&"),o={},n=0;n<t.length;n++){var r=t[n].split("=");void 0===o[r[0]]?o[r[0]]=decodeURIComponent((r[1]+"").replace(/\+/g,"%20")):"string"==typeof o[r[0]]?o[r[0]]=[o[r[0]],decodeURIComponent((r[1]+"").replace(/\+/g,"%20"))]:o[r[0]].push(decodeURIComponent((r[1]+"").replace(/\+/g,"%20")))}return o}},e.swapHTML=function(t,o){return z_d("17.2"),e.swapProperties("innerHTML",zid(t),zid(o))},e.urlEncode=function(e){return z_d("23"),e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},e.urlDecode=function(e){return z_d("24"),decodeURIComponent((e+"").replace(/\+/g,"%20"))},e.setCookie=function(e,t,o){if(z_d("25"),!zot(e)&&!zot(t)){if(o){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);var r="; expires="+n.toGMTString()}else r="";return document.cookie=e+"="+escape(t)+r+"; path=/",!0}},e.getCookie=function(e){z_d("26");var t,o=document.cookie.split(/;\s*/),n=new Array;for(l=0;l<o.length;l++)n[(t=o[l].split("="))[0]]=t[1];if(void 0!==n[e])return unescape(n[e])},e.deleteCookie=function(t){return z_d("27"),!zot(e.getCookie(t))&&(e.setCookie(t,"",-1),!0)},"undefined"==typeof createjs)return zon&&zog("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),e;e.coordinatesCheck=!1,e.localToGlobal=function(t,o,n,r){if(e.coordinatesCheck||(z_d("50.43"),e.coordinatesCheck=!0),null!=t&&null!=o){var i=r.call(n,t,o),a=n.stage;if(void 0===zimDefaultFrame){if(!a)return i;zimDefaultFrame={stage:a,canvas:a.canvas}}return a=a||zimDefaultFrame.stage,i.x/=a&&a.scaleX?a.scaleX:1,i.y/=a&&a.scaleY?a.scaleY:1,i}},e.globalToLocal=function(t,o,n,r){if(e.coordinatesCheck||(z_d("50.43"),e.coordinatesCheck=!0),null!=t&&null!=o){var i=n.stage;if(void 0===zimDefaultFrame){if(!i)return r.call(n,t,o);zimDefaultFrame={stage:i,canvas:i.canvas}}return t*=(i=i||zimDefaultFrame.stage).scaleX,o*=i.scaleY,r.call(n,t,o)}},e.localToLocal=function(t,o,n,r){if(e.coordinatesCheck||(z_d("50.43"),e.coordinatesCheck=!0),null!=t&&null!=o&&null!=n){var i=r.localToGlobal(t,o),a=r.stage;if(void 0===zimDefaultFrame){if(!a)return n.globalToLocal(i.x,i.y);zimDefaultFrame={stage:a,canvas:a.canvas}}return n==(a=a||zimDefaultFrame.stage)?i:i?n.globalToLocal(i.x,i.y):void 0}},e.Stage=function(t){if(z_d("50.44"),!zot(t)){var o="CANVAS"==t.tagName?t:zid(t);zot(o)||(this.cjsStage_constructor(t),this.setBounds(0,0,o.width,o.height),this.type="Stage",this.cache=function(e,t,o,n,r,i){if(zot(o))if(zot(e)){var a=this.getBounds();if(!zot(a)){var l=0<this.borderWidth?this.borderWidth/2:0;e=a.x-l,t=a.y-l,o=a.width+2*l,n=a.height+2*l}}else o=e,n=t,t=e=0;return this.cjsStage_cache(e,t,o,n,r,i),this},this.loop=function(t,o,n,r,i){return e.loop(this,t,o,n,r,i)},this.hitTestGrid=function(t,o,n,r,i,a,l,s,c,u,d,h){return e.hitTestGrid(this,t,o,n,r,i,a,l,s,c,u,d,h)},this.localToGlobal=function(t,o){return e.localToGlobal(t,o,this,this.cjsStage_localToGlobal)},this.globalToLocal=function(t,o){return e.globalToLocal(t,o,this,this.cjsStage_globalToLocal)},this.localToLocal=function(t,o,n){return e.localToLocal(t,o,n,this)})}},e.extend(e.Stage,createjs.Stage,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStage",!1),e.StageGL=function(t,o){if(z_d("50.45"),!zot(t)){var n="CANVAS"==t.tagName?t:zid(t);zot(n)||(this.cjsStageGL_constructor(t,o),this.setBounds(0,0,n.width,n.height),this.type="StageGL",this.cache=function(e,t,o,n,r,i){if(zot(o))if(zot(e)){var a=this.getBounds();if(!zot(a)){var l=0<this.borderWidth?this.borderWidth/2:0;e=a.x-l,t=a.y-l,o=a.width+2*l,n=a.height+2*l}}else o=e,n=t,t=e=0;return this.cjsStageGL_cache(e,t,o,n,r,i),this},this.loop=function(t,o,n,r,i){return e.loop(this,t,o,n,r,i)},this.hitTestGrid=function(t,o,n,r,i,a,l,s,c,u,d,h){return e.hitTestGrid(this,t,o,n,r,i,a,l,s,c,u,d,h)},this.localToGlobal=function(t,o){return e.localToGlobal(t,o,this,this.cjsStageGL_localToGlobal)},this.globalToLocal=function(t,o){return e.globalToLocal(t,o,this,this.cjsStageGL_globalToLocal)},this.localToLocal=function(t,o,n){return e.localToLocal(t,o,n,this)})}},e.extend(e.StageGL,createjs.StageGL,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStageGL",!1),e.containerCheck=!1,e.Container=function(t,o,n,r,a,l,s){function c(e,t,o,n){var r=[];return zot(e)?r=[e,t,o,n]:zot(o)?(r[0]=0,r[2]=e,r[1]=0,r[3]=t):(r[0]=e,r[2]=o,r[1]=t,r[3]=n),zot(r[3])&&(r[3]=r[2]),r}var u;if(u=zob(e.Container,arguments,"a, b, c, d, style, group, inherit",this))return u;e.containerCheck||(z_d("50.5"),e.containerCheck=!0),this.cjsContainer_constructor(),this.type="Container",this.group=l;var d=this,h=!1===a?{}:e.getStyle(this.type,this.group,s);zot(t)&&(t=null!=h.a?h.a:null),zot(o)&&(o=null!=h.b?h.b:null),zot(n)&&(n=null!=h.c?h.c:null),zot(r)&&(r=null!=h.d?h.d:null);var g=c(t,o,n,r);zot(t)||this.setBounds(g[0],g[1],g[2],g[3]),this.cache=function(e,t,o,n,r,i,a){var l;if(l=zob(d.cache,arguments,"a,b,c,d,scale,options,margin"))return l;var s=d.getBounds();if(zot(o))if(zot(e)){if(!zot(s)){var c=0<d.borderWidth?d.borderWidth/2:0;e=s.x-c,t=s.y-c,o=s.width+2*c,n=s.height+2*c}}else o=e,n=t,t=e=0;return"Triangle"==d.type&&(e-=d.borderWidth?d.borderWidth:0,o+=d.borderWidth?2*d.borderWidth:0,t-=d.borderWidth?d.borderWidth:0,n+=d.borderWidth?2*d.borderWidth:0),zot(a)&&(a=0),d.cjsContainer_cache(e-a,t-a,o+2*a,n+2*a,r,i),s&&d.setBounds(s.x,s.y,s.width,s.height),d},this.localToGlobal=function(t,o){return e.localToGlobal(t,o,this,this.cjsContainer_localToGlobal)},this.globalToLocal=function(t,o){return e.globalToLocal(t,o,this,this.cjsContainer_globalToLocal)},this.localToLocal=function(t,o,n){return e.localToLocal(t,o,n,this)},!(this.setBounds=function(e,t,o,n){var r=c(e,t,o,n);return this.cjsContainer_setBounds(r[0],r[1],r[2],r[3]),this})!==a&&i(this,h),this.clone=function(){var t=this.getBounds();return zot(t)&&(t={x:null,y:null,width:null,height:null}),this.cloneChildren(this.cloneProps(new e.Container(t.x,t.y,t.width,t.height,a,this.group,s)))},this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)}},e.Container.prototype.dispose=function(){return function e(t){if(t.removeAllEventListeners(),t.numChildren)for(var o=t.numChildren-1;0<=o;o--)e(t.getChildAt(o));t.parent&&t.parent.removeChild(t)}(this),!0},zimify(e.Container.prototype),e.extend(e.Container,createjs.Container,["cache","setBounds","clone","localToLocal","localToGlobal","globalToLocal"],"cjsContainer",!1),e.Shape=function(t,o,n,r,a,l,s,c,u){function d(e,t,o,n){var r=[];return zot(o)?(r[0]=0,r[2]=e,r[1]=0,r[3]=t):(r[0]=e,r[2]=o,r[1]=t,r[3]=n),zot(r[3])&&(r[3]=r[2]),r}var h;if(h=zob(e.Shape,arguments,"a, b, c, d, graphics, optimize, style, group, inherit",this))return h;z_d("50.6"),this.cjsShape_constructor(a),this.type="Shape",this.group=c;var g=!1===s?{}:e.getStyle(this.type,this.group,u),p=this;zot(t)&&(t=null!=g.a?g.a:null),zot(o)&&(o=null!=g.b?g.b:null),zot(n)&&(n=null!=g.c?g.c:null),zot(r)&&(r=null!=g.d?g.d:null),zot(a)&&(a=null!=g.graphics?g.graphics:null),zot(l)&&(l=null!=g.optimize&&g.optimize);var f=d(t,o,n,r);if(zot(t)||this.setBounds(f[0],f[1],f[2],f[3]),!l)for(var m=["mt","lt","a","at","bt","qt","cp","c","f","lf","rf","bf","ef","ss","sd","s","ls","rs","bs","es","dr","rr","rc","dc","de","dp","p"],z=0;z<m.length;z++)!function(){var e=z;p[m[e]]=function(){return p.graphics[m[e]].apply(p.graphics,arguments),p}}();Object.defineProperty(p,"command",{get:function(){return p.graphics.command},set:function(e){}}),this.cache=function(e,t,o,n,r,i,a){var l;if(l=zob(p.cache,arguments,"a,b,c,d,scale,options,margin"))return l;var s=p.getBounds();if(zot(o))if(zot(e)){if(!zot(s)){var c=0<p.borderWidth?p.borderWidth/2:0;e=s.x-c,t=s.y-c,o=s.width+2*c,n=s.height+2*c}}else o=e,n=t,t=e=0;return zot(a)&&(a=0),p.cjsShape_cache(e-a,t-a,o+2*a,n+2*a,r,i),p},!(this.setBounds=function(e,t,o,n){var r=d(e,t,o,n);return this.cjsShape_setBounds(r[0],r[1],r[2],r[3]),this})!==s&&i(this,g),this.clone=function(t){zot(t)&&(t=!0);var o=this.getBounds();zot(o)&&(o={x:null,y:null,width:null,height:null});var n=p.cloneProps(new e.Shape(o.x,o.y,o.width,o.height,a,s,c,u));return n.graphics=t?p.graphics.clone():p.graphics,n},this.localToGlobal=function(t,o){return e.localToGlobal(t,o,this,this.cjsShape_localToGlobal)},this.globalToLocal=function(t,o){return e.globalToLocal(t,o,this,this.cjsShape_globalToLocal)},this.localToLocal=function(t,o,n){return e.localToLocal(t,o,n,this)},this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},this.dispose=function(){this.graphics.c(),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.Shape,createjs.Shape,["cache","clone","setBounds","localToLocal","localToGlobal","globalToLocal"],"cjsShape",!1),zimify(e.Shape.prototype),e.Bitmap=function(t,o,n,r,a,l,s){var c;if(c=zob(e.Bitmap,arguments,"image, width, height, id, style, group, inherit",this))return c;z_d("50.7"),this.cjsBitmap_constructor(t);var u=this;this.type="Bitmap",this.group=l;var d,h=!1===a?{}:e.getStyle(this.type,this.group,s);this.id=u.fileID=null!=h.id?h.id:r,zot(o)&&(o=null!=h.width?h.width:null),zot(n)&&(n=null!=h.height?h.height:null),zot(o)||zot(n)||u.setBounds(0,0,o,n),zot(o)&&(o=100),zot(n)&&(n=100),zimDefaultFrame&&(zimDefaultFrame.canvas.getContext("2d")?this.imageData=zimDefaultFrame.canvas.getContext("2d").createImageData(o,n):this.imageData=document.createElement("canvas").getContext("2d").createImageData(o,n),this.drawImageData=function(e,r,i,a,l,s){if(zot(e)&&(e=0),zot(r)&&(r=0),zot(i)&&(i=0),zot(a)&&(a=0),zot(l)&&(l=o),zot(s)&&(s=n),!u.proxyCanvas){var c=u.proxyCanvas=document.createElement("canvas");c.setAttribute("width",o),c.setAttribute("height",n),u.proxyContext=c.getContext("2d"),t=u.image=c}u.proxyContext&&u.proxyContext.putImageData(u.imageData,e,r,i,a,l,s)},zot(t)&&u.drawImageData(),t.match&&t.match(/data:image/i)&&setTimeout(function(){u.stage&&u.stage.update(),setTimeout(function(){u.stage&&u.stage.update()},50)},50)),!(this.cache=function(e,t,o,n,r,i){if(zot(o))if(zot(e)){if(!zot(l=this.getBounds())){var a=0<this.borderWidth?this.borderWidth/2:0;e=l.x-a,t=l.y-a,o=l.width+2*a,n=l.height+2*a}}else o=e,n=t,t=e=0;var l=this.getBounds();return this.cjsBitmap_cache(e,t,o,n,r,i),this.setBounds(l.x,l.y,l.width,l.height),this})!==a&&i(this,h),this.clone=function(){return this.cloneProps(new e.Bitmap(t,null,null,u.fileID,a,this.group,s))},this.localToGlobal=function(t,o){return e.localToGlobal(t,o,this,this.cjsBitmap_localToGlobal)},this.globalToLocal=function(t,o){return e.globalToLocal(t,o,this,this.cjsBitmap_globalToLocal)},this.localToLocal=function(t,o,n){return e.localToLocal(t,o,n,this)},this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},this.getColorAt=function(e,t){d||(u.cache(),d=u.cacheCanvas.getContext("2d"),u.uncache());var o=d.getImageData(e,t,1,1).data;return"rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+")"},this.dispose=function(){this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.Bitmap.fromData=function(t,o){var n=new e.Bitmap(t);setTimeout(function(){o(n)},50)},e.extend(e.Bitmap,createjs.Bitmap,["cache","clone","localToLocal","localToGlobal","globalToLocal"],"cjsBitmap",!1),zimify(e.Bitmap.prototype),e.Sprite=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y){function w(e,t,o){var n={images:[e.image],frames:t,animations:o||[]};x=new createjs.SpriteSheet(n)}var C;if(C=zob(e.Sprite,arguments,"image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet, label, style, group, inherit",this))return C;z_d("50.8"),this.type="Sprite",this.group=b;var x,k=!1===v?{}:e.getStyle(this.type,this.group,y),T=this;if(zot(g)&&!zot(t)){zot(o)&&(o=null!=k.cols?k.cols:1),zot(n)&&(n=null!=k.rows?k.rows:1),zot(r)&&(r=null!=k.count?k.count:o*n),zot(a)&&(a=null!=k.offsetX?k.offsetX:0),zot(l)&&(l=null!=k.offsetY?k.offsetY:0),zot(s)&&(s=null!=k.spacingX?k.spacingX:0),zot(c)&&(c=null!=k.spacingY?k.spacingY:0),zot(u)&&(u=null!=k.width?k.width:t.width),zot(d)&&(d=null!=k.height?k.height:t.height);var A=(u-a+s)/o-s,P=(d-l+c)/n-c,B=[],I=0;e:for(var S=0;S<n;S++)for(var M=0;M<o;M++){if(++I>r)break e;B.push([a+M*(A+s),l+S*(P+c),A,P])}w(t,B,h)}else if(m)h=(x=m).animations;else{if(!g)return;if(B=g.frames,h=g.animations,zot(t)){var E=g.images?g.images[0]:null;if(E.split){var O=E.split("/").pop();"EmptyAsset"!=frame.asset(O).type?w(frame.asset(O),B,h):"EmptyAsset"!=frame.asset(E).type?(frame.asset(E),w(frame.asset(E),B,h)):x=new createjs.SpriteSheet(g)}else x=new createjs.SpriteSheet(g)}else w(t,B,h)}this.animations=h,this.cjsSprite_constructor(x,z),zot(z)||this.stop(),zot(p)&&(p=e.makeID()),this.id=p,zot(f)&&(f=!0),T.globalControl=f;var j,L=0;this.parseFrames=function(t,o,n,r){function i(e){Array.isArray(e)?function(e){a(e[0],e[1],e[3]),e[2]&&!zot(T.animations[e[2]])&&i(T.animations[e[2]])}(e):e.constructor=={}.constructor?function(e){if(!zot(e.frames)){zot(e.speed)&&(e.speed=1);for(var t=0;t<e.frames.length;t++)e.speed<s&&(s=e.speed),e.speed>c&&(c=e.speed),l.push({f:e.frames[t],s:e.speed});e.next&&!zot(T.animations[e.next])&&i(T.animations[e.next])}}(e):isNaN(e)||l.push({f:Math.floor(e),s:1})}function a(e,t,o){function n(e){o<s&&(s=o),c<o&&(c=o),l.push({f:e,s:o})}if(zot(o)&&(o=1),e<t)for(var r=e;r<=t;r++)n(r);else for(r=t;r<=e;r++)n(e-(r-t))}var l=[],s=Number.MAX_VALUE,c=0;if(zot(t))zot(o)&&(o=0),zot(n)&&(n=T.totalFrames-1),a(o,n);else{if(zot(T.animations)||zot(T.animations[t]))return[];i(T.animations[t])}if(r)return l;s=e.constrain(e.decimals(s),.1),c=e.constrain(e.decimals(c),.1);for(var u,d=[],h=s!=c,g=0;g<l.length;g++)if(u=l[g],h)for(var p=0;p<e.constrain(Math.round(s<1?u.s/s:u.s),.1);p++)d.push(u.f);else d.push(u.f);return d},this.run=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,A){function P(){j=T.parseFrames(o,w,C),L=0,T.gotoAndStop(j[L]),w=C=null,I={normalizedFrame:j.length-1}}var B,I;if(B=zob(this.run,arguments,"time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, startFrame, endFrame, tweek, id, globalControl"))return B;if(zot(x)&&(x=1),zot(k)||(T.id=k),zot(A)||(T.globalControl=A),Array.isArray(o)){var S,M;I=[];for(var E,O=0,D=0;D<o.length;D++){(S=o[D]).lookup=T.parseFrames(S.label,S.startFrame,S.endFrame),0==D&&(E=S.lookup[0]),delete S.startFrame,delete S.endFrame,S.obj=e.merge(S.obj,{normalizedFrame:S.lookup.length-1}),S.set=e.merge(S.set,{normalizedFrames:{noPick:S.lookup},normalizedFrame:0}),zot(S.wait)&&(S.wait=O*x),M=S.label,delete S.label,I.push(S),O=0;var Y=zot(S.time)?t:S.time;0<C-w&&(O=Y/(C-w)/2)}if(0==I.length)return this;1==I.length?(t=I[0].time,o=M,P()):T.gotoAndStop(E)}else P();return zot(t)&&(t=1e3),T.running&&T.stopAnimate(T.id),T.running=!0,Array.isArray(I)||(O=0,0<C-w&&(O=t/Math.abs(C-w)/2),j&&0<j.length&&(O=t/j.length/2),zot(u)&&(u=O*x),zot(m)&&(m=O*x)),e.animate({target:T,obj:I,time:t,ease:"linear",call:function(){n&&"function"==typeof n&&n(r||T),T.running=!1,T.stop()},params:r,wait:i,waitedCall:a,waitedParams:l,loop:s,loopCount:c,loopWait:u,loopCall:d,loopParams:h,loopWaitCall:g,loopWaitParams:p,rewind:f,rewindWait:m,rewindCall:z,rewindParams:v,rewindWaitCall:b,rewindWaitParams:y,override:!1,id:T.id}),T.runPaused=!1,T},this.runPaused=!0,this.pauseRun=function(t){return zot(t)&&(t=!0),T.runPaused=t,T.globalControl?e.pauseAnimate(t,T.id):T.pauseAnimate(t,T.id),T},this.stopRun=function(){return T.runPaused=!0,T.running=!1,T.globalControl?e.stopAnimate(T.id):T.stopAnimate(T.id),T},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(e){e=Math.round(e),this.paused?this.gotoAndStop(e):this.gotoAndPlay(e)}}),Object.defineProperty(this,"normalizedFrame",{get:function(){return L},set:function(e){L=Math.round(e),this.gotoAndStop(j[L])}}),Object.defineProperty(this,"normalizedFrames",{get:function(){return j},set:function(e){j=e}}),Object.defineProperty(this,"totalFrames",{get:function(){return x.getNumFrames()},set:function(e){zog("zim.Sprite - totalFrames is read only")}}),!1!==v&&i(this,k),this.clone=function(){return this.cloneProps(new e.Sprite(t,o,n,r,a,l,s,c,u,d,h,g,null,f,m,v,this.group,y))},this.localToGlobal=function(t,o){return e.localToGlobal(t,o,this,this.cjsSprite_localToGlobal)},this.globalToLocal=function(t,o){return e.globalToLocal(t,o,this,this.cjsSprite_globalToLocal)},this.localToLocal=function(t,o,n){return e.localToLocal(t,o,n,this)},this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},this.dispose=function(){this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.Sprite,createjs.Sprite,["clone","localToLocal","localToGlobal","globalToLocal"],"cjsSprite",!1),zimify(e.Sprite.prototype),e.MovieClip=function(t,o,n,r,a,l,s){var c;if(c=zob(e.MovieClip,arguments,"mode, startPosition, loop, labels, style, group, inherit",this))return c;z_d("50.9"),this.type="MovieClip",this.group=l;var u=!1===a?{}:e.getStyle(this.type,this.group,s);zot(t)&&(t=null!=u.mode?u.mode:null),zot(o)&&(o=null!=u.startPosition?u.startPosition:null),zot(n)&&(n=null!=u.loop?u.loop:null),zot(r)&&(r=null!=u.labels?u.labels:null),this.cjsMovieClip_constructor(t,o,n,r),!1!==a&&i(this,u),this.clone=function(){return this.cloneProps(new e.MovieClip(t,o,n,r,a,this.group,s))},this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},this.localToGlobal=function(t,o){return e.localToGlobal(t,o,this,this.cjsMovieClip_localToGlobal)},this.globalToLocal=function(t,o){return e.globalToLocal(t,o,this,this.cjsMovieClip_globalToLocal)},this.localToLocal=function(t,o,n){return e.localToLocal(t,o,n,this)},this.dispose=function(){this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},e.extend(e.MovieClip,createjs.MovieClip,["clone","localToLocal","localToGlobal","globalToLocal"],"cjsMovieClip",!1),zimify(e.MovieClip.prototype),e.SVGContainer=function(t,o,n,r,a,l,s,c){function u(e){var t,o,n,r,i,a=e.split(";");return loop(a,function(e){var a=(e=e.replace(/,/g,"")).split(":"),l=a[0].trim().toLowerCase(),s=a[1].trim().toLowerCase().replace("px","");"fill"==l&&(t=s),"stroke"==l&&(o=s),"stroke-width"==l&&(n=s),"opacity"==l&&(i=r=s),"fill-opacity"==l&&(r=s),"stroke-opacity"==l&&(i=s)}),[t,o,n,r,i]}function d(t,o){var i,l=g(o),s=l[0],c=l[1],u=l[2],d=(l[3],l[4],l[5]),p=l[6];if("circle"==t){var f=Number(o.getAttribute("r").trim()),m=.5523*f;i=n?new e.Circle(Number(o.getAttribute("r")),s,c,u):new e.Bloob(s,c,u,4,f,m,"mirror",null,r,null,null,null,null,null,null,null,null,null,null,a)}else if("rect"==t)if(n)i=new e.Rectangle(Number(o.getAttribute("width")),Number(o.getAttribute("height")),s,c,u,Number(o.getAttribute("rx")));else{var v=Number(o.getAttribute("width")),b=Number(o.getAttribute("height")),y=Number(o.getAttribute("rx")),w=Number(o.getAttribute("ry"));if(y&&w){var C=.5523*y,x=.5523*w;i=new e.Bloob(s,c,u,[[y,0,0,0,-C,0,0,0,"free"],[v-y,0,0,0,0,0,C,0,"free"],[v,w,0,0,0,-x,0,0,"free"],[v,b-w,0,0,0,0,0,x,"free"],[v-y,b,0,0,C,0,0,0,"free"],[y,b,0,0,0,0,-C,0,"free"],[0,b-w,0,0,0,x,0,0,"free"],[0,w,0,0,0,0,0,-x,"free"]],null,null,null,null,r,null,null,null,null,null,null,null,null,null,null,a)}else i=new e.Bloob(s,c,u,[[0,0],[v,0],[v,b],[0,b]],null,null,null,null,r,null,null,null,null,null,null,null,null,null,null,a)}else if("line"==t)i=new e.Squiggle(c,u,[[Number(o.getAttribute("x1")),Number(o.getAttribute("y1"))],[Number(o.getAttribute("x2")),Number(o.getAttribute("y2"))]],null,null,null,null,r,null,null,null,null,null,null,null,null,null,null,a);else if("polygon"==t||"polyline"==t){var T,A=o.getAttribute("points"),P=[];-1!=(A=(A=A.replace(/-/g," -")).replace(/\s+/g," ")).indexOf(",")?loop(A.split(" "),function(e){var t=e.split(",");P.push([Number(t[0].trim()),Number(t[1].trim())])}):loop(A.split(" "),function(e,t){(t+1)%2==0&&P.push([T,e.trim()]),T=e.trim()}),i="polygon"==t?new Bloob(s,c,u,P):new e.Squiggle(c,u,P,null,null,null,null,r,null,null,null,null,null,null,null,null,null,null,a)}else"ellipse"==t&&(i=new e.Bloob(s,c,u,function(e,t,o,n){var r=.5522848*o,i=.5522848*n,a=0+o,l=0+n;return[[0-o,0,0,0,0,l+i-n,0,0-i,"mirror"],[0,0-n,0,0,0-r,0,a+r-o,0,"mirror"],[a,0,0,0,0,0-i,0+r-r,l+i-n,"mirror"],[0,l,0,0,a-o+r,0,0-r,0,"mirror"]]}(0,0,Number(o.getAttribute("rx")),Number(o.getAttribute("ry"))),null,null,null,null,r,null,null,null,null,null,null,null,null,null,null,a));i.loc(d,p,z);var B=o.getAttribute("transform");(B||k)&&h(i,B||k),!a||"Rectangle"!=i.type&&"Circle"!=i.type||i.transform({showReg:!1,visible:r})}function h(e,t){var o=t.split(")");loop(o,function(t){if(""!=t){var o=t.trim().split("("),n=o[0].trim().toLowerCase(),r=o[1].trim().toLowerCase().replace("px","").replace("deg","");if("translate"==n){var i=r.split(",");e.mov(Number(i[0].trim()),i[1]?Number(i[1].trim()):0)}if("scale"==n){var a=r.split(",");"Bloob"==e.type||"Squiggle"==e.type?1==a.length?e.transformPoints("scale",Number(a[0].trim())):2==a.length&&(e.transformPoints("scaleX",Number(a[0].trim())),e.transformPoints("scaleY",Number(a[1].trim()))):1==a.length?e.sca(Number(a[0].trim())):2==a.length&&e.sca(Number(a[0].trim()),Number(a[1].trim()))}if("rotate"==n){var l=r.split(",");1==l.length?l.push(0,0):2==l.length&&l.push(0),e.rot(Number(l[0].trim()),Number(l[1].trim()),Number(l[2].trim()))}"skewX"==n&&(e.skewX=r),"skewY"==n&&(e.skewY=r)}})}function g(t){var o,n,r,i,a,l=t.getAttribute("style");if(l){var s=u(l);o=s[0],n=s[1],r=s[2],i=s[3],a=s[4]}o=t.getAttribute("fill")?t.getAttribute("fill"):zot(o)?A:o,n=t.getAttribute("stroke")?t.getAttribute("stroke"):zot(n)?B:n,r=t.getAttribute("stroke-width")?t.getAttribute("stroke-width"):zot(r)?I:r,i=t.getAttribute("fill-opacity")?t.getAttribute("fill-opacity"):zot(i)?S:i,a=t.getAttribute("stroke-opacity")?t.getAttribute("stroke-opacity"):zot(a)?M:a;var c=t.getAttribute("x")?t.getAttribute("x"):0;c=t.getAttribute("cx")?t.getAttribute("cx"):c;var d=t.getAttribute("y")?t.getAttribute("y"):0;return d=t.getAttribute("cy")?t.getAttribute("cy"):d,zot(i)||zot(o)||(o=e.convertColor(o,"rgba",Number(i))),zot(a)||zot(n)||(n=e.convertColor(n,"rgba",Number(a))),[o,n,Number(r),Number(i),Number(a),Number(c),Number(d)]}function p(t,n){function i(){E=S[S.length-1],2<=C.length&&("z"!=E&&"Z"!=E||(j="blob")),(l="squiggle"==j?new e.Squiggle(b,y,C,null,null,null,null,r,null,null,null,null,null,null,null,null,null,null,a):new e.Bloob(m,b,y,C,null,null,null,null,r,null,null,null,null,null,null,null,null,null,null,a)).loc(0,0,z),E=S[S.length-1],S[S.length-2],0<=u.indexOf(E)?(x[0]=C[C.length-1][0],x[1]=C[C.length-1][1],v.x=C[C.length-1][0],v.y=C[C.length-1][1],(C=[]).push([x[0],x[1]])):(x=[0,0],C=[[0,0]]),S=[],"z"!=E&&"Z"!=E&&S.push(E),d.x=0,d.y=0;var o=t.getAttribute("transform");(o||k)&&h(l,o||k)}zot(n)&&(n=!0);var l,s,c=["M","m","L","l","H","h","V","v","C","c","S","s","Q","q","T","t","A","a","z","Z"],u=["m","l","h","v","c","s","q","t","a","z"],d=new e.Point(0,0);if(zot(t.getAttribute))var p=t;else t.getAttribute("id"),p=t.getAttribute("d");if(p=(p=(p=(p=p.replace(/,/g," ")).replace(/([a-zA-Z])/g," $1 ")).replace(/-/g," -")).replace(/\s+/g," "),n){var f=g(t),m=f[0],b=f[1],y=f[2];f[3],f[4]}var w,C=[],x=[0,0],T=new e.Point(0,0),A=new e.Point(0,0,0,0),P=new e.Point(0,0,0,0,0,0),B=(new e.Point(0,0,0,0,0,0,0),p.split(" ")),I=B.slice(1,B.length),S=[],M=!1,E="",O=!1,j="squiggle",L=null;return e.loop(I,function(e,t){if(0==t&&(v.x=0,v.y=0,x=[0,0],E=""),-1==c.indexOf(e)){if("lxo"==w&&(w="lx",S.push("l"),M=!0),"lyo"==w&&(w="ly",M=!0),"Lxo"==w&&(w="Lx",S.push("L"),M=!0),"Lyo"==w&&(w="Ly",M=!0),s=Number(e),s=Math.round(100*s)/100,"X"==w?(v.x=s,w="Y"):"Y"==w?(v.y=s,w="Lxo",C.push([v.x,v.y])):"x"==w?(v.x=v.x+s,w="y"):"y"==w&&(v.y=v.y+s,w="lxo",C.push([v.x,v.y])),"H"==w||"h"==w?(d.x=C[C.length-1][0],d.y=C[C.length-1][1],d.x=d.x+("h"==w?s:s-v.x),C.push([d.x,d.y]),w="Lx"):"V"!=w&&"v"!=w||(d.x=C[C.length-1][0],d.y=C[C.length-1][1],d.y=d.y+("v"==w?s:s-v.y),C.push([d.x,d.y]),w="lx"),"Lx"==w?(T.x=s,w="Ly"):"Ly"==w?(T.y=s,d.x=T.x,d.y=T.y,C.push([d.x,d.y]),w="Lx"):"lx"==w?(0<S.length&&(0!=d.x&&0!=d.y?(v.x=d.x,v.y=d.y):(v.x=d.x+v.x,v.y=d.y+v.y)),T.x=v.x+s,w=M?"lyo":"ly"):"ly"==w&&(T.y=v.y+s,d.x=T.x,d.y=T.y,C.push([d.x,d.y]),w="lx"),"qx"==w||"Qx"==w)0<C.length?(v.x=C[C.length-1][0],v.y=C[C.length-1][1]):(v.x=0,v.y=0),A.x="qx"==w?v.x+s:s,w="qx"==w?"qy":"Qy";else if("qy"==w||"Qy"==w)A.y="qy"==w?v.y+s:s,w="qy"==w?"qz":"Qz",O&&(O=!1,(n=C[C.length-1])[6]=-n[4],n[7]=-n[5],n[8]="mirror",d.x=A.x,d.y=A.y,C[C.length]=[d.x,d.y,0,0,-n[6],n[7],0,0,"free"],w="qy"==w?"qx":"Qx");else if("qz"==w||"Qz"==w)A.z="qz"==w?v.x+s:s,w="qz"==w?"qq":"Qq";else if("qq"==w||"Qq"==w){A.w="qq"==w?v.y+s:s;var n=C[C.length-1];d.x=n[0],d.y=n[1],1==C.length?(n[2]=0,n[3]=0,n[4]=0,n[5]=0,n[6]=2/3*(A.x-d.x),n[7]=2/3*(A.y-d.y),n[8]="free"):C[C.length]=[d.x,d.y,0,0,0,0,2/3*(A.x-d.x),2/3*(A.y-d.y),"free"],d.x=A.z,d.y=A.w,C[C.length]=[d.x,d.y,0,0,2/3*(A.x-d.x),2/3*(A.y-d.y),0,0,"free"],w="qq"==w?"qx":"Qx"}"cx"==w||"Cx"==w?(0<C.length?(v.x=C[C.length-1][0],v.y=C[C.length-1][1]):(v.x=0,v.y=0),P.x="cx"==w?v.x+s:s,w="cx"==w?"cy":"Cy"):"cy"==w||"Cy"==w?(P.y="cy"==w?v.y+s:s,w="cy"==w?"cz":"Cz"):"cz"==w||"Cz"==w?(P.z="cz"==w?v.x+s:s,w="cz"==w?"cq":"Cq"):"cq"==w||"Cq"==w?(P.q="cq"==w?v.y+s:s,w="cq"==w?"cr":"Cr",O&&((n=C[C.length-1])[2]=0,n[3]=0,zot(n[4])&&(n[4]=0),zot(n[5])&&(n[5]=0),n[6]=-n[4],n[7]=-n[5],n[8]="mirror",d.x=P.z,d.y=P.q,C[C.length]=[d.x,d.y,0,0,P.x-d.x,P.y-d.y,0,0,"free"],w="cr"==w?"cx":"Cx")):"cr"==w||"Cr"==w?(P.r="cr"==w?v.x+s:s,w="cr"==w?"cs":"Cs"):"cs"!=w&&"Cs"!=w||(P.s="cs"==w?v.y+s:s,n=C[C.length-1],1==C.length&&(n[2]=0,n[3]=0,n[4]=0,n[5]=0),n[6]=P.x-n[0],n[7]=P.y-n[1],n[8]="free",d.x=P.r,d.y=P.s,C[C.length]=[d.x,d.y,0,0,P.z-d.x,P.q-d.y,0,0,"free"],w="cs"==w?"cx":"Cx")}else S.push(e),"s"!=e&&(O=!1),1<S.length&&("M"!=e&&"m"!=e||(i(),"M"==e?(v.x=0,v.y=0):(v.x=C[C.length-1][0],v.y=C[C.length-1][1]),C=[],(S=[]).push(e))),"M"==e?w="X":"m"==e?w="x":"L"==e?(w="Lx",o&&L&&"l"!=L&&i(),L="l"):"l"==e?(w="lx",o&&L&&"l"!=L&&i(),L="l"):"H"==e?(w="H",o&&L&&"l"!=L&&i(),L="l"):"h"==e?(w="h",o&&L&&"l"!=L&&i(),L="l"):"V"==e?(w="V",o&&L&&"l"!=L&&i(),L="l"):"v"==e?(w="v",o&&L&&"l"!=L&&i(),L="l"):"C"==e?(w="Cx",o&&L&&"c"!=L&&i(),L="c"):"c"==e?(w="cx",o&&L&&"c"!=L&&i(),L="c"):"S"==e?(O=!0,w="Cx",o&&L&&"c"!=L&&i(),L="c"):"s"==e?(O=!0,w="cx",o&&L&&"c"!=L&&i(),L="c"):"Q"==e?(w="Qx",o&&L&&"q"!=L&&i(),L="q"):"q"==e?(w="qx",o&&L&&"q"!=L&&i(),L="q"):"T"==e?(O=!0,w="Qx",o&&L&&"q"!=L&&i(),L="q"):"t"==e?(O=!0,w="qx",o&&L&&"q"!=L&&i(),L="q"):"A"==e?j=null:"z"!=e&&"Z"!=e||(j="blob")}),n&&i(),C}var f;if(f=zob(e.SVGContainer,arguments,"svg, splitTypes, geometric, showControls, interactive, style, group, inherit",this))return f;z_d("50.95"),this.group=s;var m=!1===l?{}:e.getStyle("SVGContainer",this.group,c),z=this,v=new e.Point(0,0);if(zot(o)&&(o=!1),zot(n)&&(n=!0),!zot(t)){if(zot(t.draggable))t.getAttribute||(b=new DOMParser,t=b.parseFromString(t,"image/svg+xml").documentElement),w=this.svg=t;else var b=new DOMParser,y=(t=t.innerHTML?b.parseFromString(t.innerHTML,"text/xml"):t).getElementsByTagName("svg"),w=this.svg=y?t.getElementsByTagName("svg")[0]:null;if(!zot(w))var C=w.getAttribute("width"),x=w.getAttribute("height");if(C=C&&Number(C.trim()),x=x&&Number(x.trim()),this.zimContainer_constructor(C,x),this.type="SVGContainer",zot(w))return;var k,T=e.black,A=e.black,P=e.black,B=e.black,I=2,S=1,M=1,E=t.getElementsByTagName("svg");0==E.length&&(E=[t]),function t(o){e.loop(o,function(e){var o=e.tagName.toLowerCase();if("path"==o&&p(e),"circle"==o&&d("circle",e),"rect"==o&&d("rect",e),"ellipse"==o&&d("ellipse",e),"line"==o&&d("line",e),"polygon"==o&&d("polygon",e),"polyline"==o&&d("polyline",e),"g"==o){var n,r,i,a,l,s=e.getAttribute("style");if(s){var c=u(s);n=c[0],r=c[1],i=c[2],a=c[3],l=c[4]}k=e.getAttribute("transform"),A=e.getAttribute("fill")?e.getAttribute("fill"):zot(n)?T:n,B=e.getAttribute("stroke")?e.getAttribute("stroke"):zot(r)?P:r,I=e.getAttribute("stroke-width")?e.getAttribute("stroke-width"):zot(i)?2:i,S=e.getAttribute("fill-opacity")?e.getAttribute("fill-opacity"):zot(a)?1:a,M=e.getAttribute("stroke-opacity")?e.getAttribute("stroke-opacity"):zot(l)?1:l}t(e.children),"g"==e.tagName.toLowerCase()&&(A=T,B=P,I=2,S=1,M=1,k=null)})}(E)}!(z.processPath=function(e){return p(e,!1)})!==l&&i(this,m),this.clone=function(){return z.cloneProps(new e.SVGContainer(t,o,n,r,a,l,this.group,c))}},e.extend(e.SVGContainer,e.Container,"clone","zimContainer",!1),e.Circle=function(t,o,n,r,a,l,s,c,u,d){function h(){B.c(),m.colorCommand=C=B.f(v).command,(zot(y)||0<y)&&(zot(b)&&zot(y)||(zot(b)&&(b="black"),m.borderColorCommand=x=B.s(b).command,m.borderWidthCommand=k=B.ss(y,s.caps,s.joints,s.miterLimit,s.ignoreScale).command,a&&(m.borderDashedCommand=T=B.sd([10,10],5).command)));var e=2*z;if("number"==typeof l&&0<=l&&l<100){var t=360*l/100/2;B.arc(0,0,z,(-t-90)*Math.PI/180,(t-90)*Math.PI/180,!1).cp(),e=z-Math.cos(t*Math.PI/180)*z}else B.dc(0,0,z);m.setBounds(-z,-z,2*z,e)}var g;if(g=zob(e.Circle,arguments,"radius, color, borderColor, borderWidth, dashed, percent, strokeObj, style, group, inherit",this))return g;z_d("51"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Circle",this.group=u;var p=!1===c?{}:e.getStyle(this.type,this.group,d);zot(t)&&(t=null!=p.radius?p.radius:50),zot(a)&&(a=null!=p.dashed&&p.dashed),zot(n)&&(n=null!=p.borderColor?p.borderColor:null),zot(r)&&(r=null!=p.borderWidth?p.borderWidth:null),n<0||r<0?n=r=null:null!=n&&null==r&&(r=1),zot(o)&&(o=null!=p.color?p.color:0<r?"rgba(0,0,0,0)":"black"),zot(l)&&(l=null!=p.percent?p.percent:100),zot(s)&&(s=null!=p.strokeObj?p.strokeObj:{});var f=function(){return arguments}(t,o,n,r,l);t=e.Pick.choose(t),o=e.Pick.choose(o),n=e.Pick.choose(n),r=e.Pick.choose(r),l=e.Pick.choose(l);var m=this,z=t,v=o,b=n,y=r;this.mouseChildren=!1;var w=this.shape=new createjs.Shape;this.addChild(w);var C,x,k,T,A,P,B=w.graphics;h(),Object.defineProperty(m,"color",{get:function(){return v},set:function(e){zot(e)&&(e="black"),v=e,C.style=v}}),this.setColorRange=function(e,t){return P=zot(t)?(A=m.color,e):(A=zot(e)?m.color:e,t),m};var I=0;Object.defineProperty(m,"colorRange",{get:function(){return I},set:function(t){I=t,zot(A)||zot(P)||(m.color=e.colorRange(A,P,t))}}),Object.defineProperty(m,"borderColor",{get:function(){return b},set:function(e){b=e,x?x.style=b:h()}}),Object.defineProperty(m,"borderWidth",{get:function(){return y},set:function(e){0<e||(e=0),y=e,k&&0!=y?(k.width=y,a&&(T.segments=[20,10],T.offset=5)):h()}}),Object.defineProperty(m,"radius",{get:function(){return z},set:function(e){z=e,h()}}),!1!==c&&i(this,p),this.linearGradient=function(e,t,o,n,r,i){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(e,t,o,n,r,i),this},this.radialGradient=function(e,t,o,n,r,i,a,l){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(e,t,o,n,r,i,a,l),this},this.clone=function(t){var o=m.cloneProps(t?new e.Circle(m.radius,m.color,m.borderColor,m.borderWidth,a,l,s,c,this.group,d):new e.Circle(f[0],f[1],f[2],f[3],a,f[4],c,this.group,d));return m.linearGradientParams&&o.linearGradient.apply(o,m.linearGradientParams),m.radialGradientParams&&o.radialGradient.apply(o,m.linearGradientParams),o}},e.extend(e.Circle,e.Container,"clone","zimContainer",!1),e.Rectangle=function(t,o,n,r,a,l,s,c,u,d,h){function g(){P.c(),z.colorCommand=C=P.f(v).command,(zot(y)||0<y)&&(zot(b)&&zot(y)||(zot(b)&&(b="black"),z.borderColorCommand=x=P.s(b).command,z.borderWidthCommand=k=P.ss(y,c.caps,c.joints,c.miterLimit,c.ignoreScale).command,s&&(z.borderDashedCommand=borderDashedObj=P.sd([10,10],5).command))),Array.isArray(l)?P.rc(0,0,t,o,l[0],l[1],l[2],l[3]):0<l?P.rr(0,0,t,o,l):P.r(0,0,t,o),z.setBounds(0,0,t,o)}var p;if(p=zob(e.Rectangle,arguments,"width, height, color, borderColor, borderWidth, corner, dashed, strokeObj, style, group, inherit",this))return p;z_d("52"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Rectangle",this.group=d;var f=!1===u?{}:e.getStyle(this.type,this.group,h);zot(t)&&(t=null!=f.width?f.width:null),zot(o)&&(o=null!=f.height?f.height:zot(t)?100:t),zot(t)&&(t=o),zot(l)&&(l=null!=f.corner?f.corner:0),zot(s)&&(s=null!=f.dashed&&f.dashed),zot(r)&&(r=null!=f.borderColor?f.borderColor:null),zot(a)&&(a=null!=f.borderWidth?f.borderWidth:null),r<0||a<0?r=a=null:null!=r&&null==a&&(a=1),zot(n)&&(n=null!=f.color?f.color:0<a?"rgba(0,0,0,0)":"black"),zot(c)&&(c=null!=f.strokeObj?f.strokeObj:{});var m=function(){return arguments}(t,o,n,r,a);t=e.Pick.choose(t),o=e.Pick.choose(o);var z=this,v=n=e.Pick.choose(n),b=r=e.Pick.choose(r),y=a=e.Pick.choose(a);this.mouseChildren=!1;var w=this.shape=new createjs.Shape;this.addChild(w);var C,x,k,T,A,P=w.graphics;g(),Object.defineProperty(z,"color",{get:function(){return v},set:function(e){zot(e)&&(e="black"),v=e,C.style=v}}),this.setColorRange=function(e,t){return A=zot(t)?(T=z.color,e):(T=zot(e)?z.color:e,t),z};var B=0;Object.defineProperty(z,"colorRange",{get:function(){return B},set:function(t){B=t,zot(T)||zot(A)||(z.color=e.colorRange(T,A,t))}}),Object.defineProperty(z,"borderColor",{get:function(){return b},set:function(e){b=e,x?x.style=b:g()}}),Object.defineProperty(z,"borderWidth",{get:function(){return y},set:function(e){0<e||(e=0),y=e,k&&0!=y?(k.width=y,s&&(borderDashedObj.segments=[20,10],borderDashedObj.offset=5)):g()}}),Object.defineProperty(z,"corner",{get:function(){return l},set:function(e){l=e,g()}}),this.linearGradient=function(e,t,o,n,r,i){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(e,t,o,n,r,i),this},!(this.radialGradient=function(e,t,o,n,r,i,a,l){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(e,t,o,n,r,i,a,l),this})!==u&&i(this,f),this.clone=function(n){var r=z.cloneProps(n?new e.Rectangle(t,o,z.color,z.borderColor,z.borderWidth,l,s,c,u,this.group,h):new e.Rectangle(m[0],m[1],m[2],m[3],m[4],l,s,c,u,this.group,h));return z.linearGradientParams&&r.linearGradient.apply(r,z.linearGradientParams),z.radialGradientParams&&r.radialGradient.apply(r,z.linearGradientParams),r}},e.extend(e.Rectangle,e.Container,"clone","zimContainer",!1),e.Triangle=function(t,o,n,r,a,l,s,c,u,d,h,g,p){function f(){j.c(),b.colorCommand=I=j.f(y).command,(zot(C)||0<C)&&(zot(w)&&zot(C)||(zot(w)&&(w="black"),b.borderColorCommand=S=j.s(w).command,b.borderWidthCommand=M=j.ss(C,d.caps,d.joints,d.miterLimit,d.ignoreScale).command,u&&(b.borderDashedCommand=borderDashedObj=j.sd([10,10],5).command))),j.mt(0,0),b.one={x:0,y:0},j.lt(t,0),b.two={x:t,y:0};var e=180*Math.acos((Math.pow(T,2)+Math.pow(A,2)-Math.pow(k,2))/(2*T*A))/Math.PI,n=180*Math.asin(T*Math.sin(e*Math.PI/180)/k)/Math.PI,r=[e,n,180-e-n];b.angles=[r[P[1]],r[P[2]],r[P[0]]];var i=b.angles[1],a=Math.cos(i*Math.PI/180)*o,l=Math.sin(i*Math.PI/180)*o,h=Math.max(t,t-a),g=l;b.setBounds(0,c,h,g),B.y=g,j.lt(t-a,0-l),b.three={x:t-a,y:0-l},j.cp(),s&&(b.regX=h/2,b.regY=g/2),c&&(b.shape.y+=c)}var m;if(m=zob(e.Triangle,arguments,"a, b, c, color, borderColor, borderWidth, center, adjust, dashed, strokeObj, style, group, inherit",this))return m;z_d("53"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Triangle",this.group=g;var z=!1===h?{}:e.getStyle(this.type,this.group,p);zot(t)&&(t=null!=z.a?z.a:100),zot(o)&&(o=null!=z.b?z.b:t),zot(n)&&(n=null!=z.c?z.c:o),-1==n&&(n=Math.sqrt(Math.pow(t,2)+Math.pow(o,2))),zot(s)&&(s=null==z.center||z.center),zot(c)&&(c=null!=z.adjust?z.adjust:0),zot(a)&&(a=null!=z.borderColor?z.borderColor:null),zot(l)&&(l=null!=z.borderWidth?z.borderWidth:null),a<0||l<0?a=l=null:null!=a&&null==l&&(l=1),zot(r)&&(r=null!=z.color?z.color:0<l?"rgba(0,0,0,0)":"black"),zot(c)&&(c=null!=z.adjust?z.adjust:0),zot(d)&&(d=null!=z.strokeObj?z.strokeObj:{});var v=function(){return arguments}(t,o,n,r,a,l);t=e.Pick.choose(t),o=e.Pick.choose(o),n=e.Pick.choose(n),this.a=t,this.b=o,this.c=n;var b=this,y=r=e.Pick.choose(r),w=a=e.Pick.choose(a),C=l=e.Pick.choose(l);this.mouseChildren=!1;var x=[t,o,n];x.sort(function(e,t){return t-e});var k=x[0],T=x[1],A=x[2],P=[x.indexOf(t),x.indexOf(o),x.indexOf(n)];if(T+A<k)zog("zim display - Triangle(): invalid triangle lengths");else{var B=this.shape=new createjs.Shape;this.adjusted=c,this.addChild(B);var I,S,M,E,O,j=B.graphics;f(),Object.defineProperty(b,"color",{get:function(){return y},set:function(e){zot(e)&&(e="black"),y=e,I.style=y}}),this.setColorRange=function(e,t){return O=zot(t)?(E=b.color,e):(E=zot(e)?b.color:e,t),b};var L=0;Object.defineProperty(b,"colorRange",{get:function(){return L},set:function(t){L=t,zot(E)||zot(O)||(b.color=e.colorRange(E,O,t))}}),Object.defineProperty(b,"borderColor",{get:function(){return w},set:function(e){w=e,S?S.style=w:f()}}),Object.defineProperty(b,"borderWidth",{get:function(){return C},set:function(e){0<e||(e=0),C=e,M&&0!=C?(M.width=C,u&&(borderDashedObj.segments=[20,10],borderDashedObj.offset=5)):f()}}),this.linearGradient=function(e,t,o,n,r,i){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(e,t,o,n,r,i),this},!(this.radialGradient=function(e,t,o,n,r,i,a,l){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(e,t,o,n,r,i,a,l),this})!==h&&i(this,z),this.clone=function(r){var i=b.cloneProps(r?new e.Triangle(t,o,n,b.color,b.borderColor,b.borderWidth,s,c,u,d,h,this.group,p):new e.Triangle(v[0],v[1],v[2],v[3],v[4],v[5],s,c,u,d,h,this.group,p));return b.linearGradientParams&&i.linearGradient.apply(i,b.linearGradientParams),b.radialGradientParams&&i.radialGradient.apply(i,b.linearGradientParams),i}}},e.extend(e.Triangle,e.Container,"clone","zimContainer"),e.Squiggle=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k){function T(){function t(e){if(!W.lockControlType){var t=e.target,o=X[t.index][4]?X[t.index][4]:l;Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=W.types[(W.types.indexOf(o)+(W.shiftKey?-1:1)+W.types.length)%W.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),X[t.index][4]=o,t.rect1.color=h(o),t.rect2.color=h(o),Q();var n=new createjs.Event("change");n.controlType="bezierSwitch",W.dispatchEvent(n),t.stage.update()}}function h(t){var o={straight:e.pink,free:e.yellow,none:e.blue};return o[t]?o[t]:e.purple}function b(t){if("Circle"==t.target.type){var o=W.lastSelectedIndex=W.controls.getChildIndex(t.target.parent);if(W.controls.numChildren<=2)return;var n=W.points;W.selectPoints&&(W.lastPoints=e.copy(n)),n.splice(o,1),W.points=n,W.stage.update(),W.lastSelected=W.lastSelectedIndex=null}}J&&J.removeAllEventListeners(),W.num=L="number"==typeof n?n:n.length,L=Math.max(2,L),a=r/L,N=W.shape=new e.Shape({style:!1}).addTo(W);var x=W.sticks=new e.Shape({style:!1}).addTo(W);d<=0&&x.removeFrom();var T=N.graphics;T.c();var S=x.graphics;S.c();var M=d/10*8,E=d;W.selectPoints?(W.selectedBalls=new e.SelectionSet,W.selectedRect1s=new e.SelectionSet,W.selectedRect2s=new e.SelectionSet,W.selectionManager=new e.SelectionManager([W.selectedBalls,W.selectedRect1s,W.selectedRect2s],"ctrl",!1)):W.selectionManager=new e.SelectionManager(null,"ctrl");var j,D,te,ne,re,ie,ae,le,se=e.mobile();J=W.controls=new e.Container({style:!1}).addTo(W),W.interactive&&J.drag({onTop:!se}),X=[],_=[],R=[];for(var ce=0;ce<L;ce++){if((te=new e.Container({style:!1}).addTo(J)).num=ce,"number"==typeof n){var ue=e.Pick.choose(a);D=new e.Container(ue,o,null,null,!1).addTo(W).loc({x:ce*r/(L-1)-ue/2,y:ce%2*ue}),ie=new e.Circle(M,W.selectPoints&&W.selectedBalls.isSelected(ce)?z:e.light,e.dark,2,null,null,null,!1).centerReg(D).loc({x:ue/2,y:0}),ne=new e.Rectangle(E,E,W.selectPoints&&W.selectedRect1s.isSelected(ce)?z:h(l),0==d?null:e.dark,0==d?null:2,null,null,null,!1).centerReg(D).loc({x:0,y:0}),re=new e.Rectangle(E,E,W.selectPoints&&W.selectedRect2s.isSelected(ce)?z:h(l),0==d?null:e.dark,0==d?null:2,null,null,null,!1).centerReg(D).loc({x:ue,y:0});var de=D.localToLocal(ie.x,ie.y,J);ie.x=de.x,ie.y=de.y,ie.addTo(te,null,!1);var he=D.localToLocal(ne.x,ne.y,J);ne.x="none"==l?0:he.x-ie.x,ne.y="none"==l?0:he.y-ie.y,ne.addTo(te,null,!1);var ge=D.localToLocal(re.x,re.y,J);re.x="none"==l?0:ge.x-ie.x,re.y="none"==l?0:ge.y-ie.y,re.addTo(te,null,!1),te.x=ie.x,te.y=ie.y,ie.x=0,ie.y=0,"none"==l&&ie.addTo(te,null,!1)}else ae=(le=n[ce])[8]?le[8]:l,te.loc({x:le[0],y:le[1]}),ie=new e.Circle(M,e.light,e.dark,2,null,null,null,!1).centerReg({add:!1}).addTo(te).loc({x:le[2],y:le[3]}),ne=new e.Rectangle(E,E,h(ae),0==d?null:e.dark,0==d?null:2,null,null,null,!1).centerReg({add:!1}).addTo(te,0).loc({x:le[4],y:le[5]}),re=new e.Rectangle(E,E,h(ae),0==d?null:e.dark,0==d?null:2,null,null,null,!1).centerReg({add:!1}).addTo(te,0).loc({x:le[6],y:le[7]});ie.mySet=te,ie.rect1=ne,ie.rect2=re,ie.index=ce,se?ie.on("mousedown",function(e){fe?(e.preventDefault(),t(e)):(fe=!0,setTimeout(function(){fe=!1},300))}):ie.on("dblclick",t),ne.ball=ie,(ne.other=re).ball=ie,re.other=ne,0==d&&(ie.expand(10),ne.expand(10),re.expand(10)),se&&(ie.expand(),ne.expand(),re.expand()),j=[te,ie,ne,re,le?le[8]:l],X.push(j),R.push(ie),_.push(te)}var pe,fe=!1;(Q=function(){T.c();var t=e.mobile()?10:6;if(o<t){T.s("rgba(0,0,0,.01)").ss(t);var n=(l=X[0][0]).localToLocal(X[0][1].x,X[0][1].y,N);T.mt(n.x,n.y);for(var r=0;r<X.length;r++){var i=r,a=(r+1)%X.length,l=X[i][0],s=X[i][1],c=X[i][2],u=X[i][3],d=X[a][0],h=X[a][1],g=X[a][2],f=(X[a][3],l.localToLocal(u.x,u.y,N)),m=d.localToLocal(g.x,g.y,N),z=d.localToLocal(h.x,h.y,N);r!=X.length-1&&T.bt(f.x,f.y,m.x,m.y,z.x,z.y)}}for(W.colorCommand||(W.colorCommand=F=T.s($).command),W.thicknessCommand||(W.thicknessCommand=G=T.ss(ee,w.caps,w.joints,w.miterLimit,w.ignoreScale).command),p&&(W.dashedCommand||(W.dashedCommand=H=T.sd([10,10],5).command)),n=(l=X[0][0]).localToLocal(X[0][1].x,X[0][1].y,N),T.mt(n.x,n.y),S.c().s(W.stickColor).ss(1),r=0;r<X.length;r++){i=r,a=(r+1)%X.length,l=X[i][0],s=X[i][1],c=X[i][2],u=X[i][3],d=X[a][0],h=X[a][1],g=X[a][2],X[a][3],f=l.localToLocal(u.x,u.y,N),m=d.localToLocal(g.x,g.y,N),z=d.localToLocal(h.x,h.y,N),r!=X.length-1&&T.bt(f.x,f.y,m.x,m.y,z.x,z.y),n=l.localToLocal(s.x,s.y,N);var v=l.localToLocal(c.x,c.y,N);0==r&&(c.visible=0),0!=r&&S.mt(n.x,n.y).lt(v.x,v.y),r!=X.length-1&&S.mt(n.x,n.y).lt(f.x,f.y),r==X.length-1&&(u.visible=0)}p&&T.append(W.dashedCommand),T.append(W.thicknessCommand),T.append(W.colorCommand)})(),J.on("mousedown",function(e){if(U=e.target.stage,!W.lockControls){if(W.selectPoints&&(W.keyFocus=!0),pe={x:e.target.x,y:e.target.y},e.target.rect1)(o=e.target).startX=o.x,o.startY=o.y,o.rect1.startX=o.rect1.x,o.rect1.startY=o.rect1.y,o.rect2.startX=o.rect2.x,o.rect2.startY=o.rect2.y;else{var t=e.target;t.startX=t.x,t.startY=t.y;var o,n=(o=t.ball).index,r=l;if(zot(X[n][4])||(r=X[n][4]),"straight"==r){var i=t.other,a=i.x-o.x,s=i.y-o.y;i.stickLength=Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}}if(W.selectPoints){var c=W.selectionManager.currentSet;if(c&&c.selections&&0<c.selections.length)for(var u=0;u<c.selections.length;u++){var d=W.pointObjects[c.selections[u]];d[1].startX=d[1].x,d[1].startY=d[1].y,d[2].startX=d[2].x,d[2].startY=d[2].y,d[3].startX=d[3].x,d[3].startY=d[3].y}}}}),W.selectPoints&&J.tap(function(t){if(t.target.rect1){var o=t.target;W.selectedBalls.toggle(o.parent.num)}else{var n=t.target;n.color="white",(o=n.ball).rect1==n?W.selectedRect1s.toggle(o.parent.num):W.selectedRect2s.toggle(o.parent.num)}for(var r=0;r<W.pointObjects.length;r++){var i=W.pointObjects[r];i[1].color=W.selectedBalls.isSelected(r)?e.white:e.light,i[2].color=W.selectedRect1s.isSelected(r)?e.white:h(i[4]),i[3].color=W.selectedRect2s.isSelected(r)?e.white:h(i[4])}U.update()}),J.on("pressmove",function(e){if(!W.lockControls)if(W.selectPoints){var t=A();if(-1==t.indexOf(e.target))Z(e.target),Q();else if(0<t.length){diffX=e.target.x-e.target.startX,diffY=e.target.y-e.target.startY;for(var o=0;o<t.length;o++){var n=t[o];n.x=n.startX+diffX,n.y=n.startY+diffY,Z(n)}Q()}}else Z(e.target),Q()}),J.on("pressup",function(e){if(!W.lockControls){var t=e.target.x!=pe.x||e.target.y!=pe.y,o=new createjs.Event("change");e.target.rect1?(o.controlType="bezierPoint",function(e){if(W.selectPoints){var t=A();if(t&&-1==t.indexOf(e))P(e);else if(t&&0<t.length)for(var o=0;o<t.length;o++)P(t[o]);else P(e)}else P(e)}(e.target)):o.controlType="bezierHandle",t&&W.dispatchEvent(o)}}),W.changeControl=function(e,t,o,n,r,i,a,l,s){var c;if(c=zob(W.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update"))return c;if(zot(e))for(var u=0;u<X.length;u++)W.changeControl(u,t,o,n,r,i,a,l);else{var d=X[e];"none"==(d[4]=t)?(zot(a)||(d[2].x=a),zot(l)||(d[2].y=l),d[2].x=d[1].x,d[2].y=d[1].y,d[3].x=d[1].x,d[3].y=d[1].y,d[1].parent.addChild(d[1])):(zot(o)||(d[2].x=o),zot(n)||(d[2].y=n),zot(r)||(d[3].x=r),zot(i)||(d[3].y=i),zot(a)||(d[1].x=a),zot(l)||(d[1].y=l),d[1].parent.addChildAt(d[1],0)),s&&(W.update(),W.stage&&W.stage.update())}},W.transformPoints=function(t,o,n,r){return W.points=e.transformPoints(W.points,t,o,n,r),W},W.traverse=function(t,o,n,r){var i=e.copy(W.segmentRatios);i.unshift(0),zot(n)&&(n=o+1);var a=o<n;if(a)var l=100*i[o],s=100*i[n];else l=50+(100-100*i[o])/2,s=50+(100-100*i[n])/2;return t.percentComplete=l,t.animate({ease:"linear",props:{path:W},rewind:!a,time:r,events:!0}),t.on("animation",function(e){if(t.percentComplete>s||0==t.percentComplete){t.stopAnimate(),e.remove();var o=new createjs.Event("traversed");o.obj=t,W.dispatchEvent(o)}}),W},W.update=function(e){return e?W.points=W.pointsAdjusted:Q(),W.zimAnimateChanged=!0,W},W.interactive&&(g&&N.drag({onTop:!1}),V=N.on("mousedown",function(e){U=e.target.stage,pe={x:N.x,y:N.y},W.selectPoints&&(W.keyFocus=!0),function(){if(W.onTop){var e=W.parent.numChildren-1;"Keyboard"==W.parent.getChildAt(e).type&&e--,W.parent.setChildIndex(W,e)}}()}),q=N.on("pressmove",function(){J.x=N.x,J.y=N.y,x.x=N.x,x.y=N.y}),K=N.on("pressup",function(){var e=N.x!=pe.x||N.y!=pe.y,t=N.localToLocal(0,0,W.parent);if(W.x=t.x,W.y=t.y,J.x=J.y=x.x=x.y=N.x=N.y=0,e){var o=new createjs.Event("change");o.controlType="move",W.dispatchEvent(o)}U.update()}),W.move||I(!0)),W.toggleEvent=W.on("mousedown",function(){W.allowToggle&&(Y||(W.showControls(),W.dispatchEvent("controlsshow")))}),W.added(function(){W.toggleStageEvent=W.stage.on("stagemousedown",function(e){W.allowToggle&&W.stage&&Y&&!W.hitTestPoint(e.stageX/e.target.stage.scaleX,e.stageY/e.target.stage.scaleY,!1)&&(W.hideControls(),W.dispatchEvent("controlshide"))})}),W.clickEvent=W.on("click",function(){W.ctrlKey&&setTimeout(function(){W.clone(!0).addTo(W.stage).mov(0,100),W.allowToggle&&(W.hideControls(),W.dispatchEvent("controlshide"));var e=new createjs.Event("change");e.controlType="move",W.dispatchEvent(e),W.stage.update()},50)}),W.hideControls=function(){return W.toggled=!1,J.visible=!1,x.visible=!1,Y=!1,W.stage&&W.stage.update(),!W.allowToggle&&W.move&&I(),W},c||W.hideControls(),W.showControls=function(){return W.toggled=!0,J.visible=!0,x.visible=!0,Y=!0,J.x=N.x,J.y=N.y,x.x=N.x,x.y=N.y,W.addChildAt(N,0),W.move&&!W.allowToggle&&B(),W.stage&&W.stage.update(),W},W.toggle=function(e){return!0===e?W.showControls():!1===e?W.hideControls():Y?W.hideControls():W.showControls(),W},W.recordData=function(e){zot(e)&&(e=!1);var t={type:"Bloob",index:W.parent?W.parent.getChildIndex(W):-1,x:W.x,y:W.y,points:W.recordPoints(),color:W.color,thickness:W.thickness,move:W.move,toggle:W.allowToggle,controlsVisible:Y};return e?JSON.stringify(t):t},W.setData=function(e,t){if(!zot(e)){if(t)try{e=JSON.parse(e)}catch(e){return}var o=e.index;zot(o)&&(o=-1),delete e.index;var n=e.points;for(var r in zot(n)||W.setPoints(n),delete e.points,W.num=n.length,e)W[r]=e[r];return W.parent&&W.parent.setChildIndex(W,o),W.update(),W}},W.recordPoints=function(t){zot(t)&&(t=!1);var o=W.points;if(t){if(!W.pane){var n=W.pane=new e.Pane({container:W.stage,width:Math.min(500,W.stage.width-20),height:Math.min(500,W.stage.height-20),draggable:!0});(W.textArea=new e.TextArea(Math.min(400,W.stage.width-70),Math.min(400,W.stage.height-70))).centerReg(n)}W.textArea.text=JSON.stringify(o),W.pane.show()}return o},!(W.setPoints=function(e){for(var t,o,n=0;n<e.length;n++)t=X[n],o=e[n],zot(t)||(t[0].x=o[0],t[0].y=o[1],t[1].x=o[2],t[1].y=o[3],t[2].x=o[4],t[2].y=o[5],t[3].x=o[6],t[3].y=o[7],t[4]=o[8]);return W.update(),W})!==C&&i(W,O),W.clone=function(t){t?W.colorCommand:W.color,t?W.colorCommand:W.color;var o=W.cloneProps(new e.Squiggle(t?W.colorCommand:W.color,W.thickness,W.recordPoints(),r,a,l,s,J.visible,u,d,W.allowToggle,W.move,p,f,m,z,v,W.editPoints,y,w,C,W.group,k));return W.linearGradientParams&&o.linearGradient.apply(o,W.linearGradientParams),W.radialGradientParams&&o.radialGradient.apply(o,W.linearGradientParams),o},W.shape.on("mousedown",function(e){U=e.target.stage,W.editPoints&&(W.controlsVisible?(W.pressX=e.stageX/U.scaleX,W.pressY=e.stageY/U.scaleX):(W.pressX=null,W.pressY=null))}),W.addPointFactor=20,W.addMinDistance=15,W.shape.on("pressup",function(t){if(W.editPoints&&W.pressX&&Math.abs(W.pressX-t.stageX/U.scaleX)<oe&&Math.abs(W.pressY-t.stageY/U.scaleY)<oe){W.selectPoints&&(W.lastPoints=e.copy(W.points));var o=W.points,n=W.globalToLocal(t.stageX/U.scaleX,t.stageY/U.scaleY),r=e.closestPointAlongCurve(n,W.segmentPoints);if("anywhere"==W.editPoints)o.splice(r+1,0,[n.x,n.y,0,0,0,0,0,0]),W.points=o,W.changeControl({index:r+1,type:"mirror",update:!0});else{var i,a=W.pointsAdjusted,l=W.getSegmentPoint(a[r],a[(r+1)%a.length]),s=e.distanceAlongCurve(l),c=Math.round(s/W.addPointFactor),u=W.interpolate(c,r,o),d=1e4;if(e.loop(u,function(t,o){if(0!=o){var r=e.dist(t,n);r<d&&(d=r,i=o)}}),d<W.addMinDistance){var h=W.segmentRatios,g=h[r],p=0<r?h[r-1]:0;W.addPoint(100*(p+i/c*(g-p)))}}W.lastSelectedIndex=r+1,W.lastSelected=W.controls.getChildAt(W.lastSelectedIndex),W.stage.update()}}),W.controls.on("click",function(e){W.lastSelected=e.target.parent,W.lastSelectedIndex=W.controls.getChildIndex(e.target.parent),W.editPoints&&W.selectionManager.shiftKey&&b(e)}),W.controls.hold(b),Y||W.hideControls(),W.dispatchEvent("update")}function A(){var e=[],t=W.selectionManager.currentSet;if(t&&t.selections&&0<t.selections.length)for(var o=0;o<t.selections.length;o++){var n=W.pointObjects[t.selections[o]];if(t==W.selectedBalls)e.push(n[1]);else if(t==W.selectedRect1s)e.push(n[2]);else{if(t!=W.selectedRect2s)continue;e.push(n[3])}}return e}function P(e){if("Circle"==e.type){var t=e,o=t.mySet,n=t.rect1,r=t.rect2;n.x-=t.x,n.y-=t.y,r.x-=t.x,r.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0}}function B(){"always"!=W.move&&(te||(te=!0,N.drag({onTop:!1}),V=N.on("mousedown",V),q=N.on("pressmove",q),K=N.on("pressup",K)))}function I(e){"always"!=W.move&&(e||te)&&(te=!1,N.noDrag(),N.off("mousedown",V),N.off("pressmove",q),N.off("pressup",K))}function S(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function M(t,o,n,r,i,a,l){var s=t.length-1,c=0,u=0;100==r&&"Squiggle"==W.type&&(r=99.99),r=(r+1e5)%100,e.loop(n,function(e,t){if(r/100<e)return s=t,u=e,!0;c=e});var d=W.segmentPoints[s],h=0<u?(r/100-c)/(u-c):0,g=e.pointAlongCurve(d,h),p=[g.x,g.y,0,0];if(!a)if(l)W.interpolatedPoints.push({x:g.x,y:g.y,r:r/100});else{if("none"!=i){var f=S(d[0],d[1],h),m=S(d[1],d[2],h),z=S(d[2],d[3],h),v=S(f,m,h),b=S(m,z,h);p[4]=v.x-g.x,p[5]=v.y-g.y,p[6]=b.x-g.x,p[7]=b.y-g.y;var y=W.localToLocal(f.x,f.y,o[s]);t[s][6]=y.x,t[s][7]=y.y;var w=W.localToLocal(z.x,z.y,o[(s+1)%t.length]);t[(s+1)%t.length][4]=w.x,t[(s+1)%t.length][5]=w.y}i&&(p[8]=i),t.splice(s+1,0,p)}}var E;if(E=zob(e.Squiggle,arguments,"color, thickness, points, length, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, stickColor, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",this))return E;z_d("53.2"),this.group=x;var O=!1===C?{}:e.getStyle("Squiggle",this.group,k);if(zot(o)&&(o=null!=O.thickness?O.thickness:6),zot(r)&&(r=null!=O.length?O.length:300),zot(n)&&(n=null!=O.points?O.points:5),"string"==typeof n){var j=new e.SVGContainer;n=j.processPath(n)}var L="number"==typeof n?n:n.length;if(0!=L){zot(a)&&(a=null!=O.controlLength?O.controlLength:r/L),this.zimContainer_constructor(r,a,null,null,!1),this.type="Squiggle",zot(p)&&(p=null!=O.dashed&&O.dashed),zot(t)&&(t=null!=O.color?O.color:e.blue),t.style&&(this.colorCommand=t,t="black"),zot(l)&&(l=null!=O.controlType?O.controlType:null);var D=l;zot(l)&&(l="mirror"),zot(s)&&(s=null!=O.lockControlType&&O.lockControlType),zot(y)&&(y=null==O.interactive||O.interactive),zot(c)&&(c=null!=O.showControls?O.showControls:y);var Y=c;zot(u)&&(u=null!=O.lockControls?O.lockControls:!y),zot(d)&&(d=null!=O.handleSize?O.handleSize:e.mobile()?20:10),zot(h)&&(h=null!=O.allowToggle?O.allowToggle:y),zot(g)&&(g=null!=O.move?O.move:y),zot(m)&&(m=null!=O.stickColor?O.stickColor:"#111"),zot(z)&&(z=null!=O.selectColor?O.selectColor:"#fff"),zot(v)&&(v=null!=O.selectPoints?O.selectPoints:y),this.stickColor=m,zot(f)&&(f=null==O.onTop||O.onTop),zot(b)&&(b=null!=O.editPoints?O.editPoints:y),zot(w)&&(w=null!=O.strokeObj?O.strokeObj:{});var X,R,_,W=this;this.types=["mirror","straight","free","none"],this.interactive=y,this.num=L,this.onTop=f,this.move=g,this.editPoints=b,this.allowToggle=h,this.lockControlType=s,this.selectPoints=v,this.lockControls=u;var F,G,H,N,V,q,K,U,Z,Q,J,$=t,ee=o,te=W.move,oe=2;D&&"number"!=typeof n&&loop(n,function(e){"none"==(e[8]=D)&&(e[4]=e[5]=e[6]=e[7]=0)}),T(),W.selectionManager.on("keydown",function(e){if(W.selectPoints&&W.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=A();if(0<t.length){for(var o=0;o<t.length;o++){var n=t[o];37==e.keyCode?n.x-=W.selectionManager.shiftKey?10:1:39==e.keyCode?n.x+=W.selectionManager.shiftKey?10:1:38==e.keyCode?n.y-=W.selectionManager.shiftKey?10:1:40==e.keyCode&&(n.y+=W.selectionManager.shiftKey?10:1),Z(n)}Q(),W.stage&&W.stage.update()}}}),W.selectionManager.on("keyup",function(e){if(W.selectPoints&&W.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=A();if(0<t.length)for(var o=0;o<t.length;o++)P(t[o])}}),W.selectionManager.on("undo",function(){if(W.selectPoints&&W.keyFocus&&W.lastPoints){var t=e.copy(W.lastPoints);W.lastPoints=e.copy(W.points),W.points=t,W.stage&&W.stage.update()}}),Z=function(e){if(!W.lockControls)if(e.rect1){var t=(n=e).x-n.startX,o=n.y-n.startY;n.rect1.x=n.rect1.startX+t,n.rect1.y=n.rect1.startY+o,n.rect2.x=n.rect2.startX+t,n.rect2.y=n.rect2.startY+o}else{var n,r=e,i=r.other,a=(n=r.ball).index,s=l;if(zot(X[a][4])||(s=X[a][4]),"straight"==s||"mirror"==s){var c=r.x-n.x,u=r.y-n.y;if("mirror"==s)i.x=n.x-c,i.y=n.y-u;else{var d=Math.atan2(u,c),h=-i.stickLength*Math.cos(d+Math.PI),g=-i.stickLength*Math.sin(d+Math.PI);i.x=n.x-h,i.y=n.y-g}}}},Object.defineProperty(W,"move",{get:function(){return g},set:function(e){g!=e&&((g=e)?B():I())}}),Object.defineProperty(W,"interactive",{get:function(){return y},set:function(e){y=e,W.showControls=y,W.allowToggle=y,W.editPoints=y,W.lockControls=!y,W.selectPoints=y,W.move=y,W.points=W.points}}),Object.defineProperty(W,"allowToggle",{get:function(){return h},set:function(e){h!=e&&((h=e)?W.move&&B():!Y&&W.move&&I())}});var ne,re,ie=u;Object.defineProperty(W,"lockControls",{get:function(){return ie},set:function(e){(ie=e)?(W.controls.mouseChildren=!1,W.controls.mouseEnabled=!1):(W.controls.mouseChildren=!0,W.controls.mouseEnabled=!0)}}),W.lockControls=ie,Object.defineProperty(W,"controlsVisible",{get:function(){return Y},set:function(e){(Y=e)?W.showControls():W.hideControls()}}),Object.defineProperty(W,"color",{get:function(){return $},set:function(e){zot(e)&&(e="black"),$=e,F.style=$}}),this.setColorRange=function(e,t){return re=zot(t)?(ne=W.color,e):(ne=zot(e)?W.color:e,t),W};var ae=0;Object.defineProperty(W,"colorRange",{get:function(){return ae},set:function(t){ae=t,zot(ne)||zot(re)||(W.color=e.colorRange(ne,re,t))}}),Object.defineProperty(W,"thickness",{get:function(){return ee},set:function(e){0<e||(e=0),ee=e,G&&0!=ee?(G.width=ee,p&&(H.segments=[20,10],H.offset=5)):Q()}}),"undefined"!=typeof KEYFOCUS&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==W},set:function(t){e.KEYFOCUS=W}}),e.KEYFOCUS||function(){if(W.selectPoints){W.keyFocus=!0;var e=document.activeElement;e&&e.blur()}}(),Object.defineProperty(W,"points",{get:function(){for(var t,o,n=[],r=0;r<X.length;r++)o=X[r],t=[e.decimals(o[0].x),e.decimals(o[0].y),e.decimals(o[1].x),e.decimals(o[1].y),e.decimals(o[2].x),e.decimals(o[2].y),e.decimals(o[3].x),e.decimals(o[3].y)],o[4]&&"mirror"!==o[4]&&t.push(o[4]),n.push(t);return n},set:function(e){W.dispose(!0),n=e,W.shape&&(W.shape.graphics.clear(),W.sticks.graphics.clear(),W.controls.noDrag(),W.removeAllChildren(),delete W.shape,delete W.sticks,delete W.controls),T(),W.lockControls=ie}}),Object.defineProperty(W,"pointsAdjusted",{get:function(){var t,o,n=[],r=W.pointObjects;return e.loop(r.length,function(i,a){if(po=r[i],o=X[i],0==po[0].rotation&&0==po[0].scaleX&&0==po[0].scaleY)t=[e.decimals(o[0].x),e.decimals(o[0].y),e.decimals(o[1].x),e.decimals(o[1].y),e.decimals(o[2].x),e.decimals(o[2].y),e.decimals(o[3].x),e.decimals(o[3].y)];else{var l=po[0].localToLocal(po[2].x,po[2].y,po[0].parent),s=po[0].localToLocal(po[3].x,po[3].y,po[0].parent);t=[e.decimals(o[0].x),e.decimals(o[0].y),e.decimals(o[1].x),e.decimals(o[1].y),e.decimals(l.x-o[0].x),e.decimals(l.y-o[0].y),e.decimals(s.x-o[0].x),e.decimals(s.y-o[0].y)]}o[4]&&"mirror"!==o[4]&&t.push(o[4]),n.push(t)}),n},set:function(e){zon&&zog("Squiggle() - pointsAdjusted is read only")}}),Object.defineProperty(W,"pointObjects",{get:function(){return X},set:function(e){zon&&zog("Squiggle() - pointObjects is read only - but its contents can be manipulated - use squiggle.update() after changes")}}),Object.defineProperty(W,"pointControls",{get:function(){return _},set:function(e){zon&&zog("Squiggle() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(W,"pointCircles",{get:function(){return R},set:function(e){zon&&zog("Squiggle() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(W,"segmentPoints",{get:function(){var t=[],o=W.pointsAdjusted;return e.loop(o.length-1,function(e,n){var r=W.getSegmentPoint(o[e],o[e+1]);t.push(r)}),t},set:function(e){zon&&zog("Squiggle() - segmentPoints is read only")}}),Object.defineProperty(W,"segmentRatios",{get:function(){var t=[],o=0;e.loop(W.segmentPoints,function(n){var r=e.distanceAlongCurve(n);t.push(r),o+=r});var n=[],r=0;return e.loop(t,function(e){r+=e/o,n.push(r)}),n},set:function(e){zon&&zog("Squiggle() - segmentRatios is read only")}}),W.getPointAngle=function(t){var o=W.pointObjects[t][0],n=W.pointObjects[t][2],r=W.pointObjects[t][3];if(o==W.stage)var i=new e.Point(n.x,n.y),a=new e.Point(r.x,r.y);else i=o.localToGlobal(n.x,n.y),a=o.localToGlobal(r.x,r.y);return e.angle(i.x,i.y,a.x,a.y)},W.getSegmentPoint=function(e,t){if(!zot(e)&&!zot(t)){0==e[2]&&0==e[3]||(e[4]-=e[2],e[5]-=e[3],e[6]-=e[2],e[7]-=e[3],e[0]+=e[2],e[1]+=e[3],e[2]=0,e[3]=0),0==t[2]&&0==t[3]||(t[4]-=t[2],t[5]-=t[3],t[6]-=t[2],t[7]-=t[3],t[0]+=t[2],t[1]+=t[3],t[2]=0,t[3]=0);var o={x:e[0],y:e[1]},n={x:e[0]+e[6],y:e[1]+e[7]},r={x:t[0]+t[4],y:t[1]+t[5]},i={x:t[0],y:t[1]};return 0==J.x&&0==J.y||(o.x+=J.x,n.x+=J.x,r.x+=J.x,i.x+=J.x,o.y+=J.y,n.y+=J.y,r.y+=J.y,i.y+=J.y),[o,n,r,i]}},W.getAdjacentSegmentData=function(e){zot(e)&&(e=0);var t=W.pointsAdjusted;return 2==W.num?[[W.getSegmentPoint(t[0],t[1])],[0]]:0==e?[[W.getSegmentPoint(t[0],t[1]),W.getSegmentPoint(t[1],t[2])],[0,1]]:e>=W.num-2?[[W.getSegmentPoint(t[W.num-3],t[W.num-2]),W.getSegmentPoint(t[W.num-2],t[W.num-1])],[W.num-3,W.num-2]]:[[W.getSegmentPoint(t[e-1],t[e]),W.getSegmentPoint(t[e],t[e+1]),W.getSegmentPoint(t[e+1],t[e+2])],[e-1,e,e+1]]},W.getCurvePoint=function(t,o,n,r){(zot(t)||isNaN(t))&&(t=0),zot(o)&&(o=W.segmentRatios),zot(n)&&(n=W.segmentPoints),zot(r)&&(r=!1);var i=o,a=n,l=e.loop(i,function(e,o){if(t<=e)return o}),s=0<l?i[l-1]:0,c=0<l?i[l]-i[l-1]:i[l];if(c){var u=(t-s)/c,d=e.pointAlongCurve(a[l],u,r),h=W.localToGlobal(d.x,d.y);return h.angle=d.angle,h.z=l,zot(h)?void 0:h}},this.addPoint=function(e,t){zot(e)&&(e=100);var o=W.points,n=W.segmentRatios;return M(o,W.pointControls,n,e,t),W.points=o,W.num=o.length,W},this.addPoints=function(t,o,n,r,i,a){zot(a)&&(a=e.copy(W.points));var l=e.copy(W.segmentRatios),s=0;if(i&&(W.interpolatedPoints=[]),r)var c=l.length*t;return e.loop(l,function(l,u){i&&M(a,W.pointControls,W.segmentRatios,100*s,o,!zot(n)&&u!=n,i);var d=r?Math.round(c*(l-s)):t,h=1/(d+1);e.loop(d,function(e){var r=s+(l-s)*h*(e+1);M(a,W.pointControls,W.segmentRatios,100*r,o,!zot(n)&&u!=n,i),!i&&0<t&&(W.points=a)}),s=l}),i&&"Squiggle"==W.type&&M(a,W.pointControls,W.segmentRatios,100,o,null,i),W.stage&&W.stage.update(),W.num=a.length,W},this.interpolate=function(e,t,o,n){return zot(e)&&(e=1),W.addPoints(e,"none",t,o,!0,n),W.interpolatedPoints},this.linearGradient=function(e,t,o,n,r,i){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.thicknessCommand.linearGradient(e,t,o,n,r,i),this},this.radialGradient=function(e,t,o,n,r,i,a,l){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.thicknessCommand.radialGradient(e,t,o,n,r,i,a,l),this},this.dispose=function(e){if(W.shape){W.shape.cursor="default";for(var t=0;t<W.points.length;t++)W.pointObjects[t][1].removeAllEventListeners();for(t=0;t<R.length;t++)R[t].removeAllEventListeners();W.sticks.removeFrom(W),W.controls.removeFrom(W),W.shape.removeAllEventListeners(),W.controls.removeAllEventListeners(),W.off("mousedown",W.toggleEvent),W.off("click",W.clickEvent),W.toggleStageEvent&&W.stage.off("stagemousedown",W.toggleStageEvent),!e&&W.selectPoints&&W.selectionManager.removeAllEventListeners()}}}},e.extend(e.Squiggle,e.Container,["clone","dispose"],"zimContainer",!1),e.Bloob=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T){function A(e){var t;if("circle"!=e&&"rectangle"!=e&&"triangle"!=e||("circle"==e&&(e=new Circle(a)),"rectangle"==e&&(e=new Rectangle(2*a,2*a).centerReg({add:!1})),"triangle"==e&&(e=new Triangle(2*a,2*a,2*a))),"Circle"!=e.type&&"Rectangle"!=e.type&&"Triangle"!=e.type)return e;var o=e.getBounds();return"Circle"==e.type?(t=4,Y=l=2*a*.5523):"Rectangle"==e.type?(e.centerReg({add:!1}),t=[[o.x-o.width/2,o.y-o.height/2],[o.x+o.width/2,o.y-o.height/2],[o.x+o.width/2,o.y+o.height/2],[o.x-o.width/2,o.y+o.height/2]],_.setBounds(o.x-o.width/2,o.y-o.height/2,o.width,o.height),_.regX=e.regX-o.width/2,_.regY=e.regY-o.height/2):"Triangle"==e.type&&(t=[[e.three.x-e.width/2,e.three.y+e.height/2+e.adjusted],[e.two.x-e.width/2,e.two.y+e.height/2+e.adjusted],[e.one.x-e.width/2,e.one.y+e.height/2+e.adjusted]],_.setBounds(o.x-o.width/2,o.y-o.height/2,o.width,o.height)),t}function P(){function t(e){if(!_.lockControlType){var t=e.target,n=W[t.index][4]?W[t.index][4]:s;Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(n="none"),"none"==n&&t.parent.addChildAt(t,0),"none"==(n=_.types[(_.types.indexOf(n)+(_.shiftKey?-1:1)+_.types.length)%_.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),W[t.index][4]=n,t.rect1.color=o(n),t.rect2.color=o(n),ee();var r=new createjs.Event("change");r.controlType="bezierSwitch",_.dispatchEvent(r),t.stage.update()}}function o(t){var o={mirror:e.purple,free:e.yellow,none:e.blue};return o[t]?o[t]:e.pink}function n(t){if("Circle"==t.target.type){var o=_.lastSelectedIndex=_.controls.getChildIndex(t.target.parent);if(_.controls.numChildren<=2)return;var n=_.points;_.selectPoints&&(_.lastPoints=e.copy(n)),n.splice(o,1),_.points=n,_.stage.update(),_.lastSelected=_.lastSelectedIndex=null}}if(te&&te.removeAllEventListeners(),_.selectPoints?(_.selectedBalls=new e.SelectionSet,_.selectedRect1s=new e.SelectionSet,_.selectedRect2s=new e.SelectionSet,_.selectionManager=new e.SelectionManager([_.selectedBalls,_.selectedRect1s,_.selectedRect2s],"ctrl",!1)):_.selectionManager=new e.SelectionManager(null,"ctrl"),!((D="number"==typeof r?r:r.length)<=0)){zot(Y)&&(l=4*a/D),K=_.shape=new e.Shape({style:!1}).addTo(_);var u=_.sticks=new e.Shape({style:!1}).addTo(_);h<=0&&u.removeFrom();var g=K.graphics;g.c();var y=u.graphics;y.c();var k,A,P,E,O,j,X,ie,le=h/10*8,se=h,ce=e.mobile();te=_.controls=new e.Container({style:!1}).addTo(_),_.interactive&&te.drag({onTop:!ce}),W=[],G=[],F=[];for(var ue=0;ue<D;ue++){if((P=new e.Container({style:!1}).addTo(te)).num=ue,"number"==typeof r){var de=e.Pick.choose(l);(A=new e.Container(de,a,null,null,!1).reg(de/2,a).addTo(_)).rotation=ue/D*360,j=new e.Circle(le,_.selectPoints&&_.selectedBalls.isSelected(ue)?v:e.light,e.dark,2,null,null,null,!1).centerReg(A).loc({x:de/2,y:0}),E=new e.Rectangle(se,se,_.selectPoints&&_.selectedRect1s.isSelected(ue)?v:o(s),0==h?null:e.dark,0==h?null:2,null,null,null,!1).centerReg(A).loc({x:0,y:0}),O=new e.Rectangle(se,se,_.selectPoints&&_.selectedRect2s.isSelected(ue)?v:o(s),0==h?null:e.dark,0==h?null:2,null,null,null,!1).centerReg(A).loc({x:de,y:0});var he=A.localToLocal(j.x,j.y,te);j.x=he.x,j.y=he.y,j.addTo(P,null,!1);var ge=A.localToLocal(E.x,E.y,te);E.x="none"==s?0:ge.x-j.x,E.y="none"==s?0:ge.y-j.y,E.addTo(P,null,!1);var pe=A.localToLocal(O.x,O.y,te);O.x="none"==s?0:pe.x-j.x,O.y="none"==s?0:pe.y-j.y,O.addTo(P,null,!1),P.x=j.x,P.y=j.y,j.x=0,j.y=0,"none"==s&&j.addTo(P,null,!1)}else X=(ie=r[ue])[8]?ie[8]:s,P.loc({x:ie[0],y:ie[1]}),j=new e.Circle(le,e.light,e.dark,2,null,null,null,!1).centerReg({add:!1}).addTo(P).loc({x:ie[2],y:ie[3]}),E=new e.Rectangle(se,se,o(X),0==h?null:e.dark,0==h?null:2,null,null,null,!1).centerReg({add:!1}).addTo(P,0).loc({x:ie[4],y:ie[5]}),O=new e.Rectangle(se,se,o(X),0==h?null:e.dark,0==h?null:2,null,null,null,!1).centerReg({add:!1}).addTo(P,0).loc({x:ie[6],y:ie[7]});j.mySet=P,j.rect1=E,j.rect2=O,j.index=ue,0==h&&(j.expand(10),E.expand(10),O.expand(10)),ce?j.on("mousedown",function(e){me?(e.preventDefault(),t(e)):(me=!0,setTimeout(function(){me=!1},300))}):j.on("dblclick",t),E.ball=j,(E.other=O).ball=j,O.other=E,ce&&(j.expand(),E.expand(),O.expand()),k=[P,j,E,O,ie?ie[8]:s],W.push(k),F.push(j),G.push(P)}var fe,me=!1;(ee=function(){g.c(),_.colorCommand||(_.colorCommand=H=g.f(oe).command),(zot(re)||0<re)&&(zot(ne)&&zot(re)||(zot(ne)&&(ne="black"),_.borderColorCommand||(_.borderColorCommand=N=g.s(ne).command),_.borderWidthCommand||(_.borderWidthCommand=V=g.ss(re,C.caps,C.joints,C.miterLimit,C.ignoreScale).command),f&&(_.borderDashedCommand||(_.borderDashedCommand=q=g.sd([10,10],5).command))));var e=(r=W[0][0]).localToLocal(W[0][1].x,W[0][1].y,K);g.mt(e.x,e.y),y.c().s(_.stickColor).ss(1);for(var t=0;t<W.length;t++){var o=t,n=(t+1)%W.length,r=W[o][0],i=W[o][1],a=W[o][2],l=W[o][3],s=W[n][0],c=W[n][1],u=W[n][2],d=(W[n][3],r.localToLocal(l.x,l.y,K)),h=s.localToLocal(u.x,u.y,K),p=s.localToLocal(c.x,c.y,K);g.bt(d.x,d.y,h.x,h.y,p.x,p.y),e=r.localToLocal(i.x,i.y,K);var m=r.localToLocal(a.x,a.y,K);y.mt(e.x,e.y).lt(m.x,m.y),y.mt(e.x,e.y).lt(d.x,d.y)}g.cp(),g.append(_.colorCommand),f&&g.append(_.borderDashedCommand),_.borderWidthCommand&&g.append(_.borderWidthCommand),_.borderColorCommand&&g.append(_.borderColorCommand)})(),te.on("mousedown",function(e){if(!_.lockControls){if(_.selectPoints&&(_.keyFocus=!0),fe={x:e.target.x,y:e.target.y},e.target.rect1)(o=e.target).startX=o.x,o.startY=o.y,o.rect1.startX=o.rect1.x,o.rect1.startY=o.rect1.y,o.rect2.startX=o.rect2.x,o.rect2.startY=o.rect2.y;else{var t=e.target;t.startX=t.x,t.startY=t.y;var o,n=(o=t.ball).index,r=s;if(zot(W[n][4])||(r=W[n][4]),"straight"==r){var i=t.other,a=i.x-o.x,l=i.y-o.y;i.stickLength=Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}if(_.selectPoints){var c=_.selectionManager.currentSet;if(c&&c.selections&&0<c.selections.length)for(var u=0;u<c.selections.length;u++){var d=_.pointObjects[c.selections[u]];d[1].startX=d[1].x,d[1].startY=d[1].y,d[2].startX=d[2].x,d[2].startY=d[2].y,d[3].startX=d[3].x,d[3].startY=d[3].y}}}}),_.selectPoints&&te.tap(function(t){if(t.target.rect1){var n=t.target;_.selectedBalls.toggle(n.parent.num)}else{var r=t.target;r.color="white",(n=r.ball).rect1==r?_.selectedRect1s.toggle(n.parent.num):_.selectedRect2s.toggle(n.parent.num)}for(var i=0;i<_.pointObjects.length;i++){var a=_.pointObjects[i];a[1].color=_.selectedBalls.isSelected(i)?e.white:e.light,a[2].color=_.selectedRect1s.isSelected(i)?e.white:o(a[4]),a[3].color=_.selectedRect2s.isSelected(i)?e.white:o(a[4])}t.target.stage.update()}),te.on("pressmove",function(e){if(!_.lockControls)if(_.selectPoints){var t=B();if(-1==t.indexOf(e.target))$(e.target),ee();else if(0<t.length){diffX=e.target.x-e.target.startX,diffY=e.target.y-e.target.startY;for(var o=0;o<t.length;o++){var n=t[o];n.x=n.startX+diffX,n.y=n.startY+diffY,$(n)}ee()}}else $(e.target),ee()}),te.on("pressup",function(e){if(!_.lockControls){var t=e.target.x!=fe.x||e.target.y!=fe.y,o=new createjs.Event("change");e.target.rect1?(o.controlType="bezierPoint",function(e){if(_.selectPoints){var t=B();if(t&&-1==t.indexOf(e))I(e);else if(t&&0<t.length)for(var o=0;o<t.length;o++)I(t[o]);else I(e)}else I(e)}(e.target)):o.controlType="bezierHandle",t&&_.dispatchEvent(o)}}),_.changeControl=function(e,t,n,r,i,a,l,s,c){var u;if(u=zob(_.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update"))return u;if(zot(e)){for(var d=0;d<W.length;d++)_.changeControl(d,t,n,r,i,a,l,s);return _}var h=W[e];return"none"==(h[4]=t)?(zot(l)||(h[1].x=l),zot(s)||(h[1].y=s),h[2].x=h[1].x,h[2].y=h[1].y,h[3].x=h[1].x,h[3].y=h[1].y,h[1].parent.addChild(h[1])):(zot(l)||(h[1].x=l),zot(s)||(h[1].y=s),zot(n)||(h[2].x=n),zot(r)||(h[2].y=r),zot(i)||(h[3].x=i),zot(a)||(h[3].y=a),h[1].parent.addChildAt(h[1],0)),h[2].color=o(t),h[3].color=o(t),c&&(_.update(),_.stage&&_.stage.update()),_},_.transformPoints=function(t,o,n,r){return _.points=e.transformPoints(_.points,t,o,n,r),_},_.traverse=function(t,o,n,r){var i=e.copy(_.segmentRatios);i.unshift(0),zot(n)&&(n=o+1);var a=o<n;if(a)var l=100*i[o],s=100*i[n];else l=50+(100-100*i[o])/2,s=50+(100-100*i[n])/2;return t.percentComplete=l,t.animate({ease:"linear",props:{path:_},rewind:!a,time:r,events:!0}),t.on("animation",function(e){if(t.percentComplete>s||0==t.percentComplete){t.stopAnimate(),e.remove();var o=new createjs.Event("traversed");o.obj=t,_.dispatchEvent(o)}}),_},_.update=function(e){return e?_.points=_.pointsAdjusted:ee(),_.zimAnimateChanged=!0,_},_.move&&_.interactive&&K.drag({onTop:!1}),U=K.on("mousedown",function(){fe={x:K.x,y:K.y},_.selectPoints&&(_.keyFocus=!0),function(){if(_.onTop){var e=_.parent.numChildren-1;"Keyboard"==_.parent.getChildAt(e).type&&e--,_.parent.setChildIndex(_,e)}}()}),Z=K.on("pressmove",function(){te.x=K.x,te.y=K.y,u.x=K.x,u.y=K.y}),Q=K.on("pressup",function(){var e=K.x!=fe.x||K.y!=fe.y,t=K.localToLocal(0,0,_.parent);if(_.x=t.x,_.y=t.y,te.x=te.y=u.x=u.y=K.x=K.y=0,e){var o=new createjs.Event("change");o.controlType="move",_.dispatchEvent(o)}_.stage.update()}),p||M(!0),_.toggleEvent=_.on("mousedown",function(){_.allowToggle&&(R||(_.showControls(),_.dispatchEvent("controlsshow")))}),_.added(function(){_.toggleStageEvent=_.stage.on("stagemousedown",function(e){_.allowToggle&&_.stage&&R&&!_.hitTestPoint(e.stageX/e.target.stage.scaleX,e.stageY/e.target.stage.scaleY,!1)&&(_.hideControls(),_.dispatchEvent("controlshide"))})}),_.clickEvent=_.on("click",function(){_.ctrlKey&&setTimeout(function(){_.clone(!0).addTo(_.stage).mov(100),_.allowToggle&&(_.hideControls(),_.dispatchEvent("controlshide"));var e=new createjs.Event("change");e.controlType="move",_.dispatchEvent(e),_.stage.update()},50)}),_.hideControls=function(){return _.toggled=!1,te.visible=!1,u.visible=!1,R=!1,_.stage&&_.stage.update(),!_.allowToggle&&_.move&&M(),_},R||_.hideControls(),_.showControls=function(){return _.toggled=!0,te.visible=!0,u.visible=!0,R=!0,te.x=K.x,te.y=K.y,u.x=K.x,u.y=K.y,_.addChildAt(K,0),_.move&&!_.allowToggle&&S(),_.stage&&_.stage.update(),_},_.toggle=function(e){return!0===e?_.showControls():!1===e?_.hideControls():R?_.hideControls():_.showControls(),_},_.recordData=function(e){zot(e)&&(e=!1);var t={type:"Bloob",index:_.parent?_.parent.getChildIndex(_):-1,x:_.x,y:_.y,points:_.recordPoints(),color:_.color,borderColor:_.borderColor,borderWidth:_.borderWidth,move:_.move,toggle:_.allowToggle,controlsVisible:R};return e?JSON.stringify(t):t},_.setData=function(e,t){if(!zot(e)){if(t)try{e=JSON.parse(e)}catch(e){return}var o=e.index;zot(o)&&(o=-1),delete e.index;var n=e.points;for(var r in zot(n)||_.setPoints(n),delete e.points,this.num=n.length,e)_[r]=e[r];return _.parent&&_.parent.setChildIndex(_,o),_}},_.recordPoints=function(t){zot(t)&&(t=!1);var o=_.points;if(t){if(!n){var n=_.pane=new e.Pane({displayClose:!1,container:_.stage,width:Math.min(500,_.stage.width-20),height:Math.min(500,_.stage.height-20),draggable:!0}),r=_.textArea=new e.TextArea(Math.min(400,_.stage.width-70),Math.min(400,_.stage.height-70));r.centerReg(n)}r.text=JSON.stringify(o),n.show()}return o},!(_.setPoints=function(e){for(var t,n,r=0;r<e.length;r++)t=W[r],n=e[r],zot(t)||(t[0].x=n[0],t[0].y=n[1],t[1].x=n[2],t[1].y=n[3],t[2].x=n[4],t[2].y=n[5],t[3].x=n[6],t[3].y=n[7],t[4]=n[8],t[2].color=o(t[4]),t[3].color=o(t[4]));return _.update(),_})!==x&&i(_,L),_.clone=function(t){t?_.colorCommand:_.color,t?_.colorCommand:_.color;var o=_.cloneProps(new e.Bloob(t?_.colorCommand:_.color,t?_.borderColorCommand:_.borderColor,_.borderWidth,_.recordPoints(),a,l,s,c,te.visible,d,h,_.allowToggle,_.move,f,m,z,v,b,_.editPoints,w,C,x,_.group,T));return _.linearGradientParams&&o.linearGradient.apply(o,_.linearGradientParams),_.radialGradientParams&&o.radialGradient.apply(o,_.linearGradientParams),o},_.shapeMousedownEvent=_.shape.on("mousedown",function(e){J=e.target.stage,_.editPoints&&(_.controlsVisible?(_.pressX=e.stageX/J.scaleX,_.pressY=e.stageY/J.scaleY):(_.pressX=null,_.pressY=null))}),_.addPointFactor=20,_.addMinDistance=15,_.shapePressupEvent=_.shape.on("pressup",function(t){if(_.editPoints&&_.pressX&&Math.abs(_.pressX-t.stageX/J.scaleX)<ae&&Math.abs(_.pressY-t.stageY/J.scaleY)<ae){_.selectPoints&&(_.lastPoints=e.copy(_.points));var o=_.points,n=_.globalToLocal(t.stageX/J.scaleX,t.stageY/J.scaleY),r=e.closestPointAlongCurve(n,_.segmentPoints);if("anywhere"==_.editPoints)o.splice(r+1,0,[n.x,n.y,0,0,0,0,0,0]),_.points=o,_.changeControl({index:r+1,type:"mirror",update:!0});else{var i,a=_.pointsAdjusted,l=_.getSegmentPoint(a[r],a[(r+1)%a.length]),s=e.distanceAlongCurve(l),c=Math.round(s/_.addPointFactor),u=_.interpolate(c,r,!1,o),d=1e4;if(e.loop(u,function(t,o){if(0!=o){var r=e.dist(t,n);r<d&&(d=r,i=o)}}),d<_.addMinDistance){var h=_.segmentRatios,g=h[r],p=0<r?h[r-1]:0;_.addPoint(100*(p+i/c*(g-p)))}}_.lastSelectedIndex=r+1,_.lastSelected=_.controls.getChildAt(_.lastSelectedIndex),_.stage.update()}}),_.controlsClickEvent=_.controls.on("click",function(e){_.lastSelected=e.target.parent,_.lastSelectedIndex=_.controls.getChildIndex(e.target.parent),_.editPoints&&_.selectionManager.shiftKey&&n(e)}),_.controls.hold(n),R||_.hideControls(),_.dispatchEvent("update")}}function B(){var e=[],t=_.selectionManager.currentSet;if(t&&t.selections&&0<t.selections.length)for(var o=0;o<t.selections.length;o++){var n=_.pointObjects[t.selections[o]];if(t==_.selectedBalls)e.push(n[1]);else if(t==_.selectedRect1s)e.push(n[2]);else{if(t!=_.selectedRect2s)continue;e.push(n[3])}}return e}function I(e){if(_.selectPoints&&"Circle"==e.type){var t=e,o=t.mySet,n=t.rect1,r=t.rect2;n.x-=t.x,n.y-=t.y,r.x-=t.x,r.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0}}function S(){"always"!=_.move&&(ie||(ie=!0,K.drag({onTop:!1}),U=K.on("mousedown",U),Z=K.on("pressmove",Z),Q=K.on("pressup",Q)))}function M(e){"always"!=_.move&&(e||ie)&&(ie=!1,K.noDrag(),K.off("mousedown",U),K.off("pressmove",Z),K.off("pressup",Q))}function E(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function O(t,o,n,r,i,a,l){var s=t.length-1,c=0,u=0;100==r&&"Squiggle"==_.type&&(r=99.99),r=(r+1e5)%100,e.loop(n,function(e,t){if(r/100<e)return s=t,u=e,!0;c=e});var d=_.segmentPoints[s],h=0<u?(r/100-c)/(u-c):0,g=e.pointAlongCurve(d,h),p=[g.x,g.y,0,0];if(!a)if(l)_.interpolatedPoints.push({x:g.x,y:g.y,r:r/100});else{if("none"!=i){var f=E(d[0],d[1],h),m=E(d[1],d[2],h),z=E(d[2],d[3],h),v=E(f,m,h),b=E(m,z,h);p[4]=v.x-g.x,p[5]=v.y-g.y,p[6]=b.x-g.x,p[7]=b.y-g.y;var y=_.localToLocal(f.x,f.y,o[s]);t[s][6]=y.x,t[s][7]=y.y;var w=_.localToLocal(z.x,z.y,o[(s+1)%t.length]);t[(s+1)%t.length][4]=w.x,t[(s+1)%t.length][5]=w.y}i&&(p[8]=i),t.splice(s+1,0,p)}}var j;if(j=zob(e.Bloob,arguments,"color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, stickColor, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",this))return j;z_d("53.5"),this.group=k;var L=!1===x?{}:e.getStyle("Bloob",this.group,T);zot(a)&&(a=null!=L.radius?L.radius:100),this.zimContainer_constructor(-a,-a,2*a,2*a,!1),this.type="Bloob",zot(f)&&(f=null!=L.dashed&&L.dashed),zot(o)&&(o=null!=L.borderColor?L.borderColor:null),zot(n)&&(n=null!=L.borderWidth?L.borderWidth:null),o<0||n<0?o=n=null:null!=o&&null==n&&(n=1),zot(t)&&(t=null!=L.color?L.color:0<n?"rgba(0,0,0,0)":e.green),t.style&&(this.colorCommand=t,t="black"),o&&o.style&&(this.borderColorCommand=o,o="black"),zot(r)&&(r=null!=L.points?L.points:4);var D="number"==typeof r?r:r.length,Y=l;zot(l)&&(l=null!=L.controlLength?L.controlLength:4*a/D),zot(s)&&(s=null!=L.controlType?L.controlType:null);var X=s;zot(s)&&(s="straight"),zot(c)&&(c=null!=L.lockControlType&&L.lockControlType),zot(w)&&(w=null==L.interactive||L.interactive),zot(u)&&(u=null!=L.showControls?L.showControls:w);var R=u;zot(d)&&(d=null!=L.lockControls?L.lockControls:!w),zot(h)&&(h=null!=L.handleSize?L.handleSize:e.mobile()?20:10),zot(g)&&(g=null!=L.allowToggle?L.allowToggle:w),zot(p)&&(p=null!=L.move?L.move:w),zot(z)&&(z=null!=L.stickColor?L.stickColor:"#111"),zot(v)&&(v=null!=L.selectColor?L.selectColor:"#fff"),zot(b)&&(b=null!=L.selectPoints?L.selectPoints:w),this.stickColor=z,zot(m)&&(m=null==L.onTop||L.onTop),zot(y)&&(y=null!=L.editPoints?L.editPoints:w),zot(C)&&(C=null!=L.strokeObj?L.strokeObj:{});var _=this;this.interactive=w,this.num=D,this.editPoints=y,this.selectPoints=b,this.lockControls=d,this.onTop=m,this.move=p,this.allowToggle=g,this.lockControlType=c,this.types=["mirror","straight","free","none"];var W,F,G,H,N,V,q,K,U,Z,Q,J,$,ee,te,oe=t,ne=o,re=n,ie=_.move,ae=2;if("string"==typeof(r=A(r))){var le=new e.SVGContainer;r=le.processPath(r)}X&&"number"!=typeof r&&loop(r,function(e){"none"==(e[8]=X)&&(e[4]=e[5]=e[6]=e[7]=0)}),P(),_.selectionManager.on("keydown",function(e){if(_.selectPoints&&_.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=B();if(0<t.length){for(var o=0;o<t.length;o++){var n=t[o];37==e.keyCode?n.x-=_.selectionManager.shiftKey?10:1:39==e.keyCode?n.x+=_.selectionManager.shiftKey?10:1:38==e.keyCode?n.y-=_.selectionManager.shiftKey?10:1:40==e.keyCode&&(n.y+=_.selectionManager.shiftKey?10:1),$(n)}ee(),_.stage&&_.stage.update()}}}),_.selectionManager.on("keyup",function(e){if(_.selectPoints&&_.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=B();if(0<t.length)for(var o=0;o<t.length;o++)I(t[o])}}),_.selectionManager.on("undo",function(){if(_.selectPoints&&_.keyFocus&&_.lastPoints){var t=e.copy(_.lastPoints);_.lastPoints=e.copy(_.points),_.points=t,_.stage&&_.stage.update()}}),$=function(e){if(!_.lockControls)if(e.rect1){var t=(n=e).x-n.startX,o=n.y-n.startY;n.rect1.x=n.rect1.startX+t,n.rect1.y=n.rect1.startY+o,n.rect2.x=n.rect2.startX+t,n.rect2.y=n.rect2.startY+o}else{var n,r=e,i=r.other,a=(n=r.ball).index,l=s;if(zot(W[a][4])||(l=W[a][4]),"straight"==l||"mirror"==l){var c=r.x-n.x,u=r.y-n.y;if("mirror"==l)i.x=n.x-c,i.y=n.y-u;else{var d=Math.atan2(u,c),h=-i.stickLength*Math.cos(d+Math.PI),g=-i.stickLength*Math.sin(d+Math.PI);i.x=n.x-h,i.y=n.y-g}}}},Object.defineProperty(_,"move",{get:function(){return p},set:function(e){p!=e&&((p=e)?S():M())}}),Object.defineProperty(_,"interactive",{get:function(){return w},set:function(e){w=e,_.showControls=w,_.allowToggle=w,_.editPoints=w,_.lockControls=!w,_.selectPoints=w,_.move=w,_.points=_.points}}),Object.defineProperty(_,"allowToggle",{get:function(){return g},set:function(e){g!=e&&((g=e)?_.move&&S():!R&&_.move&&M())}}),Object.defineProperty(_,"controlsVisible",{get:function(){return R},set:function(e){(R=e)?_.showControls():_.hideControls()}});var se,ce,ue=d;Object.defineProperty(_,"lockControls",{get:function(){return ue},set:function(e){(ue=e)?(_.controls.mouseChildren=!1,_.controls.mouseEnabled=!1):(_.controls.mouseChildren=!0,_.controls.mouseEnabled=!0)}}),_.lockControls=ue,Object.defineProperty(_,"color",{get:function(){return oe},set:function(e){zot(e)&&(e="black"),oe=e,H.style=oe}}),this.setColorRange=function(e,t){return ce=zot(t)?(se=_.color,e):(se=zot(e)?_.color:e,t),_};var de=0;Object.defineProperty(_,"colorRange",{get:function(){return de},set:function(t){de=t,zot(se)||zot(ce)||(_.color=e.colorRange(se,ce,t))}}),Object.defineProperty(_,"borderColor",{get:function(){return ne},set:function(e){zot(e)||(ne=e,N?N.style=ne:ee())}}),Object.defineProperty(_,"borderWidth",{get:function(){return re},set:function(e){zot(e)||(0<e||(e=0),re=e,V&&0!=re?(V.width=re,f&&(q.segments=[20,10],q.offset=5)):ee())}}),"undefined"!=typeof KEYFOCUS&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==_},set:function(t){e.KEYFOCUS=_}}),_.selectPoints&&!e.KEYFOCUS&&function(){_.keyFocus=!0;var e=document.activeElement;e&&e.blur()}(),Object.defineProperty(_,"points",{get:function(){for(var t,o,n=[],r=0;r<W.length;r++)o=W[r],t=[e.decimals(o[0].x),e.decimals(o[0].y),e.decimals(o[1].x),e.decimals(o[1].y),e.decimals(o[2].x),e.decimals(o[2].y),e.decimals(o[3].x),e.decimals(o[3].y)],o[4]&&"straight"!==o[4]&&t.push(o[4]),n.push(t);return n},set:function(e){_.dispose(!0),r=A(e),_.shape&&(_.shape.graphics.clear(),_.sticks.graphics.clear(),_.controls.noDrag(),_.removeAllChildren(),delete _.shape,delete _.sticks,delete _.controls),P(),_.lockControls=ue}}),Object.defineProperty(_,"pointsAdjusted",{get:function(){var t,o,n=[],r=_.pointObjects;return e.loop(r.length,function(i,a){if(po=r[i],o=W[i],0==po[0].rotation&&0==po[0].scaleX&&0==po[0].scaleY)t=[e.decimals(o[0].x),e.decimals(o[0].y),e.decimals(o[1].x),e.decimals(o[1].y),e.decimals(o[2].x),e.decimals(o[2].y),e.decimals(o[3].x),e.decimals(o[3].y)];else{var l=po[0].localToLocal(po[2].x,po[2].y,po[0].parent),s=po[0].localToLocal(po[3].x,po[3].y,po[0].parent);t=[e.decimals(o[0].x),e.decimals(o[0].y),e.decimals(o[1].x),e.decimals(o[1].y),e.decimals(l.x-o[0].x),e.decimals(l.y-o[0].y),e.decimals(s.x-o[0].x),e.decimals(s.y-o[0].y)]}o[4]&&"mirror"!==o[4]&&t.push(o[4]),n.push(t)}),n},set:function(e){zon&&zog("Bloob() - pointsAdjusted is read only")}}),Object.defineProperty(_,"pointObjects",{get:function(){return W},set:function(e){zon&&zog("Bloob() - pointObjects is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(_,"pointControls",{get:function(){return G},set:function(e){zon&&zog("Bloob() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(_,"pointCircles",{get:function(){return F},set:function(e){zon&&zog("Bloob() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(_,"segmentPoints",{get:function(){var t=_.pointsAdjusted,o=[];return e.loop(t.length,function(e,n){var r=_.getSegmentPoint(t[e],t[e<n-1?e+1:0]);o.push(r)}),o},set:function(e){zon&&zog("Bloob() - segmentPoints is read only")}}),Object.defineProperty(_,"segmentRatios",{get:function(){var t=[],o=0;e.loop(_.segmentPoints,function(n){var r=e.distanceAlongCurve(n);t.push(r),o+=r});var n=[],r=0;return e.loop(t,function(e){r+=e/o,n.push(r)}),n},set:function(e){zon&&zog("Bloob() - segmentRatios is read only")}}),_.getPointAngle=function(t){var o=_.pointObjects[t][0],n=_.pointObjects[t][2],r=_.pointObjects[t][3];if(o==_.stage)var i=new e.Point(n.x,n.y),a=new e.Point(r.x,r.y);else i=o.localToGlobal(n.x,n.y),a=o.localToGlobal(r.x,r.y);return e.angle(i.x,i.y,a.x,a.y)},_.getSegmentPoint=function(e,t){if(!zot(e)&&!zot(t)){0==e[2]&&0==e[3]||(e[4]-=e[2],e[5]-=e[3],e[6]-=e[2],e[7]-=e[3],e[0]+=e[2],e[1]+=e[3],e[2]=0,e[3]=0),0==t[2]&&0==t[3]||(t[4]-=t[2],t[5]-=t[3],t[6]-=t[2],t[7]-=t[3],t[0]+=t[2],t[1]+=t[3],t[2]=0,t[3]=0);var o={x:e[0],y:e[1]},n={x:e[0]+e[6],y:e[1]+e[7]},r={x:t[0]+t[4],y:t[1]+t[5]},i={x:t[0],y:t[1]};return 0==te.x&&0==te.y||(o.x+=te.x,n.x+=te.x,r.x+=te.x,i.x+=te.x,o.y+=te.y,n.y+=te.y,r.y+=te.y,i.y+=te.y),[o,n,r,i]}},_.getAdjacentSegmentData=function(e){zot(e)&&(e=0);var t=_.pointsAdjusted;if(2==_.num)return[[_.getSegmentPoint(t[0],t[1]),_.getSegmentPoint(t[1],t[0])],[0,1]];if(0==e)return[[_.getSegmentPoint(t[_.num-1],t[0]),_.getSegmentPoint(t[0],t[1]),_.getSegmentPoint(t[1],t[2])],[_.num-1,0,1]];if(e>=_.num-1)return[[_.getSegmentPoint(t[_.num-2],t[_.num-1]),_.getSegmentPoint(t[_.num-1],t[0]),_.getSegmentPoint(t[0],t[1])],[_.num-2,_.num-1,0]];var o=e+2>=_.num?0:e+2;return[[_.getSegmentPoint(t[e-1],t[e]),_.getSegmentPoint(t[e],t[e+1]),_.getSegmentPoint(t[e+1],t[o])],[e-1,e,e+1]]},_.getCurvePoint=function(t,o,n,r){zot(o)&&(o=_.segmentRatios),zot(n)&&(n=_.segmentPoints),zot(r)&&(r=!1);var i=o,a=n,l=e.loop(i,function(e,o){if(t<=e)return o}),s=0<l?i[l-1]:0,c=0<l?i[l]-i[l-1]:i[l],u=(t-s)/c,d=e.pointAlongCurve(a[l],u,r);if(!zot(d)){var h=_.localToGlobal(d.x,d.y);return h.angle=d.angle,h.z=l,zot(h)?void 0:h}},this.addPoint=function(e,t){zot(e)&&(e=100);var o=_.points,n=_.segmentRatios;return O(o,_.pointControls,n,e,t),_.points=o,_.num=o.length,_},this.addPoints=function(t,o,n,r,i,a){zot(a)&&(a=e.copy(_.points));var l=e.copy(_.segmentRatios),s=0;if(i&&(_.interpolatedPoints=[]),r)var c=l.length*t;return e.loop(l,function(l,u){i&&O(a,_.pointControls,_.segmentRatios,100*s,o,!zot(n)&&u!=n,i);var d=r?Math.round(c*(l-s)):t,h=1/(d+1);e.loop(d,function(e){var r=s+(l-s)*h*(e+1);O(a,_.pointControls,_.segmentRatios,100*r,o,!zot(n)&&u!=n,i),!i&&0<t&&(_.points=a)}),s=l}),i&&"Squiggle"==_.type&&O(a,_.pointControls,_.segmentRatios,100,o,null,i),_.stage&&_.stage.update(),_.num=a.length,_},this.interpolate=function(e,t,o,n){return zot(e)&&(e=1),_.addPoints(e,"none",t,o,!0,n),_.interpolatedPoints},this.linearGradient=function(e,t,o,n,r,i){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(e,t,o,n,r,i),this},this.radialGradient=function(e,t,o,n,r,i,a,l){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(e,t,o,n,r,i,a,l),this},this.dispose=function(e){if(_.shape){_.shape.cursor="default";for(var t=0;t<_.pointObjects.length;t++)_.pointObjects[t][1].removeAllEventListeners();for(t=0;t<F.length;t++)F[t].removeAllEventListeners();return _.sticks.removeFrom(_),_.controls.removeFrom(_),_.shape.removeAllEventListeners(),_.controls.removeAllEventListeners(),_.off("mousedown",_.toggleEvent),_.off("click",_.clickEvent),_.toggleStageEvent&&_.stage.off("stagemousedown",_.toggleStageEvent),!e&&_.selectPoints&&_.selectionManager.removeAllEventListeners(),!0}}},e.extend(e.Bloob,e.Container,["clone","dispose"],"zimContainer",!1),e.Label=function(t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,j){function L(){var t,n=N.getBounds();"baseline"==d?t=n.y:"top"==d?(N.y=o-o/6,!G&&V&&(V.y=o-o/6),t=0):"center"==d||"middle"==d?(t=-n.height/2,N.y=.3*o,!G&&V&&(V.y=.3*o)):t=-n.height,H.setBounds(n.x,t,_.width?_.width-2*x:n.width,_.height?_.height-2*x:n.height),H.hitArea&&H.hitArea.graphics.c().f("black").r(H.getBounds().x,H.getBounds().y,H.getBounds().width,H.getBounds().height),"center"!=d&&"middle"!=d||(e.pos(N,null,0),e.mov(N,0,1)),f?U&&D():zot(v)||(H.removeChild(H.background),H.background=new e.Rectangle(H.getBounds().width+2*k,H.getBounds().height+2*T,v,b,y,w,C,null,!1),e.center(H.background,H,0),H.setBounds(H.background.x,H.background.y,H.background.width,H.background.height)),"baseline"==d||G||(N.y+=o/32),V&&(G?H.added(function(t){var n=V.getBounds();V.visible=!0;var r=new e.Container(n.x,n.y,n.width,n.height);r.addTo(H),r.addChild(V),r.center(H,H.numChildren-2),"baseline"!=d&&(r.y+=o/16),r.x+=A,r.y+=P,t.update()}):(H.addChild(V),e.center(V,H,H.numChildren-2),"baseline"!=d&&(V.y+=o/32),V.x+=A,V.y+=P,V.visible=!0)),Y()}function D(){var e=f.boundsToGlobal(),t=H.boundsToGlobal(e,!0);H.setBounds(t.x,t.y,t.width,t.height)}function Y(){e.pos(N,"left"==u||"right"==u?f||H.background?k:0:null,"top"==d||"baseline"==d||"bottom"==d?f||H.background?T:0:null,"right"==u,"bottom"==d),N.x+=A,N.y+=P}function X(){for(H.size=200;g<S/2&&(H.height>S||H.width>h);)H.size=H.size/2;for(var e=0;H.height<=S&&H.width<=h&&(e++,H.size=Math.ceil(H.size+1),!(50<e)););H.size=H.size-1}var R;if(R=zob(e.Label,arguments,"text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, lineWidth, lineHeight, fontOptions, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingHorizontal, paddingVertical, shiftHorizontal, shiftVertical, rollPersist, labelWidth, labelHeight, maxSize, style, group, inherit",this))return R;z_d("54"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Label",this.group=O;var _=!1===E?{}:e.getStyle(this.type,this.group,j);zot(t)&&(t=null!=_.text?_.text:"LABEL");var W=t,F=!1;""===(t=e.Pick.choose(t))&&(t=" ",F=!0),zot(o)&&(o=null!=_.size?_.size:36),zot(r)&&(r=null!=_.font?_.font:"arial"),zot(a)&&(a=null!=_.color?_.color:"black"),zot(l)&&(l=null!=_.rollColor?_.rollColor:a),!zot(s)&&"ignore"!=s||(s=null!=_.shadowColor&&"ignore"!=s?_.shadowColor:-1),!zot(c)&&"ignore"!=c||(c=null!=_.shadowBlur&&"ignore"!=c?_.shadowBlur:14),zot(u)&&(u=null!=_.align?_.align:"left"),zot(d)&&(d=null!=_.valign?_.valign:"top"),zot(p)&&(p=null!=_.fontOptions?_.fontOptions:""),zot(m)&&zot(_.outlineColor)||!zot(z)||(z=null!=_.outlineWidth?_.outlineWidth:Math.round(.2*o)),zot(z)&&zot(_.outlineWidth)||!zot(m)||(m=null!=_.outlineColor?_.outlineColor:"#000000"),zot(z)&&(z=null!=_.outlineWidth?_.outlineWidth:0),!zot(v)&&"ignore"!=v||(v=null!=_.backgroundColor&&"ignore"!=v?_.backgroundColor:null),!zot(x)&&"ignore"!=x||(x=null!=_.padding&&"ignore"!=x?_.padding:10),zot(k)&&(k=null!=_.paddingHorizontal?_.paddingHorizontal:x),zot(T)&&(T=null!=_.paddingVertical?_.paddingVertical:x),zot(A)&&(A=null!=_.shiftHorizontal?_.shiftHorizontal:0),zot(P)&&(P=null!=_.shiftVertical?_.shiftVertical:0),zot(h)&&(h=null!=_.lineWidth?_.lineWidth:null),zot(g)&&(g=null!=_.lineHeight?_.lineHeight:null),!zot(f)&&"ignore"!=f||(f=null!=_.backing&&"ignore"!=f?_.backing.clone():null),zot(B)&&null!=_.rollPersist&&_.rollPersist,null!=_.labelWidth&&(h=_.labelWidth),zot(I)||(h=I),"middle"==u&&(u="center"),zot(M)&&null!=_.maxSize&&_.maxSize,o=M?Math.min(o,M):o;var G=void 0!==zimDefaultFrame&&zimDefaultFrame.retina,H=this;this.mouseChildren=!1,this.paddingVertical=T,this.paddingHorizontal=k;var N=this.label=new createjs.Text(String(t),p+" "+o+"px "+r,a);if(N.textAlign=u,N.lineWidth=h,N.lineHeight=g,N.textBaseline="alphabetic",0<z){var V=this.outlineLabel=N.clone();V.color=m,V.outline=z}-1!=s&&0<c&&(N.shadow=new createjs.Shadow(s,3,3,c)),this.addChild(N);var q,K,U=!1;if(zot(f)&&zot(v)){var Z=new createjs.Shape;H.hitArea=Z}if(L(),!zot(f)){if("Pattern"==f.type){H.backing=new e.Container(H.width,H.height,null,null,!1).centerReg(null,null,!1),-1!=s&&0<c&&(new e.Rectangle(H.width-2,H.height-2,"#666",null,null,w,null,null,!1).center(H.backing).shadow=new createjs.Shadow(s,3,3,c));var Q=new e.Rectangle(H.width,H.height,v,null,null,w,null,null,!1).addTo(H.backing);f.centerReg(Q),f.setMask(Q),H.backing.pattern=f}else H.backing=f;H.backing.center(H,0),f=H.backing,D(),U=!0}Y(),Object.defineProperty(H,"text",{get:function(){return" "==N.text&&F?"":N.text},set:function(e){F=!1,""===e&&(e=" ",F=!0),N.text=String(e),V&&(V.text=String(e)),L(),zot(h)||zot(S)||X()}}),Object.defineProperty(H,"size",{get:function(){return o},set:function(e){o=M?Math.min(e,M):e;var t=this.label.font.match(/^(.*\s)(\d*\.?\d*)+px(.*)$/i);t&&(this.label.font=t[1]+e+"px"+t[3],V&&(V.font=t[1]+e+"px"+t[3]),L())}}),Object.defineProperty(H,"color",{get:function(){return a},set:function(t){l==a&&(l=t),a=t,N.color=a,e.OPTIMIZE||!zns&&OPTIMIZE||!H.stage||H.stage.update()}}),this.setColorRange=function(e,t){return K=zot(t)?(q=H.color,e):(q=zot(e)?H.color:e,t),H};var J=0;Object.defineProperty(H,"colorRange",{get:function(){return J},set:function(t){J=t,zot(q)||zot(K)||(H.color=e.colorRange(q,K,t))}}),Object.defineProperty(H,"backgroundColor",{get:function(){return v},set:function(t){v=t,H.background?H.background.color=t:H.backing?H.backing.color=t:setBackground(),e.OPTIMIZE||!zns&&OPTIMIZE||!H.stage||H.stage.update()}}),Object.defineProperty(H,"outlineColor",{get:function(){return m},set:function(t){m=t,V&&(V.color=m),e.OPTIMIZE||!zns&&OPTIMIZE||!H.stage||H.stage.update()}}),Object.defineProperty(H,"rollColor",{get:function(){return l},set:function(e){l=e}}),this._enabled=!0,Object.defineProperty(H,"enabled",{get:function(){return H._enabled},set:function(t){n(H,t),N.color=a,H.mouseChildren=!1,e.OPTIMIZE||!zns&&OPTIMIZE||!H.stage||H.stage.update()}}),this.showRollColor=function(e){return zot(e)&&(e=!0),N.color=e?l:a,H.stage&&H.stage.update(),H},this.mouseoverEvent=this.on("mouseover",function(e){H.showRollColor&&H.showRollColor()}),this.mouseoutEvent=this.on("mouseout",function(e){H.rollPersist||H.showRollColor(!1)}),this.pressupEvent=this.on("pressup",function(e){H.rollPersist&&H.showRollColor(!1)}),Object.defineProperty(H,"labelWidth",{get:function(){return h},set:function(t){0<t&&(h=t,H.label.lineWidth=t),S&&X(),e.OPTIMIZE||!zns&&OPTIMIZE||!H.stage||H.stage.update()}}),Object.defineProperty(H,"labelHeight",{get:function(){return S},set:function(t){0<t&&(S=t),h&&X(),e.OPTIMIZE||!zns&&OPTIMIZE||!H.stage||H.stage.update()}}),zot(h)||zot(S)||X(),i(this,_),this.clone=function(t){return H.cloneProps(new e.Label(t?H.text:W,o,r,a,l,s,c,u,d,h,g,p,zot(f)?null:f.clone(),m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,this.group,j))}},e.extend(e.Label,e.Container,"clone","zimContainer"),e.LabelOnPath=function(t,o,n,r,a,l,s,c,u,d,h){function g(){for(var e=v.numChildren-1;0<=e;e--)v.getChildAt(e).dispose();for(m.numLetters=t.text.length,e=0;e<m.numLetters;e++){var o=t.clone();o.text=t.text[e],o.centerReg(v).reg(null,o.height),""!=o.text&&" "!=o.text&&o.expand(0),m.allowToggle&&(o.cursor="pointer"),o.on("mousedown",function(){m.allowToggle&&m.toggle()})}m.resize()}var p;if(p=zob(e.LabelOnPath,arguments,"label, path, percentAngle, percents, showPath, allowToggle, interactive, onTop, style, group, inherit",this))return p;z_d("54.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelOnPath",this.group=d;var f=!1===u?{}:e.getStyle(this.type,this.group,h);zot(t)&&(t=null!=f.label?f.label:new e.Label("Label on Path")),zot(o)&&(o=null!=f.path?f.path:new e.Squiggle({points:[[0,0,0,0,-86,57,86,-57],[300,150,0,0,-133,21,133,-21]]})),zot(n)&&(n=null!=f.percentAngle?f.percentAngle:100),zot(r)&&(r=null!=f.percents?f.percents:null),zot(a)&&(a=null==f.showPath||f.showPath),zot(l)&&(l=null==f.allowToggle||f.allowToggle),zot(s)&&(s=null==f.interactive||f.interactive),zot(c)&&(c=null!=f.onTop&&f.onTop),o.addTo(this);var m=this;this.path=o,this.allowToggle=l,o.interactive=s,"string"==typeof t&&(t=new e.Label(t));var z=o.alpha;a||o.alp(0),o.onTop=c;var v=this.letters=(new e.Container).addTo(this);if(!r){r=[];for(var b=0;b<t.text.length;b++)r.push(e.decimals(1/(t.text.length-("Bloob"==o.type?0:1))*100*b))}this.percents=r,this.resize=function(){for(var e=o.segmentRatios,t=o.segmentPoints,i=0;i<this.numLetters;i++){var a=o.getCurvePoint(r[i]/100,e,t,!0);if(a){var l=this.globalToLocal(a.x,a.y);l&&v.getChildAt(i).loc(l).rot((180<a.angle?a.angle-360:a.angle)*n/100)}}return this},g(),this.showPath=function(e){return this.toggle(!0),o.toggle(e),this},this.hidePath=function(){return this.toggle(!1),this},Object.defineProperty(m,"text",{get:function(){return t.text},set:function(n){t.text=n,r=[];for(var i=0;i<t.text.length;i++)r.push(e.decimals(1/(t.text.length-("Bloob"==o.type?0:1))*100*i));g()}}),Object.defineProperty(this,"color",{get:function(){return color},set:function(e){color=e;for(var t=0;t<m.letters.numChildren;t++)m.letters.getChildAt(t).color=color;m.stage&&m.stage.update()}}),Object.defineProperty(m,"interactive",{get:function(){return s},set:function(t){s=t,o.interactive=t,this.ticker&&e.Ticker.remove(this.ticker),s&&(this.ticker=e.Ticker.add(function(){m.resize()}))}}),this.interactive&&(this.ticker=e.Ticker.add(function(){m.resize()}));var y=m.toggled=a;this.toggle=function(e){if(this.allowToggle)return(y=zot(e)?!y:!!e)?(o.alp(z),this.interactive&&(o.showControls(),v.mouseEnabled=!1,v.mouseChildren=!1,v.cursor="default",this.controlHideEvent&&o.off("controlshide",this.controlHideEvent),this.controlHideEvent=o.on("controlshide",function(){v.mouseEnabled=!0,v.mouseChildren=!0,v.cursor="pointer",z=o.alpha,o.alp(0),y=!1,m.toggled=y},null,!0))):(z=o.alpha,o.alp(0),v.mouseEnabled=!0,v.mouseChildren=!0,v.cursor="pointer"),m.toggled=y,m.stage.update(),m},i(this,f),this.clone=function(){return m.cloneProps(new e.LabelOnPath(m.label.clone(),m.path.clone(),n,e.copy(r),a,l,s,c,u,this.group,h))},this.dispose=function(){return this.ticker&&e.Ticker.remove(this.ticker),this.zimContainer_dispose(),!0}},e.extend(e.LabelOnPath,e.Container,["clone","dispose"],"zimContainer",!1),e.LabelOnArc=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z){var v;if(v=zob(e.LabelOnArc,arguments,"label, size, font, color, radius, flip, spacing, letterSpacing, angles, showCircle, arcColor, arcBorderColor, arcBorderWidth, style, group, inherit",this))return v;z_d("54.55"),this.group=m;var b=!1===f?{}:e.getStyle("LabelOnArc",this.group,z);zot(o)&&(o=null!=b.size?b.size:30),zot(t)&&(t=null!=b.label?b.label:new e.Label("Label on Arc",o)),zot(n)&&(n=null!=b.font?b.font:"verdana"),zot(r)&&(r=null!=b.color?b.color:"white"),zot(a)&&(a=null!=b.radius?b.radius:100),zot(l)&&(l=null!=b.flip&&b.flip),zot(s)&&(s=null!=b.spacing?b.spacing:0),zot(c)&&(c=null!=b.letterSpacing?b.letterSpacing:5),zot(u)&&(u=null!=b.angles?b.angles:null),zot(d)&&(d=null!=b.showCircle&&b.showCircle),zot(h)&&(h=null!=b.arcColor?b.arcColor:null),zot(g)&&(g=null!=b.arcBorderColor?b.arcBorderColor:null),zot(p)&&(p=null!=b.arcBorderWidth?b.arcBorderWidth:null);var y=this.outerRadius=a+s+t.height;this.innerRadius=a+s,this.zimContainer_constructor(-y,-y,2*y,2*y,!1),this.type="LabelOnArc";var w=this;if("Label"!=t.type&&(t=new e.Label(t,o,n,r)),w.text=t.text,l){var C=t.text.split("").reverse().join("");t.text=C}var x=w.letters=new e.Container(this.width,this.height).centerReg(this),k=0,T=[0];w.numLetters=t.text.length;for(var A=w.labels=[],P=0;P<w.numLetters;P++){var B=t.clone();A.push(B),B.text=t.text[P];var I=180*Math.atan((B.width+c)/2/(a+s))/Math.PI*2;T.push(I),k+=I;var S=new Container(B.width,B.height);B.centerReg(S).rot(l?180:0),S.centerReg(x).reg(null,a+s+B.height+(l?.13*B.height:0))}if(u){for(P=k=0;P<u.length;P++)k+=u[P];k+=u[u.length-1]/2}else{u=[];for(P=0;P<T.length-1;P++)u[P]=Math.round((T[P]+T[P+1])/2*100)/100}this.letterHeight=t.height,this.angles=u;var M=this.startAngle=-k/2,E=M;for(P=0;P<x.numChildren;P++)B=x.getChildAt(P),u[P],E=B.rotation=E+u[P];var O=this.circle=new e.Circle(a);d&&O.addTo(this);var j=this.arc=(new e.Shape).addTo(this);(h||g||p)&&(0<p&&zot(g)?g="#000000":zot(p)&&!zot(g)&&(p=2),j.graphics.f(null).s(g).ss(p).arc(0,0,a,(M-90)*Math.PI/180,(M-90+k)*Math.PI/180)),Object.defineProperty(this,"color",{get:function(){return r},set:function(e){r=e;for(var t=0;t<w.labels.length;t++)w.labels[t].color=r;w.stage&&w.stage.update()}}),i(this,b),this.clone=function(){return w.cloneProps(new e.LabelOnArc(t,o,n,r,a,l,s,c,u,d,h,g,p,f,this.group,z))}},e.extend(e.LabelOnArc,e.Container,"clone","zimContainer",!1),e.LabelLetters=function(t,o,n,r,a,l,s,c){var u;if(u=zob(e.LabelLetters,arguments,"label, align, valign, letterSpacing, spacings, style, group, inherit",this))return u;z_d("54.57"),this.group=s;var d=!1===l?{}:e.getStyle("LabelOnArc",this.group,c);zot(t)&&(t=null!=d.label?d.label:new e.Label("Label Letters")),zot(o)&&(o=null!=d.align?d.align:"center"),zot(n)&&(n=null!=d.valign?d.valign:"center"),zot(r)&&(r=null!=d.letterSpacing?d.letterSpacing:5),zot(a)&&(a=null==d.spacings||d.spacings),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelLetters";var h=this;if("Label"!=t.type&&(t=new e.Label(t)),h.text=t.text,h.numLetters=t.text.length,!a||!Array.isArray(a)){a=[];for(var g=0;g<h.numLetters-1;g++)a.push(r)}for(h.spacings=a,h.labels=[],g=0;g<h.numLetters;g++){var p=t.clone();h.labels.push(p),p.text=t.text[g],p.regX="left"==o?0:"right"==o?p.width:p.width/2,p.regY="top"==n?0:"bottom"==n?p.height:p.height/2,p.pos(-p.width,0,!0,!1,this),0<g&&p.mov(a[g-1]?a[g-1]:0)}this.regX=this.getBounds().x,this.regY=this.getBounds().y,Object.defineProperty(this,"color",{get:function(){return color},set:function(e){color=e;for(var t=0;t<h.numChildren;t++)h.getChildAt(t).color=color;h.stage&&h.stage.update()}}),i(this,d),this.clone=function(){return h.cloneProps(new e.LabelLetters(t,o,n,r,a,l,this.group,c))}},e.extend(e.LabelLetters,e.Container,"clone","zimContainer",!1),e.Button=function(t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,j,L,D,Y,X,R,_,W,F,G,H,N,V,q,K,U,Z){function Q(n,r){ue[n]=new e.Container(t,o,null,null,!1).centerReg(null,null,!1),-1!=p&&0<f&&(new e.Rectangle(t-2,o-2,"#666",null,null,g,null,null,!1).center(ue[n]).shadow=new createjs.Shadow(p,3,3,f));var i=ue[n].mask=new e.Rectangle(t,o,0<=n.indexOf("roll")?l:a,null,null,g,null,null,!1).addTo(ue[n]);return r.centerReg(i),r.setMask(i.shape),ue[n].pattern=r,ue[n]}function J(){(me=new createjs.Shape).graphics.f("#000").r(-m,-m,t+2*m,o+2*m),ue.hitArea=fe=me}function $(){ue.toggled?(zot(T)||(ue.text=T),ue.rolled?(ue.rollToggleBacking?oe("rollToggleBacking",ue.rollToggleBacking):ue.toggleBacking&&oe("toggleBacking",ue.toggleBacking),ue.rollToggleIcon?oe("rollToggleIcon",ue.rollToggleIcon):ue.toggleIcon&&oe("toggleIcon",ue.toggleIcon)):(ue.toggleBacking&&oe("toggleBacking",ue.toggleBacking),ue.toggleIcon&&oe("toggleIcon",ue.toggleIcon))):(ue.text=Ce,ee()),ue.stage&&ue.stage.update()}function ee(){ue.rolled?(zot(y)&&!ue.rollBacking&&(ue.backing.color=l),ue.rollBacking?oe("rollBacking",ue.rollBacking):ue.backing&&oe("backing",ue.backing),ue.rollIcon?oe("rollIcon",ue.rollIcon):ue.icon?oe("icon",ue.icon):oe("icon")):(zot(y)&&(ue.backing.color=a),ue.backing&&oe("backing",ue.backing),ue.icon?oe("icon",ue.icon):oe("icon"))}function te(){zot(M)&&zot(R)&&zot(_)||ue.waiting||(Be=!0,zot(X)&&(X=!0),Y&&(Ae=ue.stage.on("stagemousedown",function(e){ue.hitTestPoint(e.stageX/e.target.stage.scaleX,e.stageY/e.target.stage.scaleY)||ue.clearWait()},null,!0)),setTimeout(function(){ue.waiting=!0},50),ke=r.text,zot(L)||(ue.label.color=L),zot(D)||(ue.label.rollColor=D),Te=ue.enabled,!X&&ue.enabled&&(ue.enabled=!1),zot(M)||(ue.text=M),ue.rolled?(zot(y)&&!ue.rollWaitBacking&&(ue.backing.color=j),ue.rollWaitBacking?oe("rollWaitBacking",ue.rollWaitBacking):ue.waitBacking&&oe("waitBacking",ue.waitBacking),ue.rollWaitIcon?oe("rollWaitIcon",ue.rollWaitIcon):ue.waitIcon&&oe("waitIcon",ue.waitIcon)):(zot(y)&&!ue.waitBacking&&(ue.backing.color=O),ue.waitBacking&&oe("waitBacking",ue.waitBacking),ue.waitIcon&&oe("waitIcon",ue.waitIcon)),zot(E)&&(E=3e4),xe&&xe.clear(),xe=e.timeout(E,function(){ue.enabled||(ue.enabled=Te),ue.clearWait(),ue.dispatchEvent("waited")}),ue.stage&&ue.stage.update())}function oe(e){if(0<=e.indexOf("con")){for(var t=0;t<ze.length;t++){var o=ze[t],n=ue[o];ue.removeChild(n)}ue[e]&&ue.addChildAt(ue[e],1)}else{if(!ue[e])return;for(t=0;t<ge.length;t++){var r=ge[t],i=ue[r];ue.removeChild(i)}ue[e]&&ue.addChildAt(ue[e],0)}}function ne(){ue.rolled=!1,Be||ue.waiting?(zot(y)&&zot(ue.waitBacking)&&(ue.backing.color=zot(O)?a:O),ue.waitBacking?oe("waitBacking",ue.waitBacking):oe("backing",ue.backing),ue.waitIcon?oe("waitIcon",ue.waitIcon):ue.icon?oe("icon",ue.icon):oe("icon")):ue.toggled&&ce?(zot(y)&&zot(ue.toggleBacking)&&(ue.backing.color=a),ue.toggleBacking?oe("toggleBacking",ue.toggleBacking):oe("backing",ue.backing),ue.toggleIcon?oe("toggleIcon",ue.toggleIcon):ue.icon?oe("icon",ue.icon):oe("icon")):(zot(y)?ue.backing.color=a:zot(y.mask)||(ue.backing.mask.color=a),oe("backing",ue.backing),ue.icon?oe("icon",ue.icon):oe("icon")),ue.border&&(ue.border.borderColor=u),ue.label.showRollColor&&ue.label.showRollColor(!1),ue.stage&&ue.stage.update()}function re(e,n){return zot(e)||(ue.contains(ue[e])&&(ue.removeChild(ue[e]),n&&ue.addChildAt(n,0<=e.indexOf("con")?ue.numChildren-1:0),ue.stage&&ue.stage.update()),n?(zot(y)&&"backing"==e&&(y=n),"Pattern"==n.type&&(n=Q(e,n)),ue[e]=n,ue[e].x=t/2,ue[e].y=o/2):ue[e]=null),ue}var ie;if(ie=zob(e.Button,arguments,"width, height, label, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, borderRollColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, waitBacking, rollWaitBacking, waitIcon, rollWaitIcon, align, valign, indent, indentHorizontal, indentVertical, style, group, inherit",this))return ie;z_d("55"),this.group=U;var ae=!1===K?{}:e.getStyle("Button",U,Z);zot(t)&&(t=null!=ae.width?ae.width:200),zot(o)&&(o=null!=ae.height?ae.height:60),this.zimContainer_constructor(t,o,null,null,!1),this.type="Button",zot(a)&&(a=null!=ae.backgroundColor?ae.backgroundColor:"#C60"),a=zik(a),zot(l)&&(l=null!=ae.rollBackgroundColor?ae.rollBackgroundColor:"#F93"),l=zik(l),zot(s)&&(s=null!=ae.color?ae.color:"white"),zik(s),zot(c)&&(c=null!=ae.rollColor?ae.rollColor:"white"),zik(c),zot(O)&&(O=null!=ae.waitBackgroundColor?ae.waitBackgroundColor:a),zot(j)&&(j=null!=ae.rollWaitBackgroundColor?ae.rollWaitBackgroundColor:l);var le=u,se=h;zot(u)&&(u=null!=ae.borderColor?ae.borderColor:null),zot(h)&&(h=null!=ae.borderWidth?ae.borderWidth:null),u<0||h<0?u=h=null:null!=u&&null==h&&(h=1),zot(d)&&(d=null!=ae.borderRollColor?ae.borderRollColor:u),zot(g)&&(g=null!=ae.corner?ae.corner:20),zot(p)&&(p=null!=ae.shadowColor?ae.shadowColor:"rgba(0,0,0,.3)"),zot(f)&&(f=null!=ae.shadowBlur?ae.shadowBlur:14),zot(m)&&(m=null!=ae.hitPadding?ae.hitPadding:0),zot(G)&&(G=null!=ae.align?ae.align:"center"),zot(H)&&(H=null!=ae.valign?ae.valign:"center"),zot(N)&&(N=null!=ae.indent?ae.indent:10),zot(V)&&(V=null!=ae.indentHorizontal?ae.indentHorizontal:N),zot(q)&&(q=null!=ae.indentVertical?ae.indentVertical:N),zot(z)&&(z=null!=ae.gradient?ae.gradient:0),zot(v)&&(v=null!=ae.gloss?ae.gloss:0),zot(r)&&(r=zot(x)?null!=ae.label?ae.label:"PRESS":"");var ce=(!zot(T)||!zot(A)||!zot(P)||!zot(B)||!zot(I))&&zot(M)&&zot(R)&&zot(_);ce&&zot(S)&&(S=e.mobile()?"mousedown":"click"),"string"!=typeof r&&"number"!=typeof r||(r=new e.Label({text:r,size:null!=ae.size?ae.size:36,font:null!=ae.font?ae.font:"arial",color:null!=ae.color?ae.color:s,rollColor:null!=ae.rollColor?ae.rollColor:c,align:G,valign:H,rollPersist:null!=ae.rollPersist&&ae.rollPersist,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",shiftVertical:null!=ae.shiftVertical?ae.shiftVertical:0,shiftHorizontal:null!=ae.shiftHorizontal?ae.shiftHorizontal:0,style:!1,group:this.group})),zot(C)&&(C=null!=ae.rollPersist&&ae.rollPersist),this.rollPersist=C,zot(b)&&(b=null!=ae.dashed&&ae.dashed),zot(T)||"Label"!=T.type||zon&&zog("ZIM Button() - do not pass Label to toggle parameter - just pass a String");var ue=this;this.mouseChildren=!1,this.cursor="pointer",ue.focus=!1,ue.rolled=!1,zot(y)&&(y=null!=ae.backing?ae.backing.clone():null),zot(y)?ue.backing=new e.Rectangle(t,o,a,null,null,g,b,null,!1).centerReg(null,null,!1):ue.backing=y,ue.rollBacking=zot(w)?null!=ae.rollBacking?ae.rollBacking.clone():null:w,ue.waitBacking=zot(R)?null!=ae.waitBacking?ae.waitBacking.clone():null:R,ue.rollWaitBacking=zot(_)?null!=ae.rollWaitBacking?ae.rollWaitBacking.clone():null:_,ue.toggleBacking=zot(A)?null!=ae.toggleBacking?ae.toggleBacking.clone():null:A,ue.rollToggleBacking=zot(P)?null!=ae.rollToggleBacking?ae.rollToggleBacking.clone():null:P;for(var de,he,ge=["backing","rollBacking","toggleBacking","rollToggleBacking","waitBacking","rollWaitBacking"],pe=0;pe<ge.length;pe++)de=ge[pe],(he=ue[de])&&("Pattern"==he.type?he=Q(de,he):-1!=p&&0<f&&(he.shadow=new createjs.Shadow(p,3,3,f)),he.x=t/2,he.y=o/2);ue.addChild(ue.backing),h&&(ue.border=new e.Rectangle(t,o,"rgba(0,0,0,0)",u,h,g,b,null,!1),ue.addChild(ue.border)),ue.icon=zot(x)?null!=ae.icon?ae.icon.clone():null:x,ue.rollIcon=zot(k)?null!=ae.rollIcon?ae.rollIcon.clone():null:k,ue.waitIcon=zot(W)?null!=ae.waitIcon?ae.waitIcon.clone():null:W,ue.rollWaitIcon=zot(F)?null!=ae.rollWaitIcon?ae.rollWaitIcon.clone():null:F,ue.toggleIcon=zot(B)?null!=ae.toggleIcon?ae.toggleIcon.clone():null:B,ue.rollToggleIcon=zot(I)?null!=ae.rollToggleIcon?ae.rollToggleIcon.clone():null:I;var fe,me,ze=["icon","rollIcon","toggleIcon","rollToggleIcon","waitIcon","rollWaitIcon"];for(pe=0;pe<ze.length;pe++){var ve=ze[pe],be=ue[ve];be&&(be.x=t/2,be.y=o/2)}if(ue.icon&&ue.addChild(ue.icon),Array.isArray(g)||(g=[g,g,g,g]),0<z){var ye=new createjs.Shape;ye.graphics.lf(["rgba(255,255,255,"+z+")","rgba(0,0,0,"+z+")"],[0,1],0,0,0,o-h),ye.graphics.rc(h/2,h/2,t-h,o-h,g[0],g[1],g[2],g[3]),this.addChild(ye)}if(0<v){var we=new createjs.Shape;we.graphics.f("rgba(255,255,255,"+v+")"),we.graphics.rc(h/2,h/2,t-h,(o-h)/2,g[0],g[1],0,0),we.graphics.f("rgba(0,0,0,"+v+")"),we.graphics.rc(h/2,o/2,t-h,(o-h)/2,0,0,g[2],g[3]),this.addChild(we)}if(0<m&&J(),this.addChild(r),r.center(this),r.y+=1,this.label=r,e.pos(r,"left"==G||"right"==G?V:null,"top"==H||"bottom"==H?q:null,"right"==G,"bottom"==H),this.toggled=!1,ce){var Ce=r.text;this.on(S,function(){ue.toggled=!ue.toggled,$()})}var xe,ke,Te,Ae,Pe=!(this.toggle=function(e){return ce?(zot(e)?ue.toggled=!ue.toggled:ue.toggled=e,$()):zon&&zog("zim.Button() - can't toggle with wait parameters provided"),ue}),Be=ue.waiting=!1,Ie=ue.label.color,Se=ue.label.rollColor,Me=this.on("mousedown",function(){Pe=!0,te()});this.wait=function(){te()},this.clearWait=function(){return xe&&(Ae&&ue.stage.off("stagemousedown",Ae),xe.clear(),ue.text=ke,ee(),ue.label.color=Ie,ue.label.rollColor=Se,setTimeout(function(){ue.waiting=!1},55),Be=!1,ue.stage&&ue.stage.update()),ue},this.removeWait=function(){return ue.clearWait(),M=null,ue.waitBacking=null,ue.rollWaitBacking=null,ue.off("mousedown",Me),ue},this.on("pressup",function(){Pe=!1,ue.rollPersist&&!Ee&&ne()});var Ee=!1;this.on("mouseover",function(e){ue.rolled=!0,Ee=!0,Be?(zot(y)&&zot(ue.rollWaitBacking)&&(ue.backing.color=zot(j)?l:j),oe("rollWaitBacking",ue.rollWaitBacking),ue.rollWaitIcon&&oe("rollWaitIcon",ue.rollWaitIcon)):ce&&ue.toggled?(zot(y)&&zot(ue.rollToggleBacking)&&(ue.backing.color=l),oe("rollToggleBacking",ue.rollToggleBacking),ue.rollToggleIcon&&oe("rollToggleIcon",ue.rollToggleIcon)):(zot(y)?ue.backing.color=l:zot(y.mask)||(ue.backing.mask.color=l),oe("rollBacking",ue.rollBacking),ue.rollIcon&&oe("rollIcon",ue.rollIcon)),ue.border&&(ue.border.borderColor=d),ue.label.showRollColor&&ue.label.showRollColor(),ue.stage&&ue.stage.update()}),this.on("mouseout",function e(t){Ee=!1,ue.off("mouseout",e),ue.rollPersist&&Pe||ne()}),Object.defineProperty(ue,"text",{get:function(){return" "==r.text?"":r.text},set:function(e){r.text=e,r.center(this),r.y+=1}}),Object.defineProperty(ue,"color",{get:function(){return s},set:function(t){s=t,ue.label&&!zot(ue.label.color)&&(ue.label.color=s),e.OPTIMIZE||!zns&&OPTIMIZE||!ue.stage||ue.stage.update()}}),Object.defineProperty(ue,"rollColor",{get:function(){return c},set:function(e){c=e,ue.label&&(ue.label.rollColor=c)}}),Object.defineProperty(ue,"backgroundColor",{get:function(){return a},set:function(t){a=t,ue.backing.color?ue.backing.color=a:ue.backing.mask&&(ue.backing.mask.color=a),e.OPTIMIZE||!zns&&OPTIMIZE||!ue.stage||ue.stage.update()}}),Object.defineProperty(ue,"rollBackgroundColor",{get:function(){return l},set:function(e){l=e,ue.rollBacking&&ue.rollBacking.color?ue.rollBacking.color=l:ue.rollBacking&&ue.rollBacking.mask&&(ue.rollBacking.mask.color=l)}}),Object.defineProperty(ue,"borderColor",{get:function(){return u},set:function(e){u=e,ue.rolled||(ue.backing&&ue.backing.borderColor&&(ue.backing.borderColor=e),ue.border&&(ue.border.borderColor=e))}}),Object.defineProperty(ue,"borderRollColor",{get:function(){return d},set:function(e){d=e,ue.rolled&&(ue.backing&&ue.backing.borderColor&&(ue.backing.borderColor=e),ue.border&&(ue.border.borderColor=e))}}),Object.defineProperty(ue,"hitPadding",{get:function(){return m},set:function(e){0==(m=e)?fe&&(this.hitArea=null):J()}}),this._enabled=!0,this.startMouseChildren=this.mouseChildren,Object.defineProperty(ue,"enabled",{get:function(){return ue._enabled},set:function(t){ue._enabled&&(ue.startMouseChildren=ue.mouseChildren),t?(n(ue,t),ue.mouseChildren=ue.startMouseChildren):(ne(),n(ue,t)),r.color=r.color,e.OPTIMIZE||!zns&&OPTIMIZE||!ue.stage||ue.stage.update()}}),this.setBacking=function(e,t){re(e,t)},!(this.setIcon=function(e,t){re(e,t)})!==K&&!1!==K&&i(this,ae),this.clone=function(){var n=new e.Button(t,o,r.clone(),a,l,s,c,le,d,se,g,p,f,m,z,v,b,zot(y)?null:ue.backing.clone(),zot(w)?null:ue.rollBacking.clone(),C,zot(x)?null:x.clone(),zot(k)?null:k.clone(),T,zot(A)?null:A.clone(),zot(P)?null:P.clone(),zot(B)?null:B.clone(),zot(I)?null:I.clone(),S,M,E,O,j,L,D,Y,X,zot(R)?null:R.clone(),zot(_)?null:_.clone(),zot(W)?null:W.clone(),zot(F)?null:F.clone(),G,H,N,V,q,K,this.group);return ue.cloneProps(n)}},e.extend(e.Button,e.Container,"clone","zimContainer",!1),e.CheckBox=function(t,o,r,a,l,s,c,u,d,h,p,f,m,z,v){function b(e){C=!C,x.setChecked(C),x.dispatchEvent("change")}var y;if(y=zob(e.CheckBox,arguments,"size, label, startChecked, color, backgroundColor, borderColor, borderWidth, corner, margin, indicatorType, indicatorColor, tap, style, group, inherit",this))return y;z_d("56"),this.zimContainer_constructor(null,null,null,null,!1),this.type="CheckBox",this.group=z;var w=!1===m?{}:e.getStyle(this.type,this.group,v);zot(t)&&(t=null!=w.size?w.size:60),zot(o)&&(o=null!=w.label?w.label:null),zot(r)&&(r=null!=w.startChecked&&w.startChecked);var C=r;zot(a)&&(a=null!=w.color?w.color:"#111"),zot(l)&&(l=null!=w.backgroundColor?w.backgroundColor:"rgba(255,255,255,.8)"),zot(s)&&(s=null!=w.borderColor?w.borderColor:"#111"),zot(c)&&(c=null!=w.borderWidth?w.borderWidth:t/10),s<0||c<0?s=c=null:null!=s&&null==c&&(c=t/10),zot(u)&&(u=null!=w.corner?w.corner:0),"string"!=typeof o&&"number"!=typeof o||(o=new e.Label({text:o,size:5*t/6,color:a,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),zot(d)&&(d=null!=w.margin?w.margin:t/5),"box"!=h&&"square"!=h&&"x"!=h&&(h=null!=w.indicatorType?w.indicatorType:"check"),zot(p)&&(p=null!=w.indicatorColor?w.indicatorColor:0<c?s:"black"),this.setBounds(-d,-d,t+2*d,t+2*d),zot(f)&&(f=null!=w.tap&&w.tap);var x=this;this.cursor="pointer";var k=new e.Rectangle(t,t,l,null,null,u),T=new e.Rectangle(5*t/7,5*t/7,"rgba(0,0,0,0)",s,c,u);T.x=t/7,T.y=t/7,this.addChild(k,T);var A=t;o&&(o.center(x),o.x=x.getBounds().width,this.label=o,this.setBounds(-d,-d,t+3*d+o.getBounds().width,Math.max(t+2*d,o.getBounds().height)),A=o.x+o.width);var P=new e.Shape({style:!1});g=P.graphics,g.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,A+2*d,this.getBounds().height),this.hitArea=P;var B=new e.Shape({style:!1}),I=B.graphics;"check"==h?I.f(p).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):"box"==h||"square"==h?I.f(p).dr(-35,-35,70,70):I.f(p).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),B.setBounds(-47.5,-47.5,95,95);var S=t/161;B.scaleX=B.scaleY=S,B.alpha=.9,B.x=t/2,B.y=t/2,C&&this.addChild(B),f?this.tap(b):this.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",b),Object.defineProperty(x,"checked",{get:function(){return C},set:function(e){x.setChecked(e)}}),this.toggle=function(e){zot(e)&&(e=!C),x.setChecked(e)},Object.defineProperty(x,"toggled",{get:function(){return C},set:function(e){x.setChecked(e)}}),Object.defineProperty(x,"text",{get:function(){if(o)return o.text},set:function(t){o&&(o.text=t,e.OPTIMIZE||!zns&&OPTIMIZE||!x.stage||x.stage.update())}}),Object.defineProperty(B,"indicatorColor",{get:function(){return p},set:function(o){C&&x.removeChild(B),B=new createjs.Shape,I=B.graphics,p=o,I.f(p).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),B.scaleX=B.scaleY=S,B.alpha=.9,B.x=t/2,B.y=t/2,C&&x.addChild(B),e.OPTIMIZE||!zns&&OPTIMIZE||!x.stage||x.stage.update()}}),Object.defineProperty(x,"indicator",{get:function(){return B},set:function(e){zog("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(x,"enabled",{get:function(){return x._enabled},set:function(e){n(x,e)}}),!(this.setChecked=function(t){return zot(t)&&(t=!0),(C=t)?x.addChild(B):x.removeChild(B),e.OPTIMIZE||!zns&&OPTIMIZE||!x.stage||x.stage.update(),x})!==m&&i(this,w),this.clone=function(){return x.cloneProps(new e.CheckBox(t,o?o.clone():"",r,a,l,s,c,u,d,h,p,f,m,this.group,v))}},e.extend(e.CheckBox,e.Container,"clone","zimContainer",!1),e.RadioButtons=function(t,o,r,a,l,s,c,u,d,h,g,p,f,m){function z(e){var t=k.getChildIndex(e.target);h&&w.selectedIndex==t||(w.setSelected(t),w.dispatchEvent("change"))}var v;if(v=zob(e.RadioButtons,arguments,"size, buttons, vertical, color, backgroundColor, borderColor, borderWidth, spacing, margin, always, indicatorColor, style, group, inherit",this))return v;z_d("57"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadioButtons",this.group=f;var b=!1===p?{}:e.getStyle(this.type,this.group,m);zot(t)&&(t=null!=b.size?b.size:60),t=Math.max(5,t),zot(o)&&(o=null!=b.buttons?b.buttons:["A","B","C"]),zot(r)&&(r=null==b.vertical||b.vertical),zot(a)&&(a=null!=b.color?b.color:"#111"),zot(l)&&(l=null!=b.backgroundColor?b.backgroundColor:"rgba(255,255,255,.8)"),zot(s)&&(s=null!=b.borderColor?b.borderColor:"#111"),zot(c)&&(c=null!=b.borderWidth?b.borderWidth:t/9),s<0||c<0?s=c=null:null!=s&&null==c&&(c=t/10),zot(u)&&(u=r?null!=b.spacing?b.spacing:.2*t:null!=b.spacing?b.spacing:t),zot(d)&&(d=null!=b.margin?b.margin:t/5),zot(g)&&(g=null!=b.indicatorColor?b.indicatorColor:0<c?s:"black");var y,w=this;if(this.cursor="pointer",this.labels=[],this.indicators=[],"string"==typeof o){var C=o;o=[];for(var x=0;x<C.length;x++)o.push({label:C[x]})}var k=new e.Container({style:!1});this.addChild(k),function(){for(var n,i,h=!1,p=o.length-1;0<=p;p--)(n=o[p]).selected&&!0===n.selected&&(h?n.selected="false":(h=!0,w.id=n.id));k.removeAllChildren(),w.buttons=[];var f=0;for(p=0;p<o.length;p++){if("string"==typeof(n=o[p])||"number"==typeof n){n={selected:!1,label:new e.Label({text:n,size:5*t/6,color:null!=b.color?b.color:a,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:w.group})}}(n.label&&"string"==typeof n.label||"number"==typeof n.label)&&(n.label=new e.Label({text:n.label,size:null!=b.size?b.size:5*t/6,color:null!=b.color?b.color:a,valign:"center"})),w.labels.push(n.label),n.index=p,o[p]=n,(i=function(o,n){var r=new e.Container({style:!1});w.buttons.push(r),r.mouseChildren=!1,r.setBounds(-d,-d,t+2*d,t+2*d);var i=new e.Shape({style:!1}),a=i.graphics;a.f(l).dc(t/2,t/2,t/1.85),a.s(s).ss(c).dc(t/2,t/2,t/2-t/2/5),r.addChild(i);var u=r.check=new e.Circle(t/5.2,g,null,null,null,null,null,!1);w.indicators.push(u),u.mouseEnabled=!1,u.alpha=.95,u.regX=u.regY=-t/2;var h=t;n&&(r.addChild(n),n.x=r.getBounds().width,n.y=t/2,r.setBounds(-d,-d,t+2*d+n.getBounds().width,Math.max(t+2*d,n.getBounds().height)),h=n.x+n.width,r.text=n.text),o&&(r.addChild(u),w.label=n,w.label&&(w.text=n.text));var p=new e.Shape({style:!1});return(a=p.graphics).f("rgba(0,0,0,.01)").r(r.getBounds().x,r.getBounds().y,h+2*d,r.getBounds().height),r.hitArea=p,r}(n.selected,n.label)).type="RadioButton",(i.obj=n).selected&&(y=i.obj),k.addChild(i),r?(i.y=f,f+=i.getBounds().height+u):(i.x=f,f+=i.getBounds().width+u)}}();for(var T=0;T<k.numChildren;T++)k.getChildAt(T).on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",z);this.getBounds()||this.setBounds(0,0,t,t),this.setBounds(-d,-d,this.getBounds().width+2*d,this.getBounds().height),this.setSelected=function(t){if(zot(t)&&(t=-1),-1==t||k.getChildAt(t)){for(var o,n=0;n<k.numChildren;n++)(o=k.getChildAt(n)).removeChild(o.check);if(0<=t){o=k.getChildAt(t);var r=-2;y&&(r=y.index),y=o.obj}return-1==t||r==y.index?(y=null,w.id=null,w.label=null,w.text=""):(o.addChild(o.check),w.id=y.id,w.label=y.label,w.label&&(w.text=w.label.text)),e.OPTIMIZE||!zns&&OPTIMIZE||!w.stage||w.stage.update(),w}},Object.defineProperty(w,"selected",{get:function(){return y},set:function(e){zog("ZIM RadioButton - selected is read only")}}),Object.defineProperty(w,"selectedIndex",{get:function(){return y?y.index:-1},set:function(e){var t=e;h&&w.selectedIndex==t||w.setSelected(t)}}),this._enabled=!0,Object.defineProperty(w,"enabled",{get:function(){return w._enabled},set:function(e){n(w,e)}}),i(this,b),this.clone=function(){for(var n=e.copy(o),i=0;i<n.length;i++)n[i].label=n[i].label.clone();return w.cloneProps(new e.RadioButtons(t,n,r,a,l,s,c,u,d,h,g,p,this.group,m))}},e.extend(e.RadioButtons,e.Container,"clone","zimContainer",!1),e.Toggle=function(t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k){function T(e){var t=B.indicator.x,n=y;if(!0===e&&(n=0),"rectangle"==c||"square"==c?B.indicator.pos(.2*o,null,B.toggled):B.indicator.pos(.175*o,null,B.toggled),0<y&&B.indicator.animate({props:{x:t},from:!0,time:n}),B.background.color=B.toggled?h:l,B.text=B.toggled?B.label?B.label.text:"on":B.labelLeft?B.labelLeft.text:"off",B.zimAccessibility){var r="Toggle set to "+(B.toggled?B.label?B.label.text+".":"on.":B.labelLeft?B.labelLeft.text+".":"off.");setTimeout(function(){B.zimAccessibility.talk(r)},50)}}var A;if(A=zob(e.Toggle,arguments,"width, height, label, startToggled, backgroundColor, margin, indicatorType, indicatorColor, tap, toggleBackgroundColor, color, borderColor, borderWidth, corner, indicatorCorner, shadowColor, shadowBlur, time, labelLeft, style, group, inherit",this))return A;z_d("57.5"),this.group=x;var P=!1===C?{}:e.getStyle("Toggle",this.group,k);zot(t)&&(t=null!=P.width?P.width:80),zot(o)&&(o=null!=P.height?P.height:50),this.zimContainer_constructor(t,o,null,null,!1),this.type="Toggle",zot(l)&&(l=null!=P.backgroundColor?P.backgroundColor:"#C60"),zot(s)&&(s=null!=P.margin?P.margin:10),zot(c)&&(c=null!=P.indicatorType?P.indicatorType:"circle"),zot(u)&&(u=null!=P.indicatorColor?P.indicatorColor:"#fff"),zot(h)&&(h=null!=P.toggleBackgroundColor?P.toggleBackgroundColor:"#F93"),zot(g)&&(g=null!=P.color?P.color:"#111"),zot(p)&&(p=null!=P.borderColor?P.borderColor:null),zot(f)&&(f=null!=P.borderWidth?P.borderWidth:null),p<0||f<0?p=f=null:null!=p&&null==f&&(f=1),zot(m)&&(m=null!=P.corner?P.corner:"circle"!=c?0:25),zot(z)&&(z=null!=P.indicatorCorner?P.indicatorCorner:0),zot(v)&&(v=null!=P.shadowColor?P.shadowColor:"rgba(0,0,0,.3)"),zot(b)&&(b=null!=P.shadowBlur?P.shadowBlur:14),zot(a)&&(a=null!=P.startToggled&&P.startToggled),zot(y)&&(y=null!=P.time?P.time:100);var B=this;B.cursor="pointer","string"!=typeof r&&"number"!=typeof r||(r=this.label=new e.Label({text:r,size:5*o/6,color:g,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),"string"!=typeof w&&"number"!=typeof w||(w=this.labelLeft=new e.Label({text:w,size:5*o/6,color:g,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),this.background=new e.Rectangle(t,o,l,p,f,m).addTo(this),this.indicator="rectangle"==c||"square"==c?new e.Rectangle(.65*o,.65*o,u,null,null,z).center(this.background).pos(.2*o,null,a):new e.Circle(.35*o,u).center(this.background).pos(.175*o,null,a),this.toggled=a,B.background.color=B.toggled?h:l,-1!=v&&0<b&&(this.background.shadow=new createjs.Shadow(v,3,3,b)),r&&(this.addChild(r),r.x=t+2+s+f,r.y=o/2,this.label=r,this.setBounds(-s,-s,t+3*s+f+r.getBounds().width,Math.max(o+2*s,r.getBounds().height))),w&&(this.addChild(w),w.x=0,B.background.x+=w.width+3+s+f,B.label.x+=w.width+3+s+f,w.y=o/2,this.labelLeft=w,this.setBounds(-s,-s,B.getBounds().width+w.width+3+s+f,B.getBounds().height)),this.expand(e.mobile()?20:10),this.tap(function(e){if(w){var o=B.localToGlobal(w.width+3+s+f+t/2,0);if(e.stageX/B.stage.scaleX<o.x-t/2&&!B.toggled||e.stageX/B.stage.scaleX>=o.x+t/2&&B.toggled)return}B.toggled=!B.toggled,T(),B.dispatchEvent("change")},e.mobile()?20:10),new e.Swipe(this,20,200).on("swipe",function(e){0!=e.swipeX&&(1==e.swipeX&&B.toggled||-1==e.swipeX&&!B.toggled||(B.toggled=!B.toggled,T(),B.dispatchEvent("change")))}),Object.defineProperty(B,"textLeft",{get:function(){if(w)return w.text},set:function(t){w&&(w.text=t,e.OPTIMIZE||!zns&&OPTIMIZE||!B.stage||B.stage.update())}}),B.toggle=function(e,t){var o=B.toggled;return zot(e)&&(e=!0),B.toggled=e,o!=B.toggled&&T(t),B},B.text=B.toggled?B.label?B.label.text:"on":B.labelLeft?B.labelLeft.text:"off",this._enabled=!0,Object.defineProperty(B,"enabled",{get:function(){return B._enabled},set:function(e){n(B,e)}}),!1!==C&&i(this,P),this.clone=function(){return B.cloneProps(new e.Toggle(t,o,r?r.clone():"",a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w?w.clone():"",C,this.group,k))}},e.extend(e.Toggle,e.Container,"clone","zimContainer",!1),e.Tip=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,j,L,D,Y,X,R,_){var W;if(W=zob(e.Tip,arguments,"text, align, valign, margin, marginH, marginV, outside, target, size, font, color, rollColor, shadowColor, shadowBlur, textAlign, textValign, lineWidth, lineHeight, fontOptions, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingHorizontal, paddingVertical, shiftHorizontal, shiftVertical, rollPersist, labelWidth, labelHeight, maxSize, style, group, inherit",this))return W;z_d("57.6"),this.group=R;var F=!1===X?{}:e.getStyle("Tip",this.group,_);zot(t)&&(t=null!=F.text?F.text:"Here's a tip!"),zot(r)&&(r=null!=F.margin?F.margin:40),zot(a)&&(a=null!=F.marginH?F.marginH:r),zot(l)&&(l=null!=F.marginV?F.marginV:r),zot(o)&&(o=null!=F.align?F.align:"right"),zot(n)&&(n=null!=F.valign?F.valign:"bottom"),zot(s)&&(s=null!=F.outside&&F.outside),zot(k)&&(k=null!=F.backgroundColor?F.backgroundColor:blue),zot(h)&&(h=null!=F.color?F.color:white),zot(P)&&(P=null!=F.corner?F.corner:25),zot(P)&&(P=null!=F.corner?F.corner:25),zot(P)&&(P=null!=F.corner?F.corner:25),zot(S)&&(S=null!=F.paddingHorizontal?F.paddingHorizontal:14+(Array.isArray(P)?P[0]:P)),!zot(p)&&"ignore"!=p||(p=null!=F.shadowColor&&"ignore"!=p?F.shadowColor:"rgba(0,0,0,.3)"),!zot(f)&&"ignore"!=f||(f=null!=F.shadowBlur&&"ignore"!=f?F.shadowBlur:1),this.zimLabel_constructor(t,u,d,h,g,null,null,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,j,L,D,Y,X,R,F),this.type="Tip",s&&(a=-a,l=-l);var G=this;G.align=o,G.valign=n,this.background.sha(p,3,5,f),this.show=function(t,o){function n(){if(c.boundsToGlobal)var t=c.boundsToGlobal();else t=c.getBounds();var n=new Container(t.x,t.y,t.width,t.height);n.zimTemp=!0,n.loc(0,0,c.stage),"center"!=G.align&&"middle"!=G.align&&"center"!=G.valign&&"middle"!=G.valign||G.center(n),G.pos("center"==G.align||"middle"==G.align?null:a,"center"==G.valign||"middle"==G.valign?null:l,"right"==G.align,"bottom"==G.valign,n),s&&("right"==G.align?G.x+=G.width:"left"==G.align&&(G.x-=G.width),"bottom"==G.valign?G.y+=G.height:"top"==G.valign&&(G.y-=G.height)),G.addTo(n.stage),n.zimTemp&&n.removeFrom&&(n.removeFrom(),n=null),n=G.stage,G.timeoutID&&G.timeoutID.clear(),G.timeoutID=e.timeout(o,function(){G.hide(),n.stage.update()}),G.upID&&n.stage.off("stagemouseup",G.upID),G.upID=n.stage.on("stagemouseup",function(){G.hide(),n.stage&&n.stage.update()}),n.stage&&n.stage.update()}if(zot(t)&&(t=null!=F.delay?F.delay:0),zot(o)&&(o=null!=F.time?F.time:2e3),zot(c)){if(!zimDefaultFrame)return G;c=zimDefaultFrame.stage}else{if(!c.getBounds)return G;if(zot(c.stage))return zog("zim display - Waiter(): The container must have a stage property"),G}return 0<t?G.showID=e.timeout(t,n):n(),G},this.hide=function(){return this.removeFrom(),this.timeoutID&&this.timeoutID.clear(),this.upID&&c.stage&&c.stage.off("stagemouseup",this.downID),G},!(this.clear=function(){G.showID&&G.showID.clear(),G.hide()})!==X&&i(this,F),this.clone=function(){return G.cloneProps(new e.Tip(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,j,L,D,Y,X,this.group,_))}},e.extend(e.Tip,e.Label,"clone","zimLabel",!1),e.Panel=function(t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C){function x(){"right"==p?M.center(r).pos(Math.max(h[0]/2,10),null,!0):"center"==p||"middle"==p?M.center(r):M.center(r).loc(Math.max(h[0]/2,10))}var k;if(k=zob(e.Panel,arguments,"width, height, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, arrow, align, shadowColor, shadowBlur, draggable, boundary, extraButton, style, group, inherit",this))return k;z_d("57.7"),this.group=w;var T=!1===y?{}:e.getStyle("Panel",this.group,C);zot(t)&&(t=null!=T.width?T.width:250),zot(o)&&(o=null!=T.height?T.height:300),this.zimContainer_constructor(t,o,null,null,!1),this.type="Panel",zot(r)&&(r=null!=T.titleBar?T.titleBar:"PANEL"),zot(a)&&(a=null!=T.titleBarColor?T.titleBarColor:"#fff"),zot(l)&&(l=null!=T.titleBarBackgroundColor?T.titleBarBackgroundColor:"#555"),zot(s)&&(s=null!=T.titleBarHeight?T.titleBarHeight:30),zot(c)&&(c=null!=T.backgroundColor?T.backgroundColor:"#eee"),zot(u)&&(u=null!=T.borderColor?T.borderColor:"#888"),zot(d)&&(d=null!=T.borderWidth?T.borderWidth:null),u<0||d<0?u=d=null:null!=u&&null==d&&(d=1),zot(h)&&(h=null!=T.corner?T.corner:5),zot(p)&&(p=null!=T.align?T.align:"left"),zot(f)&&(f=null!=T.shadowColor?T.shadowColor:"rgba(0,0,0,.3)"),zot(m)&&(m=null!=T.shadowBlur?T.shadowBlur:14),zot(z)&&(z=null!=T.draggable&&T.draggable),zot(v)&&(v=null!=T.boundary?T.boundary:null),zot(g)&&(g=null!=T.arrow?T.arrow:e.vee(r)),Array.isArray(h)||(h=[h,h,h,h]);var A=this;this.background=new e.Rectangle(t,o,c,u,d,h).addTo(this),-1!=f&&0<m&&(this.background.shadow=new createjs.Shadow(f,3,3,m));var P=r,B=e.Pick.choose(P),I=e.Pick.choose(a),S=e.Pick.choose(l);e.Pick.choose(c),e.Pick.choose(u),"string"==typeof B&&(B=new e.Label({text:B,color:I,size:null!=T.size?T.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var M=A.titleBarLabel=B;zot(S)&&(S="rgba(0,0,0,.2)"),A.titleBar=r=new e.Container(t,s,null,null,!1).loc(0,0,A);var E=A.titleBar.backing=new e.Rectangle(t+d,s,S,null,null,[.95*h[0],.95*h[1],0,0],!0,null,!1).center(r);if(x(),A.label=B,A.text=B.text,this.nextPanel=function(t,o){var n=zot(t)||zot(P.array)?e.Pick.choose(P):P.array[t],r=zot(t)||zot(a.array)?e.Pick.choose(a):a.array[t],i=zot(t)||zot(l.array)?e.Pick.choose(l):l.array[t],s=zot(t)||zot(c.array)?e.Pick.choose(c):c.array[t],d=zot(t)||zot(u.array)?e.Pick.choose(u):u.array[t];"string"==typeof n&&(n=new e.Label({text:n,color:r,size:null!=T.size?T.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),A.label=n,A.text=n.text,M.removeFrom(),M=A.titleBarLabel=n,x(),E.color=i,A.background.color=s,A.background.borderColor=d,o&&A.dispatchEvent("change"),!OPTIMIZE&&A.stage&&A.stage.update()},z&&(r.cursor="pointer",r.on("mousedown",function(){A.drag({rect:v,currentTarget:!0})}),r.on("pressup",function(){A.noDrag()})),0<g){var O=A.arrow=new e.Shape(-20,-20,40,40,null,!1);O.graphics.f(a).p("AiJieIETCeIkTCfg"),O.centerReg(r).scaleTo(r,null,70).alp(.8).hov(1).expand(),"right"==p?O.pos(Math.max(h[1]/2,10)):O.pos(Math.max(h[1]/2,10),null,!0),O.cursor="pointer",O.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){A.nextPanel(),A.dispatchEvent("change")})}zot(b)||(b=A.extraButton=new e.Button({label:"R",width:50,height:50,group:"PanelExtra"}).scaleTo(r,null,70).centerReg(r).expand(),"left"==p?b.pos(0<g?O.x-O.width-15:Math.max(h[1]/2,10)):b.pos(0<g&&"center"!=p?O.x+O.width:Math.max(h[1]/2,10))),A.overlay=new e.Rectangle(t,o).alp(.7),this._enabled=!0,Object.defineProperty(A,"enabled",{get:function(){return A._enabled},set:function(e){n(A,e),e?A.overlay.removeFrom():A.overlay.addTo(A),!OPTIMIZE&&A.stage&&A.stage.update()}}),!1!==y&&i(this,T),this.clone=function(){return A.cloneProps(new e.Toggle(t,o,r?r.clone():"",a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,this.group,C))}},e.extend(e.Panel,e.Container,"clone","zimContainer",!1),e.Pane=function(t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I){function S(e){M(),Y.container.stage.update(),Y.dispatchEvent("close"),e.stopImmediatePropagation()}function M(){function t(){var t;Y.container.removeChild(Y);for(var o=0;o<Y.numChildren;o++)if("TextArea"==(t=Y.getChildAt(o)).type||"Loader"==t.type||"Tag"==t.type){var n={obj:t,depth:Y.getChildIndex(t)};G.add(t,n)}for(o=Y.numChildren-1;0<=o;o--)"TextArea"!=(t=Y.getChildAt(o)).type&&"Loader"!=t.type&&"Tag"!=t.type||Y.removeChild(t);if(e.OPTIMIZE||!zns&&OPTIMIZE||Y.container.stage.update(),c&&(isNaN(Y.resetX)||(Y.x=Y.resetX),isNaN(Y.resetY)||(Y.y=Y.resetY)),Y.zimAccessibility){var r=Y.zimAccessibility;r.resize(Y),F?F.focus():Y.zimTabTag.nextSibling.focus(),setTimeout(function(){r.talk("Pane has been closed.")},50)}}0<b?Y.animate({obj:{alpha:0},time:b,call:t}):t()}var E;if(E=zob(e.Pane,arguments,"width, height, label, backgroundColor, color, draggable, resets, modal, corner, backdropColor, shadowColor, shadowBlur, center, displayClose, backdropClose, backing, fadeTime, container, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, close, closeColor, style, group, inherit",this))return E;z_d("58"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pane";var O="zim display - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(zot(y)){if(!zimDefaultFrame)return void zog(O);y=zimDefaultFrame.stage}else{if(!y.getBounds)return void zog(O);if(zot(y.getStage))return void zog("zim display - Pane(): The container must have a stage property")}this.group=B;var j=!1===P?{}:e.getStyle(this.type,this.group,I);zot(t)&&(t=null!=j.width?j.width:200),zot(o)&&(o=null!=j.height?j.height:200),zot(r)&&(r=null!=j.label?j.label:null),"string"!=typeof r&&"number"!=typeof r||(r=new e.Label({text:r,size:null!=j.size?j.size:40,align:null!=j.align?j.align:"center",valign:null!=j.valign?j.valign:"center",color:null!=j.color?j.color:l,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),zot(a)&&(a=null!=j.backgroundColor?j.backgroundColor:"white"),zot(s)&&(s=null!=j.draggable&&j.draggable),zot(c)&&(c=null==j.resets||j.resets),zot(u)&&(u=null==j.modal||j.modal),zot(d)&&(d=null!=j.corner?j.corner:20),zot(w)&&(w=null!=j.titleBar?j.titleBar:null),zot(C)&&(C=null!=j.titleBarColor?j.titleBarColor:null),zot(x)&&(x=null!=j.titleBarBackgroundColor?j.titleBarBackgroundColor:null),zot(k)&&(k=null!=j.titleBarHeight?j.titleBarHeight:null),zot(h)&&(h=null!=j.backdropColor?j.backdropColor:"rgba(0,0,0,.2)"),zot(g)&&(g=null!=j.shadowColor?j.shadowColor:"rgba(0,0,0,.3)"),zot(p)&&(p=null!=j.shadowBlur?j.shadowBlur:20),zot(f)&&(f=null==j.center||j.center),zot(m)&&(m=null==j.displayClose||j.displayClose),s&&(m=!1),zot(z)&&(z=null==j.backdropClose||j.backdropClose),zot(b)&&(b=null!=j.fadeTime?j.fadeTime:0),zot(T)&&(T=null!=j.close&&j.close),zot(A)&&(A=null!=j.closeColor?j.closeColor:"#555");var L=this.backdrop=new e.Shape({style:!1});L.type="CreateJS_Shape";var D=L.graphics;D.f(h),D.drawRect(-5e3,-5e3,1e4,1e4),this.setBounds(-t/2,-o/2,t,o);var Y=this;Y.container=y,L.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",z?S:function(e){e.stopImmediatePropagation()});var X,R,_,W,F,G=new e.Dictionary(!0);if(L.on("mousedown",function(e){e.stopImmediatePropagation()}),u&&this.addChild(L),zot(v))X=this.backing=this.display=new e.Rectangle({width:t,height:o,color:a,corner:d,style:!1});else{if("Pattern"==v.type){var H=v;X=new e.Rectangle(t,o,a,null,null,d,null,null,!1),H.centerReg(X),H.setMask(X.shape)}else X=v;Y.display=Y.backing=X}m&&(X.cursor="pointer",X.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",S)),-1!=g&&0<p&&(X.shadow=new createjs.Shadow(g,8,8,p)),X.on("click",function(e){e.stopImmediatePropagation()}),this.resetX,this.resetY,s&&(X.cursor="pointer",X.on("mousedown",function(e){W=e.target.stage,isNaN(Y.resetX)&&(Y.resetX=Y.x),isNaN(Y.resetY)&&(Y.resetY=Y.y),R=e.stageX/W.scaleX-Y.x,_=e.stageY/W.scaleY-Y.y,X.cursor="pointer"}),X.on("pressmove",function(e){var n,r=function(e,n){return e=Math.max(t/2,Math.min(Y.container.getBounds().width-t/2,e)),n=Math.max(o/2,Math.min(Y.container.getBounds().height-o/2,n)),{x:e,y:n}}(e.stageX/W.scaleX-R,e.stageY/W.scaleY-_);Y.x=r.x,Y.y=r.y;for(var i=0;i<Y.numChildren;i++)"TextArea"!=(n=Y.getChildAt(i)).type&&"Loader"!=n.type&&"Tag"!=n.type||n.resize();W.update()}),this.on("pressup",function(e){X.cursor="pointer",Y.stage&&Y.stage.update()})),X.centerReg(this),r&&(this.addChild(r),e.center(r,this),this.label=r,this.text=r.text,r.mouseEnabled=!1),zot(w)||("string"==typeof w&&(w=new e.Label(w,null,null,C)),titleBarLabel=Y.titleBarLabel=w,zot(k)&&(k=1.5*titleBarLabel.height),zot(C)&&(C="black"),zot(x)&&(x="rgba(0,0,0,.2)"),Y.titleBar=w=new e.Container(t,k,null,null,!1).centerReg(Y).mov(0,-o/2+k/2),w.mouseEnabled=!1,w.mouseChildren=!1,Y.titleBar.backing=new e.Rectangle(t,k,x,null,null,[.95*d,.95*d,0,0],null,null,!1).addTo(w),titleBarLabel.center(w).pos({x:Math.max(d/2,10),reg:!0})),T&&((T=Y.close=new e.Shape(-40,-40,80,80,null,!1)).graphics.f(A).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),w?T.addTo(Y).scaleTo(w,null,50).mov(t/2-Math.max(d/2,10)-T.width/2,-o/2+k/2).expand(40):T.addTo(Y).sca(.3).mov(t/2-T.width-3,-o/2+T.height).expand(40),T.cursor="pointer",T.expand(),T.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",S)),Object.defineProperty(Y,"text",{get:function(){return" "==r.text?"":r.text},set:function(e){r.text=e}}),this._enabled=!0,Object.defineProperty(Y,"enabled",{get:function(){return Y._enabled},set:function(e){n(Y,e)}}),this.hide=function(e){return M(),Y.toggled=!1,e&&Y.dispatchEvent("close"),Y},this.show=function(){f&&isNaN(Y.resetX)&&(Y.x=Y.container.getBounds().width/2,Y.y=Y.container.getBounds().height/2),Y.container.addChild(Y);for(var e=0;e<G.length;e++)Y.addChildAt(G.values[e].obj,G.values[e].depth);if(0<b?(Y.alpha=0,Y.animate({alpha:1},b)):Y.container.stage&&Y.container.stage.update(),Y.zimAccessibility){var t=Y.zimAccessibility;setTimeout(function(){t.activatedObject&&(F=t.activatedObject.zimTabTag)},50),t.resize(Y),t.tabIndex=Y.zimTabIndex}return Y.toggled=!0,Y},!(this.toggle=function(e){return!0===e?Y.show():!1===e?Y.hide():Y.container.contains(Y)?Y.hide():Y.show(),Y})!==P&&i(this,j),this.clone=function(){var n=r.x,i=r.y,y=Y.cloneProps(new e.Pane(t,o,r.clone(),a,l,s,c,u,d,h,g,p,f,m,z,zot(v)?v.clone():null,b,Y.container,w,C,x,k,T,A,P,this.group,I));return y.label.x=n,y.label.y=i,y}},e.extend(e.Pane,e.Container,"clone","zimContainer",!1),e.Window=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,j,L,D,Y,X,R){function _(){J.setBounds(0,0,t,o),$.graphics.c().f(n).rc(0,0,t,o,ae,ae,s,s),-1!=w&&0<C&&($.shadow=new createjs.Shadow(w,4,4,C)),0<a&&(s?ie.graphics.c().s(r).ss(a,"square","miter").rc(0,0,t,o,ae,ae,s,s):ie.graphics.c().s(r).ss(a,"square","miter").dr(0,0,t,o))}function W(){e.dragBoundary(ne,new createjs.Rectangle(0,0,ce?-J.scrollXMax:0,ue?-J.scrollYMax:0))}function F(){Le=ne.y,A&&De.immediate(Le),u&&G()}function G(){J.dispatchEvent("scrolling"),re&&(re.x=-ne.x,re.y=-ne.y),ce&&u&&(ze.x=le.convert(ne.x)),ue&&u&&(be.y=se.convert(ne.y))}function H(t){e.Ticker.remove(F),ke=!1,ce&&p&&e.animate(ze,{alpha:0},me.fadeTime),ue&&p&&e.animate(be,{alpha:0},me.fadeTime)}function N(){if(!ne.stage)return je||(J.dispatchEvent("hoverout"),je=!0),void e.Ticker.remove(N);Math.abs(Be-J.windowMouseX)>Oe||Math.abs(Ie-J.windowMouseY)>Oe?(je||(J.dispatchEvent("hoverout"),je=!0),Pe=Date.now(),Be=J.windowMouseX,Ie=J.windowMouseY):Date.now()-Pe>Ee&&((Math.abs(Se-J.windowMouseX)>Oe||Math.abs(Me-J.windowMouseY)>Oe)&&(J.contentMouse=ne.globalToLocal(J.windowMouseX,J.windowMouseY),J.dispatchEvent("hoverover"),Se=J.windowMouseX,Me=J.windowMouseY,je=!1),Pe=Date.now())}function V(e){if(ue&&J.stage&&J.hitTestPoint(J.windowMouseX,J.windowMouseY)&&J.contains(J.stage.getObjectUnderPoint(J.windowMouseX*J.stage.scaleX,J.windowMouseY*J.stage.scaleY))){zot(e)&&(e=event);var t=e.detail?-19*e.detail:e.wheelDelta;zot(t)&&(t=-19*e.deltaY),Le+=t,Le=Math.max(-J.scrollYMax,Math.min(0,Le)),A||(J.scrollY=Le,ne.stage.update())}}function q(t){A&&!Ye&&t.stage&&(Ye=!0,De=new e.Damp(J.scrollY,A),e.Ticker.add(function(){ke||zot(Le)||(J.scrollY=De.convert(Le))},t.stage))}var K;if(K=zob(e.Window,arguments,"width, height, backgroundColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, slide, slideDamp, slideSnap, interactive, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, cancelCurrentDrag, style, group, inherit",this))return K;z_d("58.1"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Window",this.group=X;var U=!1===Y?{}:e.getStyle(this.type,this.group,R);zot(t)&&(t=null!=U.width?U.width:300),zot(o)&&(o=null!=U.height?U.height:200),zot(n)&&(n=null!=U.backgroundColor?U.backgroundColor:"#333");var Z=r,Q=a;zot(r)&&(r=null!=U.borderColor?U.borderColor:"#999"),zot(a)&&(a=null!=U.borderWidth?U.borderWidth:1),zot(l)&&(l=null!=U.padding?U.padding:0),zot(s)&&(s=null!=U.corner?U.corner:0),zot(c)&&(c=null==U.swipe||U.swipe),zot(u)&&(u=null==U.scrollBarActive||U.scrollBarActive),zot(d)&&(d=null!=U.scrollBarDrag&&U.scrollBarDrag),zot(h)&&(h=null!=U.scrollBarColor?U.scrollBarColor:r),zot(g)&&(g=null!=U.scrollBarAlpha?U.scrollBarAlpha:.3),zot(p)&&(p=null==U.scrollBarFade||U.scrollBarFade),zot(f)&&(f=null==U.scrollBarH||U.scrollBarH),zot(m)&&(m=null==U.scrollBarV||U.scrollBarV),d&&(p=null!=U.scrollBarFade&&U.scrollBarFade),zot(z)&&(z=null==U.slide||U.slide),zot(v)&&(v=null!=U.slideDamp?U.slideDamp:.6),zot(b)&&(b=null!=U.slideSnap?U.slideSnap:"vertical"),zot(y)&&(y=null==U.interactive||U.interactive),zot(w)&&(w=null!=U.shadowColor?U.shadowColor:"rgba(0,0,0,.3)"),zot(C)&&(C=null!=U.shadowBlur?U.shadowBlur:20),zot(k)&&(k=null!=U.paddingVertical?U.paddingVertical:l),zot(x)&&(x=null!=U.paddingHorizontal?U.paddingHorizontal:l),zot(T)&&(T=null==U.scrollWheel||U.scrollWheel),zot(P)&&(P=null!=U.titleBar?U.titleBar:null),zot(B)&&(B=null!=U.titleBarColor?U.titleBarColor:null),zot(I)&&(I=null!=U.titleBarBackgroundColor?U.titleBarBackgroundColor:null),zot(S)&&(S=null!=U.titleBarHeight?U.titleBarHeight:null),zot(M)&&(M=null!=U.draggable?U.draggable:null),zot(E)&&(E=null!=U.boundary?U.boundary:null),zot(O)&&(O=null!=U.onTop?U.onTop:null),zot(j)&&(j=null!=U.close?U.close:null),zot(L)&&(L=null!=U.closeColor?U.closeColor:null),zot(D)&&(D=null!=U.cancelCurrentDrag&&U.cancelCurrentDrag),!1===P&&(P=null),zot(P)||(zot(S)&&(S=30),o-=S);var J=this;this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var $=this.backing=new e.Shape({style:!1});this.addChild($);var ee=new createjs.Shape;ee.type="WindowBacking";var te=ee.graphics;this.addChild(ee);var oe,ne=this.content=new e.Container({style:!1});if(this.addChild(ne),ne.mask=ee,!y)var re=new createjs.Shape;if(0<a){var ie=new createjs.Shape;this.addChild(ie)}var ae=P?0:s;_();var le,se,ce,ue,de,he,ge,pe,fe,me=this.scrollBar={};if(me.color=h,me.size=6,me.minSize=2*me.size,me.spacing=3.5+a/2,me.margin=0,me.corner=me.size/2,me.showTime=500,me.fadeTime=3e3,u){var ze=me.horizontal=new e.Shape({style:!1}),ve=ze.graphics;ze.alpha=g,this.addChild(ze),d&&ze.drag({localBounds:!0});var be=me.vertical=new e.Shape({style:!1}),ye=be.graphics;be.alpha=g,this.addChild(be),d&&be.drag({localBounds:!0})}this.update=function(){u&&(ve.clear(),ye.clear()),de=u?me.size+2*me.spacing:0,he=ne.getBounds()?ne.getBounds().width:0,ge=ne.getBounds()?ne.getBounds().height:0,ce=f&&t-x<he&&(u||!0===c||"auto"==c||"horizontal"==c),ue=m&&o-k<ge&&(u||!0===c||"auto"==c||"vertical"==c),J.scrollXMax=he+2*x-t+(ue?de+me.margin:0),J.scrollYMax=ge+2*k-o+(ce?de+me.margin:0),te.clear();var n=a/2,r=a/2,i=t-(ue&&u?me.size+2*me.spacing:0)-(ue?0:a),l=o-(ce&&u?me.size+2*me.spacing:0)-(ce?0:a);te.f("rgba(0,0,0,0)").rc(n,r,i,l,ae,ae,ue&&u?0:s,ce&&u?0:s),ee.setBounds(J.getBounds().x,J.getBounds().y,J.getBounds().width,J.getBounds().height),e.expand(ee,0),y||(re.graphics.c().f("red").dr(n,r,i,l),ne.hitArea=re);var h=Math.max(s,Math.min(me.corner,me.spacing)),g=h+a/2,p=h+(ue?de:0)+a/2,z=h+a/2,v=h+(ce?de:0)+a/2;if(ce&&u&&(scrollBarLength=Math.max(me.minSize,(t-g-p)*(t-g-p)/(he+x+me.margin)),ve.f(me.color).rr(0,0,scrollBarLength,me.size,me.corner),ze.x=g,ze.y=o-me.size-me.spacing,le=new e.Proportion(-J.scrollXMax,0,g,t-scrollBarLength-p,-1),d)){ze.setBounds(0,0,scrollBarLength,me.size);var b=new createjs.Rectangle(g,ze.y,t-scrollBarLength-g-p,0);ze.dragBoundary(b),ze.proportion=new e.Proportion(b.x,b.x+b.width,0,-J.scrollXMax),ze.off("pressmove",pe),pe=ze.on("pressmove",function(){J.dispatchEvent("scrolling"),ne.x=ze.proportion.convert(ze.x)})}ue&&u&&(scrollBarLength=Math.max(me.minSize,(o-z-v)*(o-z-v)/(ge+k+me.margin)),ye.f(me.color).rr(0,0,me.size,scrollBarLength,me.corner),be.x=t-me.size-me.spacing,be.y=z,se=new e.Proportion(-J.scrollYMax,0,z,o-scrollBarLength-v,-1),d)&&(be.setBounds(0,0,me.size,scrollBarLength),b=new createjs.Rectangle(be.x,z,0,o-scrollBarLength-z-v),be.dragBoundary(b),be.proportion=new e.Proportion(b.y,b.y+b.height,0,-J.scrollYMax),be.off("pressmove",fe),fe=be.on("pressmove",function(){J.dispatchEvent("scrolling"),Le=ne.y=be.proportion.convert(be.y)})),G(),clearTimeout(J.d2Timeout),J.d2Timeout=setTimeout(function(){ze&&ze.proportion&&(ne.x=ze.proportion.convert(ze.x)),be&&be.proportion&&(ne.y=be.proportion.convert(be.y))},50),clearTimeout(J.dTimeout),J.dTimeout=setTimeout(function(){W()},300)},this.resize=function(e,n){return zot(e)&&(e=t),zot(n)&&(n=o),t=e,o=n,_(),J.update(),Le=ne.y,A&&De.immediate(Le),J},zot(P)||(zot(M)&&(M=!0),"string"==typeof P&&(P=new e.Label({text:P,color:B,size:null!=U.size?U.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),titleBarLabel=J.titleBarLabel=P,zot(I)&&(I="rgba(0,0,0,.2)"),J.titleBar=P=new e.Container(t,S,null,null,!1).centerReg(J).mov(0,-o/2-S/2),J.titleBar.backing=new e.Rectangle(t+a,S,I,null,null,[.95*s,.95*s,0,0],!0,null,!1).center(P),titleBarLabel.center(P).pos({x:Math.max(s/2,Math.max(10,l)),reg:!0}),J.regX=0,J.regY=-S,J.setBounds(0,-S,t,o+S),M?(P.cursor="pointer",P.on("mousedown",function(){J.drag({rect:E,currentTarget:!0,onTop:O})}),P.on("pressup",function(){J.noDrag()})):P.on("mousedown",function(){})),j&&(zot(L)&&(L="#555"),(j=J.close=new e.Shape(-40,-40,80,80,null,!1)).graphics.f(L).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),P?j.centerReg(J).scaleTo(P,null,50).pos({x:t-Math.max(s/2,Math.max(10,l))-j.width/2,y:S/2,reg:!0}).expand(40):j.sca(.3).pos(Math.max(s/2,Math.max(10,l))/2,j.height/2,!0,!1,J).expand(40),j.cursor="pointer",j.expand(),j.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){J.removeFrom(),J.dispatchEvent("close")})),this.add=function(e,t){if(q(e),e.getBounds())return t&&J.removeAll(),ne.addChild(e),0==e.x&&(e.x=x),0==e.y&&(e.y=k),J.update(),J;zog("SwipeBox.add() - please add content with bounds set")},this.remove=function(e){return ne.removeChild(e),J.update(),J};var we,Ce,xe,ke=!(this.removeAll=function(){return ne.removeAllChildren(),J.update(),J});if(c&&ne.on("mousedown",function(){ke||e.Ticker.add(F,ne.stage),ke=!0,ce&&u&&p&&e.animate(ze,{alpha:g},me.showTime),ue&&u&&p&&e.animate(be,{alpha:g},me.showTime)}),this.on("added",function(){q(J),c&&(e.drag({obj:ne,currentTarget:!0,localBounds:!0,slide:z,slideDamp:v,slideSnap:!((!f||!0!==c&&"auto"!=c&&"horizontal"!=c)&&(!m||!0!==c&&"auto"!=c&&"vertical"!=c))&&b}),ne.getBounds()&&0<ne.getBounds().width&&setTimeout(function(){W()},300))},null,!0),this.cancelCurrentDrag=function(){J.content.noDrag(),e.drag({obj:ne,currentTarget:!0,localBounds:!0,slide:z,slideDamp:v,slideSnap:!((!f||!0!==c&&"auto"!=c&&"horizontal"!=c)&&(!m||!0!==c&&"auto"!=c&&"vertical"!=c))&&b}),ne.getBounds()&&0<ne.getBounds().width&&setTimeout(function(){W()},300)},this.added(function(e){e.on("stagemousemove",function(t){J.windowMouseX=t.stageX/e.scaleX,J.windowMouseY=t.stageY/e.scaleY})}),z?ne.on("slidestop",H):ne.on("mousedown",function(){ne.stage.on("stagemouseup",H,null,!0)}),D&&(J.blurEvent=document.window.addEventListener("blur",function(){J.cancelCurrentDrag(),H()})),y){var Te,Ae,Pe;ne.on("mousedown",function(e){oe=e.target.stage,Te=e.stageX/oe.scaleX,Ae=Date.now()}),ne.on("click",function(e){Date.now()-Ae<600&&Math.abs(e.stageX/oe.scaleX-Te)<5&&(J.contentMouse=ne.globalToLocal(e.stageX/oe.scaleX,e.stageY/oe.scaleY),J.dispatchEvent("select"))}),ne.on("mouseover",function(){Pe=Date.now(),e.Ticker.add(N,ne.stage)}),ne.on("mouseout",function(){je||(J.dispatchEvent("hoverout"),je=!0),e.Ticker.remove(N)});var Be=0,Ie=0,Se=0,Me=0,Ee=300,Oe=2,je=!1}var Le=J.scrollY;T&&(we=window.addEventListener("mousewheel",V),Ce=window.addEventListener("wheel",V),xe=window.addEventListener("DOMMouseScroll",V));var De,Ye=!1;Object.defineProperty(J,"scrollX",{get:function(){return ne.x},set:function(e){ne.x=e,ne.zimDragImmediate&&ne.zimDragImmediate(ne.x,ne.y),G()}}),Object.defineProperty(J,"scrollY",{get:function(){return ne.y},set:function(e){ne.y=e,ne.zimDragImmediate&&ne.zimDragImmediate(ne.x,ne.y),G()}}),!1!==Y&&i(this,U),this.clone=function(r){zot(r)&&(r=!0);var i=J.cloneProps(new e.Window(t,o,n,Z,Q,l,s,c,u,d,me.color,g,p,f,m,z,v,b,y,w,C,x,k,P,B,I,S,M,E,O,j,L,D,Y,X,R));return r&&(J.content.cloneChildren(i.content),i.update()),i},this.dispose=function(){return T&&(window.removeEventListener("mousewheel",we),window.removeEventListener("wheel",Ce),window.removeEventListener("DOMMouseScroll",xe)),J.blurEvent&&document.window.removeEventListener("blur",J.blurEvent),zot(N)||e.Ticker.remove(N),zot(F)||e.Ticker.remove(F),this.zimContainer_dispose(),!0}},e.extend(e.Window,e.Container,["clone","dispose"],"zimContainer",!1),e.Layer=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S){var M;if(M=zob(e.Layer,arguments,"width, height, titleBar, titleBarContainer, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, borderWidth, borderColor, dashed, transformObject, titleBarWidth, titleBarHeight, titleBarX, titleBarY, titleBarDraggable, close, closeColor, closeBackgroundColor, closeIndicatorColor, anchor, style, group, inherit",this))return M;z_d("58.5"),this.group=I;var E=!1===B?{}:e.getStyle("Layer",this.group,S);zot(t)&&(t=null!=E.width?E.width:500),zot(o)&&(o=null!=E.height?E.height:500),this.zimContainer_constructor(0,0,t,o,!1),this.type="Layer";var O=this;O.distX=40,O.distY=0,zot(n)&&(n=null!=E.titleBar?E.titleBar:"LAYER");var j=n,L=n,D=!0;zot(a)&&(a=null!=E.backgroundColor?E.backgroundColor:"#eee"),zot(l)&&(l=null!=E.rollBackgroundColor?E.rollBackgroundColor:"#fff"),zot(s)&&(s=null!=E.selectedBackgroundColor?E.selectedBackgroundColor:"#666"),zot(u)&&(u=null!=E.color?E.color:"#666"),zot(d)&&(d=null!=E.rollColor?E.rollColor:"#666"),zot(h)&&(h=null!=E.selectedColor?E.selectedColor:"#ddd"),zot(p)&&(p=null!=E.borderWidth?E.borderWidth:1),zot(f)&&(f=null!=E.borderColor?E.borderColor:a),(f<0||p<0)&&(f=p=null),zot(m)&&(m=null==E.dashed||E.dashed),zot(z)&&(z=null!=E.titleBar?E.titleBar:null),zot(v)&&(v=null!=E.titleBarWidth?E.titleBarWidth:100);var Y=v;if(zot(b)&&(b=null!=E.titleBarHeight?E.titleBarHeight:40),zot(y)&&(y=null!=E.titleBarX?E.titleBarX:null),zot(w)&&(w=null!=E.titleBarY?E.titleBarY:null),zot(C)&&(C=null==E.titleBarDraggable||E.titleBarDraggable),zot(x)&&(x=null==E.close||E.close),zot(k)&&(k=null!=E.closeColor?E.closeColor:s),zot(T)&&(T=null!=E.closeBackgroundColor?E.closeBackgroundColor:s),zot(A)&&(A=null!=E.closeIndicatorColor?E.closeIndicatorColor:h),zot(P)&&(P=null==E.anchor||E.anchor),C||(P=!1),O.anchor=P,x&&(v+=30),z=e.merge({borderColor:s},z,{events:!0,visible:!1,ghostColor:f,ghostWidth:p,ghostDashed:m,ghostHidden:!0}),zot(r)&&(r=null!=E.titleBarContainer?E.titleBarContainer:null),zot(r)){if(!zimDefaultFrame)return void zog("zim Layer(): Please pass in a reference to a container with bounds set.");r=zimDefaultFrame.stage}var X;O.active=!1,O.turnOff=function(e,t){O.active=!1,x&&(O.checkBox.visible=!1),O.transformControls.remove(),O.mouseChildren=!0,O.button.backgroundColor=a,O.button.rollBackgroundColor=l,O.button.color=u,O.button.rollColor=u,O.transformControls.allowToggleOff(),O.resizeChildren&&O.resizeChildren()},O.turnOn=function(){O.active=!0,x&&(O.checkBox.visible=!0,O.checkBox.checked=!0),O.button.backgroundColor=s,O.button.rollBackgroundColor=s,O.button.color=h,O.button.rollColor=h,O.mouseChildren=!1,O.transformControls.add(),O.transformControls.allowToggleOn()},O.titleBarPos=function(e,t){if(O.titleBar)return O.titleBar.pos?(O.titleBar.pos(e,t,arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]),X.update()):(O.distX=e,O.distY=t),D=!1,O};var R=O.visible;O.visible=!1,this.added(function(t){O.transform(z),0<=p&&O.transformControls.hideGhost(),e.timeout(50,function(){function o(e){if(D&&C){var t=r.localToLocal(s.x-O.distX,s.y-O.distY,O.parent),o=O.localToLocal(O.regX,O.regY,O.parent),i=O.localToLocal(0,0,O.parent);O.x=t.x+(o.x-i.x),O.y=t.y+(o.y-i.y),O.transformControls.resize(e),n(O)}}function n(e){e.loop(function(e){"Layer"==e.type&&(O.titleBarDraggable&&e.move(),e.transformControls.ghost&&e.transformControls.resize(),n(e))})}function i(){return 0==s.x||s.y==s.height||s.x==r.width-s.width||s.y==r.height||void 0}O.visible=R,0<=p&&e.timeout(100,function(){O.transformControls.showGhost(),X.update()}),X=t;var s=O.titleBar=new e.Container(v,b).reg(0,b).loc(O,null,r).mov(O.distX,O.distY);if(C&&s.drag({all:!0,boundary:new e.Boundary(0,b,r.width-v,r.height-b),localBounds:!0}),40==O.distX&&0==O.distY||s.pos(O.distX,O.distY),x&&(O.checkBox=new e.CheckBox({borderColor:k,backgroundColor:T,indicatorColor:A,size:20,startChecked:!0}).center(s).pos(0,null,!0).change(function(){O.turnOff(!0,!0)}),O.checkBox.visible=!1),s.mouseChildren=!0,(s.layer=O).resetTitleBar=function(){O.distX=40,O.distY=0,D=!0,O.move(!0),X.update()},"string"!=typeof L&&"number"!=typeof L||(L=new e.Label({text:L,color:u,rollColor:d,size:null!=E.size?E.size:18,group:this.group})),O.label=L,O.label.center(s),O.button=new e.Button({shadowBlur:-1,width:Y,height:b-1,label:O.label,color:u,rollColor:d,backgroundColor:a,rollBackgroundColor:l,corner:null!=E.corner?E.corner:0,inherit:E}).addTo(s),O.button.on("mousedown",function(){r.loop(function(e){e&&e!=s&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff(!0,!0)}),O.active||O.turnOn(),s.top()}),O.button.on("pressmove",function(){o()}),O.button.on("pressup",function(){o(!0);var e=O.localToLocal(0,0,r);O.distX=s.x-e.x,O.distY=s.y-e.y,s.top(),!i()&&C&&(e=O.localToGlobal(0,0),O.button.hitTestPoint(e.x,e.y)&&O.resetTitleBar())}),O.button.on("dblclick",function(){C&&O.resetTitleBar()}),O.turnOff(),O.on("transformed",function(e){"move"!=e.transformType&&"size"!=e.transformType&&"stretch"!=e.transformType&&"rotate"!=e.transformType||(C&&O.move(),n(O))}),O.move=function(e){!e&&!D&&O.anchor&&i()||(s.loc(O.localToLocal(0,0,r)).mov(O.distX,O.distY),s.x<0&&(D=!1,s.x=0),s.y<s.height&&(D=!1,s.y=s.height),s.x>r.width-s.width&&(D=!1,s.x=r.width-s.width),s.y>r.height&&(D=!1,s.y=r.height),O.anchor||(D=!0))},O.on("transformhide",function(){O.turnOff(!0,!0),r.loop(function(e){e&&e!=s&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()})}),O.resizeChildren=function(e){O.transformControls.resize(e),O.loop(function(e){e.transformControls&&(e.transformControls.visible&&e.transformControls.hide(),"Layer"==e.type?e.resizeChildren():e.transformControls.resize())})},O.resize=function(e){return O.move(),O.resizeChildren(e),O},O.toggled=!1,O.toggle=function(e){return zot(e)?O.toggled=!O.toggled:O.toggled=e,O.toggled?(r.loop(function(e){e&&e!=s&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()}),O.turnOn()):(s.top(),O.turnOff(),r.loop(function(e){e&&e!=s&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()})),O.stage&&O.stage.update(),O},Object.defineProperty(O,"titleBarDraggable",{get:function(){return C},set:function(t){(C=t)?s.drag({all:!0,boundary:e.Boundary(0,40,r.width-v,r.height-b),localBounds:!0}):s.noDrag()}}),X.on("stagemouseup",function(){O.transformControls.visible&&s.top()}),!zot(y)||!zot(w)){D=!1;var c=zot(y)?s.x:y,h=zot(w)?s.y-b:w;O.titleBarStartX=y,O.titleBarStartY=w,O.titleBarPos(c,h);var g=O.parent.localToLocal(O.x,O.y,r);O.distX=s.x-g.x,O.distY=s.y-g.y}})}),!1!==B&&i(this,E),this.clone=function(){return O.cloneProps(new e.Layer(t,o,j,r,a,l,s,c,u,d,h,g,p,f,m,z,Y,b,y,w,C,x,k,T,A,P,B,this.group,S))},this.dispose=function(){return O.transformControls.remove(),O.transformControls.disable(),this.zimContainer_dispose(),!0}},e.extend(e.Layer,e.Container,["clone","dispose"],"zimContainer",!1),e.Waiter=function(t,o,n,r,a,l,s,c,u,d,h){var g;if(g=zob(e.Waiter,arguments,"container, speed, foregroundColor, backgroundColor, corner, shadowColor, shadowBlur, fadeTime, style, group, inherit",this))return g;z_d("59"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Waiter",this.group=d;var p=!1===u?{}:e.getStyle(this.type,this.group,h);zot(o)&&(o=null!=p.speed?p.speed:600),zot(n)&&(n=null!=p.foregroundColor?p.foregroundColor:"white"),zot(r)&&(r=null!=p.backgroundColor?p.backgroundColor:"orange"),zot(a)&&(a=null!=p.corner?p.corner:16),zot(l)&&(l=null!=p.shadowColor?p.shadowColor:"rgba(0,0,0,.3)"),zot(s)&&(s=null!=p.shadowBlur?p.shadowBlur:14),zot(c)&&(c=null!=p.fadeTime?p.fadeTime:0),this.setBounds(-52,-20,104,40);var f=this,m=this.display=new e.Shape({style:!1});this.addChild(m),m.setBounds(0,0,104,40),m.regX=52,m.regY=20;var z=m.graphics;z.f(r);var v=a;Array.isArray(v)||(v=[a,a,a,a]),z.rc(0,0,104,40,v[0],v[1],v[2],v[3]),-1!=l&&0<s&&(m.shadow=new createjs.Shadow(l,3,3,s)),m.on("click",function(e){e.stopImmediatePropagation()});var b,y,w=new e.Container({style:!1});this.addChild(w);for(var C=0;C<3;C++)(b=new createjs.Shape).graphics.f(n).dc(0,0,12),b.x=32*(C-1),w.addChild(b),b.cache(-12,-12,24,24),b.alpha=0;this.hide=function(){function e(){f.parent&&f.parent.removeChild(f);var e=f.stage;if(e&&e.update(),f.zimAccessibility){var t=f.zimAccessibility;t.resize(f),y?y.focus():f.zimTabTag.nextSibling.focus(),setTimeout(function(){t.talk("Waiter has finished.")},50)}}return 0<c?f.animate({obj:{alpha:0},time:c,call:e}):e(),f.toggled=!1,f};var x=[];this.show=function(){var e,n="zim display - Waiter(): Please pass in a reference to a container with bounds set as first parameter to Waiter";if(zot(t)){if(!zimDefaultFrame)return void zog(n);t=zimDefaultFrame.stage}else{if(!t.getBounds)return void zog(n);if(zot(t.stage))return void zog("zim display - Waiter(): The container must have a stage property")}for(var r=0,i=0;i<w.numChildren;i++)w&&x.push(setTimeout(function(){e=w.getChildAt(r),createjs.Tween.get(e,{loop:!0}).to({alpha:1},o/3/2).wait(o/3).to({alpha:0},o/3).wait(o-o/3-o/3/2),r++},i*o/3));if(f.ticker=createjs.Ticker.on("tick",function(){t.stage.update()}),f.x=t.getBounds().width/2,f.y=t.getBounds().height/2,t.addChild(f),0<c&&(f.alpha=0,f.animate({alpha:1},c)),f.zimAccessibility){var a=f.zimAccessibility;setTimeout(function(){a.activatedObject&&(y=a.activatedObject.zimTabTag)},50),a.resize(f),a.talk(f.zimTabTag.getAttribute("aria-label"))}return f.toggled=!0,f},!(f.toggle=function(e){return!0===e?f.show():!1===e?f.hide():f.parent?f.hide():f.show(),f})!==u&&i(this,p),this.clone=function(){return f.cloneProps(new e.Waiter(t,o,n,r,a,l,s,c,u,this.group,h))},this.dispose=function(){f.ticker&&createjs.Ticker.off("tick",f.ticker),createjs.Tween.removeTweens(f),f.removeFrom();for(var e=0;e<w.numChildren;e++){var t=w.getChildAt(e);clearInterval(x[e]),createjs.Tween.removeTweens(t)}return this.zimContainer_dispose(),!0}},e.extend(e.Waiter,e.Container,["clone","dispose"],"zimContainer",!1),e.ProgressBar=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C){function x(t){if(I.backing){var o=I.getChildIndex(I.backing);I.removeChild(I.backing)}else o=I.numChildren;if(I.border&&I.removeChild(I.border),zot(t)||"Pattern"!=t.type)t=I.backing=zot(t)?new e.Rectangle(M,B,n,r,a,h,null,null,!1).addTo(I,o):f.addTo(I,o);else{var i=t;((t=I.backing=new e.Rectangle(M,B,n,null,null,h,null,null,!1).addTo(I,o)).pattern=i).center(t),t.getBounds(),i.setMask(t.shape),a&&(I.border=new e.Rectangle(M,B,"rgba(0,0,0,0)",r,a,h,null,null,!1).addTo(I,o+1))}return t}function k(e){"circle"==t?E.graphics.c().mt(0,0).s(o).ss(a-2*l+.5).a(0,0,M,0,360*e/100*Math.PI/180):(L.sca(e/100,1),E.setMask(L)),zot(d)||(s.text=s.startText+" "+Math.min(Math.round(e),100)+"%"),b&&z&&100<=Math.round(e)&&(I.timeOut=setTimeout(function(){I.hide()},200)),I.stage&&I.stage.update()}var T;if(T=zob(e.ProgressBar,arguments,"barType, foregroundColor, backgroundColor, borderColor, borderWidth, padding, label, color, labelPosition, percentage, corner, shadowColor, shadowBlur, backing, delay, fastClose, container, autoHide, style, group, inherit",this))return T;z_d("59.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ProgressBar",this.group=w;var A=!1===y?{}:e.getStyle(this.type,this.group,C);zot(o)&&(o=null!=A.foregroundColor?A.foregroundColor:"#acd241"),zot(n)&&(n=null!=A.backgroundColor?A.backgroundColor:"#444"),zot(r)&&(r=null!=A.borderColor?A.borderColor:n),zot(a)&&(a=null!=A.borderWidth?A.borderWidth:null),zot(u)&&(u=null!=A.labelPosition?A.labelPosition:"bottom"),zot(t)&&(t=null!=A.barType?A.barType:"circle"),zot(l)&&(l=null!=A.padding?A.padding:"circle"==t?2:-.5),zot(h)&&(h=null!=A.corner?A.corner:15),zot(g)&&(g=null!=A.shadowColor?A.shadowColor:"rgba(0,0,0,.3)"),zot(p)&&(p=null!=A.shadowBlur?A.shadowBlur:14),zot(f)&&(f=null!=A.backing?A.backing.clone():null),zot(z)&&(z=null==A.fastClose||A.fastClose),r<0||a<0?r=a=null:null!=r&&null==a&&(a="circle"==t?10:2),zot(m)&&(m=null!=A.delay?A.delay:100),zot(b)&&(b=null==A.autoHide||A.autoHide),zot(s)&&(s=null!=A.label?A.label:null),zot(c)&&(c=null!=A.color?A.color:o),"string"!=typeof s&&"number"!=typeof s||(s=new e.Label({text:s,color:c,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),s&&s.text,!zot(d)&&zot(s)&&(s=new e.Label("")),this.label=s;var P,B=30,I=this,S=0;if(I.visible=!1,setTimeout(function(){I.visible=!0,I.stage&&I.stage.update()},m),"circle"==t)var M=20,E=(f=this.backing=new e.Circle(M,"rgba(0,0,0,0)",n,a,null,null,null,!1).addTo(this),this.bar=new e.Shape({style:!1}).addTo(I).pos({x:f.x,y:f.y,reg:!0}).rot(-90));else{M=200,-1!=g&&0<p&&(new e.Rectangle(M-2,B-2,n,null,null,h,null,null,!1).addTo(this).shadow=new createjs.Shadow(g,3,3,p)),f=x(f);var O=h;Array.isArray(O)||(O=[h,h,h,h]);var j=1.2*(l+a/2),L=(E=this.bar=new e.Rectangle(M-1.8*(l+a/2),B-1.8*(l+a/2),o,null,null,[O[0]-j,O[1]-j,O[2]-j,O[3]-j],null,null,!1).center(this),this.mask=new e.Rectangle(M-1.8*(l+a/2),B-1.8*(l+a/2),null,null,null,null,null,null,!1).center(this).alp(0).sca(0,1));E.setMask(L)}I.setBacking=function(e){x(e),I.stage&&I.stage.update()},f.on("click",function(e){e.stopImmediatePropagation()}),zot(s)||(s.scaleX=s.scaleY=.8,s.startText=s.text,zot(d)||(s.text=s.startText+"  0%"),s.center(I),"above"==u?s.y-=60:s.y+=60,s.alpha=.8),this.hide=function(){var e=I.stage;if(I.parent&&I.parent.removeChild(I),"Pattern"==I.backing.type&&I.backing.pauseInterval&&I.backing.pauseInterval(),e&&e.update(),I.zimAccessibility){var t=I.zimAccessibility;t.resize(I),P?P.focus():I.zimTabTag.nextSibling.focus(),setTimeout(function(){t.talk("Progress Bar has finished.")},50)}return I.toggled=!1,I},this.show=function(){var e="zim display - ProgressBar(): Please pass in a reference to a container with bounds set as first parameter of the ProgressBar";if(zot(v)){if(!zimDefaultFrame)return void zog(e);v=zimDefaultFrame.stage}else{if(!v.getBounds)return void zog(e);if(zot(v.stage))return void zog("zim display - Waiter(): The container must have a stage property")}if(I.timeOut&&clearTimeout(I.timeOut),k(0),I.zimActiveLoader&&I.zimActiveLoader.on("progress",function(e){k(S=100*e.progress)}),I.center(v),"Pattern"==I.backing.type&&I.backing.pauseInterval&&I.backing.pauseInterval(!1),I.zimAccessibility){var t=I.zimAccessibility;setTimeout(function(){t.activatedObject&&(P=t.activatedObject.zimTabTag)},50),t.resize(I),t.talk(I.zimTabTag.getAttribute("aria-label"))}return I.toggled=!0,I},I.toggle=function(e){return!0===e?I.show():!1===e?I.hide():I.parent?I.hide():I.show(),I},Object.defineProperty(I,"percent",{get:function(){return S},set:function(e){k(S=e)}}),!1!==y&&i(this,A),this.clone=function(){return I.cloneProps(new e.ProgressBar(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,this.group,C))},this.dispose=function(){return"Pattern"==I.backing.type&&I.backing.clearInterval&&I.backing.clearInterval(),this.zimContainer_dispose(),!0}},e.extend(e.ProgressBar,e.Container,["clone","dispose"],"zimContainer",!1),e.Indicator=function(t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w){function C(t){var o;r<=t&&(t=-1);for(var n=0;n<r;n++)o=g&&n<t?a:l,n==t&&(o=a),S.getChildAt(n).color=o;P.zimAccessibility&&P.zimAccessibility.changeTitle(P),e.OPTIMIZE||!zns&&OPTIMIZE||!P.stage||P.stage.update()}var x;if(x=zob(e.Indicator,arguments,"width, height, num, foregroundColor, backgroundColor, borderColor, borderWidth, backdropColor, corner, indicatorType, fill, scale, lightScale, interactive, shadowColor, shadowBlur, style, group, inherit",this))return x;z_d("60"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Indicator",this.group=y;var k=!1===b?{}:e.getStyle(this.type,this.group,w);zot(t)&&(t=null!=k.width?k.width:300),zot(o)&&(o=null!=k.height?k.height:50),zot(r)&&(r=null!=k.num?k.num:6),zot(a)&&(a=null!=k.foregroundColor?k.foregroundColor:"#f58e25"),zot(l)&&(l=null!=k.backgroundColor?k.backgroundColor:"#666"),l<0&&(l=null!=k.backgroundColor?k.backgroundColor:"rgba(0,0,0,.01)"),zot(s)&&(s=null!=k.borderColor?k.borderColor:null),zot(c)&&(c=null!=k.borderWidth?k.borderWidth:null),s<0||c<0?s=c=null:null!=s&&null==c&&(c=1),zot(u)&&(u=null!=k.backdropColor?k.backdropColor:-1),zot(d)&&(d=null!=k.corner?k.corner:0),zot(h)&&(h=null!=k.indicatorType?k.indicatorType:"dot"),zot(g)&&(g=null!=k.fill&&k.fill),zot(p)&&(p=null!=k.scale?k.scale:1),zot(f)&&(f=null!=k.lightScale?k.lightScale:1),zot(m)&&(m=null!=k.interactive&&k.interactive),zot(z)&&(z=null!=k.shadowColor?k.shadowColor:"rgba(0,0,0,.3)"),zot(v)&&(v=null!=k.shadowBlur?k.shadowBlur:5);var T,A=(zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",P=this;if(this.lights=[],new e.Container({style:!1}),-1!=u){var B=P.backdrop=new e.Rectangle(t,o,u,s,c,d,null,null,!1);this.addChild(B)}var I,S=this.lightsContainer=new e.Container({style:!1});this.addChild(S);var M=.5*o,E=t/(r+1),O=new createjs.Shape;"square"==h||"box"==h?O.graphics.f("black").dr(-E/2/f+M/2,-o/2+M/2,E/f,o):O.graphics.f("black").dr(-E/2/f,-o/2,E/f,o);for(var j=0;j<r;j++)"square"==h||"box"==h?((I=new e.Rectangle(M,M,l,s,c,null,null,null,!1)).regX=I.width/2,I.regY=I.height/2):I=new e.Circle(M/2,l,s,c,null,null,null,!1),this.lights.push(I),I.znum=j,I.scaleX=I.scaleY=f,I.hitArea=O,I.x=E+E*j,I.y=o/2,S.addChild(I);S.setBounds(0,0,t,o),S.regX=S.x=t/2,S.regY=S.y=o/2,this.addChild(S),-1!=z&&0<v&&(S.shadow=new createjs.Shadow(z,2,2,v)),m&&(S.cursor="pointer",S.on(A,function(e){T!=e.target.znum&&(C(T=e.target.znum),P.dispatchEvent("change"))})),S.scaleX=S.scaleY=p,Object.defineProperty(this,"selectedIndex",{get:function(){return T},set:function(t){T=Math.floor(t),C(T=e.constrain(T,-1,r-1))}}),Object.defineProperty(this,"num",{get:function(){return r},set:function(e){zon&&zog("num is read only")}}),this._enabled=!0,Object.defineProperty(P,"enabled",{get:function(){return P._enabled},set:function(e){n(P,e)}}),!1!==b&&i(this,k),this.clone=function(){return P.cloneProps(new e.Indicator(t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,this.group,w))}},e.extend(e.Indicator,e.Container,"clone","zimContainer",!1),e.List=function(t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,j,L,D,Y,X,R,_,W,F,G,H,N,V,q,K,U,Z,Q,J,$,ee,te,oe,ne,re,ie,ae,le,se,ce,ue,de,he){function ge(e,t,o){e.listZID=t,e.label&&(Pe&&new Rectangle(Ie*(o.level+1),e.height).alp(Pe).pos(0,0,"right"==Te.align,!1,e),Be&&new Rectangle(e.width,e.height).alp((o.level+1)*Be).addTo(e).bot().ord(1),Ie&&"center"!=Te.align&&(e.label.x+=("right"==Te.align?-1:1)*Ie*(o.level+1)));var n=we.getData(t);n.obj=e,n.list&&!isEmpty(n.list)&&(e.accordion=new Label({text:n.open?"-":"+",align:"center",color:convertColor(x,"rgba",.6)}).center(e).alp(.7).pos(15,null,"right"!=Te.align).mov(0,n.open?-3:0))}function pe(){if(Te.selected.accordion){var t=we.getData(Te.selected.listZID);if(t.open){Te.selected.accordion&&(Te.selected.accordion.text="+",Te.selected.accordion.mov(0,3)),t.open=!1;var o=we.getNextSibling(Te.selected.listZID);if(zot(o))var n=Te.items.length-1;else n=e.loop(Te.items,function(e,t){if(e.listZID==o)return t-1});if(Me){l=0;Te.enabled=!1,interval(Me,function(e){Te.removeAt(1,Te.selectedIndex+n-Te.selectedIndex-l),l++,e.total==e.count+1&&(Te.enabled=!0)},n-Te.selectedIndex,!0)}else Te.removeAt(n-Te.selectedIndex,Te.selectedIndex+1)}else{t.open=!0,Te.selected.accordion&&(Te.selected.accordion.text="-",Te.selected.accordion.mov(0,-3));var r=we.getLinearList(t.list),i=we.getLinearIDs(t.list);if(t.opened)Array.isArray(r)&&(Se?(l=0,Te.enabled=!1,interval(Se,function(e){Te.addAt(r[l],Te.selectedIndex+1+l),e.total==e.count+1&&(Te.enabled=!0),l++},r.length,!0)):Te.addAt(r,Te.selectedIndex+1));else{t.opened=!0;var a=Oe[t.level];if(zot(a)&&(a={}),Array.isArray(r))if(Se){var l=0;Te.enabled=!1,interval(Se,function(e){Te.addAt(r[l],Te.selectedIndex+1+l,{backgroundColor:a.backgroundColor,color:a.color,rollBackgroundColor:a.rollBackgroundColor,rollColor:a.rollColor,selectedBackgroundColor:a.selectedBackgroundColor,selectedColor:a.selectedColor,selectedRollBackgroundColor:a.selectedRollBackgroundColor,selectedRollColor:a.selectedRollColor});var o=i[l];ge(Te.items[Te.selectedIndex+1+l],o,t),e.total==e.count+1&&(Te.enabled=!0),l++,Te.stage&&Te.stage.update()},r.length,!0)}else Te.addAt(r,Te.selectedIndex+1,{backgroundColor:a.backgroundColor,color:a.color,rollBackgroundColor:a.rollBackgroundColor,rollColor:a.rollColor,selectedBackgroundColor:a.selectedBackgroundColor,selectedColor:a.selectedColor,selectedRollBackgroundColor:a.selectedRollBackgroundColor,selectedRollColor:a.selectedRollColor}),loop(i,function(e,o){ge(Te.items[Te.selectedIndex+1+o],e,t)})}}}}function fe(e){if(l){var n=-(Te.itemHeight+z)*e+o/2-Te.itemHeight/2;return(Te.itemHeight+z)*Te.length<o&&(n=0),0<n&&(n=0),(Te.itemHeight+z)*Te.length>o&&n<-Te.tabs.height+o-2*V&&(n=-Te.tabs.height+o-2*V),n}var r=-(Te.itemWidth+z)*e+t/2-Te.itemWidth/2;return(Te.itemWidth+z)*Te.length<t&&(r=0),0<r&&(r=0),(Te.itemWidth+z)*Te.length>t&&r<-Te.tabs.width+t-2*N&&(r=-Te.tabs.width+t-2*N),r}var me;if(me=zob(e.List,arguments,"width, height, list, viewNum, vertical, currentSelected, align, valign, labelAlign, labelValign, labelIndent, labelIndentHorizontal, labelIndentVertical, indent, spacing, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, selectedColor, rollColor, selectedRollColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, scrollBarOverlay, slide, slideDamp, slideSnap, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, excludeCustomTap, organizer, checkBox, pulldown, clone, cancelCurrentDrag, style, group, inherit",this))return me;z_d("60.5"),this.group=de;var ze=!1===ue?{}:e.getStyle("List",this.group,he);zot(t)&&(t=null!=ze.width?ze.width:300),zot(o)&&(o=null!=ze.height?ze.height:zot(ie)?200:200+ie.height),zot(r)&&(r=r=null!=ze.list?ze.list:["Option 1","Option 2","Option 3","Option 4","Option 5","Option 6","Option 7","Option 8","Option 9","Option 10"]),0==r.length&&(r=["%-&"]),this.originalList=r,zot(a)&&(a=null!=ze.viewNum?ze.viewNum:5),zot(l)&&(l=null==ze.vertical||ze.vertical),zot(s)&&(s=null==ze.currentSelected||ze.currentSelected);var ve=!zot(c)||!zot(d);zot(ae)&&(ae=null!=ze.checkBox&&ze.checkBox),zot(c)&&(c=null!=ze.align?ze.align:ae?"left":"center"),zot(u)&&(u=null!=ze.valign?ze.valign:"center"),zot(d)&&(d=null!=ze.labelAlign?ze.labelAlign:c),zot(h)&&(h=null!=ze.labelValign?ze.labelValign:u),zot(m)&&(m=null!=ze.indent?ze.indent:ae?0:10),zot(g)&&(g=null!=ze.labelIndent?ze.labelIndent:m),zot(p)&&(p=null!=ze.labelIndentHorizontal?ze.labelIndentHorizontal:g),zot(f)&&(f=null!=ze.labelIndentVertical?ze.labelIndentVertical:g),zot(z)&&(z=null!=ze.spacing?ze.spacing:2),zot(C)&&(C=null!=ze.backdropColor?ze.backdropColor:"#333"),zot(v)&&(v=null!=ze.backgroundColor?ze.backgroundColor:"#777"),zot(b)&&(b=null!=ze.rollBackgroundColor?ze.rollBackgroundColor:"#555"),zot(y)&&(y=null!=ze.selectedBackgroundColor?ze.selectedBackgroundColor:"#444"),zot(w)&&(w=null!=ze.selectedRollBackgroundColor?ze.selectedRollBackgroundColor:"#555"),zot(x)&&(x=null!=ze.color?ze.color:"white"),zot(T)&&(T=null!=ze.rollColor?ze.rollColor:x),zot(k)&&(k=null!=ze.selectedColor?ze.selectedColor:x),zot(A)&&(A=null!=ze.selectedRollColor?ze.selectedRollColor:T),zot(C)&&(C=null!=ze.backdropColor?ze.backdropColor:C);var be=P,ye=B;zot(P)&&(P=null!=ze.borderColor?ze.borderColor:"#999"),zot(B)&&(B=null!=ze.borderWidth?ze.borderWidth:1),zot(I)&&(I=null!=ze.padding?ze.padding:z),zot(S)&&(S=null!=ze.corner?ze.corner:0),zot(M)&&(M=null==ze.swipe||ze.swipe),zot(E)&&(E=null==ze.scrollBarActive||ze.scrollBarActive),zot(O)&&(O=null==ze.scrollBarDrag||ze.scrollBarDrag),zot(j)&&(j=null!=ze.scrollBarColor?ze.scrollBarColor:P),zot(L)&&(L=null!=ze.scrollBarAlpha?ze.scrollBarAlpha:.3),zot(D)&&(D=null==ze.scrollBarFade||ze.scrollBarFade),zot(Y)&&(Y=null!=ze.scrollBarH?ze.scrollBarH:!l),zot(X)&&(X=null!=ze.scrollBarV?ze.scrollBarV:l),O&&(D=null!=ze.scrollBarFade&&ze.scrollBarFade),zot(R)&&(R=null==ze.scrollBarOverlay||ze.scrollBarOverlay),zot(_)&&(_=null==ze.slide||ze.slide),zot(W)&&(W=null!=ze.slideDamp?ze.slideDamp:.6),zot(F)&&(F=null!=ze.slideSnap?ze.slideSnap:l?"vertical":"horizontal"),zot(G)&&(G=null!=ze.shadowColor?ze.shadowColor:"rgba(0,0,0,.3)"),zot(H)&&(H=null!=ze.shadowBlur?ze.shadowBlur:20),zot(V)&&(V=null!=ze.paddingVertical?ze.paddingVertical:I),zot(N)&&(N=null!=ze.paddingHorizontal?ze.paddingHorizontal:I),zot(q)&&(q=null==ze.scrollWheel||ze.scrollWheel),zot(U)&&(U=null!=ze.titleBar?ze.titleBar:null),zot(Z)&&(Z=null!=ze.titleBarColor?ze.titleBarColor:null),zot(Q)&&(Q=null!=ze.titleBarBackgroundColor?ze.titleBarBackgroundColor:null),zot(J)&&(J=null!=ze.titleBarHeight?ze.titleBarHeight:35),zot($)&&($=null!=ze.draggable?ze.draggable:null),zot(ee)&&(ee=null!=ze.boundary?ze.boundary:null),zot(te)&&(te=null!=ze.onTop?ze.onTop:null),zot(oe)&&(oe=null!=ze.close?ze.close:null),zot(ne)&&(ne=null!=ze.closeColor?ze.closeColor:null),zot(re)&&(re=null!=ze.excludeCustomTap&&ze.excludeCustomTap),zot(ae)&&(ae=null!=ze.checkBox&&ze.checkBox),zot(le)&&(le=null!=ze.pulldown&&ze.pulldown),zot(se)&&(se=null!=ze.clone&&ze.clone),!1===U&&(U=null),this.vertical=l;var we,Ce,xe,ke,Te=this,Ae=o;if(ae&&e.loop(r,function(o,n){r[n]=e.List.checkItem(o,null,t,"left",10,10,z,x,T,k,A,v,b,y,w)}),r.constructor=={}.constructor){var Pe=zot(r.shade)?zot(ze.shade)?.2:ze.shade:r.shade,Be=zot(r.dim)?zot(ze.dim)?.1:ze.dim:r.dim,Ie=zot(r.shift)?zot(ze.shift)?15:ze.shift:r.shift,Se=zot(r.bloom)?!zot(ze.bloom)&&ze.bloom:r.bloom,Me=zot(r.whither)?!zot(ze.whither)&&ze.whither:r.whither,Ee=zot(r.open)?!zot(ze.open)&&ze.open:r.open;!0===Se&&(Se=10),!0===Me&&(Me=10),!0===Ie&&(Ie=15),!0===Pe&&(Pe=.2),!0===Be&&(Be=.1);var Oe=zot(r.subStyles)?zot(ze.subStyles)?{}:ze.subStyles:r.subStyles;zot(r.menu)||(r=r.menu),we=new e.Hierarchy(r,Ee),Ee&&we.data&&we.data.id0&&(we.data.id0.open=!1),r=we.getLinearList(),ve||(c=d="left")}if(le&&(a=zot(we)?r.length:we.length,o=a*t/620*100+(a+1)*z+(zot(U)?0:J),B=0,y=v,C=e.clear,M=!1),e.loop(r,function(e){"ListItem"==e.type&&(e.width=t-2*z)}),this.align=c,this.valign=u,this.indent=m,zot(ie)||(o-=ie.height,ie.list=Te,ie.setButtons(),J+=ie.height),this.zimWindow_constructor(t,o,C,P,B,I,S,M,E,O,j,L,D,Y,X,_,W,F,!0,G,H,N,V,q,K,U,Z,Q,J,$,ee,te,oe,ne,ce,ue,de,ze),this.type="List",zot(U)||(o-=J),zot(ie)||ie.addTo(Te).loc(0,-ie.height),Te.itemWidth=l?t-2*N-(E?R?0:6:0):(t-2*N)/a,Te.itemHeight=l?(o-2*V)/a:o-2*V-(E?R?0:6:0),xe=e.copy(r,se),Ce=Te.tabs=new e.Tabs({width:l?Te.itemWidth:Te.itemWidth*r.length,height:l?Te.itemHeight*r.length:Te.itemHeight,tabs:xe,spacing:z,vertical:l,backgroundColor:v,rollBackgroundColor:b,selectedBackgroundColor:y,selectedRollBackgroundColor:w,color:x,rollColor:T,selectedColor:k,selectedRollColor:A,backdropColor:C,currentEnabled:!0,currentSelected:s,align:c,valign:u,labelAlign:d,labelValign:h,labelIndent:g,labelIndentHorizontal:p,labelIndentVertical:f,indent:m,useTap:!0,excludeCustomTap:re,style:ue,group:de,inherit:ze}).mov(l?0:N,l?V:0),Te.add(Ce),we){var je=we.getLinearIDs();loop(je,function(e,t){Te.tabs.buttons[t].listZID=e}),loop(Te.tabs.buttons,function(e){var t=we.getData(e.listZID);isEmpty(t.list)||(e.accordion=new Label({text:"+",align:"center",color:convertColor(x,"rgba",.6)}).center(e).alp(.7).pos(15,null,"right"!=Te.align))}),Te.tap(pe)}Ce.tap(function(e){e.target.selectedIndex!=Te.selectedIndex&&(Te.selectedIndex=Ce.selectedIndex,Te.dispatchEvent("change"),e.preventDefault())}),this.getItemIndex=function(e){return Te.items.indexOf(e)},this.animateTo=function(e,t){zot(e)&&(e=0),zot(t)&&(t=50);var o=fe(Te.selectedIndex=e);if(l){var n=Math.abs(Te.scrollY-o)/Te.itemHeight;Te.animate({scrollY:o},n*t)}else n=Math.abs(Te.scrollX-o)/Te.itemWidth,Te.animate({scrollX:o},n*t);return Te},this.addAt=function(o,n,r,i){return"ListItem"==o.type?o.width=t-2*z:Array.isArray(o)&&e.loop(o,function(e){"ListItem"==e.type&&(e.width=t-2*z)}),Te.tabs.addAt(copy(o,i),n,r),Te.content.x=0,Te.content.y=0,Te.update(),Te},this.removeAt=function(e,t){Te.tabs.removeAt(e,t);var o=Ce.getBounds();return Ce.setBounds(0,0,o.width,o.height),Te.content.x=0,Te.content.y=0,Te.update(),Te},"%-&"==r[0]&&1==r.length&&Te.removeAt(1,0),this.clear=function(){return Te.tabs.removeAt(Te.length,0),Te.content.x=0,Te.content.y=0,Te.update(),Te},this.setCheck=function(e,t){zot(e)&&(e=0),zot(t)&&(t=!0),Te.items[e].checkBox.checked=t,Te.items[e].content.zimOut()},this.getCheck=function(e){return zot(e)&&(e=0),Te.items[e].checkBox.checked},this.setChecks=function(t){return e.loop(Te.items,function(e){e.checkBox.checked=t,e.content.zimOut()}),Te},Object.defineProperty(Te,"items",{get:function(){return Te.tabs.buttons},set:function(e){zon&&zog("List() - items is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(Te,"list",{get:function(){return Te.tabs.buttons},set:function(e){zon&&zog("List() - list is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(Te,"length",{get:function(){return Te.tabs.buttons.length},set:function(e){zon&&zog("List() - length is read only")}}),Object.defineProperty(Te,"selectedIndex",{get:function(){return ke},set:function(t){Ce.selectedIndex=t,Te.label=Ce.label,Te.selected=Ce.selected,ke=t,e.OPTIMIZE||!zns&&OPTIMIZE||!Te.stage||Te.stage.update()}}),s&&(Te.selectedIndex=0),Object.defineProperty(Te,"selectedIndexPlusPosition",{get:function(){return ke},set:function(t){Te.selectedIndex=t,ke=t,l?Te.scrollY=fe(t):Te.scrollX=fe(t),e.OPTIMIZE||!zns&&OPTIMIZE||!Te.stage||Te.stage.update()}}),Object.defineProperty(Te,"text",{get:function(){if(Te.label)return Te.label.text},set:function(e){Te.label&&(Te.label.text=e)}}),Object.defineProperty(Te,"itemDown",{get:function(){return Te.tabs.buttonDown},set:function(e){}}),Object.defineProperty(Te,"itemsText",{get:function(){for(var e=[],t=0;t<Te.tabs.buttons.length;t++){var o=Te.tabs.buttons[t].label;o&&!zot(o.text)?e.push(o.text):e.push(null)}return e},set:function(e){zon&&zog("List() - itemsText is read only")}}),s&&(Te.selectedIndex=0),Object.defineProperty(Te,"checkBoxes",{get:function(){for(var e=[],t=0;t<Te.tabs.buttons.length;t++){var o=Te.tabs.buttons[t].checkBox;e.push(o)}return e},set:function(e){zon&&zog("List() - checkBoxes is read only")}}),Object.defineProperty(Te,"accordionIndex",{get:function(){var e=Te.selected.listZID;if(e)return Number(e.split("id")[1])},set:function(e){zon&&zog("ZIM List() - accordionIndex is read only")}}),this._enabled=!0,Object.defineProperty(Te,"enabled",{get:function(){return Te._enabled},set:function(e){n(Te,e)}}),this.last=function(){return this.selectedIndexPlusPosition=this.length-1,this},this.first=function(){return this.selectedIndexPlusPosition=0,this},Ee&&pe&&(Te.selected=Te.items[0],pe()),!1!==ue&&i(this,ze),this.clone=function(){return Te.cloneProps(new e.List(t,Ae,e.copy(Te.originalList,!0),a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,be,ye,I,e.copy(S),M,E,O,j,L,D,Y,X,R,_,W,F,G,H,N,V,q,K,U,Z,Q,J,$,ee,te,oe,ne,re,ie,ae,le,se,ce,ue,this.group,he))}},e.extend(e.List,e.Window,"clone","zimWindow",!1),e.List.makeBase=function(t,o,n){t.backing=new e.Rectangle(t.width,t.height,dark).center(t),"Label"==o.type?t.label=o:t.label=new e.Label(o,null,null,white),t.label.center(t).loc(n)},e.List.slider=function(t,o,n,r,i,a,l,s,c,u){var d;if(d=zob(e.List.slider,arguments,"label, min, max, val, call, step, obj, property, paddingLeft, paddingRight"))return d;var h=new e.Container(620,100);return h.type="ListItem",h.listItem="Slider",zot(c)&&(c=20),zot(u)&&(u=30),e.List.makeBase(h,t,c),h.slider=new e.Slider({inside:!0,barWidth:40,barLength:150,barColor:blue,min:o,max:n,step:a}).sca(1.5).center(h).mov(20).change(function(){h.stepper.currentValue=Math.round(h.slider.currentValue),l&&s&&(l[s]=h.slider.currentValue),i&&"function"==typeof i&&i(h.slider.currentValue),h.slider.stage&&h.slider.stage.update()}),zot(r)||(h.slider.currentValue=r),h.stepper=new e.Stepper({corner:0,arrows:!1,stepperType:"number",min:o,max:n}).sca(.5).center(h).pos(u,null,!0).change(function(){h.slider.currentValue=h.stepper.currentValue,l&&s&&(l[s]=h.stepper.currentValue),i&&"function"==typeof i&&i(h.stepper.currentValue),h.stepper.stage&&h.stepper.stage.update()}),zot(r)||(h.stepper.currentValue=r),h},e.List.checkBox=function(t,o,n,r,i,a,l){var s;if(s=zob(e.List.checkBox,arguments,"label, checked, call, obj, property, paddingLeft, paddingRight"))return s;var c=new Container(620,100);return c.type="ListItem",c.listItem="CheckBox",zot(a)&&(a=20),zot(l)&&(l=30),e.List.makeBase(c,t,a),c.checkBox=new CheckBox({startChecked:o,label:""}).sca(1.2).center(c).pos(256+l,null,!0).change(function(){r&&i&&(r[i]=c.checkBox.checked),n&&"function"==typeof n&&n(c.checkBox.checked),c.checkBox.stage&&c.checkBox.stage.update()}),c},e.List.colorPicker=function(t,o,n,r,i,a,l,s){var c;if(c=zob(e.List.colorPicker,arguments,"label, color, picker, call, obj, property, paddingLeft, paddingRight"))return c;var u=new Container(620,100);return u.type="ListItem",u.listItem="ColorPicker",zot(l)&&(l=20),zot(s)&&(s=30),e.List.makeBase(u,t,l),zot(o)&&(o=e.pink),u.colorPicker=n||new e.ColorPicker({alphaPicker:!1}),u.swatch=new e.Rectangle(132,66,o,e.lighter,5).center(u).pos(270,null,!0).cur(),u.swatch.on("mousedown",function(){u.colorPicker.selectedColor=u.swatch.color,u.colorPicker.show()}),u.colorLabel=new e.Label(u.swatch.color.toUpperCase(),40,null,e.light).center(u).pos(s,null,!0),u.colorPicker.on("close",function(){var e=u.colorPicker.stage;u.colorPicker.hide(),e&&e.update()}),u.colorPicker.on("change",function(){var e=u.colorPicker.stage;u.swatch.color=u.colorPicker.selectedColor,u.colorLabel.text=u.swatch.color.toUpperCase(),u.colorPicker.hide(),i&&a&&(i[a]=u.colorPicker.selectedColor),r&&"function"==typeof r&&r(u.colorPicker.selectedColor),e&&e.update()}),u},e.List.checkItem=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z){var v;if(v=zob(e.List.checkItem,arguments,"label, size, width, align, paddingHorizontal, paddingVertical, spacing, color, rollColor, selectedColor, selectedRollColor, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, group, inherit"))return v;var b=e.getStyle("CheckBox",m,z);zot(o)&&(o=null!=b.size?b.size:20),b=e.getStyle("List",m,z),zot(n)&&(n=300),zot(i)&&(i=10),zot(a)&&(a=10),zot(r)&&(r=null!=b.align?b.align:"center"),zot(l)&&(l=null!=b.spacing?b.spacing:2),zot(h)&&(h=null!=b.backgroundColor?b.backgroundColor:"#777"),zot(g)&&(g=null!=b.rollBackgroundColor?b.rollBackgroundColor:"#555"),zot(p)&&(p=null!=b.selectedBackgroundColor?b.selectedBackgroundColor:"#444"),zot(f)&&(f=null!=b.selectedRollBackgroundColor?b.selectedRollBackgroundColor:"#555"),zot(s)&&(s=null!=b.color?b.color:"white"),zot(c)&&(c=null!=b.rollColor?b.rollColor:s),zot(u)&&(u=null!=b.selectedColor?b.selectedColor:s),zot(d)&&(d=null!=b.selectedRollColor?b.selectedRollColor:c);var y=new Container;return y.type="CheckItem",y.checkBox=new CheckBox({size:o,label:t,color:s,tap:!0}),y.backing=new Rectangle(n-2*l,y.checkBox.height+2*a,h).addTo(y),y.checkBox.center(y),"center"!=r&&"middle"!=r&&y.checkBox.pos(i,null,"right"==r),y.backing.tap(function(){y.checkBox.toggle(),y.zimOut()}),y.checkBox.change(function(){y.zimOut()}),y.zimOver=function(){y.backing.color=y.checkBox.checked?f:g,y.checkBox.label.color=y.checkBox.checked?d:c,y.stage&&y.stage.update()},y.zimOut=function(){y.backing.color=y.checkBox.checked?p:h,y.checkBox.label.color=y.checkBox.checked?u:s,y.stage&&y.stage.update()},y.backing.on("mouseover",y.zimOver),y.checkBox.on("mouseover",y.zimOver),y.backing.on("mouseout",y.zimOut),y.checkBox.on("mouseout",y.zimOut),y},e.Stepper=function(t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,j,L,D,Y){function X(e){var t=String(e).split(".")[1];return t=t?t.length:0}function R(t,o,n,r,i){if(v){holdY=i,0==(ve=r)&&(ve=1),0==holdY&&(holdY=1),w||(C=1),be=new e.Proportion(0,x,y,y*C);var a=y;le=setTimeout(function(){(function e(){se=setTimeout(function(){var r=t;if(w){var i=Math.abs(ie-ve),l=Math.abs(ae-holdY);u?(o||n||(i=0),n&&(l=0)):(o||n||(l=0),n&&(i=0)),(10<=i||10<=l)&&(a=l<i?(ee=u?B:P,r=0<ie-ve?1:-1,be.convert(Math.abs(ve-ie))):(ee=u?P:B,r=0<ae-holdY?1:-1,"number"!=k&&j||(r*=-1),be.convert(Math.abs(holdY-ae))))}W(r),e()},a)})()},b)}}function _(){J.zimAccessibility&&J.zimAccessibility.aria||(clearTimeout(le),clearTimeout(se))}function W(o){var n;if("number"==k){var r=U;U+=ee*o*te,U=e.decimals(U,Z),f?U>J.max?U=J.min:U<J.min&&(U=J.max):(U>J.max?(U=1==P?J.max:r,m&&(Ce.cursor="default")):m&&(Ce.cursor="pointer"),U<J.min&&(U=1==P?J.min:r))}else{if(n=K+o,f)n>t.length-1&&(n=0),n<0&&(n=t.length-1);else{if(n>t.length-1)return void(m&&(Ce.cursor="default"));if(m&&(Ce.cursor="pointer"),n<0)return}K=n}G("number"==k?U:t[K],"number"==k?U:K),J.currentValue!=xe&&J.dispatchEvent("change"),xe=J.currentValue}function F(){J.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function G(o,n){K=n,m&&("number"==k&&0!=o&&0<Z&&(o=e.decimals(o,Z,!0)),s.text=o,s.center(J)),d&&(ue.alpha=1,de.color=r,ue.cursor="pointer",he.alpha=1,ge.color=r,he.cursor="pointer",f||("number"==k?(K==J.min&&(0<te?H():N()),K==J.max&&(0<te?N():H())):(0==K&&(u?N():H()),K==t.length-1&&(u?H():N())))),!he||e.OPTIMIZE||!zns&&OPTIMIZE||!he.stage?!s||e.OPTIMIZE||!zns&&OPTIMIZE||!s.stage||s.stage.update():he.stage.update(),J.zimAccessibility&&J.zimAccessibility.changeTitle(J,null,!0)}function H(){d&&(ue.alpha=.8,de.color="#aaa",ue.cursor="default")}function N(){d&&(he.alpha=.8,ge.color="#aaa",he.cursor="default")}var V;if(V=zob(e.Stepper,arguments,"list, width, backgroundColor, borderColor, borderWidth, label, color, vertical, arrows, corner, shadowColor, shadowBlur, continuous, display, press, hold, holdDelay, holdSpeed, draggable, dragSensitivity, dragRange, stepperType, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward, style, group, inherit",this))return V;z_d("61"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Stepper",this.group=D;var q=!1===L?{}:e.getStyle(this.type,this.group,Y);zot(t)&&(t=null!=q.list?q.list:[0,1,2,3,4,5,6,7,8,9]),zot(o)&&(o=null!=q.width?q.width:200),zot(r)&&(r=null!=q.backgroundColor?q.backgroundColor:"white"),zot(a)&&(a=null!=q.borderColor?q.borderColor:null),zot(l)&&(l=null!=q.borderWidth?q.borderWidth:null),a<0||l<0?a=l=null:null!=a&&null==l&&(l=1),zot(c)&&(c=null!=q.color?q.color:"#555"),zot(s)&&(s=null!=q.label?q.label:""),"string"!=typeof s&&"number"!=typeof s||(s=new e.Label({text:s,size:null!=q.size?2*q.size:64,color:c,align:null!=q.align?q.align:"center",valign:null!=q.valign?q.valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),zot(u)&&(u=null!=q.vertical&&q.vertical),zot(d)&&(d=null==q.arrows||q.arrows),zot(h)&&(h=null!=q.corner?q.corner:16),zot(g)&&(g=null!=q.shadowColor?q.shadowColor:"rgba(0,0,0,.3)"),zot(p)&&(p=null!=q.shadowBlur?q.shadowBlur:14),zot(f)&&(f=null!=q.continuous&&q.continuous),zot(m)&&(m=null==q.display||q.display),zot(z)&&(z=null==q.press||q.press),zot(v)&&(v=null==q.hold||q.hold),zot(b)&&(b=null!=q.holdDelay?q.holdDelay:400),zot(y)&&(y=null!=q.holdSpeed?q.holdSpeed:200),zot(w)&&(w=null==q.draggable||q.draggable),(zot(C)||C<=0)&&(C=null!=q.dragSensitivity?q.dragSensitivity:.1),zot(x)&&(x=null!=q.dragRange?q.dragRange:200),zot(k)&&(k=null!=q.stepperType?q.stepperType:"list"),zot(T)&&(T=null!=q.min?q.min:0),zot(A)&&(A=null!=q.max?q.max:100),zot(P)&&(P=null!=q.step?q.step:1),zot(B)&&(B=null!=q.step2?q.step2:P),zot(I)&&B!=P&&"number"==k&&(I=null==q.arrows2||q.arrows2),zot(S)&&(S=null!=q.arrows2Scale?q.arrows2Scale:.5),zot(M)&&(M=null==q.keyEnabled||q.keyEnabled),zot(E)&&(E=null==q.keyArrows||q.keyArrows),zot(O)&&(O=null==q.rightForward||q.rightForward),zot(j)&&(j=null!=q.downForward?q.downForward:"number"!=k);var K,U,Z,Q,J=this,$=100,ee=P,te=1;if("number"==k){if(T=Number(T),A=Number(A),NaN==T&&(T=0),NaN==A&&(A=100),A<T){te=-1;var oe=A;A=T,T=oe,U=A}else U=T;this.min=T,this.max=A,T<0&&0<A&&(U=0),P=Math.abs(P),Z=Math.max(X(P),X(B))}else if("letter"==k){t="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),"string"!=typeof T&&(T="A"),"string"!=typeof A&&(A="Z"),T=T.substr(0,1).toUpperCase(),A=A.substr(0,1).toUpperCase();var ne=t.indexOf(T);ne<0&&(T="A",ne=0);var re=t.indexOf(A);re<0&&(A="Z",re=t.length),re<ne&&(t.reverse(),ne=t.length-1-ne,re=t.length-1-re),t=t.splice(ne,re-ne+1)}else k="list";var ie=0,ae=0;w&&this.on("mousedown",function(e){J.zimAccessibility&&J.zimAccessibility.aria||(this.stage.mouseMoveOutside=!0,ie=e.rawX/e.target.stage.scaleX,ae=e.rawY/e.target.stage.scaleY,Q=this.stage.on("stagemousemove",function(e){ie=e.rawX/e.target.stage.scaleX,ae=e.rawY/e.target.stage.scaleY}))},null,!0),(this.label=s).mouseChildren=!1,s.mouseEnabled=!1;var le,se,ce,ue,de,he,ge,pe,fe,me,ze,ve,be,ye=!1;if(d||I){var we=new createjs.Shape;we.graphics.ss(a).s(l).f("rgba(255,255,255,.11)").r(0,0,150,150),we.regX=75,we.regY=87.5}if(d&&(ue=this.containerPrev=new e.Container({style:!1}),this.addChild(ue),ue.hitArea=we,de=this.arrowPrev=new e.Triangle($,80,80,r,null,null,null,null,null,null,!1),-1!=g&&0<p&&(ue.shadow=new createjs.Shadow(g,3,3,p)),ue.addChild(de),ue.cursor="pointer",ue.on("mousedown",function(e){if(!J.zimAccessibility||!J.zimAccessibility.aria){ee=P;var t=u?j?1:-1:O?-1:1;W(t),R(t,null,null,e.stageX/e.target.stage.scaleX,e.stageY/e.target.stage.scaleY)}}),v&&ue.on("pressup",_),u?(ue.rotation=180,ue.x=o/2,ue.y=m?ue.height+25+$+ue.height/2+25:2*ue.height):(ue.rotation=-90,ue.x=ue.height/2,ue.y=ue.width/2)),m){var Ce=this.textBox=new e.Shape({style:!1});Ce.cursor="pointer",this.addChild(Ce),Ce.setBounds(0,0,o,$),null!=a&&Ce.graphics.s(a).ss(l);var xe,ke=h;Array.isArray(ke)||(ke=[h,h,h,h]),Ce.graphics.f(r).rc(0,0,o,$,ke[0],ke[1],ke[2],ke[3]),-1!=g&&0<p&&(Ce.shadow=new createjs.Shadow(g,3,3,p)),d&&(u?d&&(Ce.y=de.height+25):d&&(Ce.x=de.height+25)),this.addChild(s),0<t.length&&(K=0,s.text=t[K]),s.center(J),Ce.on("mousedown",function(e){J.zimAccessibility&&J.zimAccessibility.aria||(xe=J.currentValue,z&&W(1),R(1,!0,null,e.stageX/e.target.stage.scaleX,e.stageY/e.target.stage.scaleY),"number"==k&&(clearTimeout(ce),ye=!0,ce=setTimeout(function(){ye=!1},200)))}),Ce.on("pressup",function(){J.zimAccessibility&&J.zimAccessibility.aria||ye&&(G(U=Math.round(U),U),J.currentValue!=xe&&J.dispatchEvent("change"),xe=J.currentValue)})}else 0<t.length&&(K=0);d&&(he=this.containerNext=new e.Container({style:!1}),this.addChild(he),he.hitArea=we.clone(),ge=this.arrowNext=new e.Triangle($,80,80,r,null,null,null,null,null,null,!1),-1!=g&&0<p&&(he.shadow=new createjs.Shadow(g,3,3,p)),he.addChild(ge),he.cursor="pointer",he.on("mousedown",function(e){if(!J.zimAccessibility||!J.zimAccessibility.aria){ee=P;var t=u?j?-1:1:O?1:-1;W(t),R(t,null,null,e.stageX/e.target.stage.scaleX,e.stageY/e.target.stage.scaleY)}}),v&&he.on("pressup",_),u?(he.rotation=0,he.x=o/2,he.y=he.getBounds().height/2):(he.rotation=90,he.x=m?Ce.x+Ce.getBounds().width+he.getBounds().height/2+25:ue.x+ue.getBounds().width,he.y=he.getBounds().width/2)),v&&m&&Ce.on("pressup",_),I&&((pe=this.prev2=new e.Container({style:!1})).hitArea=we.clone(),fe=this.arrowPrev2=new e.Triangle($,80,80,"rgba(0,0,0,.2)",r,2,null,null,null,null,!1),pe.addChild(fe),pe.cursor="pointer",pe.sca(S),pe.alpha=.5,pe.on("mousedown",function(e){if(!J.zimAccessibility||!J.zimAccessibility.aria){ee=B;var t=u?O?-1:1:j?1:-1;W(t),R(t,null,!0,e.stageX/e.target.stage.scaleX,e.stageY/e.target.stage.scaleY)}}),v&&pe.on("pressup",_),(me=this.next2=new e.Container({style:!1})).hitArea=we.clone(),ze=this.arrowNext2=new e.Triangle($,80,80,"rgba(0,0,0,.2)",r,2,null,null,null,null,!1),me.addChild(ze),me.cursor="pointer",me.sca(S),me.alpha=.5,me.on("mousedown",function(e){if(!J.zimAccessibility||!J.zimAccessibility.aria){ee=B;var t=u?O?1:-1:j?-1:1;W(t),R(t,null,!0,e.stageX/e.target.stage.scaleX,e.stageY/e.target.stage.scaleY)}}),v&&me.on("pressup",_),u?(pe.y=this.height/2,pe.x=-pe.width/2-25*Math.max(.2,Math.min(1,S)),pe.rotation=270,me.y=this.height/2,me.x=this.width+me.width/2+25*Math.max(.2,Math.min(1,S)),me.rotation=90):(me.x=this.width/2,me.y=-me.height/2-25*Math.max(.2,Math.min(1,S)),me.rotation=0,pe.x=this.width/2,pe.y=this.height+pe.height/2+25*Math.max(.2,Math.min(1,S)),pe.rotation=180),this.addChild(pe,me)),Object.defineProperty(this,"stepperArray",{get:function(){if("number"==k){t=[];for(var o=J.min;o<=J.max;o+=Math.min(P,B))t.push(e.decimals(o,Z,null,!1))}return t},set:function(e){t=e,J.selectedIndex=J.selectedIndex}}),Object.defineProperty(this,"min",{get:function(){return T},set:function(e){"number"==k?(J.currentValue<e&&(J.currentValue=e),T=e,J.selectedIndex=J.selectedIndex):T=e}}),Object.defineProperty(this,"max",{get:function(){return A},set:function(e){"number"==k?(J.currentValue>e&&(J.currentValue=e),A=e,J.selectedIndex=J.selectedIndex):A=e}}),G("number"==k?U:t[K],"number"==k?U:K),Object.defineProperty(this,"selectedIndex",{get:function(){return"number"==k?J.stepperArray.indexOf(J.currentValue):K},set:function(e){zot(e)||("number"==k?(K=Math.min(J.stepperArray.length-1,Math.max(0,e)),G(U=J.stepperArray[K],U)):(e=Math.min(t.length-1,Math.max(0,e)),G(t[K=e],K)))}}),Object.defineProperty(this,"currentValue",{get:function(){return"number"==k?U:t[K]},set:function(e){if(!zot(e))if("number"==k){if(e=Number(e),J.max>J.min){if(e>J.max||e<J.min)return}else if(e<J.max||e>J.min)return;if(newIndex=J.stepperArray.indexOf(e),newIndex<0)return;K=newIndex,G(U=J.stepperArray[K],U)}else{if(!(-1<t.indexOf(e)))return;if((e=t.indexOf(e))==J.selectedIndex)return;G(t[K=e],K)}}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return J.currentValue},set:function(e){String(e)!=String(J.currentValue)&&(J.currentValue=e,J.dispatchEvent("change"))}}),Object.defineProperty(this,"continuous",{get:function(){return f},set:function(e){f=e,"number"==k?G(U,U):G(t[J.selectedIndex],J.selectedIndex)}}),this._enabled=!0,Object.defineProperty(J,"enabled",{get:function(){return J._enabled},set:function(o){n(J,o),o?("number"==k?G(U,U):G(t[J.selectedIndex],J.selectedIndex),window.addEventListener("keydown",J.keyDownEvent)):(H(),N(),window.removeEventListener("keydown",J.keyDownEvent),m&&(s.mouseChildren=!1),m&&(s.mouseEnabled=!1)),!he||e.OPTIMIZE||!zns&&OPTIMIZE||!he.stage?!s||e.OPTIMIZE||!zns&&OPTIMIZE||!s.stage||s.stage.update():he.stage.update()}}),"undefined"!=typeof KEYFOCUS&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==J},set:function(t){e.KEYFOCUS=J}}),e.KEYFOCUS||F(),this.on("mousedown",function(){F()});var Te=!1,Ae=!1,Pe=!1;this.on("mousedown",function(){J.zimAccessibility&&J.zimAccessibility.aria||(J.focus=!0,Pe=Ae=!(Te=!0))}),this.keyDownEvent=function(e){if(J.stage&&(J.zimAccessibility&&J.focus||!J.zimAccessibility&&J.keyFocus)){var t,o=(e=e||event).keyCode;if(E&&37<=o&&o<=40){var n=j?40:38,r=O?39:37,i=j?38:40,a=O?37:39;o==n||o==r?(ee=u&&o==n||!u&&o==r?P:B,W(1)):o!=i&&o!=a||(ee=u&&o==i||!u&&o==a?P:B,W(-1))}M&&("number"==k?(!e.shiftKey&&48<=o&&o<=57?t=o-48:96<=o&&o<=105?t=o-96:190==o?Ae=!0:173==o||189==o?(J.currentValue=-1*J.currentValue,J.currentValue!=xe&&J.dispatchEvent("change"),xe=J.currentValue,Pe=!Pe):46==o&&(Ae=!(Te=!0)),Te&&!zot(t)?(Ae&&(t/=10),Pe&&(t*=-1),J.currentValue=t,Te=!1,J.currentValue!=xe&&J.dispatchEvent("change"),xe=J.currentValue):zot(t)||(Ae&&(t=String(t/10).substr(1)),J.currentValue=Number(Math.floor(Number(s.text))+String(t)),J.currentValue!=xe&&J.dispatchEvent("change"),xe=J.currentValue)):(J.currentValue=String.fromCharCode(e.keyCode),J.currentValue!=xe&&J.dispatchEvent("change"),xe=J.currentValue))}},window.addEventListener("keydown",this.keyDownEvent),this.next=function(){W(1)},!(this.prev=function(){W(-1)})!==L&&i(this,q),this.clone=function(){return J.cloneProps(new e.Stepper(t,o,r,a,l,s.clone(),c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,j,L,this.group,Y))},this.dispose=function(){return window.removeEventListener("keydown",J.keyDownEvent),J.stage&&J.stage.off(Q),this.zimContainer_dispose(),!0}},e.zut=function(t){if(zot(t)||!t.key)return!0;e.async("https://zimjs.com/gamdata.php?id="+t.key+"&player="+t.player+"&score="+t.score+"&reverse="+t.info.reverse+"&total="+t.info.total+"&allowZero="+t.info.allowZero,t.info.type)},e.extend(e.Stepper,e.Container,["clone","dispose"],"zimContainer",!1),e.Slider=function(t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y){function w(e){return 0==r?e:Math.round(e/r)*r}function C(n){var r=H.globalToLocal(n.stageX/I.scaleX,n.stageY/I.scaleY),i=function(e,t,o){return e=Math.max(o.x,Math.min(o.x+o.width,e)),t=Math.max(o.y,Math.min(o.y+o.height,t)),{x:e,y:t}}(r.x-_,r.y-W,D);V=u?(a.x=i.x,N=w((i.y-D.y)/D.height*(t-o)),a.y=D.y+N*D.height/(t-o),N+=o,a.y!=V&&H.dispatchEvent("change"),a.y):(N=w((i.x-D.x)/D.width*(o-t)),a.x=D.x+N*D.width/(o-t),N+=t,a.y=i.y,a.x!=V&&H.dispatchEvent("change"),a.x),k(),e.OPTIMIZE||!zns&&OPTIMIZE||!H.stage||H.stage.update()}function x(e){return 0<e?1:-1}function k(){H.zimAccessibility&&H.zimAccessibility.changeTitle(H,null,!0)}function T(){H.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function A(){(J||$)&&(H.currentValueEvent-=0<r?r*x(o-t):p*x(o-t)),(ee||te)&&(H.currentValueEvent+=0<r?r*x(o-t):p*x(o-t))}var P;if(P=zob(e.Slider,arguments,"min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, inside, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, damp, style, group, inherit",this))return P;z_d("62"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Slider",this.group=b;var B=!1===v?{}:e.getStyle(this.type,this.group,y);if(zot(t)&&(t=null!=B.min?B.min:0),zot(o)&&(o=null!=B.max?B.max:10),o-t!=0){var I;zot(r)&&(r=null!=B.step?B.step:0),zot(l)&&(l=null!=B.barLength?B.barLength:300),zot(s)&&(s=null!=B.barWidth?B.barWidth:3),zot(c)&&(c=null!=B.barColor?B.barColor:"#666"),zot(u)&&(u=null!=B.vertical&&B.vertical),zot(d)&&(d=null!=B.useTicks&&B.useTicks),zot(h)&&(h=null!=B.inside&&B.inside),zot(g)&&(g=null==B.keyArrows||B.keyArrows),zot(f)&&(f=null==B.keyArrowsH||B.keyArrowsH),zot(m)&&(m=null==B.keyArrowsV||B.keyArrowsV),zot(p)&&(p=null!=B.keyArrowsStep?B.keyArrowsStep:(o-t)/100),zot(z)&&(z=null!=B.damp&&B.damp);var S,M,E=!(!zot(B.backing)&&"Pattern"!=B.backing.type);if(zot(a)){var O=30,j=40;u&&(O=50,j=40),a=null!=B.button?B.button:new e.Button({width:null!=B.width?B.width:O,height:null!=B.height?B.height:j,label:"",backgroundColor:null!=B.backgroundColor?B.backgroundColor:"#fff",rollBackgroundColor:null!=B.rollBackgroundColor?B.rollBackgroundColor:"#ddd",borderColor:null!=B.borderColor?B.borderColor:E?"#666":null,borderWidth:null!=B.borderWidth?B.borderWidth:E?1:null,corner:null!=B.corner?B.corner:0,backing:null!=B.backing?B.backing.clone():null,rollBacking:null!=B.rollBacking?B.rollBacking.clone():null,shadowColor:null!=B.shadowColor?B.shadowColor:null,shadowBlur:null!=B.shadowBlur?B.shadowBlur:null,hitPadding:30,style:!1})}a.rollPersist=!0,u?(S=a.width,h?(M=l,this.setBounds(0,0,S,M)):(M=l+a.height,this.setBounds(-a.width/2,-a.height/2,S,M))):(M=Math.max(a.height,s),h?(S=l,this.setBounds(0,0,S,M)):(S=l+a.width,this.setBounds(-a.width/2,-a.height/2,S,M)));var L,D,Y,X,R,_,W,F,G,H=this,N=t,V=0;if(this.button=a,this.cursor="pointer",d&&0!=r){X=this.ticks=new e.Shape({style:!1}),this.addChild(X),(R=X.graphics).ss(1).s(c);var q=Math.round((o-t)/r),K=(o-t)/q;if(K!=r&&zon&&zog("zim.Slider() : non-divisible step ("+r+") adjusted"),r=K,h)var U=(l-(u?a.height:a.width))/Math.abs(q);else U=l/Math.abs(q)}if(u){var Z=h?a.height/2:0;if((L=this.bar=new e.Rectangle(s,l,c,null,null,null,null,null,!1)).expand(20,0),L.centerReg(this),a.centerReg(this),Y=L.getBounds(),D=new createjs.Rectangle(L.x,Y.y+Z,0,Y.height-2*Z),d&&0!=r){for(var Q=0;Q<=Math.abs(q);Q++)R.mt(0,Z+U*Q).lt(20,Z+U*Q);X.x=L.x+15}}else if(Z=h?a.width/2:0,(L=this.bar=new e.Rectangle(l,s,c,null,null,null,null,null,!1)).expand(0,20),L.centerReg(this),a.centerReg(this),Y=L.getBounds(),D=new createjs.Rectangle(Y.x+Z,L.y,Y.width-2*Z,0),d&&0!=r){for(Q=0;Q<=Math.abs(q);Q++)R.mt(Z+U*Q,0).lt(Z+U*Q,-20);X.y=L.y-10}a.x=D.x,a.y=D.y,a.on("mousedown",function(e){I=e.target.stage,H.focus=!0;var t=H.globalToLocal(e.stageX/I.scaleX,e.stageY/I.scaleY);_=t.x-a.x,W=t.y-a.y,H.stage&&(H.stage.mouseMoveOutside=!0)}),a.on("pressmove",function(e){C(e)}),L.on("mousedown",function(e){I=e.target.stage,W=_=0,H.zimAccessibility&&H.zimAccessibility.aria||C(e)}),z&&(F=t,G=new e.Damp(F,z),H.ticker=e.Ticker.add(function(){F=G.convert(N)})),Object.defineProperty(this,"currentValue",{get:function(){return z?F:N},set:function(n){zot(n)||(t<o?(n<t&&(n=t),o<n&&(n=o)):(t<n&&(n=t),n<o&&(n=o)),N=n=w(n),G&&G.immediate(N),V=u?(a.y=(n-o)/(t-o)*D.height+Z,a.y):(a.x=(n-t)/(o-t)*D.width+Z,a.x),k(),e.OPTIMIZE||!zns&&OPTIMIZE||!H.stage||H.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return z?F:N},set:function(e){e!=H.currentValue&&(H.currentValue=e,H.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return t},set:function(e){zon&&zog("min is read only")}}),Object.defineProperty(this,"max",{get:function(){return o},set:function(e){zon&&zog("max is read only")}}),Object.defineProperty(this,"step",{get:function(){return r},set:function(e){zon&&zog("step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return f},set:function(e){f=e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return m},set:function(e){m=e}}),"undefined"!=typeof KEYFOCUS&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==H},set:function(t){e.KEYFOCUS=H}}),g&&!e.KEYFOCUS&&T(),this.on("mousedown",function(){g&&T()});var J=!1,$=!1,ee=!1,te=!1;this.keyDownEvent=function(e){H.stage&&(H.zimAccessibility&&H.focus||!H.zimAccessibility&&H.keyFocus)&&(37==e.keyCode&&f?J=!0:40==e.keyCode&&m?$=!0:39==e.keyCode&&f?ee=!0:38==e.keyCode&&m&&(te=!0),null==H.keyInterval&&(J||$||ee||te)&&(A(),H.keyTimeout=setTimeout(function(){null==H.keyInterval&&(J||$||ee||te)&&(H.keyInterval=setInterval(A,40))},140)))},window.addEventListener("keydown",this.keyDownEvent),H.keyUpEvent=function(e){37==e.keyCode?J=!1:40==e.keyCode?$=!1:39==e.keyCode?ee=!1:38==e.keyCode&&(te=!1),null==H.keyInterval||J||$||ee||te||(clearInterval(H.keyInterval),H.keyInterval=null)},window.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(H,"enabled",{get:function(){return H._enabled},set:function(e){n(H,e),e?(window.addEventListener("keydown",H.keyDownEvent),window.addEventListener("keyup",H.keyUpEvent)):(window.removeEventListener("keydown",H.keyDownEvent),window.removeEventListener("keyup",H.keyUpEvent))}}),!1!==v&&i(this,B),this.clone=function(){return H.cloneProps(new e.Slider(t,o,r,a.clone(),l,s,c,u,d,h,g,p,f,m,z,v,this.group,y))},this.dispose=function(){return window.removeEventListener("keydown",H.keyDownEvent),window.removeEventListener("keyup",H.keyUpEvent),this.zimContainer_dispose(),!0}}else zog("ZIM Slider range must not be 0")},e.extend(e.Slider,e.Container,["clone","dispose"],"zimContainer",!1),e.Dial=function(t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P){function B(e){return 0==r?e:Math.round(e/r)*r}function I(e){return 0<e?1:-1}function S(){Y.zimAccessibility&&Y.zimAccessibility.changeTitle(Y,null,!0)}function M(n){if(w){re+180<n?ae-=360:n<re-180&&(ae+=360),ie=ae+n,se=!1;var i=Y.currentValue;return Y.currentValue=B(ie*(o-t)/360),i!=Y.currentValue&&Y.dispatchEvent("change"),re=n,se=!0}var a;n<0&&(n+=360),n%=360,0!=r?(a=B((n=Math.min(n,360-360/(U+1)))/(360-360/(U+1))*(o-t)),$.rotation=a*(360-360/(U+1))/(o-t)):a=($.rotation=n)/360*(o-t),a!=_&&(R=(_=a)+t,Y.dispatchEvent("change"),e.OPTIMIZE||!zns&&OPTIMIZE||!Y.stage||Y.stage.update()),S()}function E(){Y.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function O(){(ce||ue)&&(Y.currentValueEvent-=0<r?r*I(o-t):v*I(o-t)),(de||he)&&(Y.currentValueEvent+=0<r?r*I(o-t):v*I(o-t))}var j;if(j=zob(e.Dial,arguments,"min, max, step, width, backgroundColor, indicatorColor, indicatorScale, indicatorType, innerCircle, innerScale, useTicks, innerTicks, tickColor, limit, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, continuous, continuousMin, continuousMax, damp, style, group, inherit",this))return j;z_d("63"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Dial",this.group=A;var L=!1===T?{}:e.getStyle(this.type,this.group,P);if(zot(t)&&(t=null!=L.min?L.min:0),zot(o)&&(o=null!=L.max?L.max:10),o-t!=0){var D;zot(r)&&(r=null!=L.step?L.step:1),zot(a)&&(a=null!=L.width?L.width:100),zot(l)&&(l=null!=L.backgroundColor?L.backgroundColor:"#666"),zot(s)&&(s=null!=L.indicatorColor?L.indicatorColor:"#222"),zot(c)&&(c=null!=L.indicatorScale?L.indicatorScale:1),zot(u)&&(u=null!=L.indicatorType?L.indicatorType:"arrow"),zot(d)&&(d=null==L.innerCircle||L.innerCircle),zot(h)&&(h=null!=L.innerScale?L.innerScale:.5),zot(g)&&(g=null==L.useTicks||L.useTicks),zot(p)&&(p=null!=L.innerTicks&&L.innerTicksinnerTicks),zot(f)&&(f=null!=L.tickColor?L.tickColor:s),zot(m)&&(m=null==L.limit||L.limit),zot(z)&&(z=null==L.keyArrows||L.keyArrows),zot(v)&&(v=null!=L.keyArrowsStep?L.keyArrowsStep:(o-t)/100),zot(b)&&(b=null==L.keyArrowsH||L.keyArrowsH),zot(y)&&(y=null==L.keyArrowsV||L.keyArrowsV),zot(w)&&(w=null!=L.continuous&&L.continuous),w&&(m=null!=L.limit&&L.limit),zot(k)&&(k=null!=L.damp&&L.damp),0==m&&(k=null);var Y=this;this.cursor="pointer";var X=a/2,R=t,_=0,W=this.backing=new e.Circle(X,l,null,null,null,null,null,!1);if(this.addChild(W),d){var F=p?"rgba(0,0,0,.2)":"rgba(0,0,0,.1)";"black"!=l&&"#000"!=l&&"#000000"!=l&&"#111"!=l&&"#111111"!=l||(F="#222");var G=this.inner=new e.Circle(X*h,F,null,null,null,null,null,!1);if(this.addChild(G),!p){var H=this.inner2=new e.Circle(X*(h-.1),"rgba(0,0,0,.1)",null,null,null,null,null,!1);this.addChild(H)}}var N,V,q,K,U=Math.abs(o-t)/r;if(g&&0!=r){var Z=this.ticks=new e.Container({style:!1});this.addChild(Z);for(var Q=0;Q<(w?U:U+1);Q++){var J;(J=new e.Rectangle(1,.2*X,f,null,null,null,null,null,!1)).regY=X*(p?h-.05:1.28),J.regX=.5,J.rotation=360/(w?U:U+1)*Q,Z.addChild(J)}}if(this.setBounds(-X,-X,a,a),"dot"==u||"circle"==u){var $=this.indicator=new e.Container({style:!1}),ee=this.indicatorShape=new e.Circle(.19*X,s,null,null,null,null,null,!1);$.addChild(ee),e.sca($,c),$.regY=X-$.getBounds().width*c/2-.07*X}else"line"==u||"rectangle"==u?($=this.indicator=new e.Container({style:!1}),ee=this.indicatorShape=new e.Rectangle(.1*X,.3*X,s,null,null,null,null,null,null,!1),$.addChild(ee),e.sca($,c),$.regY=X-$.getBounds().width*c/2-.07*X,$.regX=.05*X):($=this.indicator=new e.Container({style:!1}),ee=this.indicatorShape=new e.Triangle(.4*X,.4*X,.4*X,s,null,null,null,null,null,null,!1),$.addChild(ee),e.sca($,c),$.regY=X-$.getBounds().height*c*(p?.85:.75),p&&(ee.rotation=180));$.regY/=c,this.addChild($);var te,oe,ne=0;if(w)var re=0,ie=0,ae=0,le=!1,se=!0;this.on("mousedown",function(e){if(D=e.target.stage,!Y.zimAccessibility||!Y.zimAccessibility.aria){N=$.rotation;var t=Y.parent.globalToLocal(e.stageX/D.scaleX,e.stageY/D.scaleY);t.x;var o=t.x-Y.x,n=Y.y-t.y;V=180*Math.atan2(o,n)/Math.PI;var r=(new Date).getTime();q=Y.on("pressmove",function(e){if(le){var t=Y.parent.globalToLocal(e.stageX/D.scaleX,e.stageY/D.scaleY),o=t.x-Y.x,n=Y.y-t.y;V=180*Math.atan2(o,n)/Math.PI,N=$.rotation}o=(t=Y.parent.globalToLocal(e.stageX/D.scaleX,e.stageY/D.scaleY)).x-Y.x,n=Y.y-t.y;var r=180*Math.atan2(o,n)/Math.PI,i=N+r-V;i=(i+36e5)%360,m&&(180<i-ne?i=0:i-ne<-180&&(i=359)),M(i),ne=i,t.x}),K=this.on("pressup",function(e){(new Date).getTime()-r<200&&(t=Y.parent.globalToLocal(e.stageX/D.scaleX,e.stageY/D.scaleY),o=t.x-Y.x,n=Y.y-t.y,M(180*Math.atan2(o,n)/Math.PI)),N=$.rotation,Y.off("pressmove",q),Y.off("pressup",K)})}}),k&&(te=t,oe=new e.Damp(te,k),Y.ticker=e.Ticker.add(function(){te=oe.convert(R)})),Object.defineProperty(this,"currentValue",{get:function(){return k?te:R},set:function(n){zot(n)||(w?(le=!1,zot(C)||zot(x)?zot(C)?zot(x)||x<n&&(n=x,le=!0):n<C&&(n=C,le=!0):C<x?(n<C&&(n=C,le=!0),x<n&&(n=x,le=!0)):(C<n&&(n=C,le=!0),n<x&&(n=x,le=!0)),se&&(ae=360*Math.floor(n/(o-t)))):t<o?(n<t&&(n=m?t:o),o<n&&(n=m?o:t)):(t<n&&(n=m?t:o),n<o&&(n=m?o:t)),n=B(R=n),k&&k.immediate(R),$.rotation=360*(n-t)/(o-t+(w?0:I(o-t)*r)),$.rotation=($.rotation+36e5)%360,_=n-t,ne=$.rotation,S(),e.OPTIMIZE||!zns&&OPTIMIZE||!Y.stage||Y.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return k?te:R},set:function(e){e!=Y.currentValue&&(Y.currentValue=e,Y.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return t},set:function(e){w?t=e:zon&&zog("min is read only")}}),Object.defineProperty(this,"max",{get:function(){return o},set:function(e){w?o=e:zon&&zog("max is read only")}}),Object.defineProperty(this,"continuous",{get:function(){return w},set:function(e){zon&&zog("continuous is read only")}}),Object.defineProperty(this,"continuousMin",{get:function(){return C},set:function(e){C=e,Y.currentValue<C&&(Y.currentValue=C)}}),Object.defineProperty(this,"continuousMax",{get:function(){return x},set:function(e){x=e,Y.currentValue>x&&(Y.currentValue=x)}}),Object.defineProperty(this,"step",{get:function(){return r},set:function(e){zon&&zog("step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return b},set:function(e){b=e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return y},set:function(e){y=e}}),"undefined"!=typeof KEYFOCUS&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==Y},set:function(t){e.KEYFOCUS=Y}}),z&&!e.KEYFOCUS&&E(),this.on("mousedown",function(){z&&E()});var ce=!1,ue=!1,de=!1,he=!1;this.keyDownEvent=function(e){Y.stage&&(Y.zimAccessibility&&Y.focus||!Y.zimAccessibility&&Y.keyFocus)&&(37==e.keyCode&&b?ce=!0:40==e.keyCode&&y?ue=!0:39==e.keyCode&&b?de=!0:38==e.keyCode&&y&&(he=!0),null==Y.keyInterval&&(ce||ue||de||he)&&(O(),Y.keyTimeout=setTimeout(function(){null==Y.keyInterval&&(ce||ue||de||he)&&(Y.keyInterval=setInterval(O,40))},140)))},window.addEventListener("keydown",this.keyDownEvent),Y.keyUpEvent=function(e){37==e.keyCode?ce=!1:40==e.keyCode?ue=!1:39==e.keyCode?de=!1:38==e.keyCode&&(he=!1),null==Y.keyInterval||ce||ue||de||he||(clearInterval(Y.keyInterval),Y.keyInterval=null)},window.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(Y,"enabled",{get:function(){return Y._enabled},set:function(e){n(Y,e),e?(Y.keyDownEvent=window.addEventListener("keydown",Y.keyDownEvent),Y.keyUpEvent=window.addEventListener("keyup",Y.keyUpEvent)):(window.removeEventListener("keydown",Y.keyDownEvent),window.removeEventListener("keyup",Y.keyUpEvent))}}),!1!==T&&i(this,L),this.clone=function(){return Y.cloneProps(new e.Dial(t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,this.group,P))},this.dispose=function(){return window.removeEventListener("keydown",Y.keyDownEvent),window.removeEventListener("keyup",Y.keyUpEvent),this.zimContainer_dispose(),!0}}else zog("ZIM Dial range must not be 0")},e.extend(e.Dial,e.Container,["clone","dispose"],"zimContainer",!1),e.Tabs=function(t,o,r,a,l,s,c,u,d,g,p,f,m,z,v,b,y,C,x,k,T,A,P,B,I,S,M,E,O,j,L,D,Y,X,R,_,W,F,G,H,N,V,q,K){function U(e){for(var t=0;t<e.length;t++){var o=e[t];o.constructor!=={}.constructor?ge="string"==typeof o||"number"==typeof o||"Label"==o.type?(e[t]={type:"TabObject",label:String(null!=o)||"Label"==o.type?o:"1"},ge&&"TabObject"!=ge&&(pe=!0),"TabObject"):(ge&&"TabObject"==ge&&(pe=!0),"Other"):(ge&&"TabObject"!=ge&&(pe=!0),ge="TabObject",o.type="TabObject")}}function Z(t,n){for(be=0;be<t.length;be++)""!=(fe=t[be])&&"TabObject"==fe.type&&(zot(fe.label)&&(fe.label=" "),"string"!=typeof fe.label&&"number"!=typeof fe.label||(fe.label=new e.Label({text:fe.label,size:null!=oe.size?oe.size:f?de/2:o/2,font:null!=oe.font?oe.font:null,style:!1,valign:R,inherit:n})))}function Q(n,r){var i=[],h=[];for(be=0;be<n.length;be++){if("TabObject"==(fe=n[be]).type){var m={color:zot(fe.color)?u:fe.color,rollColor:zot(fe.rollColor)?d:fe.rollColor,selectedColor:zot(fe.selectedColor)?g:fe.selectedColor,selectedRollColor:zot(fe.selectedRollColor)?p:fe.selectedRollColor,backgroundColor:zot(fe.backgroundColor)?a:fe.backgroundColor,rollBackgroundColor:zot(fe.rollBackgroundColor)?l:fe.rollBackgroundColor,selectedBackgroundColor:zot(fe.selectedBackgroundColor)?s:fe.selectedBackgroundColor,selectedRollBackgroundColor:zot(fe.selectedRollBackgroundColor)?c:fe.selectedRollBackgroundColor,wait:zot(fe.wait)?P:fe.wait};if(r)for(aStyle in r)zot(r[aStyle])||(m[aStyle]=r[aStyle]);(ie=new e.Button({width:f?zot(fe.width)?ne?t:ye+de/2+b[0]/2:fe.width:zot(fe.width)?ue:fe.width,height:f?de:o,label:fe.label,borderColor:null!=oe.borderColor?oe.borderColor:null,borderWidth:null!=oe.borderWidth?oe.borderWidth:null,backgroundColor:m.backgroundColor,rollBackgroundColor:m.rollBackgroundColor,corner:b,shadowColor:-1,gradient:x,gloss:k,backing:T?T.clone():null,rollBacking:A?A.clone():null,wait:m.wait,waitTime:zot(fe.waitTime)?B:fe.waitTime,waitBackgroundColor:zot(fe.waitBackgroundColor)?I:fe.waitBackgroundColor,rollWaitBackgroundColor:zot(fe.rollWaitBackgroundColor)?S:fe.rollWaitBackgroundColor,waitColor:zot(fe.waitColor)?M:fe.waitColor,rollWaitColor:zot(fe.rollWaitBackgroundColor)?E:fe.rollWaitColor,waitModal:zot(fe.waitModal)?O:fe.waitModal,waitEnabled:zot(fe.waitEnabled)?j:fe.waitEnabled,align:X,valign:R,indentHorizontal:W,indentVertical:F,inherit:oe})).tabInfo=m,ie.color=ie.tabInfo.color,ie.rollColor=ie.tabInfo.rollColor,ie.type="TabsButton",ie.listIndentReady=!0}else fe.listIndentReady?ie=fe:(ie=new e.Container).type=fe.type,(ie.content=fe).checkBox&&(ie.checkBox=fe.checkBox),ie.tabInfo={},N&&(ie.excludeTap=!0),ie.tabInfo.color=zot(fe.color)?u:fe.color,ie.tabInfo.backgroundColor=zot(fe.backgroundColor)?a:fe.backgroundColor,fe.listIndentReady||(new e.Rectangle(Math.max(fe.width,f?ne?t:ye+de/2+b[0]/2:ue),Math.max(fe.height,f?de:o),e.faint).addTo(ie),fe.center(ie),"center"!=D&&"middle"!=D&&fe.pos(0,null,"right"==D),"center"!=Y&&"middle"!=Y&&fe.pos(null,0,null,"bottom"==Y));ie.width>we&&(we=ie.width),H?ie.tap(function(t){$(t.currentTarget.znum),re.dispatchEvent("change"),e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}):ie.zimTabEvent=ie.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(t){$(t.currentTarget.znum),re.dispatchEvent("change"),e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}),ie.on("mousedown",function(e){re.buttonDown=e.currentTarget}),ie.on("pressup",function(){re.buttonDown=null}),h.push(fe.label),i.push(ie)}return[i,h]}function J(){var e,n=0,r=0;for(be=0;be<se.length;be++)(e=se[be]).znum=be,e.selectedIndex=be,e.selectedIndex==ae&&v&&(e.backgroundColor=s,e.rollBackgroundColor=c,e.color=g),le[be]&&(le[be].znum=be),re.addChild(e),f&&!ne||(e.x=(t-e.width)/2,e.y=(o-e.height)/2),f?(e.y=r,r=e.y+e.height+m,"left"==D?e.x=("TabsButton"==e.type||"ListItem"==e.type?0:G)+(e.regX-(e.getBounds()?e.getBounds().x:0))*e.scaleX:"right"==D&&(e.x=(ne?t:we)-e.width-("TabsButton"==e.type||"ListItem"==e.type?0:G))):(e.x=n,n=e.x+e.width+m,"top"==Y?e.y=("TabsButton"!=e.type||pe?G:0)+(e.regY-(e.getBounds()?e.getBounds().y:0))*e.scaleY:"bottom"==Y&&(e.y=o-e.height-("TabsButton"!=e.type||pe?G:0))),0!=be||z||(e.enabled=!1),e.enabled=!0;zot(L)||re.removeChild(he),re._bounds=null;var i=re.getBounds();if(i||0==createjs.EaselJS.version[0]?i&&(w=f&&0!=i.width&&ne?t:i.width,h=f&&0!=i.height?i.height:o,re.setBounds(w,h)):(w=h=0,re.setBounds()),zot(L)||(he.widthOnly=w,he.heightOnly=h,re.addChildAt(he,0)),f&&!ne)for(be=0;be<=se.length;be++)"center"!=D&&"middle"!=D||(e.x=(w-e.width)/2)}function $(e){var t=se[ae];t&&v&&(t.tabInfo&&zot(t.tabInfo.wait)&&(t.tabInfo.backgroundColor&&(t.backgroundColor=t.tabInfo.backgroundColor),t.tabInfo.rollBackgroundColor&&(t.rollBackgroundColor=t.tabInfo.rollBackgroundColor),t.tabInfo.color&&t.label&&(t.color=t.tabInfo.color),t.tabInfo.rollColor&&t.label&&(t.rollColor=t.tabInfo.rollColor)),z||(t.enabled=!0)),(t=se[ae=e])&&(t.tabInfo&&zot(t.tabInfo.wait)&&v&&(t.tabInfo.selectedBackgroundColor&&(t.backgroundColor=t.tabInfo.selectedBackgroundColor),t.tabInfo.selectedRollBackgroundColor&&(t.rollBackgroundColor=t.tabInfo.selectedRollBackgroundColor),t.tabInfo.selectedColor&&t.label&&(t.color=t.tabInfo.selectedColor),t.tabInfo.selectedRollColor&&t.label&&(t.rollColor=t.tabInfo.selectedRollColor)),z||(t.enabled=!1))}function ee(){re.keyFocus=!0;var e=document.activeElement;e&&e.blur()}var te;if(te=zob(e.Tabs,arguments,"width, height, tabs, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, vertical, spacing, currentEnabled, currentSelected, corner, base, keyEnabled, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, backdropColor, align, valign, labelAlign, labelValign, labelIndent, labelIndentHorizontal, labelIndentVertical, indent, useTap, excludeCustomTap, style, group, inherit",this))return te;z_d("65");var oe=!1===V?{}:e.getStyle("Tabs",this.group,K);zot(f)&&(f=null!=oe.vertical&&oe.vertical);var ne=!zot(t);if(zot(t)&&(t=null!=oe.width?oe.width:f?60:240),zot(o)&&(o=null!=oe.height?oe.height:f?240:60),this.zimContainer_constructor(null,null,null,null,!0),this.type="Tabs",this.group=q,(zot(r)||r.length<=0)&&(r=null!=oe.tabs?oe.tabs:[1,2,3,4]),zot(a)&&(a=null!=oe.backgroundColor?oe.backgroundColor:"#777"),zot(l)&&(l=null!=oe.rollBackgroundColor?oe.rollBackgroundColor:"#555"),zot(s)&&(s=null!=oe.selectedBackgroundColor?oe.selectedBackgroundColor:"#333"),zot(c)&&(c=null!=oe.selectedRollBackgroundColor?oe.selectedRollBackgroundColor:l),zot(u)&&(u=null!=oe.color?oe.color:"white"),zot(d)&&(d=null!=oe.rollColor?oe.rollColor:u),zot(g)&&(g=null!=oe.selectedColor?oe.selectedColor:u),zot(p)&&(p=null!=oe.selectedRollColor?oe.selectedRollColor:d),zot(T)&&(T=null!=oe.backing?oe.backing.clone():null),zot(A)&&(A=null!=oe.rollBacking?oe.rollBacking.clone():null),zot(D)&&(D=null!=oe.align?oe.align:"center"),zot(Y)&&(Y=null!=oe.valign?oe.valign:"center"),zot(X)&&(X=null!=oe.labelAlign?oe.labelAlign:D),zot(R)&&(R=null!=oe.labelValign?oe.labelValign:Y),zot(G)&&(G=null!=oe.indent?oe.indent:10),zot(_)&&(_=null!=oe.labelIndent?oe.labelIndent:G),zot(W)&&(W=null!=oe.labelIndentHorizontal?oe.labelIndentHorizontal:_),zot(F)&&(F=null!=oe.labelIndentVertical?oe.labelIndentVertical:_),zot(z)&&(z=null!=oe.currentEnabled&&oe.currentEnabled),zot(v)&&(v=null==oe.currentSelected||oe.currentSelected),v||(z=!0),zot(m)&&(m=null!=oe.spacing?oe.spacing:1),zot(b)&&(b=null!=oe.corner?oe.corner:0),zot(x)&&(x=null!=oe.gradient?oe.gradient:null),zot(k)&&(k=null!=oe.gloss?oe.gloss:null),zot(y)&&(y=null!=oe.base?oe.base:0!=b||Array.isArray(b)?f?"left":"bottom":"none"),zot(C)&&(C=null==oe.keyEnabled||oe.keyEnabled),zot(H)&&(H=null!=oe.useTap&&oe.useTap),zot(N)&&(N=null!=oe.excludeCustomTap&&oe.excludeCustomTap),zot(L)&&(L=null!=oe.backdropColor?oe.backdropColor:null),"none"==y||0==b||Array.isArray(b))Array.isArray(b)||(b=[b,b,b,b]);else switch(y){case"bottom":b=[b,b,0,0];break;case"left":b=[0,b,b,0];break;case"top":b=[0,0,b,b];break;case"right":b=[b,0,0,b]}var re=this;this.keyEnabled=C;var ie,ae=0,le=[],se=[],ce=r.length,ue=(t-m*(ce-1))/ce,de=(o-m*(ce-1)-2)/ce;if(!zot(L)){var he=this.backdrop=new e.Rectangle(t,o,L,null,null,null,null,null,!1);this.addChild(he)}var ge,pe=!1;U(r);for(var fe,me,ze=0,ve=0,be=0;be<r.length;be++)fe=r[be],f?ne&&(fe.width=fe.width?fe.width:t):(zot(fe.width)&&ve++,ze+=zot(fe.width)?ue:fe.width);if(!f)if(t-m*(ce-1)<ze)for(be=0;be<r.length;be++)(fe=r[be]).width=(t-m*(ce-1))/ze*(zot(fe.width)?ue:fe.width);else if(Math.round(ze)<Math.round(t-m*(ce-1))&&0<ve)for(me=(ce*ue-(ze-ve*ue))/ve,be=0;be<r.length;be++)(fe=r[be]).width=zot(fe.width)?me:fe.width;Z(r);var ye=0;for(be=0;be<r.length;be++)!(fe=r[be]).width&&f&&fe.label.width>ye&&(ye=fe.label.width);var we=0,Ce=Q(r);se=Ce[0],le=Ce[1],J(),this.addAt=function(t,o,n){zot(o)&&(o=se.length),o=e.constrain(o,0,se.length),Array.isArray(t)||(t=[t]),U(t),Z(t,n);var r=Q(t,n),i=r[0],a=r[1];o<=ae&&(ae+=i.length);var l=[o,0].concat(i);return Array.prototype.splice.apply(se,l),l=[o,0].concat(a),Array.prototype.splice.apply(le,l),J(),re},this.removeAt=function(t,o){if(0==se.length)return re;for(zot(t)&&(t=1),zot(o)&&(o=se.length-t),(o=e.constrain(o,0,se.length-t))<=ae&&ae<=o+t&&(ae=-1),o+t<ae&&(ae-=t),be=o;be<o+t;be++)se[be].tabInfo&&(se[be].tabInfo.backgroundColor&&(se[be].backgroundColor=se[be].tabInfo.backgroundColor),se[be].tabInfo.color&&se[be].label&&(se[be].color=se[be].tabInfo.color)),H?se[be].noTap():se[be].off((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",se[be].zimTabEvent),se[be].removeFrom();return se.splice(o,t),le.splice(o,t),J(),re},window.addEventListener("keydown",function(t){if(re.keyEnabled&&re.keyFocus&&!re.zimAccessibility&&9==t.keyCode){var o=ae;$(t.shiftKey?--o<0?r.length-1:o:++o>r.length-1?0:o),re.dispatchEvent("change"),e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update(),t.preventDefault()}}),Object.defineProperty(this,"selected",{get:function(){return se[ae]},set:function(e){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return ae},set:function(t){$(t),e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}),this.last=function(){return this.selectedIndex=this.buttons.length-1,this},this.first=function(){return this.selectedIndex=0,this},Object.defineProperty(this,"tabs",{get:function(){return ae},set:function(t){$(Math.min(Math.max(t,0),r.length-1)),e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}),Object.defineProperty(this,"color",{get:function(){return re.buttons[0].tabItems?re.buttons[0].tabItems.color:u},set:function(t){if(u=t,re.buttons[0].tabInfo){for(var o=0;o<re.buttons.length;o++)re.buttons[o].tabInfo&&(re.buttons[o].tabInfo.color=t),o==ae&&v||(re.buttons[o].color=u);e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}}),Object.defineProperty(this,"rollColor",{get:function(){return re.buttons[0].tabItems?re.buttons[0].tabItems.rollColor:d},set:function(t){if(d=t,re.buttons[0].tabInfo){for(var o=0;o<re.buttons.length;o++)re.buttons[o].tabInfo&&(re.buttons[o].tabInfo.rollColor=t),re.buttons[o].rollColor=d,o!=ae&&re.buttons[o].rolled&&(re.buttons[o].color=d);e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}}),Object.defineProperty(this,"selectedColor",{get:function(){return re.buttons[0].tabItems?re.buttons[0].tabItems.selectedColor:g},set:function(t){if(g=t,re.buttons[0].tabInfo){for(var o=0;o<re.buttons.length;o++)re.buttons[o].tabInfo&&(re.buttons[o].tabInfo.selectedColor=t),o==ae&&v&&(re.buttons[o].color=g);e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}}),Object.defineProperty(this,"selectedRollColor",{get:function(){return re.buttons[0].tabItems?re.buttons[0].tabItems.selectedRollColor:p},set:function(t){if(p=t,re.buttons[0].tabInfo){for(var o=0;o<re.buttons.length;o++)re.buttons[o].tabInfo&&(re.buttons[o].tabInfo.selectedRollColor=t),o==ae&&v&&re.buttons[o].rolled&&(re.buttons[o].color=p);e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}}),Object.defineProperty(this,"backgroundColor",{get:function(){return re.buttons[0].tabItems?re.buttons[0].tabItems.backgroundColor:a},set:function(t){if(a=t,re.buttons[0].tabInfo){for(var o=0;o<re.buttons.length;o++)re.buttons[o].tabInfo&&(re.buttons[o].tabInfo.backgroundColor=t),o==ae&&v||(re.buttons[o].backgroundColor=a);e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}}),Object.defineProperty(this,"rollBackgroundColor",{get:function(){return re.buttons[0].tabItems?re.buttons[0].tabItems.rollBackgroundColor:l},set:function(t){if(l=t,re.buttons[0].tabInfo){for(var o=0;o<re.buttons.length;o++)re.buttons[o].tabInfo&&(re.buttons[o].tabInfo.rollBackgroundColor=t),re.buttons[o].rollBackgroundColor=l,o!=ae&&re.buttons[o].rolled&&(re.buttons[o].backgroundColor=l);e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}}),Object.defineProperty(this,"selectedBackgroundColor",{get:function(){return re.buttons[0].tabItems?re.buttons[0].tabItems.selectedBackgroundColor:s},set:function(t){if(s=t,re.buttons[0].tabInfo){for(var o=0;o<re.buttons.length;o++)re.buttons[o].tabInfo&&(re.buttons[o].tabInfo.selectedBackgroundColor=t),o==ae&&v&&(re.buttons[o].backgroundColor=s);e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}}),Object.defineProperty(this,"selectedRollBackgroundColor",{get:function(){return re.buttons[0].tabItems?re.buttons[0].tabItems.selectedRollBackgroundColor:c},set:function(t){if(c=t,re.buttons[0].tabInfo){for(var o=0;o<re.buttons.length;o++)re.buttons[o].tabInfo&&(re.buttons[o].tabInfo.selectedRollBackgroundColor=t),o==ae&&v&&re.buttons[o].rolled&&(re.buttons[o].backgroundColor=c);e.OPTIMIZE||!zns&&OPTIMIZE||!re.stage||re.stage.update()}}}),Object.defineProperty(this,"label",{get:function(){return le[ae]},set:function(e){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return null!=le[ae]?le[ae].text:void 0},set:function(e){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return se},set:function(e){zon&&zog("buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return le},set:function(e){zon&&zog("labels is read only")}}),this._enabled=!0,Object.defineProperty(re,"enabled",{get:function(){return re._enabled},set:function(e){n(re,e)}}),"undefined"!=typeof KEYFOCUS&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==re},set:function(t){e.KEYFOCUS=re}}),C&&e.KEYFOCUS&&ee(),this.on("mousedown",function(){C&&ee()});var xe=re.getBounds();zot(xe)||0==xe.width?re.setBounds(0,0,t,o):re.width=t,!1!==V&&i(this,oe),this.clone=function(){for(var n=e.copy(r,!0),i=0;i<n.length;i++)n[i].label=n[i].label.clone();return re.cloneProps(new e.Tabs(t,o,n,a,l,s,c,u,d,g,p,f,m,z,v,b,y,C,x,k,T,A,P,B,I,S,M,E,O,j,L,D,Y,X,R,_,W,F,G,H,N,V,this.group,K))}},e.extend(e.Tabs,e.Container,"clone","zimContainer",!1),e.Pad=function(t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O){var j;if(j=zob(e.Pad,arguments,"width, cols, rows, keys, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, currentEnabled, corner, labelColor, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, style, group, inherit",this))return j;z_d("66"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pad",this.group=E;var L=!1===M?{}:e.getStyle(this.type,this.group,O);if(zot(t)&&(t=null!=L.width?L.width:150),zot(o)&&(o=null!=L.cols?L.cols:3),zot(r)&&(r=null!=L.rows?L.rows:o),zot(a))if(null!=L.keys)a=L.keys;else{a=[];for(var D=1;D<=r*o;D++)a.push(D)}zot(m)&&(m=null==L.currentEnabled||L.currentEnabled),zot(f)&&(f=null!=L.spacing?L.spacing:1);var Y,X=this;this.cols=o,this.rows=r;var R,_=t/o-f,W=[],F=0;for(this.labels=[],this.buttons=[],D=0;D<r;D++){for(var G=[],H=0;H<o;H++)G.push(null!=a[F]?a[F]:""),F++;var N=null!=L.corner?L.corner:z;N&&!Array.isArray(N)&&(N=[N,N,N,N]),R=W[D]=new e.Tabs({width:t,height:_,tabs:G,backgroundColor:null!=L.backgroundColor?L.backgroundColor:l,rollBackgroundColor:null!=L.rollBackgroundColor?L.rollBackgroundColor:s,selectedBackgroundColor:null!=L.selectedBackgroundColor?L.selectedBackgroundColor:c,color:null!=L.color?L.color:d,rollColor:null!=L.rollColor?L.rollColor:h,selectedColor:null!=L.selectedColor?L.selectedColor:g,spacing:null!=L.spacing?L.spacing:f,currentEnabled:null!=L.currentEnabled?L.currentEnabled:m,corner:N,backing:null!=L.backing?L.backing.clone():w,rollBacking:null!=L.rollBacking?L.rollBacking.clone():C,base:null,keyEnabled:!1,gradient:null!=L.gradient?L.gradient:b,gloss:null!=L.gloss?L.gloss:y,wait:null!=L.wait?L.wait:x,waitTime:null!=L.waitTime?L.waitTime:k,waitBackgroundColor:null!=L.waitBackgroundColor?L.waitBackgroundColor:T,rollWaitBackgroundColor:null!=L.rollWaitBackgroundColor?L.rollWaitBackgroundColor:A,waitColor:null!=L.waitColor?L.waitColor:P,rollWaitColor:null!=L.rollWaitColor?L.rollWaitColor:B,waitModal:null!=L.waitModal?L.waitModal:I,waitEnabled:null!=L.waitEnabled?L.waitEnabled:S,group:E,style:!1}),this.labels=this.labels.concat(R.labels),this.buttons=this.buttons.concat(R.buttons),this.addChild(R),R.selectedIndex=-1,R.y=(_+f)*D,R.znum=D,R.on("change",function(t){var n=t.target;X.selected=n.selected,X.text=n.text,X.label=n.label;for(var r=n.selectedIndex,i=0;i<W.length;i++)W[i].selectedIndex=-1;n.selectedIndex=r,Y=n.znum*o+r,X.dispatchEvent("change"),e.OPTIMIZE||!zns&&OPTIMIZE||!X.stage||X.stage.update()})}this.tabs=W,Object.defineProperty(this,"selectedIndex",{get:function(){return Y},set:function(e){Y=e;for(var t=0;t<W.length;t++)W[t].selectedIndex=-1;var n=Math.floor(Y/o);0<=n&&n<X.tabs.length&&(X.tabs[n].selectedIndex=Y%o)}}),this._enabled=!0,Object.defineProperty(X,"enabled",{get:function(){return X._enabled},set:function(e){n(X,e)}}),!1!==M&&i(this,L),this.clone=function(){return X.cloneProps(new e.Pad(t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,this.group,O))}},e.extend(e.Pad,e.Container,"clone","zimContainer",!1),e.DPad=function(t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b){var y;if(y=zob(e.DPad,arguments,"axis, width, backgroundColor, borderWidth, borderColor, indicatorColor, indicatorPressColor, indicatorScale, indicatorRadius, innerCircle, innerScale, activeRadius, clamp, logo, style, group, inherit",this))return y;z_d("66.2"),this.zimContainer_constructor(null,null,null,null,!1),this.type="DPad",this.group=v;var w=!1===z?{}:e.getStyle(this.type,this.group,b);zot(t)&&(t=null!=w.axis?w.axis:"all"),zot(o)&&(o=null!=w.width?w.width:100),zot(r)&&(r=null!=w.backgroundColor?w.backgroundColor:"#666666"),zot(l)&&(l=null!=w.borderColor?w.borderColor:null),zot(a)&&(a=null!=w.borderWidth?w.borderWidth:null),l<0||a<0?l=a=null:null!=l&&null==a&&(a=1),zot(s)&&(s=null!=w.indicatorColor?w.indicatorColor:"#dddddd"),zot(c)&&(c=null!=w.indicatorPressColor?w.indicatorPressColor:"#eeeeee"),zot(u)&&(u=null!=w.indicatorScale?w.indicatorScale:1),zot(d)&&(d=null!=w.indicatorRadius?w.indicatorRadius:null),zot(h)&&(h=null==w.innerCircle||w.innerCircle),zot(g)&&(g=null!=w.innerScale?w.innerScale:.5),zot(p)&&(p=null!=w.activeRadius?w.activeRadius:o),zot(f)&&(f=null==w.clamp||w.clamp),zot(m)&&(m=null!=w.logo&&w.logo);var C=this;this.axis=t,this.outer=new e.Circle(o/2,r,l,a).addTo(this);var x=this.inner=new e.Circle(o*g/2,"rgba(0,0,0,.2)").center(this);m&&(this.logo=new e.Label({text:"D",fontOptions:"bold"}).center(x).mov(1,2).alp(.3));var k=(new e.Container).addTo(this),T=.2*(o-a)*u,A=8;"vertical"==t?A=2:"horizontal"==t?(A=2,k.rotation=90):"both"==t&&(A=4),e.loop(A,function(e,t){new Triangle(T,T,T,s).addTo(k).reg(null,zot(d)?.475*(o-a):d).rot(360*e/t)});var P,B,I,S=0,M=0;this.on("mousedown",function(t){P=t.target.stage,I=t,k.loop(function(e){e.color=c}),C.ticker=e.Ticker.add(function(){!function(){var t=I;S=t.stageX/P.scaleX,M=t.stageY/P.scaleY,B=C.globalToLocal(S,M),(t=new createjs.Event("change")).dirX=2*((B.x+p)/(2*p)-.5),t.dirY=2*((B.y+p)/(2*p)-.5),f&&(t.dirX=e.constrain(t.dirX,-1,1),t.dirY=e.constrain(t.dirY,-1,1)),C.dirX=t.dirX,C.dirY=t.dirY,C.dispatchEvent(t)}()})}),this.on("pressmove",function(e){I=e}),this.on("pressup",function(t){e.Ticker.remove(C.ticker),C.dirX=C.dirY=0,k.loop(function(e){e.color=s}),C.stage&&P.update()}),this._enabled=!0,Object.defineProperty(C,"enabled",{get:function(){return C._enabled},set:function(e){n(C,e)}}),i(this,w),this.clone=function(){return C.cloneProps(new e.DPad(t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,this.group,b))},this.dispose=function(){return this.ticker&&e.Ticker.remove(this.ticker),this.zimContainer_dispose(),!0}},e.extend(e.DPad,e.Container,["clone","dispose"],"zimContainer",!1),e.Radial=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,L,D,Y,X,R){var _;if(_=zob(e.Radial,arguments,"labels, size, font, height, coreRadius, coreColor, startAngle, totalAngle, angles, flip, shiftRadial, icons, rollIcons, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, selectedColor, rollColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, style, group, inherit",this))return _;z_d("66.4"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Radial",this.group=X;var W=!1===Y?{}:e.getStyle(this.type,this.group,R);zot(t)&&(t=null!=W.labels?W.labels:["A","B","C","D","E"]),zot(o)&&(o=null!=W.size?W.size:30),zot(n)&&(n=null!=W.font?W.font:"verdana"),zot(s)&&(s=null!=W.startAngle?W.startAngle:null),zot(c)&&(c=null!=W.totalAngle?W.totalAngle:360),zot(u)&&(u=null!=W.angles?W.angles:null),zot(d)&&(d=null==W.flip||W.flip),zot(h)&&(h=null!=W.shiftRadial?W.shiftRadial:0),zot(g)&&(g=null!=W.icons?W.icons:null),zot(p)&&(p=null!=W.rollIcons?W.rollIcons:null),zot(f)&&(f=null!=W.rotateIcons&&W.rotateIcons),zot(m)&&(m=null!=W.iconsShiftRadial?W.iconsShiftRadial:0),zot(r)&&(r=null!=W.height?W.height:60),zot(a)&&(a=null!=W.coreRadius?W.coreRadius:100),zot(l)&&(l=null!=W.coreColor?W.coreColor:"#333"),zot(w)&&(w=null!=W.backdropColor?W.backdropColor:e.clear),zot(z)&&(z=null!=W.backgroundColor?W.backgroundColor:"#666"),zot(v)&&(v=null!=W.rollBackgroundColor?W.rollBackgroundColor:"#777"),zot(b)&&(b=null!=W.selectedBackgroundColor?W.selectedBackgroundColor:"#444"),zot(y)&&(y=null!=W.selectedRollBackgroundColor?W.selectedRollBackgroundColor:b),zot(C)&&(C=null!=W.color?W.color:"white"),zot(k)&&(k=null!=W.rollColor?W.rollColor:C),zot(x)&&(x=null!=W.selectedColor?W.selectedColor:C),zot(T)&&(T=null!=W.selectedRollColor?W.selectedRollColor:k),zot(A)&&(A=null!=W.borderColor?W.borderColor:"#333"),zot(P)&&(P=null!=W.borderWidth?W.borderWidth:2),zot(S)&&(S=null!=W.gapAsAngle&&W.gapAsAngle),zot(I)&&(I=null!=W.gap?W.gap:S?3:6),zot(B)&&(B=null!=W.gradient?W.gradient:null),!0===B&&(B=.1),zot(M)&&(M=null!=W.spacing?W.spacing:6),zot(E)&&(E=null!=W.spacingInner?W.spacingInner:M),zot(O)&&(O=null!=W.spacingOuter?W.spacingOuter:M),zot(L)&&(L=null!=W.currentEnabled&&W.currentEnabled),zot(D)&&(D=null==W.currentSelected||W.currentSelected);var F=this,G=this.innerRadius=a+E,H=this.outerRadius=G+r;this.setBounds(-H,-H,2*H,2*H);var N=this.backdrop=new Circle(H+O,w).center(this);if(0<a&&(this.core=new Circle(a,l).center(this)),u&&u.length<t.length-1)return zon&&zog("zim.Radial() - not enough angles provided"),this;if(t&&0<t.length||g&&0<g.length){var V;if(t&&0<t.length&&(V=t.length),g&&0<g.length&&(V=0<V?Math.min(g.length,V):g.length),p&&p.length<V)for(j=0;j<V-p.length;j++)p.push(new Circle(1,clear));var q=N.width,K=this.buttons=new Container(-q/2,-q/2,q,q).centerReg(this),U=I;S||(I=I/H*180/Math.PI,U=U/G*180/Math.PI),segmentAngle=(c-I*V+(360==c?0:I))/V;for(var Z=s||0,Q=0;Q<V;Q++){u&&(segmentAngle=u[Q]);var J=new e.Shape(-q/2,-q/2,q,q).centerReg(K);J.num=Q,J.zimSelected=!1,J.angle=segmentAngle;var $=J.graphics;J.backgroundColor=e.Pick.choose(z),J.rollBackgroundColor=e.Pick.choose(v),J.selectedBackgroundColor=e.Pick.choose(b),J.selectedRollBackgroundColor=e.Pick.choose(y),J.color=e.Pick.choose(C),J.rollColor=e.Pick.choose(k),J.selectedColor=e.Pick.choose(x),J.selectedRollColor=e.Pick.choose(T),J.colorCommand=$.f(J.backgroundColor).command,(zot(P)||0<P)&&(zot(A)&&zot(P)||(zot(A)&&(A="black"),J.borderColorCommand=$.s(A).command,J.borderWidthCommand=$.ss(P).command));var ee=(Z-90-segmentAngle/2)*Math.PI/180,te=(Z-90+segmentAngle/2)*Math.PI/180,oe=(Z-90+(segmentAngle+I-U)/2)*Math.PI/180,ne=(Z-90-(segmentAngle+I-U)/2)*Math.PI/180;if($.arc(0,0,H,ee,te,!1),$.arc(0,0,G,oe,ne,!0).cp(),B&&($.s().ss().rf(["rgba(0,0,0,"+B+")","rgba(255,255,255,"+B+")"],[0,1],0,0,G,0,0,H),$.arc(0,0,H,ee,te,!1),$.arc(0,0,G,oe,ne,!0).cp()),J.cursor="pointer",J.zimOverEvent=J.on("mouseover",function(e){var t=e.target;t.colorCommand.style=t==F.selected?t.selectedRollBackgroundColor:t.rollBackgroundColor,t.label&&(t.label.color=t==F.selected?t.selectedRollColor:t.rollColor),p&&(t.holder.removeAllChildren(),p[t.num].loc(1,0,t.holder)),F.stage&&F.stage.update()}),J.zimOutEvent=J.on("mouseout",function(e){var t=e.target;t.colorCommand.style=t==F.selected?t.selectedBackgroundColor:t.backgroundColor,t.label&&(t.label.color=t==F.selected?t.selectedColor:t.color),p&&(t.holder.removeAllChildren(),g&&g[t.num].loc(1,0,t.holder)),F.stage&&F.stage.update()}),J.zimDownEvent=J.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(t){var o=t.target,n=o!==F.selected;F.lastSelected=F.selected,ce=o.num,D&&(n?(F.selected&&(F.selected.colorCommand.style=F.selected.backgroundColor,F.selected.label&&(F.selected.label.color=F.selected.color)),F.selected=o,F.label=o.label,F.label&&(F.text=F.label.text),F.icon=o.icon,o.colorCommand.style=o.selectedRollBackgroundColor,o.label&&(o.label.color=o.selectedRollColor)):L||(ce=-1,F.selected=null,F.label=null,F.text=null,F.icon=null,o.colorCommand.style=o.rollBackgroundColor,o.label&&(o.label.color=o.rollColor))),F.dispatchEvent("change"),e.OPTIMIZE||!zns&&OPTIMIZE||!F.stage||F.stage.update()}),g&&0<g.length){var re=G+r/2+m,ie=J.holder=new Container(3,re).addTo(this).reg(1,re).rot(Z);ie.mouseChildren=!1,ie.mouseEnabled=!1,J.icon=g[Q],g[Q].loc(1,0,ie),f||(g[Q].rotation=-Z)}if(t&&0<t.length){var ae;if("LabelOnArc"!=t[Q].type){var le="Label"==t[Q].type?t[Q]:new Label(t[Q],o,n,C);ae=new LabelOnArc({label:le,color:C,size:o,spacing:-5,flip:d&&90<Z&&Z<270,radius:G+(r-le.height)/2+2+h})}else ae=t[Q];t[Q]=ae,(J.label=ae).center(this).rot(Z),ae.mouseChildren=!1,ae.mouseEnabled=!1}if(Q!=t.length-1){var se=u?u[Q+1]:segmentAngle;Z+=(segmentAngle+se)/2+I}}zot(s)||(F.rotation+=F.buttons.getChildAt(0).angle/2)}var ce=null;Object.defineProperty(this,"selectedIndex",{get:function(){return ce},set:function(t){var o;F.buttons&&(o=F.buttons.getChildAt(t)),o!==F.selected&&(F.selected&&(F.selected.colorCommand.style=F.selected.backgroundColor,F.selected.label&&(F.selected.label.color=F.selected.color)),(F.selected=o)&&(o.colorCommand.style=o.selectedRollBackgroundColor,o.label&&(o.label.color=o.selectedColor,F.text=o.label.text))),e.OPTIMIZE||!zns&&OPTIMIZE||!F.stage||F.stage.update()}}),i(this,W),this.clone=function(){return F.cloneProps(new e.Radial(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,L,D,Y,this.group,R))}},e.extend(e.Radial,e.Container,"clone","zimContainer",!1),e.RadialMenu=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,j,L,D,Y,X,R){function _(e){var t,o,n;e?t=e.level:(t=0,o=a),loop(te,function(e,o){t-1<o&&(e.removeFrom(),e.selectedIndex=-1,te.pop())},!0),e&&(n=e.selected),n?(id=n.id,o=e.outerRadius,W(id,t+1,o)):e||W("id0",t+1,o),K.selected=n,K.selected?(K.selectedMenu=te[K.selected.menu.level-1],K.selectedIndex=K.selected.num,K.selected.label?K.text=K.selected.label.text:K.text=null):(K.text=null,K.selectedIndex=-1,K.selectedMenu=null),K.stage&&K.stage.update()}function W(t,i,a){var l;if(i&&(K.outerLevel=i),!ee[t]){var s=J.getData(t),c=s.list;if(c&&!e.isEmpty(c)){var S={labels:J.getLinearList(c),coreRadius:a,size:o,font:n,startAngle:u,totalAngle:d,flip:h,rotateIcons:p,shiftRadial:g,iconsShiftRadial:f,height:r,coreColor:clear,backdropColor:y,backgroundColor:m,rollBackgroundColor:z,selectedBackgroundColor:v,selectedRollBackgroundColor:b,color:w,rollColor:x,selectedColor:C,selectedRollColor:k,borderColor:T,borderWidth:A,gapAsAngle:I,gap:B,gradient:P,spacingInner:M,spacingOuter:E};s.styles&&(S=merge(S,s.styles)),l=ee[t]=new Radial(S),$=J.getLinearIDs(c),l.buttons.loop(function(e,t){e.menu=l,e.id=$[t]}),l.level=K.outerLevel,l.on("change",function(e){K.leafNode=!1,_(e.target),!O&&K.selected==Z||K.dispatchEvent("change"),Z=K.selected})}}ee[t]?(te.push(ee[t]),ee[t].center(K),D&&ee[t].bot()):(K.leafNode=!0,K.outerLevel-=1),K.outerMenu=l}var F,G="menu, size, font, height, coreRadius, coreColor, title, titleIcon, startAngle, totalAngle, flip, shiftRadial, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, selectedColor, rollColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, open, under, style, group, inherit",H=G.split(", "),N=!1;if(t&&t.constructor==={}.constructor)for(var V in t)if(0<=H.indexOf(V)){N=!0;break}if(t&&N&&(F=zob(e.RadialMenu,arguments,G,this)))return F;z_d("66.6"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadialMenu",this.group=X;var q=!1===Y?{}:e.getStyle(this.type,this.group,R);zot(t)&&(t=null!=q.menu?q.menu:{A:{A1:["AA1","AA2","AA3","AA4"],A2:[],A3:[]},B:["B1","B2","B3","B4","B5","B6"],C:[]}),zot(o)&&(o=null!=q.size?q.size:30),zot(n)&&(n=null!=q.font?q.font:"verdana"),zot(u)&&(u=null!=q.startAngle?q.startAngle:null),zot(d)&&(d=null!=q.totalAngle?q.totalAngle:360),zot(h)&&(h=null==q.flip||q.flip),zot(p)&&(p=null!=q.rotateIcons&&q.rotateIcons),zot(g)&&(g=null!=q.shiftRadial?q.shiftRadial:0),zot(f)&&(f=null!=q.iconsShiftRadial?q.iconsShiftRadial:0),zot(r)&&(r=null!=q.height?q.height:60),zot(a)&&(a=null!=q.coreRadius?q.coreRadius:100),zot(l)&&(l=null!=q.coreColor?q.coreColor:"#333"),zot(s)&&(s=null!=q.title?q.title:"MENU"),zot(c)&&(c=null!=q.titleIcon?q.titleIcon:null),zot(y)&&(y=null!=q.backdropColor?q.backdropColor:e.clear),zot(m)&&(m=null!=q.backgroundColor?q.backgroundColor:"#666"),zot(z)&&(z=null!=q.rollBackgroundColor?q.rollBackgroundColor:"#777"),zot(v)&&(v=null!=q.selectedBackgroundColor?q.selectedBackgroundColor:"#444"),zot(b)&&(b=null!=q.selectedRollBackgroundColor?q.selectedRollBackgroundColor:v),zot(w)&&(w=null!=q.color?q.color:"white"),zot(x)&&(x=null!=q.rollColor?q.rollColor:w),zot(C)&&(C=null!=q.selectedColor?q.selectedColor:w),zot(k)&&(k=null!=q.selectedRollColor?q.selectedRollColor:x),zot(T)&&(T=null!=q.borderColor?q.borderColor:"#333"),zot(A)&&(A=null!=q.borderWidth?q.borderWidth:2),zot(I)&&(I=null!=q.gapAsAngle&&q.gapAsAngle),zot(B)&&(B=null!=q.gap?q.gap:I?3:6),zot(S)&&(S=null!=q.spacing?q.spacing:6),zot(P)&&(P=null!=q.gradient?q.gradient:null),!0===P&&(P=.1),zot(M)&&(M=null!=q.spacingInner?q.spacingInner:S),zot(E)&&(E=null!=q.spacingOuter?q.spacingOuter:S),zot(O)&&(O=null!=q.currentEnabled&&q.currentEnabled),zot(j)&&(j=null==q.currentSelected||q.currentSelected),zot(L)&&(L=null!=q.open&&q.open),zot(D)&&(D=null==q.under||q.under);var K=this,U=(zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",Z=null,Q=this.core=new Circle(a,l).addTo(this);c&&(this.titleIcon=c.center(Q)),s&&(this.title=new Label(s,o,n,w).center(Q)),Q.cursor="pointer",Q.on(U,function(e){K.leafNode=!1,0==te.length?_():(loop(te,function(e){e.selectedIndex=-1,e.removeFrom(),te=[]}),K.outerLevel=0,K.selected=K.outerMenu=K.selectedMenu=K.text=null),!O&&K.selected==Z||K.dispatchEvent("change"),Z=K.selected,K.stage&&K.stage.update()}),this.closeRings=function(e){zot(e)&&(e=K.outerLevel);var t=K.outerLevel-e;loop(te,function(e,o){t-1<o&&(e.removeFrom(),e.selectedIndex=-1,te.pop())},!0),K.outerLevel=t,K.outerMenu=te[te.length-1],K.outerMenu&&(K.outerMenu.selectedIndex=-1),K.selected=K.selectedMenu=K.text=null,te[te.length-2]?(K.selectedMenu=te[te.length-2],K.selectedIndex=K.selectedMenu.selectedIndex):K.selectedIndex=-1,K.selected!=Z&&K.dispatchEvent("change"),Z=K.selected,K.stage&&K.stage.update()};var J,$,ee={};K.outerLevel=0,t.constructor=={}.constructor&&(t={core:t},J=K.tree=new e.Hierarchy(t),$=J.getLinearIDs()),K.lastRadial=null;var te=this.radials=[];L&&_(),i(this,q),this.clone=function(){return K.cloneProps(new e.RadialMenu(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,j,L,D,Y,this.group,R))}},e.extend(e.RadialMenu,e.Container,"clone","zimContainer",!1),e.ColorPicker=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y){function w(e){return(e=Math.floor(e).toString(16))+""+e}function C(e){zot(e)||e<0?p.visible=!1:(p.visible=!0,"#000"==Z||"#000000"==Z||"black"==Z?(p.color="#222",p.alpha=1):(p.color="black",p.alpha=.5),p.x=D.x+e%n*(X+r)+X/2,p.y=D.x+Math.floor(e/n)*(X+r)+X/2)}function x(){if(Z!=q||L!=j){if(R&&a){var t=[O=E,E=q];for(H=0;H<2;H++){var o=D.graphics;$=Math.floor(H/n),ee=(J=H%n)*(X+r),te=$*(X+r)+ae,_[H]=t[H],o.f(ke.color).r(ee-1,te-1,X+2,X+2).f(t[H]).r(ee,te,X,X)}e.OPTIMIZE||!zns&&OPTIMIZE||!M.stage||M.stage.update()}q=Z,j=L,M.dispatchEvent("change")}else M.dispatchEvent("close")}function k(){M.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function T(){M.zimAccessibility&&M.zimAccessibility.changeTitle(M,null,!0)}function A(e){return Math.round(e*Math.pow(10,2))/Math.pow(10,2)}var P;if(P=zob(e.ColorPicker,arguments,"width, colors, cols, spacing, greyPicker, alphaPicker, startBackgroundColor, draggable, shadowColor, shadowBlur, buttonBar, circles, indicator, backgroundColor, keyArrows, container, style, group, inherit",this))return P;z_d("67"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ColorPicker",this.group=b;var B=!1===v?{}:e.getStyle(this.type,this.group,y);zot(t)&&(t=null!=B.width?B.width:500),zot(o)&&(o=null!=B.colors?B.colors:null),zot(o)&&(R=!0),zot(n)&&(n=null!=B.cols?B.cols:10),zot(r)&&(r=null!=B.spacing?B.spacing:2);var I=!R&&0<o.length&&o.length<=n;zot(l)&&(l=null!=B.alphaPicker?B.alphaPicker:!I),zot(a)&&(a=null!=B.greyPicker?B.greyPicker:!I),zot(u)&&(u=null!=B.shadowColor?B.shadowColor:"rgba(0,0,0,.3)"),zot(d)&&(d=null!=B.shadowBlur?B.shadowBlur:14),zot(h)&&(h=null!=B.buttonBar?B.buttonBar:!I),zot(c)&&(c=h?null==B.draggable||B.draggable:null!=B.draggable&&B.draggable),zot(g)&&(g=null!=B.circles&&B.circles),zot(p)&&(p=null!=B.indicator&&B.indicator,h||(p=null==B.indicator||B.indicator)),zot(f)&&(f=null!=B.backgroundColor?B.backgroundColor:"black"),zot(s)&&(s=null!=B.startBackgroundColor?B.startBackgroundColor:null),zot(m)&&(m=null==B.keyArrows||B.keyArrows);var S,M=this;if(zot(z)){if(!zimDefaultFrame)return;z=zimDefaultFrame.stage}else{if(!z.getBounds)return;if(zot(z.getStage))return}M.container=z;var E="#e472c4",O="#50c4b7",j=1,L=1,D=new createjs.Shape;this.addChild(D),D.x+=r,D.y+=r;var Y,X,R=!1,_=[];if(zot(o)){R=!0;var W=6,F=W*W*W;W=Math.ceil(Math.pow(F,.5)),X=(t-r)/18-r;var G=Math.floor(Math.pow(W*W,1/3));Y=[];for(var H=0;H<6;H++)for(var N=0;N<6;N++)for(var V=0;V<6;V++)Y.push("#"+w(3*H)+w(3*N)+w(3*V));for(o=[],H=0;H<Y.length;H++)$=Math.floor(H/6),o[18*((J=H%6)+6*(G=18<=$?1:0))+($-6*G*3)]=Y[H];n=18,_=[O,E]}else X=(t-r)/n-r;var q,K=Math.ceil(o.length/n),U=1,Z=String(o[o.length-1]);if(!zot(s)){var Q=s.match(/rgba\((.*)\)/);Q&&(U=($=Q[1].split(",")).pop(),s="rgb("+$.join(",")+")"),Z=String(s)}R&&(q=O);var J,$,ee,te,oe=D.graphics,ne=(G=0,null!=B.borderColor?B.borderColor:null),re=null!=B.borderWidth?B.borderWidth:null;for(!zot(ne)&&zot(re)&&(re=1),re&&zot(ne)&&(ne="#333"),re&&oe.s(ne).ss(re),H=0;H<o.length;H++)$=H%n,J=Math.floor(H/n),ee=$*(X+r),te=J*(X+r),g?oe.f(o[H]).dc(ee+X/2,te+X/2,X/2):oe.f(o[H]).r(ee,te,X,X);var ie=te+X+r;M.colors=o;var ae=ie;if(a){for(H=0;H<16;H++)_.push("#"+w(H)+w(H)+w(H));for(H=0;H<_.length;H++)$=Math.floor(H/n),ee=(J=H%n)*(X+r),te=$*(X+r)+ie,g?oe.f(_[H]).dc(ee+X/2,te+X/2,X/2):oe.f(_[H]).r(ee,te,X,X);ie=te+X+r;var le=n,se=Math.ceil(_.length/n)}if(M.greys=_,p&&((p=this.indicator=g?new e.Circle(X/2*.5,null,null,null,null,null,null,!1):new e.Rectangle(.5*X,.5*X,null,null,null,null,null,null,!1)).alpha=.5,p.centerReg(),this.addChild(p),C(o.indexOf(Z))),l){var ce=new e.Container({style:!1});ce.setBounds(0,0,600,70),this.addChild(ce),ce.x=0,ce.y=ie;var ue=this.alphaBacking=new e.Rectangle(580,50,"#222",null,null,0,null,null,!1);ce.addChild(ue),e.centerReg(ue,ce);var de=this.alphaBut=new e.Button({width:20,height:30,backgroundColor:"darkorange",rollBackgroundColor:"orange",label:"",corner:0,hitPadding:20,style:!1}),he=this.alphaSlider=new e.Slider({min:0,max:1,step:.05,button:de,barLength:330,barWidth:2,barColor:"#999",vertical:!1,useTicks:!1,inside:!1,style:!1});he.currentValue=zot(U)?1:U,ce.addChild(he),he.x=40,he.y=ce.height/2;var ge=this.alphaText=new e.Label({text:"Alpha: "+e.decimals(U),size:30,color:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",rollColor:"orange",group:this.group});ce.addChild(ge),ge.x=he.x+he.bar.width+40,ge.y=ce.height/2-ge.height/2,ce.scaleX=ce.scaleY=t/600,he.on("change",function(){ge.text="Alpha: "+A(he.currentValue),ye&&(ye.alpha=L=he.currentValue),h?M.dispatchEvent("set"):M.dispatchEvent("change"),M.stage&&M.stage.update()}),ie+=ce.height-10}if(h){var pe=new e.Container({style:!1});pe.setBounds(0,0,600,100),this.addChild(pe),pe.x=0,pe.y=ie+10;var fe=this.swatchText=new e.Label({align:"center",text:Z.toUpperCase(),labelWidth:120,labelHeight:50,size:30,color:"orange",rollColor:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group});if(pe.addChild(fe),e.centerReg(fe),fe.x=90,fe.y=48,c){var me=this.grip=new e.Shape({style:!1});pe.addChild(me),me.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),me.x=70,me.y=65,fe.y=40,me.mouseEnabled=!1}var ze=this.closeBut=new e.Button({width:90,height:90,label:"X",backgroundColor:"#222",rollBackgroundColor:"#444",corner:0,style:!1});pe.addChild(ze),ze.x=600-ze.width-10,ze.y=0,ze.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){M.dispatchEvent("close")});var ve=this.okBut=new e.Button({width:150,height:90,label:"OK",backgroundColor:"#222",rollBackgroundColor:"#444",corner:0,style:!1});pe.addChild(ve),ve.x=ze.x-ve.width-10,ve.y=0,ve.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",x);var be=this.swatchBacking=new e.Shape({style:!1});pe.addChild(be),(oe=be.graphics).f("black").r(.5,.5,50,89).f("#666").r(50,.5,50,89).f("white").r(100,.5,49.5,89),be.x=ve.x-150-10,be.y=0;var ye=this.swatch=new e.Rectangle(150,90,Z,null,null,null,null,null,!1);pe.addChild(ye),ye.x=be.x,ye.y=0,ye.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",x),ye.cursor="pointer",ye.alpha=L=U,pe.scaleX=pe.scaleY=t/600,ie+=pe.height}else D.cursor="pointer";l||h||(ie-=10-r);var we=ie+10;this.setBounds(0,0,t,we);var Ce,xe,ke=this.background=new e.Rectangle(t,we,f,null,null,null,null,null,!1);this.addChildAt(ke,0),-1!=u&&0<d&&(ke.shadow=new createjs.Shadow(u,8,8,d)),c&&(ke.on("mousedown",function(e){S=e.target.stage,Ce=e.stageX/S.scaleX-M.x,xe=e.stageY/S.scaleY-M.y,ke.cursor="move"}),ke.on("pressmove",function(e){M.x=e.stageX/S.scaleX-Ce,M.y=e.stageY/S.scaleY-xe,M.stage&&M.stage.update()}),ke.on("pressup",function(e){ke.cursor="default",M.stage&&M.stage.update()}));var Te,Ae=n*(X+r),Pe=K*(X+r);if(a)var Be=le*(X+r),Ie=se*(X+r);D.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(t){var i=e.hitTestGrid(D,Ae,Pe,n,K,t.stageX,t.stageY,0,0,r,r);zot(i)||(Z=o[i],h?(ye.color=Z,fe.text=String(o[i]).toUpperCase(),Z!=q&&M.dispatchEvent("set")):x()),a&&(i=null,zot(i=e.hitTestGrid(D,Be,Ie,le,se,t.stageX,t.stageY,0,Pe,r,r))||(Z=_[i],h?(ye.color=Z,fe.text=_[i].toUpperCase(),Z!=q&&M.dispatchEvent("set")):x())),p&&C(o.indexOf(Z)),h?M.stage&&M.stage.update():p&&M.stage&&M.stage.update(),T()}),Object.defineProperty(this,"selectedColor",{get:function(){return Z},set:function(e){e=e.toUpperCase(),q=Z=e,h&&(ye.color=Z,fe.text=Z,M.stage&&M.stage.update()),p&&C(o.indexOf(Z)),T()}}),Object.defineProperty(this,"currentValue",{get:function(){return Z},set:function(e){M.selectedColor=e}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return Z},set:function(e){e!=M.selectedColor&&(M.selectedColor=e,M.dispatchEvent("change"))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return o.indexOf(Z)},set:function(e){q=Z=o[e],h&&(ye.color=Z,fe.text=Z,M.stage&&M.stage.update()),p&&C(o.indexOf(Z)),T()}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return l?A(he.currentValue):1},set:function(e){l&&(j=he.currentValue=e,ye&&(ye.alpha=j),ge&&(ge.text="Alpha: "+A(he.currentValue)),M.stage&&M.stage.update())}}),Object.defineProperty(this,"colors",{get:function(){return a?o.concat(_):o},set:function(e){zon&&zog("Display - ColorPicker() colors is read only - make a new ColorPicker to change")}}),"undefined"!=typeof KEYFOCUS&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==M},set:function(t){zns?e.KEYFOCUS=M:KEYFOCUS=M}}),m&&e.KEYFOCUS&&k(),this.on("mousedown",function(){m&&k()}),this.keyDownEvent=function(e){function t(){o<0&&(o=M.colors.length-1),o>M.colors.length-1&&(o=0),M.selectedIndex=o,M.dispatchEvent("change"),M.stage&&M.stage.update()}if(M.stage&&(M.zimAccessibility&&M.focus||!M.zimAccessibility&&M.keyFocus)){var o=M.selectedIndex;37==e.keyCode||40==e.keyCode?(o--,t()):38!=e.keyCode&&39!=e.keyCode||(o++,t())}},window.addEventListener("keydown",this.keyDownEvent),this.hide=function(){if(M.removeFrom(),M.toggled=!1,M.zimAccessibility){var e=M.zimAccessibility;e.resize(M),Te?Te.focus():M.zimTabTag.nextSibling.focus(),setTimeout(function(){e.talk("ColorPicker has been closed.")},50)}return M},this.show=function(){if(M.center(M.container),M.zimAccessibility){var e=M.zimAccessibility;setTimeout(function(){e.activatedObject&&(Te=e.activatedObject.zimTabTag)},50),e.resize(M),e.tabIndex=M.zimTabIndex}return M.toggled=!0,M},!(this.toggle=function(e){return!0===e?M.show():!1===e?M.hide():M.container.contains(M)?M.hide():M.show(),M})!==v&&i(this,B),this.clone=function(){return M.cloneProps(new e.ColorPicker(t,R?null:o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,this.group,y))},this.dispose=function(){return window.removeEventListener("keydown",M.keyDownEvent),he&&he.dispose(),this.zimContainer_dispose(),!0}},e.extend(e.ColorPicker,e.Container,["clone","dispose"],"zimContainer",!1),e.Keyboard=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P){function B(t){var n,i=!1;if(ye===be.def){for(oe.color=t?a:r,n=0;n<ze.length-6-(zot(C)?0:1);n++)0<(l=ze[n]).label.text.length&&(1===l.name.length?(l.label.text=l.label.text.toUpperCase(),l.label.centerReg(l).mov(0,6)):l.label.centerReg(l));t||(i=!0,e.timeout(500,function(){i&&(we=!0,oe.color=a,$.updateCache(),N.stage.update())}),ue=N.on("pressup",function(e){N.off("pressup",ue),i=!1})),ye=be.shift}else{for(oe.color=o,we=!1,n=0;n<ze.length-6;n++){var l;0<(l=ze[n]).label.text.length&&(1===l.name.length?(l.label.text=l.label.text.toLowerCase(),l.label.centerReg(l).mov(0,3)):l.label.centerReg(l))}ye=be.def}$.updateCache(),N.stage.update()}function I(t){var r,i,a,l,s,c,g,f=0,m=0,z=!1,v=!1;zot(t)&&(t=be.def),t===be.def?r=Z:t===be.number1?r=Q:t===be.number2&&(r=J),$=new e.Container(1e3,430,null,null,!1).addTo(N);for(var b=0;b<r.length;b++){(b<=1||t==be.def&&2==b&&"shift"!=r[2][0])&&(f=(ve/2+2.5)*(10-r[b].length));for(var y=0;y<r[b].length;y++){if(c=null,v=z=!1,"backspace"==r[b][y]?(c=ae,v=s=!0):"shift"==r[b][y]?(s=!0,c=ie):(3==b||t!=be.def&&2==b)&&0==y?v=s=!0:""==r[b][y]?z=!(s=!1):"away"==r[b][y]?(c=le,v=s=!0):s=!1,l=s?1.5*ve+2.5:z?(ve+5)*(zot(C)?4:3)-5:ve,a=new e.Rectangle(l,ve,o,d,h,p,null,null,!1).cur().addTo($),v&&a.addChild(new e.Rectangle(l,ve,"black",null,null,p,null,null,!1).alp(u)),a.label=i=c?new e.Label({text:"",backgroundColor:"ignore",font:null!=H.font?H.font:null,style:!1}):new e.Label({lineWidth:10,lineHeight:25,font:null!=H.font?H.font:null,text:r[b][y],color:n,align:"center",style:!1}),c){var w=c.clone();w.scaleTo(a,70,70),w.centerReg(a)}g?(g=!1,f+=67.33):(i.centerReg(a).mov(0,isNaN(i.text)?3:7),a.x=f,a.y=m,a.name=r[b][y],2==b&&0==y&&t==be.number1&&(a.toggle="1/2"),2==b&&0==y&&t==be.number2&&(a.toggle="2/2"),3==b&&0==y&&t==be.def&&(a.toggle="?123"),3==b&&0==y&&t!=be.def&&(a.toggle="ABC"),a.toggle&&i.mov(0,3),ze.push(a),"shift"==a.name&&(oe=a),f=a.x+a.width+5)}m+=ve+5,f=0}$.cache(h?-h:0,h?-h:0,h?$.width+2*h:$.width,h?$.height+2*h:$.height)}function S(){N.mouseYAmount&&(N.y=N.parent.globalToLocal(0,N.mouseYAmount-ce).y)}function M(){K.off("pressmousemove",N.tickerMouseEvent),e.Ticker.remove(S)}function E(){if(ne&&te){for(var e=ne.label.x+ne.label.getBounds().x,t=0;t<Ce;t++)e+=ne.widthArray[t]?ne.widthArray[t]:0;te.heightOnly=ne.getBounds().height*(ne.backing&&zot(ne.padding)?.9:1)-(ne.paddingVertical&&ne.background?2*ne.paddingVertical:0),te.center(ne),te.x=e}}function O(){if(re)return N;if(!ne)return N;var t,o,n,r=m?["<",">","x"]:["<",">"];xe=[],n=ne.localToLocal(0,0,N),re=new e.Container({style:!1}).addTo(N).pos({x:n.x,y:n.y+ne.height+15,reg:!0}).cur();for(var i=0;i<r.length;i++)t=new e.Rectangle(ve,ve,l,d,h,p,null,null,!1),"x"==r[i]&&new e.Rectangle(ve,ve,"black",null,null,p,null,null,!1).alp(u).addTo(t),(o=new e.Label({lineWidth:10,text:r[i],backing:t,font:null!=H.font?H.font:null,color:s,align:"center",valign:"center",style:!1}).addTo(re).cache()).x=i*(ve+5),xe.push(o);n=ne.localToLocal(0,0,N),re.x=n.x,re.y=n.y+ne.height+15,re.on("click",function(e){0==xe.indexOf(e.target)?0<Ce&&Ce--:1==xe.indexOf(e.target)?Ce<ne.text.length&&Ce++:j(),E()}),N.stage.update()}function j(){if(!re)return N;re.removeAllEventListeners(),N.removeChild(re),re=null}function L(e){if(ne){var t,o;if("del"===e)ne&&(ne.text=[ne.text.slice(0,Ce-1),ne.text.slice(Ce)].join("")),Ce--,Y();else{ye===be.shift&&(e=e.toUpperCase());var n=ne.text;(t=ne.clone().removeFrom()).text=e,o=t.label.getMeasuredWidth(),ne.widthArray?ne.widthArray.splice(Ce,0,o):ne.widthArray=[ne.breedte],Ce<ne.text.length?ne.text=[ne.text.slice(0,Ce),e,ne.text.slice(Ce)].join(""):ne.text+=e,ne&&ne.label.getBounds().width<q?(Ce++,E()):ne.text=n}ye!==be.shift||we||(N.removeChild($),I(),ye=be.def),E();var r=new createjs.Event("keydown");r.letter=e,N.dispatchEvent(r),N.stage.update()}}function D(e){if(N.stage){var t,o=0,n=!1;(ne=e.target).widthArrayCheck||Y(),q=ne.label.lineWidth?ne.label.lineWidth:1e4,(t=ne.globalToLocal(e.stageX/e.target.stage.scaleX,e.stageY/e.target.stage.scaleY)).x-=ne.label.x,t.y-=ne.label.y;for(var r=0;r<ne.widthArray.length;r++)if(o+=ne.widthArray[r],t.x<o-ne.widthArray[r]/2+ne.label.getBounds().x){Ce=r,n=!0;break}n||(Ce=ne.text.length),E(),w&&!re&&0<ne.text.length&&O(),re&&ne&&(0<ne.text.length?(t=ne.localToLocal(0,0,N),re.x=t.x,re.y=t.y+ne.height+15):j())}}function Y(){if(ne){var e;ne.widthArray=[];for(var t=0;t<ne.text.length;t++)(e=ne.clone().removeFrom()).text=ne.text[t],ne.widthArray.push(e.label.getMeasuredWidth());ne.widthArrayCheck=!0,E()}}function X(t){function o(){ne&&0<ne.text.length?(0<N.selectedIndex&&L("del"),t?n():N.on("pressup",n)):L("del")}function n(){i=!1,r&&r.clear(),N.off("pressup",n)}var r,i=!0;o(),r=e.timeout(300,function t(){(!ne||ne.text.length<1||0==N.currentIndex)&&(i=!1),i&&(o(),r=r&&e.timeout(200,t)),ne&&ne.text.length<1&&n()}),N.stage.update()}function R(){for(var e=0;e<t.length;e++)t[e].clickEvent=t[e].on("click",D)}function _(){if(1<t.length)for(var e=0;e<t.length;e++)t[e].off("click",t[e].clickEvent)}function W(){if(!te&&(ne=t[0],q=ne&&ne.label.lineWidth?ne.label.lineWidth:1e4,ne)){(te=new e.Rectangle(3,ne.height-(ne.paddingVertical&&ne.background?2*ne.paddingVertical:0),c,null,null,null,null,null,!1).center(ne)).x=0,te.visible=!1,te.animate({obj:{alpha:0},rewind:!0,loop:!0,loopWait:750,time:250,id:"knipperTekst"});for(var o=0;o<t.length;o++)t[o].widthArray=[0];Y()}}function F(){e.stopAnimate("knipperTekst"),ne&&ne.removeChild(te),ne=te=null}var G;if(G=zob(e.Keyboard,arguments,"labels, backgroundColor, color, shiftBackgroundColor, shiftHoldBackgroundColor, placeBackgroundColor, placeColor, cursorColor, shadeAlpha, borderColor, borderWidth, margin, corner, draggable, placeClose, shadowColor, shadowBlur, container, data, place, special, rtl, hardKeyboard, style, group, inherit",this))return G;z_d("67.2"),this.zimContainer_constructor(1e3,400,null,null,!1),this.type="Keyboard",this.group=A;var H=!1===T?{}:e.getStyle(this.type,this.group,P);zot(t)&&(t=null!=H.labels?H.labels:[]),Array.isArray(t)||(t=[t]),zot(o)&&(o=null!=H.backgroundColor?H.backgroundColor:"#333"),zot(n)&&(n=null!=H.color?H.color:"white"),zot(r)&&(r=null!=H.shiftBackgroundColor?H.shiftBackgroundColor:"orange"),zot(a)&&(a=null!=H.shiftHoldBackgroundColor?H.shiftHoldBackgroundColor:"red"),zot(l)&&(l=null!=H.placeBackgroundColor?H.placeBackgroundColor:"#50c4b7"),zot(s)&&(s=null!=H.placeColor?H.placeColor:n),zot(c)&&(c=null!=H.cursorColor?H.cursorColor:"#50c4b7"),zot(u)&&(u=null!=H.shadeAlpha?H.shadeAlpha:.2),zot(d)&&(d=null!=H.borderColor?H.borderColor:"rgba(0,0,0,.1)"),zot(h)&&(h=null!=H.borderWidth?H.borderWidth:null),d<0||h<0?d=h=null:null!=d&&null==h&&(h=1),zot(g)&&(g=null!=H.margin?H.margin:5),zot(p)&&(p=null!=H.corner?H.corner:30),zot(f)&&(f=null!=H.draggable&&H.draggable),zot(m)&&(m=null==H.placeClose||H.placeClose),zot(z)&&(z=null!=H.shadowColor?H.shadowColor:"rgba(0,0,0,.2)"),zot(v)&&(v=null!=H.shadowBlur?H.shadowBlur:14),zot(y)&&(y=null!=H.data?H.data:[[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["?123"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC"]],[["+","x","%","=","<",">","{","}","[","]"],["€","£","¥","$","￦","~","`","¤","♡","☆"],["2/2","_","\\","|","《","》","¡","¿","backspace"],["ABC"]]]);var N=this;N.data=y,zot(w)&&(w=null==H.place||H.place),zot(x)&&(x=null!=H.rtl&&H.rtl),zot(k)&&(k=null==H.hardKeyboard||H.hardKeyboard);var V="zim display - Keyboard(): Please pass in a reference to a container with bounds set";if(zot(b)){if(!zimDefaultFrame)return void zog(V);b=zimDefaultFrame.stage}else{if(!b.getBounds)return void zog(V);if(zot(b.stage))return void zog("zim display - Keyboard(): The container must have a stage property")}-1!=z&&0<v&&(N.shadow=new createjs.Shadow(z,3,3,v));var q,K=zimDefaultFrame?zimDefaultFrame.stage:null;N.labels=t;var U=["@","",".","/","away"];zot(C)||U.splice(1,0,C);var Z=e.copy(y[0]);Z[3]=Z[3].concat(U);var Q=e.copy(y[1]);Q[3]=Q[3].concat(U);var J=e.copy(y[2]);J[3]=J[3].concat(U);var $,ee,te,oe,ne,re,ie,ae,le,se,ce,ue,de=["ė","ē","ę","ê","é","ë","è"],he=["ū","û","ú","ü","ù"],ge=["ī","į","ì","í","ï","î"],pe=["ō","œ","ø","õ","ô","ó","ö","ò"],fe=["ā","ã","å","â","á","ä","à","æ"],me=["ñ","ń"],ze=[],ve=95.5,be={def:"default",shift:"shift",number1:"number1",number2:"number2"},ye=be.def,we=!1,Ce=0,xe=[];!function(){(ie=new e.Shape({style:!1})).graphics.f(n).p("AhIFoIAAjYIixAAID5n3ID6H3IixAAIAADYgAjHBxICeAAIAADYIBTAAIAAjYICeAAIjImSg"),ie.setBounds(-25.5,-36,51,72),ae=new e.Container({style:!1});var t=new e.Shape({style:!1});t.graphics.f(n).p("ACgC+IigigIifCgQgGAGgJAAQgJAAgGgGQgGgGgBgJQABgJAGgGICgigIigifQgGgGgBgJQABgJAGgGQAGgGAJAAQAIAAAHAGICfCgICgigQAGgGAJAAQAJAAAGAGQAGAGABAJQgBAJgGAGIigCfICgCgQAGAGABAJQgBAJgGAGQgGAGgJAAQgJAAgGgGg"),t.setTransform(82.6,32),t.addTo(ae);var o=new e.Shape({style:!1});o.graphics.f(n).s().p("AkhFAQgcAAgUgUIkHj6QgVgUAAgeQAAgdAVgVIEHj6QAUgTAcAAINKAAQAdAAAUAUQAUAUAAAdIAAH1QAAAdgUATQgUAVgdAAgAk0kOIkGD8QgIAHAAALQAAALAIAIIEGD7QAIAHALAAINKAAQALAAAIgIQAHgHAAgLIAAn1QAAgLgHgIQgIgIgLAAItKAAQgLAAgIAHg"),o.setTransform(62.2,32),o.addTo(ae),ae.setBounds(0,0,125,64),(le=new e.Container({style:!1})).setBounds(0,0,147,86);for(var r,i=[{p:"Ai+heIF9AAIi/C9g",transform:[73.4,76]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.4,43.2]},{p:"AnNAzIAAhlIObAAIAABlg",transform:[73,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.2,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.5,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.8,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[87.1,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.4,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.7,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.3,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.6,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[86.9,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.2,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.5,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]},{p:"AphEnQgzAAgkgkQglglAAgzIAAlVQAAgzAlglQAkgkAzAAITDAAQAzAAAkAkQAlAlAAAzIAAFVQAAAzglAlQgkAkgzAAgAqjjtQgcAcAAAnIAAFVQAAAnAcAbQAbAcAnAAITDAAQAnAAAcgcQAbgbAAgnIAAlVQAAgngbgcQgcgcgnAAIzDAAQgnAAgbAcg",transform:[73.4,29.5]}],a=0;a<i.length;a++)(r=new e.Shape({style:!1})).graphics.f(n).s().p(i[a].p),r.setTransform(i[a].transform[0],i[a].transform[1]),r.addTo(le)}(),I(ye),f&&function(){se=new e.Rectangle(1.5*ve+2.5+2.5,ve,o,d,h,p,null,null,!1).addTo(N,0).cur();for(var t=0;t<4;t++)new e.Rectangle(.4*se.width,4,n,null,null,null,null,null,!1).centerReg(se).alp(.2).y-=15*t-22;se.x=8.5*ve+40,se.y=-ve-5,se.name="drag"}(),this.on("mousedown",function(t){K=N.stage,ee&&N.removeChild(ee),re&&xe.indexOf(t.target)<0&&j(),zot(t.target.name)||(f&&t.target===se?(N.tickerMouseEvent=K.on("stagemousemove",function(e){N.mouseYAmount=e.stageY}),e.Ticker.add(S),N.on("pressup",M),ce=t.stageY-N.localToGlobal(0,0).y):zot(C)||t.target.name!==C?"shift"===t.target.name?B():"?123"===t.target.toggle?(N.removeChild($),I(be.number1)):"ABC"===t.target.toggle?(N.removeChild($),ye=be.def,I(),we&&B(!0)):"1/2"===t.target.toggle?(N.removeChild($),I(be.number2)):"2/2"===t.target.toggle?(N.removeChild($),I(be.number1)):"away"===t.target.name?(N.hide(),N.dispatchEvent("close")):"e"===t.target.name||"u"===t.target.name||"i"===t.target.name||"o"===t.target.name||"a"===t.target.name||"n"===t.target.name?function(t){var r,i,a=!1,l=!1;switch(t){case"e":r=de;break;case"u":r=he;break;case"i":r=ge;break;case"o":r=pe;break;case"a":r=fe;break;case"n":r=me}i=e.timeout(500,function(){var t,s,c,u,g=0;if(i.clear(),!a){l=!0,(ee=new e.Container(1e3,ve,null,null,!1).addTo(N,0)).y=-ve-5;for(var f=0;f<r.length;f++)u=ye===be.shift?r[f].toUpperCase():r[f],t=new e.Label({lineWidth:10,lineHeight:25,text:u,font:null!=H.font?H.font:null,color:n,align:"center",style:!1}),s=new e.Rectangle(ve,ve,o,d,h,p,null,null,!1).addTo(ee),c=new e.Rectangle(ve,ve,"white",null,null,p,null,null,!1).alp(.2),s.addChild(c),t.center(s),s.name=r[f],s.x=g,g+=ve+5;N.stage.update()}});var s=N.on("pressup",function(e){a=!0,N.off("pressup",s),l||L(t)})}(t.target.name):"return"===t.target.name?L("\n"):"backspace"===t.target.name?X():L(""===t.target.name?" ":t.target.name):N.dispatchEvent("special"),K.update())}),N.addChar=function(e){!zot(e)&&e.match(/^.$/)&&L(e)},N.removeChar=function(){X(!0)},R(),W(),Object.defineProperty(this,"selectedLabel",{get:function(){return ne},set:function(e){D({target:e}),N.hidePlace()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return Ce},set:function(e){Ce=e,E()}}),this.show=function(e){return N.addTo(b),zot(e)||D({target:t[e]}),te&&(te.visible=!0),N.toggled=!0,N},this.hide=function(){return N.removeFrom(b),te&&(te.visible=!1),K.update(),N.toggled=!1,N},this.toggle=function(e){return!0===e?N.show():!1===e?N.hide():N.parent?N.hide():N.show(),N},this.showPlace=function(){return O(),N},this.hidePlace=function(){return j(),N},this.addLabels=function(e){Array.isArray(e)||(e=[e]);for(var o=e.length-1;0<=o;o--)0<=t.indexOf(e[o])||"Label"!=e[o].type?e.splice(o,1):e[o].widthArray=[0];return _(),t=t.concat(e),R(),W(),te&&(te.visible=!0),N},this.removeLabels=function(e){Array.isArray(e)||(e=[e]),_();for(var o=0;o<e.length;o++){var n=t.indexOf(e[o]);0<=n&&t.splice(n,1)}return R(),0==t.length?ne&&F():ne&&-1==t.indexOf(ne)&&(F(),W()),N};var ke=new e.Rectangle(this.width,this.height,e.clear,null,null,null,null,null,!1).addTo(this).expand().bot();ke.on("mousedown",function(){}),ke.on("click",function(){}),this.resize=function(){return N.scaleTo(K,100-2*g/K.width*100,50-2*g/K.height*100),N.y=K.height-N.height-g,N.x=K.width/2-N.width/2,ne&&re&&(point=ne.localToLocal(0,0,N),re.x=point.x,re.y=point.y+ne.height+15),N.stage&&N.stage.update(),N},this.resize(),N.selectedLabel&&(N.selectedIndex=N.selectedLabel.text.length),k&&(this.keydownEvent=window.addEventListener("keydown",function(e){if(N.stage){var t=N;zot(t)||(35==e.keyCode&&(t.selectedIndex=t.selectedLabel.text.length),36==e.keyCode&&(t.selectedIndex=0),37==e.keyCode&&(t.selectedIndex=t.selectedIndex-1),39==e.keyCode&&(t.selectedIndex=t.selectedIndex+1),46==e.keyCode&&t.selectedIndex<t.selectedLabel.text.length&&(t.selectedIndex=t.selectedIndex+1,t.removeChar()),8==e.keyCode&&(e.preventDefault(),t.removeChar()),t.addChar(e.key),N.stage&&N.stage.update())}})),!1!==T&&i(this,H),this.clone=function(){var i=new e.Keyboard(t,o,n,r,a,l,c,u,g,p,f,m,z,v,b,y,w,C,x,k,T,this.group,P);return N.cloneProps(i)},this.dispose=function(){return ke.removeAllEventListeners(),N.keydownEvent&&window.removeEventListener("keydown",N.keydownEvent),N.zimContainer_dispose(),!0}},e.extend(e.Keyboard,e.Container,"clone, dispose","zimContainer",!1),e.Organizer=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B){var I;if(I=zob(e.Organizer,arguments,"width, list, useAdd, useRemove, usePosition, autoAdd, autoRemove, autoPosition, addForward, removeForward, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, corner, keyEnabled, gradient, gloss, backdropColor, style, group, inherit",this))return I;z_d("67.3"),this.group=P;var S=!1===A?{}:e.getStyle("Organizer",this.group,B);zot(t)&&(t=null!=S.width?S.width:o&&o.vertical?o.width:300),zot(n)&&(n=null==S.useAdd||S.useAdd),zot(r)&&(r=null==S.useRemove||S.useRemove),zot(a)&&(a=null==S.usePosition||S.usePosition),zot(l)&&(l=null!=S.autoAdd?S.autoAdd:n),zot(s)&&(s=null!=S.autoRemove?S.autoRemove:r),zot(c)&&(c=null!=S.autoPosition?S.autoPosition:a),zot(u)&&(u=null==S.addForward||S.addForward),zot(d)&&(d=null==S.removeForward||S.removeForward),zot(h)&&(h=null!=S.backgroundColor?S.backgroundColor:"#777"),zot(g)&&(g=null!=S.rollBackgroundColor?S.rollBackgroundColor:"#555"),zot(p)&&(p=null!=S.selectedBackgroundColor?S.selectedBackgroundColor:"#333"),zot(m)&&(m=null!=S.color?S.color:"white"),zot(z)&&(z=null!=S.rollColor?S.rollColor:m),zot(v)&&(v=null!=S.selectedColor?S.selectedColor:m),zot(y)&&(y=null!=S.spacing?S.spacing:1),zot(w)&&(w=null!=S.corner?S.corner:0),zot(x)&&(x=null!=S.gradient?S.gradient:.2),zot(k)&&(k=null!=S.gloss?S.gloss:null),zot(T)&&(T=null!=S.backdropColor?S.backdropColor:null),Array.isArray(w)||(w=[w,w,w,w]);var M={width:50,height:50,label:"",shadowColor:-1,gradient:x,corner:w,backgroundColor:h,rollBackgroundColor:g},E=this.buttons=[],O=new e.Shape;if(O.graphics.f(m).p("AAAA4Ih6B8Ig5g4IB8h8Ih7h6IA4g5IB6B8IB7h8IA5A5Ih8B6IB8B7Ig5A5g"),n&&E.push(new e.Button({icon:O.sca(.55).rot(-45).reg(1),inherit:M})),a){var j=new e.Shape;j.graphics.f(m).p("AiJieIETCeIkTCfg"),E.push(new e.Button({icon:j.sca(.6).rot(o&&!o.vertical?180:-90).reg(-2),inherit:M})),E.push(new e.Button({icon:j.clone().sca(.6).rot(o&&!o.vertical?0:90).reg(-2),inherit:M}));var L=new e.Shape;L.graphics.f(m).p("AiFCLIAAkVIBXAAIAAEVgAgiAAICoiHIAAEQg"),E.push(new e.Button({icon:L.sca(.62).rot(o&&!o.vertical?0:90).reg(0),inherit:M})),E.push(new e.Button({icon:L.clone().sca(.62).rot(o&&!o.vertical?180:-90).reg(0),inherit:M}))}r&&E.push(new e.Button({icon:O.clone().rot(0).sca(.55),inherit:M})),0==E.length&&(E=[""]),this.zimTabs_constructor(t,t/E.length,E,h,g,p,f,m,z,v,b,!1,y,!0,!1,w,null,!0,x,k,null,null,null,null,null,null,null,null,null,null,T);var D=this;D.list=o,D.type="Organizer";var Y=!(D.setButtons=function(){a&&(D.buttons[1].icon.rotation=D.list&&!D.list.vertical?180:-90,D.buttons[2].icon.rotation=D.list&&!D.list.vertical?0:90,D.buttons[3].icon.rotation=D.list&&!D.list.vertical?0:90,D.buttons[4].icon.rotation=D.list&&!D.list.vertical?180:-90)}),X=o;D.change(function(e){(!Y&&D.list||D.list&&D.list!=X)&&(D.list!=X&&X&&X.noChange(),D.list.change(function(e){D.orgItem=D.list.selected,D.orgIndex=D.list.selectedIndex}),Y=!0,X=D.list);var t=e.target.selectedIndex;n||t++,a||n&&!(0<t)||(t=5);var o=zot(D.list.selectedIndex)||D.list.selectedIndex<0;switch(o&&(D.currentValue=null),D.lastIndex=D.list.selectedIndex,t){case 0:if(l){var r=Math.max(0,D.list.selectedIndex);D.add(r)}D.orgType="add";break;case 1:if(o)break;c&&(r=D.list.selectedIndex,D.up(r)),D.orgType="up";break;case 2:if(o)break;c&&(r=D.list.selectedIndex,D.down(r)),D.orgType="down";break;case 3:if(o)break;c&&(r=D.list.selectedIndex,D.toTop(r)),D.orgType="top";break;case 4:if(o)break;c&&(r=D.list.selectedIndex,D.toBottom(r)),D.orgType="bottom";break;case 5:if(o)break;s&&(r=D.list.selectedIndex,D.remove(r)),D.orgType="remove"}}),this.add=function(e,t,o){zot(e)&&(e=D.lastIndex),zot(t)&&(t=""),e=u?Math.min(D.list.length,Math.max(0,D.list.selectedIndex)+1):Math.max(0,D.list.selectedIndex),D.list.addAt(t,e,o),D.list.selectedIndexPlusPosition=e,D.orgItem=D.list.selected,D.orgIndex=D.list.selectedIndex},this.up=function(e){zot(e)&&(e=D.lastIndex);var t=D.list.items[e];zot(t)||(D.list.removeAt(1,e),D.list.addAt(t,e-1),D.list.selectedIndexPlusPosition=Math.max(0,e-1),D.orgItem=D.list.selected,D.orgIndex=D.list.selectedIndex)},this.down=function(e){zot(e)&&(e=D.lastIndex);var t=D.list.items[e];zot(t)||(D.list.removeAt(1,e),D.list.addAt(t,e+1),D.list.selectedIndexPlusPosition=Math.min(D.list.length-1,e+1),D.orgItem=D.list.selected,D.orgIndex=D.list.selectedIndex)},this.toTop=function(e){zot(e)&&(e=D.lastIndex);var t=D.list.items[e];zot(t)||(D.list.removeAt(1,e),D.list.addAt(t,0),D.list.first(),D.orgItem=D.list.selected,D.orgIndex=D.list.selectedIndex)},this.toBottom=function(e){zot(e)&&(e=D.lastIndex);var t=D.list.items[e];zot(t)||(D.list.removeAt(1,e),D.list.addAt(t,D.list.length),D.list.last(),D.orgItem=D.list.selected,D.orgIndex=D.list.selectedIndex)},!(this.remove=function(e){zot(e)&&(e=D.lastIndex),D.removedItem=D.list.selected,e=Math.max(0,D.list.selectedIndex),D.list.removeAt(1,e),e=d?Math.max(0,D.list.selectedIndex):Math.max(0,D.list.selectedIndex-1),D.list.selectedIndexPlusPosition=Math.min(D.list.length-1,e),D.orgItem=D.list.selected,D.orgIndex=D.list.selectedIndex})!==A&&i(this,S),this.clone=function(){return D.cloneProps(new e.Organizer(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,D.group,B))}},e.extend(e.Organizer,e.Tabs,"clone","zimTabs",!1),e.Marquee=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v){function b(){if(!zot(c)&&0!=c){var t=4*c/25;B.pos(c-B.width-t,t/2,!1,!0,C),C.indicator&&(C.indicator.dispose(),C.indicator.removeFrom()),M=M||new Proportion(8,16,B.width+t,B.width/2+t,-1),C.indicator=new e.Indicator({width:(T.pages.length<=2?T.pages.length:T.pages.length-1)*(B.width-3),height:M.convert(T.pages.length),num:T.pages.length,shadowBlur:-1,interactive:!0,scale:1.2,indicatorType:d}),C.indicator.fit(0,0,o-E.height,E.width),C.indicator.rot("down"==s?-90:90).center(B).pos(null,B.width-t/2,null,!0),C.indicator.selectedIndex=C.selectedIndex,C.indicator.on("change",function(){C.go(T.pages[C.indicator.selectedIndex].page)})}}var y;if(y=zob(e.Marquee,arguments,"width, height, items, time, transition, speed, direction, marqueeType, borderColor, borderWidth, refresh, mix, style, group, inherit",this))return y;z_d("67.4"),this.group=z;var w=!1===m?{}:e.getStyle("Marquee",this.group,v),C=this;zot(t)&&(t=null!=w.width?w.width:300),zot(o)&&(o=null!=w.height?w.height:100),zot(r)&&(r=null!=w.time?w.time:2e3),zot(a)&&(a=null!=w.transition?w.transition:"slide"),zot(h)&&(h=null!=w.borderColor?w.borderColor:"#333"),zot(g)&&(g=null!=w.borderWidth?w.borderWidth:1),h<0||g<0?h=g=null:null!=h&&null==g&&(g=1),zot(c)&&(c=null!=w.marginLeft?w.marginLeft:25),zot(u)&&(u=null!=w.marginRight?w.marginRight:25),zot(l)&&(l=null!=w.speed?w.speed:500),zot(s)&&(s=null!=w.direction?w.direction:"right"),zot(p)&&(p=null!=w.refresh?w.refresh:18e5),zot(f)&&(f=null==w.mix||w.mix),this.zimContainer_constructor(t+c+u,o,null,null,!1),this.type="Marquee",this.speed=l;var x=new Rectangle(t-1,o-1,clear).addTo(C).mov(c+.5,.5),k=this.content=new Container(t,o).loc(c,0,C).setMask(x),T=this.pages=new e.Pages(null,a,l,null,k).addTo(k),A=!1;this.add=function(t,o,n,i){t.scaleTo(k),o&&t.cur().on("click",function(){zgo(o,n)}),T.addPage(t),t.marqueeViews=0,t.marquee=C,A||(A=!0,C.selectedIndex=0,C.selected=T.pages[C.selectedIndex].page,C.lastSelected=null,C.selected.marqueeOn&&C.selected.marqueeOn(),C.interval=e.interval(r,function(){C.go()})),i||b(),Y&&Y.top()},this.remove=function(t){if(C.selected==t){if(1==C.pages.pages.length)return;var o=C.selectedIndex+1;o==C.pages.pages.length&&(o=0),C.pages.go(o,null,null,0),e.timeout(20,function(){C.pages.removePage(t),t.dispose&&t.dispose(),b()})}else C.pages.removePage(t),t.dispose&&t.dispose(),b()},zot(n)||Array.isArray(n)||(n=[n]),n&&0<n.length&&(f&&e.shuffle(n),e.loop(n,function(e){C.add(e,null,null,!0)})),0<p&&e.timeout(p,function(){location.reload()}),C.go=function(t){if(C.selected.marqueeViews+=1,C.selected.marqueeOff&&C.selected.marqueeOff(),t)C.selected=t,e.loop(T.pages,function(e,o){e.page!=t||(C.selectedIndex=o)}),C.interval.interval=C.selected.marqueeTime?C.selected.marqueeTime:r,C.interval.pause(E.toggled,null,!0);else{var o=C.selectedIndex+1;C.selectedIndex=o%T.pages.length,C.selected=T.pages[C.selectedIndex].page,C.interval.time=C.selected.marqueeTime?C.selected.marqueeTime:r}C.dispatchEvent("page"),C.selected.marqueeOn&&C.selected.marqueeOn(),T.go(C.selected,s,a,l)},T.on("pagetransitioned",function(){C.dispatchEvent("pagetransitioned"),C.indicator&&(C.indicator.selectedIndex=C.selectedIndex)});var P=!1,B=C.left=new Container(c-4,o-4),I=(new Shape).sca(.6);I.graphics.f(light).mt(0,0).p("AAhCLIAAkVIBXAAIAAEVgAh3CLIAAkVIBXAAIAAEVg");var S=(new Shape).sca(.6).reg(-2,0);S.graphics.f(light).mt(0,0).p("AiJieIETCeIkTCfg");var M,E=C.button=new Button({label:"",icon:I,toggleIcon:S,width:45,height:45,corner:0,shadowBlur:0}).scaleTo(B,100).pos(0,0,!1,!0,B);if(E.on("click",function(){C.interval&&C.interval.pause(E.toggled),P=E.toggled,C.stage.update()}),b(),!zot(u)&&0<u&&void 0!==zimDefaultFrame&&zimDefaultFrame){var O=4*u/25,j=C.right=new e.Container(45,270),L=C.icon=zimDefaultFrame.makeIcon(e.grey,e.lighter,e.silver).sca(.5).pos(0,0,!0,!0,j).mov(0,0).cur();L.on("mouseover",function(){D.animate({props:{scaleX:1},time:500,ease:"backOut",override:!0}),L.stage.update()}),L.on("mouseout",function(){D.animate({props:{scaleX:0},time:300,ease:"backIn",override:!0}),L.stage.update()}),L.on("mousedown",function(){zgo("https://zimjs.com/marquee","_blank")});var D=C.label=new Label({text:"MARQUEE",color:dark,backgroundColor:lighter,shiftVertical:1,paddingVertical:5}).rot(-90).pos(0,13,!0,!1,j).reg(-10).sca(0,1).mov(0);j.fit(0,0,u-O,o-O),j.pos(u-j.width-O,O/2,!0,!0,C)}if(C.stage&&C.stage.update(),this.pause=function(e,t){zot(e)&&(e=!0),e!=P&&(P=e,C.interval.pause(e,t),C.button.toggle(e))},Object.defineProperty(this,"paused",{get:function(){return P},set:function(e){zon&&zog("ZIM Marquee() - paused is read only - use pause()")}}),Object.defineProperty(this,"time",{get:function(){return r},set:function(e){r=e,C.interval.time=r}}),this.load=function(t,o){var n=[];return f&&e.shuffle(t),e.loop(t,function(e){Array.isArray(e)?n.push(e[0]):n.push(e)}),C.marqueeLoader=frame.loadAssets(n,o),C.marqueeLoader.on("assetload",function(e){var o=t[e.asset.id];if(Array.isArray(o))var n=o[0],r=o[1];else n=o,r="_self";C.add(e.asset,n,r),b()}),C},!zot(h)){var Y=new Rectangle(t-1,o-1,e.clear,h,g).loc(x,null,C);Y.mouseEnabled=!1}!1!==m&&i(this,w),this.clone=function(){return C.cloneProps(new e.Marquee(t,o,n,r,a,l,s,d,h,g,p,f,m,this.group,v))},this.dispose=function(){return C.interval&&C.interval.clear(),this.zimContainer_dispose(),!0}},e.extend(e.Marquee,e.Container,["clone","dispose"],"zimContainer"),e.Loader=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O){function j(t){var o;o=t.dataTransfer&&t.dataTransfer.files&&0<t.dataTransfer.files.length?t.dataTransfer.files:t.target.files;for(var n,r,i,a=[],l=0;l<o.length;l++)r=o[l],i=void 0,(i=new FileReader).onload=function(t){var r=new Image;r.onload=function(){var t=new e.Bitmap(r);if(a.push(t),1==a.length&&(n=t),a.length==o.length){var i=new createjs.Event("loaded");i.bitmaps=a,i.bitmap=n,i.lastBitmap=t,i.total=a.length,Y.dispatchEvent(i),R.value=""}},r.src=t.target.result},i.readAsDataURL(r)}var L;if(L=zob(e.Loader,arguments,"width, height, label, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, borderRollColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, frame, style, group, inherit",this))return L;z_d("67.5"),this.group=E;var D=!1===M?{}:e.getStyle("Loader",this.group,O);if(zot(t)&&(t=null!=D.width?D.width:250),zot(o)&&(o=null!=D.height?D.height:70),zot(r)&&(r=null!=D.backgroundColor?D.backgroundColor:"rgba(0,0,0,.05)"),zot(a)&&(a=null!=D.rollBackgroundColor?D.rollBackgroundColor:"rgba(0,0,0,.1)"),zot(l)&&(l=null!=D.color?D.color:"rgba(0,0,0,.5)"),zot(s)&&(s=null!=D.rollColor?D.rollColor:l),zot(c)&&(c=null!=D.borderColor?D.borderColor:"rgba(0,0,0,.3)"),zot(d)&&(d=null!=D.borderWidth?D.borderWidth:1),zot(v)&&(v=null==D.dashed||D.dashed),zot(h)&&(h=null!=D.corner?D.corner:0),zot(n)&&(n=null!=D.label?D.label:new e.Label({text:"UPLOAD PIC",color:l,rollColor:s,valign:"center",align:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group})),zot(S)){if(!zimDefaultFrame)return void(zon&&zog("zim.Loader - please provide a reference to zim Frame"));S=zimDefaultFrame}this.zimButton_constructor(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,null,null,null,null,null,null,null,null,null,null,null,null,!1),this.type="Loader";var Y=this,X=S.stage;n=Y.label;var R=Y.tag=document.createElement("input");document.body.appendChild(R),R.setAttribute("type","file"),R.setAttribute("multiple","multiple"),R.setAttribute("aria-hidden",!0),R.hidden=!0,R.style.cssText="border:thin solid grey; z-index:2; width:"+t+"px; height:"+o+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",this.addEventListener("mousedown",function(){R.click()}),R.addEventListener("change",j);var _=new createjs.DOMElement(R);X.addChild(_),_.alpha=0;var W=S.retina&&window.devicePixelRatio||1;this.resize=function(){return Y.stage?(R.setAttribute("aria-hidden",!1),R.hidden=!1,R.style.display="block",setTimeout(function(){var t=Y.localToGlobal(0,0);S.retina?(_.x=S.x/X.scaleX+t.x/W,_.y=S.y/X.scaleY+t.y/W,e.sca(_,Y.scaleX/W,Y.scaleY/W)):(_.x=S.x+t.x*S.scale,_.y=S.y+t.y*S.scale,e.sca(_,S.scale*Y.scaleX,S.scale*Y.scaleY)),X.update()},50),Y):(R.setAttribute("aria-hidden",!0),R.hidden=!0,void(R.style.display="none"))},this.resize(),Y.on("added",function(){R.style.display="block",R.hidden=!1,R.style.display="block",Y.resize()}),Y.added(function e(){Y.resize(),setTimeout(function(){R.style.display="block",R.hidden=!1,R.style.display="block"},50),Y.on("added",e,null,!0)}),Y.on("removed",function(){R.style.display="none",R.hidden=!0,R.style.display="none"}),(new XMLHttpRequest).upload&&R.addEventListener("drop",function(e){R.removeEventListener("change",j),j(e),setInterval(function(){R.addEventListener("change",j)},100)}),!(this.save=function(t,o,n,r,i,a,l,s,c,u){var d;if(d=zob(Y.save,arguments,"content, filename, x, y, width, height, cached, cachedBounds, type, data"))return d;if(zot(t)&&(t=S.stage),zot(c)&&(c="png"),zot(o))o="saved_"+String(e.makeID("numbers",5))+"."+c;else{var h=o.split(".");if(1==h.length)o+="."+c;else{var g=["png","jpg","jpeg"],p=g.indexOf(h[h.length-1].toLowerCase());-1==p?o+="."+c:c=g[p]}}if(zot(n)&&(n=0),zot(r)&&(r=0),zot(i)&&(i=t.getBounds&&t.getBounds()?t.getBounds().width:S.width),zot(a)&&(a=t.getBounds&&t.getBounds()?t.getBounds().height:S.height),t.cache(n,r,i,a),u){var f=t.cacheCanvas.toDataURL("image/"+c);return l?s&&t.cache(cashedBound.x,cashedBound.y,cashedBound.width,cashedBound.height):t.uncache(),f}if(/Edge\/(\d)+/.test(navigator.userAgent)){var m=window.open();m.document.write("<html><head><title>saved</title></head><body style='margin:0px;padding:0px;overflow:hidden'><img src="+t.cacheCanvas.toDataURL("image/"+c)+"></body></html>"),m.document.close()}else{"jpg"==c&&(c="jpeg");var z=document.createElement("a");z.setAttribute("download",o),z.setAttribute("href",t.cacheCanvas.toDataURL("image/"+c)),document.body.appendChild(z),z.click(),document.body.removeChild(z)}return l?s&&t.cache(cashedBound.x,cashedBound.y,cashedBound.width,cashedBound.height):t.uncache(),Y})!==M&&i(this,D),this.clone=function(){var i=new e.Loader(t,o,zot(n)?null:n.clone(),r,a,l,s,c,d,h,g,p,f,m,z,zot(b)?null:b.clone(),zot(y)?null:y.clone(),w,zot(C)?null:C.clone(),zot(x)?null:x.clone(),k,zot(T)?null:T.clone(),zot(A)?null:A.clone(),zot(P)?null:P.clone(),zot(B)?null:B.clone(),I,S,M,this.group);return Y.cloneProps(i)},Object.defineProperty(this,"frame",{get:function(){return S},set:function(e){e!=S&&(S.off("update",Y.updateEvent),S.off("resize",Y.resizeEvent),S=e,Y.resizeEvent=S.on("resize",Y.resize),Y.updateEvent=S.on("update",Y.resize),Y.resize())}}),this.resizeEvent=S.on("resize",Y.resize),this.updateEvent=S.on("update",Y.resize),this.dispose=function(){return S.off("update",Y.updateEvent),S.off("resize",Y.resizeEvent),document.body.removeChild(R),this.zimButton_dispose(),!0}},e.extend(e.Loader,e.Button,["clone","dispose"],"zimButton",!1),e.TextArea=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k){var T;if(T=zob(e.TextArea,arguments,"width, height, size, padding, color, backgroundColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, placeholder, readOnly, spellCheck, password, inputType, frame, expand, style, group, inherit",this))return T;z_d("67.6"),this.group=x;var A=!1===C?{}:e.getStyle("TextArea",this.group,k);if(zot(t)&&(t=null!=A.width?A.width:250),zot(o)&&(o=null!=A.height?A.height:70),zot(n)&&(n=null!=A.size?A.size:20),zot(r)&&(r=null!=A.padding?A.padding:5),zot(a)&&(a=null!=A.color?A.color:"#666"),zot(l)&&(l=null!=A.backgroundColor?A.backgroundColor:"rgba(256,256,256,.1)"),zot(s)&&(s=null!=A.borderColor?A.borderColor:"rgba(0,0,0,.1)"),zot(c)&&(c=null!=A.borderWidth?A.borderWidth:null),s<0||c<0?s=c=null:null!=s&&null==c&&(c=1),zot(u)&&(u=null!=A.corner?A.corner:0),!zot(h)&&zot(d)&&(d=null!=A.shadowColor?A.shadowColor:"rgba(0,0,0,.3)"),!zot(d)&&zot(h)&&(h=null!=A.shadowBlur?A.shadowBlur:10),zot(v)&&(v=null!=A.password&&A.password),zot(b)&&(b=null!=A.inputType&&A.inputType),zot(w)&&(w=null!=A.expand?A.expand:20),!0===w&&(w=20),zot(y)){if(!zimDefaultFrame)return void(zon&&zog("zim.TextArea - please provide a reference to zim Frame"));y=zimDefaultFrame}this.zimContainer_constructor(t,o,null,null,!1),this.type="TextArea";var P=this,B=y.stage,I=this.background=new e.Rectangle(t,o,l,s,c,u,g,null,!1).expand(w);-1!=d&&0<h&&(I.shadow=new createjs.Shadow(d,3,3,h)),P.addChild(I);var S=P.tag=b||v?document.createElement("input"):document.createElement("textarea");document.body.appendChild(S),zot(p)||(S.setAttribute("id",p),S.setAttribute("name",p)),v?S.setAttribute("type","password"):b&&S.setAttribute("type",b),m&&(S.readOnly=!0),z||(S.spellcheck=!1),zot(f)||S.setAttribute("placeholder",f),S.style.cssText="background-color:rgba(0,0,0,.01); color:"+a+"; resize:none; z-index:3; width:"+(t-2*r)+"px; height:"+(o-2*r)+"px; overflow:hidden; outline:none;font-size:"+n+"px; font-family:"+(null!=A.font?A.font:"arial")+"; border:none; position:absolute; left:0px; top:0px; display:none;",S.addEventListener("change",function(){P.dispatchEvent("change")}),S.addEventListener("input",function(){P.dispatchEvent("input")}),S.addEventListener("focus",function(){y.zil&&window.removeEventListener("keydown",y.zil[0]),P.dispatchEvent("focus")}),S.addEventListener("blur",function(){y.zil&&window.addEventListener("keydown",y.zil[0]),P.dispatchEvent("blur")});var M=new createjs.DOMElement(S);M.alpha=0,this.on("mousedown",function(){setTimeout(function(){S.focus()},100)}),this.setFocus=function(e){return zot(e)&&(e=!0),e?S.focus():S.blur(),P};var E=y.retina&&window.devicePixelRatio||1;this.resize=function(){return setTimeout(function(){var t=P.getConcatenatedMatrix().decompose(),o=P.localToGlobal(r,r);y.retina?(M.x=y.x/B.scaleX+o.x/E,M.y=y.y/B.scaleY+o.y/E,e.sca(M,t.scaleX/E/B.scaleX,t.scaleY/E/B.scaleY)):(M.x=y.x+o.x*y.scale,M.y=y.y+o.y*y.scale,e.sca(M,y.scale*t.scaleX,y.scale*t.scaleY)),M.alpha=1,P.stage&&B.update()},20),P},this.resize(),P.added(function e(){B.addChild(M),setTimeout(function(){S.style.display="block"},50),P.resize(),P.on("added",e,null,!0)}),P.on("removed",function(){B.removeChild(M),S.style.display="none"}),Object.defineProperty(this,"currentValue",{get:function(){return S.value},set:function(e){S.value=e}}),Object.defineProperty(this,"text",{get:function(){return S.value},set:function(e){S.value=e}}),Object.defineProperty(this,"focus",{get:function(){return document.activeElement==S},set:function(e){P.setFocus(e)}}),Object.defineProperty(this,"readOnly",{get:function(){return S.readOnly},set:function(e){S.readOnly=e}}),"undefined"!=typeof KEYFOCUS&&(e.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return e.KEYFOCUS==P},set:function(t){e.KEYFOCUS=P}}),e.KEYFOCUS||(P.keyFocus=!0),S.addEventListener("mousedown",function(){P.keyFocus=!0}),!1!==C&&i(this,A),this.clone=function(){var i=new e.TextArea(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,this.group,k);return P.cloneProps(i)},Object.defineProperty(this,"frame",{get:function(){return y},set:function(e){e!=y&&(y.off("update",P.updateEvent),y.off("resize",P.resizeEvent),y=e,P.resizeEvent=y.on("resize",P.resize),P.updateEvent=y.on("update",P.resize),P.resize())}}),this.resizeEvent=y.on("resize",P.resize),this.updateEvent=y.on("update",P.resize),this.dispose=function(){return y.off("update",P.updateEvent),y.off("resize",P.resizeEvent),document.body.removeChild(S),this.zimContainer_dispose(),!0}},e.extend(e.TextArea,e.Container,["clone","dispose"],"zimContainer",!1),e.Tag=function(t,o,n,r,a,l,s,c,u,d,h,g){var p;if(p=zob(e.Tag,arguments,"width, height, id, frame, backgroundColor, padding, paddingHorizontal, paddingVertical, expand, style, group, inherit",this))return p;z_d("67.7"),this.group=h;var f=!1===d?{}:e.getStyle("Tag",this.group,g);if(zot(t)&&(t=null!=f.width?f.width:250),zot(o)&&(o=null!=f.height?f.height:70),zot(n)&&(n=null!=f.id?f.id:"zimTag_"+e.rand(1e4)),zot(r)){if(!zimDefaultFrame)return void(zon&&zog("zim.TextArea - please provide a reference to zim Frame"));r=zimDefaultFrame}zot(a)&&(a=null!=f.backgroundColor?f.backgroundColor:"rgba(0,0,0,0)"),zot(l)&&(l=null!=f.padding?f.padding:10),zot(s)&&(s=null!=f.paddingHorizontal?f.paddingHorizontal:l),zot(c)&&(c=null!=f.paddingVertical?f.paddingVertical:l),zot(u)&&(u=null!=f.expand?f.expand:20),!0===u&&(u=20),this.zimContainer_constructor(t,o,null,null,!1),this.type="Tag",this.tagID=n,this.id=n;var m=this,z=r.stage,v=(m.background=new e.Rectangle(t+s,o+c,a).center(this).expand(u||0),m.tag=document.createElement("div"));document.body.appendChild(v),v.setAttribute("id",n),v.setAttribute("name",n),v.style.cssText="resize:none; z-index:3; width:"+t+"px; height:"+o+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none;";var b=new createjs.DOMElement(v);b.alpha=0;var y=r.retina&&window.devicePixelRatio||1;this.resize=function(){return setTimeout(function(){var t=m.localToGlobal(0,0);r.retina?(b.x=r.x/z.scaleX+t.x/y,b.y=r.y/z.scaleY+t.y/y,e.sca(b,m.scaleX/y,m.scaleY/y)):(b.x=r.x+t.x*r.scale,b.y=r.y+t.y*r.scale,e.sca(b,r.scale*m.scaleX,r.scale*m.scaleY)),b.alpha=1,m.stage&&z.update()},50),m},this.resize(),m.added(function e(){z.addChild(b),setTimeout(function(){v.style.display="block"},50),m.resize(),m.on("added",e,null,!0)}),m.on("removed",function(){z.removeChild(b),v.style.display="none"}),this.add=function(e){return v.innerHTML+=e,m},Object.defineProperty(this,"innerHTML",{get:function(){return v.innerHTML},set:function(e){v.innerHTML=e}}),Object.defineProperty(this,"style",{get:function(){return v.style},set:function(e){v.style=e}}),!1!==d&&i(this,f),this.clone=function(){var i=new e.Tag(t,o,n,r,a,l,s,c,u,d,this.group,g);return m.cloneProps(i)},Object.defineProperty(this,"frame",{get:function(){return r},set:function(e){e!=r&&(r.off("update",m.updateEvent),r.off("resize",m.resizeEvent),r=e,m.resizeEvent=r.on("resize",m.resize),m.updateEvent=r.on("update",m.resize),m.resize())}}),this.resizeEvent=r.on("resize",m.resize),this.updateEvent=r.on("update",m.resize),this.dispose=function(){return r.off("update",m.updateEvent),r.off("resize",m.resizeEvent),document.body.removeChild(v),this.zimContainer_dispose(),!0}},e.extend(e.Tag,e.Container,["clone","dispose"],"zimContainer",!1),e.addTo=function(t,o,n,r){var i;if(i=zob(e.addTo,arguments,"obj, container, index, localToLocal"))return i;if(z_d("47.5"),!zot(t)){if(zot(o)){if(!zimDefaultFrame)return void zog("zim methods - addTo(): please provide container");o=zimDefaultFrame.stage}if(zot(r)&&(r=!0),t.parent||(r=!1),r)var a=t.parent.localToLocal(t.x,t.y,o);return zot(n)||isNaN(n)?o.addChild(t):o.addChildAt(t,n),r&&(t.x=a.x,t.y=a.y),t}zog("zim methods - addTo(): please provide object")},e.removeFrom=function(e,t){if(z_d("47.6"),!zot(e))return zot(t)?e.parent&&e.parent.removeChild(e):t.removeChild(e),e;zog("zim methods - removeFrom(): please provide object")},e.added=function(e,t,o,n){if(z_d("47.7"),!zot(e)&&!zot(t)&&"function"==typeof t){if(zot(o)&&(o=100),!e.stage){var r=Date.now(),i=0,a=setInterval(function(){5<i?clearInterval(a):(i++,e.stage&&(t(e.stage,e),clearInterval(a),clearInterval(l)))},10),l=setInterval(function(){0<n&&r-Date.now()>n&&clearInterval(l),e.stage&&(t(e.stage,e),clearInterval(l))},o);return l}t(e.stage,e)}},e.centerReg=function(t,o,n,r){var i;if(i=zob(e.centerReg,arguments,"obj, container, index, add"))return i;if(z_d("48"),zot(t)||!t.getBounds||!t.getBounds())return zog("zim methods - centerReg(): please provide object with bounds set"),t;zot(r)&&(r=!0),zot(o)&&t.parent&&r&&(o=t.parent,zot(n)&&(n=t.parent.getChildIndex(t)),t.parent.removeChild(t)),zot(o)||o!=t.parent||(zot(n)&&(n=t.parent.getChildIndex(t)),t.parent.removeChild(t));var a=t.getBounds();return t.regX=a.x+a.width/2,t.regY=a.y+a.height/2,r?e.center(t,o,n):t},e.centerCheck=!1,e.center=function(t,o,n,r){var i;if(i=zob(e.center,arguments,"obj, container, index, add"))return i;if(e.centerCheck||(z_d("48.1"),e.centerCheck=!0),!zot(t)&&t.getBounds){if(zot(o)&&(t.parent?o=t.parent:zimDefaultFrame&&(o=zimDefaultFrame.stage)),!zot(o)&&o.getBounds){var a=t.getBounds(),l=o.getBounds();if(zot(r)&&(r=!0),r&&o.addChild&&(zot(n)||"number"==typeof n&&isNaN(n)?o.contains(t)||o.addChild(t):o.addChildAt(t,n)),zot(l))return a?(t.x=a.x+t.regX-a.width/2,t.y=a.y+t.regY-a.height/2):t.x=t.y=0,t;if(zot(a))return t.x=o.getBounds().width/2,t.y=o.getBounds().height/2,t;var s=t.localToLocal(t.regX,t.regY,o),c=e.boundsToGlobal(t),u=e.boundsToGlobal(o,c,!0);if(t.x=l.x+l.width/2-u.width/2+(s.x-u.x),t.y=l.y+l.height/2-u.height/2+(s.y-u.y),!r&&o.getStage&&o.stage&&t.parent){var d=o.localToLocal(t.x,t.y,t.parent);t.x=d.x,t.y=d.y}return t}zog("zim.center(): please provide container with bounds")}else zog("zim.center(): please provide object with bounds")},e.place=function(t,o){if(z_d("49"),!zot(t))return zot(o)&&(o="obj"),e.drag({obj:t,currentTarget:!0,dragCursor:"crosshair"}),zog("place "+o+" - to get new position"),t.on("click",function(){zog(o+".x = "+Math.round(t.x)+"; "+o+".y = "+Math.round(t.y)+";"),zog(o+".loc("+Math.round(t.x)+", "+Math.round(t.y)+");")}),t},e.placeReg=function(t,o){if(z_d("49.5"),!zot(t)){var n=t.stage;if(zot(n))return zog("zim.placeReg() - add object to stage before calling placeReg()"),t;zot(o)&&(o="obj");var r=t.parent.localToGlobal(t.x,t.y),i=new e.Shape(-25,-25,50,50,null,!1).addTo(n).pos({x:r.x,y:r.y,reg:!0});return i.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),i.compositeOperation="difference",i.expand(0),e.drag({obj:i}),zog("place cursor to get new registration point location"),n.on("stagemouseup",function(){var e=t.globalToLocal(i.x,i.y);zog(o+".regX = "+Math.round(e.x)+"; "+o+".regY = "+Math.round(e.y)+";"),zog(o+".reg("+Math.round(e.x)+", "+Math.round(e.y)+");")}),t}},e.pos=function(t,o,n,r,i,a,l,s,c,u,d){var h;if(h=zob(e.pos,arguments,"obj, x, y, horizontal, vertical, container, index, add, reg, regX, regY"))return h;z_d("41.5");var g=!1;"right"==r&&(g=!0);var p=!1;"bottom"==i&&(p=!0);var f=e.POSREG;if("undefined"!=typeof POSREG&&(f=POSREG),zot(c)&&(c=f),!zot(t)){if(zot(c)&&zot(u)&&(u=!1),zot(c)&&zot(d)&&(d=!1),!zot(c)&&zot(u)&&(u=c),!zot(c)&&zot(d)&&(d=c),zot(s)&&(s=!0),zot(a)||a.addChild||(a=null),t.getBounds||object.getBounds()||(u=d=!1),zot(a)&&(t.parent?a=t.parent:zimDefaultFrame&&(a=zimDefaultFrame.stage)),!t.parent&&zot(o)&&(o=0),!t.parent&&zot(n)&&(n=0),!zot(a)&&a.addChild&&s&&(zot(l)||"number"==typeof l&&isNaN(l)?a.contains(t)||a.addChild(t):a.addChildAt(t,l)),!u&&!d&&!("center"!=r&&"middle"!=r||"center"!=i&&"middle"!=i))return t.center(a),t.mov(o,n),t;if("center"==r||"middle"==r){if(u)t.x=a.width/2;else{var m=t.y;t.center(),t.y=m}t.mov(o),r=o=null}else!0===r&&(g=!0);if("center"==i||"middle"==i){if(d)t.y=a.height/2;else{var z=t.x;t.center(),t.x=z}t.mov(0,n),i=n=null}else!0===i&&(p=!0);if(t.parent&&t.parent.getBounds){if(a=t.parent,zot(o)&&1==g&&(o=0),zot(n)&&1==p&&(n=0),zot(o)||(t.x=o),zot(n)||(t.y=n),zot(o)&&zot(n)&&!g&&!p)return t;var v=0,b=0;if(t.getBounds()){var y=function(){var e=t.getBounds(),o=e.x,n=e.y,r=e.width,i=e.height,a=t._props.matrix;a=t.getMatrix(a),(o||n)&&a.appendTransform(0,0,1,1,0,0,0,-o,-n);var l=r*a.a,s=r*a.b,c=i*a.c,u=i*a.d,d=a.tx,h=a.ty,g=d,p=d,f=h,m=h;return(o=l+d)<g?g=o:p<o&&(p=o),(o=l+c+d)<g?g=o:p<o&&(p=o),(o=c+d)<g?g=o:p<o&&(p=o),(n=s+h)<f?f=n:m<n&&(m=n),(n=s+u+h)<f?f=n:m<n&&(m=n),(n=u+h)<f?f=n:m<n&&(m=n),{x:g,y:f,width:p-g,height:m-f}}();if(!zot(o)){if(g)w=new e.Point(y.x+y.width,y.y+y.height);else w=new e.Point(y.x,y.y);v=w.x-o}if(!zot(n)){if(p)w=new e.Point(y.x+y.width,y.y+y.height);else var w=new e.Point(y.x,y.y);b=w.y-n}var C=a.getBounds();zot(o)||(g?t.x=u?C.width+C.x-o:C.width+C.x-o-v:(t.x=u?o:o-v,t.x+=C.x)),zot(n)||(p?t.y=d?C.height+C.y-n:C.height+C.y-n-b:(t.y=d?n:n-b,t.y+=C.y))}}return t}},e.loc=function(t,o,n,r,i,a,l,s){var c;if(c=zob(e.loc,arguments,"obj, target, y, container, index, add, localToLocal, x"))return c;if(z_d("41.55"),!zot(t)){if("number"==typeof o&&(s=o,o=null),zot(o)||(zot(o.x)||(s=o.x),zot(o.y)||(n=o.y)),zot(s)&&zot(o)&&(s=t.x),zot(n)&&zot(o)&&(n=t.y),zot(a)&&(a=!0),zot(r)&&(t.parent?r=t.parent:zimDefaultFrame&&(r=zimDefaultFrame.stage)),a&&r&&(t.parent&&r==t.parent||(zot(i)||isNaN(i)?r.addChild(t):r.addChildAt(t,i))),zot(l)&&(l=!0),o&&o.parent&&t.parent&&l){var u=o.parent.localToLocal(s,n,t.parent);s=u.x,n=u.y}return t.x=s,t.y=n,t}},e.mov=function(t,o,n){var r;return(r=zob(e.mov,arguments,"obj, x, y"))?r:(z_d("41.6"),zot(t)?void 0:(zot(o)||(t.x+=o),zot(n)||(t.y+=n),t))},e.sca=function(e,t,o){if(z_d("41.97"),!zot(e)&&!zot(e.scaleX))return zot(t)&&(t=e.scaleX),zot(o)&&(o=t),e.scaleX=t,e.scaleY=o,e},e.alp=function(e,t){if(z_d("41.7"),!zot(e))return zot(t)||(e.alpha=e.hovOriginal=t),e},e.ble=function(e,t){if(z_d("41.72"),!zot(e))return zot(t)&&(t="difference"),e.compositeOperation=t,e},e.hov=function(e,t,o){if(z_d("41.75"),!zot(e))return zot(t)&&(t=1),zot(o)&&(o="number"==typeof t?"alpha":"color"),e.hovMouseover&&(e.off("mouseover",e.hovMouseover),e.off("mouseout",e.hovMouseout)),-1==t?(e.cur("default"),zot(e.hovOld)||(e[e.hovType]=e.hovOld),e.hovOld=null,e.stage&&e.stage.update()):(e.cur(),e.hovOld=e[o],e.hovNew=t,e.hovType=o,e.hovMouseover=e.on("mouseover",function(){e[o]=e.hovNew,e.stage&&e.stage.update()}),e.hovMouseout=e.on("mouseout",function(){e[o]=e.hovOld,e.stage&&e.stage.update()})),e},e.rot=function(t,o,n,r){if(z_d("41.8"),!zot(t)){if(!zot(o))if(!t.parent||zot(n)&&zot(r))t.rotation=o;else{zot(n)&&(n=t.x),zot(r)&&(r=t.y),t.x,t.y;var i=t.parent.localToLocal(n,r,t),a=new e.Point(t.x,t.y);t.reg(i.x,i.y),t.rotation=o,t.x=n,t.y=r;var l=t.parent.localToLocal(a.x,a.y,t);t.reg(l.x,l.y),t.x=a.x,t.y=a.y}return t}},e.siz=function(e,t,o,n){if(z_d("41.85"),!zot(e))return zot(n)&&(n=!1),zot(t)||zot(o)?zot(t)?zot(o)||(n?e.heightOnly=o:e.height=o):n?e.widthOnly=t:e.width=t:(e.widthOnly=t,e.heightOnly=o),e},e.ske=function(e,t,o){if(z_d("41.9"),!zot(e))return zot(t)||(e.skewX=t),zot(o)||(e.skewY=o),e},e.reg=function(e,t,o,n){if(z_d("41.95"),!zot(e)){var r=e.regX,i=e.regY;if(zot(t)||(e.regX=t),zot(o)||(e.regY=o),n&&e.parent){var a=e.localToLocal(r,i,e.parent);e.x-=a.x-e.x,e.y-=a.y-e.y}return e}},e.top=function(e){if(z_d("41.62"),!zot(e)&&e.parent)return e.parent.setChildIndex(e,e.parent.numChildren-1),e},e.bot=function(e){if(z_d("41.63"),!zot(e)&&e.parent)return e.parent.setChildIndex(e,0),e},e.ord=function(e,t){if(z_d("41.64"),!zot(e)&&e.parent)return zot(t)&&(t=0),e.parent.setChildIndex(e,e.parent.getChildIndex(e)+t),e},e.cur=function(e,t){return z_d("41.1"),zot(e)?zog("zim methods - cur(): please provide object"):(zot(t)&&(t="pointer"),e.cursor=t),e},e.sha=function(e,t,o,n,r){return z_d("41.2"),zot(e)?(zog("zim methods - sha(): please provide object"),e):(zot(t)&&(t="rgba(0,0,0,.3)"),t.blur?e.shadow=t:(zot(o)&&(o=e.width?.08*e.width:5),zot(n)&&(n=e.height?.08*e.height:5),zot(r)&&(r=e.width?.16*e.width:10),e.shadow=new createjs.Shadow(t,o,n,r)),e)},e.dep=function(e,t){if(z_d("41.65"),!zot(e))return zot(t)&&(t=0),e.depth=t,e},e.tap=function(e,t,o,n,r){var i;if(z_d("47.8"),!zot(e)&&!zot(t)&&"function"==typeof t)return zot(o)&&(o=5),zot(n)&&(n=1e4),zot(r)&&(r=!1),e.cursor="pointer",e.zimClickDownEvent=e.on("mousedown",function(r){if(i=r.target.stage,"List"==r.currentTarget.type){if("WindowBacking"==r.target.type)return;if(r.currentTarget.globalToLocal(r.stageX/i.scaleX,r.stageY/i.scaleY).y<=0)return}var a=r.stageX/i.scaleX,l=r.stageY/i.scaleY,s=Date.now();e.zimClickUpEvent=e.on("pressup",function(r){if(Math.abs(a+l-r.stageX/i.scaleX-r.stageY/i.scaleY)<o&&Date.now()-s<n){if(e.excludeTap)return;t(r)}},null,!0)},null,r),e},e.noTap=function(e){if(z_d("47.9"),!zot(e))return e.cursor&&(e.cursor="default"),e.off("mousedown",e.zimClickDownEvent),e.off("pressup",e.zimClickUpEvent),e},e.hold=function(e,t,o,n,r){var i;if(z_d("47.87"),!zot(e)&&!zot(t)&&"function"==typeof t)return zot(o)&&(o=5),zot(n)&&(n=1500),zot(r)&&(r=!1),e.cursor="pointer",e.zimClickHoldDownEvent=e.on("mousedown",function(r){if(i=r.target.stage,"List"==r.currentTarget.type){if("WindowBacking"==r.target.type)return;if(r.currentTarget.globalToLocal(r.stageX/i.scaleX,r.stageY/i.scaleY).y<=0)return}var a=r.stageX/i.scaleX,l=r.stageY/i.scaleY;Date.now(),clearInterval(e.zimHoldTimeout),e.zimHoldTimeout=setTimeout(function(){if(Math.abs(a+l-r.stageX/i.scaleX-r.stageY/i.scaleY)<o){if(e.excludeHold)return;t(r)}},n),e.zimClickHoldUpEvent=e.on("pressup",function(t){clearInterval(e.zimHoldTimeout)},null,!0)},null,r),e},e.noHold=function(e){if(z_d("47.88"),!zot(e))return e.cursor&&(e.cursor="default"),e.off("mousedown",e.zimClickHoldDownEvent),e.off("pressup",e.zimClickHoldUpEvent),clearInterval(e.zimHoldTimeout),e},e.change=function(e,t,o){if(z_d("47.85"),!zot(e)&&!zot(t)&&"function"==typeof t)return zot(o)&&(o=!1),e.zimChangeEvent=e.on("change",function(e){t(e)},null,o),e},e.noChange=function(e){if(z_d("47.95"),!zot(e))return e.off("mousedown",e.zimChangeEvent),e},e.drag=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,v){function b(){t.off("added",t.zimAdded),_=R=0,t.zimBoundary&&(l?(F=e.boundsToGlobal(t.parent,t.zimBoundary),c&&(G=t.zimBoundary)):(F=t.zimBoundary,c&&(G=e.boundsToGlobal(t.parent,t.zimBoundary,!0)))),F&&f&&(W=t.parent.localToGlobal(t.x,t.y),y(t,W.x,W.y)),u&&setTimeout(function(){k=new e.Damp(t.x,d),T=new e.Damp(t.y,d),t.zimDragImmediate=function(e,t){O=t,S=j=M=L=0,zot(E=e)||k.immediate(e),zot(t)||T.immediate(t)},A=3,P=0,B=[],I=[],S=t.x,M=t.y,E=t.x,O=t.y,j=t.x,L=t.y,Y=D=-1e4,t.zimDragMoving=!0,function(){function o(e,o,n,r,i){Math.abs(e.x-D)<.1&&Math.abs(e.y-Y)<.1?(t.zimDragMoving=!1,e.x=r,e.y=i,e.slideStartX=null,e.slideStartY=null,X&&e.dispatchEvent("slidestop"),"Pen"==t.type&&(t.zimDragCheck=!1,q&&t.stopCheck())):(D=o,Y=n)}var n=t.stage;t.zimDragTicker=function(){if(!zot(t.slideStartX))if(H=H||t,V){if(H.parent)var n=H.parent.globalToLocal(t.dragMouseX,t.dragMouseY);else n=new e.Point(0,0);P++,B.push(n.x),I.push(n.y),L=A<=P?(j=B.shift(),I.shift()):(j=B[0],I[0])}else{if(!t.zimDragMoving)return;var r=E+S-j,i=O+M-L;if(F&&(r=(a=w(H,r,i)).x,i=a.y),h)H.x=k.convert(r),H.y=T.convert(i),o(H,H.x,H.y,r,i);else{var a=w(H,k.convert(r),T.convert(i));H.x=a.x,H.y=a.y,o(H,H.x,H.y,H.x,H.y)}}},e.Ticker.add(t.zimDragTicker,n)}()},50),zot(t.zimMaskDynamic)||t.zimMaskApply()}function y(o,n,r){if(zot(o)&&(o=H||t),o.parent){if(zot(n)||zot(r)){var i=o.parent.localToGlobal(o.x,o.y);R=_=0,t.zimBoundary&&(l?(F=e.boundsToGlobal(o.parent,t.zimBoundary),c&&(G=o.zimBoundary)):(F=t.zimBoundary,c&&(G=e.boundsToGlobal(o.parent,t.zimBoundary,!0)))),n=i.x,r=i.y,u&&(E=o.x,O=o.y,H=o,k&&k.immediate(E),T&&T.immediate(O))}var a,s=o.parent.globalToLocal(n,r);u&&h?"vertical"==h?(a=w(o,s.x-R,s.y-_),o.x=a.x,o.y=s.y-_):"horizontal"==h?(a=w(o,s.x-R,s.y-_),o.x=s.x-R,o.y=a.y):(o.x=s.x-R,o.y=s.y-_):(a=w(o,s.x-R,s.y-_),o.x=a.x,o.y=a.y),!u||X||o.slideStartX==o.x&&o.slideStartY==o.y||(X=!0)}}function w(e,t,o){if(!e.parent)return{x:t,y:o};if(F)if(c){var n=e.getBounds().width,r=e.getBounds().height,i=e.getBounds().x,a=e.getBounds().y;n<G.width?t=G.x+(G.width-n)/2+(e.regX-i):(t-(e.regX-i)>G.x&&(t=G.x+(e.regX-i)),t-(e.regX-i)+n<G.x+G.width&&(t=G.x+G.width+(e.regX-i)-n)),e.height<G.height?o=G.y+(G.height-r)/2+(e.regY-a):(o-(e.regY-a)>G.y&&(o=G.y+(e.regY-a)),o-(e.regY-a)+r<G.y+G.height&&(o=G.y+G.height+(e.regY-a)-r))}else{var l=e.parent.localToGlobal(t,o);t=Math.max(F.x,Math.min(F.x+F.width,l.x)),o=Math.max(F.y,Math.min(F.y+F.height,l.y)),t=(l=e.parent.globalToLocal(t,o)).x,o=l.y}return{x:t,y:o}}var C;if(C=zob(e.drag,arguments,"obj, boundary, overCursor, dragCursor, all, swipe, localBounds, onTop, surround, slide, slideDamp, slideSnap, reg, removeTweens, startBounds, rect, currentTarget, offStage"))return C;if(z_d("31"),!zot(t)&&t.on){var x=e.DRAGALL;if("undefined"!=typeof DRAGALL&&(x=DRAGALL),zot(i)&&zot(z)&&(i=x),t.zimDown&&t.noDrag(),t.cursor=zot(n)?"pointer":n,zot(i)&&zot(z)?z=!1:zot(i)?zot(z)&&(z=!1):z=i,"Tag"!=t.type&&"TextArea"!=t.type&&"Loader"!=t.type||(z=!0),zot(a)&&(a=!1),zot(l)&&(l=!1),zot(s)&&(s=!0),zot(c)&&(c=!1),zot(u)&&(u=!1),zot(d)&&(d=.3),zot(h)&&(h=!0),!0!==h&&["horizontal","vertical","auto"].indexOf(h)<0&&(h=!1),zot(g)&&(g=!1),zot(p)&&(p=!0),zot(f)&&(f=!0),zot(o)&&!zot(m)&&(o=m),u)var k,T,A,P,B,I,S,M,E,O,j,L,D,Y,X;e.setSwipe(t,a),t.zimBoundary=o,t.zimLocalBounds=l;var R,_,W,F,G,H,N,V=!1,q=!1;return t.zimAdded=t.on("added",b,null,!0),t.zimRemoved=t.on("removed",function(){t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker)},null,!0),t.parent&&b(),t.pointers={},t.zimDown=t.on("mousedown",function(o){if(t.stage){N=t.stage,t.dragMouseX=Math.round(o.stageX/N.scaleX)+N.x,t.dragMouseY=Math.round(o.stageY/N.scaleY)+N.y;var n="id"+Math.abs(o.pointerID+1);if(t.pointers[n]=!0,H=z?o.currentTarget:o.target,!t.zimBoundary||H.getBounds()){if(V=!0,t.stage.mouseMoveOutside=!0,u||(t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker),t.zimDragTicker=e.Ticker.add(function(){},N)),p&&createjs.Tween.removeTweens(H),H.parent){if(s){var i=H.parent.numChildren-1;"Keyboard"==H.parent.getChildAt(i).type&&i--,H.parent.setChildIndex(H,i),H.ZIMoutlineShape&&H.outline()}if(H.parent==t.stage)var a=new e.Point(o.stageX/N.scaleX,o.stageY/N.scaleY);else a=H.parent.globalToLocal(o.stageX/N.scaleX,o.stageY/N.scaleY);g&&(H.x=a.x,H.y=a.y),R=a.x-H.x,_=a.y-H.y,t.zimBoundary&&(l?(F=e.boundsToGlobal(H.parent,t.zimBoundary),c&&(G=t.zimBoundary)):(F=t.zimBoundary,c&&(G=e.boundsToGlobal(H.parent,t.zimBoundary,!0)))),t.cursor=zot(r)?"pointer":r,u&&(t.slideStartX=t.x,t.slideStartY=t.y,X=!1,P=0,B=[a.x],I=[a.y],Y=D=-1e4,t.zimDragMoving=!0),"Pen"==t.type&&(t.zimDragCheck=!0,q=!1)}}else zog("zim.drag() - drag object needs bounds set")}},!0),t.zimMove=t.on("pressmove",function(e){if(V){var o=(v?e.rawX:e.stageX)+N.x,n=(v?e.rawY:e.stageY)+N.y;t.dragMouseX=Math.round(o/N.scaleX),t.dragMouseY=Math.round(n/N.scaleY),y(H,o/N.scaleX,n/N.scaleY),H.ZIMoutlineShape&&H.outline(),"Pen"==t.type&&!q&&t.drawing?q=!0:"Tag"!=t.type&&"TextArea"!=t.type&&"Loader"!=t.type||t.resize()}},!0),t.zimPosition=y,t.zimUp=t.on("pressup",function(o){var r="id"+Math.abs(o.pointerID+1);if(delete t.pointers[r],V){if(t.cursor=zot(n)?"pointer":n,u){if(H.parent)var i=v?o.rawX:o.stageX,a=v?o.rawY:o.stageY,l=H.parent.globalToLocal(i/N.scaleX,a/N.scaleY);else l=new e.Point(0,0);V=!1,S=l.x,M=l.y,E=H.x,O=H.y,k.immediate(H.x),T.immediate(H.y)}else{var s=0;for(var c in t.pointers)s++;0==s&&e.Ticker.remove(t.zimDragTicker),"Pen"==t.type&&(t.zimDragCheck=!1,q&&t.stopCheck())}t.stage&&t.stage.update()}},!0),t}},e.noDrag=function(t){if(z_d("32"),!zot(t)&&t.on)return t.cursor="default",e.setSwipe(t,!0),t.off("added",t.zimAdded),t.off("removed",t.zimRemoved),t.off("mousedown",t.zimDown),t.off("pressmove",t.zimMove),t.off("pressup",t.zimUp),e.Ticker&&t.zimDragSlide&&e.Ticker.remove(t.zimDragSlide),t.zimDragMoving=t.zimAdded=t.zimRemoved=t.zimDown=t.zimMove=t.zimUp=t.zimBoundary=t.zimDragSlide=null,t},e.dragBoundary=function(e,t,o){if(z_d("33"),!zot(e)&&e.on&&!zot(t))return e.zimBoundary=t,e.zimDragMoving=!0,e.zimPosition&&e.zimPosition(),e},e.dragRect=e.dragBoundary,e.transform=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B){function I(t){t==be&&new e.Triangle(16,12,12,"white").addTo(t).mov(0,-13.5),new e.Triangle(16,12,12,"white").addTo(t).mov(13.5).rot(90),t==be&&new e.Triangle(16,12,12,"white").addTo(t).mov(0,13.5).rot(180),new e.Triangle(16,12,12,"white").addTo(t).mov(-13.5).rot(-90),t==be&&new e.Triangle(10,7,7,"black").addTo(t).mov(0,-13),new e.Triangle(10,7,7,"black").addTo(t).mov(13).rot(90),t==be&&new e.Triangle(10,7,7,"black").addTo(t).mov(0,13).rot(180),new e.Triangle(10,7,7,"black").addTo(t).mov(-13).rot(-90),x&&t.cache(-20,-20,40,40)}function S(){var e=t;for(he=de=1,pe=ge=ue=0;e.parent;)ue+=e.rotation,de*=e.scaleX,he*=e.scaleY,ge+=e.skewX,pe+=e.skewY,e=e.parent}function M(){var t=b*Ee*e.sign(de),o=b*Ee*e.sign(he);ve.getChildAt(0).reg(t,o),ve.getChildAt(1).reg(-t,o),ve.getChildAt(2).reg(-t,-o),ve.getChildAt(3).reg(t,-o),q.update()}function E(){ae.c(),le.c(),se.c(),J=t.localToGlobal(K.x,K.y),$=t.localToGlobal(K.x+K.width,K.y),ee=t.localToGlobal(K.x+K.width,K.y+K.height),te=t.localToGlobal(K.x,K.y+K.height),pTM=t.localToGlobal(K.x+K.width/2,K.y),pRM=t.localToGlobal(K.x+K.width,K.y+K.height/2),pBM=t.localToGlobal(K.x+K.width/2,K.y+K.height),pLM=t.localToGlobal(K.x,K.y+K.height/2),oe=t.localToGlobal(t.regX,t.regY),pMid=t.localToGlobal(K.x+K.width/2,K.y+K.height/2),re=[J,$,ee,te],mids=[pTM,pRM,pBM,pLM],p&&(ae.s(f),z&&ae.sd([10,5],0),ae.ss(m).mt(J.x,J.y).lt($.x,$.y).lt(ee.x,ee.y).lt(te.x,te.y).lt(J.x,J.y).cp()),zot(T)||(le.s(T),P&&le.sd([10,5],0),le.ss(A).mt(J.x,J.y).lt($.x,$.y).lt(ee.x,ee.y).lt(te.x,te.y).lt(J.x,J.y).cp()),U.setBounds(J.x,J.y,$.x-J.x,te.y-J.y),g&&(se.s("#eee").ss(m).f("rgba(0,0,0,.1)").dc(0,0,y),se.s("#222").ss(m).dc(0,0,.3*y)),S();for(var o=Math.min(50,Math.abs(ge))*e.sign(ge),n=Math.min(50,Math.abs(pe))*e.sign(pe),r=ue*e.sign(de*he)*e.sign(t.scaleX*t.scaleY),i=0;i<re.length;i++){var a=re[i];fe.getChildAt(i).loc(a.x,a.y).ske(o,n).rot(r),ve.getChildAt(i).loc(a.x,a.y).rot(r);var l=mids[i],s=i%2==0?ze:me;s.getChildAt(Math.floor(i/2)).loc(l.x,l.y).ske(o,n).rot(r),u||s.getChildAt(Math.floor(i/2)).sca(i%2==0?de/2:1,i%2==0?1:he/2)}Q.x=oe.x,Q.y=oe.y}function O(){Oe.x=0,Oe.y=0,Oe.graphics.c().f("rgba(0,0,0,.01)").mt(J.x,J.y).lt($.x,$.y).lt(ee.x,ee.y).lt(te.x,te.y).lt(J.x,J.y).cp(),Oe.reg(oe.x,oe.y),Oe.x=oe.x,Oe.y=oe.y}function j(o){var n=q.getObjectUnderPoint(o.stageX,o.stageY,1);e.mobile()||n&&(t.contains&&t.contains(n)||!t.contains&&t==n)?t.transformControls.visible||(v?(ot=!1,Oe.mouseEnabled=!1):frame.canvas.style.cursor="move",t.transformControls.show(),t.dispatchEvent("transformshow")):!t.transformControls.visible||n&&ce.contains(n)||(t.transformControls.hide(),t.dispatchEvent("transformhide"))}function L(o){if(Je=!0,c&&W(),Ke&&q.off("stagemousemove",Ke),je=o.target.x,Le=o.target.y,We=t.x,Fe=t.y,startSX=t.scaleX,startSY=t.scaleY,"rotate"==o.target.controlType){Qe=!0,De=t.rotation;var n=o.stageX/q.scaleX,r=o.stageY/q.scaleY,i=ie.localToGlobal(We,Fe);Ge=i.x,He=i.y,Ye=180*Math.atan2(r-He,n-Ge)/Math.PI}Re=frame.ctrlKey||"rotate"==o.target.controlType?(Xe=Math.abs(je-t.x),Math.abs(Le-t.y)):(Xe=Math.abs(je-o.target.op.x),Math.abs(Le-o.target.op.y)),cornerPointObj=o.target.op,"rotate"!=o.target.controlType&&(_e=o.target.op.parent.localToLocal(o.target.op.x,o.target.op.y,t.parent)),et.stage?q.setChildIndex(et,q.getChildIndex(ce)):et.addTo(q,q.getChildIndex(ce)+1),et.x=o.stageX/q.scaleX,et.y=o.stageY/q.scaleY,et.cursor=v?"none":o.target.cu,v&&(t.getConcatenatedMatrix().decompose(V),V.rotation||(V.rotation=0),ye.rotation=V.rotation*e.sign(de*he)*e.sign(t.scaleX*t.scaleY)+we[o.target.cu]+Ce,"side"!=o.target.controlType&&de*he<0&&(ye.rotation+=90),tt.addTo(q,1).pos({x:o.stageX/q.scaleX,y:o.stageY/q.scaleY,reg:!0})),Oe.visible=!1,t.cursor="none"}function D(o){var n;if(n=frame.ctrlKey&&"corner"==o.target.controlType?Re<Xe?(o.target.x-We)/(je-We):(o.target.y-Fe)/(Le-Fe):Re<Xe?(o.target.x-o.target.op.x)/(je-o.target.op.x):(o.target.y-o.target.op.y)/(Le-o.target.op.y),"corner"==o.target.controlType?(t.scaleX=n*startSX,t.scaleY=n*startSY):(t.scaleX="e-resize"==o.target.cu?n*startSX:startSX,t.scaleY="n-resize"==o.target.cu?n*startSY:startSY),E(),et.x=o.stageX/q.scaleX,et.y=o.stageY/q.scaleY,v&&(tt.x=o.stageX/q.scaleX,tt.y=o.stageY/q.scaleY),!frame.ctrlKey||"side"==o.target.controlType){var r=o.target.op.parent.localToLocal(o.target.op.x,o.target.op.y,t.parent);t.x-=(r.x-_e.x)*e.sign(de)*e.sign(t.scaleX),t.y-=(r.y-_e.y)*e.sign(he)*e.sign(t.scaleY)}E(),t.transformControls.events&&X(o,o.target.controlType)}function Y(e,t){M();var o=e?e.target.controlType:"move";t&&(o="reset"),v&&tt.removeFrom(q),X(e,o,!0),q.update()}function X(e,o,n,r){null==r&&(r=!0);var i=!1;Ze=null,"move"==o?(t.x==nt.x&&t.y==nt.y||((Ze=new createjs.Event("transformed")).transformType="move"),r&&(i=Oe.hitTestPoint(e.stageX/q.scaleX,e.stageY/q.scaleY))):"corner"==o?(t.scaleX==nt.scaleX&&t.scaleY==nt.scaleY||((Ze=new createjs.Event("transformed")).transformType="size"),r&&(i=fe.hitTestPoint(e.stageX/q.scaleX,e.stageY/q.scaleY))):"side"==o?(t.scaleX==nt.scaleX&&t.scaleY==nt.scaleY||((Ze=new createjs.Event("transformed")).transformType="stretch"),r&&(i=me.hitTestPoint(e.stageX/q.scaleX,e.stageY/q.scaleY)||ze.hitTestPoint(e.stageX/q.scaleX,e.stageY/q.scaleY))):"rotate"==o?(t.rotation!=nt.rotation&&((Ze=new createjs.Event("transformed")).transformType="rotate"),r&&(i=ve.hitTestPoint(e.stageX/q.scaleX,e.stageY/q.scaleY))):"reg"==o?t.regX==nt.regX&&t.regY==nt.regY||((Ze=new createjs.Event("transformed")).transformType="reg"):(Ze=new createjs.Event("transformed")).transformType="reset"==o?"reset":"unknown",r&&!i&&(et.removeFrom(q),frame.canvas.style.cursor="default",t.cursor=$e),Ze&&(Ze.pressup=n,t.dispatchEvent(Ze))}function R(o){Je||(et.stage?q.setChildIndex(et,q.getChildIndex(ce)):et.addTo(q,q.getChildIndex(ce)+1),tt.addTo(q,1),et.x=o.stageX/q.scaleX,et.y=o.stageY/q.scaleY,tt.x=o.stageX/q.scaleX,tt.y=o.stageY/q.scaleY,t.getConcatenatedMatrix().decompose(V),V.rotation||(V.rotation=0),ye.rotation=V.rotation*e.sign(de*he)*e.sign(t.scaleX*t.scaleY)+we[o.target.cu]+Ce,"side"!=o.target.controlType&&de*he<0&&(ye.rotation+=90),q.update(),Ke&&q.off("stagemousemove",Ke),Ke=q.on("stagemousemove",function(e){et.x=e.stageX/q.scaleX,et.y=e.stageY/q.scaleY,q.update()}))}function _(e){q.off("stagemousemove",Ke),Je||(t.cursor=$e,et.removeFrom(q),tt.removeFrom(q),q.update())}function W(){if(c){var e=ie.numChildren-1;"Keyboard"==ie.getChildAt(e).type&&e--,ie.setChildIndex(t,e),F()}}function F(){if(ie==q)ce.removeFrom(),q.addChildAt(ce,q.getChildIndex(t)+1);else{for(var e=ie;e.parent&&e.parent!=q;)e=e.parent;t.stage&&(ce.parent==q&&q.removeChild(ce),q.addChildAt(ce,q.getChildIndex(e)+1))}}function G(){nt={x:t.x,y:t.y,rotation:t.rotation,regX:t.regX,regY:t.regY,scaleX:t.scaleX,scaleY:t.scaleY}}var H;if(H=zob(e.transform,arguments,"obj, move, stretchX, stretchY, scale, rotate, allowToggle, visible, onTop, showStretch, showRotate, showScale, showReg, showBorder, borderColor, borderWidth, dashed, customCursors, handleSize, regSize, snapDistance, snapRotation, cache, events, ghostColor, ghostWidth, ghostDashed, ghostHidden"))return H;if(z_d("33.5"),zot(t)||!t.getBounds)return zog("zim methods - transform(): please provide object with bounds set"),t;if(!t.getBounds())return zog("zim methods - transform(): please setBounds() on object"),t;if(!t.parent)return zog("zim methods - transform(): object should be on stage first"),t;zot(o)&&(o=!0),zot(n)&&(n=!0),zot(r)&&(r=!0),zot(i)&&(i=!0),zot(a)&&(a=!0);var N=e.mobile();zot(l)&&(l=!0),zot(s)&&(s=!0),zot(c)&&(c=!0),zot(u)&&(u=!!N),zot(d)&&(d=!!N),zot(h)&&(h=!0),zot(g)&&(g=!0),zot(p)&&(p=!0),zot(f)&&(f="brown"),zot(m)&&(m=1),zot(T)&&(T=null),zot(A)&&(A=null),T<0||A<0?T=A=null:null!=T&&null==A&&(A=1),zot(P)&&(P=!0),zot(B)&&(B=!1),zot(v)&&(v=!N),zot(b)&&(b=e.mobile()?20:10),zot(y)&&(y=16),zot(w)&&(w=10),zot(C)&&(C=5),zot(x)&&(x=!0),zot(k)&&(k=!1),t.mouseChildren=!1;var V=t.getConcatenatedMatrix().decompose();if(void 0===zimDefaultFrame)if("undefined"==typeof frame||null==frame){if(!t.stage)return zon&&zog("ZIM transform() - please add object to stage before calling transform()"),t;frame=zimDefaultFrame={stage:q,canvas:q.canvas}}else zimDefaultFrame=frame;else"undefined"!=typeof frame&&null!=frame||(frame=zimDefaultFrame);zot(t.stage)&&t.added(function(){t.transformControls&&t.transformControls.resize()});var q=t.stage?t.stage:frame.stage;zot(frame.eventRemove)&&(q.enableMouseOver(),frame.ctrlKey=!1,frame.shiftKey=!1,window.addEventListener("keydown",function(e){frame.altKey=e.altKey,frame.ctrlKey=e.ctrlKey}),window.addEventListener("keyup",function(e){frame.altKey=e.altKey,frame.ctrlKey=e.ctrlKey}));var K=t.getBounds(),U=new e.Shape({style:!1}),Z=new e.Shape({style:!1}),Q=new e.Shape({style:!1});Z.mouseEnabled=!1,Q.controlType="reg";var J,$,ee,te,oe,ne,re,ie=t.parent,ae=U.graphics,le=Z.graphics,se=Q.graphics,ce=new e.Container({style:!1});ce.type="TransformControls";var ue,de,he,ge,pe,fe=new e.Container({style:!1}),me=new e.Container({style:!1}),ze=new e.Container({style:!1}),ve=new e.Container({style:!1});if(zot(t.zimMaskDynamic)||t.zimMaskApply(),v){var be=new e.Container({style:!1}),ye=new e.Container({style:!1});I(be),I(ye);var we={"nw-resize":45,"ne-resize":-45,"n-resize":90,"e-resize":0}}S();for(var Ce=ue,xe=["nw-resize","ne-resize","nw-resize","ne-resize"],ke=[2,3,0,1],Te=0;Te<4;Te++)h?((Me=new e.Rectangle(b,b,"#e472c4","#333",2,null,null,null,!1)).centerReg(fe),x&&Me.cache(-1,-1,b+2,b+2)):((Me=new e.Rectangle(b,b,"rgba(0,0,0,0)","rgba(0,0,0,0)",2,null,null,null,!1)).centerReg(fe),Me.expand(0)),Me.rotation=ue,ne=v?"none":xe[Te],Me.drag({overCursor:ne,dragCursor:ne,onTop:!1}),Me.controlType="corner",Me.cu=xe[Te];for(Te=0;Te<ke.length;Te++)fe.getChildAt(Te).op=fe.getChildAt(ke[Te]);var Ae=["n-resize","e-resize","n-resize","e-resize"];for(ke=[1,1,0,0],Te=0;Te<4;Te++){var Pe=Te%2==0?t.width/2:b,Be=Te%2==0?b:t.height/2;u?((Me=new e.Rectangle(b,b,"#AAA","#333",2,null,null,null,!1)).centerReg(Te%2==0?ze:me),x&&Me.cache(-1,-1,b+2,b+2)):((Me=new e.Rectangle(Pe,Be,"rgba(0,0,0,0)",null,null,null,null,null,!1)).centerReg(Te%2==0?ze:me),Me.expand(0)),Me.rotation=ue,ne=v?"none":Ae[Te],Me.drag({overCursor:ne,dragCursor:ne,onTop:!1}),Me.controlType="side",Me.cu=Ae[Te]}for(Te=0;Te<ke.length;Te++){var Ie=Te%2==0?ze:me;Ie.getChildAt(Math.floor(Te/2)).op=Ie.getChildAt(ke[Te])}var Se=["ne-resize","nw-resize","ne-resize","nw-resize"];for(Te=0;Te<4;Te++){var Me;d?((Me=new e.Circle(b,"#e472c4",null,null,null,null,null,!1)).addTo(ve),x&&Me.cache(-b,-b,2*b,2*b)):((Me=new e.Circle(b,"rgba(0,0,0,0)",null,null,null,null,null,!1)).addTo(ve),Me.expand(0)),ne=v?"none":Se[Te],Me.drag({overCursor:ne,dragCursor:ne,onTop:!1}),Me.controlType="rotate",Me.cu=Se[Te]}var Ee=1.8;ve.alpha=.5,M(),E();var Oe=new e.Shape(1e3,1e3,null,null,null,!1);O(),ce.on("dblclick",function(e){frame.ctrlKey&&t.transformControls.visible&&(t.scaleX=1,t.scaleY=1,t.rotation=0,E(),O(),q.update()),Y(e,!0)});var je,Le,De,Ye,Xe,Re,_e,We,Fe,Ge,He,Ne=ce.on("mousedown",j),Ve=t.on("mousedown",j),qe=q.on("stagemousedown",function(e){var o=q.getObjectUnderPoint(e.stageX,e.stageY,1),n=o&&o.parent&&o.parent.layer&&o.parent.layer==t;!t.transformControls.visible||o&&(ce.contains(o)||n)||(t.dispatchEvent("transformhide"),t.transformControls.hide())});l||(ce.off("mousedown",Ne),t.off("mousedown",Ve),q.off("stagemousedown",qe));var Ke,Ue,Ze,Qe=!1,Je=!1,$e=t.cursor,et=new e.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,!1).expand(20);if(v){et.mouseEnabled=!1,et.mouseChildren=!1,et.addChild(ye),fe.on("mouseover",R),fe.on("mouseout",_),me.on("mouseover",R),me.on("mouseout",_),ze.on("mouseover",R),ze.on("mouseout",_),ve.on("mouseover",R),ve.on("mouseout",_);var tt=new e.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,!1).expand(20);tt.cursor="none"}fe.on("mousedown",L),fe.on("pressmove",D),fe.on("pressup",Y),me.on("mousedown",L),me.on("pressmove",D),me.on("pressup",Y),ze.on("mousedown",L),ze.on("pressmove",D),ze.on("pressup",Y),ve.on("mousedown",L),ve.on("pressmove",function(o){var n=180*Math.atan2(o.stageY/q.scaleY-He,o.stageX/q.scaleX-Ge)/Math.PI;if(frame.shiftKey?t.rot(45*Math.round((De+(n-Ye)*e.sign(de)*e.sign(t.scaleX))/45)):t.rot(De+(n-Ye)*e.sign(de)*e.sign(t.scaleX)),E(),et.x=o.stageX/q.scaleX,et.y=o.stageY/q.scaleY,v&&(t.getConcatenatedMatrix().decompose(V),V.rotation||(V.rotation=0),ye.rotation=V.rotation*e.sign(de*he)*e.sign(t.scaleX*t.scaleY)+we[o.target.cu]+Ce,"side"!=o.target.controlType&&de*he<0&&(ye.rotation+=90),tt.x=o.stageX/q.scaleX,tt.y=o.stageY/q.scaleY),E(),t.transformControls.events){X(o,o.target.controlType,null,!1)}}),ve.on("pressup",Y),Q.drag(),Q.on("mousedown",W),Q.on("pressup",function(o){if(!frame.ctrlKey){for(var n=0;n<re.length;n++)if(e.dist(Q.x,Q.y,re[n].x,re[n].y)<w){Q.x=re[n].x,Q.y=re[n].y;break}e.dist(Q.x,Q.y,pMid.x,pMid.y)<w&&(Q.x=pMid.x,Q.y=pMid.y)}var r=t.rotation,i=t.globalToLocal(Q.x,Q.y);if(ie==q)var a=new e.Point(Q.x,Q.y);else a=ie.globalToLocal(Q.x,Q.y);t.reg(i.x,i.y),t.rotation=0,t.x=t.x+a.x-t.x,t.y=t.y+a.y-t.y,t.rotation=r,E(),O(),Y(o),q.update()});var ot=!0;ne=v?"none":"move",Oe.drag({overCursor:ne,dragCursor:ne,onTop:!1}),Oe.controlType="move",v&&(Oe.on("mouseover",function(e){!Je&&v&&ot&&(be.addTo(ce).pos({x:e.stageX/q.scaleX,y:e.stageY/q.scaleY,reg:!0}),q.update(),Ue&&q.off("stagemousemove",Ue),Ue=q.on("stagemousemove",function(e){be.x=e.stageX/q.scaleX,be.y=e.stageY/q.scaleY,q.update()}))}),Oe.on("mouseout",function(){q.off("stagemousemove",Ue),Je||(be.removeFrom(ce),q.update())})),Oe.on("mousedown",W),Oe.on("pressmove",function(o){if(t.transformControls.visible){if(ie==q)var n=new e.Point(Oe.x,Oe.y);else n=ie.globalToLocal(Oe.x,Oe.y);t.x=n.x,t.y=n.y,E(),t.transformControls.events&&X(o,"move")}}),Oe.on("pressup",function(e){t.transformControls.visible&&Y(e)});var nt,rt=q.on("stagemouseup",function(){Je=!1,Oe.mouseEnabled=!0,ot||(Ze=new createjs.Event("transformed"),t.x!=nt.x||t.y!=nt.y?Ze.transformType="move":Ze.transformType="select",Ze.pressup=!0,t.dispatchEvent(Ze)),ot=!0,Oe.visible=!0,Qe&&!frame.ctrlKey&&1<C&&(t.rotation=Math.round(t.rotation/C)*C,E()),O(),Oe.mouseEnabled=!0,Qe=!1,q.update()});G();var it,at=t.on("mousedown",G);ce.on("mousedown",G),ce.addChild(U),o&&ce.addChild(Oe),i&&ce.addChild(fe),n&&ce.addChild(me),r&&ce.addChild(ze),a&&ce.addChild(ve),ce.addChild(Q),o&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),it=t.on("pressmove",function(){E(),O(),M()}));var lt=l;return t.transformControls={visible:s,events:k,ghost:!zot(T),ghostEnabled:!zot(T),show:function(){return c&&W(),F(),t.toggled=!0,t.transformControls.visible=!0,Z.parent&&Z.removeFrom(),q.update(),t},hide:function(){if(t.transformControls.ghost)var e=q.getChildIndex(ce);return q.removeChild(ce),t.transformControls.ghost&&t.transformControls.ghostEnabled&&q.addChildAt(Z,e),t.toggled=!1,t.transformControls.visible=!1,v&&(Ke&&q.off("stagemousemove",Ke),Ue&&q.off("stagemousemove",Ue),Je=!1,et.removeFrom(q),tt.removeFrom(q)),o||(t.cursor=$e),q.update(),t},remove:function(e){e||t.transformControls.hide(),toggle=!1,o&&(t.noDrag(),t.off("pressmove",it))},add:function(e){e||t.transformControls.show(),toggle=lt,o&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),it=t.on("pressmove",it))},allowToggleOn:function(){toggle=lt=!0,Ne=ce.on("mousedown",Ne),Ve=t.on("mousedown",Ve),qe=q.on("stagemousedown",qe)},allowToggleOff:function(){toggle=lt=!1,ce.off("mousedown",Ne),t.off("mousedown",Ve),q.off("stagemousedown",qe)},disable:function(){ce.mouseChildren=!1,ce.mouseEnabled=!1,o&&(t.noDrag(),t.off("pressmove",it))},enable:function(){ce.mouseChildren=!0,ce.mouseEnabled=!0,o&&(t.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),it=t.on("pressmove",it))},recordData:function(e){var o={type:t.type,index:ie.getChildIndex(t),x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation,skewX:t.skewX,skewY:t.skewY,regX:t.regX,regY:t.regY,controls:t.transformControls.visible};return e?JSON.stringify(o):o},setData:function(e,o){if(!zot(e)){o&&(e=JSON.parse(e)),e.controls,delete e.controls;var n=e.index;for(var r in zot(n)&&(n=0),delete e.index,e)t[r]=e[r];return timeout(90,function(){E(),O(),M(),ie.setChildIndex(t,n),t.transformControls.visible&&"Layer"!=t.type?t.transformControls.show():t.transformControls.hide(),!t.transformControls.ghost||t.transformControls.ghostEnabled||t.transformControls.visible||q.addChild(Z)}),t}},hideGhost:function(){t.transformControls.ghost=!1,Z.removeFrom()},showGhost:function(){if(t.transformControls.ghost=!0,t.transformControls.ghostEnabled&&!t.transformControls.visible){for(var e=ie;e.parent&&e.parent!=q;)e=e.parent;Z.stage?q.setChildIndex(Z,q.getChildIndex(e)+1):q.addChildAt(Z,q.getChildIndex(e)+1)}},addGhost:function(){0<A?(t.transformControls.ghostEnabled=!0,t.transformControls.showGhost()):zon&&zog("ZIM transform() - ghostWidth must be > 0 when making transform")},removeGhost:function(){t.transformControls.ghostEnabled=!1,t.transformControls.hideGhost()},resize:function(e){if(ie=t.parent,E(),O(),M(),s&&t.transformControls.show(),e){var o=new createjs.Event("transformed");o.pressup=!0,o.transformType="resize",t.dispatchEvent(o)}return t},dispose:function(){t.transformControls.hide(),toggle=!1,o&&(t.noDrag(),t.off("pressmove",it)),ce.removeAllEventListeners(),Ve&&t.off("mousedown",Ve),Ne&&t.off("mousedown",Ne),qe&&q.off("stagemousedown",qe),Ke&&q.off("stagemousemove",Ke),Ue&&q.off("stagemousemove",Ue),rt&&q.off("stagemouseup",rt),at&&t.off("mousedown",at),it&&t.off("pressmove",it),ce=et=tt=null,t.transformControls=null},controls:ce,scaleControls:fe,stretchXControls:me,stretchYControls:ze,rotateControls:ve},t.toggle=function(e){return!0===e?t.transformControls.show():!1===e?t.transformControls.hide():t.transformControls.visible?t.transformControls.hide():t.transformControls.show(),t},t.transformControls.ghost&&(t.transformControls.toggleGhost=function(e){return!0===e?t.transformControls.showGhost():!1===e?t.transformControls.hideGhost():t.transformControls.visible?t.transformControls.hideGhost():t.transformControls.showGhost(),t}),s?t.transformControls.show():!B&&t.transformControls.ghost&&t.transformControls.showGhost(),t},e.gesture=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m){function z(){t.zimTouch.pair=[],e.loop(t.zimTouch.pointers,function(e,o,n){o.startX=o.x,o.startY=o.y,n<=1&&t.zimTouch.pair.push(o)}),t.zimTouch.startX=t.x,t.zimTouch.startY=t.y,t.zimTouch.startSX=t.scaleX,t.zimTouch.startSY=t.scaleY,t.zimTouch.startR=t.rotation}function v(){var e=t.localToGlobal(t.regX,t.regY);if(f)var o=t.parent.localToGlobal(t.x-t.width/2,t.y-t.height/2),n=t.parent.localToGlobal(t.x+t.width/2,t.y+t.height/2),r={x:o.x,y:o.y,width:n.x-o.x,height:n.y-o.y};else r=t.boundsToGlobal();var i={x:t.zimTouch.boundaryStartX+e.x-r.x,y:t.zimTouch.boundaryStartY+e.y-r.y,width:t.zimTouch.boundaryStartW-r.width,height:t.zimTouch.boundaryStartH-r.height};t.gestureBoundary(i,!1)}var b;if(b=zob(e.gesture,arguments,"obj, move, scale, rotate, boundary, minScale, maxScale, snapRotate, localBounds, slide, slideEffect, regControl, onTop, surround, circularBounds, rect"))return b;if(z_d("34.5"),!zot(t)&&t.on){var y,w;if(zot(o)&&(o=!0),zot(n)&&(n=!0),zot(r)&&(r=!0),zot(c)&&(c=!1),zot(s)&&(s=1),zot(u)&&(u=!1),zot(d)&&(d=5),zot(h)&&(h=!1),zot(g)&&(g=!0),zot(p)&&(p=!1),p&&r&&(p=m=null,zon&&zog("ZIM Gesture() - does not support surround when rotate is true")),zot(f)&&(f=!1),zot(i)&&!zot(m)&&(i=m),zot(t.zimMaskDynamic)||t.zimMaskApply(),!t.zimTouch){var C,x,k,T,A,P,B,I,S=new e.Damp(t.scaleX,.05),M=new e.Damp(t.scaleY,.05),E=t.scaleX/t.scaleY;if(t.zimTouch={move:o,scale:n,rotate:r,pointers:{},checkBounds:function(e,o){if(t.zimTouch.boundary){var n=t.zimTouch.boundary,r=t.parent.localToLocal(e,o,t.parent);o=p?(e=Math.min(n.x,Math.max(n.x+n.width,r.x)),Math.min(n.y,Math.max(n.y+n.height,r.y))):(e=Math.max(n.x,Math.min(n.x+n.width,r.x)),Math.max(n.y,Math.min(n.y+n.height,r.y))),e=(r=t.parent.globalToLocal(e,o)).x,o=r.y}return{x:e,y:o}}},i){t.zimTouch.boundary=i,c&&(t.zimTouch.boundary=e.boundsToGlobal(t.parent,i)),t.zimTouch.boundaryStartX=t.zimTouch.boundary.x,t.zimTouch.boundaryStartY=t.zimTouch.boundary.y,t.zimTouch.boundaryStartW=t.zimTouch.boundary.width,t.zimTouch.boundaryStartH=t.zimTouch.boundary.height;var O=t.zimTouch.checkBounds(t.x,t.y);t.x=O.x,t.y=O.y}u&&(slideSlice=10,slideTotal=5,w=0,y=[],t.zimTouch.slideInterval=e.interval(slideSlice,function(){y[w++%slideTotal]=[t.x,t.y]}),t.zimTouch.slideInterval.pause(),t.animate({x:t.x,y:t.y},10,"quadOut")),t.zimTouch.mousedown=t.on("mousedown",function(o){zot(I)?I=1:I++;var n=t.stage;if(g){var r=t.parent.numChildren-1;"Keyboard"==t.parent.getChildAt(r).type&&r--,t.parent.setChildIndex(t,r),t.ZIMoutlineShape&&t.outline()}h||(B=null,x=t.scaleX,k=t.scaleY,T=t.rotation,A=t.regX,P=t.regY,t.reg(0,0),C=t.getMatrix(),t.regX=A,t.regY=P);var i="id"+Math.abs(o.pointerID+1),a=t.parent.globalToLocal(o.stageX/n.scaleX,o.stageY/n.scaleY);t.zimTouch.pointers[i]={startX:a.x,startY:a.y,x:a.x,y:a.y},(t.zimTouch.move||t.zimTouch.rotate)&&(t.zimTouch.total=0,e.loop(t.zimTouch.pointers,function(e){t.zimTouch.total++})),u&&1==t.zimTouch.total&&t.zimTouch.slideInterval.pause(!1),z()}),t.zimTouch.pressmove=t.on("pressmove",function(o){var n=t.stage,r="id"+Math.abs(o.pointerID+1),i=t.parent.globalToLocal(o.stageX/n.scaleX,o.stageY/n.scaleY);t.zimTouch.pointers[r]&&(t.zimTouch.pointers[r].x=i.x,t.zimTouch.pointers[r].y=i.y);var s,c,u=0,d=0,g=0,p=0;e.loop(t.zimTouch.pointers,function(e,t){u+=t.x-t.startX,d+=t.y-t.startY,g+=t.x,p+=t.y}),s=u/t.zimTouch.total,c=d/t.zimTouch.total,u=t.zimTouch.startX+s,d=t.zimTouch.startY+c,g/=t.zimTouch.total,p/=t.zimTouch.total;var f={x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation};if(t.zimTouch.move){var m=t.zimTouch.checkBounds(u,d);f.x=m.x,f.y=m.y}if(2==t.zimTouch.pair.length){var z=t.zimTouch.pair[0],v=t.zimTouch.pair[1];if(t.zimTouch.scale){var b=Math.sqrt(Math.pow(v.startX-z.startX,2)+Math.pow(v.startY-z.startY,2)),y=Math.sqrt(Math.pow(v.x-z.x,2)+Math.pow(v.y-z.y,2)),w=t.zimTouch.startSX+(y/b-1),I=t.zimTouch.startSY+(y/b-1);f.scaleX=w,f.scaleY=I,f.scaleX=S.convert(w),f.scaleY=M.convert(I);var O=!zot(a)&&Math.min(w,I)<a,j=!zot(l)&&Math.max(w,I)>l;(O||j)&&(O?1<E?(f.scaleY=a,f.scaleX=a*E):(f.scaleX=a,f.scaleY=a/E):j&&(1<E?(f.scaleX=l,f.scaleY=l/E):(f.scaleY=l,f.scaleX=l*E)),S.immediate(f.scaleX),M.immediate(f.scaleY))}if(t.zimTouch.rotate){var L=Math.atan2(z.startY-v.startY,z.startX-v.startX)*(180/Math.PI),D=Math.atan2(z.y-v.y,z.x-v.x)*(180/Math.PI)-L;f.rotation=t.zimTouch.startR+D}if(h)t.scaleX=f.scaleX,t.scaleY=f.scaleY,t.rotation=f.rotation,t.zimTouch.move&&(t.x=f.x,t.y=f.y);else{t.reg(0,0);var Y=t.parent.localToGlobal(g,p);g=Y.x,p=Y.y;var X=zot(B)?t.globalToLocal(g,p):t.globalToLocal(B.x,B.y);C.clone().translate(X.x,X.y).rotate(f.rotation-T).scale(f.scaleX/x,f.scaleY/k).translate(-X.x,-X.y).decompose(t),t.zimTouch.move&&(t.x+=s,t.y+=c),B=t.localToGlobal(X.x,X.y),t.reg(A,P)}t.zimTouch.scale&&t.dispatchEvent("scale"),t.zimTouch.rotate&&t.dispatchEvent("rotate"),t.zimTouch.move&&t.dispatchEvent("move")}else t.x=f.x,t.y=f.y,t.zimTouch.move&&t.dispatchEvent("move");"Tag"!=t.type&&"TextArea"!=t.type&&"Loader"!=t.type||t.resize(),t.ZIMoutlineShape&&t.outline(),t.getStage&&t.stage&&t.stage.update()}),t.on("mousedown",function(){var e=1;t.stage.on("stagemousedown",function(){e++}),t.stage.on("stagemouseup",function(){0==--e&&setTimeout(function(){t.zimTouch&&(t.zimTouch.total=0),t.zimTouch&&(t.zimTouch.pointers={}),I=null},50)})},null,!0),t.zimTouch.pressup=t.on("pressup",function(e){var o="id"+Math.abs(e.pointerID+1);if(delete t.zimTouch.pointers[o],(t.zimTouch.move||t.zimTouch.rotate)&&t.zimTouch.total--,r&&!zot(s)&&0==t.zimTouch.total&&(0<s?t.rotation=Math.round(t.rotation/s)*s:0==s&&(t.rotation=Math.round(t.rotation))),u&&0==t.zimTouch.total&&1==I){t.zimTouch.slideInterval.pause();var n=y[(w+1)%y.length],i=y[w%y.length],a=t.x+(n[0]-i[0])*d,l=t.y+(n[1]-i[1])*d,c=t.zimTouch.checkBounds(a,l),h=slideTotal*slideSlice*d*Math.min((t.x-c.x)/(t.x-a)||1,(t.y-c.y)/(t.y-l)||1);t.animate({x:c.x,y:c.y},h,"quadOut",function(){t.dispatchEvent("slidestop")})}0==t.zimTouch.total&&(I=null),t.getStage&&t.stage&&t.stage.update(),z()}),i&&(v(),t.on("move",v))}return t}},e.noGesture=function(t,o,n,r){var i;return(i=zob(e.noGesture,arguments,"obj, move, scale, rotate"))?i:(z_d("34.6"),!zot(t)&&t.on&&t.zimTouch?(zot(o)&&(o=!0),zot(n)&&(n=!0),zot(r)&&(r=!0),t.zimTouch.move=!o,t.zimTouch.scale=!n,t.zimTouch.rotate=!r,t.zimTouch.move||t.zimTouch.scale||t.zimTouch.rotate||(t.off("mousedown",t.zimTouch.mousedown),t.off("pressmove",t.zimTouch.pressmove),t.off("pressup",t.zimTouch.pressup),delete t.zimTouch),t):void 0)},e.gestureBoundary=function(t,o,n){if(z_d("34.7"),!zot(t)&&t.on&&!zot(o)&&t.zimTouch){t.zimTouch.localBounds&&t.parent?t.zimTouch.boundary=e.boundsToGlobal(t.parent,o):t.zimTouch.boundary=o,zot(n)&&(n=!0),n&&(t.zimTouch.boundaryStartX=o.x,t.zimTouch.boundaryStartY=o.y,t.zimTouch.boundaryStartW=o.width,t.zimTouch.boundaryStartH=o.height);var r=t.zimTouch.checkBounds(t.x,t.y);return t.x=r.x,t.y=r.y,t}},e.addPhysics=function(t,o,n,r,i,a,l,u,d,h,g,p){var f;if(f=zob(e.addPhysics,arguments,"obj, dynamic, contract, shape, friction, linear, angular, density, restitution, maskBits, categoryBits, physics"))return f;if(z_d("34.8"),zot(p)){if("undefined"==typeof zimPhysics)return zon&&zog("ZIM Physics module must be imported"),t;zot(zimDefaultPhysics)&&(zimDefaultPhysics=new e.Physics),p=zimDefaultPhysics}t.physics=p;var m="rectangle";return"Circle"==t.type||"Dial"==t.type?m="circle":"Triangle"==t.type&&(m="triangle"),zot(r)&&(r=m),function(t,o,n,r,i,a,l,u,d,h,g){function p(){zimContactListener=new b2ContactListener,s=new e.Dictionary(!0),c=new e.Dictionary(!0),zimContactListener.BeginContact=function(e){var t=s.at(e.m_fixtureB.GetBody());t?t(e.m_fixtureA.GetBody().zimObj,e.m_fixtureA.GetBody()):(t=s.at(e.m_fixtureA.GetBody()))&&t(e.m_fixtureB.GetBody().zimObj,e.m_fixtureB.GetBody())},zimContactListener.EndContact=function(e){var t=c.at(e.m_fixtureB.GetBody());t?t(e.m_fixtureA.GetBody().zimObj,e.m_fixtureA.GetBody()):(t=c.at(e.m_fixtureB.GetBody().zimObj,e.m_fixtureB.GetBody()))&&t(e.m_fixtureB.GetBody())},t.physics.world.SetContactListener(zimContactListener)}z_d("69.97"),zot(n)&&(n=0),"rectangle"==r?t.body=t.physics.makeRectangle(t.width-n,t.height-n,o,i,l,u,d,h,g,a):"circle"==r?t.body=t.physics.makeCircle(t.width/2-n,o,i,l,u,d,h,g,a):"triangle"==r&&(zot(t.a)&&(t.a=t.width,t.b=t.c=Math.sqrt(Math.pow(t.a/2,2)+Math.pow(t.height,2))),t.body=t.physics.makeTriangle(t.a-n,t.b-n,t.c-n,o,i,l,u,d,h,g,a)),t.body.x=t.x,t.body.y=t.y,t.body.rotation=t.rotation,t.physics.addMap(t.body,t),t.impulse=function(e,o,n,r){zot(e)&&(e=0),zot(o)&&(o=0);var i=t.body.GetWorldCenter();return zot(n)&&(n=i.x*t.physics.scale),zot(r)&&(r=i.y*t.physics.scale),t.body.ApplyImpulse(new b2Vec2(e,o),new b2Vec2(n/t.physics.scale,r/t.physics.scale)),t},t.force=function(e,o,n,r){zot(e)&&(e=0),zot(o)&&(o=0);var i=t.body.GetWorldCenter();return zot(n)&&(n=i.x*t.physics.scale),zot(r)&&(r=i.y*t.physics.scale),t.body.ApplyForce(new b2Vec2(e,o),new b2Vec2(n/t.physics.scale,r/t.physics.scale)),t},t.spin=function(e){return zot(e)&&(e=10),t.body.ApplyTorque(1e3*e),t},t.torque=function(e){return zot(e)&&(e=10),t.body.ApplyTorque(e),t},t.follow=function(e,o,n,r,i,a,l,s,c,u,d,h){var g;return(g=zob(t.follow,arguments,"damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, borderOriginal"))?g:(t.physics.follow(t,e,o,n,r,i,a,l,s,c,u,d,h),t)},t.noFollow=function(){return t.physics.follow(null),t},t.control=function(e,o,n,r,i){var a;return(a=zob(t.control,arguments,"type, speed, speedY, horizontal, vertical"))?a:(t.physics.control(t,e,o,n,r,i),t)},t.noControl=function(){return t.physics.noControl(t),t},t.sleep=function(){return zog(t.body),t.body.SetAwake(!1),t},t.wake=function(){return t.body.SetAwake(!0),t},t.contact=function(e){return zimContactListener||p(),s.add(t.body,e),t},t.noContact=function(){return s.remove(t.body),t},t.contactEnd=function(e){return zimContactListener||p(),c.add(t.body,e),t},t.noContactEnd=function(){return c.remove(t.body),t},Object.defineProperty(t,"dynamic",{get:function(){return 2==t.body.GetType()},set:function(e){t.body.SetType(1==e?2:0)}})}(t,o,n,r,i,a,l,u,d,h,g),t},e.removePhysics=function(e){return z_d("34.85"),zot(e.physics)||(e==e.physics.followObj&&e.physics.follow(null),e.physics.remove(e.body),e.follow=e.noFollow=e.control=e.noControl=e.sleep=e.wake=null,e.physics=e.impulse=e.force=e.spin=e.torque=null),e},e.hitTestPoint=function(e,t,o,n){if(z_d("35"),!e.stage||zot(t)||zot(o))return!1;var r=e.stage;if(!zot(e)&&e.globalToLocal){if(zot(n)&&(n=!0),n){var i=e.getBounds();if(i){var a=e.globalToLocal(t,o);if(a.x>i.x+i.width||a.x<i.x)return!1;if(a.y>i.y+i.height||a.y<i.y)return!1}}var l={x:t,y:o};return l=e.image||e.spriteSheet?e.globalToLocal(l.x,l.y):e.globalToLocal(l.x*r.scaleX,l.y*r.scaleY),e.hitTest(l.x,l.y)}},e.hitTestReg=function(e,t,o){if(z_d("36"),!e.stage||!t.stage)return!1;var n=e.stage;if(!zot(e)&&!zot(t)&&e.localToLocal&&t.localToLocal){zot(o)&&(o=!0);var r=t.localToGlobal(t.regX,t.regY),i=e.getBounds();if(o&&i){var a=e.globalToLocal(r.x,r.y);if(a.x>i.x+i.width||a.x<i.x)return!1;if(a.y>i.y+i.height||a.y<i.y)return!1}return r=e.image||e.spriteSheet||"Shape"==e.type?e.globalToLocal(r.x,r.y):e.globalToLocal(r.x*n.scaleX,r.y*n.scaleY),e.hitTest(r.x,r.y)}},e.hitTestRect=function(t,o,n,r){function i(e){if(e=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(e.x,e.y):t.globalToLocal(e.x*a.scaleX,e.y*a.scaleY),t.hitTest(e.x,e.y))return!0}if(z_d("37"),!t.stage||!o.stage)return!1;var a=t.stage;if(!zot(t)&&!zot(o)&&t.hitTest&&o.getBounds){zot(n)&&(n=0),zot(r)&&(r=!0);var l=o.getBounds();if(l){if(r&&t.getBounds()&&!e.hitTestBounds(t,o))return!1;var s,c,u=l.x+l.width/2,d=l.y+l.height/2;if(i(o.localToGlobal(u,d)))return!0;for(var h=0;h<=n;h++){if(s=l.width*(h+1)/(n+1),c=l.height*(h+1)/(n+1),i(o.localToGlobal(l.x+s,l.y)))return!0;if(i(o.localToGlobal(l.x+l.width,l.y+c)))return!0;if(i(o.localToGlobal(l.x+l.width-s,l.y+l.height)))return!0;if(i(o.localToGlobal(l.x,l.y+l.height-c)))return!0}}else zog("zim methods - hitTestRect():\n please setBounds() on param b object")}},e.hitTestCircle=function(t,o,n,r){function i(e){if(e=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(e.x,e.y):t.globalToLocal(e.x*stage.scaleX,e.y*stage.scaleY),t.hitTest(e.x,e.y))return!0}if(z_d("38"),t.stage&&o.stage&&(stage=t.stage,!zot(t)&&!zot(o)&&t.hitTest&&o.getBounds)){zot(n)&&(n=8),zot(r)&&(r=!0);var a=o.getBounds();if(a){var l=t.getBounds();if(r&&l&&!e.hitTestBounds(t,o))return!1;var s=a.x+a.width/2,c=a.y+a.height/2,u=o.localToGlobal(s,c);if(i(u))return!0;for(var d,h,g,p=(a.width+a.height)/2/2,f=0;f<n;f++)if(d=f/n*2*Math.PI,h=s+p*Math.cos(d),g=c+p*Math.sin(d),i(u=o.localToGlobal(h,g)))return!0}else zog("zim methods - hitTestCircle():\n please setBounds() on param b object")}},e.hitTestCircles=function(e,t,o){if(z_d("38.5"),e.stage&&t.stage){var n=e.stage;if(!zot(e)&&!zot(t)&&e.hitTest&&e.getBounds&&t.getBounds){var r=e.getBounds(),i=t.getBounds();if(r&&i){zot(o)&&(o=0);var a=e.localToGlobal(r.x+r.width/2,r.y+r.height/2),l=t.localToGlobal(i.x+i.width/2,i.y+i.height/2),s=e.getConcatenatedMatrix(),c=t.getConcatenatedMatrix();scale1X=Math.sqrt(s.a/n.scaleX*s.a/n.scaleX+s.c/n.scaleX*s.c/n.scaleX),scale1Y=Math.sqrt(s.b/n.scaleY*s.b/n.scaleY+s.d/n.scaleY*s.d/n.scaleY),scale2X=Math.sqrt(c.a/n.scaleX*c.a/n.scaleX+c.c/n.scaleX*c.c/n.scaleX),scale2Y=Math.sqrt(c.b/n.scaleY*c.b/n.scaleY+c.d/n.scaleY*c.d/n.scaleY);var u=Math.sqrt(Math.abs(Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2)));return r.width*Math.max(scale1X,scale1Y)/2+i.width*Math.max(scale2X,scale2Y)/2>=u-o}zog("zim methods - hitTestCircles():\n please setBounds() on both objects")}}},e.hitTestBounds=function(t,o,n,r){if(z_d("39"),t.stage&&o.stage&&!zot(t)&&!zot(o)&&t.getBounds&&o.getBounds){var i=!1;r&&r.graphics&&(i=!0);var a=t.getBounds(),l=o.getBounds();if(a&&l){zot(n)&&(n=0);var s=e.boundsToGlobal(t),c=e.boundsToGlobal(o);if(i){var u=r.graphics;u.c(),u.ss(1).s("blue"),u.r(s.x,s.y,s.width,s.height),u.s("green"),u.r(c.x,c.y,c.width,c.height),r.stage.update()}return e.rectIntersect(s,c,n)}zog("zim methods - hitTestBounds():\n please setBounds() on both objects")}},e.hitTestPath=function(t,o,n,r){if(z_d("37.5"),t.stage&&o.stage&&(stage=t.stage,!zot(t)&&!zot(o)&&t.hitTest&&("Squiggle"==o.type||"Bloob"==o.type))){var i=t.getBounds();zot(n)&&(n=2),zot(r)&&(r=!1);var a=o.interpolate(n,null,!0);if(r){o.hitPathPoints?o.hitPathPoints.removeAllChildren():o.hitPathPoints=(new Container).addTo(stage),o.hitPathPoints.top();for(var l=0;l<a.length;l++){var s=a[l];s=o.localToGlobal(s.x,s.y),new e.Circle(3).loc(s.x,s.y,o.hitPathPoints)}}if(i){var c=e.boundsAroundPoints(a);if(!e.rectIntersect(t.boundsToGlobal(i),o.boundsToGlobal(c)))return}for(l=0;l<a.length;l++)if(s=a[l],function(e){if(e=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(e.x,e.y):t.globalToLocal(e.x*stage.scaleX,e.y*stage.scaleY),t.hitTest(e.x,e.y))return!0}(s=o.localToGlobal(s.x,s.y)))return!0;return!1}},e.hitTestGrid=function(e,t,o,n,r,i,a,l,s,c,u,d,h){if(z_d("41"),!e.stage)return!1;if(!zot(e)&&!d){var g=e.globalToLocal(i,a);i=g.x,a=g.y}zot(l)&&(l=0),zot(s)&&(s=0),zot(c)&&(c=0),zot(u)&&(u=0);var p=(t+=c)/n,f=(o+=u)/r,m=Math.min(n-1,Math.max(0,Math.floor((i-l)/p))),z=Math.min(r-1,Math.max(0,Math.floor((a-s)/f)));if(!(p*(m+1)-c<i-l||i-l<p*m||f*(z+1)-u<a-s||a-s<f*z)){var v=z*n+m;return zot(h)||"index"==h?v:"col"==h?m:"row"==h?z:"array"==h?[v,m,z]:void 0}},e.animate=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,j,L,D,Y,X,R,_,W,F,G,H){function N(e,t,o){if("."==t.substr(0,1)){for(var n=t.split("."),r=e,i=1;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=o}else e[t]=o}function V(){var o;t.zimLastObj&&e.loop(t.zimLastObj,function(e){zot(t.zimTweenOriginals[e])||(t[e]=t.zimTweenOriginals[e],t.zimLastObj[e]=t.zimTweenOriginals[e])});for(var n,r=l,i=0,a=0;a<F.length;a++)if(!zot((o=F[a]).target)){zot(o.time)&&(o.time=Pe),r+=o.wait?o.wait:0,n=o.time,o.rewind&&(n=2*n+(o.rewindWait?o.rewindWait:0)),o.loop&&(n*=o.loopCount,n+=(o.loopCount-1)*(o.loopWait?o.loopWait:0)),zot(o.params)&&(o.params=o.target),Ie=o.target;var s={target:o.target,obj:e.copy(o.obj),seriesWait:i,wait:r,waitedCall:o.waitedCall,waitedParams:o.waitedParams,time:o.time,ease:o.ease,from:o.from,rewind:o.rewind,call:o.call,params:o.params,loop:o.loop,loopCount:o.loopCount,loopWait:o.loopWait,loopCall:o.loopCall,loopParams:o.loopParams,loopWaitCall:o.loopWaitCall,loopWaitParams:o.loopWaitParams,rewind:o.rewind,rewindWait:o.rewindWait,rewindCall:o.rewindCall,rewindParams:o.rewindParams,rewindWaitCall:o.rewindWaitCall,rewindWaitParams:o.rewindWaitParams,set:e.copy(o.masterSet),events:L,override:!1,id:j};a==F.length-1&&q(s),e.animate(s),i+=r+n,r=0}}function q(e){var o=e.call,n=e.params;B.loop&&(!B.count||Se<B.count)?e.call=function(){function e(){for(var e=0;e<Be.objects.length;e++)Be.objects[e].set&&Be.objects[e].set(Be.values[e]);B.loopWaitCall&&"function"==typeof B.loopWaitCall&&B.loopWaitCall(B.loopWaitParams),V()}B.loopCall&&"function"==typeof B.loopCall&&B.loopCall(B.loopParams),B.loopWait?(zot(t.zimTweens)&&(t.zimTweens={}),ke=t.zimTweens[j]=t.zimTween=createjs.Tween.get(t,{override:B.override}).wait(B.loopWait,!0).call(e)):e()}:e.call=function(){o&&"function"==typeof o&&o(n),zot(a)&&(a=Ie),i&&"function"==typeof i&&i(a),de(j)},Se++}function K(){Lt&&"function"==typeof Lt&&Lt(Xt)}function U(){Dt&&"function"==typeof Dt&&Dt(Rt)}function Z(e){te(),ke=t.zimTweens[j]=t.zimTween=createjs.Tween.get(t,{override:B.override}).wait(l,!0).call(function(){s&&"function"==typeof s&&s(zot(c)?t:c),Q(ke)}),e&&ae(e,ke)}function Q(e){var o=ce();t.set&&!E&&t.set(O),ke=t.zimTweens[j]=t.zimTween=createjs.Tween.get(t,B).to(F,Pe,createjs.Ease[r]).call(U).wait(Yt,!0).call(K).to(o,Pe,createjs.Ease[jt]).call(se).wait(It,!0).call(re),e&&ae(e,ke),ue()}function J(e){te(),ke=t.zimTweens[j]=t.zimTween=createjs.Tween.get(t,{override:B.override}).wait(l,!0).call(function(){s&&"function"==typeof s&&s(zot(c)?t:c),$(ke)}),e&&ae(e,ke)}function $(e){t.set&&!E&&t.set(O),ke=t.zimTweens[j]=t.zimTween=createjs.Tween.get(t,B).to(F,Pe,createjs.Ease[r]).call(se).wait(It,!0).call(re),e&&ae(e,ke),ue()}function ee(){zot(j)?j=e.makeID(10):(j=String(j),Ae=j),zot(t.zimIdSets)&&(t.zimIdSets={}),zot(t.zimIdSets[j])?zot(t.zimTweens[j])||(Te=j,j=e.makeID(10),t.zimIdSets[Te]=[Te],t.zimTweens[Te].zimIdSet=Te,t.zimIdSets[Te].push(j)):(Te=j,j=e.makeID(10),t.zimIdSets[Te].push(j))}function te(){var e;for(be in t.zimLastObj||(t.zimLastObj={}),F){if("string"==typeof F[be]){if("+"==F[be].substr(0,1))continue;e=t.zimLastObj&&!zot(t.zimLastObj[be])?t.zimLastObj[be]:t[be],F[be]=e+Number(F[be].replace(/\s/g,""))}t.zimLastObj[be]=z?t.zimTweenOriginals[be]:F[be]}for(be in O){if("string"==typeof O[be]){if("+"==O[be].substr(0,1))continue;e=t.zimLastObj&&!zot(t.zimLastObj[be])?t.zimLastObj[be]:t[be],O[be]=e+Number(O[be].replace(/\s/g,""))}t.zimLastObj[be]=z?t.zimTweenOriginals[be]:F[be]}}function oe(e,o){t.zimTween.startPaused=!1,Y?zot(t.zimTween.currentTime)||(t.zimTween.currentTime=t.zimTween.currentTime-t.zimTween.position+e*t.zimTween.duration/100):t.zimTween.setPosition(Math.round(e*t.zimTween.duration/100)),o&&He&&!1!==F.orient&&He.getCurvePoint&&(t.rotation=He.getCurvePoint(e/100,null,null,!0).angle+(kt||0)),wt&&void 0!==at&&(at=e),le()}function ne(e,t,o,n){He&&(!zot(e.percentComplete)||o&&!zot(o.percentComplete))&&zot((o=o||{}).pathRatio)&&(o.pathRatio=zot(o.percentComplete)?e.percentComplete/100:o.percentComplete/100);var r={};for(be in t)o&&!zot(o[be])?r[be]=o[be]:r[be]=e[be],n&&(e[be]=t[be]);return r}function re(){Bt&&"function"==typeof Bt&&Bt(Mt)}function ie(){St&&"function"==typeof St&&St(Ot)}function ae(e,t){t.zimIdSet=e.zimIdSet,t.zimObj=e.zimObj,t.zimTicker=e.zimTicker,t.zimExtraTickers=e.zimExtraTickers,t.requestID=e.requestID}function le(){if(t.parent&&!ke.passive&&!ke.startPaused){if(X&&z&&(ct<50&&50<t.percentComplete||50<ct&&t.percentComplete<50)&&(lt=t.percentComplete<50),ct=t.percentComplete,He){qe&&(ut=He.segmentPoints,ot=He.segmentRatios);var o=He.getCurvePoint(t.pathRatio,ot,ut);if(o){o.z;var n=t.parent.globalToLocal(o.x,o.y);t.x=n.x,t.y=n.y}}var r;if(Ue&&$e&&(Tt>t.x&&e.sign(t.scaleX)==e.sign(Ze)&&(t.scaleX*=-1),Tt<t.x&&e.sign(t.scaleX)!=e.sign(Ze)&&(t.scaleX*=-1)),Qe&&$e&&(At>t.y&&e.sign(t.scaleY)==e.sign(Je)&&(t.scaleY*=-1),At<t.y&&e.sign(t.scaleY)!=e.sign(Je)&&(t.scaleY*=-1)),Ke){var i;He==Ke?r=e.angle(Tt,At,t.x,t.y)+kt:(i=Ke.parent?Ke.parent.localToLocal(Ke.x,Ke.y,t.parent):t.parent.globalToLocal(Ke.x,Ke.y),r=e.angle(t.x,t.y,i.x,i.y)+kt),0!=r&&(t.paused&&!mt||(Ue&&0<Tt-t.x&&(r+=180),t.rotation=r==kt?t.rotation:r))}if(X){var a=t.x-Tt+t.y-At;2<Math.abs(a)&&(_t.push(sign(a)),_t.shift(),ke.forward=function(e){if(Array.isArray(e)){for(var t=0,o=0,n=e.length;o<n;o++)t+=e[o];return t}}(_t))}Tt=t.x,At=t.y}}function se(){if(t.paused&&"Sprite"!=t.type)i&&"function"==typeof i&&i(a);else{if(B.loop){if(!(0<Pt))return void ie();if(Se<Pt)return ie(),void Se++;z?t.set&&t.set(ce()):t.set&&t.set(F)}W?de(j):t.pauseAnimate(!0,j),H&&k&&"function"==typeof k&&k(T),i&&"function"==typeof i&&i(a)}}function ce(){var e={};for(var o in F)if(I)zot(O[o])||E?e[o]=t.style[o]:e[o]=O[o];else if(zot(O[o])||E)if("."==o.substr(0,1)){for(var n=o.split("."),r=t,i=1;i<n.length;i++)r=r[n[i]];e[o]=r}else e[o]=t[o];else e[o]=O[o];return e}function ue(){ke.zimObj=F,ke.zimTicker=Et,ke.zimPaused=Gt,Te&&(ke.zimIdSet=Te),Ae&&(zot(e.idSets)&&(e.idSets={}),zot(e.idSets[Ae])?e.idSets[Ae]=[t]:e.idSets[Ae].indexOf(t)<0&&e.idSets[Ae].push(t)),e.animatedObjects||(e.animatedObjects=new e.Dictionary(!0)),e.animatedObjects.add(t,!0)}function de(o){if(!zot(t.zimTweens)&&!zot(t.zimTweens[o])){t.zimX=null,t.zimY=null,function(o){if(t.zimBusy){for(var n in o)delete t.zimBusy[n];e.isEmpty(t.zimBusy)&&(t.zimBusy=null)}}(t.zimTweens[o].zimObj),t.zimTweens[o].paused=!0,he(o);var n=t.zimTweens[o].zimIdSet;if(!zot(n)&&t.zimIdSets){var r=t.zimIdSets[n];r&&r.splice(r.indexOf(o),1),r&&0==r.length&&(delete t.zimIdSets[n],e.isEmpty(t.zimIdSets)&&delete t.zimIdSets)}if("Pen"==t.type&&t.zimOnPath&&(t.stop(),t.zimOnPath=!1),delete t.zimTweens[o],e.isEmpty(t.zimTweens)&&t.stopAnimate(null,null,!1,!0),t.zimTweens&&t.zimTweens[o]||t.zimIdSets&&t.zimIdSets[n||o]);else if(e.idSets&&e.idSets[n||o]){e.idSets[n||o];var i=e.idSets[n||o].indexOf(t);0<=i&&e.idSets[n||o].splice(i,1),e.idSets[n||o].length<=0&&(delete e.idSets[n||o],e.isEmpty(e.idSets)&&delete e.idSets)}}}function he(o){!function(){var n=t.zimTweens[o].zimTicker;if(t.zimTweens[o].extraTickers)for(var r=0;r<t.zimTweens[o].extraTickers.length;r++)e.Ticker.remove(t.zimTweens[o].extraTickers[r]);n&&setTimeout(function(){n&&e.Ticker.remove(n),n=null},200)}()}function ge(o,n){var r=t.zimTweens[o];(r.paused=n)!=r.zimPaused&&((r.zimPaused=n)?r.zimTicker&&(r.zimAnimateTimeout=setTimeout(function(){e.Ticker.remove(r.zimTicker)},200)):(r.startPaused=!1,clearTimeout(r.zimAnimateTimeout),r.zimTicker&&(r.zimTicker=e.Ticker.add(r.zimTicker,it))))}function pe(e){for(var o=[],n=0;n<e.length;n++)t.zimIdSets&&!zot(t.zimIdSets[e[n]])?o=o.concat(t.zimIdSets[e[n]]):o.push(e[n]);return o}var fe;if(t&&(t.props||t.obj)&&(fe=zob(e.animate,arguments,"target, props, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, cjsProps, css, protect, override, from, set, id, events, sequenceTarget, dynamic, drag, clamp, startPaused, clean, obj, seriesWait, sequenceWait")))return fe;if(z_d("45"),0==e.ANIMATE||!window.zns&&!ANIMATE)return t;var me=Array.prototype.slice.call(arguments);if(zot(o)&&!zot(F)&&(o=F),zot(F=o))return zon&&zog("animate() - need props"),t;n=e.Pick.choose(n),r=e.Pick.choose(r),l=e.Pick.choose(l),d=e.Pick.choose(d),h=e.Pick.choose(h),z=e.Pick.choose(z),v=e.Pick.choose(v),A=e.Pick.choose(A),E=e.Pick.choose(E),O=e.Pick.choose(O);var ze={override:!zot(t)&&!zot(t.zimX)&&!zot(F.x)||!zot(t)&&!zot(t.zimY)&&!zot(F.y)};if(zot(u)||(ze.loop=u),zot(d)||(ze.count=d),zot(h)||(ze.loopWait=h),zot(g)||(ze.loopCall=g),zot(m)||(ze.loopWaitParams=m),zot(f)||(ze.loopWaitCall=f),zot(p)||(ze.loopParams=p),zot(z)||(ze.rewind=z),zot(v)||(ze.rewindWait=v),zot(b)||(ze.rewindCall=b),zot(y)||(ze.rewindParams=y),zot(w)||(ze.rewindWaitCall=w),zot(C)||(ze.rewindWaitParams=C),zot(o)||(ze=e.merge(ze,B)),B=ze,e.loop(F,function(e,t){if("string"==typeof e){var o=e.split(".");if(1<o.length&&"."!=e.substr(0,1)&&(F["."+e]=t,delete F[e],e="."+e),1<o.length&&"string"==typeof t){var n=t.substr(0,1);"+"!=n&&"-"!=n&&(F[e]="+"+t)}}}),zot(x)&&(x=0),0<x&&t.addChild){for(var ve=[],be=0;be<t.numChildren;be++)ve.push(t.getChildAt(be));D=t,t=ve}if(t instanceof Array){for(A&&t.reverse(),be=0;be<t.length;be++){var ye,we=t[be];if(E)for(var Ce in we.zimObj={},F)ye=e.Pick.choose(F[Ce]),we.zimObj[Ce]=we[Ce],we[Ce]=ye;else for(var Ce in we.zimObj={},F)we.zimObj[Ce]=e.Pick.choose(F[Ce]);var xe=be*x;0==be&&(xe=20),e.animate(we,we.zimObj,n,r,be==t.length-1?i:null,be==t.length-1?a:null,l,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,k,T,null,P,e.copy(B),I,S,M,null,O,j,L,D,Y,X,R,_,W,F,G,xe)}return D}var ke,Te,Ae,Pe=n;if(zot(Pe)&&(Pe=1e3),zot(r)&&(r="quadInOut"),zot(l)&&(l=0),zot(B)&&(B={override:!zot(t.zimX)&&!zot(F.x)||!zot(t.zimY)&&!zot(F.y)}),zot(a)&&(a=t),zot(P)&&(P=!0),zot(I)&&(I=!1),zot(S)&&(S=!1),zot(E)&&(E=!1),zot(O)&&(O={}),O.scale&&(O.scaleX=O.scaleY=O.scale,delete O.scale),zot(M)||(B.override=M),zot(X)&&(X=!1),zot(_)&&(_=!!X),zot(Y)&&(Y=!1),zot(R)&&(R=!0),zot(W)&&(W=!0),F instanceof Array){var Be,Ie,Se=1;return 0==F.length?this:(function(){var o=new e.Dictionary;Be=new e.Dictionary;for(var n=0;n<F.length;n++)if(Ge=F[n],t=t||Ge.target,zot(Ge.target)&&(Ge.target=t),zot(Ge.ease)&&(Ge.ease=r),!zot(Ge.target)){if(zot(Ge.props)&&!zot(Ge.obj)&&(Ge.props=Ge.obj),Ge.obj=Ge.props,Ge.loop&&(zot(Ge.loopCount)||Ge.loopCount<=0)&&(Ge.loopCount=0,F.splice(n+1,F.length)),zot(Ge.obj.scale)||(Ge.obj.scaleX=Ge.obj.scaleY=Ge.obj.scale,delete Ge.obj.scale),Ge.from){var i=o.at(Ge.target);if(i){if(Ge.set){var a=e.copy(Ge.obj),l=e.merge(i,Ge.set);Ge.obj=ne(Ge.target,Ge.obj,l),Ge.set=e.merge(Ge.set,a)}else Ge.set=e.copy(Ge.obj),Ge.obj=ne(Ge.target,Ge.obj,i);Ge.from=!1}else o.add(Ge.target,ne(Ge.target,Ge.obj,Ge.set))}var s={};for(var c in Ge.obj)s[c]=Ge.set&&Ge.set[c]?Ge.set[c]:Ge.target[c];zot(Be.at(Ge.target))&&Be.add(Ge.target,{});var u=e.merge(Be.at(Ge.target),s);Be.remove(Ge.target),Be.add(Ge.target,u),Ge.masterSet=e.copy(Ge.set)}zot(t.zimTweens)&&(t.zimTweens={})}(),ee(),V(),t)}if(F&&(F.x&&(t.zimX=!0),F.y&&(t.zimY=!0)),!zot(F.shape)&&F.shape.type==t.type&&("Bloob"==t.type||"Squiggle"==t.type)){var Me=t.pointObjects,Ee=F.shape.pointObjects;if(Me.length!=Ee.length)zon&&zog("ZIM animate() - shapes must be of same number of points"),delete F.shape;else{F.shape,delete F.shape;var Oe=zot(F.blobShift)?0:F.blobShift;delete F.blobShift;var je=!0;for(be=0;be<Me.length;be++){var Le=Me[be],De=Ee[(2e4*Me.length+be+Oe)%Me.length];for(qt=0;qt<4;qt++)if(1!=qt){var Ye=Le[qt],Xe=(De[qt],e.copy(me));Xe[0]=Ye,Xe[1]={x:De[qt].x,y:De[qt].y,rotation:De[qt].rotation},je&&(Xe[34]=!0,Ye.animateEvent&&Ye.off("animation",Ye.animateEvent),Ye.animateEvent=Ye.on("animation",function(){t.update()})),je=!1,e.animate.apply(e.animate,Xe)}}if(e.isEmpty(F))return t}}if(!zot(t)){var Re,_e,We;if("Sprite"!=t.type&&t.hasOwnProperty("paused")||Object.defineProperty(t,"paused",{get:function(){return t.animatePaused},set:function(e){t.animatePaused=e}}),t.endTween=function(){return t.stopAnimate(),e.loop(F,function(e){N(t,e,F[e])}),t.stage&&t.stage.update(),t},t.zimTweenOriginals={},e.loop(F,function(e,o){t.zimTweenOriginals[e]=function(e,t){if("."!=t.substr(0,1))return e[t];for(var o=t.split("."),n=e,r=1;r<o.length;r++)n=n[o[r]];return n}(t,e)}),t.resetTween=function(){return e.loop(t.zimTweenOriginals,function(e){N(t,e,t.zimTweenOriginals[e])}),t.stage&&t.stage.update(),t},t.replayTween=function(){return t.resetTween(),t.stopAnimate(),e.animate.apply(null,me),t},(F.path||Y)&&(t.requestedPercentComplete?Re=t.requestedPercentComplete:t.percentComplete&&(_e=t,We="percentComplete",!Object.getOwnPropertyDescriptor(_e,We).get)&&(Re=t.percentComplete),t.requestedPercentComplete=null,zot(Re)&&(Re=0),t.pathRatio=0),I&&(P=!1),zot(t.zimTweens)&&(t.zimTweens={}),!I)if(t.stage)it=t.stage;else{if(!zimDefaultFrame)return;it=zimDefaultFrame.stage}if(zot(F.scale)||(F.scaleX=F.scaleY=e.Pick.choose(F.scale),delete F.scale),t.setColorRange&&!zot(F.color)){var Fe=F.color;delete F.color,F.colorRange=1,t.setColorRange(t.color,Fe),t.colorRange=0}for(var Ge in F){if(!t.zimBusy)break;t.zimBusy[Ge]&&delete F[Ge]}if(!e.isEmpty(F)){"Sprite"!=t.type&&(t.paused=!1),(S||B.loop||B.rewind)&&(t.zimMouseEnabledCheck||(t.zimMouseEnabledCheck=!0,t.zimLastMouseEnabled=t.mouseEnabled),t.mouseEnabled=!1,setTimeout(function(){for(var e in t.zimBusy||(t.zimBusy={}),F)t.zimBusy[e]=!0;t.zimMouseEnabledCheck=null,t.mouseEnabled=t.zimLastMouseEnabled},70)),ee();var He,Ne=["extra","zoom","speed","layer","fade"],Ve={zoom:"Pen"==t.type?"size":"scale",speed:"percentSpeed",layer:"layer",fade:"alpha"};for(var be in F)0<=Ne.indexOf(be)||(F[be]=e.Pick.choose(F[be]));for(be in Ne.shift(),O)O[be]=e.Pick.choose(O[be]);for(be in B)"waitedCall"!=be&&"waitedParams"!=be&&"loopCall"!=be&&"rewindCall"!=be&&"loopWaitCall"!=be&&"rewindWaitCall"!=be&&(B[be]=e.Pick.choose(B[be]));if(t.getBounds&&zot(t.percentCompleteCheck)&&(t.percentCompleteCheck=!0,Object.defineProperty(t,"percentComplete",{get:function(){return this.zimTween&&this.zimTween.duration?this.zimTween.position/this.zimTween.duration*100:0},set:function(e){this.zimTween?oe(e,wt=!0):this.requestedPercentComplete=e}}),Object.defineProperty(t,"percentCompleteNoAngle",{get:function(){return this.zimTween&&this.zimTween.duration?this.zimTween.position/this.zimTween.duration*100:0},set:function(e){this.zimTween?oe(e,!1):this.requestedPercentComplete=e}})),!zot(F.path)&&F.path.segmentPoints){"Pen"==t.type&&(t.infinite=!0),t.zimOnPath=!0,zot(t.pathRatio)&&(t.pathRatio=0),zot(F.orient)&&(F.orient=F.path,F.startOrient=F.rotation);var qe=!(He=F.path).lockControls;delete F.path,F.pathRatio=1}E&&(F=ne(t,F,O,!0)),t.percentComplete;var Ke,Ue,Ze,Qe,Je,$e=!0,et=!0,tt=!0;if(zot(F.redirect)||(tt=F.redirect,delete F.redirect),He){var ot;qe||(ut=e.copy(He.segmentPoints),ot=e.copy(He.segmentRatios));var nt=He.getCurvePoint(t.pathRatio,ot,ut);if(t.parent&&nt){var rt=t.parent.globalToLocal(nt.x,nt.y);t.x=rt.x,t.y=rt.y}if(X){r="linear",t.cursor="pointer";var it,at=t.percentComplete,lt=(_||t.paused,!0),st=!0,ct=at,ut=copy(He.segmentPoints),dt=0;e.loop(ut,function(e){dt+=distanceAlongCurve(e)});var ht=Math.round(dt/ut.length/10),gt=He.interpolate(ht,null,!0),pt=(at||0)/100*dt,ft=pt;He.zimAnimateChanged=!1,e.copy(He.segmentRatios),t.zimAnimatePathChange=He.on("change",function(){He.zimAnimateChanged=!0}),t.zimAnimateDragDown=t.on("mousedown",function(o){(it=o.target.stage).mouseMoveOutside=!0,et=!($e=!1),setTimeout(function(){$e=!0},50),He.zimAnimateChanged&&(ut=e.copy(He.segmentPoints),dt=0,e.loop(ut,function(e){dt+=distanceAlongCurve(e)}),ht=Math.round(dt/ut.length/10),gt=He.interpolate(ht,null,!0),e.copy(He.segmentRatios)),He.zimAnimateChanged=!1,at=t.percentComplete,zt.immediate(at);var n=at;z&&(n=ke.position>ke.duration/2?2*(100-at):2*at),ft=pt=(n||0)/100*dt});var mt=!1;t.zimAnimateDragPress=t.on("pressmove",function(e){mt=!0,function(e){var t=He.globalToLocal(e.rawX/it.scaleX,e.rawY/it.scaleY),o=pt;"Bloob"==He.type&&(yt[0]<yt[4]?st=!0:yt[0]>yt[4]&&(st=!1),o<10&&!st?(ft=pt=o=dt-5,zt.immediate(ft/dt*100),yt=[dt-1,dt-2,dt,dt-3,dt-4]):dt-10<o&&st&&(ft=pt=o=5,zt.immediate(ft/dt*100),yt=[0,0,0,0,0]));var n=t.x,r=t.y,i=o;gt.sort(function(e,t){var o=e.x,a=e.y,l=e.r*dt,s=t.x,c=t.y,u=t.r*dt;return Math.sqrt(Math.pow(n-o,2)+Math.pow(r-a,2)+Math.pow(i-l,2))-Math.sqrt(Math.pow(n-s,2)+Math.pow(r-c,2)+Math.pow(i-u,2))}),ft=gt[0].r*dt,at=ft/dt*100,at=constrain(at,0,99.95),z&&(at/=2,ke.position>ke.duration/2&&(at=100-at))}(e)}),t.animateReturn=function(){z?(st=lt=!1,t.percentComplete<50&&(t.percentComplete=100-t.percentComplete),t.pauseAnimate(!1)):zon&&zog("ZIM animate() - animateReturn() needs rewind set to true")},t.zimAnimateDragUp=t.on("pressup",function(){t.paused,$e=!1,setTimeout(function(){$e=!0},50),yt[0]<yt[4]?st=!0:yt[0]>yt[4]&&(st=!1),!t.paused&&z&&tt&&st!=lt&&(t.percentComplete=100-t.percentComplete,lt=st)});var zt=new e.Damp(at,.15),vt=0,bt=0,yt=[0,0,0,0,0],wt=!1;t.zimDragAnimateTicker=e.Ticker.add(function(){if(X)if(++bt%20&&(yt.push(ft),yt.shift()),pt=ft,0)et=!1;else{if(wt||"Bloob"==He.type&&Math.abs(vt-at)>(z?45:90)){var e=at;zt.immediate(e),wt=!1}else e=zt.convert(at);.1<Math.abs(vt-e)?(t.percentCompleteNoAngle=e,vt=e):(t.percentCompleteNoAngle=e,mt=et=!1)}},it)}}if(F.orient){if(!0===F.orient){var Ct=t.parent.localToGlobal(zot(F.x)?t.x:F.x,zot(F.y)?t.y:F.y);F.orient={x:Ct.x,y:Ct.y}}Ke=F.orient,delete F.orient;var xt,kt=t.rotation;t.rotation=He.getPointAngle(0)+kt,Ke!=He&&(xt=Ke.parent?Ke.parent.localToLocal(Ke.x,Ke.y,t.parent):t.parent.globalToLocal(Ke.x,Ke.y),t.rotation=e.angle(t.x,t.y,xt.x,xt.y)+kt)}F.flip&&(Ue=F.flip,delete F.flip,Ze=t.scaleX),F.flipVertical&&(Qe=F.flipVertical,delete F.flipVertical,Je=t.scaleY);var Tt=t.x,At=t.y,Pt=0;B.loop&&!zot(B.count)&&(Pt=B.count,delete B.count,Se=1);var Bt,It=0;B.loopWait&&(It=B.loopWait,delete B.loopWait),B.loopCall&&(Bt=B.loopCall,delete B.loopCall);var St,Mt=t;B.loopParams&&(Mt=B.loopParams,delete B.loopParams),B.loopWaitCall&&(St=B.loopWaitCall,delete B.loopWaitCall);var Et,Ot=t;if(B.loopWaitParams&&(Ot=B.loopWaitParams,delete B.loopWaitParams),B.rewind){if(r){var jt=r;-1==jt.indexOf("InOut")&&(-1!=jt.indexOf("Out")?jt=jt.replace("Out","In"):-1!=jt.indexOf("In")&&(jt=jt.replace("In","Out")))}var Lt,Dt,Yt=0;if(delete B.rewind,B.rewindWait&&(Yt=B.rewindWait,delete B.rewindWait),B.rewindCall){Lt=B.rewindCall;var Xt=B.rewindParams;zot(Xt)&&(Xt=t),delete B.rewindCall,delete B.rewindParams}if(B.rewindWaitCall){Dt=B.rewindWaitCall;var Rt=B.rewindWaitParams;zot(Rt)&&(Rt=t),delete B.rewindWaitCall,delete B.rewindWaitParams}0<G||0<H||0<l?0<G||0<H?ke=t.zimTweens[j]=t.zimTween=createjs.Tween.get(t,{override:B.override}).wait(0<G?G:0,!0).wait(0<H?H:0,!0).call(function(){Z(ke)}):Z():(te(),Q())}else 0<G||0<H||0<l?0<G||0<H?ke=t.zimTweens[j]=t.zimTween=createjs.Tween.get(t,{override:B.override}).wait(0<G?G:0,!0).wait(0<H?H:0,!0).call(function(){J(ke)}):J():(te(),$());ke.startPaused=_,ke.rewinding=!1,!I&&P&&(Re&&(t.pathRatio=t.percentComplete&&100!=Math.round(t.percentComplete)?t.percentComplete/100:0,t.percentCompleteNoAngle=100!=Math.round(Re)?Re:0),Et=L&&!zot(D)&&D.dispatchEvent?e.Ticker.add(function(){(He||Ke||Ue||Qe)&&le(),D.dispatchEvent("animation")},it):L&&t.dispatchEvent?e.Ticker.add(function(){(He||Ke||Ue||Qe)&&le(),t.dispatchEvent("animation")},it):e.Ticker.add(function(){(He||Ke||Ue||Qe)&&le()},it));var _t=[1,1,1];zot(t.zimMaskDynamic)||t.zimMaskApply();var Wt,Ft,Gt=!1;for(ue(),t.stopAnimate&&t.stopAnimate.real||(t.stopAnimate=function(o,n,r,i){if(zot(r)&&(r=!0),t.paused=!0,"Pen"==t.type&&t.zimOnPath&&(t.stop(),t.zimOnPath=!1),zot(n)&&(n=!0),r&&X&&(He&&He.off("change",t.zimAnimatePathChange),t.off("mousedown",t.zimAnimateDragDown),t.off("pressmove",t.zimAnimateDragPress),t.off("pressup",t.zimAnimateDragUp),e.Ticker.remove(t.zimDragAnimateTicker)),zot(o)){if(!n)return t;for(var a in t.zimBusy=null,createjs.Tween.removeTweens(t),t.zimTweens)he(a);t.zimTweens=null,t.zimIdSets=null,t.zimTween=null,e.idSets&&e.idSets[Te||a]&&(delete e.idSets[Te||a],e.isEmpty(e.idSets)&&delete e.idSets),e.animatedObjects.remove(t)}else{Array.isArray(o)||(o=[o]);var l=pe(o);for(var a in t.zimTweens)t.zimTweens[a].requestID&&cancelAnimationFrame(t.zimTweens[a].requestID),n&&0<=l.indexOf(a)&&de(a),!n&&l.indexOf(a)<0&&de(a)}return t},t.stopAnimate.real=!0,t.pauseAnimate=function(e,o,n,r){if("Pen"==t.type&&(!1===e?t.zimOnPath&&(t.infinite=!0):t.stop()),Ft&&!r)return t.pause(e,o),t;if(zot(e)&&(e=!0),t.paused=e,zot(n)&&(n=!0),zot(o)&&!n)return t;if(zot(o))for(var i in t.zimTweens)ge(i,e);else{Array.isArray(o)||(o=[o]);var a=pe(o);for(var i in t.zimTweens)n&&0<=a.indexOf(i)&&ge(i,e),!n&&a.indexOf(i)<0&&ge(i,e)}return t}),_&&t.pauseAnimate(!0,j,null,!0),F.extra&&(Wt=F.extra,delete F.extra,Array.isArray(Wt)||(Wt=[Wt])),be=0;be<Ne.length;be++){var Ht=Ne[be];F[Ht]&&(zot(Wt)&&(Wt=[]),function(e,t){!0===t?Wt.push({outputProp:Ve[e]}):Array.isArray(t)?Wt.push({outputProp:Ve[e],outputMin:t[0],outputMax:t[1],inputMin:t[2],inputMax:t[3]}):Wt.push({outputProp:Ve[e],outputMax:t})}(Ht,F[Ht]),delete F[Ht])}if(Wt){var Nt;for(ke.extraTickers=[],be=0;be<Wt.length;be++){var Vt=Wt[be];for(var qt in zot(Vt.inputObj)&&(Vt.inputObj=t),zot(Vt.inputProp)&&(Vt.inputProp="y"),zot(Vt.inputMin)&&(Vt.inputMin=0),zot(Vt.inputMax)&&(Vt.inputMax="x"==Vt.inputProp?it.width:it.height),zot(Vt.outputObj)&&(Vt.outputObj=t),zot(Vt.outputProp)&&(Vt.outputProp="scale"),zot(Vt.outputMin)&&(Vt.outputMin=0),zot(Vt.outputMax)&&(Vt.outputMax=Vt.outputMin+1),zot(Vt.constrain)&&(Vt.constrain=!0),Vt)F[qt]=e.Pick.choose(F[qt]);"percentSpeed"==Vt.outputProp&&(Y=!0),Nt=new e.Proportion(Vt.inputMin,Vt.inputMax,Vt.outputMin,Vt.outputMax,Vt.factor,Vt.outputRound);var Kt=function(){var t=Vt,o=Nt;return function(){var n,r=t.outputObj;if(n=t.constrain?e.constrain(o.convert(t.inputObj[t.inputProp]),t.outputMin,t.outputMax):o.convert(t.inputObj[t.inputProp]),"scale"==t.outputProp)r.scaleX=e.sign(r.scaleX)*n,r.scaleY=e.sign(r.scaleY)*n;else if("scaleX"==t.outputProp)r.scaleX=e.sign(r.scaleX)*n;else if("scaleY"==t.outputProp)r.scaleY=e.sign(r.scaleY)*n;else if("layer"==t.outputProp){if(!r.parent)return;var i=e.constrain(Math.round(n),0,r.parent.numChildren-1);i!=r.parent.getChildIndex(r)&&r.parent.setChildIndex(r,i)}else r[t.outputProp]=n}}();Kt(),ke.extraTickers.push(e.Ticker.add(Kt,it))}}if(Y||t.zimAnimateDragDown){if(Y){Ft=!0,t.pauseAnimate(!0,j,null,!0),t.paused=!1,ke.currentTime=0;var Ut=ke;zot(t.percentSpeed)&&(t.percentSpeed=ke.startPaused?0:100);ke.currentTime=0;var Zt=!l&&zot(d)&&u;R&&u&&zot(d)&&(R=!1);var Qt,Jt=n+(z?n:0)+(v||0)+(h||0),$t=1;u&&d&&($t=d),R&&(Qt=Jt*$t),function o(){if(ke.requestID=requestAnimationFrame(o),Y&&(!ke.startPaused||0!=t.percentSpeed)){ke.startPaused=!1,0<l&&ke!=Ut&&(l=0,ke.currentTime=0,t.pauseAnimate(!0,j),t.paused=!1,Zt=zot(d)&&u),Zt&&(ke.currentTime+=1e4*Jt,ke.setPosition(ke.currentTime,!0),Zt=!1);var n=ke.currentTime+1e3/60*t.percentSpeed/100;Qt&&0==l&&(n=e.constrain(n,0,Qt)),ke.currentTime=n,ke.setPosition(ke.currentTime),(He||Ke||Ue||Qe)&&le(),it.update()}}()}var eo;t.pause=function(o,n){if(zot(o)&&(o=!0),zot(n)&&(n=0),o){if(t.zimAnimateDragDown&&(X=!1,t.cursor="default",He&&He.off("change",t.zimAnimatePathChange),t.off("mousedown",t.zimAnimateDragDown),t.off("pressmove",t.zimAnimateDragPress),t.off("pressup",t.zimAnimateDragUp),!Y))return;eo=t.percentSpeed,0<n?e.animate({target:t,props:{percentSpeed:0},override:!1,ticker:!1,time:n,call:function(){t.percentSpeed=0,t.paused=!0,Y=!1,t.dispatchEvent("pause")}}):(ke.startPaused=!1,t.percentSpeed=0,t.paused=!0,Y=!1,setTimeout(function(){t.dispatchEvent("pause")},10))}else{if(t.zimAnimateDragDown&&(X=!0,t.cursor="pointer",He&&(t.zimAnimatePathChange=He.on("change",t.zimAnimatePathChange)),t.zimAnimateDragDown=t.on("mousedown",t.zimAnimateDragDown),t.zimAnimateDragPress=t.on("pressmove",t.zimAnimateDragPress),t.zimAnimateDragUp=t.on("pressup",t.zimAnimateDragUp),!Y))return;ke.currentTime=ke.position,0<n?e.animate({target:t,props:{percentSpeed:eo},override:!1,ticker:!1,time:n,call:function(){t.percentSpeed=eo,t.paused=!1,Y=!0}}):(t.percentSpeed=eo,t.paused=!1,Y=!0)}return t}}return t}}},e.stopAnimate=function(t){if(z_d("45.12"),zot(t)){if(e.animatedObjects)for(var o=e.animatedObjects.length-1;0<=o;o--)e.animatedObjects.objects[o].stopAnimate()}else if(Array.isArray(t)||(t=[t]),e.idSets)for(var n=0;n<t.length;n++){var r=t[n];if(e.idSets[r])for(o=e.idSets[r].length-1;0<=o;o--)e.idSets[r][o].stopAnimate(r)}},e.stopZimAnimate=function(t){z_d("45.1"),e.stopAnimate(t)},e.pauseAnimate=function(t,o){if(z_d("45.22"),zot(t)&&(t=!0),zot(o)){if(e.animatedObjects)for(var n=e.animatedObjects.length-1;0<=n;n--)e.animatedObjects.objects[n].pauseAnimate(t)}else if(Array.isArray(o)||(o=[o]),e.idSets)for(var r=0;r<o.length;r++){var i=o[r];if(e.idSets[i])for(n=e.idSets[i].length-1;0<=n;n--)e.idSets[i][n].pauseAnimate(t,i)}},e.pauseZimAnimate=function(t,o){z_d("45.2"),e.pauseAnimate(t,o)},e.wiggle=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p){var f;if(f=zob(e.wiggle,arguments,"target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, totalTime, type, ease, integer, id, startType, ticker"))return f;if(z_d("45.25"),zot(t)||zot(n)||zot(r))return t;zot(i)&&(i=r),zot(a)&&(a=1e3),zot(l)&&(l=a),zot(u)&&(u="quadInOut"),zot(d)&&(d=!1),zot(h)&&(h=e.makeID()),zot(c)&&(c="both"),zot(g)&&(g="both"),zot(p)&&(p=!0),zot(s)||(t.wiggleTimeout=setTimeout(function(){t.stopAnimate(h),t.dispatchEvent("wigglestop")},s));var m,z=0;return function s(){var p=e.rand(e.Pick.choose(a),e.Pick.choose(l)),f={},v={};if(v[o]=e.Pick.choose(n),"negative"==c||0==z&&"negative"==g)var b=-e.rand(e.Pick.choose(r),e.Pick.choose(i),d);else b="positive"==c||0==z&&"positive"==g?e.rand(e.Pick.choose(r),e.Pick.choose(i),d):0==z?e.rand(e.Pick.choose(r),e.Pick.choose(i),d,!0):e.rand(e.Pick.choose(r),e.Pick.choose(i),d)*e.sign(m)*-1;f[o]=e.Pick.choose(n)+b,0==z&&(p/=2),m=b,z++,"negative"==c||"positive"==c?e.animate({target:t,obj:f,set:v,ease:u,time:2*p,rewind:!0,override:!1,call:s,id:h,ticker:!!t.stage}):e.animate({target:t,obj:f,ease:u,time:p,override:!1,call:s,id:h,ticker:!!t.stage})}(),t},e.zimLoopCheck=!1,e.loop=function(t,o,n,r,i,a){function l(e){return zot(i)&&(i=n?e:0),zot(a)&&(a=n?0:e),n&&i<a||!n&&a<i?0:(i<0&&a)<0||e<i&&e<a?0:(i=Math.max(0,Math.min(i,e)),a=Math.max(0,Math.min(a,e)),Math.floor((n?i-a:a-i)/r)+1)}var s;if(s=zob(e.loop,arguments,"obj, call, reverse, step, start, end"))return s;if(e.zimLoopCheck||z_d("45.3"),e.zimLoopCheck=!0,!zot(t)&&!zot(o)){zot(n)&&(n=!1),(zot(r)||r<=0)&&(r=1);var c="number"==typeof t?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":t instanceof NodeList?"nodelist":t instanceof HTMLCollection?"htmlcollection":"invalid";if("container"!=c||t.addChild)if("number"==c||"array"==c||"nodelist"==c||"htmlcollection"==c){if(0==(p=l((d="number"==c?t:t.length)-1)))return;if(n)for(g=i;a<=g;g-=r){if("number"==c)var u=o(g,p,i,a,t);else u="array"==c?o(t[g],g,p,i,a,t):o(t.item(g),g,p,i,a,t);if(void 0!==u)return u}else for(g=i;g<=a;g+=r)if(void 0!==(u="number"==c?o(g,p,i,a,t):"array"==c?o(t[g],g,p,i,a,t):o(t.item(g),g,p,i,a,t)))return u}else if("object"==c){var d=0,h=[];for(var g in t)d++,h.push(g);if(0==(p=l(d-1)))return;if(n){for(g=i;a<=g;g-=r)if(void 0!==(u=o(h[g],t[h[g]],g,p,i,a,t)))return u}else for(g=i;g<=a;g+=r)if(void 0!==(u=o(h[g],t[h[g]],g,p,i,a,t)))return u}else{var p;if(0==(p=l(t.numChildren-1)))return;if(n){for(g=i;a<=g;g-=r)if(void 0!==(u=o(t.getChildAt(g),g,p,i,a,t)))return u}else for(g=i;g<=a;g+=r)if(void 0!==(u=o(t.getChildAt(g),g,p,i,a,t)))return u}}},e.scaleTo=function(t,o,n,r,i,a){var l;if(l=zob(e.scaleTo,arguments,"obj, boundObj, percentX, percentY, type, boundsOnly"))return l;if(z_d("43"),!zot(t)&&t.getBounds&&t.getBounds()){if(!zot(o)&&o.getBounds&&o.getBounds()){zot(n)&&(n=-1),zot(r)&&(r=-1),-1==n&&-1==r&&(n=r=100),zot(i)&&(i="smallest"),zot(a)&&(a=!1);var s=o.getBounds().width*n/100*(a?1:o.scaleX),c=o.getBounds().height*r/100*(a?1:o.scaleY);if("Stage"!=o.type&&"StageGL"!=o.type||(s=o.width*n/100,c=o.height*r/100),(-1==n||-1==r)&&"both"!=i&&"stretch"!=i)return-1==n?e.sca(t,c/t.getBounds().height):e.sca(t,s/t.getBounds().width),t;if("both"==i||"stretch"==i)return t.scaleX=-1!=n?s/t.getBounds().width:t.scaleX,t.scaleY=-1!=r?c/t.getBounds().height:t.scaleY,t;if("biggest"==i||"largest"==i||"outside"==i)var u=Math.max(s/t.getBounds().width,c/t.getBounds().height);else u=Math.min(s/t.getBounds().width,c/t.getBounds().height);return e.sca(t,u),t}zog("zim methods - scaleTo(): please provide a boundObject (with setBounds) to scale to")}else zog("zim methods - scaleTo(): please provide an object (with setBounds) to scale")},e.fit=function(t,o,n,r,i,a){var l;if(l=zob(e.fit,arguments,"obj, left, top, width, height, inside"))return l;if(z_d("46"),!zot(t)&&t.getBounds){if(t.getBounds()){if(zot(o)){if(!t.stage)return void zog("zim methods - fit(): please add boundary dimensions or add obj to stage first");if(!t.stage.getBounds())return void zog("zim methods - fit(): please add boundary dimensions or add obj with bounds to stage first");n=o=0,r=t.stage.getBounds().width,i=t.stage.getBounds().height}zot(a)&&(a=!0),t.scaleX=t.scaleY=1;var s,c=r,u=i,d=t.getBounds().width,h=t.getBounds().height;s=a?d/h<=c/u?u/h:c/d:d/h<=c/u?c/d:u/h,t.scaleX=t.scaleY=s;var g=d*s,p=h*s;return t.x=(t.regX-t.getBounds().x)*s+o+(c-g)/2,t.y=(t.regY-t.getBounds().y)*s+n+(u-p)/2,{x:t.x,y:t.y,width:g,height:p,scale:s,bX:o,bY:n,bWidth:r,bHeight:i}}zog("zim methods - fit(): please setBounds() on object")}},e.boundsCheck=!1,e.boundsToGlobal=function(t,o,n){if(e.boundsCheck||(z_d("40"),e.boundsCheck=!0),!zot(t)&&t.getBounds){zot(n)&&(n=!1);var r=t.getBounds();if(r||!zot(o)){if(o&&(r=o),n)var i=t.globalToLocal(r.x,r.y),a=t.globalToLocal(r.x+r.width,r.y),l=t.globalToLocal(r.x+r.width,r.y+r.height),s=t.globalToLocal(r.x,r.y+r.height);else i=t.localToGlobal(r.x,r.y),a=t.localToGlobal(r.x+r.width,r.y),l=t.localToGlobal(r.x+r.width,r.y+r.height),s=t.localToGlobal(r.x,r.y+r.height);var c=Math.min(i.x,a.x,l.x,s.x),u=Math.min(i.y,a.y,l.y,s.y),d=Math.max(i.x,a.x,l.x,s.x),h=Math.max(i.y,a.y,l.y,s.y);return new createjs.Rectangle(c,u,d-c,h-u)}zog("zim methods - boundsToGlobal():\n please setBounds() on object (or a rectangle)")}},e.resetBounds=function(e,t,o,n,r){if(z_d("40.5"),zot(n))i=0,a=t,l=0,s=o;else var i=t,a=n,l=o,s=r;return zot(s)&&(s=a),zot(t)?e.setBounds(null):e.setBounds(i,l,a,s),e},e.copyMatrix=function(e,t){return z_d("45.5"),e.x=t.x,e.y=t.y,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.regX=t.regX,e.regY=t.regY,e.rotation=t.rotation,e.skewX=t.skewX,e.skewY=t.skewY,e},e.duplicate=function(e){z_d("45.6");var t=e.clone();for(var o in e)e.hasOwnProperty(o)&&null==t.prop&&(t[o]=e[o]);return t},e.expand=function(e,t,o){if(z_d("50"),zot(e)||!e.getBounds||!e.getBounds())return zog("zim methods - expand(): please provide object with bounds set"),e;zot(t)&&(t=20),zot(o)&&(o=t);var n=e.getBounds(),r=new createjs.Shape;return r.graphics.f("0").r(n.x-t,n.y-o,n.width+2*t,n.height+2*o),e.hitArea=r,e},e.setSwipe=function(e,t){if(z_d("34"),!zot(e)&&e.on)return e.zimNoSwipe=!t||null,e instanceof createjs.Container&&function t(o){for(var n,r=o.numChildren,i=0;i<r;i++)(n=o.getChildAt(i)).zimNoSwipe=e.zimNoSwipe,n instanceof createjs.Container&&t(n)}(e),e},e.setMask=function(t,o,n){function r(){t.zimMask&&t.zimMask.parent&&t.zimMask.parent.removeChild(t.zimMask),t.zimMask=null,t.zimMaskTicker&&e.Ticker.remove(t.zimMaskTicker),t.mask=null}function i(){if(n&&(!l||!o.stage))return t;if(a=null,t.zimMask=o.zimMask=a=o.shape.clone(),e.copyMatrix(a,o),o.addChildAt(a,0),a.alpha=0,t.parent){var r=o.getConcatenatedMatrix().decompose(),i=t.parent.getConcatenatedMatrix().decompose();a.scaleX=r.scaleX/i.scaleX,a.scaleY=r.scaleY/i.scaleY,a.rotation=(r.rotation?r.rotation:0)-(i.rotation?i.rotation:0);var s=o.localToLocal(o.shape.x+o.regX,o.shape.y+o.regY,t.parent);a.x=s.x,a.y=s.y,t.mask=a}else t.mask=a}if(z_d("50.1"),zot(t)&&zog("zim methods - setMask(): please provide obj"),zot(o))return r(),t;var a,l=t.stage||(zimDefaultFrame?zimDefaultFrame.stage:null);return t.zimMaskOriginal&&t.zimMaskOriginal!=o&&r(),zot(n)&&(n=!("Bloob"!=o.type&&zot(o.zimDown)&&zot(o.transformControls)&&zot(o.zimTouch)&&zot(o.zimTweens)),o.zimMaskDynamic=n),(t.zimMaskOriginal=o).zimMaskApply=function(){t.zimMaskTicker&&e.Ticker.remove(t.zimMaskTicker),t.zimMaskTicker=e.Ticker.add(i)},o&&o.shape?(i(),n&&o.zimMaskApply()):(a=o,t.mask=a),t},e.outline=function(t,o,n){var r;if(r=zob(e.outline,arguments,"obj, color, size"))return r;if(z_d("47"),t.type&&"zimOultineShape"==t.type)return zon&&zog("zim.outline() - warning, you are trying to outline an outline - do not outline in a loop"),t;if(zot(t)||!t.getBounds)return zog("zim methods - outline(): please provide object with bounds set"),t;if(!t.getBounds())return zog("zim methods - outline(): please setBounds() on object"),t;if(!t.parent)return zog("zim methods - outline(): object should be on stage first"),t;if(zot(o)&&(o="brown"),zot(n)&&(n=2),n<=0)return t.ZIMoutlineShape&&t.ZIMoutlineShape.parent.removeChild(t.ZIMoutlineShape),t.ZIMoutlineShapeC&&t.ZIMoutlineShapeC.parent.removeChild(t.ZIMoutlineShapeC),void(t.ZIMoutlineShape=t.ZIMoutlineShapeC=null);var i=t.getBounds(),a=t.ZIMoutlineShape=t.ZIMoutlineShape?t.ZIMoutlineShape:new e.Shape;a.type="zimOutlineShape";var l=t.ZIMoutlineShapeC=t.ZIMoutlineShapeC?t.ZIMoutlineShapeC:new e.Shape;l.type="zimOutlineShape";var s=t.parent;t.outlineToggled=!0,t.outlineToggle=function(e){return!0===e?(t.ZIMoutlineShape.visible=!0,t.ZIMoutlineShapeC.visible=!0):!1===e?(t.ZIMoutlineShape.visible=!1,t.ZIMoutlineShapeC.visible=!1):(t.ZIMoutlineShape.visible=!t.ZIMoutlineShape.visible,t.ZIMoutlineShapeC.visible=!t.ZIMoutlineShapeC.visible),t.outlineToggled=t.ZIMoutlineShape.visible,t};var c=t.localToLocal(i.x,i.y,s),u=t.localToLocal(i.x+i.width,i.y,s),d=t.localToLocal(i.x+i.width,i.y+i.height,s),h=t.localToLocal(i.x,i.y+i.height,s),g=t.localToLocal(0,0,s),p=a.graphics.c(),f=l.graphics.c();p.s(o).ss(n).mt(c.x,c.y).lt(u.x,u.y).lt(d.x,d.y).lt(h.x,h.y).lt(c.x,c.y).cp(),f.s("white").ss(n+2),f.mt(-11,0).lt(11,0),f.mt(0,-11).lt(0,11),f.s(o).ss(n),f.mt(-10,0).lt(10,0),f.mt(0,-10).lt(0,10),l.x=g.x,l.y=g.y,l.rotation=t.rotation,p.s("white").ss(n+2).dc(t.x,t.y,16),p.s(o).ss(n).dc(t.x,t.y,16),t.parent.removeChild(a),t.parent.removeChild(l);var m=t.parent.getChildIndex(t);return t.parent.addChildAt(l,m+1),t.parent.addChildAt(a,m+1),a.mouseEnabled=!1,l.mouseEnabled=!1,t},e.STYLE=null,e.STYLECHECK=!1,e.ignore="ignore",e.getStyle=function(t,o,n){e.STYLECHECK||(z_d("50.34"),e.STYLECHECK=!0);var r=["pos","addTo","center","centerReg","mov","drag","transform","gesture","outline","bounds","animate","wiggle"],i=e.STYLE;if("undefined"!=typeof STYLE&&(i=STYLE),i=zot(i)?{}:e.copy(i),zot(n))n={};else for(var a=0;a<r.length;a++)delete n[r[a]];var l,s=n,c=i.type;if(c&&delete i.type,!zot(o)&&!zot(i.group)){var u=o.split(","),d={};for(a=0;a<u.length;a++){var h=u[a].trim();zot(i.group[h])||(d=e.merge(d,i.group[h]))}delete i.group}for(var g in zot(t)||zot(c)||zot(c[t])||(i=e.merge(i,c[t])),zot(o)||zot(d)||(i=e.merge(i,d)),i)s[g]?delete i[g]:"ignore"!=(l=-1!=r.indexOf(g)||i.delayPick?i[g]:e.Pick.choose(i[g]))?(l&&l.constructor==={}.constructor&&(l=e.copy(l,!0,!1)),i[g]=l):delete i[g];return!1===(i=e.merge(i,s)).style?{}:i};var r=["visible","x","y","scale","scaleX","scaleY","rotation","alpha","skewX","skewY","regX","regY"],i=function(t,o){if(o){o.add&&t.addTo(),o.addTo&&t.addTo(!0===o.addTo?null:o.addTo),o.center&&t.center(!0===o.center?null:o.center),o.centerReg&&t.centerReg(!0===o.centerReg?null:o.centerReg);for(var n=0;n<r.length;n++)null!=o[r[n]]&&(t[r[n]]=e.Pick.choose(o[r[n]]));if(o.bounds&&o.bounds.constructor==={}.constructor&&t.setBounds(o.bounds.x?o.bounds.x:0,o.bounds.y?o.bounds.y:0,o.bounds.width?o.bounds.width:100,o.bounds.height?o.bounds.height:100),(o.mov||o.move)&&(o.move&&(o.mov=o.move),o.mov.constructor==={}.constructor?t.mov(e.Pick.choose(o.mov.x),e.Pick.choose(o.mov.y)):t.mov(e.Pick.choose(o.mov))),null!=o.x&&(o.loc?null==o.loc.x&&(o.loc.x=o.x):o.loc={x:o.x}),null!=o.y&&(o.loc?null==o.loc.y&&(o.loc.y=o.y):o.loc={y:o.y}),o.loc&&(o.loc.constructor==={}.constructor?t.loc(e.Pick.choose(o.loc.x),e.Pick.choose(o.loc.y)):t.loc(e.Pick.choose(o.loc))),o.pos)if(o.pos.constructor==={}.constructor)t.pos(e.Pick.choose(o.pos.x),e.Pick.choose(o.pos.y),e.Pick.choose(o.pos.right),e.Pick.choose(o.pos.bottom),e.Pick.choose(o.pos.index),o.pos.add,e.Pick.choose(o.pos.reg),e.Pick.choose(o.pos.regX),e.Pick.choose(o.pos.regY));else{var i=e.Pick.choose(o.pos);"left"!=i&&"top"!=i||t.pos(),"right"==i&&t.pos({right:!0}),"bottom"==i&&t.pos({bottom:!0}),"rightbottom"!=i&&"bottomright"!=i||t.pos({right:!0,bottom:!0}),"center"==i&&t.center()}if(o.outline&&setTimeout(function(){t.outline(o.outline.constructor==={}.constructor?o.outline:null),t.stage&&t.stage.update()},20),o.drag&&t.drag(o.drag.constructor==={}.constructor?o.drag:{currentTarget:!0}),o.gesture&&t.gesture(o.gesture.constructor==={}.constructor?o.gesture:null),o.transform&&setTimeout(function(){t.transform(o.transform.constructor==={}.constructor?o.transform:null)},20),o.animate)for(Array.isArray(o.animate)||(o.animate=[o.animate]),n=0;n<o.animate.length;n++)!function(){var e=o.animate[n];e.constructor==={}.constructor&&setTimeout(function(){t.animate(e)},20)}();if(o.wiggle)for(Array.isArray(o.wiggle)||(o.wiggle=[o.wiggle]),n=0;n<o.wiggle.length;n++)!function(){var e=o.wiggle[n];e.constructor==={}.constructor&&setTimeout(function(){t.wiggle(e)},20)}();o.expand&&t.expand(!0===o.expand?null:o.expand)}};e.ANIMATE=!0,e.OPTIMIZE=!1,e.ACTIONEVENT="mousedown",e.KEYFOCUS=null,e.POSREG=!1,e.DRAGALL=!1,e.Ticker={stages:null,myUpdate:null,alwaysList:new e.Dictionary,list:new e.Dictionary,setFPS:function(t,o){zot(t)&&zot(o)?(t=30,o=60):zot(t)?t=30:zot(o)&&(o=t),e.Ticker.framerate=createjs.Ticker.framerate=e.mobile()?t:o},setTimingMode:function(e){createjs.Ticker.timingMode=createjs.Ticker.RAF,"synched"==e&&(createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED),"timeout"==e&&(createjs.Ticker.timingMode=createjs.Ticker.TIMEOUT)},add:function(t,o){z_d("30");var n=e.Ticker;return n.has(t,o)?t:(n.framerate||n.setFPS(),!zot(o)&&o.update||(o=zimDefaultFrame.stage),zot(t)||"function"!=typeof t?void zog("zim.Ticker.add() - only add functions"):(n.ticker||(n.ticker=createjs.Ticker.on("tick",n.call)),n.list.at(o)?n.list.at(o).push(t):n.list.add(o,[t]),t))},rawID:{},raw:function(t){z_d("30");var o=e.makeID(7,"letters");return function n(r){t(r),e.Ticker.rawID[o]=requestAnimationFrame(n)}(),o},removeRaw:function(t){cancelAnimationFrame(e.Ticker.rawID[t]),delete e.Ticker.rawID[t]},call:function(t){for(var o,n,r=e.Ticker,i=0;i<r.list.length;i++){o=r.list.objects[i],n=r.list.values[i];for(var a=0;a<n.length;a++)n[a](t);r.alwaysList.at(o)?o.update():0<n.length&&(!zot(r.update)||e.OPTIMIZE||!zns&&OPTIMIZE?r.update&&o.update():o.update())}if(0==r.list.length)for(i=0;i<r.alwaysList.length;i++)o=r.alwaysList.objects[i],null==r.list[o]&&o.update()},always:function(t){z_d("30");var o=e.Ticker;o.framerate||o.setFPS(),!zot(t)&&t.update||(t=zimDefaultFrame.stage),o.alwaysList.add(t,!0),o.ticker||(o.ticker=createjs.Ticker.on("tick",o.call))},alwaysOff:function(t){var o=e.Ticker;!zot(t)&&t.update||(t=zimDefaultFrame.stage),o.alwaysList.remove(t)},remove:function(t){var o=e.Ticker;if(zot(t)||"function"!=typeof t)zog("zim.Ticker - only remove functions");else{for(var n=0,r=0;r<o.list.length;r++){o.list.objects[r];var i=o.list.values[r].indexOf(t);-1<i&&o.list.values[r].splice(i,1),n+=o.list.values[r].length}0<o.alwaysList.length||0==n&&(createjs.Ticker.off("tick",o.ticker),o.ticker=null)}},removeAll:function(t){for(var o,n=e.Ticker,r=0,i=0;i<n.list.length;i++)o=n.list.objects[i],!zot(t)&&t!==o||(n.list.values[i]=[]),r+=n.list.values[i].length;0<n.alwaysList.length||0==r&&(createjs.Ticker.off("tick",n.ticker),n.ticker=null)},has:function(t,o){return!zot(o)&&o.update||(o=zimDefaultFrame.stage),e.Ticker.list&&e.Ticker.list.at(o)&&0<=e.Ticker.list.at(o).indexOf(t)},dispose:function(t){for(var o,n=e.Ticker,r=0,i=n.list.length-1;0<=i;i--)o=n.list.objects[i],zot(t)||t===o?(n.list.remove(t),n.alwaysList.remove(t)):r+=n.list.values[i].length;if(!(0<n.alwaysList.length))return 0==r&&(createjs.Ticker.off("tick",n.ticker),n.ticker=null),!0}},Object.defineProperty(e.Ticker,"update",{get:function(){return e.Ticker.myUpdate},set:function(t){var o=e.Ticker;"boolean"!=typeof t&&(t=null),o.myUpdate=t,!1===o.myUpdate&&(cancelAnimationFrame(o.ticker),o.alwaysList=new e.Dictionary)}}),e.Pages=function(t,o,n,r,a,l,s,c){function u(){(z=new createjs.Shape).graphics.f("black").r(0,0,b,y+1),(v=new createjs.Shape).graphics.f("white").r(0,0,b,y+1)}function d(t,o){t.zimHTMLList=new e.Dictionary,g(t),t.zimSwipeArray=o||[],t.zimOriginalAlpha=t.alpha,t.parent&&t.parent.removeChild(w.page)}function h(e){if(!zot(e))for(var t=0;t<e.zimHTMLList.length;t++)e.addChildAt(e.zimHTMLList.values[t].obj,e.zimHTMLList.values[t].depth)}function g(e){e.zimHTMLList.clear();for(var t=0;t<e.numChildren;t++)if(ch=e.getChildAt(t),"TextArea"==ch.type||"Loader"==ch.type||"Tag"==ch.type){var o={obj:ch,depth:e.getChildIndex(ch)};e.zimHTMLList.add(ch,o)}for(t=e.numChildren-1;0<=t;t--)ch=e.getChildAt(t),"TextArea"!=ch.type&&"Loader"!=ch.type&&"Tag"!=ch.type||e.removeChild(ch)}var p;if(p=zob(e.Pages,arguments,"pages, transition, speed, transitionTable, holder, style, group, inherit",this))return p;z_d("71"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pages",this.group=s;var f=!1===l?{}:e.getStyle(this.type,this.group,c);if(zot(t)&&(t=null!=f.pages?f.pages:[]),this.pages=t,zot(o)&&(o=null!=f.transition?f.transition:"none"),zot(n)&&(n=null!=f.speed?f.speed:200),zot(r)&&(r=null!=f.transitionTable?f.transitionTable:[]),this.transitionTable=r,zot(a)&&(a=null!=f.holder?f.holder:null),zot(a)&&zimDefaultFrame&&(a=zimDefaultFrame.stage),a.getBounds&&a.getBounds()){this.speed=n,this.active=!0;var m=this;m.transitioning=!1;var z,v,b=a.getBounds().width,y=a.getBounds().height;"none"==o&&r==[]||u();for(var w,C,x=["left","right","up","down"],k=0;k<t.length;k++)(w=t[k]).constructor!=={}.constructor&&(w=t[k]={page:t[k]}),d(w.page,w.swipe);var T,A=this.page=t[0]?t[0].page:null;zot(this.page)||(this.index=0),this.addChild(A),h(A),this.swipe=new e.Swipe(a);var P=!1,B=this.swipe.on("swipe",function(e){if(m.active){var t=e.currentTarget.direction;if("none"!=t){var o="";"left"==t?o="right":"right"==t?o="left":"up"==t?o="down":"down"==t&&(o="up"),t=o;var n=x.indexOf(t);C=A.zimSwipeArray[n],T=[C,t,null,null,!0],m.page=A,m.nextPage=C,m.direction=t,m.dispatchEvent("swipe"),setTimeout(function(){P||m.go(C,t,null,null,!0)},50)}}});this.addPage=function(e,t){d(e,t),m.pages.push({page:e}),A?e.parent&&e.parent.removeChild(e):(A=m.page=e,m.addChild(A))},this.removePage=function(t){g(t),m.currentPage==t&&(m.removeChild(t),a.stage&&a.stage.update()),e.loop(m.pages,function(e,o){e.page!=t&&e!=t||m.pages.splice(o,1)},!0),t.zimSwipeArray=null},this.setSwipeArray=function(e,t){zot(t)&&(t=[]);var o={page:e,swipe:t};o.page.zimSwipeArray=o.swipe?o.swipe:[]},this.pause=function(){P=!0},this.unpause=function(){P&&m.go(T[0],T[1],T[2],T[3],T[4])};var I=!0;this.go=function(t,r,i,l,s){function c(e){e[0].uncache(),e[1].uncache(),m.transitioning=!1,m.dispatchEvent("pagetransitioned"),m.removeChild(m.lastPage),m.removeChild(z),m.removeChild(v),h(A),I=!0}function u(t){m.removeChild(m.lastPage),e.animate(t.shift(),{alpha:0},m.speed/2,null,c,t)}if("number"==typeof t){var d=m.pages[t];if(zot(d))return;t=d.page}setTimeout(function(){P=!1},200);for(var p=[{x:b},{x:-b},{y:y},{y:-y}],f=[{x:b/2,alpha:0},{x:-b/2,alpha:0},{y:y/2,alpha:0},{y:-y/2,alpha:0}],w=o,C=n,k=0;k<m.transitionTable.length;k++)if(m.transitionTable[k][0]==A&&m.transitionTable[k][1]==t){w=m.transitionTable[k][2],C=m.transitionTable[k][3];break}if(zot(i)&&(i=w),zot(l)&&(l=C),m.speed=l,m.direction=r,""==t||null==t)m.page=A,m.dispatchEvent("nothing");else if("string"==typeof t)m.page=A,m.dispatchEvent(t);else{if(t==A)return;zot(r)&&(r="right");var T=x.indexOf(r);if(!I)return;for(I=!1,t.x=0,t.y=0,t.alpha=t.zimOriginalAlpha,m.transitioning=!0,"slide"==i?(t.x=-(0|p[T].x),t.y=-(0|p[T].y),t.cache(0,0,(b+1)/t.scaleX,(y+1)/t.scaleY),A.cache(0,0,(b+1)/A.scaleX,(y+1)/A.scaleY),m.addChild(t),m.addChild(A),e.animate(A,p[T],m.speed,null,c,[A,t]),e.animate(t,[{x:0},{x:0},{y:0},{y:0}][T],m.speed)):"reveal"==i?(t.cache(0,0,(b+1)/t.scaleX,(y+1)/t.scaleY),A.cache(0,0,(b+1)/A.scaleX,(y+1)/A.scaleY),m.addChild(t),m.addChild(A),e.animate(A,f[T],m.speed,null,c,[A,t])):"fade"==i?(t.cache(0,0,(b+1)/t.scaleX,(y+1)/t.scaleY),A.cache(0,0,(b+1)/A.scaleX,(y+1)/A.scaleY),t.alpha=1,m.addChild(t),m.addChild(A),e.animate(A,{alpha:0},m.speed,null,c,[A,t])):"black"==i?(t.cache(0,0,(b+1)/t.scaleX,(y+1)/t.scaleY),A.cache(0,0,(b+1)/A.scaleX,(y+1)/A.scaleY),t.alpha=1,m.addChild(t),m.addChild(A),z.alpha=0,m.addChild(z),e.animate(z,{alpha:1},m.speed/2,null,u,[z,A,t])):"clear"==i?(t.cache(0,0,(b+1)/t.scaleX,(y+1)/t.scaleY),A.cache(0,0,(b+1)/A.scaleX,(y+1)/A.scaleY),t.alpha=0,m.addChild(t),m.addChild(A),e.animate(A,{alpha:0},m.speed/2),e.animate(t,{alpha:1},m.speed/2,null,c,[A,t],m.speed/2)):"white"==i?(t.cache(0,0,(b+1)/t.scaleX,(y+1)/t.scaleY),A.cache(0,0,(b+1)/A.scaleX,(y+1)/A.scaleY),t.alpha=1,m.addChild(t),m.addChild(A),v.alpha=0,m.addChild(v),e.animate(v,{alpha:1},m.speed/2,null,u,[v,A,t])):(m.transitioning=!1,m.addChild(t),m.removeChild(A),I=!0),g(A),m.lastPage=A,m.page=t,m.index=-1,k=0;k<m.pages.length;k++)m.pages[k].page==m.page&&(m.index=k);"none"==i&&h(t),zot(s)&&(s=!1),m.fromSwipe=s,m.dispatchEvent("page"),A=t,a.stage&&a.stage.update()}},this.resize=function(){b=a.getBounds().width,y=a.getBounds().height,"none"==o&&r==[]||u()},this.puff=function(e){for(var o=0;o<t.length;o++)m.addChild(t[o].page);m.addChild(A),0<e&&setTimeout(function(){m.settle()},e)},this.settle=function(){m.removeAllChildren(),m.addChild(A),m.dispatchEvent("puffed")},this.disable=function(){m.active=!1},!(this.enable=function(){m.active=!0})!==l&&i(this,f),this.dispose=function(){return m.swipe.off("swipe",B),this.zimContainer_dispose(),!0}}else zog("zim controls - Pages():\nholder object must have bounds set")},e.extend(e.Pages,e.Container,["clone","dispose"],"zimContainer",!1),e.HotSpots=function(t,o,n){function r(t){var r=null;if(!Array.isArray(t.rect)){if(!(r=t.rect))return void zog("zim controls - HotSpots(): HotSpot "+t.page+" "+t.rect+" button does not exist");t.rect=[r.x,r.y,r.width,r.height]}(s=new e.HotSpot(t.page,t.rect[0],t.rect[1],t.rect[2],t.rect[3],t.call,t.callOver,t.callOut,o,t.talk)).zimHSpage=t.page,s.button=r,u.push(s),s.on(c,i),r&&zot(t.callOver)&&zot(t.callOut)&&(s.spot.mouseEnabled=!1,s.spot.mouseChildren=!1,r.zimHScall=t.call,r.zimHSEvent=r.on(c,i,!0),n||(r.zimHSMDEvent=r.on("mousedown",function(e){e.stopImmediatePropagation()})),r.cursor="pointer")}function i(e){e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0),"function"==typeof e.currentTarget.zimHScall&&e.currentTarget.zimHScall(e)}var a;if(a=zob(e.HotSpots,arguments,"spots, local, mouseDowns",this))return a;if(z_d("72"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpots",!zot(t)&&Array.isArray(t)){zot(o)&&(o=!0),zot(n)&&(n=!1);for(var l,s,c=(zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",u=this.hotSpots=[],d=0;d<t.length;d++)r(t[d]);this.addHotSpot=function(e,o,n,i,a,s){l={page:e,rect:o,call:n,callOver:i,callOut:a,talk:s},t.push(l),r(l)},this.show=function(){for(var e=0;e<u.length;e++)(s=u[e]).button||(s.spot.alpha=.2)},this.hide=function(){for(var e=0;e<u.length;e++)(s=u[e]).spot.alpha=0},this.removeHotSpots=function(o,r){for(var a=t.length-1;0<=a;a--)l=t[a],s=u[a],r&&!Array.isArray(r)&&(r=[r.x,r.y,r.getBounds().width,r.getBounds().height]),(zot(o)&&zot(r)||zot(r)&&o==l.page||zot(o)&&e.arraysEqual(r,l.rect)||o==l.page&&e.arraysEqual(r,l.rect))&&(t.splice(a,1),s.button&&(s.button.off(c,s.button.zimHSEvent),s.button.zimHSEvent=null,n||(s.button.off("mousedown",s.button.zimHSMDEvent),s.button.zimHSMDEvent=null)),s.off(c,i),s.dispose(),u.splice(a,1))},this.dispose=function(){for(var e=0;e<u.length;e++)(s=u[e]).button&&(s.button.off(c,s.button.zimHSEvent),s.button.zimHSCall=null,s.button.zimHSEvent=null,n||(s.button.off("mousedown",s.button.zimHSMDEvent),s.button.zimHSMDEvent=null)),s.off(c,i),s.dispose();return!0}}else zog("zim controls - HotSpots():\nplease provide an array of HotSpot data")},e.extend(e.HotSpots,e.Container,"clone","zimContainer",!1),e.HotSpot=function(t,o,n,r,i,a,l,s,c,u){var d;if(d=zob(e.HotSpot,arguments,"obj, x, y, width, height, call, callOver, callOut, local, talk",this))return d;if(z_d("73"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpot",!zot(t)&&t.addChild)if(t instanceof createjs.Container!=0)if(zot(o)||zot(n)||zot(r)||zot(i))zog("zim controls - HotSpot():\nPlease pass in x, y, width, height");else{zot(c)&&(c=!0),eventType=(zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click";var h=r,g=i;if(c)p=new e.Point(o,n),m=r,z=i;else var p=t.globalToLocal(o,n),f=t.globalToLocal(o+h,n+g),m=f.x-p.x,z=f.y-p.y;var v=new e.Shape(r,i);if(v.talk=zot(u)?"HotSpot":u,v.alpha=0,v.graphics.f("black").dr(0,0,m,z),v.x=p.x,v.y=p.y,v.cursor="pointer",v.expand(0),this.spot=v,"function"==typeof a)var b=v.on(eventType,function(e){a(e)});if("function"==typeof l)var y=v.on("mouseover",function(e){l(e)});if("function"==typeof s)var w=v.on("mouseout",function(e){s(e)});t.addChild(v),this.show=function(){t.addChild(backing)},this.hide=function(){t.removeChild(backing)},this.dispose=function(){return b&&v.off(eventType,y),y&&v.off("mouseover",y),w&&v.off("mouseout",w),t.removeChild(v),!(v=null)}}else zog("zim controls - HotSpot():\nObjects passed in should be Containers");else zog("zim controls - HotSpot():\nPlease pass in container object for obj")},e.extend(e.HotSpot,e.Container,"clone","zimContainer",!1),e.Guide=function(t,o,n,r,a,l,s,c){function u(t,o,n){var r=new e.Container({style:!1});return r.shape=new createjs.Shape,r.shape.graphics.s(o).ss(1).f(t).r(0,0,C,x),r.shape.alpha=.9,r.addChild(r.shape),r.label=new createjs.Text("10","16px arial",n),r.label.textAlign="center",r.label.textBaseline="middle",r.addChild(r.label),r.mouseChildren=!1,r.mouseEnabled=!1,r}function d(e){var r,i;e?(r=t.globalToLocal(e.rawX/y.scaleX,e.rawY/y.scaleY),E=r):r={x:E.x,y:E.y},n?o?(i=Math.round(Math.abs(r.x-B.x)/A*100),b.label.text="x:"+Math.max(0,Math.min(i,100))+"%",b.y=Math.max(T,Math.min(r.y,v))):(i=Math.round(Math.abs(r.y-B.y)/P*100),b.label.text="y:"+Math.max(0,Math.min(i,100))+"%",b.x=Math.max(k,Math.min(r.x,z))):o?(i=Math.round(Math.abs(r.x-B.x)),b.label.text="x:"+Math.max(0,Math.min(i,Math.round(A))),b.y=Math.max(T,Math.min(r.y,v))):(i=Math.round(Math.abs(r.y-B.y)),b.label.text="y:"+Math.max(0,Math.min(i,Math.round(P))),b.x=Math.max(k,Math.min(r.x,z))),y&&y.update()}function h(){var n;M=!0,A=t.getBounds().width,P=t.getBounds().height,I=o?(n="ew-resize",new createjs.Rectangle(0,0,A,0)):(n="ns-resize",new createjs.Rectangle(0,0,0,P)),e.noDrag(B),setTimeout(function(){e.drag(B,I,n,n,null,null,!0)},500),y.mouseMoveOutside=!0,y.enableMouseOver(10),z=A-2*C/3,v=P-x-x,B.uncache();var r=B.graphics;o?(r.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,P),r.f().s("white").ss(2).mt(0,0).lt(0,P),r.s("#00c5af").sd([20,20]).mt(0,0).lt(0,P).sd(),B.cache(-10,0,20,P)):(r.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(A,0),r.f().s("white").ss(2).mt(0,0).lt(A,0),r.s("#d61fa0").sd([20,20]).mt(0,0).lt(A,0).sd(),B.cache(0,-10,A,20)),o?b.x=A:b.y=P,w.addChild(b)}function g(e){e=e||event,y&&(String.fromCharCode(e.keyCode)==r.toUpperCase()&&w.toggle(),String.fromCharCode(e.keyCode)==a.toUpperCase()&&(w.pixels=!w.pixels))}var p;if(p=zob(e.Guide,arguments,"obj, vertical, percent, hideKey, pixelKey, style, group, inherit",this))return p;z_d("76"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Guide",this.group=s;var f=!1===l?{}:e.getStyle(this.type,this.group,c);if(zot(t)&&(size=null!=f.obj?f.obj:null),zot(t)&&(t=zimDefaultFrame?zimDefaultFrame.stage:"stage"),zot(o)&&(o=null==f.vertical||f.vertical),"stage"==t||t.addChild&&t.getBounds&&t.getBounds()){zot(n)&&(n=null==f.percent||f.percent),zot(r)&&(r=null!=f.hideKey?f.hideKey:"G"),zot(a)&&(a=null!=f.pixelKey?f.pixelKey:"P");var m,z,v,b,y,w=this,C=80,x=26,k=C/6+C/2,T=2*x;o?((b=u("#00c5af","white","white")).shape.regX=C+C/6,b.shape.regY=x/2,b.label.x=-C/2-C/6):((b=u("#d61fa0","white","white")).shape.regX=C/2,b.shape.regY=x+x/4,b.label.y=3*-x/4),"stage"!=t&&t.addChild(w);var A,P,B,I,S=e.added(w,function(){"stage"==t?(y=w.stage,t=y):y=t.stage,t.addChild(w),A=t.getBounds().width,P=t.getBounds().height,o?(b.y=P/2,b.label.text="x:"+(w.percent?"70%":Math.round(70*A/100))):(b.x=A/2,b.label.text="y:"+(w.percent?"70%":Math.round(70*P/100))),B=new createjs.Shape,w.addChild(B),o?B.x=.7*A:B.y=.7*P,M||(t.addChild(w),h()),y.off("stagemousemove",m),m=y.on("stagemousemove",d),y.update()}),M=!1,E={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!n},set:function(e){n=!e,w.resize()}}),window.addEventListener("keydown",g),this.toggled=!0,this.toggle=function(e){return!0===e?w.visible=w.toggled=!0:!1===e?w.visible=w.toggled=!1:(w.visible=!w.visible,w.toggled=w.visible),y.off("stagemousemove",m),w.visible&&(m=y.on("stagemousemove",d,w)),w},!(this.resize=function(){return!!w&&(y&&(h(),d()),!0)})!==l&&i(this,f),this.dispose=function(){return!(!w||(e.noDrag(B),clearInterval(S),w.removeAllChildren(),window.removeEventListener("keydown",g),w.parent&&w.parent.removeChild(w),w=null))}}else zog("zim controls - Guide(): Please provide container with bounds for the obj (setBounds())")},e.extend(e.Guide,e.Container,"clone","zimContainer",!1),e.Grid=function(t,o,n,r,a,l,s,c){function u(t,o,n){var r=new e.Container({style:!1});return r.shape=new createjs.Shape,r.shape.graphics.s(o).ss(1).f(t).r(0,0,b,y),r.shape.alpha=.9,r.addChild(r.shape),r.label=new createjs.Text("10","16px arial",n),r.label.textAlign="center",r.label.textBaseline="middle",r.addChild(r.label),r.mouseChildren=!1,r.mouseEnabled=!1,r}function d(e){var o;e?(o=t.globalToLocal(e.rawX/T.scaleX,e.rawY/T.scaleY),O=o):o={x:O.x,y:O.y},n?(w.label.text="x:"+Math.max(0,Math.min(Math.round(o.x/B*100),100))+"%",w.x=Math.max(A,Math.min(o.x,x)),C.label.text="y:"+Math.max(0,Math.min(Math.round(o.y/I*100),100))+"%"):(w.label.text="x:"+Math.max(0,Math.min(Math.round(o.x),Math.round(B))),w.x=Math.max(A,Math.min(o.x,x)),C.label.text="y:"+Math.max(0,Math.min(Math.round(o.y),Math.round(I)))),C.y=Math.max(P,Math.min(o.y,k)),T&&T.update()}function h(){E=!0,t&&t.getBounds&&(B=t.getBounds().width,I=t.getBounds().height),T&&(T.mouseMoveOutside=!0,T.enableMouseOver(10)),x=B-2*b/3,k=I-y-y,S=new e.Container({style:!1}),z.addChild(S);var r=new createjs.Shape;S.addChild(r);var i=r.graphics;i.s(o).ss(1);var a=new createjs.Shape;if(S.addChild(a),n){for(l=1;l<22;l++)i.mt(l*B/20,0).lt(l*B/20,I);for(l=1;l<20;l++)i.mt(0,l*I/20).lt(B,l*I/20);for(r.alpha=.3,(i=a.graphics).s(o).ss(1),l=1;l<10;l++)i.mt(l*B/10,0).lt(l*B/10,I);for(l=1;l<10;l++)i.mt(0,l*I/10).lt(B,l*I/10)}else{for(l=0;l<B/v;l++)i.mt(l*v,0).lt(l*v,I);for(l=0;l<I/v;l++)i.mt(0,l*v).lt(B,l*v);r.alpha=.3,(i=a.graphics).s(o).ss(1);for(l=0;l<B/(10*v);l++)i.mt(l*(10*v),0).lt(l*(10*v),I);for(var l=0;l<I/(10*v);l++)i.mt(0,l*(10*v)).lt(B,l*(10*v))}i.s("#FFFFFF").ss(8),i.mt(B/2,I/2-40).lt(B/2,I/2+40),i.mt(B/2-40,I/2).lt(B/2+40,I/2),i.s("#000000").ss(4),i.mt(B/2,I/2-40).lt(B/2,I/2+40),i.mt(B/2-40,I/2).lt(B/2+40,I/2),i.s(o).ss(3),i.dr(0,0,B,I),a.alpha=.5,S.cache(0,0,B,I),z.addChild(w),z.addChild(C),T&&T.update()}function g(e){e=e||event,T&&(String.fromCharCode(e.keyCode)==r.toUpperCase()&&z.toggle(),String.fromCharCode(e.keyCode)==a.toUpperCase()&&(z.removeChild(S),S=null,z.pixels=!z.pixels))}var p;if(p=zob(e.Grid,arguments,"obj, color, percent, hideKey, pixelKey, style, group, inherit",this))return p;z_d("78"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Grid",this.group=s;var f=!1===l?{}:e.getStyle(this.type,this.group,c);if(zot(t)&&(size=null!=f.obj?f.obj:null),zot(t)&&(t=zimDefaultFrame?zimDefaultFrame.stage:"stage"),zot(o)&&(o=null!=f.color?f.color:"black"),"stage"==t||t.addChild&&t.getBounds&&t.getBounds()){zot(n)&&(n=null==f.percent||f.percent),zot(r)&&(r=null!=f.hideKey?f.hideKey:"G"),zot(a)&&(a=null!=f.pixelKey?f.pixelKey:"P");var m,z=this,v=10;this.mouseChildren=!1,this.mouseEnabled=!1;var b=80,y=26,w=u("#dddddd",o,"#333333");w.shape.regX=b/2,w.shape.regY=-y/4,w.label.y=3*y/4;var C=u("#dddddd",o,"#333333");C.shape.regX=-b/6,C.shape.regY=y/2,C.label.x=b/2+b/6;var x,k,T,A=b/6+b/2,P=2*y;w.x=A,C.y=P,w.label.text="x:0",C.label.text="y:0","stage"!=t&&t.addChild(z);var B,I,S,M=e.added(z,function(){"stage"==t?(T=z.stage,t=T):T=t.stage,E||(h(),t.addChild(z)),T.off("stagemousemove",m),m=T.on("stagemousemove",d),T.update()}),E=!1,O={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!n},set:function(e){n=!e,z.resize()}}),window.addEventListener("keydown",g),this.toggled=!0,this.toggle=function(e){return!0===e?z.visible=z.toggled=!0:!1===e?z.visible=z.toggled=!1:(z.visible=!z.visible,z.toggled=z.visible),T.off("stagemousemove",m),z.visible&&(m=T.on("stagemousemove",d,z)),z},!(this.resize=function(){return!!z&&(z.removeChild(S),S=null,T&&(h(),d(),setTimeout(function(){z.removeChild(S),S=null,h()},200)),!0)})!==l&&i(this,f),this.dispose=function(){return clearInterval(M),z.removeAllChildren(),window.removeEventListener("keydown",g),z.parent&&z.parent.removeChild(z),!(z=null)}}else zog("zim controls - Grid(): Please provide container with bounds for the obj (setBounds())")},e.extend(e.Grid,e.Container,"clone","zimContainer",!1),e.Tile=function(t,o,n,r,a,l,s,c,u,d,g,p,f,m,z,v,b,y,C,x,k,T){function A(){S.removeAllChildren(),j=[],L=[],D=[],Y=[],X=[],F=W=_=R=0,G=[],H=[],N=[],q=[],V=[],S.items&&S.items.length||(S.items=[]),m=S.items.length;for(var t,o=0,n=0,r=0,i=0;i<m;i++)n=Math.floor(i/S.cols),r=i%S.cols,zot(j[n])&&(j[n]=[]),zot(S.items[i])&&(S.items[i]=new Container(0,0,0,0)),j[n][r]=S.items[i];S.rows=Math.max(1,j.length),S.cols=Math.max(1,zot(j[0])?0:j[0].length);e:for(n=0;n<S.rows;n++)for(G.push([]),H.push([]),q.push([]),g&&zot(s)&&(h=e.Pick.choose(g)),i=0;i<S.cols;i++){if(o++,!zot(m)&&m<o)break e;(t=j[n][i]).snapToPixel=b,S.addChild(t),G[n].push(t.scaleX),H[n].push(t.scaleY),0==n&&d&&zot(l)&&(w=e.Pick.choose(d)),0==n&&V.push(e.Pick.choose(p)),d&&zot(l)||(w=Math.abs(t.width)),g&&zot(s)||(h=Math.abs(t.height)),q[n][i]=[w,h],zot(Y[i])&&(Y[i]=0),zot(X[n])&&(X[n]=0),w>Y[i]&&(Y[i]=w),h>X[n]&&(X[n]=h),zot(L[n])&&(L[n]=0),zot(D[i])&&(D[i]=0),L[n]+=w,D[i]+=h,L[n]>R&&(R=L[n]),D[i]>_&&(_=D[i]),zot(N[i])&&(N[i]=0),N[i]++}if(!1===S.squeezeH)for(i=0;i<Y.length;i++){var a=Y[i];W+=a}if(!1===S.squeezeV)for(i=0;i<X.length;i++)a=X[i],F+=a}function P(t,o){var n,r,i,a;t<=0&&(t=null),o<=0&&(o=null),n=zot(t)||"full"!=S.squeezeH?zot(t)?0<W?W+(S.cols-1)*S.spacingH:R+(S.cols-1)*S.spacingH:Math.max(R+(S.cols-1)*S.spacingH,t):t,r=zot(o)||"full"!=S.squeezeV?zot(o)?0<F?F+(S.rows-1)*S.spacingV:_+(S.rows-1)*S.spacingV:Math.max(_+(S.rows-1)*S.spacingV,o):o,S.setBounds(0,0,n,r);var l=[],s=[],c=[];for(U=0;U<j.length;U++)for(i=j[U],a=0,zot(t),Z=0;Z<i.length;Z++){var u,d;M=i[Z],0==U&&(l[Z]=0,zot(o)||("full"==S.squeezeV?s[Z]=1<N[Z]?(o-D[Z])/(N[Z]-1):0:S.squeezeV?s[Z]=1<N[Z]?Math.max(S.spacingV,(o-D[Z])/(N[Z]-1)):0:s[Z]=1<N[Z]?Math.max(S.spacingV,(r-D[Z])/(N[Z]-1)):0),S.squeezeV?"center"==S.valign||"middle"==S.valign?c[Z]=(r-(D[Z]+(N[Z]-1)*(zot(o)?S.spacingV:s[Z])))/2:"bottom"==S.valign?c[Z]=r-(D[Z]+(N[Z]-1)*(zot(o)?S.spacingV:s[Z])):c[Z]=0:c[Z]=0),M.getBounds(),0==Z&&(zot(t)||(d="full"==S.squeezeH?1<i.length?(t-L[U])/(i.length-1):0:S.squeezeH?1<i.length?Math.max(S.spacingH,(t-L[U])/(i.length-1)):0:1<i.length?Math.max(S.spacingH,(n-L[U])/(i.length-1)):0),u=S.squeezeH?"center"==S.align||"middle"==S.align?(n-(L[U]+(i.length-1)*(zot(t)?S.spacingH:d)))/2:"right"==S.align?n-(L[U]+(i.length-1)*(zot(t)?S.spacingH:d)):0:0,finalVAlign=e.Pick.choose(f)),p=V[Z];var h=q[U][Z][0],g=q[U][Z][1];S.mirrorH&&Z%2==1&&(M.scaleX=-G[U][Z]),M.pos(a,null),!S.squeezeH&&E?!zot(t)||"center"!=p&&"middle"!=p?zot(t)&&"right"==p&&(M.x+=Y[Z]-M.width):M.x+=(Y[Z]-M.width)/2:S.squeezeH?!zot(t)||"center"!=S.align&&"middle"!=S.align?zot(t)&&"right"==S.align&&(M.x+=h-M.width):M.x+=(h-M.width)/2:!zot(t)||"center"!=S.align&&"middle"!=S.align?zot(t)&&"right"==S.align&&(M.x+=Y[Z]-M.width):M.x+=(Y[Z]-M.width)/2,S.mirrorV&&U%2==1&&(M.scaleY=-H[U][Z]),M.pos(null,l[Z]),!S.squeezeV&&O?!zot(o)||"center"!=finalVAlign&&"middle"!=finalVAlign?zot(o)&&"bottom"==finalVAlign&&(M.y+=X[U]-M.height):M.y+=(X[U]-M.height)/2:S.squeezeV?!zot(o)||"center"!=S.valign&&"middle"!=S.valign?zot(o)&&"bottom"==S.valign&&(M.y+=g-M.height):M.y+=(g-M.height)/2:!zot(o)||"center"!=S.valign&&"middle"!=S.valign?zot(o)&&"bottom"==S.valign&&(M.y+=X[U]-M.height):M.y+=(X[U]-M.height)/2,!0!==S.squeezeH&&zot(t)?a+=Y[Z]+(zot(t)?S.spacingH:d):a+=h+(zot(t)?S.spacingH:d),M.x+=u,M.y+=c[Z],!0!==S.squeezeV&&zot(o)?l[Z]+=X[U]+(zot(o)?S.spacingV:s[Z]):l[Z]+=g+(zot(o)?S.spacingV:s[Z])}}var B;if(B=zob(e.Tile,arguments,"obj, cols, rows, spacingH, spacingV, width, height, squeezeH, squeezeV, colSize, rowSize, align, valign, count, mirrorH, mirrorV, snapToPixel, clone, events, group, style, inherit",this))return B;z_d("66.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Tile",this.group=x;var I=!1===k?{}:e.getStyle(this.type,this.group,T);zot(t)&&(t=null!=I.obj?I.obj:new e.Circle),zot(o)&&(o=null!=I.cols?I.cols:1),zot(n)&&(n=null!=I.rows?I.rows:1),zot(l)&&(l=null!=I.width?I.width:null),zot(s)&&(s=null!=I.height?I.height:null),zot(d)&&(d=null!=I.colSize?I.colSize:null),zot(g)&&(g=null!=I.rowSize?I.rowSize:null),zot(l)||(d=null),zot(s)||(g=null),zot(r)&&(r=null!=I.spacingH?I.spacingH:null),zot(a)&&(a=null!=I.spacingV?I.spacingV:null),!zot(r)&&zot(d)||(r=0),!zot(a)&&zot(g)||(a=0),zot(c)&&(c=null!=I.squeezeH&&I.squeezeH),zot(u)&&(u=null!=I.squeezeV&&I.squeezeV),zot(p)&&(p=null!=I.align?I.align:"left"),zot(f)&&(f=null!=I.valign?I.valign:"top"),zot(m)&&(m=null!=I.count?I.count:null),0==m&&(m=null,zon&&zog("ZIM Tile() - count parameter of 0 is ignored - see docs")),zot(z)&&(z=null!=I.mirrorH&&I.mirrorH),zot(v)&&(v=null!=I.mirrorV&&I.mirrorV),zot(b)&&(b=null==I.snapToPixel||I.snapToPixel),b&&(t&&t.stage?t.stage.snapToPixelEnabled=!0:"undefined"!=typeof elem&&zimDefaultFrame&&(zimDefaultFrame.stage.snapToPixelEnabled=!0)),zot(y)&&(y=null==I.clone||I.clone),zot(C)&&(C=null==I.events||I.events);var S=this;S.cols=o,S.rows=n,S.spacingH=r,S.spacingV=a,S.squeezeH=c,S.squeezeV=u;var M,E="function"==typeof p,O="function"==typeof f;S.align=E?"left":p,S.valign=O?"top":f,S.mirrorH=z,S.mirrorV=v,S.items=[];var j,L,D,Y,X,R,_,W,F,G,H,N,V,q,K=0;e:for(var U=0;U<n;U++)for(var Z=0;Z<o;Z++){if(K++,!zot(m)&&m<K)break e;zot(M=e.Pick.choose(t))&&(M=new e.Container(0,0,0,0)),y&&(0==U&&0==Z||(M=M.clone())),C&&M.on("change",function(e){var t=new createjs.Event("change");t.item=e.currentTarget,zot(e.currentTarget.type),S.dispatchEvent(t)}),S.items.push(M),M.tileNum=K-1}A(),P(l,s),this.remake=function(e){return zot(e)||(S.items=e),A(),P(l,s),S},this.resize=function(e,t){return zot(e)&&(e=l),zot(t)&&(t=s),P(l=e,s=t),S},Object.defineProperty(this,"items2D",{get:function(){for(var e,t=[],o=0;o<S.items.length;o++)o%S.cols==0&&(e=[],t.push(e)),e.push(S.items[o]);return t},set:function(e){zon&&zog("ZIM Tile() - items2D is read only")}}),Object.defineProperty(this,"items2DCols",{get:function(){for(var e=[],t=0;t<S.cols;t++)e.push([]);for(t=0;t<S.items.length;t++)e[t%S.cols][Math.floor(t/S.cols)]=S.items[t];return e},set:function(e){zon&&zog("ZIM Tile() - items2DCols is read only")}}),!1!==k&&i(this,I),this.clone=function(){return S.cloneProps(new e.Tile(t.clone?t.clone():t,S.cols,S.rows,S.spacingH,S.spacingV,l,s,S.squeezeH,S.squeezeV,d,g,p,f,S.items.length,S.mirrorH,S.mirrorV,b,y,C,this.style,this.group))}},e.extend(e.Tile,e.Container,"clone","zimContainer",!1),e.Layout=function(t,o,n,r,a,l,s,c,u,d,h){function g(){for(var e=0,t=0;t<o.length;t++)((y=o[t]).given=0)==y[x]&&(e+=y.object.getBounds()[x]);for(t=0;t<o.length;t++)0==(y=o[t])[x]&&(y.given=y.object.getBounds()[x]/e*B)}function p(e){e=e||event,l&&String.fromCharCode(e.keyCode)==c.toUpperCase()&&(b.toggle(),l.stage&&l.stage.update())}var f;if(f=zob(e.Layout,arguments,"holder, regions, lastMargin, backgroundColor, vertical, regionShape, scalingObject, hideKey, style, group, inherit",this))return f;z_d("80"),this.cjsEventDispatcher_constructor(),this.type="Layout",this.group=d;var m=!1===u?{}:e.getStyle(this.type,this.group,h);if(zot(t)&&(t=null!=m.holder?m.holder:null),zot(s)&&(s=null!=m.scalingObject?m.scalingObject:null),!zot(t)&&t.getBounds)if((s=zot(s)?t:s).getBounds&&s.getBounds()){var z=s.getBounds();t.setBounds(0,0,z.width,z.height),zot(n)&&(n=null!=m.lastMargin?m.lastMargin:0),zot(a)&&(a=null==m.vertical||m.vertical),zot(r)&&(r=null!=m.backgroundColor?m.backgroundColor:""),zot(c)&&(c=null!=m.hideKey?m.hideKey:"B"),zot(l)&&(l=null!=m.regionShape?m.regionShape.clone():null);var v=new createjs.Shape,b=this;if(this.active=!0,zot(o)&&(o=null!=m.regions?e.copy(m.regions):null),!zot(o)){var y;this.regions=o;var w=0,C="minWidth",x="width",k="height",T="marginLeft",A="maxHeight";a&&(C="minHeight",x="height",k="width",T="marginTop",A="maxWidth");for(var P=0;P<o.length;P++){if(!(y=o[P]).object||!y.object.getBounds())return void zog("zim controls - Layout(): each region object must have an object with setBounds() set");y[C]||(y[C]=0),y[x]||(y[x]=0),y.backgroundColor||(y.backgroundColor=""),y.given=0,y.maxGiven=0,zot(y[T])&&(y[T]=1e-4),y[A]||(y[A]=100),a?(y.align||(y.align="middle"),y.valign||(0==P?y.valign="top":P==o.length-1?y.valign="bottom":y.valign="middle",1==o.length&&(y.valign="middle"))):(y.valign||(y.valign="top"),y.align||(0==P?y.align="left":P==o.length-1?y.align="right":y.align="middle",1==o.length&&(y.align="middle"))),y[x]&&(y[C]=0),w+=y[x]+y[T]}if(100<(w+=n))zog("zim controls - Layout(): cannot fit regions into 100% bounds");else{var B=100-w;g(),this.resize=function(){if(b.active){z=s.getBounds(),t.setBounds(0,0,z.width,z.height),v.graphics.clear(),""!=r&&v.graphics.f(r).r(0,0,z.width,z.height);for(var i=0;i<o.length;i++)(y=o[i]).maxGiven=0,y.marginGiven=0;for(var c,u,d,h=!0,p=B;h;){for(c=!(h=!1),i=0;i<o.length;i++)0<(y=o[i]).given&&0==y.maxGiven&&(M=y.object.getBounds()[x],E=y.object.getBounds()[k],u=y.given*z[x]/100,(d=y[A]*z[k]/100)<E/M*u?(y.maxGiven=M/E*d*100/z[x],y.given,y.maxGiven,p-=y.maxGiven):c=!1);if(c)break;for(i=totalPrimaries=0;i<o.length;i++)0==(y=o[i])[x]&&0==y.maxGiven&&(totalPrimaries+=y.object.getBounds()[x]);for(i=0;i<o.length;i++)0==(y=o[i])[x]&&0==y.maxGiven&&(y.given=y.object.getBounds()[x]/totalPrimaries*p)}var f=!0;if(0<(y=o[0]).maxGiven?y.maxGiven<y[C]&&(y[x]=y[C],f=!1):0<y.given&&y.given<y[C]&&(y[x]=y[C],f=!1),0<(y=o[o.length-1]).maxGiven?y.maxGiven<y[C]&&(y[x]=y[C],f=!1):0<y.given&&y.given<y[C]&&(y[x]=y[C],f=!1),!f){for(i=w=0;i<o.length;i++)y=o[i],w+=y[x]+y[T];return 100<(w+=n)?void zog("zim display - Layout(): cannot fit regions into 100% bounds"):(B=100-w,g(),void b.resize())}var m=!0,P=0,I=0;for(i=0;i<o.length;i++)P+=(y=o[i])[T],0<y[x]?I+=y[x]:0<y.maxGiven?I+=y.maxGiven:0<y.given&&(I+=y.given),0==y[x]&&(m=!1);if(m||c){var S=100-I-(P+=n);if(P-=n+o[0][T],0!=S&&0!=P)for(i=0;i<o.length;i++)0!=i&&((y=o[i]).marginGiven=y[T]/P*(P+S))}var M,E,O,j,L,D=0,Y=0;if(l&&l.graphics){var X=l.graphics;X.c()}for(i=0;i<o.length;i++)0<(y=o[i]).marginGiven?D+=y.marginGiven*z[x]/100:D+=y[T]*z[x]/100,M=(M=0<y[x]?y[x]:0<y.maxGiven?y.maxGiven:0<y.given?y.given:0)*z[x]/100,E=y[A]*z[k]/100,Y=(z[k]-E)/2,O=a?e.fit(y.object,Y,D,E,M):e.fit(y.object,D,Y,M,E),"top"==y.valign?y.object.y=O.bY:"bottom"==y.valign&&(y.object.y=O.bY+O.bHeight-O.height),"left"==y.align?y.object.x=O.bX:"right"==y.align&&(y.object.x=O.bX+O.bWidth-O.width),l&&l.graphics&&(X.s("white").ss(2).r(O.bX,O.bY,O.bWidth,O.bHeight),X.s("#ff8203").sd([20,20]).r(O.bX,O.bY,O.bWidth,O.bHeight).sd()),L=j=0,0!=D&&D+M!=z[x]||(a?L=1:j=1),E==z[k]&&(a?j=1:L=1),""!=y.backgroundColor&&v.graphics.f(y.backgroundColor).r(O.bX,O.bY,O.bWidth+j,O.bHeight+L),D+=M}},this.resize(),l&&t.addChild(l),t.addChildAt(v,0),window.addEventListener("keydown",p),this.disable=function(){b.active=!1,window.removeEventListener("keydown",p),l&&(l.alpha=0)},this.enable=function(){b.active=!0,window.addEventListener("keydown",p),b.resize(),l&&(l.alpha=1)},this.removeShape=function(){l&&(l.graphics.clear(),t.removeChild(l),l=null,l=!1),window.removeEventListener("keydown",p)},this.toggled=!0,this.toggle=function(e){return l.visible=!0===e||!1!==e&&!l.visible,b.toggled=l.visible,b},!(this.addShape=function(e,o){b.removeShape(),l=e,window.addEventListener("keydown",p),t.addChild(l),b.resize()})!==u&&i(this,m),this.dispose=function(){return b.removeShape(),!0}}}}else zog("zim controls - Layout(): holder must have bounds set or provide a scalingObject with bounds");else zog("zim controls - Layout(): please provide an object with bounds set that holds the objects being laid out")},e.extend(e.Layout,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.Accessibility=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f){function m(e){var t=e.currentTarget.boundsToGlobal(),o=t.x+t.width/2,n=t.y+t.height/2;e.stageX/e.target.stage.scaleX<o-5||e.stageX/e.target.stage.scaleX>o+5||e.stageY/e.target.stage.scaleY<n-5||e.stageY/e.target.stage.scaleY>n+5?b():v()}function z(){Y&&(Y.innerHTML="")}function v(){var t,o;Z=!0,x(),Y&&Y.setAttribute("aria-hidden",!1),e.ACTIONEVENT="click",zns||(ACTIONEVENT="click"),a.stage.removeChild(j),O.alwaysHighlight=!1,a.stage.update();for(var n=0;n<F.length;n++)(o=(t=F[n]).obj.zimTabTag).disabled=!1,t.title=t.title.replace(/\s\(use arrow keys\)/,""),o.setAttribute("aria-label",t.title),o.addEventListener("focus",y)}function b(){Z=!1;for(var e=0;e<F.length;e++)F[e].obj.zimTabTag.disabled=!1;x(),s&&function(){for(var e=0;e<H.length;e++){var t=H[e];t.zimObject&&("Loader"==t.zimObject.type||"TextArea"==t.zimObject.type||"Tag"==t.zimObject.type)||(H[e].style.left="-2000px")}}()}function y(e){var t=e.currentTarget,o=t.zimObject;G=o.zimTabIndex,o.focus=!0;var n=new createjs.Event("change");n.title=t.getAttribute("aria-label"),O.dispatchEvent(n)}function w(e){Z=!1,e.target.focusTab.focus()}function C(){zot(Z)||Z?v():b()}function x(){U=!0,L.removeEventListener("focus",C),D.removeEventListener("focus",C),X.removeEventListener("focus",w),R.removeEventListener("focus",w),X.parentNode.removeChild(X),R.parentNode.removeChild(R),_.removeEventListener("focus",w),W.removeEventListener("focus",w),_.parentNode.removeChild(_),W.parentNode.removeChild(W);for(var e=0;e<Q.length;e++)Q[e][0].off("mousedown",Q[e][1])}function k(e){var t=e.currentTarget;if("RadioButton"==t.type||"TabsButton"==t.type||"PadButton"==t.type)for(var o=0;o<t.zimTabParent.buttons.length;o++){var n=t.zimTabParent.buttons[o];n.zimTabTag.setAttribute("aria-label",n.zimTabTag.getAttribute("aria-label").split(" - currently")[0]+(t.zimTabParent.selectedIndex==n.tabIndex?" - currently selected.":" - currently not selected."))}O.tabIndex=e.currentTarget.zimTabIndex,O.activatedObject=t}function T(e){return e.talk?e.talk:"TextArea"==e.type||"RadioButtons"==e.type||"Tabs"==e.type||"Pad"==e.type?e.type:"Waiter"==e.type?"Waiter active - please wait":e.text?e.type+" - "+("a"==e.text||"A"==e.text?"eh":e.text):e.type+("Dial"==e.type||"Slider"==e.type||"ColorPicker"==e.type||"Stepper"==e.type?" (use arrow keys)":"")+("TextArea"==e.type?" (press ENTER to edit)":"")}function A(t){var o=t.obj;t.title=t.title.replace(/\.$/,""),"RadioButton"==o.type||"TabsButton"==o.type||"PadButton"==o.type?t.title=t.title+(o.tabIndex==o.zimTabParent.selectedIndex?" - currently selected":" - currently not selected"):"CheckBox"==o.type?t.title=t.title+(o.checked?" - currently checked":" - currently not checked"):"Stepper"==o.type?t.title=t.title+" - currently displaying "+o.currentValue:"Slider"==o.type||"Dial"==o.type?t.title=t.title+" - currently at "+e.decimals(o.currentValue,O.decimals):"ColorPicker"==o.type?t.title=t.title+" - currently at "+o.selectedColor:"TextArea"==o.type?t.title=t.title+(""!=o.tag.value?"":" - placeholder: "+o.tag.placeholder):"Indicator"==o.type&&(t.title=t.title+" - currently "+(0<=o.selectedIndex?"at "+(o.selectedIndex+1)+" of "+o.num:"not indicating")),t.title+="."}function P(e,t,o,n,r){var i;if(n&&(g=n.obj),n&&("TextArea"==g.type||"Loader"==g.type))return(i=g.tag).setAttribute("aria-label",t),g&&i.setAttribute("aria-hidden",!g.stage),"before"==r?o.parentNode.insertBefore(i,o):o.parentNode.insertBefore(i,o.nextSibling),i.style.zIndex=-5,i.zimObject=g,n.obj.zimTabTag=i,H.push(i),i;if(!n||"Dial"!=g.type&&"Slider"!=g.type&&"Stepper"!=g.type&&"ColorPicker"!=g.type)i=document.createElement("div"),g&&(i.zimObject=g),i.innerHTML="tag",i.setAttribute("role",l?"application":"button");else{var s,c,u=[];if("Dial"==g.type||"Slider"==g.type)for(var d=g.step<=0?(g.max-g.min)/20:g.step,h=g.min;h<g.max;h+=d)u.push(g.min+h);else"Stepper"==g.type?u=g.stepperArray:"ColorPicker"==g.type&&(u=g.colors);for((i=document.createElement("select")).disabled=!0,i.zimObject=g,i.addEventListener("change",function(e){Z&&(e.currentTarget.zimObject.zimTabParent.currentValueEvent=e.target.value,a.stage.update())}),i.size=1,h=0;h<u.length;h++)s=u[h],(c=document.createElement("option")).setAttribute("aria-label",s),c.innerHTML=s,i.add(c),s==g.zimTabParent.currentValue&&c.setAttribute("selected","selected");i.setAttribute("role","button")}if(i.setAttribute("id",e),i.setAttribute("tabindex",0),i.setAttribute("aria-label",t),g&&i.setAttribute("aria-hidden",!g.stage),"before"==r?o.parentNode.insertBefore(i,o):o.parentNode.insertBefore(i,o.nextSibling),i.style.position="absolute",n){var g,p=(g=n.obj).boundsToGlobal();a.retina?(i.style.left=a.x+p.x*a.scale/E+"px",i.style.top=a.y+p.y*a.scale/E+"px",i.style.width=p.width*a.scale/E+"px",i.style.height=p.height*a.scale/E+"px"):(i.style.left=a.x+p.x*a.scale+"px",i.style.top=a.y+p.y*a.scale+"px",i.style.width=p.width*a.scale+"px",i.style.height=p.height*a.scale+"px"),n.obj.zimTabTag=i}else i.style.left="-1000px",i.style.top=a.y+"px";return i.style.overflow="hidden",i.style.zIndex=-5,i.style.fontSize="20px",i.style.color="rgba(0,0,0,.01)",H.push(i),i}function B(e){e.ctrlKey?I(e.shiftKey?-1:1):(e.shiftKey?O.tab(-1):O.tab(1),e.preventDefault())}function I(e){$=!1,zid(q+(1==e?"SuffixTab":"PrefixTab")).focus(),a.stage.removeChild(p),a.stage.update(),O.tabIndex=-1}var S;if(S=zob(e.Accessibility,arguments,"appName, tabOrder, tabIndex, cycle, decimals, frame, application, alwaysHighlight, AHTime, AHColor, AHBorderWidth, AHBorderPadding, AHAlpha, AHObject, AHObjectScale",this))return S;if(z_d("30.5"),this.cjsEventDispatcher_constructor(),this.type="Accessibility",zot(t)&&(t="application"),zot(r)&&(r=!1),zot(i)&&(i=2),zot(a)&&(a=zimDefaultFrame),zot(l)&&(l=!e.mobile()),zot(s)&&(s=!1),zot(c)&&(c=700),zot(u)&&(u="brown"),zot(d)&&(d=3),zot(h)&&(h=5),zot(g)&&(g=.8),zot(f)&&(f=.8),zot(p)){var M=new e.Shape({style:!1});M.mouseEnabled=!1}else p.mouseEnabled&&(p.mouseEnabled=!1);var E=a.retina&&window.devicePixelRatio||1,O=this;O.cycle=r,O.decimals=i,O.alwaysHighlight=s,O.AHTime=c,O.AHColor=u,O.AHBorderWidth=d,O.AHBorderPadding=h,O.AHAlpha=g,O.AHObjectScale=f;var j,L,D,Y,X,R,_,W,F=-1,G=-1,H=[],N=[],V={RadioButtons:"option",Tabs:"tab",Pad:"key"},q=a.canvas.id,K=e.mobile(),U=!1,Z=null,Q=[];Object.defineProperty(this,"tabOrder",{get:function(){return F},set:function(e){L&&L.removeEventListener("focus",z),D&&D.removeEventListener("focus",z);for(var o=0;o<H.length;o++)H[o].parentElement&&(H[o].outerHTML="");var n,r;for(H=[],o=0;o<N.length;o++)(n=F[o])&&N[o][0].off("mousedown",N[o][1]);N=[],F=[];var i=[],l=a.canvas,s=0;for(o=0;o<e.length;o++){if("HotSpots"==(n=e[o]).type&&(e.splice.apply(e,[o,1].concat(n.hotSpots)),n=n.hotSpots[0]),"HotSpot"==n.type&&(n=n.spot),n.constructor=={}.constructor){if(!(r=n.obj)||!r.getStage)continue;n.title||(n.title=T(r))}else n={obj:r=n,title:T(n)};if("RadioButtons"==r.type||"Tabs"==r.type||"Pad"==r.type){var c=[];s--;for(var u=0;u<r.buttons.length;u++){s++;var d=r.buttons[u],h={obj:d,title:n.title+" - "+V[r.type]+": "+("a"==d.text||"A"==d.text?"eh":d.text)};c.push(h),d.zimTabParent=r,d.zimTabParent.zimAccessibility=O,d.zimTabIndex=o+s,d.tabIndex=u,d.zimAccessibility=O,A(h),l=P(q+"Tab"+(o+s),h.title,l,h),N.push([d,d.on("mousedown",k)]),U||Q.push([d,d.on("mousedown",m)])}i=i.concat(c)}else r.zimTabIndex=o+s,r.zimTabParent=r,A(n),r.zimAccessibility=O,N.push([r,r.on("mousedown",k)]),U||Q.push([r,r.on("mousedown",m)]),i.push(n),l=P(q+"Tab"+(o+s),n.title,l,n)}(L=O.startAppTag=P(q+"PrefixTab",t+" start",a.canvas,null,"before")).addEventListener("focus",z),U||(L.addEventListener("focus",C),(X=P(q+"noAriaTab","",L,null,"before")).setAttribute("aria-hidden",!0),X.focusTab=L,X.addEventListener("focus",w),(_=P(q+"noAriaTab","",L)).setAttribute("aria-hidden",!0),_.focusTab=L,_.addEventListener("focus",w)),l=P(q+"BufferTab","",l),K&&l.setAttribute("aria-hidden",!0),l=D=O.endAppTag=P(q+"SuffixTab",t+" end",l),D.addEventListener("focus",z),U||(D.addEventListener("focus",C),l=R=P(q+"noAriaTab","",D),R.setAttribute("aria-hidden",!0),R.focusTab=D,R.addEventListener("focus",w),(W=P(q+"noAriaTab","",D,null,"before")).setAttribute("aria-hidden",!0),W.focusTab=D,W.addEventListener("focus",w)),F=i}}),Object.defineProperty(this,"tabIndex",{get:function(){return G},set:function(t){function o(){if(G&&-1<G)F&&F[G]&&(F[G].obj.focus=!1);else for(var e=0;e<F.length;e++)F[e].obj.focus=!1}function n(){o(),$=!1,O.AHObject&&a.stage.removeChild(O.AHObject),O.alwaysHighlightShape&&a.stage.removeChild(O.alwaysHighlightShape),a.stage.update(),G=-1}if(_state)if(t<0||t>=F.length)n();else{t!=G&&o();var r=F[t].obj;if(r.stage){if(G=t,r.focus=!0,ee=!($=!0),O.changeTitle(r),r.zimTabTag.focus(),setTimeout(function(){r.zimTabTag.focus();var e=new createjs.Event("change");e.title=r.zimTabTag.getAttribute("aria-label"),O.dispatchEvent(e)},150),O.alwaysHighlight&&!Z){if(O.AHObject){j=O.AHObject;var i=e.boundsToGlobal(r);O.AHObject.alp(O.AHAlpha).addTo(a.stage,null,!1),O.AHObject.fit(i.x,i.y,i.width,i.height),O.AHObject.sca(O.AHObject.scaleX*O.AHObjectScale),0<O.AHTime&&(J=setTimeout(function(){a.stage.removeChild(O.AHObject),a.stage.update()},O.AHTime))}else{j=M;var l=r.getBounds(),s=r.localToGlobal(l.x-5,l.y-5),c=r.localToGlobal(l.x+l.width+5,l.y-5),u=r.localToGlobal(l.x+l.width+5,l.y+l.height+5),d=r.localToGlobal(l.x-5,l.y+l.height+5),h=M.graphics;h.clear(),h.s(O.AHColor).ss(O.AHBorderWidth).mt(s.x,s.y).lt(c.x,c.y).lt(u.x,u.y).lt(d.x,d.y).lt(s.x,s.y).cp(),M.alpha=O.AHAlpha,0<O.AHTime&&(J=setTimeout(function(){a.stage.removeChild(M),a.stage.update()},O.AHTime))}a.stage.addChild(j),a.stage.update()}}else n()}}}),Object.defineProperty(this,"aria",{get:function(){return Z},set:function(e){(Z=e)&&v()}}),zot(o)?setTimeout(function(){if(-1==F){F=[];var t=[];e.loop(a.stage,function(e){e.type&&t.push(e)}),O.tabOrder=t,zot(n)||(O.tabIndex=n)}},50):(F=[],O.tabOrder=o,zot(n)||(O.tabIndex=n));var J,$=!1,ee=!0,te=a.on("keydown",function(e){if(9==e.keyCode&&(function(){for(var e=!1,t=0;t<H.length;t++)if(document.activeElement==H[t]){e=!0;break}return!(document.activeElement!=a.canvas&&!e)}()||($=!1,-1!=O.tabIndex&&(O.tabIndex=-1)),$?B(e):function(e){a.shiftKey||zid(q+"PrefixTab")!=document.activeElement&&a.canvas!=document.activeElement?!a.shiftKey||zid(q+"SuffixTab")!=document.activeElement&&zid(q+"BufferTab")!=document.activeElement||(0<F.length&&(F[0].obj.focus=!0),$=ee=!0,B(e)):(0<F.length&&(F[F.length-1].obj.focus=!0),$=ee=!0,B(e))}(e)),$&&0<F.length&&0<=O.tabIndex&&13==e.keyCode){var t=F[O.tabIndex],o=t.obj;if(t&&o.stage){var n=new createjs.Event("mousedown"),r=new createjs.Event("click");n.fromEnter=r.fromEnter=!0,"Pane"==o.type?(o.backdrop.dispatchEvent(n),o.backdrop.dispatchEvent(r)):(o.dispatchEvent(n),o.dispatchEvent(r))}}});this.tab=function(e){if(clearTimeout(J),j&&a.stage.removeChild(j),zot(e)&&(e=1),0!=F.length)for(var t=0;t<F.length;t++){var o=F[t].obj;if(o.focus){o.focus=!1;var n=t+e,r=(n+1e4*F.length)%F.length,i=F[r];o=i.obj;for(var l=0,s=!1;!o.stage||!(!o.zimTabParent&&(zot(o.enabled)||o.enabled)||o.zimTabParent&&(zot(o.zimTabParent.enabled)||o.zimTabParent.enabled));)if(l++,r=((n+=e)+100*F.length)%F.length,o=(i=F[r]).obj,l==F.length){s=!0;break}if(s||!O.cycle&&n!=r&&!ee)return void I(e);ee=!1,O.tabIndex=r;break}}else I(e)};var oe=!(this.changeTitle=function(e,t,o){if("number"!=typeof e&&(e=e.zimTabIndex),!zot(e))if(o&&zot(t))O.tabIndex=e;else{var n=F[e],r=n.obj;zot(t)&&(t=r.zimTabTag.getAttribute("aria-label").split(" - currently")[0]),n.title=t,A(n),r.zimTabTag.setAttribute("aria-label",n.title),o&&(O.tabIndex=e)}});this.talk=function(e){oe||((Y=P(q+"TalkTab","",D)).setAttribute("role","alert"),oe=!0),Y.setAttribute("aria-label",e),Y.innerHTML=" ",Y.innerHTML=e;var t=new createjs.Event("change");t.title=e,O.dispatchEvent(t)},this.resize=function(e){function t(e){if("TextArea"!=e.type&&"Loader"!=e.type){var t=e.boundsToGlobal(),o=e.zimTabTag;a.retina?(o.style.left=a.x+t.x*a.scale/E+"px",o.style.top=a.y+t.y*a.scale/E+"px",o.style.width=t.width*a.scale/E+"px",o.style.height=t.height*a.scale/E+"px"):(o.style.left=a.x+t.x*a.scale/E/E+"px",o.style.top=a.y+t.y*a.scale/E/E+"px",o.style.width=t.width*a.scale/E/E+"px",o.style.height=t.height*a.scale/E/E+"px"),o.setAttribute("aria-hidden",!e.stage),o.hidden=!e.stage}else e.resize()}if(zot(e)){if(O.alwaysHighlight&&!zot(Z))return;for(var o=0;o<F.length;o++)t(F[o].obj)}else{if("number"!=typeof e&&(e=e.zimTabIndex),e<0)return;var n=F[e].obj;if(!n.stage&&j&&n==O.currentObject&&(a.stage.removeChild(j),a.stage.update()),O.alwaysHighlight&&!zot(Z))return;t(n)}},Object.defineProperty(this,"currentObject",{get:function(){return F[G]&&F[G].obj?F[G].obj:null},set:function(e){for(var t=0;t<F.length;t++)if(F[t].obj==e){O.tabIndex=t;break}}}),_state=!0,Object.defineProperty(this,"enabled",{get:function(){return _state},set:function(e){_state=e}}),this.dispose=function(){O.tabOrder=[];for(var e=0;e<H.length;e++)H[e].parentElement&&(H[e].outerHTML="");O.removeAllEventListeners(),a.off("keydown",te)}},e.extend(e.Accessibility,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.Manager=function(e){z_d("75");var t=this;this.type=e,this.items=[],this.add=function(e){Array.isArray(e)?t.items=t.items.concat(e):t.items.push(e)},this.remove=function(e){if(zot(e))t.items=[];else{var o;Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){o=e[n];var r=t.items.indexOf(o);-1!=r&&t.items.splice(r,1)}}},this.resize=function(){if(t)for(var e=0;e<t.items.length;e++)t.items[e].resize?t.items[e].resize():t.items.splice(e)},this.toggle=function(e){if(t)for(var o=0;o<t.items.length;o++)t.items[o].toggle?t.items[o].toggle(e):t.items.splice(o)},this.dispose=function(){for(var e=t.items.length-1;0<=e;e--)t.items[e].dispose();return t.items=[],!(t=null)}},e.ResizeManager=function(){z_d("75.5"),e.Manager.call(this,"ResizeManager")},e.ResizeManager.prototype=new e.Manager,e.ResizeManager.prototype.constructor=e.ResizeManager,e.TransformManager=function(e,t){function n(e){!localStorage||e&&!e.pressup||r.savePersist(e)}z_d("75.7");var r=this;this.type="TransformManager",this.items=[],this.add=function(e){var t,o=[];o=Array.isArray(e)?e:[e];for(var n=!1,i=0;i<o.length;i++)t=o[i],0==r.items.length&&0==i&&(n=!0),"Bloob"==t.type||"Squiggle"==t.type?(r.persistID||(n?(n=!1,t.controlsVisible=!0,r.currentObject=t):t.controlsVisible=!1),t.on("change",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.controlType,r.dispatchEvent(t)}),t.on("controlsshow",function(e){var t=new createjs.Event("transformshow");r.currentObject=t.transformObject=e.target,r.dispatchEvent(t)}),t.on("controlshide",function(e){var t=new createjs.Event("transformhide");t.transformObject=e.target,r.currentObject=null,r.dispatchEvent(t)}),t.on("update",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.controlType,r.dispatchEvent(t)})):(transObj=t.transformControls,r.persistID||(n&&"Layer"!=t.type?(n=!1,transObj&&transObj.visible&&transObj.show(),r.currentObject=t):transObj&&transObj.hide()),t.on("transformed",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.transformType,r.dispatchEvent(t)}),t.on("transformshow",function(e){var t=new createjs.Event("transformshow");r.currentObject=t.transformObject=e.target,r.dispatchEvent(t)}),t.on("transformhide",function(e){var t=new createjs.Event("transformhide");t.transformObject=e.target,r.currentObject=null,r.dispatchEvent(t)}));r.items=r.items.concat(e)},this.remove=function(e){if(zot(e))r.items=[];else{var o;Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){o=e[n],r.currentObject==o&&(r.currentObject=null),o.transformedEvent&&(o.off("transformed",o.transformedEvent),o.transformedEvent=null),"Bloob"==o.type||"Squiggle"==o.type?o.controlsVisible=!1:o.transformControls.remove();var i=r.items.indexOf(o);-1!=i&&r.items.splice(i,1)}t&&r.savePersist()}},this.show=function(e){if(!zot(e)){if("Bloob"==e.type||"Squiggle"==e.type)e.controlsVisible||(e.controlsVisible=!0);else{var t=e.transformControls;if(!t||t.visible)return;t.show()}r.currentObject=e}},this.hide=function(e){if(!zot(e))if(r.currentObject==e&&(r.currentObject=null),"Bloob"==e.type||"Squiggle"==e.type)e.controlsVisible&&(e.controlsVisible=!1);else{var t=e.transformControls;if(!t||t.visible)return;t.hide()}},this.hideAll=function(e){for(var t,o,n=0;n<r.items.length;n++)if((o=r.items[n])&&(o.transformControls||o.update)){if(r.items[n]==e)continue;"Bloob"==o.type||"Squiggle"==o.type?o.controlsVisible&&(o.controlsVisible=!1):(t=r.items[n].transformControls).visible&&t.hide()}else r.items.splice(n);r.currentObject=null},this.resize=function(){if(r){for(var e,o=0;o<r.items.length;o++)(e=r.items[o])&&(e.transformControls||e.update)?"Bloob"==e.type||"Squiggle"==e.type?e.update():e.transformControls.resize():r.items.splice(o);t&&r.savePersist()}},zot(e)||r.add(e);var i="TransformManager persist(persistID) - sorry, must provide id";this.persist=function(e){if(zot(e)&&zon)zog(i);else{r.persistID=e;var t,o=0;if(localStorage&&localStorage[e]){var a=r.persistData=JSON.parse(localStorage[e]);if(a.length==r.items.length)for(var l=0;l<r.items.length;l++)a[l].controlsVisible&&(r.currentObject=r.items[l]),!a[l]||"Bloob"!=a[l].type&&"Squiggle"!=a[l].type?a[l]&&(zot(r.items[l].transformControls)?function(){var e=r.items[l],t=a[l];interval(50,function(n){e.transformControls&&(e.transformControls.setData(t),e.dispatchEvent("persistset"),++o==a.length&&setTimeout(function(){r.dispatchEvent("persistcomplete")},100),n.clear())},20)}():(r.items[l].transformControls.setData(a[l]),function(){var e=r.items[l];timeout(50,function(t){e.dispatchEvent("persistset"),++o==a.length&&setTimeout(function(){r.dispatchEvent("persistcomplete")},100)})}())):(r.items[l].points.length!=a[l].points.length&&(r.items[l].points=a[l].points),r.items[l].setData(a[l]))}for(l=0;l<r.items.length;l++)(t=r.items[l]).transformedEvent||("Bloob"==t.type||"Squiggle"==t.type?(t.transformedEvent=t.on("change",n),t.transformedEvent=t.on("update",n),t.transformedEvent=t.on("controlsshow",n),t.transformedEvent=t.on("controlshide",n)):(t.transformedEvent=t.on("transformed",n),t.transformedEvent=t.on("transformshow",n),t.transformedEvent=t.on("transformhide",n)))}},this.savePersist=function(e){for(var t=[],o=0;o<r.items.length;o++)it=r.items[o],"Bloob"==it.type||"Squiggle"==it.type?it.recordData&&t.push(it.recordData()):it.transformControls&&it.transformControls.recordData&&t.push(it.transformControls.recordData());r.persistData=t,localStorage[r.persistID]=JSON.stringify(t)},this.clearPersist=function(e){zot(e)&&zon?zog(i):(r.persistData=null,localStorage&&localStorage.removeItem(e))},this.stopPersist=function(){for(var e=0;e<r.items.length;e++)it=r.items[e],it.transformedEvent&&("Bloob"==it.type||"Squiggle"==it.type?it.off("change",it.transformedEvent):it.off("transformed",it.transformedEvent),it.transformedEvent=null);r.persistData=null},zot(t)||r.persist(t),this.dispose=function(e,t){if(zot(e)&&(e=!0),r.removeAllEventListeners(),r.persistID&&e&&r.stopPersist(),t)for(var n=0;n<r.items.length;n++)o=r.items[n],"Bloob"==o.type||"Squiggle"==o.type?o.dispose():o.transformControls.dispose()}},e.extend(e.TransformManager,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.GuideManager=function(){z_d("77"),e.Manager.call(this,"GuideManager")},e.GuideManager.prototype=new e.Manager,e.GuideManager.prototype.constructor=e.GuideManager,e.GridManager=function(){z_d("79"),e.Manager.call(this,"GridManager")},e.GridManager.prototype=new e.Manager,e.GridManager.prototype.constructor=e.GridManager,e.LayoutManager=function(){z_d("81"),this.type="LayoutManager";var e=this;this.items=[],this.add=function(t){e.items.push(t)},this.resize=function(){for(var t=0;t<e.items.length;t++)e.items[t].resize()},this.disable=function(){for(var t=0;t<e.items.length;t++)e.items[t].disable()},this.enable=function(){for(var t=0;t<e.items.length;t++)e.items[t].enable()},this.dispose=function(){for(var t=0;t<e.items.length;t++)e.items[t].removeShape();return!0}},e.SelectionSet=function(e){z_d("81.5"),this.type="SelectionSet",zot(e)&&(e=[]),this.selections=e,this.clear=function(){this.selections=[]},this.isSelected=function(e){return 0<=this.selections.indexOf(e)},this.add=function(e,t,o,n){if(!(zot(e)||(zot(t)&&(zot(this.selectionManager)||(t=this.selectionManager.multiple)),zot(this.selectionManager)||(this.selectionManager.setCurrent(this),!t&&this.selectionManager.multipleSets&&this.selectionManager.clear()),t||this.clear(),0<=this.selections.indexOf(e)))){if(this.selections.push(e),!zot(o)){Array.isArray(o)||(o=[o]);for(var r=0;r<=o.length;r++)o[r].add(e,t)}if(!zot(n))for(Array.isArray(n)||(n=[n]),r=0;r<=n.length;r++)n[r].remove(e,t)}},this.remove=function(e,t,o,n){if(!zot(e)){zot(t)&&(zot(this.selectionManager)||(t=this.selectionManager.multiple)),zot(this.selectionManager)||this.selectionManager.setCurrent(this),t||this.clear();var r=this.selections.indexOf(e);if(zot(this.selectionManager)||(this.selectionManager.setCurrent(this),!t&&this.selectionManager.multipleSets&&this.selectionManager.clear()),t||this.clear(),t?0<=r&&this.selections.splice(r,1):this.clear(),!zot(o)){Array.isArray(o)||(o=[o]);for(var i=0;i<=o.length;i++)o[i].remove(e,t)}if(!zot(n))for(Array.isArray(n)||(n=[n]),i=0;i<=n.length;i++)n[i].add(e,t)}},this.toggle=function(e,t,o,n){this.isSelected(e)?this.remove(e,t,o,n):this.add(e,t,o,n)},this.dispose=function(){return this.clear(),!(this.selections=null)}},e.SelectionManager=function(e,t,o){z_d("81.6"),this.cjsEventDispatcher_constructor(),this.type="SelectionManager",zot(e)&&(e=[]),zot(o)&&(o=!0),Array.isArray(e)||(e=[e]),this.sets=e,this.multipleKey=t,this.multipleSets=o,this.multiple=!1;for(var n=this,r=0;r<e.length;r++)e[r].selectionManager=this;this.clear=function(){this.currentSet=null;for(var t=0;t<e.length;t++)e[t].clear()},this.setCurrent=function(t){this.currentSet=t;for(var o=0;o<e.length;o++)e[o]!=t&&(this.multipleSets||e[o].clear())};var i=new createjs.Event("keydown");this.eventRemove=i.remove,this.keydownEvent=window.addEventListener("keydown",function(e){e.remove=n.eventRemove,n.multipleKey&&(n.multiple=e[n.multipleKey+"Key"]),n.ctrlKey=e.ctrlKey,n.shiftKey=e.shiftKey,n.metaKey=e.metaKey,n.dispatchEvent(e),90==e.keyCode&&(n.ctrlKey||n.metaKey)&&n.dispatchEvent("undo")}),this.keyupEvent=window.addEventListener("keyup",function(e){n.multipleKey&&(n.multiple=e[n.multipleKey+"Key"]),n.ctrlKey=e.ctrlKey,n.shiftKey=e.shiftKey,n.metaKey=e.metaKey,e.remove=n.eventRemove,n.dispatchEvent(e)}),this.dispose=function(){window.removeEventListener("keydown",this.keydownEvent),window.removeEventListener("keyup",this.keyupEvent)}},e.extend(e.SelectionManager,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.Swipe=function(t,o,n,r){var i;if(i=zob(e.Swipe,arguments,"obj, distance, duration, isometric",this))return i;if(z_d("70"),this.cjsEventDispatcher_constructor(),this.type="Swipe",!zot(t)&&t.on){var a,l,s,c,u,d;zot(o)&&(o=30),zot(n)&&(n=80),this.distance=o,this.duration=n,this.active=!0;var h,g=this;t.on("mousedown",function(e){function o(){var t=new createjs.Event("swipe");if(t.obj=g.obj,t.stageX=e.stageX/h.scaleX,t.stageY=e.stageY/h.scaleY,t.rawX=e.rawX/h.scaleX,t.rawY=e.rawY/h.scaleY,t.swipeX=t.swipeY=0,g.direction="none",r){if(Math.abs(s-a)>g.distance||Math.abs(c-l)>g.distance){var o=180*Math.atan2(c-l,s-a)/Math.PI;270<=(o=(o+360)%360)&&o<360?(t.swipeY=-1,g.direction="up"):0<=o&&o<90?(t.swipeX=1,g.direction="right"):90<=o&&o<180?(t.swipeY=1,g.direction="down"):180<=o&&o<270&&(t.swipeX=-1,g.direction="left")}}else Math.abs(s-a)>Math.abs(c-l)?(s-a>g.distance&&(t.swipeX=1,g.direction="right"),a-s>g.distance&&(t.swipeX=-1,g.direction="left")):(c-l>g.distance&&(t.swipeY=1,g.direction="down"),l-c>g.distance&&(t.swipeY=-1,g.direction="up"));g.dispatchEvent(t)}g.active&&!e.target.zimNoSwipe&&(g.obj=e.target,h=e.target.stage,s=a=e.stageX/h.scaleX,c=l=e.stageY/h.scaleY,u=!0,g.dispatchEvent("swipedown"),clearTimeout(d),d=setTimeout(function(){u&&(o(),u=!1)},g.duration),t.on("pressmove",function(e){s=e.stageX/h.scaleX,c=e.stageY/h.scaleY}),t.on("pressup",function(e){u&&(o(),u=!1,clearTimeout(d))}))}),this.disable=function(){g.active=!1},this.enable=function(){g.active=!0}}else zog("zim controls - Swipe():\nPlease pass in object")},e.extend(e.Swipe,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.Swiper=function(t,o,n,r,i,a,l,s,c,u,d,h){function g(e){A=e.target.stage,P=!0,v=i?e.stageX/A.scaleX:e.stageY/A.scaleY,b=x.target[x.property],x.dispatchEvent("swipedown")}function p(e){var t=v-(i?e.stageX/A.scaleX:e.stageY/A.scaleY);if(0<Math.abs(t)&&(x.swiperMoving=!0),T=b-t*x.sensitivity*u,zot(a)||zot(l)||!d)zot(a)||(T=Math.max(T,a)),zot(l)||(T=Math.min(T,l));else{var o=T;T=(T+1e4*(l-a)-a)%(l-a)+a,Math.abs(o-T)>.8*Math.abs(l-a)&&(x.immediate(T),v=i?e.stageX/A.scaleX:e.stageY/A.scaleY,b=x.target[x.property])}x.desiredValue=T,x.dispatchEvent("swipemove")}function f(){k.off("mousedown",y),k.off("pressmove",w),k.off("pressup",C)}function m(){k.canvas?(k.off("stagemousedown",y),k.off("stagemousemove",w),k.off("stagemouseup",C)):f(),e.Ticker.remove(x.target.swiperTicker)}var z;if(z=zob(e.Swiper,arguments,"swipeOn, target, property, sensitivity, horizontal, min, max, damp, integer, factor, loop, pauseTime",this))return z;if(z_d("69.5"),this.cjsEventDispatcher_constructor(),this.type="Swiper",!zot(t)&&t.getStage&&t.stage){if(!zot(o)){zot(r)&&(r=1),zot(i)&&(i=!0),zot(s)&&(s=.1),zot(c)&&(c=!1),zot(u)&&(u=1),zot(d)&&(d=!1),zot(h)&&(h=200);var v,b,y,w,C,x=this,k=t,T=x.desiredValue=o[n];this.target=o,this.property=n,this.sensitivity=r;var A,P=!1;k.canvas?(y=k.on("stagemousedown",function(e){P=!0,g(e),w=k.on("stagemousemove",p),C=k.on("stagemouseup",function(){P=!1,k.off("stagemousemove",w),k.off("stagemouseup",C),x.dispatchEvent("swipeup")})}),A=k):(A=k.stage,f(),y=k.on("mousedown",g),w=k.on("pressmove",p),C=k.on("pressup",function(){P=!1,x.dispatchEvent("swipeup")}));var B=new e.Damp(x.target[x.property],s),I=(x.target[x.property],0),S=null;x.target.swiperTicker=e.Ticker.add(function(){T==I?T!=S&&(x.pauseTimeout&&x.pauseTimeout.clear(),S=T,x.pauseTimeout=e.timeout(h,function(){x.dispatchEvent("swipepause"),x.pauseTimeout=null})):(S=null,I=T,x.pauseTimeout&&x.pauseTimeout.clear()),x.swiperMoving&&(x.target[x.property]=c?Math.round(B.convert(T)):B.convert(T),!P&&!zot(a)&&!zot(l)&&Math.abs(x.target[x.property]-T)<Math.abs(l-a)/1e3?(x.swiperMoving=!1,x.target[x.property]=T,x.immediate(x.target[x.property]),x.dispatchEvent("swipestop")):x.target[x.property])},A),this.immediate=function(e){B.immediate(e),x.target[x.property]=c?Math.round(e):e,x.desiredValue=T=e};var M=!0;Object.defineProperty(x,"enabled",{get:function(){return M},set:function(t){M!=t&&(t?(k.canvas?y=k.on("stagemousedown",y):(y=k.on("mousedown",y),w=k.on("pressmove",w),C=k.on("pressup",C)),x.immediate(x.target[x.property]),x.target.swiperTicker=e.Ticker.add(x.target.swiperTicker,A)):m(),M=Boolean(t))}}),Object.defineProperty(x,"desiredValue",{get:function(){return T},set:function(e){T=e}}),this.dispose=function(){m(),B=null}}}else zog("zim.Swiper() - please provide container on stage")},e.extend(e.Swiper,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.MotionController=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C){function x(e){var t,n="keydown"==o?e.keyCode:e.buttonCode;for(Z=0;Z<4;Z++)if(-1<a[Z].indexOf(n)){if(l||"both"!=E.axis||(te.dirX=te.dirY=0),te["dir"+$[Z]]=ee[Z],Q[Z]=1,0==(t=J.indexOf(Z)))return;return 0<t&&J.splice(t,1),void J.unshift(Z)}}function k(e){var t,n="keydown"==o?e.keyCode:e.buttonCode;for(Z=0;Z<4;Z++)if(-1<a[Z].indexOf(n)){if((Q[Z]=0)<=(t=J.indexOf(Z))&&J.splice(t,1),"both"!=E.axis||l)te["dir"+$[Z]]=-Q[2*Math.floor(Z/2)]+Q[2*Math.floor(Z/2)+1];else if(0<J.length){te["dir"+$[Z]]=0;var r=J[0];te["dir"+$[r]]=ee[r]}else te.dirX=te.dirY=0;return}}function T(){var e=m.globalToLocal(E.moveX,E.moveY);E.x=e.x,E.y=e.y,P(),"Pen"==t.type&&!U&&t.drawing&&(U=!0)}function A(e){ae.rotation+=e.dirX*E.turnSpeed,E.rotation=ae.rotation,ae.speedX=Math.sin(ae.rotation*Math.PI/180)*E.speed*-e.dirY,ae.speedY=-Math.cos(ae.rotation*Math.PI/180)*E.speed*-e.dirY,E.x+=ae.speedX,E.y+=ae.speedY}function P(){var e=I(E.x-(j?E.target.percentSpeed:E.target.x),E.y-(j?E.target.percentSpeed:E.target.y));if(R=e.speedX,_=e.speedY,u)if(E.rotation=e.angle,zot(E.rotation))E.rotation=E.target.rotation;else{E.rotation+=W;var t=B(E.rotation),o=E.target.rotation=B(E.target.rotation);180<Math.abs(t-o)&&(t<o?o-=360:t-=360),E.dampR.immediate(o),E.target.rotation=o,E.rotation=t}}function B(e){return(e%360+360)%360}function I(e,t){var o,n=E.speed,r=E.speed,i=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return 0<i&&(n=Math.abs(e)/i*E.speed,r=Math.abs(t)/i*E.speed,o=90-180*Math.atan2(e,t)/Math.PI),{speedX:n,speedY:r,angle:o}}function S(){"keydown"==o?(frame.off("keydown",oe),frame.off("keyup",re),e.Ticker.remove(le)):"gamebutton"==o?(se.off("buttondown",ne),se.off("buttonup",ie),e.Ticker.remove(le)):"gamestick"==o?se.off("data",ce):"swipe"==o?(ue.enabled=!1,de.enabled=!1,ue.off("swipemove",he)):"mousedown"==o||"mousemove"==o?V.off("stage"+o,F):"pressmove"==o&&(V.off("stagemousedown",F),V.off("stagemousemove",G),V.off("stagemouseup",H)),e.Ticker.remove(ze)}var M;if(M=zob(e.MotionController,arguments,"target, type, speed, axis, boundary, map, diagonal, damp, flip, rotate, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold, container, localBounds, mouseMoveOutside, mousedownIncludes, minPercentSpeed, maxPercentSpeed, dampKeyup",this))return M;z_d("69.7"),this.cjsEventDispatcher_constructor(),this.type="MotionController";var E=this,O="zim MotionController(): Please pass in a reference to the stage or a container on the stage";if(zot(m)){if(!zimDefaultFrame)return void zog(O);V=m=zimDefaultFrame.stage}else if(zot(m.stage)){if(!zimDefaultFrame)return void zog(O);V=zimDefaultFrame.stage}else V=m.stage;zot(t)&&(t=new e.Container(1,1,null,null,!1));var j="Accelerator"==t.type;if(zot(n)&&(n=7),!zot(o)&&"DPad"==o.type){var L=o;o="manual",zot(r)&&(r=L.axis),"all"==r&&(r="both"),t.x,t.y,L.on("change",function(){E.convert(t.x+L.dirX*n,t.y+L.dirY*n)})}(zot(o)||"mousemove"!=o&&"pressmove"!=o&&"keydown"!=o&&"gamebutton"!=o&&"gamestick"!=o&&"swipe"!=o&&"follow"!=o&&"manual"!=o)&&(o="mousedown"),zot(r)&&(r=j?"horizontal":"both"),"keydown"==o&&zot(a)&&(a=[[65,37],[68,39],[87,38],[83,40]]),"gamebutton"==o&&zot(a)&&(a=h?[14,15,e.GamePad.RT,e.GamePad.LT]:[14,15,12,13]),"gamestick"==o&&zot(a)&&(a=h?[[0,2],[0,2],[1],[1]]:[0,0,1,1]),"gamestick"==o&&zot(a)&&(a=[0,0,1,1]),zot(l)&&(l=!0),"horizontal"!=r&&"vertical"!=r||(l=!1),zot(s)&&(s="keydown"==o||"gamebutton"==o?1:"pressmove"==o?.2:.1),zot(h)&&(h=!1),zot(g)&&(g=.4*n),zot(p)&&(p=4),zot(f)&&(f=.2),zot(v)&&(v=!1),V.mouseMoveOutside=v,zot(b)&&(b=[]),Array.isArray(b)||(b=[b]),"Pen"!=t.type||t.draggable?b.push(t):b.push(t,t.paper),(t.motionController=this).mousedownIncludes=b,zot(C)&&(C=.3),E.dampKeyup=C,this.dirX=0,this.dirY=0,this.speed=n,this.turnSpeed=g,this.axis=r,this.target=t,this.moveThreshold=p,this.stickThreshold=f,this.boundary=i;var D,Y,X,R=E.speed,_=E.speed,W=0;E.rotation=0,j?(X=!(Y=m.getBounds())||"vertical"==r&&!Y.height||"vertical"!=r&&!Y.width?1e3:"vertical"==r?Y.height:Y.width,zot(y)&&(y=0),zot(w)&&(w=100),zot(this.target.percentSpeed)&&(this.target.percentSpeed=(w-y)/2),E.x=X/2,E.y=X/2,D=new e.Proportion(0,X,y,w)):(E.x=this.target.x,E.y=this.target.y);var F,G,H,N,V,q=E.scaleX=t.scaleX,K=(E.scaleY=t.scaleY,!1),U=!1;if("keydown"==o||"gamebutton"==o){for(var Z=0;Z<4;Z++)Array.isArray(a[Z])||(a[Z]=[a[Z]]);var Q=[0,0,0,0],J=[],$=["X","X","Y","Y"],ee=[-1,1,-1,1],te={dirX:0,dirY:0};if("keydown"==o)var oe=frame.on("keydown",x);else var ne=(se=E.gamepad=new e.GamePad).on("buttondown",x);if(zot(d))if("keydown"==o)var re=frame.on("keyup",k);else var ie=se.on("buttonup",k);var ae={rotation:0,speedX:E.speed,speedY:E.speed},le=e.Ticker.add(function(){if(h)A(te);else{var e=E.speed,t=E.speed;if("both"==E.axis&&0!=te.dirX&&0!=te.dirY){var o=I(te.dirX,te.dirY);e=o.speedX,t=o.speedY}"horizontal"!=E.axis&&"both"!=E.axis||(E.x+=e*te.dirX),"vertical"!=E.axis&&"both"!=E.axis||(E.y+=t*te.dirY),P()}},V)}else if("mousedown"==o||"mousemove"==o)F=V.on("stage"+o,function(e){if(V=e.target.stage,"mousedown"==o){if(Array.isArray(E.mousedownIncludes)||(E.mousedownIncludes=[E.mousedownIncludes]),E.mousedownIncludes.indexOf(m)<0)for(var t=0;t<m.numChildren;t++){var n=m.getChildAt(t);if(-1==E.mousedownIncludes.indexOf(n)&&n.mouseEnabled&&n.hitTestPoint&&n.hitTestPoint(e.stageX/V.scaleX,e.stageY/V.scaleY))return}E.dispatchEvent("mousedown")}var r=m.globalToLocal(v?e.rawX/V.scaleX:e.stageX/V.scaleX,v?e.rawY/V.scaleY:e.stageY/V.scaleY);E.x=r.x,E.y=r.y,P()});else if("pressmove"==o||"follow"==o)"Pen"==t.type&&(t.write=!1),F=V.on("stagemousedown",function(n){U=!1,Array.isArray(E.mousedownIncludes)||(E.mousedownIncludes=[E.mousedownIncludes]);var i,a=!1;E.mouseDownIncludes&&(i=V.getObjectUnderPoint(n.stageX,n.stageY));for(var l=0;l<E.mousedownIncludes.length;l++)i&&E.mousedownIncludes[l].hitTestPoint&&E.mousedownIncludes[l].hitTestPoint(n.stageX,n.stageY)&&E.mousedownIncludes[l].contains(i)&&(a=!0);if(!a)for(l=0;l<m.numChildren;l++){var s=m.getChildAt(l);if(-1==E.mousedownIncludes.indexOf(s)&&s.mouseEnabled&&s.hitTestPoint&&s.hitTestPoint(n.stageX/V.scaleX,n.stageY/V.scaleY))return}var c=m.globalToLocal(v?n.rawX/V.scaleX:n.stageX/V.scaleX,v?n.rawY/V.scaleY:n.stageY/V.scaleY);"follow"!=o&&E.immediate("both"==r||"horizontal"==r?c.x:null,"both"==r||"vertical"==r?c.y:null),P(),E.dispatchEvent("mousedown"),K=!0,E.moveX=v?n.rawX/V.scaleX:n.stageX/V.scaleX,E.moveY=v?n.rawY/V.scaleY:n.stageY/V.scaleY,G=V.on("stagemousemove",function(e){E.moveX=v?e.rawX/V.scaleX:e.stageX/V.scaleX,E.moveY=v?e.rawY/V.scaleY:e.stageY/V.scaleY,"follow"!=o&&T()}),N&&e.Ticker.remove(N),"follow"==o&&(N=e.Ticker.add(T)),"Pen"==t.type&&(t.write=!0,t.zimDragCheck=!0)}),H=V.on("stagemouseup",function(o){"Pen"==t.type&&(t.write=!1,t.zimDragCheck=!1,U&&t.stopCheck()),N&&e.Ticker.remove(N),V.off("stagemousemove",G),K=!1});else if("gamestick"==o){var se=this.gamepad=new e.GamePad;for(Z=0;Z<4;Z++)Array.isArray(a[Z])||(a[Z]=[a[Z]]);ae={rotation:0,speedX:E.speed,speedY:E.speed};var ce=se.on("data",function(e){te={dirX:0,dirY:0};for(var t=0;t<a[0].length;t++){var o=e.axes[a[0][t]];if(Math.abs(o)>E.stickThreshold){te.dirX=o;break}}for(t=0;t<a[2].length;t++)if(o=e.axes[a[2][t]],Math.abs(o)>E.stickThreshold){te.dirY=o;break}h?A(te):(E.x+=E.speed*te.dirX,E.y+=E.speed*te.dirY,P())})}else if("swipe"==o)var ue=new e.Swiper(V,E,"x",.8),de=new e.Swiper(V,E,"y",.8,!1),he=ue.on("swipemove",function(){P()});var ge=this.x=j?X/2:this.target.x,pe=this.y=j?X/2:this.target.y;this.dampX=new e.Damp(ge,s),this.dampY=new e.Damp(pe,s),this.dampR=new e.Damp(this.target.rotation,s);var fe=0,me=0,ze=e.Ticker.add(function(){if("manual"==o&&P(),E.boundary&&(E.x=e.constrain(E.x,E.boundary.x,E.boundary.x+E.boundary.width),E.y=e.constrain(E.y,E.boundary.y,E.boundary.y+E.boundary.height)),"horizontal"==E.axis||"both"==E.axis){if(E.dirX=e.sign(E.x-ge),Math.abs(E.x-ge)<R?ge=E.x:ge+=E.dirX*R,te&&0==te.dirX){var n=E.boundary?E.boundary.width/2:V.width/2,r=E.x-(E.x-n)*(j?E.dampKeyup:0);ge=r,E.x=ge}j&&Y&&Y.width?E.target.percentSpeed=D.convert(E.dampX.convert(ge)):E.target.x=E.dampX.convert(ge)}if("vertical"==E.axis||"both"==E.axis){if(E.dirY=e.sign(E.y-pe),Math.abs(E.y-pe)<_?pe=E.y:pe+=e.sign(E.y-pe)*_,te&&0==te.dirY){n=E.boundary?E.boundary.height/2:V.height/2;var i=E.y-(E.y-n)*(j?E.dampKeyup:0);pe=i,E.y=pe}j&&Y&&Y.height?E.target.percentSpeed=D.convert(E.dampY.convert(pe)):E.target.y=E.dampY.convert(pe)}if("pressmove"==o&&K&&E.dispatchEvent("pressing"),E.movingX=Math.abs(ge-(j?E.target.percentSpeed:E.target.x))>E.moveThreshold,E.movingY=Math.abs(pe-(j?E.target.percentSpeed:E.target.y))>E.moveThreshold,!E.moving||E.movingX||E.movingY?E.moving||!E.movingX&&!E.movingY||E.dispatchEvent("startmoving"):E.dispatchEvent("stopmoving"),E.moving=E.movingX||E.movingY,E.moving&&E.dispatchEvent("moving"),E.dirX!=fe||E.dirY!=me){var a=new createjs.Event("change");if(E.dirX!=fe){var l=["left",null,"right"];a.dir=l[E.dirX+1],fe=E.dirX,"horizontal"!=c&&"both"!=c||(E.scaleX=t.scaleX=E.dirX?Math.abs(t.scaleX)*E.dirX:t.scaleX,W=0!=q&&-1==Math.round(E.scaleX/q)?180:0)}else l=["up",null,"down"],a.dir=l[E.dirY+1],me=E.dirY,"vertical"!=c&&"both"!=c||(E.scaleY=t.scaleY=E.dirY?Math.abs(t.scaleY)*-E.dirY:t.scaleY);E.dispatchEvent(a)}u&&!zot(E.rotation)&&(E.target.rotation=E.dampR.convert(E.rotation))},V);this.immediate=function(e,t,o){return!zot(e)&&E.dampX&&(E.dampX.immediate(e),E.x=j?E.target.percentSpeed=ge=e:E.target.x=ge=e,ue&&ue.immediate(e)),!zot(t)&&E.dampY&&(E.dampY.immediate(t),E.y=j?E.target.percentSpeed=pe=t:E.target.y=pe=t,de&&de.immediate(t)),!zot(o)&&E.dampR&&(E.dampR.immediate(o),E.rotation=E.target.rotation=o),E},this.convert=function(e,t){zot(e)||(E.x=e),zot(t)||(E.y=t),P()};var ve=!0;Object.defineProperty(E,"enabled",{get:function(){return ve},set:function(t){ve!=t&&(t?("keydown"==o?(oe=frame.on("keydown",oe),re=frame.on("keyup",re),le=e.Ticker.add(le,V)):"gamebutton"==o?(ne=se.on("buttondown",ne),ie=se.on("buttonup",ie),le=e.Ticker.add(le,V)):"gamestick"==o?ce=se.on("data",ce):"swipe"==o?(ue.enabled=!0,de.enabled=!0,he=ue.on("swipemove",he)):"mousedown"==o||"mousemove"==o?F=V.on("stage"+o,F):"pressmove"==o&&(F=V.on("stagemousedown",F),G=V.on("stagemousemove",G),H=V.on("stagemouseup",H)),ze=e.Ticker.add(ze,V)):S(),ve=Boolean(t))}}),this.dispose=function(){S(),se&&se.dispose(),ue&&ue.dispose(),de&&ue.dispose()}},e.extend(e.MotionController,createjs.EventDispatcher,"enabled","cjsEventDispatcher"),e.GamePad=function(){function e(e){o.connected=!0,function(e,t){var n=new createjs.Event("gamepadconnected");n.index=t.gamepad.index,n.id=t.gamepad.id,n.buttons=t.gamepad.buttons,n.axes=t.gamepad.axes,o.dispatchEvent(n)}(0,e);var n=navigator.getGamepads()[o.currentIndex];o.lastData=[];for(var r=0;r<n.buttons.length;r++)o.lastData[r]=n.buttons[r].pressed;!function e(){if(t=requestAnimationFrame(e),o.data=navigator.getGamepads()[o.currentIndex],o.data){for(var n=o.buttons=[],r=0;r<o.data.buttons.length;r++)if(n[r]=o.data.buttons[r].pressed,n[r]!=o.lastData[r]){if(o.lastData[r]=n[r],n[r])var i=new createjs.Event("buttondown");else i=new createjs.Event("buttonup");i.buttonCode=r,i.button=a[r],o.dispatchEvent(i)}(i=new createjs.Event("data")).axes=o.axes=o.data.axes,i.buttons=o.buttons,o.dispatchEvent(i)}}()}if(z_d("69.8"),this.type="GamePad",this.cjsEventDispatcher_constructor(),!navigator.getGamepads)return this.error=!0,void(zon&&zog("zim.GamePad() - no browswer support"));var t;window.addEventListener("gamepadconnected",e),this.currentIndex=0;var o=this,n=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(o.connected||e(),clearInterval(n))},500),r=window.addEventListener("gamepaddisconnected",function(e){e.gamepad.index==o.currentIndex&&(cancelAnimationFrame(t),connected=!1,o.dispatchEvent("gamepaddisconnected"))});this.dispose=function(){window.removeEventListener("gamepadconnected",e),window.addEventListener("gamepaddisconnected",r),cancelAnimationFrame(t),clearInterval(n),o.connected=!1}};for(var a=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"],l=0;l<a.length;l++)e.GamePad[a[l]]=l;var s,c,u=["LSX","LSY","RSX","RSY"];for(l=0;l<u.length;l++)e.GamePad[u[l]]=l;return e.extend(e.GamePad,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Portal=function(t,o){function n(){o.setChildIndex(l,0),l=s,s=o.getChildAt(o.numChildren-2),o.setChildIndex(s,o.numChildren-1),l.setMask(null),s.setMask(t),t.stage.update()}var r;if(r=zob(e.Portal,arguments,"obj, lands",this))return r;if(z_d("69.96"),!zot(t)&&t.stage){this.type="Portal";var i=this,a=o&&o.numChildren&&0<o.numChildren;if(a){var l=o.getChildAt(o.numChildren-1),s=o.getChildAt(o.numChildren-2);o.setChildIndex(s,o.numChildren-1),s.setMask(t)}t.on(e.mobile()?"mousedown":"mouseover",function(){i._enabled&&(a&&n(),i.dispatchEvent("enter"))}),t.on(e.mobile()?"pressup":"mouseout",function(){i._enabled&&i.dispatchEvent("exit")}),Object.defineProperty(this,"portal",{get:function(){return t},set:function(e){!zot(e)&&e.stage||!zon?s.setMask(t):zog("zim.Portal() - please provide a Display Object to act as the portal")}}),Object.defineProperty(this,"currentLand",{get:function(){return l},set:function(e){if(o.contains(e))for(;e!=l;)n()}}),Object.defineProperty(this,"nextLand",{get:function(){return s},set:function(e){zon&&zog("zim.Portal() - nextLand is read only - remake Portal to change")}}),this._enabled=!0,Object.defineProperty(i,"enabled",{get:function(){return i._enabled},set:function(e){i._enabled=e}}),this.dispose=function(){}}},e.extend(e.Portal,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),zimContactListener=null,e.Parallax=function(t,o,n,r,i,a,l){var s;if(s=zob(e.Parallax,arguments,"layers, damp, auto, stage, startPaused, mouseMoveOutside, clamp",this))return s;if(z_d("68"),this.type="Parallax",zot(r))if(t&&t[0]&&t[0].obj&&t[0].obj.stage)r=t[0].obj.stage;else{if(!zimDefaultFrame)return;r=zimDefaultFrame.stage}n=!!zot(n),zot(i)&&(i=!1),zot(a)&&(a=!1);var c=r.getBounds().width,u=r.getBounds().height;r.mouseMoveOutside=a;var d=this;r.on("stagemousemove",function(e){d.mouseX=e.rawX/r.scaleX,d.mouseY=e.rawY/r.scaleY});var h=zot(o)?.1:o;this.addLayer=function(t){if(!(zot(t.obj)||zot(t.prop)||zot(t.propChange))){var o={obj:t.obj,prop:t.prop};o[o.prop]=t.propChange,zot(t.input)&&(t.input="mouseX"),o.input=t.input,o.split=zot(t.split)?!("mouseX"!=t.input||!n):t.split;var r=zot(t.inMin)?0:t.inMin,i=zot(t.inMax)?"mouseX"==t.input||"scrollX"==t.input?c:u:t.inMax,a=zot(t.factor)?1:t.factor,s=!zot(t.integer)&&t.integer;return o["p_"+o.prop]=new e.ProportionDamp(r,i,0,o[o.prop],h,a,s,l),"scale"==o.prop?o["s_"+o.prop]=o.obj.scaleX:"frame"==o.prop?o["s_"+o.prop]=o.obj.currentFrame:o["s_"+o.prop]=o.obj[o.prop],zot(t.immediate)||o["p_"+o.prop].immediate(t.immediate),g.push(o),g.length-1}},this.removeLayer=function(e){if(!zot(e)){var t=g[e];t["p_"+t.prop].dispose(),g.splice(e,1)}},this.immediate=function(e){for(var t,o=0;o<g.length;o++)(t=g[o])["p_"+t.prop].immediate(e[o])},this.dispose=function(){return g=null,n&&e.Ticker.remove(f),!0},t=zot(t)?[]:t;for(var g=[],p=0;p<t.length;p++)this.addLayer(t[p]);if(n){var f=e.Ticker.add(function(e){d.step()},r);i&&e.Ticker.remove(f)}this.step=function(t){for(var o,n,r=0;r<g.length;r++)o=g[r],zot(t)?"mouseX"==o.input?n=d.mouseX:"mouseY"==o.input?n=d.mouseY:"scrollX"==o.input?n=e.scrollX():"scrollY"==o.input&&(n=e.scrollY()):n=t,"scale"==o.prop?o.obj.scaleX=o.obj.scaleY=o["s_"+o.prop]+o["p_"+o.prop].convert(n):"frame"==o.prop?o.obj.gotoAndStop(o["s_"+o.prop]+o["p_"+o.prop].convert(n)):(o.obj[o.prop]=o["s_"+o.prop]+o["p_"+o.prop].convert(n),o.split&&(o.obj[o.prop]-=o[o.prop]/2))},d.paused=i,d.pause=function(t){zot(t)&&(t=!0),d.paused!=t&&(d.paused=t,f&&(t?e.Ticker.remove(f):f=e.Ticker.add(f)))},Object.defineProperty(d,"damp",{get:function(){return h},set:function(e){var t;h=e;for(var o=0;o<g.length;o++)(t=g[o])["p_"+t.prop].damp=h}})},e.Scroller=function(t,o,n,r,a,l,s,c,u,d){var h;if(h=zob(e.Scroller,arguments,"backing, speed, direction, horizontal, gapFix, stage, container, style, group, inherit",this))return h;z_d("69"),this.cjsEventDispatcher_constructor(),this.type="Scroller",this.group=u;var g=!1===c?{}:e.getStyle(this.type,this.group,d);if(zot(t)&&(t=null!=g.backing?g.backing:null),!zot(t)){var p=this.backing1=t;if(!zot(p)&&p.getBounds){var f=this.backing2=t.clone();zot(r)&&(r=null==g.horizontal||g.horizontal),zot(a)&&(a=null!=g.gapFix?g.gapFix:0),zot(s)&&(s=null!=g.container?g.container:null),zot(l)&&(l=null!=g.stage?g.stage:null);var m=this;zot(o)&&(o=null!=g.speed?g.speed:1),this.speed=o;var z=this.baseSpeed=this.speed;zot(n)&&(n=null!=g.direction?g.direction:1),this.direction=n;var v=r?p.scaleX:p.scaleY;if(p.getBounds())if(l||p.stage)if(p.parent)if(p.parent.addChildAt(f,p.parent.getChildIndex(p)),l=l||p.stage,zot(s)&&(s=l),s.getBounds()){var b,y,w=p.getBounds().width*v-a,C=p.getBounds().height*v-a;r?f.x=w:f.y=C;var x=!1,k=e.Ticker.add(function(e){b||(b=s.getBounds().width,y=s.getBounds().height),0!=m.speed&&0!=m.direction&&(r?(p.x-=m.speed*m.direction,p.x<f.x?f.x=p.x+w:f.x=p.x-w,0<m.direction*m.speed?f.x<0&&p.x<f.x?p.x=f.x+w:p.x<0&&f.x<p.x&&(f.x=p.x+w):f.x>b&&f.x>p.x?f.x=p.x-w:p.x>b&&p.x>f.x&&(p.x=f.x-w)):(p.y-=m.speed*m.direction,p.y<f.y?f.y=p.y+C:f.y=p.y-C,0<m.direction*m.speed?f.y<0&&p.y<f.y?p.y=f.y+C:p.y<0&&f.y<p.y&&(f.y=p.y+C):f.y>y&&f.y>p.y?f.y=p.y-C:p.y>y&&p.y>f.y&&(p.y=f.y-C)))},l);this.paused=!1,this.pause=function(t,o){return zot(t)&&(t=!0),zot(o)&&(o=0),t?(z=m.speed,0<o?(x=!0,e.animate({target:m,obj:{pausingSpeed:0},ticker:!1,time:o,call:function(){m.speed=0,m.paused=!0,x=!1,m.dispatchEvent("pause")}})):(x=!1,m.speed=0,m.paused=!0,setTimeout(function(){m.dispatchEvent("pause")},10))):(x=!1,0<o?e.animate({target:m,obj:{pausingSpeed:z},ticker:!1,time:o,call:function(){m.speed=z,m.paused=!1,x=!1}}):(m.speed=z,m.paused=!1)),m},Object.defineProperty(m,"percentSpeed",{get:function(){return 0==m.baseSpeed?NaN:m.speed/m.baseSpeed*100},set:function(e){x||m.paused||(m.speed=m.baseSpeed*e/100)}}),Object.defineProperty(m,"pausingSpeed",{get:function(){return 0==m.baseSpeed?NaN:m.speed/m.baseSpeed*100},set:function(e){m.speed=m.baseSpeed*e/100}}),!1!==c&&i(this,g),this.dispose=function(){return zon&&zog("bye from Scroller"),e.Ticker.remove(k),!0}}else zog("zim display - Scroller(): please setBounds() on container or stage if no container");else zog("zim display - Scroller(): please add object to container or stage before adding to Scroller");else zog("zim display - Scroller(): please pass in stage parameter or add backing objects to stage to start");else zog("zim display - Scroller(): please setBounds() on backing objects")}}},e.extend(e.Scroller,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Dynamo=function(t,o,n,r,a,l,s,c,u,d,h,g){var p;if(p=zob(e.Dynamo,arguments,"sprite, speed, label, startFrame, endFrame, update, reversible, flip, flipVertical, style, group, inherit",this))return p;z_d("69.2"),this.cjsEventDispatcher_constructor(),this.type="Dynamo",this.group=h;var f=!1===d?{}:e.getStyle(this.type,this.group,g);if(zot(t)&&(t=null!=f.sprite?f.sprite:null),!zot(t)){var m=this.frames=t.parseFrames(n,r,a,!0);if(0!=m.length){this.totalFrames=m.length;var z=0;zot(o)&&(o=null!=f.speed?f.speed:30),zot(s)&&(s=null==f.reversible||f.reversible);var v=this.baseSpeed=this.speed=o;zot(l)&&(l=null!=f.update&&f.update),zot(c)&&(c=null!=f.flip?f.flip:null),zot(c)&&0==s&&(c=!0);var b,y,w,C,x,k=this,T=Date.now(),A=!1;k.scaleX=t.scaleX,k.scaleY=t.scaleY,function e(){if(b=requestAnimationFrame(e),y=m[z].s,0!=k.speed&&0!=y&&(C=1e3/Math.abs(k.speed)*y,w=Date.now(),C<w-T)){T=w;var o=k.frame+(0<k.speed||!s?1:-1),n=!1;o>=m.length&&(n=!0,o=0),o<0&&(n=!0,o=m.length-1),k.frame=o,c&&(k.speed<0?t.scaleX=-k.scaleX:t.scaleX=k.scaleX),u&&(k.speed<0?t.scaleY=-k.scaleY:t.scaleY=k.scaleY),n&&k.dispatchEvent("loop"),k.dispatchEvent("change"),l&&t.stage&&t.stage.update(),zot(x)||x!=k.frame||(A=!1,k.speed=0,k.paused=!0,k.dispatchEvent("pause"))}}(),this.paused=!1,this.pause=function(t,o,n){if(zot(t)&&(t=!0),t!=k.paused)return zot(o)&&(o=0),t?(v=k.speed,zot(n)?0<o?(A=!0,e.animate({target:k,obj:{pausingSpeed:0},ticker:!1,time:o,call:function(){A=!1,k.speed=0,k.paused=!0,k.dispatchEvent("pause")}})):(A=!1,k.speed=0,k.paused=!0,setTimeout(function(){k.dispatchEvent("pause")},10)):(A=!0,x=n)):(x=null,0<o?(A=!0,e.animate({target:k,obj:{pausingSpeed:v},ticker:!1,time:o,call:function(){A=!1,k.speed=v,k.paused=!1}})):(A=!1,k.speed=v,k.paused=!1)),k},Object.defineProperty(k,"frame",{get:function(){return z},set:function(e){z=Math.round(e)%m.length;var o=m[z];zot(o)||(t.frame=o.f)}}),Object.defineProperty(k,"percentSpeed",{get:function(){return 0==k.baseSpeed?NaN:A||k.paused?v/k.baseSpeed*100:k.speed/k.baseSpeed*100},set:function(e){A||k.paused?v=k.baseSpeed*e/100:k.speed=k.baseSpeed*e/100}}),Object.defineProperty(k,"pausingSpeed",{get:function(){return 0==k.baseSpeed?NaN:k.speed/k.baseSpeed*100},set:function(e){k.speed=k.baseSpeed*e/100}}),!1!==d&&i(this,f),this.dispose=function(){cancelAnimationFrame(b)}}}},e.extend(e.Dynamo,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Accelerator=function(e){z_d("69.3"),this.cjsEventDispatcher_constructor();var t=this;this.type="Accelerator",this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(e){var o;o=Array.isArray(e)?e:[e];for(var n=0;n<o.length;n++)t.items.indexOf(o[n])<0&&t.items.push(o[n]);return t},e&&this.add(e),this.remove=function(e){var o,n;o=Array.isArray(e)?e:[e];for(var r=0;r<o.length;r++)0<=(n=t.items.indexOf(o[r]))&&t.items.splice(n,1);return t},this.pause=function(e,o,n){function r(){for(var o=0;o<t.items.length;o++)1!=i[o]&&t.items[o].pause(e)}if(zot(e)&&(e=!0),e!=t.paused){var i=[];if(e){zot(n)||(o=null);for(var a=!1,l=0;l<t.items.length;l++)(zot(o)||!zot(n)||t.items[l].totalFrames)&&(!t.items[l].totalFrames||zot(o)&&zot(n))||(t.items[l].pause(!0,o,n),a=!0,i[l]=1,t.items[l].on("pause",function(){t.paused||(r(),t.paused=!0,t.dispatchEvent("pause"))},null,!0));a||(r(),t.paused=!0,setTimeout(function(){t.dispatchEvent("pause")},10))}else t.paused=!1,r()}},Object.defineProperty(t,"percentSpeed",{get:function(){return t._percentSpeed},set:function(e){t._percentSpeed=e;for(var o=0;o<t.items.length;o++)t.items[o].percentSpeed=e}}),this.dispose=function(){for(var e=0;e<t.items.length;e++)t.items[e].dispose();return!0}},e.extend(e.Accelerator,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Emitter=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B,I,S,M,E,O,j,L){function D(e){if(W.events&&Y("fizzed",e),(e.trace?e.getChildAt(0).endSpurt:e.endSpurt)&&(Y("spurtfizzed",e),W.spurting=!1),W.pool&&"end"!=e.pooled)return e.pooled||(e.pooled=!0,H.push(e)),void(e.visible=!1);W.removeChild(e),W.trace&&e.uncache(),e=null}function Y(e,t){var o=new createjs.Event(e);o.particle=t.trace?t.getChildAt(0):t,W.dispatchEvent(o)}function X(e){W.pauseEmitter(),W.spurtCount=W.spurtNum=null,Y("spurted",e),e.endSpurt=!0}var R;if(R=zob(e.Emitter,arguments,"obj, width, height, interval, num, life, fade, shrink, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin, particles, style, group, inherit",this))return R;z_d("69.9"),this.type="Emitter",this.group=j;var _=!1===O?{}:e.getStyle(this.type,this.group,L);zot(t)&&(t=null!=_.obj?_.obj:[new e.Circle(20,"#e472c4"),new e.Circle(20,"#acd241"),new e.Circle(20,"#50c4b7")]),zot(o)&&(o=null!=_.width?_.width:300),zot(n)&&(n=null!=_.height?_.height:300),zot(r)&&(r=null!=_.interval?_.interval:20),"number"==typeof r&&(r=Math.max(10,r)),zot(a)&&(a=null!=_.num?_.num:1),zot(h)&&(h=null!=_.trace&&h.size),zot(g)&&(g=null!=_.traceFadeTime?_.traceFadeTime:u),zot(p)&&(p=null!=_.traceShiftX?_.traceShiftX:0),zot(f)&&(f=null!=_.traceShiftY?_.traceShiftY:0),zot(l)&&(l=null!=_.life?_.life:1e3),zot(s)&&(s=null==_.fade||_.fade),zot(c)&&(c=null!=_.shrink?_.shrink:!h),zot(u)&&(u=null!=_.decayTime?_.decayTime:1e3),zot(m)&&(m=null!=_.angle?_.angle:{min:0,max:360}),zot(z)&&(z=null!=_.force?_.force:5),zot(v)&&(v=null!=_.gravity?_.gravity:9.8),zot(b)&&(b=null!=_.wind?_.wind:0),zot(y)&&(y=null!=_.layers?_.layers:"top"),zot(o)&&(o=null!=_.width?_.width:100),zot(n)&&(n=null!=_.height?_.height:100),zot(x)&&(x=null!=_.horizontal&&_.horizontal),zot(k)&&(k=null!=_.vertical&&_.vertical),zot(T)&&(T=null!=_.sink?_.sink:null),!zot(T)&&zot(A)&&(A=null!=_.sinkForce?_.sinkForce:10),zot(B)&&(B=null!=_.events&&_.events),zot(I)&&(I=null!=_.startPaused&&_.startPaused),zot(S)&&(S=null==_.pool||_.pool),zot(M)&&(M=null!=_.poolMin?_.poolMin:0),zot(E)&&(E=null!=_.particles?_.particles:new e.Container),zot(w)&&(w=null!=_.animation?_.animation:null),this.zimContainer_constructor(o,n,null,null,!1),this.type="Emitter";var W=this;this.regX=o/2,this.regY=n/2,W.obj=t,W.particles=E,W.interval=r,W.num=a,W.life=l,W.fade=s,W.shrink=c,W.decayTime=u,W.decayStart=d,W.trace=h,W.traceFadeTime=g,W.traceShiftX=p,W.traceShiftY=f,W.angle=m,W.emitterForce=z,W.gravity=v,W.wind=b,W.layers=y,W.animation=w,W.random=C,W.horizontal=x,W.vertical=k,W.sink=T,W.sinkForce=A,W.events=B,W.startEmitterPaused=I,W.pool=S,W.poolMin=M,W.particlesEmitted=0;var F,G,H=[],N=0,V=0;e.added(W,function(r){if(G=r,zot(P)&&(P=!G.isWebGL&&e.mobile()),P&&(G.snapToPixelEnabled=!0),G){var i=W.parent.getChildIndex(W);W.parent.addChildAt(E,i),x||k||W.centerReg(null,null,!1),W.zimInterval=e.interval(W.interval,function(){function r(e,t){return e-t}var i,a;W.startEmitterPaused?W.pauseEmitter():(t=Array.isArray(W.obj)?W.obj:[W.obj]).length<=0||(i=Array.isArray(W.interval)?(W.interval.sort(r),W.interval[0]):W.interval.constructor=={}.constructor?W.interval.min:W.interval,a=Array.isArray(W.num)?(W.num.sort(r),W.num[W.num.length-1]):W.num.constructor=={}.constructor?W.num.max:W.num,e.loop(e.Pick.choose(W.num),function(){if(0<W.decayTime){var r={};W.shrink&&(r.scale=0),W.fade&&(r.alpha=0)}if(W.pool&&0<H.length&&V>=Math.max(W.poolMin,(W.life/i+5)*a)){if((s=H[N++%H.length]).visible=!0,(u=s.trace?s.getChildAt(0):s).emitShape){var l=u.template;u.graphics.c().s(l.s?e.Pick.choose(l.s):null).ss(l.ss?e.Pick.choose(l.ss):null).sd(l.sd?e.Pick.choose(l.sd):null,l.offset?e.Pick.choose(l.offset):null)}s.trace&&s.updateCache(),"top"==W.layers?u.emitShape?s.addTo(E,null,!1):s.centerReg(E):u.emitShape?s.addTo(E,"bottom"==W.layers?0:e.rand(E.numChildren),!1):s.centerReg(E,"bottom"==W.layers?0:e.rand(E.numChildren)),s.alpha=1,s.scaleX=1,s.scaleY=1,u.alpha=u.originalAlpha,u.scaleX=u.originalScaleX,u.scaleY=u.originalScaleY,u.endSpurt=!1}else{var s;V++,W.trace&&((s=new e.Container(o,n,null,null,!1)).trace=!0);var c=e.Pick.choose(e.shuffle(t)[0]);if("shape"==c.type)l=c,(u=new e.Shape(1,1,null,null,null,!1)).emitShape=!0,u.template=l,u.graphics.s(l.s?e.Pick.choose(l.s):null).ss(l.ss?e.Pick.choose(l.ss):null).sd(l.sd?e.Pick.choose(l.sd):null,l.offset?e.Pick.choose(l.offset):null),W.trace?u.addTo(s,null,!1):"top"==W.layers?u.addTo(E,null,!1):u.addTo(E,"bottom"==W.layers?0:e.rand(E.numChildren),null,!1);else{var u;(u=c.clone()).centerReg||zimify(u),W.trace?u.centerReg(s).pos({x:-1e3,y:-1e3,reg:!0}):"top"==W.layers?u.centerReg(E):u.centerReg(E,"bottom"==W.layers?0:e.rand(E.numChildren))}W.trace&&("top"==W.layers?s.addTo(E,null,!1):s.addTo(E,"bottom"==W.layers?0:e.rand(E.numChildren),!1),s.cache(p,f,o,n)),W.trace||(s=u),(s.particle=u).originalAlpha=u.alpha,u.originalScaleX=u.scaleX,u.originalScaleY=u.scaleY}W.currentParticle=u,W.particlesEmitted++,s.particleNormal=!0,s.particleDecaying=!1,s.particleFizzing=!1;var d=e.Pick.choose(W.angle),h=e.Pick.choose(W.emitterForce),g=h*Math.cos(d*Math.PI/180),m=h*Math.sin(d*Math.PI/180);u.info={position:{x:W.x,y:W.y},velocity:{x:g,y:m}},W.horizontal&&(u.info.position={x:W.x-W.regX+e.rand(0,o),y:W.y-W.regY+(W.vertical?n/2:0)}),W.vertical&&(u.info.position={x:W.x-W.regX+(W.horizontal?o/2:0),y:W.y-W.regY+e.rand(0,n)}),u.emitShape?u.graphics.mt(u.info.position.x,u.info.position.y):(u.x=u.info.position.x,u.y=u.info.position.y),W.random&&e.loop(W.random,function(t,r){val=e.Pick.choose(r),"scale"==t?u.sca(val):("x"==t?u.info.position.x=W.horizontal||W.vertical?val:val+o/2:"y"==t&&(u.info.position.y=W.horizontal||W.vertical?val:val+n/2),"x"!=t&&"y"!=t||!u.emitShape||u.graphics.mt(u.info.position.x,u.info.position.y),u[t]=val,u.emitShape&&(u.x=0,u.y=0))}),P&&!u.emitShape&&u.cache(u.getBounds().x-10,u.getBounds().y-10,u.getBounds().width+20,u.getBounds().height+20);var z,v=!u.emitShape&&W.shrink;if(0<W.decayTime&&(W.fade||v||W.trace&&0<W.traceFadeTime)){if(W.trace&&0<W.traceFadeTime&&s.animate({obj:{alpha:0},time:W.traceFadeTime,wait:W.life-W.traceFadeTime,waitedCall:function(e){e.particleNormal=!1,e.particleFizzing=!0},call:D,override:!1,id:"decay"}),W.fade||v){var b={};W.fade&&(b.alpha=0),v&&(b.scaleX=0,b.scaleY=0),u.animate({obj:b,time:W.decayTime,wait:zot(W.decayStart)?W.life-W.decayTime:W.decayStart,waitedCall:function(e){e.parent!=W&&(e=e.parent),e.particleNormal=!1,e.particleDecaying=!0},call:function(t){var o;W.events&&Y("decayed",t),t.endSpurt&&Y("spurtdecayed",t),W.trace&&0<W.traceFadeTime||(zot(W.decayStart)||W.decayStart+W.decayTime>W.life?t.parent&&D(t.parent.trace?t.parent:t):(o=s,e.timeout(W.life-(W.decayStart+W.decayTime),function(){D(o)})))},override:!1,id:"decay"})}}else 0<W.life&&((z=s).timeOut=e.timeout(W.life,function(){D(z)}));if(W.events&&Y("emitted",s),function(e){zot(W.spurtCount)&&zot(W.spurtNum)||(W.spurtCount++,W.spurtCount>=W.spurtNum&&X(e))}(u),W.animation){var y=e.Pick.choose(W.animation);zot(y.override)&&(y.override=!1),u.animate(e.copy(y))}}))},null,!0),F=W.emitterTicker=e.Ticker.add(function(){e.loop(E,function(t){if(t.trace){var o=t;t=t.getChildAt(0)}var n=t.info,r=0,i=0;if(!zot(W.sink)){var a=W.particles.localToGlobal(n.position.x,n.position.y);if(W.sink.parent&&W.sink.parent.localToGlobal)var l=W.sink.parent.localToGlobal(W.sink.x,W.sink.y);else l=new createjs.Point(e.Pick.choose(W.sink.x),e.Pick.choose(W.sink.y));var s=e.angle(a.x,a.y,l.x,l.y);r=W.sinkForce*Math.cos(s*Math.PI/180),i=W.sinkForce*Math.sin(s*Math.PI/180)}var c=W.wind+r,u=W.gravity+i;n.velocity.x+=c*frameRate,n.velocity.y+=u*frameRate,n.position.x+=n.velocity.x*frameRate*100,n.position.y+=n.velocity.y*frameRate*100,t.emitShape?t.graphics.lt(n.position.x,n.position.y):(t.x=n.position.x,t.y=n.position.y),W.trace&&o&&o.updateCache(t.emitShape?null:"source-over")})},G),frameRate=1/e.Ticker.framerate}}),Object.defineProperty(W,"interval",{get:function(){return r},set:function(e){r=e,W.zimInterval&&(W.zimInterval.time=r)}}),this.spurting=!1,this.spurt=function(t,o,n){var r;return(r=zob(W.spurt,arguments,"num, time, restart"))?r:(zot(o)||(e.timeout(e.Pick.choose(o),function(){X(W.currentParticle)}),W.spurting=!0),zot(t)||(W.spurtNum=e.Pick.choose(t),W.spurtCount=0,W.spurting=!0),W.pauseEmitter(!1,n,null,!0),W)},this.clearPool=function(){e.loop(W,function(e){e.pooled="end",e.visible||W.removeChild(e)},!0),N=V=0,H=[]},W.startEmitterPaused||(this.emitterPaused=!1),this.pauseEmitter=function(t,o,n,r){if(W.startEmitterPaused=null,zot(t)&&(t=!0),zot(o)&&(o=!1),zot(n)&&(n=!1),t){if(W.emitterPaused)return W;n&&(F&&e.Ticker.remove(F),e.loop(W,function(e){e.pauseAnimate(),e.trace&&e.getChildAt(0).pauseAnimate(),e.timeOut&&e.timeOut.pause()})),W.zimInterval.pause(),W.emitterPaused=!0}else{if(!W.emitterPaused)return W;o&&(e.loop(W,function(e){e.stopAnimate(),e.timeOut&&e.timeOut.clear(),e.trace&&e.getChildAt(0).pauseAnimate()}),W.removeAllChildren()),G&&F&&!e.Ticker.has(G,F)&&(e.Ticker.add(F,G),e.loop(W,function(e){e.pauseAnimate(!1),e.timeOut&&e.timeOut.pause(!1),e.trace&&e.getChildAt(0).pauseAnimate(!1)})),W.zimInterval.pause(!1,r),W.emitterPaused=!1}return W},!(this.resize=function(e,t){zot(e)||(o=e),zot(t)||(n=t),W.setBounds(0,0,o,n),x||k||W.centerReg(),W.clearPool()})!==O&&i(this,_),this.clone=function(){var t;return t=Array.isArray(W.obj)||W.obj.constructor=={}.constructor?e.copy(W.obj):W.obj.clone?W.obj.clone():W.obj,W.cloneProps(new e.Emitter(t,o,n,W.interval,W.num,W.life,W.fade,W.shrink,W.decayTime,W.decayStart,W.trace,W.traceFadeTime,W.traceShiftX,W.traceShiftY,W.angle,W.emitterForce,W.gravity,W.wind,W.layers,W.animation,e.copy(W.random),W.horizontal,W.vertical,W.sink,W.sinkForce,P,W.events,I,W.pool,W.poolMin))},this.dispose=function(){return F&&e.Ticker.remove(F),e.loop(W,function(e){e.stopAnimate()}),W.zimInterval&&W.zimInterval.clear(),!0}},e.extend(e.Emitter,e.Container,"clone","zimContainer",!1),e.Pen=function(t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A){function P(t,o){for(var n,r=f.length-1;0<=r;r--)if(f[r][t]==o&&f[r][t+"Transform"]){n=f[r][t+"Transform"];break}n=n||e.copy(H),o.x=n.x,o.y=n.y,o.alpha=n.a,o.rotation=n.r,o.regX=n.rX,o.regY=n.rY,o.scaleX=n.sX,o.scaleY=n.sY,o.skewX=n.skX,o.skewY=n.skY,o.visible=n.v,"line"==t&&h&&(o.regX=(R*p-R)/2,o.regY=(_*p-_)/2)}var B;if(B=zob(e.Pen,arguments,"size, color, penType, damp, spread, borderColor, borderWidth, end, paper, nib, cache, ctrlKey, cropScale, undo, undoKeys, draggable, onTop, deleteable, doubleClickDelete, immediateStop, lineAlpha, lineBlendMode, style, group, inherit",this))return B;z_d("69.93"),this.zimContainer_constructor(),this.type="Pen",this.group=T;var I=!1===k?{}:e.getStyle(this.type,this.group,A);zot(n)&&(n=null!=I.penType?I.penType:"line");var S={size:2,color:"#333",spread:{min:5,max:20},borderColor:"#111",borderWidth:0},M={line:{size:2},kitetail:{size:{min:5,max:20},color:e.series(e.pink,e.blue,e.green),borderColor:"rgba(0,0,0,.5)",borderWidth:1},grass:{color:"#acd241",size:3,spread:{min:10,max:30}},hair:{color:["#e472c4","#50c4b7"],size:3,spread:{min:20,max:50}},city:{size:{min:30,max:70},spread:{min:50,max:200},color:["#333","#111","#555"]},barbwire:{},splatter:{size:{min:5,max:20},color:"rgba(0,0,0,.5)"}};zot(M[n])&&(n="line"),zot(t)&&(t=null!=I.size?I.size:zot(M[n].size)?S.size:M[n].size),zot(o)&&(o=null!=I.color?I.color:zot(M[n].color)?S.color:M[n].color),zot(r)&&(r=null!=I.damp?I.damp:.1),!1===r&&(r=1),zot(a)&&(a=null!=I.spread?I.spread:zot(M[n].spread)?S.spread:M[n].spread),zot(l)&&(l=null!=I.borderColor?I.borderColor:zot(M[n].borderColor)?S.borderColor:M[n].borderColor),zot(s)&&(s=null!=I.borderWidth?I.borderWidth:zot(M[n].borderWidth)?S.borderWidth:M[n].borderWidth),zot(c)&&(c=null!=I.end?I.end:"butt"),zot(p)&&(p=null!=I.cropScale?I.cropScale:1),zot(h)&&(h=null==I.cache||I.cache),zot(f)&&(f=null!=I.undo?I.undo:0),zot(m)&&(m=null==I.undoKeys||I.undoKeys),zot(z)&&(z=null==I.draggable||I.draggable),zot(b)&&(b=null==I.deleteable||I.deleteable),zot(y)&&(y=null==I.doubleClickDelete||I.doubleClickDelete),zot(v)&&(v=null==I.onTop||I.onTop),zot(w)&&(w=null!=I.immediateStop?I.immediateStop:"both"),zot(C)&&(C=null!=I.lineAlpha?I.lineAlpha:1),zot(x)&&(x=null!=I.lineBlendMode?I.lineBlendMode:"normal"),zot(u)&&(u=null!=I.paper?I.paper:new e.Container),zot(d)&&(d=null!=I.nib?I.nib.clone():null);var E=this;this.dampX=new e.Damp(null,r),this.dampY=new e.Damp(null,r);var O=!0;this.drawing=!1,this.immediateStop=w,this.undoLevels=f,this.undoKeys=m,this.draggable=z,this.lineAlpha=C,this.lineBlendMode=x;var j,L,D,Y,X=new e.Shape,R=zimDefaultFrame?zimDefaultFrame.stage.width:1024,_=zimDefaultFrame?zimDefaultFrame.stage.height:768;E.paperNum=0,E.sizeScale=1,E.spreadScale=1,E.sizeFactor=1,E.spreadFactor=1,E.stop=function(){},X.addTo(u),this.added(function(){function r(e){E.drawing&&(E.nib.x=e.stageX/i.scaleX,E.nib.y=e.stageY/i.scaleY)}if(E.paper=u,!zot(d))if(E.zimDown)E.nib=d.addTo(E);else{var i;E.nib=d.addTo(E.parent,E.parent.getChildIndex(E)),E.nib.x=E.x,E.nib.y=E.y,E.nib.mouseEnabled=!1,E.stage.on("stagemousedown",function(e){i=e.target.stage,E.nibEvent=E.stage.on("stagemousemove",r)}),E.stage.on("stagemouseup",function(e){E.stage.off("stagemousemove",E.nibEvent)})}E.zimDragCheck=!1,E.stop=function(){E.stopCheck(!0)},E.infinite=!1,E.stopCheck=function(t){if(t)E.drawing=!1,E.infinite=!1;else{if(E.infinite)return;if(E.zimDragCheck)return;if(!E.immediateStop&&E.drawing)return}E.immediate(E.x,E.y),setTimeout(function(){if(!E.drawing){if(h){X.cache(-(R*p-R)/2,-(_*p-_)/2,R*p,_*p);var t=u.bitmap=new e.Bitmap(X.cacheCanvas).reg((R*p-R)/2,(_*p-_)/2).addTo(u);X.graphics.clear(),X.uncache(),X.top()}else t=X;if(0<E.undoLevels){var o={paper:u,line:t};f.push(o),f.length>E.undoLevels&&f.unshift(),E.dispatchEvent("recordUndo")}h||(X=(new e.Shape).clone().addTo(u)),E.lastSegment=t,(E.lastSelected=t).alpha=E.lineAlpha,t.blendMode=E.lineBlendMode,t.paper=u,E.dispatchEvent("stop"),E.dispatchEvent("change")}},E.immediateStop||t?0:50)};var g=0;E.dampX.immediate(E.x),E.dampY.immediate(E.y),E.lastX=E.x,E.lastY=E.y,E.ticker=e.Ticker.add(function(){var r=E.dampX.convert(O?E.x:E.finishX),i=E.dampY.convert(O?E.y:E.finishY),d=E.parent.localToLocal(r,i,X),h=e.Pick.choose(t)*E.sizeScale*E.sizeFactor,p=e.Pick.choose(a)*E.spreadScale*E.spreadFactor;if(Math.abs(E.lastX-r)+Math.abs(E.lastY-i)<1)return E.drawing&&(E.drawing=!1,E.zimDown?(E.x=E.lastX=O?E.x:E.finishX,E.y=E.lastY=O?E.y:E.finishY,E.dampX.immediate(E.x),E.dampY.immediate(E.y)):(E.x=E.finishX=E.lastX=r,E.y=E.finishY=E.lastY=i),E.stopCheck()),E.lastX=r,void(E.lastY=i);if(E.drawing||(W=[],u.getChildIndex(X)!=u.numChildren-1&&X.top()),E.drawing=!0,E.dispatchEvent("drawing"),"splatter"==n)for(var f=0;f<=3;f++){var m=e.rand(360)*Math.PI/180,z=p,v={x:r+z*Math.cos(m),y:i+z*Math.sin(m)},b=E.parent.localToLocal(v.x,v.y,X);X.graphics.mt(b.x,b.y).f(e.Pick.choose(o)).dc(b.x,b.y,h/2)}else if("grass"==n||"hair"==n||"city"==n){if("grass"==n||"hair"==n){var y=E.lastX+(r-E.lastX)/2,w=E.lastY+(i-E.lastY)/2,C=E.parent.localToLocal(y,w,X);X.graphics.s(e.Pick.choose(o)).ss(h,c).mt(C.x,C.y).lt(C.x+rand(-p/4,p/4),"hair"==n?C.y+p:C.y-p)}("grass"==n||"hair"==n||"city"==n&&g%3==0)&&X.graphics.s(e.Pick.choose(o)).ss(h,c).mt(d.x,d.y).lt(d.x+("city"==n?0:rand(-p/4,p/4)),"hair"==n?C.y+p:d.y-p),g++}else"kitetail"==n&&X.graphics.s(e.Pick.choose(o)).ss(h,c),"barbwire"==n?(X.graphics.s(e.Pick.choose(o)).ss(h,c),y=E.lastX+(r-E.lastX)/2+rand(-p,p),w=E.lastY+(i-E.lastY)/2+rand(-p,p)):(y=E.lastX+(r-E.lastX)/2,w=E.lastY+(i-E.lastY)/2),C=E.parent.localToLocal(y,w,X),X.graphics.qt(C.x,C.y,d.x,d.y);var x=E.parent.localToLocal(E.lastX,E.lastY,X);0<s&&"line"!=n&&(y=E.lastX+(r-E.lastX)/2,w=E.lastY+(i-E.lastY)/2,C=E.parent.localToLocal(y,w,X),X.graphics.s(e.Pick.choose(l)).ss(e.Pick.choose(s)).mt(x.x,x.y).qt(C.x,C.y,d.x,d.y),"splatter"==n&&X.graphics.es()),"splatter"==n?X.graphics.f(e.Pick.choose(o)):"kitetail"==n||X.graphics.s(e.Pick.choose(o)).ss(h,c),"grass"!=n&&"hair"!=n&&"city"!=n&&"splatter"!=n&&X.graphics.mt(x.x,x.y).qt(C.x,C.y,d.x,d.y),E.lastX=r,E.lastY=i}),E.stage.on("stagemouseup",function(){})}),E.mouseChildren=!1,f=[];var W=[];this.saveState=function(e,t,o){var n="Container"==e.type?"paper":"line",r={paper:E.paper};r[n]=e,r[n+"Transform"]={x:e.x,y:e.y,r:e.rotation,a:e.alpha,rX:e.regX,rY:e.regY,sX:e.scaleX,sY:e.scaleY,skX:e.skewX,skY:e.skewY,v:e.visible},zot(t)||zot(o)||t==o||(r.startLayer=t,r.endLayer=o),f.push(r),E.dispatchEvent("recordUndo"),f.length>E.undoLevels&&f.unshift()};var F,G,H={x:0,y:0,r:0,a:1,rX:0,rY:0,sX:1,sY:1,skX:0,skY:0,v:!0};this.undo=function(){var e=f.pop();if(e){if(W.push(e),e.clear){for(var t=0;t<e.clear.length;t++)e.paper.addChild(e.clear[t]);e.paper.addChild(X)}else e.line&&e.lineTransform?(zot(e.startLayer)||(X.top(),e.paper.setChildIndex(e.line,D)),P("line",e.line)):e.line?e.line.removeFrom():e.paperTransform&&P("paper",e.paper);E.lastPaper=E.paper,e.paper!=E.paper&&(E.paper=e.paper,E.dispatchEvent("paperChange")),E.dispatchEvent("change"),!OPTIMIZE&&E.stage&&E.stage.update()}},this.redo=function(){var e=W.pop();if(e){if(f.push(e),e.clear)e.paper.removeAllChildren(),e.paper.addChild(X);else if(e.line&&e.lineTransform){zot(e.endLayer)||(X.top(),e.paper.setChildIndex(e.line,Y));var t=e.lineTransform,o=e.line}else e.line?e.line.addTo(e.paper):e.paperTransform&&(t=e.paperTransform,o=e.paper);o&&(o.x=t.x,o.y=t.y,o.alpha=t.a,o.rotation=t.r,o.regX=t.rX,o.regY=t.rY,o.scaleX=t.sX,o.scaleY=t.sY,o.skewX=t.skX,o.skewY=t.skY,o.visible=t.v),E.lastPaper=E.paper,e.paper!=E.paper&&(E.paper=e.paper,E.dispatchEvent("paperChange")),E.dispatchEvent("change"),!OPTIMIZE&&E.stage&&E.stage.update()}},E.ctrlKey=!1,E.shiftKey=!1,E.ctrlKeyCheck=!1,E.zimkeydownEvent=window.addEventListener("keydown",function(e){E.ctrlKey=e.ctrlKey,E.shiftKey=e.shiftKey,17==e.keyCode&&z&&!E.ctrlKeyCheck&&(E.ctrlKeyCheck=!0,u.noDrag(),u.drag({onTop:v,all:!0})),E.undoLevels<=0||E.undoKeys&&(e.ctrlKey&&(e.shiftKey&&90==e.keyCode||89==e.keyCode)?E.redo():e.ctrlKey&&90==e.keyCode&&E.undo())}),E.zimkeyupEvent=window.addEventListener("keyup",function(e){17==e.keyCode&&z&&E.ctrlKeyCheck&&(E.ctrlKeyCheck=!1,u.noDrag(),u.drag({onTop:v})),e.ctrlKey||(E.ctrlKey=!1),e.shiftKey||(E.shiftKey=!1)}),Object.defineProperty(this,"paper",{get:function(){return u},set:function(r){"Container"==r.type&&(u=r,X.addTo(u,0,!1),u.shape=X,E.dampX.immediate(E.x),E.dampY.immediate(E.y),E.lastX=E.finishX=E.x,E.lastY=E.finishY=E.y,"barbwire"==n&&X.graphics.s(e.Pick.choose(o)).ss(e.Pick.choose(t)*E.sizeScale*E.sizeFactor,c),X.graphics.mt(E.x,E.y),u.parent||u.addTo(E.parent,E.parent.getChildIndex(E)),zot(u.paperNum)&&(u.paperNum=++E.paperNum,b&&u.on("mousedown",function(e){E.lastSelected=e.target,E.nibEvent&&E.stage.off("stagemousemove",E.nibEvent);var t=e.target.paper;t&&(t!=E.paper&&(E.paper=t,E.dispatchEvent("paperChange")),E.shiftKey&&(E.ctrlKey?E.clear():(e.target.visible=!1,0<E.undoLevels&&E.saveState(e.target),E.dispatchEvent("change"))))}),y&&u.on("dblclick",function(e){e.target.visible=!1,0<E.undoLevels&&E.saveState(e.target)}),z&&(u.on("mousedown",function(e){stage=e.target.stage,E.shiftKey&&b||(j=e.stageX/stage.scaleX,L=e.stageY/stage.scaleY,X.top(),D=u.getChildIndex(e.target))}),u.drag({onTop:v}),u.on("pressup",function(e){b&&E.shiftKey||0!=e.target.visible&&(E.undoLevels<=0||(Math.abs(e.stageX/stage.scaleX-j)<1&&Math.abs(e.stageY/stage.scaleY-L)<1?v&&(X.top(),Y=u.getChildIndex(e.target),D!=Y&&E.saveState(e.target,D,Y)):(E.ctrlKey?(E.saveState(u),E.dispatchEvent("paperChange")):(X.top(),Y=u.getChildIndex(e.target),E.saveState(e.target,D,Y)),E.dispatchEvent("change"),X.top())))}))))}}),Object.defineProperty(this,"write",{get:function(){return O},set:function(e){O&&!1===e&&(E.finishX=E.x,E.finishY=E.y),!O&&e&&(X.graphics.es(),X.graphics.ef(),E.dampX.immediate(E.x),E.dampY.immediate(E.y),E.lastX=E.x,E.lastY=E.y),O=e}}),Object.defineProperty(this,"size",{get:function(){return t},set:function(o){X.graphics.es(),X.graphics.ef(),t=o,"splatter"!=n&&X.graphics.ss(e.Pick.choose(t)*E.sizeScale*E.sizeFactor,c)}}),Object.defineProperty(this,"color",{get:function(){return o},set:function(t){o=t,X.graphics.es(),X.graphics.ef(),"splatter"!=n&&X.graphics.s(e.Pick.choose(o))}}),Object.defineProperty(this,"penType",{get:function(){return n},set:function(r){n=r,X.graphics.ef().es(),"splatter"!=n?X.graphics.s(e.Pick.choose(o)):X.graphics.s(e.Pick.choose(o)).ss(e.Pick.choose(t)*E.sizeScale*E.sizeFactor,c)}}),Object.defineProperty(this,"damp",{get:function(){return r},set:function(e){r=e,E.dampX.damp=r,E.dampY.damp=r}}),Object.defineProperty(this,"spread",{get:function(){return a},set:function(e){a=e}}),this.setColorRange=function(e,t){return G=zot(t)?(F=E.color,e):(F=zot(e)?E.color:e,t),E};var N=0;Object.defineProperty(E,"colorRange",{get:function(){return N},set:function(t){N=t,zot(F)||zot(G)||(E.color=e.colorRange(F,G,t))}}),Object.defineProperty(this,"borderColor",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"borderWidth",{get:function(){return s},set:function(e){s=e}}),zimDefaultFrame&&(zimDefaultFrame.on("keydown",function(){frame.ctrlKey&&E.write&&(E.lastWrite=E.write,E.write=!1)}),zimDefaultFrame.on("keyup",function(){frame.ctrlKey||0!=E.write||(E.write=E.lastWrite)})),E.setPen=function(t){E.dampX.immediate(E.x),E.dampY.immediate(E.y),E.lastX=E.finishX=E.x,E.lastY=E.finishY=E.y,zot(t)&&(t=n),zot(M[t])&&(t="line"),E.penType=n=t;var o=e.merge(S,M[t]);for(var r in o)E[r]!=o[r]&&(E[r]=o[r]);return E},E.immediate=function(e,t){return zot(e)||(E.x=e,E.dampX.immediate(E.x),E.lastX=E.finishX=E.x),zot(t)||(E.y=t,E.dampY.immediate(E.y),E.lastY=E.finishY=E.y),E},E.clear=function(){if(!(u.numChildren<=1)){for(var e=[],t=0;t<u.numChildren-1;t++)e.push(u.getChildAt(t));return f.push({paper:u,clear:e}),f.length>E.undoLevels&&f.unshift(),E.dispatchEvent("recordUndo"),u.removeAllChildren(),X.graphics.clear(),u.addChild(X),E.dispatchEvent("change"),E.stage&&E.stage.update(),E}},this.delete=function(e){u.getChildAt(e).visible=!1,0<E.undoLevels&&E.saveState(u.getChildAt(e))},this.deleteSegment=function(e){e.visible=!1,0<E.undoLevels&&E.saveState(e)},!(E.dispose=function(e){return zot(e)?(window.removeEventListener("keydown",E.zimkeydownEvent),window.removeEventListener("keyup",E.zimkeyupEvent),Ticker.remove(E.Ticker),E.removeAllEventListeners(),e.removeAllEventListeners(),X.graphics.clear(),h?E.bitmap.removeFrom():X.removeFrom(),d.removeFrom(),!0):(e.removeAllEventListeners(),e.shape.graphics.clear(),void(h?e.bitmap.removeFrom():e.shape.removeFrom()))})!==k&&i(this,I)},e.extend(e.Pen,e.Container,"clone","zimContainer",!1),e.SoundWave=function(t,o,n,r,i,a,l,s,c,u){function d(t){if(t.connect(f),"mic"!=o&&f.connect(p.destination),f.fftSize=2*e.SoundWave.bufferLength,(v=Math.floor(n*e.SoundWave.bufferLength/_num))<1)zog("ZIM SoundWave: include param is too small or num param is too big");else{var r=f.frequencyBinCount,i=new Uint8Array(r);g.calculate=function(){f.getByteFrequencyData(i);var t=i.map(l);if(1==v)return t;for(var r=[],a=0,s=0;s<=n*e.SoundWave.bufferLength;s++)a+=t[s],0!=s&&s%v==0&&(r.push(Math.max(0,(a/v-g.baseline)*g.magnify-g.reduce)),a=0);return"mic"!=o&&(r[0]*=.75,r[1]*=.85,r[2]*=.9,r[r.length-2]*=.8,r[r.length-1]*=.75),r[r.length-1]*=1.3,r[r.length-2]*=1.2,r[r.length-3]*=1.1,r},setTimeout(function(){g.dispatchEvent("ready")},50)}}var h;if(h=zob(e.SoundWave,arguments,"num, input, include, smoothing, min, max, operation, baseline, magnify, reduce",this))return h;z_d("69.95"),this.type="SoundWave",zot(t)&&(t=120),zot(o)&&(o="mic"),zot(n)&&(n=.1171875),zot(r)&&(r=.85),zot(i)&&(i="mic"==o?-80:-100),zot(a)&&(a="mic"==o?-40:-10),zot(l)&&(l=function(t,o){return t*(.5+1*o/Math.pow(e.SoundWave.bufferLength,.95))}),zot(s)&&(s="mic"==o?0:30),zot(c)&&(c="mic"==o?1:10),zot(u)&&(u=0),e.SoundWave.bufferLength=1024,_num=t;var g=this;g.baseline=s,g.magnify=c,g.reduce=u;var p=new(window.AudioContext||window.webkitAudioContext),f=g.analyser=p.createAnalyser();if(f.minDecibels=i,f.maxDecibels=a,f.smoothingTimeConstant=r,Object.defineProperty(this,"smoothing",{get:function(){return f.smoothingTimeConstant},set:function(e){f.smoothingTimeConstant=e}}),Object.defineProperty(this,"num",{get:function(){return _num},set:function(t){_num=t,(v=Math.floor(n*e.SoundWave.bufferLength/_num))<1&&zog("ZIM SoundWave: num is too big")}}),"mic"==o)return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,void(navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(e){d(g.source=p.createMediaStreamSource(e))},function(e){zog("ZIM SoundWave: Error occured: "+e)}):zog("ZIM SoundWave: Sorry, mic not supported"));if(o.type&&"sound"==o.type)zog("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input");else{if(o.playbackResource)var m=o.playbackResource,z=p.createMediaElementSource(m);else m=o,z=p.createMediaElementSource(m);var v;d(z)}},e.extend(e.SoundWave,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.VR=function(t,o,n,r,i,a,l,s,c,u,d,h){function g(e){x.currentAngle=e;var t=-x.currentAngle*n/o;if(x.contentLeft.x=t,x.contentRight.x=t,Math.round(x.currentAngle)<=-o/2&&!L)(r=new createjs.Event("boundaryout")).boundary="left",L=!0,x.dispatchEvent(r);else if(Math.round(x.currentAngle)>=o/2&&!D)(r=new createjs.Event("boundaryout")).boundary="right",D=!0,x.dispatchEvent(r);else if(Math.round(x.currentAngle)>-o/2&&Math.round(x.currentAngle)<o/2){var r=new createjs.Event("boundaryin");L?(r.boundary="left",x.dispatchEvent(r),L=!1):D&&(r.boundary="right",x.dispatchEvent(r),D=!1)}}function p(e){var t=e.parent.localToLocal(e.vrStartX,0,h),r=e.vrParallaxDamp.convert("left"==e.vrChannel?x.contentLeft.x+t.x-k/4:x.contentRight.x+t.x-k/2-k/4);e.depth<=0&&!c&&(r=0),e.vrParallaxDistance=Math.max(-n/o*i/2,Math.min(n/o*i/2,r)),e.dep(e.depth)}function f(e,t){e.vrParallaxDistance=e.depth<=0&&!c?0:t,e.dep(e.depth)}function m(t){0!=o&&0!=n?(e.loop(E,p),e.loop(O,p)):(e.loop(E,function(e){f(e,t)}),e.loop(O,function(e){f(e,t)}))}function z(){I.addTo(A,null,!1).setMask(A.getChildAt(0)).pos({y:(h.height-I.height)/2,reg:!0}),S.addTo(B,null,!1).setMask(B.getChildAt(0)).pos({y:(h.height-I.height)/2,reg:!0})}function v(t,o,n,r){((t.vrMatch=o).vrMatch=t).cacheCanvas&&o.cache(),t.dep&&!zot(t.depth)&&(E.push(t),O.push(o),zot(n)||n.push(t),zot(r)||r.push(o),o.dep(t.depth)),e.loop(t,function(e,t){v(e,o.getChildAt(t),n,r)})}function b(t,i){e.loop(t,function(t){t.vrChannel=i,t.vrStartX=t.x,0!=o&&0!=n&&(t.vrAngle=o,t.vrDistance=n),0!=r&&0!=n&&(t.vrParallax=r/100,(t.vrParallaxDistance=0)!=o&&(t.vrParallaxDamp=new e.Damp(0,l))),t.dep(t.depth)})}function y(){var e=U.convert(V.currentValue);I.regX=I.startRegX+e,S.regX=S.startRegX-e}var w;if(w=zob(e.VR,arguments,"content, angle, distance, parallax, parallaxAngle, damp, parallaxDamp, startAngle, negativeParallax, boundaryMarkers, swiper, holder",this))return w;if(z_d("69.98"),this.type="VR",zimDefaultFrame){var C=zimDefaultFrame;!zot(h)&&h.getBounds&&h.getBounds().width||(h=C.stage),zot(o)&&(o=0),zot(n)&&(n=100),zot(a)&&(a=.5),zot(r)&&(r=0),zot(i)&&(i=60),zot(l)&&(l=.1),zot(s)&&(s=0),zot(c)&&(c=!1),zot(u)&&(u=!0),zot(d)&&(d=!0),this.angle=o,this.currentAngle=s,e.mobile()&&(d=!1);var x=this,k=h.width,T=h.height;x.zimContainer_constructor();var A=x.left=new e.Container(k/2,T,null,null,!1),P=new e.Rectangle(k/2,T,"rgba(0,0,0,.01)",null,null,null,null,null,!1);A.addChild(P);var B=x.right=A.clone();x.addChild(A,B),B.x=k/2;var I=x.contentLeft=x.content=t,S=x.contentRight=t.clone();if(0!=s)var M=setTimeout(z,100);else z();var E=[],O=[];if(v(I,S),b(E,"left"),b(O,"right"),0!=o&&0!=n){var j=new e.Damp(180+s,a);j.immediate(180+s);var L=!1,D=!1;C.on("deviceorientation",function(e){g(j.convert((180<e.rotation.z?-180:180)+e.rotation.z+s)-180)}),e.Ticker.always()}if(0!=r&&0!=n){var Y=new e.ProportionDamp(180-i/2,180+i/2,-i/2,i/2,l);Y.immediate(180),C.on("deviceorientation",function(e){var t=0;0==o&&0!=r&&0!=n&&(t=Y.convert((180<e.rotation.z?-180:180)+e.rotation.z)),m(t)}),e.Ticker.always()}!d||0==n||0==o&&0==r||x.added(function(){var t={swipeAngle:0};x.swiper=new e.Swiper({swipeOn:x,target:t,property:"swipeAngle",sensitivity:.2,damp:.05,factor:-1,min:-330,max:330}),Ticker.add(function(){0!=o&&0!=n&&g(t.swipeAngle),0!=r&&0!=n&&m(Y.convert(t.swipeAngle+180))})});var X=localStorage&&localStorage.zimEyeAdjust?Number(localStorage.zimEyeAdjust):0,R=X,_=!1;I.startRegX=I.regX,S.startRegX=S.regX;var W=this.adjuster=new e.Container(800,300,null,null,!1),F=(P=W.backing=new e.Rectangle(W.width,W.height,e.lighter,null,null,null,null,null,!1).center(W).alp(1).sha("rgba(0,0,0,.2)",0,0,30),W.strip=new e.Rectangle(W.width,W.height/3,e.white,null,null,null,null,null,!1).center(W).alp(1),W.label=new e.Label({text:"slide to adjust center of left and right",size:28,color:e.dark,align:"center",valign:"center"}).center(W).pos({y:50,reg:!0}),W.close=new e.Rectangle(50,50,e.light,null,null,null,null,null,!1).addTo(W).mov(W.width-70,26)),G=new e.Shape(-40,-40,80,80,null,!1);G.graphics.f(e.dark).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),G.center(F).sca(.3),F.cursor="pointer",F.on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){x.hideAdjuster(),V.currentValue=(V.max-V.min)/2+R,x.dispatchEvent("closed")});var H=new e.Circle(30,e.dark,null,null,null,null,null,!1).center(W).pos({x:W.width/4,reg:!0});H.shape.alpha=.2,new e.Circle(12,e.dark,null,null,null,null,!1).center(H);var N=new e.Circle(30,e.dark,null,null,null,null,!1).center(W).pos({x:W.width/4*3,reg:!0});N.shape.alpha=.2,new e.Circle(12,e.dark,null,null,null,null,null,!1).center(N);var V=W.slider=new e.Slider({min:0,max:30,step:1,useTicks:!0,style:!1}).centerReg(W).pos({y:W.height-40,reg:!0});V.currentValue=(V.max-V.min)/2+X;var q=new e.Proportion(V.min,V.max,H.x-W.width/4,H.x+W.width/4,-1),K=new e.Proportion(V.min,V.max,N.x-W.width/4,N.x+W.width/4);V.on("change",function(){H.x=q.convert(V.currentValue),N.x=K.convert(V.currentValue)}),new e.Label("closer",24,null,e.silver).centerReg(W).pos({x:V.x-220,y:V.y,reg:!0}),new e.Label("farther",24,null,e.silver).centerReg(W).pos({x:V.x+220,y:V.y,reg:!0}),(x.ok=new e.Button({label:"OK",width:90,height:60,corner:0,backgroundColor:e.blue,rollBackgroundColor:e.green,shadowColor:-1,style:!1}).centerReg(W).sca(.8).pos({x:W.width-58,y:V.y,reg:!0})).on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){localStorage&&(localStorage.zimEyeAdjust=V.currentValue-(V.max-V.min)/2),y(),x.hideAdjuster(),x.dispatchEvent("saved"),x.dispatchEvent("closed")}),(x.zero=new e.Button({label:">|<",width:90,height:60,corner:0,backgroundColor:e.yellow,rollBackgroundColor:e.green,shadowColor:-1,style:!1}).centerReg(W).sca(.8).pos({x:58,y:V.y,reg:!0})).on((zns?"mousedown"==e.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){V.currentValue=(V.max-V.min)/2,H.x=q.convert(V.currentValue),N.x=K.convert(V.currentValue)});var U=new e.Proportion(0,30,-h.width/4,h.width/4);y(),this.showAdjuster=function(){if(_)return x;_=!0,H.x=q.convert(V.currentValue),N.x=K.convert(V.currentValue),R=V.currentValue-(V.max-V.min)/2,W.scaleTo(h).center(this),h.stage.update()},this.hideAdjuster=function(){if(!_)return x;_=!1,W.removeFrom(this),h.stage.update()},this.position=function(e,t,o){function n(e){e.vrStartX=t,e.vrParallaxDamp&&e.vrParallaxDamp.immediate(t),e.mov(t,o)}return n(e),n(e.vrMatch),e},this.register=function(e){if(!e.parent||!e.parent.vrMatch)return zon&&zog("ZIM VR() - please only register objects already inside content container"),e;var t=[],o=[];return v(e,e.clone().addTo(e.parent.vrMatch),t,o),b(t,"left"),b(o,"right"),e},0!=o&&0!=n&&u&&(x.boundaryRight=new e.Container({style:!1}),new e.Circle(24,e.light,null,null,null,null,null,!1).addTo(x.boundaryRight).dep(-2),new e.Triangle(16,16,16,e.yellow,e.grey,null,null,-3,null,null,!1).rot(-90).center(x.boundaryRight).dep(-6),x.boundaryRight.center(t).mov(n/2+24),x.boundaryLeft=new e.Container({style:!1}),new e.Circle(24,e.light,null,null,null,null,null,!1).addTo(x.boundaryLeft).dep(-2),new e.Triangle(16,16,16,e.yellow,e.grey,null,null,-3,null,null,!1).rot(90).center(x.boundaryLeft).dep(-6),x.boundaryLeft.center(t).mov(-n/2-24),x.register(x.boundaryRight),x.register(x.boundaryLeft)),this.remove=function(o){return e.loop(arguments,function(o,n){t.contains(n)&&(function t(o){var n=E.indexOf(o);0<=E.indexOf(o)&&(E.splice(n,1),O.splice(n,1)),e.loop(o,function(e){t(e)})}(n),n.parent.removeChild(n),n.vrMatch.parent.removeChild(n.vrMatch))}),x},this.resize=function(){k=h.width,T=h.height,A.getChildAt(0).widthOnly=B.getChildAt(0).widthOnly=k/2,A.getChildAt(0).heightOnly=B.getChildAt(0).heightOnly=T,B.x=k/2,A.setBounds(0,0,k/2,T),B.setBounds(0,0,k/2,T),0!=s?(clearTimeout(M),M=setTimeout(z,100)):z(),W.scaleTo(h).center(this,null,!1)}}else zon&&zog("zim.VR() - please use ZIM Frame")},e.extend(e.VR,e.Container,"clone","zimContainer",!1),e.Frame=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,v,b,y,w,C,x,k,T,A,P,B){function I(){if(B){var t=Q.getBounds();return U=t.width,Z=t.height,void G.dispatchEvent("resize")}ie=Date.now()+m,se?le||(le=!0,ee=e.Ticker.update,e.Ticker.update=!1,j(),D(),clearInterval(G.frameTime),G.frameTime=setInterval(function(){if(Date.now()>ie)return clearInterval(G.frameTime),le=!1,void(Q==zimDefaultFrame.stage&&(e.Ticker.update=ee));j(),D()},50)):(j(),D(),clearInterval(G.frameTime),G.frameTime=setInterval(function(){Date.now()>ie?clearInterval(G.frameTime):(j(),D())},m<50?m+5:50))}function S(){function r(){j(),oe=!0,M(),D(),Q&&Q.update()}if(!re){if(re=!0,-1==q.indexOf(t)){if(zot(zid(J=t)))return void zog("zim.Frame - scaling: HTML tag with id="+t+" must exist");$=this.tag=zid(J),t=zot(o)||zot(n)?"tag":"inline",0==p.indexOf("myCanvas")&&(p=J+"Canvas")}G.canvasID=p,zot(o)&&(o=500),zot(n)&&(n=500),zot(i)||(G.outerColor=i),E(),O(),H?(d&&setTimeout(function(){window.scrollTo(0,0)},50),setTimeout(r,100),100!=m&&setTimeout(r,m)):(oe=!0,M());var c;G.loadAssetsCount=0,G.assets={},G.assetIDs={},zot(a)?(ne=!0,M()):zot(c=a.constructor!={}.constructor||a.audioSprite||a.id||a.data||a.src?G.loadAssets({assets:a,path:l,progress:s,queueOnly:!0}):G.loadAssets(e.merge(a,{progress:s,queueOnly:!0})))||!c.on?(zon&&zog("ZIM Frame - load failed"),ne=!0,M()):c.on("complete",function(){ne=!0,M()})}}function M(){oe&&ne&&!te&&(!zot(s)&&s.show&&s.hide(),G.dispatchEvent("ready"),te=!0,D())}function E(){var o=G.canvas=document.createElement("canvas");o.setAttribute("id",p),o.setAttribute("tabindex",0);var n=e.windowWidth(),i=e.windowHeight(),a=window.devicePixelRatio||1;"full"==t||"tag"==t?T?(G.scale=a,o.setAttribute("width",n*G.scale),o.setAttribute("height",i*G.scale),"full"==t&&(o.style.width=n+"px",o.style.height=i+"px")):(o.setAttribute("width",n),o.setAttribute("height",i)):(o.setAttribute("width",U),o.setAttribute("height",Z));var l=zid(p+"Alternative");l&&o.appendChild(l),"tag"==t||"inline"==t?$.appendChild(o):document.body.appendChild(o),zot(r)||(o.style.backgroundColor=r),"full"!=t&&"fit"!=t&&"outside"!=t||(o.style.position="absolute",C||(document.body.style.overflow="hidden"))}function O(){j(),-1==q.indexOf(t)||C||(G.zil=zil()),G.mouseEvent&&Q&&Q.off("stagemousemove",G.mouseEvent),(Q=v?new e.StageGL(p,b):new e.Stage(p)).mouseMoveOutside=A,!zot(r)&&v&&Q.setClearColor(e.convertColor(r)),Q.setBounds(0,0,U,Z),Q.width=U,Q.height=Z,T&&j(),c&&Q.enableMouseOver(f),u&&createjs.Touch.enable(Q,!1,C),C&&(Q.preventSelection=!1),y&&(Q.nextStage=y.stage),w&&(Q.nextStage=w),P&&(G.mouseX=0,G.mouseY=0,G.mouseEvent=Q.on("stagemousemove",function(e){G.mouseX=e.stageX/G.stage.scaleX,G.mouseY=e.stageY/G.stage.scaleY}))}function j(){if(G){var n,r,i=zid(p),a=e.windowWidth(),l=e.windowHeight();if((N=G.orientation=l<a?"horizontal":"vertical")!=V&&(V=N,G.dispatchEvent("orientation")),H&&d&&setTimeout(function(){window.scrollTo(0,0)},100),i){if("fit"==t)G.scale=U/Z<=a/l?l/Z:a/U;else if("outside"==t)G.scale=U/Z<=a/l?a/U:l/Z;else{if("full"==t){if(i.style.left=i.style.top="0px",i.width=U=a,i.height=Z=l,Q){if(Q.setBounds(0,0,U,Z),T){var s=window.devicePixelRatio||1;i.width=a*s,i.height=l*s,i.style.width=a+"px",i.style.height=l+"px",G.scale=s,Q&&(Q.scaleX=Q.scaleY=G.scale,Q.tickOnUpdate=!1,Q.update(),Q.tickOnUpdate=!0)}Q.width=U,Q.height=Z,v&&Q.updateViewport(U/Q.scaleX,Z/Q.scaleY)}return e.scrollX(0),e.scrollY(0),void L()}if("tag"==t){U=""==$.style.width?$.getAttribute("width")||$.offsetWidth:$.style.width,Z=""==$.style.height?$.getAttribute("height")||$.offsetHeight:$.style.height,T?(i.width=U*G.scale,i.height=Z*G.scale,i.style.width=U+"px",i.style.height=Z+"px",Q&&(Q.scaleX=Q.scaleY=G.scale,Q.tickOnUpdate=!1,Q.update(),Q.tickOnUpdate=!0)):(i.width=U,i.height=Z),Q&&(Q.setBounds(0,0,U,Z),Q.width=U,Q.height=Z,v&&Q.updateViewport(U/Q.scaleX,Z/Q.scaleY)),$.style.overflow="hidden",i.style.left=i.style.top="0px";var c=i.getBoundingClientRect();return G.x=c.x+e.scrollX(),G.y=c.y+e.scrollY(),void L()}if("inline"==t){if(T){if(document.styleSheets[0])for(var u=document.styleSheets[0].rules||document.styleSheets[0].cssRules,f=0;f<u.length;f++){var m=u[f];if(m.selectorText=="#"+p){var z=m.style.getPropertyValue("width");if(z){var b=zum(i.style.width),y=zum(i.style.height);i.style.width=z}}}var w=window.getComputedStyle(i),C=zum(w.getPropertyValue("width"));b&&(i.style.height=y*C/b+"px",w=window.getComputedStyle(i));var x=zum(w.getPropertyValue("height"));s=window.devicePixelRatio||1,G.scale=C/o*s,i.width=U*G.scale,i.height=Z*G.scale,i.style.width=C+"px",i.style.height=x+"px",Q&&(Q.scaleX=Q.scaleY=G.scale,Q.tickOnUpdate=!1,Q.update(),Q.tickOnUpdate=!0)}return Q&&(Q.setBounds(0,0,U,Z),Q.width=U,Q.height=Z,v&&Q.updateViewport(U/Q.scaleX,Z/Q.scaleY)),i.style.left=i.style.top="0px",c=i.getBoundingClientRect(),G.x=c.x+e.scrollX(),G.y=c.y+e.scrollY(),void L()}}r=Z*G.scale,n=U*G.scale,T?(s=window.devicePixelRatio||1,G.scale*=s,i.width=U*G.scale,i.height=Z*G.scale,i.style.width=U*G.scale/s+"px",i.style.height=Z*G.scale/s+"px",Q&&(Q.scaleX=Q.scaleY=G.scale,Q.tickOnUpdate=!1,Q.update(),Q.tickOnUpdate=!0)):(i.style.width=n+"px",i.style.height=r+"px"),G.x="left"==h?0:"right"==h?a-n:(a-n)/2,G.y="top"==g?0:"bottom"==g?l-r:(l-r)/2,i.style.left=G.x+"px",i.style.top=G.y+"px",e.scrollX(0),e.scrollY(0),L()}}}function L(){if("outside"==t){var o=(zum(G.canvas.style.width)-e.windowWidth())/2;"left"==h?(G.visibleLeft=0,G.visibleRight=e.windowWidth()/(e.windowWidth()+2*o)*U):"right"==h?(G.visibleLeft=2*o/(e.windowWidth()+2*o)*U,G.visibleRight=U):(G.visibleLeft=o/(e.windowWidth()+2*o)*U,G.visibleRight=(e.windowWidth()+o)/(e.windowWidth()+2*o)*U);var n=(zum(G.canvas.style.height)-e.windowHeight())/2;"top"==g?(G.visibleTop=0,G.visibleBottom=e.windowHeight()/(e.windowHeight()+2*n)*Z):"bottom"==g?(G.visibleTop=2*n/(e.windowHeight()+2*n)*Z,G.visibleBottom=Z):(G.visibleTop=n/(e.windowHeight()+2*n)*Z,G.visibleBottom=(e.windowHeight()+n)/(e.windowHeight()+2*n)*Z)}else G.visibleLeft=G.visibleTop=0,G.visibleRight=U,G.visibleBottom=Z}function D(){te&&G&&(G.dispatchEvent("resize"),e.OPTIMIZE||!zns&&OPTIMIZE||!Q||"full"!=t&&"tag"!=t||Q.update())}function Y(e){e.remove=G.eventRemove,G.altKey=e.altKey,G.ctrlKey=e.ctrlKey,G.metaKey=e.metaKey,G.shiftKey=e.shiftKey,G.dispatchEvent(e)}function X(e){G.altKey=e.altKey,G.ctrlKey=e.ctrlKey,G.metaKey=e.metaKey,G.shiftKey=e.shiftKey,e.remove=G.eventRemove,G.dispatchEvent(e)}function R(e){G.dispatchEvent(e)}function _(e){e.remove=G.eventRemove,G.dispatchEvent(e)}function W(e){e.remove=G.eventRemove;var t=360-e.alpha;135<Math.abs(t-ge)&&Math.abs(t-ge)<225&&(pe=0==pe?180:0),ge=t,e.rotation={x:e.beta,y:e.gamma,z:(t+pe)%360},G.dispatchEvent(e)}var F;if(F=zob(e.Frame,arguments,"scaling, width, height, color, outerColor, assets, path, progress, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, canvasCheck, gpu, gpuObj, nextFrame, nextStage, allowDefault, loadFailObj, sensors, retina, mouseMoveOutside, captureMouse, shim",this))return F;z_d("83"),zon&&zog("ZIM FRAME"),this.cjsEventDispatcher_constructor(),this.type="Frame";var G=this;if(void 0===zimDefaultFrame&&(zimDefaultFrame=this),zot(z)&&(z=!0),!window.HTMLCanvasElement&&z)setTimeout(function(){G.dispatchEvent("failed")},100);else{var H=e.mobile();zot(t)&&(t="full"),zot(c)&&(c=!H),zot(u)&&(u=!0),zot(d)&&(d=!1),zot(h)&&(h="center"),zot(g)&&(g="center"),zot(p)&&(p=zimDefaultFrame!=this?"myCanvas"+e.makeID(5):"myCanvas"),zot(f)&&(f=20),zot(m)&&(m=H?1e3:30),zot(v)&&(v=!1),zot(C)&&(C=!1),zot(x)&&(x="circles"),this.loadFailObj=x,zot(k)&&(k=!1),zot(T)&&(T=!0),this.retina=T,zot(A)&&(A=!1),zot(P)&&(P=!0),zot(B)&&(B=!1);var N,V,q=["fit","outside","full"];if(B){var K=this.canvas=B.canvas;this.scale=B.stage.scaleX,setTimeout(function(){G.scale=B.stage.scaleX,window.addEventListener("resize",function(){G.scale=B.stage.scaleX})},20),this.x=B.stage.x,this.y=B.stage.y;var U=(Q=B.stage).getBounds().width,Z=Q.getBounds().height;r=K.style.backgroundColor}else{var Q;this.scale=1,this.x=0,this.y=0,U=o,Z=n}var J,$,ee,te=!1,oe=!1,ne=!1,re=!1;B||("interactive"===document.readyState||"complete"===document.readyState?setTimeout(function(){S()},200):document.addEventListener("DOMContentLoaded",S));var ie,ae,le=!1,se="full"==t&&"undefined"!=typeof InstallTrigger;if(this.swapRotation=!1,H){var ce=isNaN(window.innerWidth)?window.clientWidth:window.innerWidth,ue=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight;this.swapRotation=(0==window.orientation||180==window.orientation)&&ue<ce||90==Math.abs(window.orientation)&&ce<ue}window.addEventListener("resize",I),this.update=function(){j(),G.dispatchEvent("update")},this.loadAssets=function(t,o,n,r,i,a,l,s,c,u){function d(e){x++;var t=e.split("?");(m=t[0].match(y))&&0<=createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(m[1])&&(v=!0)}function h(){S.loadAssetsCount--,0==S.loadAssetsCount&&g()}function g(){var e=Date.now();i=Math.max(0,i-(e-D)),setTimeout(function(){G.loadAssetsCount--,G.loadAssetsCount<=0&&(G.isLoading=!1),S.isLoading=!1,S.dispatchEvent(Y),u||G.dispatchEvent(Y)},i)}if(!zot(t)){if(zot(t.src)){var p;if(p=zob(G.loadAssets,arguments,"assets, path, progress, xhr, time, loadTimeout, outputAudioSprite, crossOrigin, fileType, queueOnly"))return p}if(!zot(n)&&"ProgressBar"==n.type&&zot(r)&&(r=!0),Array.isArray(t)||(t=[t]),0!=t.length){zot(i)&&(i=0),zot(a)&&(a=8e3),zot(l)&&(l=!1),zot(s)&&(s="anonymous"),zot(u)&&(u=!1);var f,m,z,v=!1,b=[],y=/\.([^.]+)$/i,w=[],C=[],x=0,k=!0;for(j=0;j<t.length;j++){if((f=t[j]).constructor=={}.constructor)if(f.audioSprite){d(f=(P=e.copy(f)).src);var T,A=[];for(z=0;z<P.audioSprite.length;z++)T=P.audioSprite[z],A.push({id:T[0],startTime:Math.round(1e3*T[1]),duration:Math.round(1e3*(T[2]-T[1]))});delete P.audioSprite,P.data={audioSprite:A},l&&zog(JSON.stringify(P)),b.push(P)}else if(f.data&&f.data.audioSprite){var P;d(f=(P=e.copy(f)).src),b.push(P)}else if(f.id){G.assetIDs[f.id]=f.src,d(f=f.src);var B={src:f,loadTimeout:a};zot(c)||(B.type=c),b.push(B)}else f.src.match(/fonts\.googleapis\.com/)?C.push(f):w.push(f);else d(f),B={src:f,loadTimeout:a},zot(c)||(B.type=c),b.push(B);if(v&&k){var I=document.createElement("audio");I.setAttribute("src",(zot(o)?"":o)+f),document.body.appendChild(I),k=!1}}G.loadAssetsCount++,G.isLoading=!0;var S=new e.Queue;if(S.isLoading=!0,S.loadAssetsCount=0,!zot(n)&&n.show&&(n.zimActiveLoader=S,n.show()),0<w.length){for(var M,E,O=[],j=0;j<w.length;j++)M={src:"url("+((E=w[j]).src.match(/^http/i)?"":o||"")+E.src+")"+(E.type?" format('"+E.type+"')":""),family:E.font},E.weight&&(M.weight=E.weight),E.style&&(M.style=E.style),O.push(M);(L=new createjs.FontLoader({src:O},!0)).on("complete",h),L.on("error",h),L.load(),S.loadAssetsCount++}if(0<C.length){var L;for(j=0;j<C.length;j++)M={src:(E=C[j]).src,type:"fontcss"},S.loadAssetsCount++,(L=new createjs.FontLoader(M,!0)).on("complete",h),L.on("error",h),L.load()}var D=Date.now(),Y=new createjs.Event("complete");if(0<x){S.loadAssetsCount++;var X=S.preload=G.preload=new createjs.LoadQueue(r,o,s);v&&X.installPlugin(createjs.Sound),X.on("progress",function(e){S.dispatchEvent(e),u||G.dispatchEvent(e)}),X.on("error",function(e){S.dispatchEvent(e),u||G.dispatchEvent(e)}),X.on("fileload",function(t){var n,r=t.item,i=t.item.type;if(r.id.match(y),i&&"sound"==i){var a=[];if(r.data&&r.data.audioSprite)for(var l=0;l<r.data.audioSprite.length;l++)a.push(r.data.audioSprite[l].id);else a.push(r.id);for(l=0;l<a.length;l++)!function(){var e=a[l];n=G.assets[a[l]]={type:"sound",path:o,id:e,play:function(t){t&&!0===t.loop&&(t.loop=-1),t&&t.loopCount&&(t.loop=t.loopCount);var o=createjs.Sound.play(e,t);return o.getStage=function(){return Q},o}}}()}else"image"==i?t.result.width&&(n=G.assets[r.id]=new e.Bitmap(t.result,t.result.width,t.result.height,r.id)):n=G.assets[r.id]=t.result;var s=new createjs.Event("assetload");s.item=r,s.asset=n,S.dispatchEvent(s),u||G.dispatchEvent(s)}),G.preloadEvent=X.on("complete",function(e){Y=e,S.loadAssetsCount--,0==S.loadAssetsCount&&g()});try{X.loadManifest(b)}catch(t){}}return S}}},this.asset=function(e){if(!zot(e)){var t=G.assetIDs[e];if(t&&(e=t),G.assets[e])return G.assets[e];if("circles"==G.loadFailObj)var o=G.makeCircles(14);else o=G.loadFailObj;return o&&(o.type="EmptyAsset",o.id=e,o.play=function(){if(zon)return zog("zim.Frame - asset("+e+") not found"),{}}),o}},this.setDefault=function(){return zimDefaultFrame=G},Object.defineProperty(G,"isDefault",{get:function(){return zimDefaultFrame==G},set:function(e){zog("zim.Frame(): isDefault is read only - see setDefault()")}}),Object.defineProperty(G,"stage",{get:function(){return Q},set:function(e){zog("zim.Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(G,"width",{get:function(){return U},set:function(e){zog("zim.Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(G,"height",{get:function(){return Z},set:function(e){zog("zim.Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return r},set:function(t){zot(r=t)?zid(p).style.backgroundColor="default":!zot(zid(p).style.backgroundColor=r)&&v&&Q.setClearColor(e.convertColor(r))}}),Object.defineProperty(this,"outerColor",{get:function(){return ae},set:function(e){ae=e,zet("body").css({backgroundColor:ae})}});var de=C;Object.defineProperty(G,"allowDefault",{get:function(){return de},set:function(e){e?(Q.preventSelection=!1,document.body.style.overflow="visible",G.zil&&(window.removeEventListener("keydown",G.zil[0]),window.removeEventListener("wheel",G.zil[1]),window.removeEventListener("DOMMouseScroll",G.zil[2]),G.zil=null)):(Q.preventSelection=!0,document.body.style.overflow="hidden",zot(G.zil)&&(G.zil=zil())),de=e}});var he=new createjs.Event("keydown");if(this.eventRemove=he.remove,window.addEventListener("keydown",Y),window.addEventListener("keyup",X),window.addEventListener("wheel",R),k&&window.DeviceMotionEvent&&window.addEventListener("devicemotion",_),k&&window.DeviceOrientationEvent){var ge=0,pe=0;window.addEventListener("deviceorientation",W)}this.remakeCanvas=function(e,o){"full"!=t&&(zot(e)&&(e=U),zot(o)&&(o=Z),zid(p)&&zid(p).parentNode.removeChild(zid(p)),U=e,Z=o,E(),O())},this.follow=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p){function f(){var f=t.parent;G.frameBorderLock=g,d&&(G.followDampX=new e.Damp(f.x,n),G.offsetDampX=new e.Damp(o.x+i+(o.width-i-a)/2,c)),h&&(G.followDampY=new e.Damp(f.y,r),G.offsetDampY=new e.Damp(o.y+l+(o.height-l-s)/2,u)),G.followTicker=Ticker.add(function(){var e=G.followBoundary;if(d){var o=e.x+i+(e.width-i-a)/2;G.followOffsetX=[p?e.x+e.width-i:o,o,p?e.x+i:o],G.followObj&&(f.x=G.followDampX.convert(G.offsetDampX.convert(G.followOffsetX[t.motionController?t.motionController.dirX+1:1])-t.x))}if(h){var n=e.y+l+(e.height-l-s)/2;G.followOffsetY=[p?e.y+e.height-s:n,n,p?e.y+l:n],G.followObj&&(f.y=G.followDampY.convert(G.offsetDampY.convert(G.followOffsetY[t.motionController?t.motionController.dirY+1:1])-t.y))}G.frameBorderLock&&(f.x>G.followBoundary.x&&(f.x=G.followBoundary.x),f.y>G.followBoundary.y&&(f.y=G.followBoundary.y),f.x<G.followBoundary.x+G.followBoundary.width-f.width&&(f.x=G.followBoundary.x+G.followBoundary.width-f.width),f.y<G.followBoundary.y+G.followBoundary.height-f.height&&(f.y=G.followBoundary.y+G.followBoundary.height-f.height))})}var m;return(m=zob(G.follow,arguments,"obj, boundary, damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, lag"))?m:(G.followObj=null,G.followTicker&&e.Ticker.remove(G.followTicker),zot(t)?void 0:(t.dirX=t.dirY=0,(G.followObj=t).followDampX=null,t.followDampY=null,zot(o)&&(o=new e.Boundary(0,0,G.stage.width,G.stage.height)),G.followBoundary=o,zot(n)&&(n=.05),zot(r)&&(r=n),zot(i)&&(i=0),zot(a)&&(a=0),zot(l)&&(l=0),zot(s)&&(s=0),zot(c)&&(c=.02),zot(u)&&(u=c),zot(d)&&(d=!0),zot(h)&&(h=!0),zot(g)&&(g=!1),zot(p)&&(p=!1),t.parent?f():t.on("added",f),t))},this.dispose=function(){return window.removeEventListener("resize",I),window.removeEventListener("keydown",Y),window.removeEventListener("keyup",X),window.removeEventListener("wheel",R),window.removeEventListener("devicemotion",_),window.removeEventListener("deviceorientation",W),function e(t){if(t.removeAllEventListeners(),t.numChildren)for(var o=t.numChildren-1;0<=o;o--)e(t.getChildAt(o));t.parent&&t.parent.removeChild(t)}(Q),zid(p)&&zid(p).parentNode.removeChild(zid(p)),!(G=Q=null)},this.orange="#f58e25",this.green="#acd241",this.pink="#e472c4",this.blue="#50c4b7",this.brown="#d1a170",this.yellow="#ebcb35",this.purple="#993399",this.red="#fb4758",this.silver="#999999",this.tin="#777777",this.grey="#555555",this.gray="#555555",this.lighter="#eeeeee",this.moon="#dddddd",this.light="#cccccc",this.dark="#333333",this.darker="#111111",this.black="#000000",this.white="#ffffff",this.clear="rgba(0,0,0,0)",this.faint="rgba(0,0,0,.01)",this.makeCircles=function(t,o){zot(t)&&(t=100);var n=[G.orange,G.green,G.pink,G.blue,G.brown,G.dark];if(o){(i=new e.Container({style:!1})).radius=t;for(var r=0;r<n.length;r++)i.addChild(new e.Circle(i.radius/n.length*(n.length-r),n[r],null,null,null,null,null,!1))}else{var i,a=(i=new e.Shape({style:!1})).graphics;for(i.radius=t,r=0;r<n.length;r++)a.f(n[r]).dc(0,0,i.radius/n.length*(n.length-r));i.setBounds(-i.radius,-i.radius,2*i.radius,2*i.radius)}return i},this.makeIcon=function(t,o,n){var r=new e.Container(-14,-13,90,120).reg(-14,-13);zot(t)&&(t=G.light),zot(o)&&(o=G.dark),!0===n&&(n=G.silver),new Rectangle(r.width,r.height,o).loc(-14,-13,r);var i=[[n||"#E474C3","AieA0IAAgCIAmhlIEXAAIg5Bng",41.7,19.5],[n||"#50C5B7","AiSAzIAnhlID+AAIg5Blg",35.3,33.2],[n||"#F48E25","AiFA0IAmhnIDlAAIg5Bng",28.9,46.7],[n||"#EBCD36","Ah4AzIAmhlIDLAAIg5Blg",22.4,60.5],[n||"#ABD140","AhrA0IAAgFIAlhiICxAAIg5Bng",16.1,74.3],[t,"AlGHRIAnhnIH+AAIgbBngAlGlpIAnhnIJmAAIg5Bng",32.7,46.5]];return e.loop(i,function(t){var o=(new e.Shape).addTo(r);o.graphics.f(t[0]).p(t[1]),o.setTransform(t[2],t[3])}),r.mouseChildren=!1,r}}},e.extend(e.Frame,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.Queue=function(){this.cjsEventDispatcher_constructor(),this.isLoading=!0},e.extend(e.Queue,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.LEFT="left",e.RIGHT="right",e.CENTER="center",e.MIDDLE="middle",e.TOP="top",e.BOTTOM="bottom",e.HORIZONTAL="horizontal",e.VERTICAL="vertical",e.BOTH="both",e.orange="#f58e25",e.green="#acd241",e.pink="#e472c4",e.blue="#50c4b7",e.brown="#d1a170",e.yellow="#ebcb35",e.purple="#993399",e.red="#fb4758",e.black="#000000",e.darker="#111111",e.dark="#333333",e.grey="#555555",e.gray="#555555",e.tin="#777777",e.silver="#999999",e.light="#cccccc",e.moon="#dddddd",e.lighter="#eeeeee",e.white="#ffffff",e.faint="rgba(0,0,0,.01)",e.clear="rgba(0,0,0,0)",e.distillery=[],e.distill=function(){!window.zns&&e&&(e.DISTILL||window.DISTILL)&&e.distillery.push("83.3","83.35"),zog("zim.distill() - go to https://zimjs.com/distill and enter the following:"),zog(0<e.distillery.length?e.distillery.join(" "):"must set zim.DISTILL = true;")},e.parseAudioSprite=function(e,t){if(z_d("83.25"),!(zot(e)||zot(e.resources)||zot(e.spritemap))){var o,n=e.resources[0],r=e.spritemap,i=[],a={src:n,data:{}};for(l in r)o=r[l],i.push({id:l,startTime:Math.round(1e3*o.start),duration:Math.round(1e3*(o.end-o.start))});return a.data.audioSprite=i,t&&zog(JSON.stringify(a)),a}},e.previewAudioSprite=function(t,o,n){if(z_d("83.26"),!zot(t)){if(zot(o)&&(o=3),zot(n)){if(zot(zimDefaultFrame))return;stage=(n=zimDefaultFrame).stage}var r=t,i=[],a=[];if(r.constructor=={}.constructor){r.resources&&(r=e.parseAudioSprite(r)),r.audioSprite?loop(r.audioSprite,function(e){i.push(e[0].substr(0,o)),a.push(e[0])}):r.data&&r.data.audioSprite&&loop(r.data.audioSprite,function(e){i.push(e.id.substr(0,o)),a.push(e.id)});var l=new e.Tabs({tabs:i,width:stageW,currentEnabled:!0}).addTo(stage);return l.on("change",function(){n.asset(a[l.selectedIndex]).play()}),l}}},e.svgToBitmap=function(t,o){if(z_d("83.27"),!zot(t.draggable)){var n=new DOMParser;t=(t=t.innerHTML?n.parseFromString(t.innerHTML,"text/xml"):t).getElementsByTagName("svg")?t.getElementsByTagName("svg")[0]:null}if(XMLSerializer||!zon){var r="string"==typeof t?t:(new XMLSerializer).serializeToString(t);r.match(/xmlns/i)||(r=r.replace(/svg /i,"svg  xmlns='http://www.w3.org/2000/svg' "));var i=self.URL||self.webkitURL||self,a=new Image;a.onload=function(){var t=new e.Bitmap(a);o(t)},a.src=i.createObjectURL(new document.Bloob([r],{type:"image/svg+xml;charset=utf-8"}))}else zog("ZIM svgToBitmap() - sorry, not supported in Browser")},e}(zim||{}),ZIMONON=!1;zim=function(e){return e.ZIMON={stringify:function(t,o){if(z_d("83.39"),!zot(t)){if(ZIMONON)return function n(r,i,a){if(!zot(r))if(Array.isArray(r))e.loop(r,function(e,t){n(e,r,t)});else if(r.constructor=={}.constructor)e.loop(r,function(e,t){n(t,r,e)});else if(r.type){var l={zimon:r.type};r.arguments&&(l.args=Array.prototype.slice.call(r.arguments),n(l.args)),"series"==r.type&&(l.args=Array.prototype.slice.call(r.array),n(l.args)),o&&o[r.type]&&o[r.type].props&&(l.props=[],e.loop(o[r.type].props,function(e){l.props.push(r[e])})),i?i[a]=l:t=l}else"string"!=typeof r&&"number"!=typeof r&&"boolean"!=typeof r&&null!==r&&zog("ZIMON - potentially bad JSON value"+r)}(t=e.copy(t)),JSON.stringify({obj:t,key:o,zimon:1,info:"https://zimjs.com/zimon/"});zon&&zog("ZIMON - set ZIMONON=true before using ZIMON.stringify()")}},parse:function(t,o){if(z_d("83.39"),!zot(t)){var n=JSON.parse(t),r=n.obj;return o=n.key,function t(n,i,a){if(!zot(n))if(Array.isArray(n))e.loop(n,function(e,o){t(e,n,o)});else if(zot(n.zimon)&&n.constructor=={}.constructor)e.loop(n,function(e,o){t(o,n,e)});else if(n.zimon){var l=n.zimon,s="";o&&(o[l]&&o[l].scope?s=o[l].scope+".":o.scope&&(s=o.scope+"."));var c=function(e){try{return Function("return("+e+")")()}catch(t){return zon&&zog("ZIMON: bad function scope or name: "+e),null}}(s+l),u=n.args;if(zot(u)&&(u=[]),t(u),"series"==n.type)d=e.series(u);else var d=c?new(c.bind.apply(c,[null].concat(Array.prototype.slice.call(u)))):null;i?i[a]=d:r=d,o&&o[l]&&o[l].props&&d&&e.loop(o[l].props,function(e,t){zot(n.props[t])||(d[e]=n.props[t])})}}(r),r}}},e.Wonder=function(t,o,n,r,i){function a(){0<d.length&&(e.async(i+"?wonder="+JSON.stringify(d)),d=[],g++)}function l(e,t){return zot(e)?(zog("zim.Wonder "+t+" - please provide a keyword"),!1):!c[t+"sOff"][e]}var s;if(s=zob(e.Wonder,arguments,"wid, client, app, notes, server",this))return s;if(z_d("82"),zot(t))zog("zim.Wonder() - please provide Wonder ID (see https://zimjs.com/wonder/)");else{zot(i)&&(i="http://54.237.229.197:3001/wonder");var c=this;zot(e.wonderSession)&&(e.wonderSession="W"+e.rand(1e5,999999));var u,d=[],h=setInterval(a,1e3),g=0,p=setInterval(function(){28<g&&(d.push({id:t,c:o,a:n,n:r,k:u,t:"e",v:"frequency max - terminated",s:e.wonderSession}),zog("zim.Wonder() - frequency max - terminated"),c.dispose()),g=0},3e4);this.countsOff={},this.timesOff={},this.ordersOff={},this.count=function(i){l(i,"count")&&(u=i,d.push({id:t,c:o,a:n,n:r,k:i,t:"c",v:1,s:e.wonderSession}))};var f={};this.timeStart=function(e){l(e,"time")&&(c.timeEnd(e),f[u=e]=(new Date).getTime())};var m={};this.timePause=function(e){l(e,"time")&&(m[e]||(m[e]=(new Date).getTime()))},this.timeUnpause=function(e){if(l(e,"time")&&m[e]){var t=(new Date).getTime()-m[e];f[e]&&(f[e]+=t),delete m[e]}},this.timeEnd=function(i){if(l(i,"time")&&f[i]){var a=m[i]?m[i]:(new Date).getTime(),s=Math.round((a-f[i])/1e3);delete m[i],delete f[i],d.push({id:t,c:o,a:n,n:r,k:i,t:"t",v:s,s:e.wonderSession})}},this.order=function(i,a){l(i,"order")&&(u=i,zot(a)?zog("zim.Wonder order() - please provide an item"):d.push({id:t,c:o,a:n,n:r,k:i,t:"o",v:a,s:e.wonderSession}))},this.countOff=function(e){c.countsOff[e]=1},this.countOn=function(e){delete c.countOff[e]},this.timeOff=function(e){c.timesOff[e]=1},this.timeOn=function(e){delete c.timesOff[e]},this.orderOff=function(e){c.ordersOff[e]=1},this.orderOn=function(e){delete c.ordersOff[e]},this.dispose=function(){return a(),clearInterval(h),clearInterval(p),!0}}},e}(zim||{}),window.zns||zimplify();